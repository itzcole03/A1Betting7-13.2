============================= test session starts =============================
platform win32 -- Python 3.13.5, pytest-8.4.1, pluggy-1.6.0
rootdir: C:\Users\bcmad\Downloads\A1Betting7-13.2
configfile: pytest.ini
testpaths: tests
plugins: anyio-4.9.0, Faker-37.5.3, asyncio-1.1.0, cov-6.2.1, typeguard-4.4.4
asyncio: mode=Mode.AUTO, asyncio_default_fixture_loop_scope=None, asyncio_default_test_loop_scope=function
collected 589 items

tests\backend\routes\test_api_contract_compliance.py .......             [  1%]
tests\backend\routes\test_auth_routes.py FFFFFF......                    [  3%]
tests\backend\routes\test_enhanced_ml_compat.py .                        [  3%]
tests\backend\routes\test_enhanced_ml_routes.py EEEEEEEEEEEEEEEEE        [  6%]
tests\backend\routes\test_enhanced_websocket_routes.py ................. [  9%]
                                                                         [  9%]
tests\backend\routes\test_mlb_extras.py FFFFFFFFFFFFFFF.FFFF             [ 12%]
tests\backend\routes\test_multiple_sportsbook_routes.py FFFFFF..FFFFFFF. [ 15%]
..F.                                                                     [ 15%]
tests\backend\routes\test_portfolio_optimization_routes.py .F.FF..FF...  [ 17%]
tests\backend\routes\test_prediction_engine_routes.py .F.FFFFFFFF.FFFF.  [ 20%]
tests\backend\services\test_real_time_analysis_engine_business_rules.py . [ 21%]
                                                                         [ 21%]
tests\backend\services\test_real_time_analysis_engine_rules_load.py ..   [ 21%]
tests\backend\test_health_endpoints.py .......................           [ 25%]
tests\errors\test_error_taxonomy.py F..F...s                             [ 26%]
tests\ingestion\test_ingestion_endpoints.py .FFF...F...                  [ 28%]
tests\ingestion\test_nba_ingestion_pipeline.py F.FFFFss                  [ 29%]
tests\ingestion\test_pipeline_integration.py s.                          [ 30%]
tests\ingestion\test_prop_mapper.py .F.FFFF...F..                        [ 32%]
tests\ingestion\test_taxonomy_service.py ..FF.............               [ 35%]
tests\rate_limit\test_rate_limit_basic.py FF......F                      [ 36%]
tests\security\test_payload_guard.py ............                        [ 38%]
tests\security\test_security_headers.py .FFFFFFF.FFFFFFFFFFFFFF.F.FF...F [ 44%]
                                                                         [ 44%]
tests\security\test_security_headers_basic.py F........F....             [ 46%]
tests\security\test_security_headers_core.py FFFFFF..FFFF.FFFFFFFF       [ 50%]
tests\stabilization\test_backend_lean_mode.py .........                  [ 51%]
tests\stabilization\test_health_aliases.py ..F...F.                      [ 53%]
tests\stabilization\test_stabilization_matrix.py F.FF..EF.F              [ 54%]
tests\statistical\test_drift_injection.py ..F...FFFF                     [ 56%]
tests\statistical\test_statistical_verification_suite.py EEEEEEEEEEEEEEE [ 59%]
EEEEEEF                                                                  [ 60%]
tests\test_cache_metrics_hook.py .......................                 [ 64%]
tests\test_cache_pr6.py ...............................ss                [ 69%]
tests\test_health_endpoint.py .F..FF.                                    [ 70%]
tests\test_inference_pr10.py ......................                      [ 74%]
tests\test_inference_pr9.py ..........................                   [ 79%]
tests\test_instrumentation.py .....s.........                            [ 81%]
tests\test_metrics_collector.py ................                         [ 84%]
tests\test_metrics_integration.py ...ss.....                             [ 86%]
tests\test_phase2_performance_optimization.py .FFFFFFFFFFFFF.            [ 88%]
tests\test_reliability_endpoint.py ....F..F.F.....                       [ 91%]
tests\test_streaming_integration.py FFFFFFF.FFFFF...                     [ 93%]
tests\test_streaming_performance.py FF.F..F.F.                           [ 95%]
tests\test_streaming_system.py EEEEFFFF...F..FFF..FFFF.F.                [100%]

=================================== ERRORS ====================================
_____ ERROR at setup of TestEnhancedMLRoutes.test_predict_single_success ______
tests\backend\routes\test_enhanced_ml_routes.py:49: in setup
    with patch('backend.routes.enhanced_ml_routes.enhanced_prediction_integration', self.mock_service):
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
C:\Python313\Lib\unittest\mock.py:1497: in __enter__
    original, local = self.get_original()
                      ^^^^^^^^^^^^^^^^^^^
C:\Python313\Lib\unittest\mock.py:1467: in get_original
    raise AttributeError(
E   AttributeError: <module 'backend.routes.enhanced_ml_routes' from 'C:\\Users\\bcmad\\Downloads\\A1Betting7-13.2\\backend\\routes\\enhanced_ml_routes.py'> does not have the attribute 'enhanced_prediction_integration'
__ ERROR at setup of TestEnhancedMLRoutes.test_predict_single_missing_fields __
tests\backend\routes\test_enhanced_ml_routes.py:49: in setup
    with patch('backend.routes.enhanced_ml_routes.enhanced_prediction_integration', self.mock_service):
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
C:\Python313\Lib\unittest\mock.py:1497: in __enter__
    original, local = self.get_original()
                      ^^^^^^^^^^^^^^^^^^^
C:\Python313\Lib\unittest\mock.py:1467: in get_original
    raise AttributeError(
E   AttributeError: <module 'backend.routes.enhanced_ml_routes' from 'C:\\Users\\bcmad\\Downloads\\A1Betting7-13.2\\backend\\routes\\enhanced_ml_routes.py'> does not have the attribute 'enhanced_prediction_integration'
_ ERROR at setup of TestEnhancedMLRoutes.test_predict_single_invalid_priority _
tests\backend\routes\test_enhanced_ml_routes.py:49: in setup
    with patch('backend.routes.enhanced_ml_routes.enhanced_prediction_integration', self.mock_service):
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
C:\Python313\Lib\unittest\mock.py:1497: in __enter__
    original, local = self.get_original()
                      ^^^^^^^^^^^^^^^^^^^
C:\Python313\Lib\unittest\mock.py:1467: in get_original
    raise AttributeError(
E   AttributeError: <module 'backend.routes.enhanced_ml_routes' from 'C:\\Users\\bcmad\\Downloads\\A1Betting7-13.2\\backend\\routes\\enhanced_ml_routes.py'> does not have the attribute 'enhanced_prediction_integration'
______ ERROR at setup of TestEnhancedMLRoutes.test_batch_predict_success ______
tests\backend\routes\test_enhanced_ml_routes.py:49: in setup
    with patch('backend.routes.enhanced_ml_routes.enhanced_prediction_integration', self.mock_service):
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
C:\Python313\Lib\unittest\mock.py:1497: in __enter__
    original, local = self.get_original()
                      ^^^^^^^^^^^^^^^^^^^
C:\Python313\Lib\unittest\mock.py:1467: in get_original
    raise AttributeError(
E   AttributeError: <module 'backend.routes.enhanced_ml_routes' from 'C:\\Users\\bcmad\\Downloads\\A1Betting7-13.2\\backend\\routes\\enhanced_ml_routes.py'> does not have the attribute 'enhanced_prediction_integration'
__ ERROR at setup of TestEnhancedMLRoutes.test_batch_predict_empty_requests ___
tests\backend\routes\test_enhanced_ml_routes.py:49: in setup
    with patch('backend.routes.enhanced_ml_routes.enhanced_prediction_integration', self.mock_service):
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
C:\Python313\Lib\unittest\mock.py:1497: in __enter__
    original, local = self.get_original()
                      ^^^^^^^^^^^^^^^^^^^
C:\Python313\Lib\unittest\mock.py:1467: in get_original
    raise AttributeError(
E   AttributeError: <module 'backend.routes.enhanced_ml_routes' from 'C:\\Users\\bcmad\\Downloads\\A1Betting7-13.2\\backend\\routes\\enhanced_ml_routes.py'> does not have the attribute 'enhanced_prediction_integration'
____ ERROR at setup of TestEnhancedMLRoutes.test_batch_predict_large_batch ____
tests\backend\routes\test_enhanced_ml_routes.py:49: in setup
    with patch('backend.routes.enhanced_ml_routes.enhanced_prediction_integration', self.mock_service):
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
C:\Python313\Lib\unittest\mock.py:1497: in __enter__
    original, local = self.get_original()
                      ^^^^^^^^^^^^^^^^^^^
C:\Python313\Lib\unittest\mock.py:1467: in get_original
    raise AttributeError(
E   AttributeError: <module 'backend.routes.enhanced_ml_routes' from 'C:\\Users\\bcmad\\Downloads\\A1Betting7-13.2\\backend\\routes\\enhanced_ml_routes.py'> does not have the attribute 'enhanced_prediction_integration'
_____ ERROR at setup of TestEnhancedMLRoutes.test_register_model_success ______
tests\backend\routes\test_enhanced_ml_routes.py:49: in setup
    with patch('backend.routes.enhanced_ml_routes.enhanced_prediction_integration', self.mock_service):
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
C:\Python313\Lib\unittest\mock.py:1497: in __enter__
    original, local = self.get_original()
                      ^^^^^^^^^^^^^^^^^^^
C:\Python313\Lib\unittest\mock.py:1467: in get_original
    raise AttributeError(
E   AttributeError: <module 'backend.routes.enhanced_ml_routes' from 'C:\\Users\\bcmad\\Downloads\\A1Betting7-13.2\\backend\\routes\\enhanced_ml_routes.py'> does not have the attribute 'enhanced_prediction_integration'
_______ ERROR at setup of TestEnhancedMLRoutes.test_list_models_success _______
tests\backend\routes\test_enhanced_ml_routes.py:49: in setup
    with patch('backend.routes.enhanced_ml_routes.enhanced_prediction_integration', self.mock_service):
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
C:\Python313\Lib\unittest\mock.py:1497: in __enter__
    original, local = self.get_original()
                      ^^^^^^^^^^^^^^^^^^^
C:\Python313\Lib\unittest\mock.py:1467: in get_original
    raise AttributeError(
E   AttributeError: <module 'backend.routes.enhanced_ml_routes' from 'C:\\Users\\bcmad\\Downloads\\A1Betting7-13.2\\backend\\routes\\enhanced_ml_routes.py'> does not have the attribute 'enhanced_prediction_integration'
_________ ERROR at setup of TestEnhancedMLRoutes.test_get_model_info __________
tests\backend\routes\test_enhanced_ml_routes.py:49: in setup
    with patch('backend.routes.enhanced_ml_routes.enhanced_prediction_integration', self.mock_service):
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
C:\Python313\Lib\unittest\mock.py:1497: in __enter__
    original, local = self.get_original()
                      ^^^^^^^^^^^^^^^^^^^
C:\Python313\Lib\unittest\mock.py:1467: in get_original
    raise AttributeError(
E   AttributeError: <module 'backend.routes.enhanced_ml_routes' from 'C:\\Users\\bcmad\\Downloads\\A1Betting7-13.2\\backend\\routes\\enhanced_ml_routes.py'> does not have the attribute 'enhanced_prediction_integration'
_____ ERROR at setup of TestEnhancedMLRoutes.test_get_performance_metrics _____
tests\backend\routes\test_enhanced_ml_routes.py:49: in setup
    with patch('backend.routes.enhanced_ml_routes.enhanced_prediction_integration', self.mock_service):
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
C:\Python313\Lib\unittest\mock.py:1497: in __enter__
    original, local = self.get_original()
                      ^^^^^^^^^^^^^^^^^^^
C:\Python313\Lib\unittest\mock.py:1467: in get_original
    raise AttributeError(
E   AttributeError: <module 'backend.routes.enhanced_ml_routes' from 'C:\\Users\\bcmad\\Downloads\\A1Betting7-13.2\\backend\\routes\\enhanced_ml_routes.py'> does not have the attribute 'enhanced_prediction_integration'
____ ERROR at setup of TestEnhancedMLRoutes.test_update_prediction_outcome ____
tests\backend\routes\test_enhanced_ml_routes.py:49: in setup
    with patch('backend.routes.enhanced_ml_routes.enhanced_prediction_integration', self.mock_service):
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
C:\Python313\Lib\unittest\mock.py:1497: in __enter__
    original, local = self.get_original()
                      ^^^^^^^^^^^^^^^^^^^
C:\Python313\Lib\unittest\mock.py:1467: in get_original
    raise AttributeError(
E   AttributeError: <module 'backend.routes.enhanced_ml_routes' from 'C:\\Users\\bcmad\\Downloads\\A1Betting7-13.2\\backend\\routes\\enhanced_ml_routes.py'> does not have the attribute 'enhanced_prediction_integration'
_________ ERROR at setup of TestEnhancedMLRoutes.test_compare_models __________
tests\backend\routes\test_enhanced_ml_routes.py:49: in setup
    with patch('backend.routes.enhanced_ml_routes.enhanced_prediction_integration', self.mock_service):
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
C:\Python313\Lib\unittest\mock.py:1497: in __enter__
    original, local = self.get_original()
                      ^^^^^^^^^^^^^^^^^^^
C:\Python313\Lib\unittest\mock.py:1467: in get_original
    raise AttributeError(
E   AttributeError: <module 'backend.routes.enhanced_ml_routes' from 'C:\\Users\\bcmad\\Downloads\\A1Betting7-13.2\\backend\\routes\\enhanced_ml_routes.py'> does not have the attribute 'enhanced_prediction_integration'
__________ ERROR at setup of TestEnhancedMLRoutes.test_health_check ___________
tests\backend\routes\test_enhanced_ml_routes.py:49: in setup
    with patch('backend.routes.enhanced_ml_routes.enhanced_prediction_integration', self.mock_service):
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
C:\Python313\Lib\unittest\mock.py:1497: in __enter__
    original, local = self.get_original()
                      ^^^^^^^^^^^^^^^^^^^
C:\Python313\Lib\unittest\mock.py:1467: in get_original
    raise AttributeError(
E   AttributeError: <module 'backend.routes.enhanced_ml_routes' from 'C:\\Users\\bcmad\\Downloads\\A1Betting7-13.2\\backend\\routes\\enhanced_ml_routes.py'> does not have the attribute 'enhanced_prediction_integration'
________ ERROR at setup of TestEnhancedMLRoutes.test_get_system_status ________
tests\backend\routes\test_enhanced_ml_routes.py:49: in setup
    with patch('backend.routes.enhanced_ml_routes.enhanced_prediction_integration', self.mock_service):
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
C:\Python313\Lib\unittest\mock.py:1497: in __enter__
    original, local = self.get_original()
                      ^^^^^^^^^^^^^^^^^^^
C:\Python313\Lib\unittest\mock.py:1467: in get_original
    raise AttributeError(
E   AttributeError: <module 'backend.routes.enhanced_ml_routes' from 'C:\\Users\\bcmad\\Downloads\\A1Betting7-13.2\\backend\\routes\\enhanced_ml_routes.py'> does not have the attribute 'enhanced_prediction_integration'
__ ERROR at setup of TestEnhancedMLRoutes.test_predict_single_service_error ___
tests\backend\routes\test_enhanced_ml_routes.py:49: in setup
    with patch('backend.routes.enhanced_ml_routes.enhanced_prediction_integration', self.mock_service):
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
C:\Python313\Lib\unittest\mock.py:1497: in __enter__
    original, local = self.get_original()
                      ^^^^^^^^^^^^^^^^^^^
C:\Python313\Lib\unittest\mock.py:1467: in get_original
    raise AttributeError(
E   AttributeError: <module 'backend.routes.enhanced_ml_routes' from 'C:\\Users\\bcmad\\Downloads\\A1Betting7-13.2\\backend\\routes\\enhanced_ml_routes.py'> does not have the attribute 'enhanced_prediction_integration'
______ ERROR at setup of TestEnhancedMLRoutes.test_invalid_endpoint_404 _______
tests\backend\routes\test_enhanced_ml_routes.py:49: in setup
    with patch('backend.routes.enhanced_ml_routes.enhanced_prediction_integration', self.mock_service):
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
C:\Python313\Lib\unittest\mock.py:1497: in __enter__
    original, local = self.get_original()
                      ^^^^^^^^^^^^^^^^^^^
C:\Python313\Lib\unittest\mock.py:1467: in get_original
    raise AttributeError(
E   AttributeError: <module 'backend.routes.enhanced_ml_routes' from 'C:\\Users\\bcmad\\Downloads\\A1Betting7-13.2\\backend\\routes\\enhanced_ml_routes.py'> does not have the attribute 'enhanced_prediction_integration'
__ ERROR at setup of TestEnhancedMLRoutes.test_predict_single_response_time ___
tests\backend\routes\test_enhanced_ml_routes.py:49: in setup
    with patch('backend.routes.enhanced_ml_routes.enhanced_prediction_integration', self.mock_service):
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
C:\Python313\Lib\unittest\mock.py:1497: in __enter__
    original, local = self.get_original()
                      ^^^^^^^^^^^^^^^^^^^
C:\Python313\Lib\unittest\mock.py:1467: in get_original
    raise AttributeError(
E   AttributeError: <module 'backend.routes.enhanced_ml_routes' from 'C:\\Users\\bcmad\\Downloads\\A1Betting7-13.2\\backend\\routes\\enhanced_ml_routes.py'> does not have the attribute 'enhanced_prediction_integration'
_ ERROR at setup of TestLeanModeDisablesMonitors.test_lean_mode_disables_monitors _
tests\stabilization\test_stabilization_matrix.py:214: in mock_monitoring_services
    with patch('backend.services.enhanced_monitoring_alerting.EnhancedMonitoringAlerting') as mock_monitoring, \
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
C:\Python313\Lib\unittest\mock.py:1481: in __enter__
    self.target = self.getter()
                  ^^^^^^^^^^^^^
C:\Python313\Lib\pkgutil.py:528: in resolve_name
    result = getattr(result, p)
             ^^^^^^^^^^^^^^^^^^
E   AttributeError: module 'backend.services' has no attribute 'enhanced_monitoring_alerting'
___ ERROR at setup of TestDeterministicMonteCarlo.test_seed_reproducibility ___
file C:\Users\bcmad\Downloads\A1Betting7-13.2\tests\statistical\test_statistical_verification_suite.py, line 41
      def test_seed_reproducibility(self, statistical_suite):
E       fixture 'statistical_suite' not found
>       available fixtures: _class_scoped_runner, _function_scoped_runner, _module_scoped_runner, _package_scoped_runner, _session_faker, _session_scoped_runner, anyio_backend, anyio_backend_name, anyio_backend_options, app, assert_response_format, cache, capfd, capfdbinary, caplog, capsys, capsysbinary, capteesys, ci_statistical_baseline, client, cov, doctest_namespace, ensure_statistical_dependencies, event_loop, event_loop_policy, faker, free_tcp_port, free_tcp_port_factory, free_udp_port, free_udp_port_factory, load_test_data, mock_arbitrage_opportunity, mock_enhanced_ml_prediction, mock_enhanced_prediction_integration, mock_enhanced_websocket_service, mock_mlb_game, mock_player_data, mock_prop_bet, mock_request_context, mock_unified_sportsbook_service, mock_websocket_message, monkeypatch, no_cover, performance_timer, pytestconfig, record_property, record_testsuite_property, record_xml_attribute, recwarn, statistical_test_config, sync_client, test_db_engine, test_db_session, test_env, tmp_path, tmp_path_factory, tmpdir, tmpdir_factory, unused_tcp_port, unused_tcp_port_factory, unused_udp_port, unused_udp_port_factory
>       use 'pytest --fixtures [testpath]' for help on them.

C:\Users\bcmad\Downloads\A1Betting7-13.2\tests\statistical\test_statistical_verification_suite.py:41
_ ERROR at setup of TestDeterministicMonteCarlo.test_deterministic_seed_generation _
file C:\Users\bcmad\Downloads\A1Betting7-13.2\tests\statistical\test_statistical_verification_suite.py, line 54
      def test_deterministic_seed_generation(self, statistical_suite):
E       fixture 'statistical_suite' not found
>       available fixtures: _class_scoped_runner, _function_scoped_runner, _module_scoped_runner, _package_scoped_runner, _session_faker, _session_scoped_runner, anyio_backend, anyio_backend_name, anyio_backend_options, app, assert_response_format, cache, capfd, capfdbinary, caplog, capsys, capsysbinary, capteesys, ci_statistical_baseline, client, cov, doctest_namespace, ensure_statistical_dependencies, event_loop, event_loop_policy, faker, free_tcp_port, free_tcp_port_factory, free_udp_port, free_udp_port_factory, load_test_data, mock_arbitrage_opportunity, mock_enhanced_ml_prediction, mock_enhanced_prediction_integration, mock_enhanced_websocket_service, mock_mlb_game, mock_player_data, mock_prop_bet, mock_request_context, mock_unified_sportsbook_service, mock_websocket_message, monkeypatch, no_cover, performance_timer, pytestconfig, record_property, record_testsuite_property, record_xml_attribute, recwarn, statistical_test_config, sync_client, test_db_engine, test_db_session, test_env, tmp_path, tmp_path_factory, tmpdir, tmpdir_factory, unused_tcp_port, unused_tcp_port_factory, unused_udp_port, unused_udp_port_factory
>       use 'pytest --fixtures [testpath]' for help on them.

C:\Users\bcmad\Downloads\A1Betting7-13.2\tests\statistical\test_statistical_verification_suite.py:54
_ ERROR at setup of TestDeterministicMonteCarlo.test_monte_carlo_convergence __
file C:\Users\bcmad\Downloads\A1Betting7-13.2\tests\statistical\test_statistical_verification_suite.py, line 69
      def test_monte_carlo_convergence(self, statistical_suite):
E       fixture 'statistical_suite' not found
>       available fixtures: _class_scoped_runner, _function_scoped_runner, _module_scoped_runner, _package_scoped_runner, _session_faker, _session_scoped_runner, anyio_backend, anyio_backend_name, anyio_backend_options, app, assert_response_format, cache, capfd, capfdbinary, caplog, capsys, capsysbinary, capteesys, ci_statistical_baseline, client, cov, doctest_namespace, ensure_statistical_dependencies, event_loop, event_loop_policy, faker, free_tcp_port, free_tcp_port_factory, free_udp_port, free_udp_port_factory, load_test_data, mock_arbitrage_opportunity, mock_enhanced_ml_prediction, mock_enhanced_prediction_integration, mock_enhanced_websocket_service, mock_mlb_game, mock_player_data, mock_prop_bet, mock_request_context, mock_unified_sportsbook_service, mock_websocket_message, monkeypatch, no_cover, performance_timer, pytestconfig, record_property, record_testsuite_property, record_xml_attribute, recwarn, statistical_test_config, sync_client, test_db_engine, test_db_session, test_env, tmp_path, tmp_path_factory, tmpdir, tmpdir_factory, unused_tcp_port, unused_tcp_port_factory, unused_udp_port, unused_udp_port_factory
>       use 'pytest --fixtures [testpath]' for help on them.

C:\Users\bcmad\Downloads\A1Betting7-13.2\tests\statistical\test_statistical_verification_suite.py:69
_______ ERROR at setup of TestKSTestRunner.test_ks_normal_distribution ________
file C:\Users\bcmad\Downloads\A1Betting7-13.2\tests\statistical\test_statistical_verification_suite.py, line 95
      def test_ks_normal_distribution(self, statistical_suite):
E       fixture 'statistical_suite' not found
>       available fixtures: _class_scoped_runner, _function_scoped_runner, _module_scoped_runner, _package_scoped_runner, _session_faker, _session_scoped_runner, anyio_backend, anyio_backend_name, anyio_backend_options, app, assert_response_format, cache, capfd, capfdbinary, caplog, capsys, capsysbinary, capteesys, ci_statistical_baseline, client, cov, doctest_namespace, ensure_statistical_dependencies, event_loop, event_loop_policy, faker, free_tcp_port, free_tcp_port_factory, free_udp_port, free_udp_port_factory, load_test_data, mock_arbitrage_opportunity, mock_enhanced_ml_prediction, mock_enhanced_prediction_integration, mock_enhanced_websocket_service, mock_mlb_game, mock_player_data, mock_prop_bet, mock_request_context, mock_unified_sportsbook_service, mock_websocket_message, monkeypatch, no_cover, performance_timer, pytestconfig, record_property, record_testsuite_property, record_xml_attribute, recwarn, statistical_test_config, sync_client, test_db_engine, test_db_session, test_env, tmp_path, tmp_path_factory, tmpdir, tmpdir_factory, unused_tcp_port, unused_tcp_port_factory, unused_udp_port, unused_udp_port_factory
>       use 'pytest --fixtures [testpath]' for help on them.

C:\Users\bcmad\Downloads\A1Betting7-13.2\tests\statistical\test_statistical_verification_suite.py:95
_ ERROR at setup of TestKSTestRunner.test_ks_distribution_mismatch_detection __
file C:\Users\bcmad\Downloads\A1Betting7-13.2\tests\statistical\test_statistical_verification_suite.py, line 116
      def test_ks_distribution_mismatch_detection(self, statistical_suite):
E       fixture 'statistical_suite' not found
>       available fixtures: _class_scoped_runner, _function_scoped_runner, _module_scoped_runner, _package_scoped_runner, _session_faker, _session_scoped_runner, anyio_backend, anyio_backend_name, anyio_backend_options, app, assert_response_format, cache, capfd, capfdbinary, caplog, capsys, capsysbinary, capteesys, ci_statistical_baseline, client, cov, doctest_namespace, ensure_statistical_dependencies, event_loop, event_loop_policy, faker, free_tcp_port, free_tcp_port_factory, free_udp_port, free_udp_port_factory, load_test_data, mock_arbitrage_opportunity, mock_enhanced_ml_prediction, mock_enhanced_prediction_integration, mock_enhanced_websocket_service, mock_mlb_game, mock_player_data, mock_prop_bet, mock_request_context, mock_unified_sportsbook_service, mock_websocket_message, monkeypatch, no_cover, performance_timer, pytestconfig, record_property, record_testsuite_property, record_xml_attribute, recwarn, statistical_test_config, sync_client, test_db_engine, test_db_session, test_env, tmp_path, tmp_path_factory, tmpdir, tmpdir_factory, unused_tcp_port, unused_tcp_port_factory, unused_udp_port, unused_udp_port_factory
>       use 'pytest --fixtures [testpath]' for help on them.

C:\Users\bcmad\Downloads\A1Betting7-13.2\tests\statistical\test_statistical_verification_suite.py:116
__ ERROR at setup of TestKSTestRunner.test_ks_critical_divergence_threshold ___
file C:\Users\bcmad\Downloads\A1Betting7-13.2\tests\statistical\test_statistical_verification_suite.py, line 136
      def test_ks_critical_divergence_threshold(self, statistical_suite):
E       fixture 'statistical_suite' not found
>       available fixtures: _class_scoped_runner, _function_scoped_runner, _module_scoped_runner, _package_scoped_runner, _session_faker, _session_scoped_runner, anyio_backend, anyio_backend_name, anyio_backend_options, app, assert_response_format, cache, capfd, capfdbinary, caplog, capsys, capsysbinary, capteesys, ci_statistical_baseline, client, cov, doctest_namespace, ensure_statistical_dependencies, event_loop, event_loop_policy, faker, free_tcp_port, free_tcp_port_factory, free_udp_port, free_udp_port_factory, load_test_data, mock_arbitrage_opportunity, mock_enhanced_ml_prediction, mock_enhanced_prediction_integration, mock_enhanced_websocket_service, mock_mlb_game, mock_player_data, mock_prop_bet, mock_request_context, mock_unified_sportsbook_service, mock_websocket_message, monkeypatch, no_cover, performance_timer, pytestconfig, record_property, record_testsuite_property, record_xml_attribute, recwarn, statistical_test_config, sync_client, test_db_engine, test_db_session, test_env, tmp_path, tmp_path_factory, tmpdir, tmpdir_factory, unused_tcp_port, unused_tcp_port_factory, unused_udp_port, unused_udp_port_factory
>       use 'pytest --fixtures [testpath]' for help on them.

C:\Users\bcmad\Downloads\A1Betting7-13.2\tests\statistical\test_statistical_verification_suite.py:136
_ ERROR at setup of TestCorrelationPSDMonitor.test_valid_correlation_matrix_validation _
file C:\Users\bcmad\Downloads\A1Betting7-13.2\tests\statistical\test_statistical_verification_suite.py, line 161
      def test_valid_correlation_matrix_validation(self, statistical_suite):
E       fixture 'statistical_suite' not found
>       available fixtures: _class_scoped_runner, _function_scoped_runner, _module_scoped_runner, _package_scoped_runner, _session_faker, _session_scoped_runner, anyio_backend, anyio_backend_name, anyio_backend_options, app, assert_response_format, cache, capfd, capfdbinary, caplog, capsys, capsysbinary, capteesys, ci_statistical_baseline, client, cov, doctest_namespace, ensure_statistical_dependencies, event_loop, event_loop_policy, faker, free_tcp_port, free_tcp_port_factory, free_udp_port, free_udp_port_factory, load_test_data, mock_arbitrage_opportunity, mock_enhanced_ml_prediction, mock_enhanced_prediction_integration, mock_enhanced_websocket_service, mock_mlb_game, mock_player_data, mock_prop_bet, mock_request_context, mock_unified_sportsbook_service, mock_websocket_message, monkeypatch, no_cover, performance_timer, pytestconfig, record_property, record_testsuite_property, record_xml_attribute, recwarn, statistical_test_config, sync_client, test_db_engine, test_db_session, test_env, tmp_path, tmp_path_factory, tmpdir, tmpdir_factory, unused_tcp_port, unused_tcp_port_factory, unused_udp_port, unused_udp_port_factory
>       use 'pytest --fixtures [testpath]' for help on them.

C:\Users\bcmad\Downloads\A1Betting7-13.2\tests\statistical\test_statistical_verification_suite.py:161
_ ERROR at setup of TestCorrelationPSDMonitor.test_invalid_correlation_matrix_detection _
file C:\Users\bcmad\Downloads\A1Betting7-13.2\tests\statistical\test_statistical_verification_suite.py, line 176
      def test_invalid_correlation_matrix_detection(self, statistical_suite):
E       fixture 'statistical_suite' not found
>       available fixtures: _class_scoped_runner, _function_scoped_runner, _module_scoped_runner, _package_scoped_runner, _session_faker, _session_scoped_runner, anyio_backend, anyio_backend_name, anyio_backend_options, app, assert_response_format, cache, capfd, capfdbinary, caplog, capsys, capsysbinary, capteesys, ci_statistical_baseline, client, cov, doctest_namespace, ensure_statistical_dependencies, event_loop, event_loop_policy, faker, free_tcp_port, free_tcp_port_factory, free_udp_port, free_udp_port_factory, load_test_data, mock_arbitrage_opportunity, mock_enhanced_ml_prediction, mock_enhanced_prediction_integration, mock_enhanced_websocket_service, mock_mlb_game, mock_player_data, mock_prop_bet, mock_request_context, mock_unified_sportsbook_service, mock_websocket_message, monkeypatch, no_cover, performance_timer, pytestconfig, record_property, record_testsuite_property, record_xml_attribute, recwarn, statistical_test_config, sync_client, test_db_engine, test_db_session, test_env, tmp_path, tmp_path_factory, tmpdir, tmpdir_factory, unused_tcp_port, unused_tcp_port_factory, unused_udp_port, unused_udp_port_factory
>       use 'pytest --fixtures [testpath]' for help on them.

C:\Users\bcmad\Downloads\A1Betting7-13.2\tests\statistical\test_statistical_verification_suite.py:176
_ ERROR at setup of TestCorrelationPSDMonitor.test_correlation_drift_detection _
file C:\Users\bcmad\Downloads\A1Betting7-13.2\tests\statistical\test_statistical_verification_suite.py, line 194
      def test_correlation_drift_detection(self, statistical_suite):
E       fixture 'statistical_suite' not found
>       available fixtures: _class_scoped_runner, _function_scoped_runner, _module_scoped_runner, _package_scoped_runner, _session_faker, _session_scoped_runner, anyio_backend, anyio_backend_name, anyio_backend_options, app, assert_response_format, cache, capfd, capfdbinary, caplog, capsys, capsysbinary, capteesys, ci_statistical_baseline, client, cov, doctest_namespace, ensure_statistical_dependencies, event_loop, event_loop_policy, faker, free_tcp_port, free_tcp_port_factory, free_udp_port, free_udp_port_factory, load_test_data, mock_arbitrage_opportunity, mock_enhanced_ml_prediction, mock_enhanced_prediction_integration, mock_enhanced_websocket_service, mock_mlb_game, mock_player_data, mock_prop_bet, mock_request_context, mock_unified_sportsbook_service, mock_websocket_message, monkeypatch, no_cover, performance_timer, pytestconfig, record_property, record_testsuite_property, record_xml_attribute, recwarn, statistical_test_config, sync_client, test_db_engine, test_db_session, test_env, tmp_path, tmp_path_factory, tmpdir, tmpdir_factory, unused_tcp_port, unused_tcp_port_factory, unused_udp_port, unused_udp_port_factory
>       use 'pytest --fixtures [testpath]' for help on them.

C:\Users\bcmad\Downloads\A1Betting7-13.2\tests\statistical\test_statistical_verification_suite.py:194
_ ERROR at setup of TestCorrelationPSDMonitor.test_eigenvalue_threshold_monitoring _
file C:\Users\bcmad\Downloads\A1Betting7-13.2\tests\statistical\test_statistical_verification_suite.py, line 217
      def test_eigenvalue_threshold_monitoring(self, statistical_suite):
E       fixture 'statistical_suite' not found
>       available fixtures: _class_scoped_runner, _function_scoped_runner, _module_scoped_runner, _package_scoped_runner, _session_faker, _session_scoped_runner, anyio_backend, anyio_backend_name, anyio_backend_options, app, assert_response_format, cache, capfd, capfdbinary, caplog, capsys, capsysbinary, capteesys, ci_statistical_baseline, client, cov, doctest_namespace, ensure_statistical_dependencies, event_loop, event_loop_policy, faker, free_tcp_port, free_tcp_port_factory, free_udp_port, free_udp_port_factory, load_test_data, mock_arbitrage_opportunity, mock_enhanced_ml_prediction, mock_enhanced_prediction_integration, mock_enhanced_websocket_service, mock_mlb_game, mock_player_data, mock_prop_bet, mock_request_context, mock_unified_sportsbook_service, mock_websocket_message, monkeypatch, no_cover, performance_timer, pytestconfig, record_property, record_testsuite_property, record_xml_attribute, recwarn, statistical_test_config, sync_client, test_db_engine, test_db_session, test_env, tmp_path, tmp_path_factory, tmpdir, tmpdir_factory, unused_tcp_port, unused_tcp_port_factory, unused_udp_port, unused_udp_port_factory
>       use 'pytest --fixtures [testpath]' for help on them.

C:\Users\bcmad\Downloads\A1Betting7-13.2\tests\statistical\test_statistical_verification_suite.py:217
______ ERROR at setup of TestCIWidthGuard.test_baseline_ci_establishment ______
file C:\Users\bcmad\Downloads\A1Betting7-13.2\tests\statistical\test_statistical_verification_suite.py, line 241
      def test_baseline_ci_establishment(self, statistical_suite):
E       fixture 'statistical_suite' not found
>       available fixtures: _class_scoped_runner, _function_scoped_runner, _module_scoped_runner, _package_scoped_runner, _session_faker, _session_scoped_runner, anyio_backend, anyio_backend_name, anyio_backend_options, app, assert_response_format, cache, capfd, capfdbinary, caplog, capsys, capsysbinary, capteesys, ci_statistical_baseline, client, cov, doctest_namespace, ensure_statistical_dependencies, event_loop, event_loop_policy, faker, free_tcp_port, free_tcp_port_factory, free_udp_port, free_udp_port_factory, load_test_data, mock_arbitrage_opportunity, mock_enhanced_ml_prediction, mock_enhanced_prediction_integration, mock_enhanced_websocket_service, mock_mlb_game, mock_player_data, mock_prop_bet, mock_request_context, mock_unified_sportsbook_service, mock_websocket_message, monkeypatch, no_cover, performance_timer, pytestconfig, record_property, record_testsuite_property, record_xml_attribute, recwarn, statistical_test_config, sync_client, test_db_engine, test_db_session, test_env, tmp_path, tmp_path_factory, tmpdir, tmpdir_factory, unused_tcp_port, unused_tcp_port_factory, unused_udp_port, unused_udp_port_factory
>       use 'pytest --fixtures [testpath]' for help on them.

C:\Users\bcmad\Downloads\A1Betting7-13.2\tests\statistical\test_statistical_verification_suite.py:241
____ ERROR at setup of TestCIWidthGuard.test_ci_width_regression_detection ____
file C:\Users\bcmad\Downloads\A1Betting7-13.2\tests\statistical\test_statistical_verification_suite.py, line 257
      def test_ci_width_regression_detection(self, statistical_suite):
E       fixture 'statistical_suite' not found
>       available fixtures: _class_scoped_runner, _function_scoped_runner, _module_scoped_runner, _package_scoped_runner, _session_faker, _session_scoped_runner, anyio_backend, anyio_backend_name, anyio_backend_options, app, assert_response_format, cache, capfd, capfdbinary, caplog, capsys, capsysbinary, capteesys, ci_statistical_baseline, client, cov, doctest_namespace, ensure_statistical_dependencies, event_loop, event_loop_policy, faker, free_tcp_port, free_tcp_port_factory, free_udp_port, free_udp_port_factory, load_test_data, mock_arbitrage_opportunity, mock_enhanced_ml_prediction, mock_enhanced_prediction_integration, mock_enhanced_websocket_service, mock_mlb_game, mock_player_data, mock_prop_bet, mock_request_context, mock_unified_sportsbook_service, mock_websocket_message, monkeypatch, no_cover, performance_timer, pytestconfig, record_property, record_testsuite_property, record_xml_attribute, recwarn, statistical_test_config, sync_client, test_db_engine, test_db_session, test_env, tmp_path, tmp_path_factory, tmpdir, tmpdir_factory, unused_tcp_port, unused_tcp_port_factory, unused_udp_port, unused_udp_port_factory
>       use 'pytest --fixtures [testpath]' for help on them.

C:\Users\bcmad\Downloads\A1Betting7-13.2\tests\statistical\test_statistical_verification_suite.py:257
____ ERROR at setup of TestCIWidthGuard.test_ci_width_stable_distribution _____
file C:\Users\bcmad\Downloads\A1Betting7-13.2\tests\statistical\test_statistical_verification_suite.py, line 281
      def test_ci_width_stable_distribution(self, statistical_suite):
E       fixture 'statistical_suite' not found
>       available fixtures: _class_scoped_runner, _function_scoped_runner, _module_scoped_runner, _package_scoped_runner, _session_faker, _session_scoped_runner, anyio_backend, anyio_backend_name, anyio_backend_options, app, assert_response_format, cache, capfd, capfdbinary, caplog, capsys, capsysbinary, capteesys, ci_statistical_baseline, client, cov, doctest_namespace, ensure_statistical_dependencies, event_loop, event_loop_policy, faker, free_tcp_port, free_tcp_port_factory, free_udp_port, free_udp_port_factory, load_test_data, mock_arbitrage_opportunity, mock_enhanced_ml_prediction, mock_enhanced_prediction_integration, mock_enhanced_websocket_service, mock_mlb_game, mock_player_data, mock_prop_bet, mock_request_context, mock_unified_sportsbook_service, mock_websocket_message, monkeypatch, no_cover, performance_timer, pytestconfig, record_property, record_testsuite_property, record_xml_attribute, recwarn, statistical_test_config, sync_client, test_db_engine, test_db_session, test_env, tmp_path, tmp_path_factory, tmpdir, tmpdir_factory, unused_tcp_port, unused_tcp_port_factory, unused_udp_port, unused_udp_port_factory
>       use 'pytest --fixtures [testpath]' for help on them.

C:\Users\bcmad\Downloads\A1Betting7-13.2\tests\statistical\test_statistical_verification_suite.py:281
__ ERROR at setup of TestFullStatisticalSuite.test_complete_suite_execution ___
file C:\Users\bcmad\Downloads\A1Betting7-13.2\tests\statistical\test_statistical_verification_suite.py, line 307
      def test_complete_suite_execution(self, statistical_suite):
E       fixture 'statistical_suite' not found
>       available fixtures: _class_scoped_runner, _function_scoped_runner, _module_scoped_runner, _package_scoped_runner, _session_faker, _session_scoped_runner, anyio_backend, anyio_backend_name, anyio_backend_options, app, assert_response_format, cache, capfd, capfdbinary, caplog, capsys, capsysbinary, capteesys, ci_statistical_baseline, client, cov, doctest_namespace, ensure_statistical_dependencies, event_loop, event_loop_policy, faker, free_tcp_port, free_tcp_port_factory, free_udp_port, free_udp_port_factory, load_test_data, mock_arbitrage_opportunity, mock_enhanced_ml_prediction, mock_enhanced_prediction_integration, mock_enhanced_websocket_service, mock_mlb_game, mock_player_data, mock_prop_bet, mock_request_context, mock_unified_sportsbook_service, mock_websocket_message, monkeypatch, no_cover, performance_timer, pytestconfig, record_property, record_testsuite_property, record_xml_attribute, recwarn, statistical_test_config, sync_client, test_db_engine, test_db_session, test_env, tmp_path, tmp_path_factory, tmpdir, tmpdir_factory, unused_tcp_port, unused_tcp_port_factory, unused_udp_port, unused_udp_port_factory
>       use 'pytest --fixtures [testpath]' for help on them.

C:\Users\bcmad\Downloads\A1Betting7-13.2\tests\statistical\test_statistical_verification_suite.py:307
_ ERROR at setup of TestFullStatisticalSuite.test_suite_deterministic_behavior _
file C:\Users\bcmad\Downloads\A1Betting7-13.2\tests\statistical\test_statistical_verification_suite.py, line 326
      def test_suite_deterministic_behavior(self, statistical_suite):
E       fixture 'statistical_suite' not found
>       available fixtures: _class_scoped_runner, _function_scoped_runner, _module_scoped_runner, _package_scoped_runner, _session_faker, _session_scoped_runner, anyio_backend, anyio_backend_name, anyio_backend_options, app, assert_response_format, cache, capfd, capfdbinary, caplog, capsys, capsysbinary, capteesys, ci_statistical_baseline, client, cov, doctest_namespace, ensure_statistical_dependencies, event_loop, event_loop_policy, faker, free_tcp_port, free_tcp_port_factory, free_udp_port, free_udp_port_factory, load_test_data, mock_arbitrage_opportunity, mock_enhanced_ml_prediction, mock_enhanced_prediction_integration, mock_enhanced_websocket_service, mock_mlb_game, mock_player_data, mock_prop_bet, mock_request_context, mock_unified_sportsbook_service, mock_websocket_message, monkeypatch, no_cover, performance_timer, pytestconfig, record_property, record_testsuite_property, record_xml_attribute, recwarn, statistical_test_config, sync_client, test_db_engine, test_db_session, test_env, tmp_path, tmp_path_factory, tmpdir, tmpdir_factory, unused_tcp_port, unused_tcp_port_factory, unused_udp_port, unused_udp_port_factory
>       use 'pytest --fixtures [testpath]' for help on them.

C:\Users\bcmad\Downloads\A1Betting7-13.2\tests\statistical\test_statistical_verification_suite.py:326
___ ERROR at setup of TestFullStatisticalSuite.test_build_failure_mechanism ___
file C:\Users\bcmad\Downloads\A1Betting7-13.2\tests\statistical\test_statistical_verification_suite.py, line 344
      def test_build_failure_mechanism(self, statistical_suite):
E       fixture 'statistical_suite' not found
>       available fixtures: _class_scoped_runner, _function_scoped_runner, _module_scoped_runner, _package_scoped_runner, _session_faker, _session_scoped_runner, anyio_backend, anyio_backend_name, anyio_backend_options, app, assert_response_format, cache, capfd, capfdbinary, caplog, capsys, capsysbinary, capteesys, ci_statistical_baseline, client, cov, doctest_namespace, ensure_statistical_dependencies, event_loop, event_loop_policy, faker, free_tcp_port, free_tcp_port_factory, free_udp_port, free_udp_port_factory, load_test_data, mock_arbitrage_opportunity, mock_enhanced_ml_prediction, mock_enhanced_prediction_integration, mock_enhanced_websocket_service, mock_mlb_game, mock_player_data, mock_prop_bet, mock_request_context, mock_unified_sportsbook_service, mock_websocket_message, monkeypatch, no_cover, performance_timer, pytestconfig, record_property, record_testsuite_property, record_xml_attribute, recwarn, statistical_test_config, sync_client, test_db_engine, test_db_session, test_env, tmp_path, tmp_path_factory, tmpdir, tmpdir_factory, unused_tcp_port, unused_tcp_port_factory, unused_udp_port, unused_udp_port_factory
>       use 'pytest --fixtures [testpath]' for help on them.

C:\Users\bcmad\Downloads\A1Betting7-13.2\tests\statistical\test_statistical_verification_suite.py:344
__ ERROR at setup of TestFullStatisticalSuite.test_alert_trigger_conditions ___
file C:\Users\bcmad\Downloads\A1Betting7-13.2\tests\statistical\test_statistical_verification_suite.py, line 361
      def test_alert_trigger_conditions(self, statistical_suite):
E       fixture 'statistical_suite' not found
>       available fixtures: _class_scoped_runner, _function_scoped_runner, _module_scoped_runner, _package_scoped_runner, _session_faker, _session_scoped_runner, anyio_backend, anyio_backend_name, anyio_backend_options, app, assert_response_format, cache, capfd, capfdbinary, caplog, capsys, capsysbinary, capteesys, ci_statistical_baseline, client, cov, doctest_namespace, ensure_statistical_dependencies, event_loop, event_loop_policy, faker, free_tcp_port, free_tcp_port_factory, free_udp_port, free_udp_port_factory, load_test_data, mock_arbitrage_opportunity, mock_enhanced_ml_prediction, mock_enhanced_prediction_integration, mock_enhanced_websocket_service, mock_mlb_game, mock_player_data, mock_prop_bet, mock_request_context, mock_unified_sportsbook_service, mock_websocket_message, monkeypatch, no_cover, performance_timer, pytestconfig, record_property, record_testsuite_property, record_xml_attribute, recwarn, statistical_test_config, sync_client, test_db_engine, test_db_session, test_env, tmp_path, tmp_path_factory, tmpdir, tmpdir_factory, unused_tcp_port, unused_tcp_port_factory, unused_udp_port, unused_udp_port_factory
>       use 'pytest --fixtures [testpath]' for help on them.

C:\Users\bcmad\Downloads\A1Betting7-13.2\tests\statistical\test_statistical_verification_suite.py:361
___ ERROR at setup of TestFullStatisticalSuite.test_ci_cd_integration_ready ___
file C:\Users\bcmad\Downloads\A1Betting7-13.2\tests\statistical\test_statistical_verification_suite.py, line 373
      @pytest.mark.asyncio
      async def test_ci_cd_integration_ready(self, statistical_suite):
          """Test that suite is ready for CI/CD integration"""

          # Run suite in async context (simulating CI environment)
          summary = await asyncio.get_event_loop().run_in_executor(
              None, statistical_suite.run_full_suite
          )

          # Verify CI-ready output format
          assert isinstance(summary, dict), "Summary must be JSON-serializable dict"
          assert summary['timestamp'], "Must include timestamp"
          assert 'build_should_fail' in summary, "Must provide clear build decision"

          # Test result persistence
          output_file = statistical_suite.save_results()
          assert Path(output_file).exists(), "Results file must be created"

          # Clean up
          Path(output_file).unlink()
E       fixture 'statistical_suite' not found
>       available fixtures: _class_scoped_runner, _function_scoped_runner, _module_scoped_runner, _package_scoped_runner, _session_faker, _session_scoped_runner, anyio_backend, anyio_backend_name, anyio_backend_options, app, assert_response_format, cache, capfd, capfdbinary, caplog, capsys, capsysbinary, capteesys, ci_statistical_baseline, client, cov, doctest_namespace, ensure_statistical_dependencies, event_loop, event_loop_policy, faker, free_tcp_port, free_tcp_port_factory, free_udp_port, free_udp_port_factory, load_test_data, mock_arbitrage_opportunity, mock_enhanced_ml_prediction, mock_enhanced_prediction_integration, mock_enhanced_websocket_service, mock_mlb_game, mock_player_data, mock_prop_bet, mock_request_context, mock_unified_sportsbook_service, mock_websocket_message, monkeypatch, no_cover, performance_timer, pytestconfig, record_property, record_testsuite_property, record_xml_attribute, recwarn, statistical_test_config, sync_client, test_db_engine, test_db_session, test_env, tmp_path, tmp_path_factory, tmpdir, tmpdir_factory, unused_tcp_port, unused_tcp_port_factory, unused_udp_port, unused_udp_port_factory
>       use 'pytest --fixtures [testpath]' for help on them.

C:\Users\bcmad\Downloads\A1Betting7-13.2\tests\statistical\test_statistical_verification_suite.py:373
_ ERROR at setup of TestIntentionalDriftInjection.test_intentional_ks_divergence_injection _
file C:\Users\bcmad\Downloads\A1Betting7-13.2\tests\statistical\test_statistical_verification_suite.py, line 398
      def test_intentional_ks_divergence_injection(self, statistical_suite):
E       fixture 'statistical_suite' not found
>       available fixtures: _class_scoped_runner, _function_scoped_runner, _module_scoped_runner, _package_scoped_runner, _session_faker, _session_scoped_runner, anyio_backend, anyio_backend_name, anyio_backend_options, app, assert_response_format, cache, capfd, capfdbinary, caplog, capsys, capsysbinary, capteesys, ci_statistical_baseline, client, cov, doctest_namespace, ensure_statistical_dependencies, event_loop, event_loop_policy, faker, free_tcp_port, free_tcp_port_factory, free_udp_port, free_udp_port_factory, load_test_data, mock_arbitrage_opportunity, mock_enhanced_ml_prediction, mock_enhanced_prediction_integration, mock_enhanced_websocket_service, mock_mlb_game, mock_player_data, mock_prop_bet, mock_request_context, mock_unified_sportsbook_service, mock_websocket_message, monkeypatch, no_cover, performance_timer, pytestconfig, record_property, record_testsuite_property, record_xml_attribute, recwarn, statistical_test_config, sync_client, test_db_engine, test_db_session, test_env, tmp_path, tmp_path_factory, tmpdir, tmpdir_factory, unused_tcp_port, unused_tcp_port_factory, unused_udp_port, unused_udp_port_factory
>       use 'pytest --fixtures [testpath]' for help on them.

C:\Users\bcmad\Downloads\A1Betting7-13.2\tests\statistical\test_statistical_verification_suite.py:398
_ ERROR at setup of TestIntentionalDriftInjection.test_intentional_correlation_drift_injection _
file C:\Users\bcmad\Downloads\A1Betting7-13.2\tests\statistical\test_statistical_verification_suite.py, line 418
      def test_intentional_correlation_drift_injection(self, statistical_suite):
E       fixture 'statistical_suite' not found
>       available fixtures: _class_scoped_runner, _function_scoped_runner, _module_scoped_runner, _package_scoped_runner, _session_faker, _session_scoped_runner, anyio_backend, anyio_backend_name, anyio_backend_options, app, assert_response_format, cache, capfd, capfdbinary, caplog, capsys, capsysbinary, capteesys, ci_statistical_baseline, client, cov, doctest_namespace, ensure_statistical_dependencies, event_loop, event_loop_policy, faker, free_tcp_port, free_tcp_port_factory, free_udp_port, free_udp_port_factory, load_test_data, mock_arbitrage_opportunity, mock_enhanced_ml_prediction, mock_enhanced_prediction_integration, mock_enhanced_websocket_service, mock_mlb_game, mock_player_data, mock_prop_bet, mock_request_context, mock_unified_sportsbook_service, mock_websocket_message, monkeypatch, no_cover, performance_timer, pytestconfig, record_property, record_testsuite_property, record_xml_attribute, recwarn, statistical_test_config, sync_client, test_db_engine, test_db_session, test_env, tmp_path, tmp_path_factory, tmpdir, tmpdir_factory, unused_tcp_port, unused_tcp_port_factory, unused_udp_port, unused_udp_port_factory
>       use 'pytest --fixtures [testpath]' for help on them.

C:\Users\bcmad\Downloads\A1Betting7-13.2\tests\statistical\test_statistical_verification_suite.py:418
_ ERROR at setup of TestIntentionalDriftInjection.test_intentional_ci_regression_injection _
file C:\Users\bcmad\Downloads\A1Betting7-13.2\tests\statistical\test_statistical_verification_suite.py, line 440
      def test_intentional_ci_regression_injection(self, statistical_suite):
E       fixture 'statistical_suite' not found
>       available fixtures: _class_scoped_runner, _function_scoped_runner, _module_scoped_runner, _package_scoped_runner, _session_faker, _session_scoped_runner, anyio_backend, anyio_backend_name, anyio_backend_options, app, assert_response_format, cache, capfd, capfdbinary, caplog, capsys, capsysbinary, capteesys, ci_statistical_baseline, client, cov, doctest_namespace, ensure_statistical_dependencies, event_loop, event_loop_policy, faker, free_tcp_port, free_tcp_port_factory, free_udp_port, free_udp_port_factory, load_test_data, mock_arbitrage_opportunity, mock_enhanced_ml_prediction, mock_enhanced_prediction_integration, mock_enhanced_websocket_service, mock_mlb_game, mock_player_data, mock_prop_bet, mock_request_context, mock_unified_sportsbook_service, mock_websocket_message, monkeypatch, no_cover, performance_timer, pytestconfig, record_property, record_testsuite_property, record_xml_attribute, recwarn, statistical_test_config, sync_client, test_db_engine, test_db_session, test_env, tmp_path, tmp_path_factory, tmpdir, tmpdir_factory, unused_tcp_port, unused_tcp_port_factory, unused_udp_port, unused_udp_port_factory
>       use 'pytest --fixtures [testpath]' for help on them.

C:\Users\bcmad\Downloads\A1Betting7-13.2\tests\statistical\test_statistical_verification_suite.py:440
______ ERROR at setup of TestMarketStreamer.test_streamer_initialization ______
tests\test_streaming_system.py:39: in mock_provider_registry
    registry.get_all_providers.return_value = {
    ^^^^^^^^^^^^^^^^^^^^^^^^^^
C:\Python313\Lib\unittest\mock.py:690: in __getattr__
    raise AttributeError("Mock object has no attribute %r" % name)
E   AttributeError: Mock object has no attribute 'get_all_providers'. Did you mean: 'get_active_providers'?
__________ ERROR at setup of TestMarketStreamer.test_start_streaming __________
tests\test_streaming_system.py:39: in mock_provider_registry
    registry.get_all_providers.return_value = {
    ^^^^^^^^^^^^^^^^^^^^^^^^^^
C:\Python313\Lib\unittest\mock.py:690: in __getattr__
    raise AttributeError("Mock object has no attribute %r" % name)
E   AttributeError: Mock object has no attribute 'get_all_providers'. Did you mean: 'get_active_providers'?
__________ ERROR at setup of TestMarketStreamer.test_stop_streaming ___________
tests\test_streaming_system.py:39: in mock_provider_registry
    registry.get_all_providers.return_value = {
    ^^^^^^^^^^^^^^^^^^^^^^^^^^
C:\Python313\Lib\unittest\mock.py:690: in __getattr__
    raise AttributeError("Mock object has no attribute %r" % name)
E   AttributeError: Mock object has no attribute 'get_all_providers'. Did you mean: 'get_active_providers'?
____________ ERROR at setup of TestMarketStreamer.test_get_status _____________
tests\test_streaming_system.py:39: in mock_provider_registry
    registry.get_all_providers.return_value = {
    ^^^^^^^^^^^^^^^^^^^^^^^^^^
C:\Python313\Lib\unittest\mock.py:690: in __getattr__
    raise AttributeError("Mock object has no attribute %r" % name)
E   AttributeError: Mock object has no attribute 'get_all_providers'. Did you mean: 'get_active_providers'?
================================== FAILURES ===================================
__________ TestAuthenticationRoutes.test_register_endpoint_structure __________
tests\backend\routes\test_auth_routes.py:46: in test_register_endpoint_structure
    assert "access_token" in data or "message" in data
E   AssertionError: assert ('access_token' in {'data': {'user': {'email': 'test@example.com', 'first_name': 'Test', 'id': 'test@example.com', 'last_name': 'User'}}, 'error': None, 'success': True} or 'message' in {'data': {'user': {'email': 'test@example.com', 'first_name': 'Test', 'id': 'test@example.com', 'last_name': 'User'}}, 'error': None, 'success': True})
---------------------------- Captured stderr call -----------------------------
{"timestamp": "2025-08-23T13:03:52.846360", "level": "INFO", "logger": "a1betting", "message": "Request started", "module": "structured_logging_middleware", "function": "log_request_start", "line": 109, "request_id": "c5768ff8-bf5a-46d6-bb28-a48248d223c0", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro", "event_type": "request_start", "method": "POST", "url": "http://testserver/auth/register", "path": "/auth/register", "query_params": {}, "client_ip": "testclient", "user_agent": "testclient", "content_type": "application/json"}
2025-08-23 08:03:52,846 - backend.middleware.request_id_middleware - INFO - Request started: POST /auth/register
2025-08-23 08:03:52,849 - backend.middleware.request_id_middleware - INFO - Request completed: POST /auth/register - 200
2025-08-23 08:03:52,849 - backend.middleware.distributed_trace_middleware - INFO - Trace completed: 171a20f3-aa6e-4631-99b6-dbebc467b98e
{"timestamp": "2025-08-23T13:03:52.849348", "level": "INFO", "logger": "a1betting", "message": "Request completed", "module": "structured_logging_middleware", "function": "log_request_success", "line": 124, "request_id": "c5768ff8-bf5a-46d6-bb28-a48248d223c0", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro", "event_type": "request_success", "method": "POST", "url": "http://testserver/auth/register", "path": "/auth/register", "status_code": 200, "duration_ms": 3.0, "response_size": "137", "performance_category": "fast"}
------------------------------ Captured log call ------------------------------
INFO     backend.middleware.request_id_middleware:request_id_middleware.py:67 Request started: POST /auth/register
INFO     backend.middleware.request_id_middleware:request_id_middleware.py:92 Request completed: POST /auth/register - 200
INFO     backend.middleware.distributed_trace_middleware:distributed_trace_middleware.py:224 Trace completed: 171a20f3-aa6e-4631-99b6-dbebc467b98e
______________ TestAuthenticationRoutes.test_register_validation ______________
tests\backend\routes\test_auth_routes.py:63: in test_register_validation
    assert response.status_code == 422  # Validation error
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   assert 400 == 422
E    +  where 400 = <Response [400 Bad Request]>.status_code
---------------------------- Captured stderr call -----------------------------
{"timestamp": "2025-08-23T13:03:53.300593", "level": "INFO", "logger": "a1betting", "message": "Request started", "module": "structured_logging_middleware", "function": "log_request_start", "line": 109, "request_id": "bd52f11f-781c-4f88-a993-92a456571920", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro", "event_type": "request_start", "method": "POST", "url": "http://testserver/auth/register", "path": "/auth/register", "query_params": {}, "client_ip": "testclient", "user_agent": "testclient", "content_type": "application/json"}
2025-08-23 08:03:53,301 - backend.middleware.request_id_middleware - INFO - Request started: POST /auth/register
2025-08-23 08:03:53,301 - backend.errors.catalog - ERROR - API Error: E1000_VALIDATION
2025-08-23 08:03:53,302 - backend.middleware.request_id_middleware - INFO - Request completed: POST /auth/register - 400
2025-08-23 08:03:53,302 - backend.middleware.distributed_trace_middleware - INFO - Trace completed: f93aa77d-611d-4662-a251-820afe1cda76
{"timestamp": "2025-08-23T13:03:53.302147", "level": "INFO", "logger": "a1betting", "message": "Request completed", "module": "structured_logging_middleware", "function": "log_request_success", "line": 124, "request_id": "bd52f11f-781c-4f88-a993-92a456571920", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro", "event_type": "request_success", "method": "POST", "url": "http://testserver/auth/register", "path": "/auth/register", "status_code": 400, "duration_ms": 1.57, "response_size": "451", "performance_category": "fast"}
------------------------------ Captured log call ------------------------------
INFO     backend.middleware.request_id_middleware:request_id_middleware.py:67 Request started: POST /auth/register
ERROR    backend.errors.catalog:catalog.py:304 API Error: E1000_VALIDATION
INFO     backend.middleware.request_id_middleware:request_id_middleware.py:92 Request completed: POST /auth/register - 400
INFO     backend.middleware.distributed_trace_middleware:distributed_trace_middleware.py:224 Trace completed: f93aa77d-611d-4662-a251-820afe1cda76
___________ TestAuthenticationRoutes.test_login_endpoint_structure ____________
tests\backend\routes\test_auth_routes.py:91: in test_login_endpoint_structure
    assert "access_token" in data or "message" in data
E   AssertionError: assert ('access_token' in {'data': {'access_token': 'test@example.com;access;1755954233;91b7c5e461c81c36dd7e4614661fce618d7fdede10b898f69d7cef0d...oken_type': 'bearer', 'user': {'email': 'test@example.com', 'id': 'test@example.com'}}, 'error': None, 'success': True} or 'message' in {'data': {'access_token': 'test@example.com;access;1755954233;91b7c5e461c81c36dd7e4614661fce618d7fdede10b898f69d7cef0d...oken_type': 'bearer', 'user': {'email': 'test@example.com', 'id': 'test@example.com'}}, 'error': None, 'success': True})
---------------------------- Captured stderr call -----------------------------
{"timestamp": "2025-08-23T13:03:53.321625", "level": "INFO", "logger": "a1betting", "message": "Request started", "module": "structured_logging_middleware", "function": "log_request_start", "line": 109, "request_id": "822b2d75-1a30-44d9-9128-e9b7828eae97", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro", "event_type": "request_start", "method": "POST", "url": "http://testserver/auth/login", "path": "/auth/login", "query_params": {}, "client_ip": "testclient", "user_agent": "testclient", "content_type": "application/json"}
2025-08-23 08:03:53,321 - backend.middleware.request_id_middleware - INFO - Request started: POST /auth/login
2025-08-23 08:03:53,322 - backend.middleware.request_id_middleware - INFO - Request completed: POST /auth/login - 200
2025-08-23 08:03:53,322 - backend.middleware.distributed_trace_middleware - INFO - Trace completed: 98a31083-c731-4193-9010-826c55ce123b
{"timestamp": "2025-08-23T13:03:53.323023", "level": "INFO", "logger": "a1betting", "message": "Request completed", "module": "structured_logging_middleware", "function": "log_request_success", "line": 124, "request_id": "822b2d75-1a30-44d9-9128-e9b7828eae97", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro", "event_type": "request_success", "method": "POST", "url": "http://testserver/auth/login", "path": "/auth/login", "status_code": 200, "duration_ms": 1.41, "response_size": "356", "performance_category": "fast"}
------------------------------ Captured log call ------------------------------
INFO     backend.middleware.request_id_middleware:request_id_middleware.py:67 Request started: POST /auth/login
INFO     backend.middleware.request_id_middleware:request_id_middleware.py:92 Request completed: POST /auth/login - 200
INFO     backend.middleware.distributed_trace_middleware:distributed_trace_middleware.py:224 Trace completed: 98a31083-c731-4193-9010-826c55ce123b
_______________ TestAuthenticationRoutes.test_login_validation ________________
tests\backend\routes\test_auth_routes.py:100: in test_login_validation
    assert response.status_code == 422
E   assert 400 == 422
E    +  where 400 = <Response [400 Bad Request]>.status_code
---------------------------- Captured stderr call -----------------------------
{"timestamp": "2025-08-23T13:03:53.329861", "level": "INFO", "logger": "a1betting", "message": "Request started", "module": "structured_logging_middleware", "function": "log_request_start", "line": 109, "request_id": "069a4dcd-eb1c-43a9-89a5-8b8b0a13c030", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro", "event_type": "request_start", "method": "POST", "url": "http://testserver/auth/login", "path": "/auth/login", "query_params": {}, "client_ip": "testclient", "user_agent": "testclient", "content_type": "application/json"}
2025-08-23 08:03:53,330 - backend.middleware.request_id_middleware - INFO - Request started: POST /auth/login
2025-08-23 08:03:53,330 - backend.errors.catalog - ERROR - API Error: E1000_VALIDATION
2025-08-23 08:03:53,331 - backend.middleware.request_id_middleware - INFO - Request completed: POST /auth/login - 400
2025-08-23 08:03:53,331 - backend.middleware.distributed_trace_middleware - INFO - Trace completed: e314f76b-a206-4254-a815-8df9ed4f6efe
{"timestamp": "2025-08-23T13:03:53.331210", "level": "INFO", "logger": "a1betting", "message": "Request completed", "module": "structured_logging_middleware", "function": "log_request_success", "line": 124, "request_id": "069a4dcd-eb1c-43a9-89a5-8b8b0a13c030", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro", "event_type": "request_success", "method": "POST", "url": "http://testserver/auth/login", "path": "/auth/login", "status_code": 400, "duration_ms": 1.36, "response_size": "392", "performance_category": "fast"}
------------------------------ Captured log call ------------------------------
INFO     backend.middleware.request_id_middleware:request_id_middleware.py:67 Request started: POST /auth/login
ERROR    backend.errors.catalog:catalog.py:304 API Error: E1000_VALIDATION
INFO     backend.middleware.request_id_middleware:request_id_middleware.py:92 Request completed: POST /auth/login - 400
INFO     backend.middleware.distributed_trace_middleware:distributed_trace_middleware.py:224 Trace completed: e314f76b-a206-4254-a815-8df9ed4f6efe
_______ TestAuthenticationRoutes.test_refresh_token_endpoint_structure ________
tests\backend\routes\test_auth_routes.py:118: in test_refresh_token_endpoint_structure
    assert "message" in data or "detail" in data
E   AssertionError: assert ('message' in {'data': None, 'error': {'code': 'OPERATION_FAILED', 'details': None, 'message': 'Invalid refresh token'}, 'success': False} or 'detail' in {'data': None, 'error': {'code': 'OPERATION_FAILED', 'details': None, 'message': 'Invalid refresh token'}, 'success': False})
---------------------------- Captured stderr call -----------------------------
{"timestamp": "2025-08-23T13:03:53.338269", "level": "INFO", "logger": "a1betting", "message": "Request started", "module": "structured_logging_middleware", "function": "log_request_start", "line": 109, "request_id": "01830502-e53f-42ed-9613-380c5c15547c", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro", "event_type": "request_start", "method": "POST", "url": "http://testserver/auth/refresh", "path": "/auth/refresh", "query_params": {}, "client_ip": "testclient", "user_agent": "testclient", "content_type": null}
2025-08-23 08:03:53,338 - backend.middleware.request_id_middleware - INFO - Request started: POST /auth/refresh
2025-08-23 08:03:53,338 - backend.middleware.request_id_middleware - INFO - Request completed: POST /auth/refresh - 401
2025-08-23 08:03:53,338 - backend.middleware.distributed_trace_middleware - INFO - Trace completed: 53939619-5575-41b7-bacf-1c2281bccaff
{"timestamp": "2025-08-23T13:03:53.339039", "level": "INFO", "logger": "a1betting", "message": "Request completed", "module": "structured_logging_middleware", "function": "log_request_success", "line": 124, "request_id": "01830502-e53f-42ed-9613-380c5c15547c", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro", "event_type": "request_success", "method": "POST", "url": "http://testserver/auth/refresh", "path": "/auth/refresh", "status_code": 401, "duration_ms": 0.79, "response_size": "106", "performance_category": "fast"}
{"timestamp": "2025-08-23T13:03:53.342003", "level": "INFO", "logger": "a1betting", "message": "Request started", "module": "structured_logging_middleware", "function": "log_request_start", "line": 109, "request_id": "c0210789-ca14-4cd3-b28b-ec59ab8e6225", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro", "event_type": "request_start", "method": "POST", "url": "http://testserver/auth/refresh", "path": "/auth/refresh", "query_params": {}, "client_ip": "testclient", "user_agent": "testclient", "content_type": null}
2025-08-23 08:03:53,342 - backend.middleware.request_id_middleware - INFO - Request started: POST /auth/refresh
2025-08-23 08:03:53,342 - backend.middleware.request_id_middleware - INFO - Request completed: POST /auth/refresh - 401
2025-08-23 08:03:53,342 - backend.middleware.distributed_trace_middleware - INFO - Trace completed: b2c7bfaf-cf99-4ad0-aad5-be6f80cf5b58
{"timestamp": "2025-08-23T13:03:53.342690", "level": "INFO", "logger": "a1betting", "message": "Request completed", "module": "structured_logging_middleware", "function": "log_request_success", "line": 124, "request_id": "c0210789-ca14-4cd3-b28b-ec59ab8e6225", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro", "event_type": "request_success", "method": "POST", "url": "http://testserver/auth/refresh", "path": "/auth/refresh", "status_code": 401, "duration_ms": 0.7, "response_size": "114", "performance_category": "fast"}
------------------------------ Captured log call ------------------------------
INFO     backend.middleware.request_id_middleware:request_id_middleware.py:67 Request started: POST /auth/refresh
INFO     backend.middleware.request_id_middleware:request_id_middleware.py:92 Request completed: POST /auth/refresh - 401
INFO     backend.middleware.distributed_trace_middleware:distributed_trace_middleware.py:224 Trace completed: 53939619-5575-41b7-bacf-1c2281bccaff
INFO     backend.middleware.request_id_middleware:request_id_middleware.py:67 Request started: POST /auth/refresh
INFO     backend.middleware.request_id_middleware:request_id_middleware.py:92 Request completed: POST /auth/refresh - 401
INFO     backend.middleware.distributed_trace_middleware:distributed_trace_middleware.py:224 Trace completed: b2c7bfaf-cf99-4ad0-aad5-be6f80cf5b58
_____________ TestAuthenticationRoutes.test_me_endpoint_structure _____________
tests\backend\routes\test_auth_routes.py:132: in test_me_endpoint_structure
    assert "message" in data or "detail" in data
E   AssertionError: assert ('message' in {'data': None, 'error': {'code': 'OPERATION_FAILED', 'details': None, 'message': 'Invalid token'}, 'success': False} or 'detail' in {'data': None, 'error': {'code': 'OPERATION_FAILED', 'details': None, 'message': 'Invalid token'}, 'success': False})
---------------------------- Captured stderr call -----------------------------
{"timestamp": "2025-08-23T13:03:53.349901", "level": "INFO", "logger": "a1betting", "message": "Request started", "module": "structured_logging_middleware", "function": "log_request_start", "line": 109, "request_id": "2616bfe5-0ced-4031-976d-cd1757726bef", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro", "event_type": "request_start", "method": "GET", "url": "http://testserver/auth/me", "path": "/auth/me", "query_params": {}, "client_ip": "testclient", "user_agent": "testclient", "content_type": null}
2025-08-23 08:03:53,350 - backend.middleware.request_id_middleware - INFO - Request started: GET /auth/me
2025-08-23 08:03:53,350 - backend.middleware.request_id_middleware - INFO - Request completed: GET /auth/me - 401
2025-08-23 08:03:53,350 - backend.middleware.distributed_trace_middleware - INFO - Trace completed: e060b5a3-3c0b-4b9b-8ddd-d0e9ae683846
{"timestamp": "2025-08-23T13:03:53.350692", "level": "INFO", "logger": "a1betting", "message": "Request completed", "module": "structured_logging_middleware", "function": "log_request_success", "line": 124, "request_id": "2616bfe5-0ced-4031-976d-cd1757726bef", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro", "event_type": "request_success", "method": "GET", "url": "http://testserver/auth/me", "path": "/auth/me", "status_code": 401, "duration_ms": 0.81, "response_size": "106", "performance_category": "fast"}
{"timestamp": "2025-08-23T13:03:53.353459", "level": "INFO", "logger": "a1betting", "message": "Request started", "module": "structured_logging_middleware", "function": "log_request_start", "line": 109, "request_id": "172dec71-c8dc-4a15-846c-b5f387d3bba6", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro", "event_type": "request_start", "method": "GET", "url": "http://testserver/auth/me", "path": "/auth/me", "query_params": {}, "client_ip": "testclient", "user_agent": "testclient", "content_type": null}
2025-08-23 08:03:53,353 - backend.middleware.request_id_middleware - INFO - Request started: GET /auth/me
2025-08-23 08:03:53,353 - backend.middleware.request_id_middleware - INFO - Request completed: GET /auth/me - 401
2025-08-23 08:03:53,354 - backend.middleware.distributed_trace_middleware - INFO - Trace completed: a8967202-e8b7-4020-ac86-847d7745bc7f
{"timestamp": "2025-08-23T13:03:53.354094", "level": "INFO", "logger": "a1betting", "message": "Request completed", "module": "structured_logging_middleware", "function": "log_request_success", "line": 124, "request_id": "172dec71-c8dc-4a15-846c-b5f387d3bba6", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro", "event_type": "request_success", "method": "GET", "url": "http://testserver/auth/me", "path": "/auth/me", "status_code": 401, "duration_ms": 0.65, "response_size": "106", "performance_category": "fast"}
------------------------------ Captured log call ------------------------------
INFO     backend.middleware.request_id_middleware:request_id_middleware.py:67 Request started: GET /auth/me
INFO     backend.middleware.request_id_middleware:request_id_middleware.py:92 Request completed: GET /auth/me - 401
INFO     backend.middleware.distributed_trace_middleware:distributed_trace_middleware.py:224 Trace completed: e060b5a3-3c0b-4b9b-8ddd-d0e9ae683846
INFO     backend.middleware.request_id_middleware:request_id_middleware.py:67 Request started: GET /auth/me
INFO     backend.middleware.request_id_middleware:request_id_middleware.py:92 Request completed: GET /auth/me - 401
INFO     backend.middleware.distributed_trace_middleware:distributed_trace_middleware.py:224 Trace completed: a8967202-e8b7-4020-ac86-847d7745bc7f
______________ TestMLBExtrasRoutes.test_mlb_test_props_endpoint _______________
tests\backend\routes\test_mlb_extras.py:37: in test_mlb_test_props_endpoint
    assert response.status_code == status.HTTP_200_OK
E   assert 404 == 200
E    +  where 404 = <Response [404 Not Found]>.status_code
E    +  and   200 = status.HTTP_200_OK
---------------------------- Captured stderr setup ----------------------------
2025-08-23 08:03:55,674 - backend.core.app - INFO - \U0001f680 Creating A1Betting canonical app...\n2025-08-23 08:03:55,674 - backend.core.app - INFO - \u2705 Request ID correlation middleware added\n2025-08-23 08:03:55,674 - backend.core.app - INFO - \u2705 Distributed trace correlation middleware added\n2025-08-23 08:03:55,674 - backend.core.app - INFO - \u2705 Structured logging middleware added\n2025-08-23 08:03:55,674 - backend.core.app - INFO - \u2705 Prometheus metrics middleware added\n2025-08-23 08:03:55,674 - backend.core.app - INFO - \u2705 Payload guard middleware added: max_size=262144 bytes, enforce_json=True, enabled=True\n2025-08-23 08:03:55,674 - backend.middleware.rate_limit - INFO - Rate limiting disabled\n2025-08-23 08:03:55,674 - backend.core.app - INFO - \u2705 Rate limiting middleware added: 100/min, burst=200, enabled=False\n2025-08-23 08:03:55,675 - backend.core.app - INFO - \u2705 Security headers middleware added: [HSTS, CSP(report-only), COOP, COEP], x_frame_options=DENY\n2025-08-23 08:03:55,675 - backend.core.app - INFO - \u2705 Legacy endpoint middleware added for usage telemetry and deprecation controls\n2025-08-23 08:03:55,675 - backend.exceptions.handlers - INFO - \u2705 PayloadRejectionError handler registered\n2025-08-23 08:03:55,675 - backend.exceptions.handlers - INFO - \u2705 All exception handlers registered with structured error taxonomy\n2025-08-23 08:03:55,675 - backend.core.app - INFO - \u2705 Centralized exception handlers registered\n2025-08-23 08:03:55,676 - backend.core.app - INFO - \u2705 PR11 Enhanced WebSocket client route included (/ws/client)\n2025-08-23 08:03:55,680 - backend.core.app - INFO - \u2705 Auth routes also exposed at root (/auth/*) for compatibility\n2025-08-23 08:03:55,680 - backend.core.app - INFO - \u2705 Auth and users routes included (auth with /api prefix)\n2025-08-23 08:03:55,681 - backend.core.app - INFO - \u2705 Diagnostics routes included (/api/v2/diagnostics/health, /api/v2/diagnostics/system)\n2025-08-23 08:03:55,682 - backend.core.app - INFO - \u2705 Meta cache routes included (/api/v2/meta/cache-stats, /api/v2/meta/cache-health)\n2025-08-23 08:03:55,682 - backend.core.app - INFO - \u2705 Legacy meta routes included (/api/v2/meta/legacy-usage, /api/v2/meta/migration-readiness)\n2025-08-23 08:03:55,685 - backend.core.app - ERROR - \u274c Failed to register CSP report routes: Invalid args for response field! Hint: check that <class 'logging.Logger'> is a valid Pydantic field type. If you are using a return type annotation that is not a valid Pydantic field (e.g. Union[Response, dict, None]) you can disable generating the response model from the type annotation with the path operation decorator parameter response_model=None. Read more: https://fastapi.tiangolo.com/tutorial/response-model/\n2025-08-23 08:03:55,685 - backend.core.app - INFO - \u2705 Trace test routes included (/api/trace/* endpoints)\n2025-08-23 08:03:55,687 - backend.core.app - INFO - \u2705 Model inference routes included (/api/v2/models/* endpoints)\n2025-08-23 08:03:55,688 - backend.core.app - INFO - \u2705 Observability events routes included (/api/v2/observability/* endpoints)\n2025-08-23 08:03:55,689 - backend.core.app - INFO - \u2705 Admin control routes included (/api/v2/models/shadow/* and /api/v2/models/admin/* endpoints)\n2025-08-23 08:03:55,692 - backend.core.app - INFO - \u2705 Enhanced WebSocket routes included (/ws/v2/* endpoints)\n2025-08-23 08:03:55,692 - backend.core.app - INFO - \u2705 WebSocket logging routes included (/api/websocket/* endpoints)\n2025-08-23 08:03:55,693 - backend.core.app - INFO - \u2705 Version routes included (/api/version/* endpoints)\n2025-08-23 08:03:55,694 - backend.core.app - INFO - \u2705 WebVitals pipeline routes included (/api/metrics/v1/* endpoints)\n2025-08-23 08:03:55,698 - backend.core.app - INFO - \u2705 Enhanced ML routes included (/api/enhanced-ml/* endpoints)\n2025-08-23 08:03:55,699 - backend.core.app - INFO - \u2705 Fallback enhanced-ml compatibility router mounted at /api/enhanced-ml\n2025-08-23 08:03:55,703 - backend.core.app - INFO - \u2705 Consolidated PrizePicks routes included (/api/v2/prizepicks/* endpoints)\n2025-08-23 08:03:55,707 - backend.core.app - INFO - \u2705 Consolidated ML routes included (/api/v2/ml/* endpoints)\n2025-08-23 08:03:55,709 - backend.core.app - ERROR - \u274c Failed to register consolidated Admin routes: parameter without a default follows parameter with a default (consolidated_admin.py, line 165)\n2025-08-23 08:03:55,712 - backend.core.app - INFO - \u2705 Odds & Line Movement routes included (/v1/odds/* endpoints)\n2025-08-23 08:03:55,714 - backend.core.app - INFO - \u2705 Advanced-Kelly compatibility router mounted at /api/advanced-kelly\n2025-08-23 08:03:55,716 - backend.core.app - ERROR - \u274c Failed to register Risk Management & Personalization routes: 'NoneType' object has no attribute 'alert_evaluation_interval_seconds'\n2025-08-23 08:03:55,718 - backend.core.app - INFO - \u2705 Dependencies Health routes included (/api/dependencies/* endpoints)\n2025-08-23 08:03:55,720 - backend.core.app - INFO - \u2705 Provider Resilience routes included (/api/provider-resilience/* endpoints)\n2025-08-23 08:03:55,721 - backend.core.app - INFO - \u2705 System capabilities routes included (/api/system/* endpoints)\n2025-08-23 08:03:55,722 - backend.core.app - INFO - \u2705 Real-time market streaming routes included (/streaming/* endpoints)\n2025-08-23 08:03:55,723 - backend.core.app - INFO - \u2705 Security HEAD endpoints included (/api/* HEAD endpoints)\n2025-08-23 08:03:55,725 - backend.core.app - INFO - \u2705 ML Model Registry routes included (/api/models/* endpoints)\n2025-08-23 08:03:55,726 - backend.core.app - INFO - \u2705 Data ingestion routes included (/api/v1/ingestion/* endpoints)\n2025-08-23 08:03:55,731 - backend.core.app - INFO - \u2705 Enterprise model registry routes included (/api/models/enterprise/* endpoints)\n2025-08-23 08:03:55,735 - backend.core.app - INFO - \u2705 Alert engine routes included (/api/alert-engine/* endpoints)\n2025-08-23 08:03:55,739 - backend.core.app - INFO - \u2705 PropFinder routes included (/api/propfinder/* endpoints)\n2025-08-23 08:03:55,740 - backend.core.app - WARNING - \u26a0\ufe0f Could not import multiple_sportsbook_routes: cannot import name 'RateLimiter' from 'backend.middleware.rate_limit' (C:\\Users\\bcmad\\Downloads\\A1Betting7-13.2\\backend\\middleware\\rate_limit.py)\n2025-08-23 08:03:55,742 - backend.core.app - INFO - \u2705 Sportsbook compatibility router mounted at /api/sportsbook\n2025-08-23 08:03:55,742 - backend.core.app - INFO - \U0001f50d Bootstrap validation scheduled on startup\n2025-08-23 08:03:55,742 - backend.core.app - INFO - \U0001f3e5 Health endpoints normalized: /api/health, /health, /api/v2/health -> identical envelope format\n2025-08-23 08:03:55,742 - backend.core.app - INFO - \u2705 A1Betting canonical app created successfully
----------------------------- Captured log setup ------------------------------
INFO     backend.core.app:app.py:65 \U0001f680 Creating A1Betting canonical app...\nINFO     backend.core.app:app.py:104 \u2705 Request ID correlation middleware added\nINFO     backend.core.app:app.py:114 \u2705 Distributed trace correlation middleware added\nINFO     backend.core.app:app.py:126 \u2705 Structured logging middleware added\nINFO     backend.core.app:app.py:146 \u2705 Prometheus metrics middleware added\nINFO     backend.core.app:app.py:167 \u2705 Payload guard middleware added: max_size=262144 bytes, enforce_json=True, enabled=True\nINFO     backend.middleware.rate_limit:rate_limit.py:90 Rate limiting disabled\nINFO     backend.core.app:app.py:202 \u2705 Rate limiting middleware added: 100/min, burst=200, enabled=False\nINFO     backend.core.app:app.py:244 \u2705 Security headers middleware added: [HSTS, CSP(report-only), COOP, COEP], x_frame_options=DENY\nINFO     backend.core.app:app.py:259 \u2705 Legacy endpoint middleware added for usage telemetry and deprecation controls\nINFO     backend.exceptions.handlers:handlers.py:235 \u2705 PayloadRejectionError handler registered\nINFO     backend.exceptions.handlers:handlers.py:250 \u2705 All exception handlers registered with structured error taxonomy\nINFO     backend.core.app:app.py:269 \u2705 Centralized exception handlers registered\nINFO     backend.core.app:app.py:332 \u2705 PR11 Enhanced WebSocket client route included (/ws/client)\nINFO     backend.core.app:app.py:702 \u2705 Auth routes also exposed at root (/auth/*) for compatibility\nINFO     backend.core.app:app.py:706 \u2705 Auth and users routes included (auth with /api prefix)\nINFO     backend.core.app:app.py:714 \u2705 Diagnostics routes included (/api/v2/diagnostics/health, /api/v2/diagnostics/system)\nINFO     backend.core.app:app.py:763 \u2705 Meta cache routes included (/api/v2/meta/cache-stats, /api/v2/meta/cache-health)\nINFO     backend.core.app:app.py:773 \u2705 Legacy meta routes included (/api/v2/meta/legacy-usage, /api/v2/meta/migration-readiness)\nERROR    backend.core.app:app.py:788 \u274c Failed to register CSP report routes: Invalid args for response field! Hint: check that <class 'logging.Logger'> is a valid Pydantic field type. If you are using a return type annotation that is not a valid Pydantic field (e.g. Union[Response, dict, None]) you can disable generating the response model from the type annotation with the path operation decorator parameter response_model=None. Read more: https://fastapi.tiangolo.com/tutorial/response-model/\nINFO     backend.core.app:app.py:794 \u2705 Trace test routes included (/api/trace/* endpoints)\nINFO     backend.core.app:app.py:804 \u2705 Model inference routes included (/api/v2/models/* endpoints)\nINFO     backend.core.app:app.py:814 \u2705 Observability events routes included (/api/v2/observability/* endpoints)\nINFO     backend.core.app:app.py:824 \u2705 Admin control routes included (/api/v2/models/shadow/* and /api/v2/models/admin/* endpoints)\nINFO     backend.core.app:app.py:834 \u2705 Enhanced WebSocket routes included (/ws/v2/* endpoints)\nINFO     backend.core.app:app.py:844 \u2705 WebSocket logging routes included (/api/websocket/* endpoints)\nINFO     backend.core.app:app.py:854 \u2705 Version routes included (/api/version/* endpoints)\nINFO     backend.core.app:app.py:864 \u2705 WebVitals pipeline routes included (/api/metrics/v1/* endpoints)\nINFO     backend.core.app:app.py:874 \u2705 Enhanced ML routes included (/api/enhanced-ml/* endpoints)\nINFO     backend.core.app:app.py:986 \u2705 Fallback enhanced-ml compatibility router mounted at /api/enhanced-ml\nINFO     backend.core.app:app.py:995 \u2705 Consolidated PrizePicks routes included (/api/v2/prizepicks/* endpoints)\nINFO     backend.core.app:app.py:1005 \u2705 Consolidated ML routes included (/api/v2/ml/* endpoints)\nERROR    backend.core.app:app.py:1019 \u274c Failed to register consolidated Admin routes: parameter without a default follows parameter with a default (consolidated_admin.py, line 165)\nINFO     backend.core.app:app.py:1025 \u2705 Odds & Line Movement routes included (/v1/odds/* endpoints)\nINFO     backend.core.app:app.py:1066 \u2705 Advanced-Kelly compatibility router mounted at /api/advanced-kelly\nERROR    backend.core.app:app.py:1078 \u274c Failed to register Risk Management & Personalization routes: 'NoneType' object has no attribute 'alert_evaluation_interval_seconds'\nINFO     backend.core.app:app.py:1084 \u2705 Dependencies Health routes included (/api/dependencies/* endpoints)\nINFO     backend.core.app:app.py:1094 \u2705 Provider Resilience routes included (/api/provider-resilience/* endpoints)\nINFO     backend.core.app:app.py:1104 \u2705 System capabilities routes included (/api/system/* endpoints)\nINFO     backend.core.app:app.py:1114 \u2705 Real-time market streaming routes included (/streaming/* endpoints)\nINFO     backend.core.app:app.py:1124 \u2705 Security HEAD endpoints included (/api/* HEAD endpoints)\nINFO     backend.core.app:app.py:1134 \u2705 ML Model Registry routes included (/api/models/* endpoints)\nINFO     backend.core.app:app.py:1144 \u2705 Data ingestion routes included (/api/v1/ingestion/* endpoints)\nINFO     backend.core.app:app.py:1154 \u2705 Enterprise model registry routes included (/api/models/enterprise/* endpoints)\nINFO     backend.core.app:app.py:1199 \u2705 Alert engine routes included (/api/alert-engine/* endpoints)\nINFO     backend.core.app:app.py:1209 \u2705 PropFinder routes included (/api/propfinder/* endpoints)\nWARNING  backend.core.app:app.py:1221 \u26a0\ufe0f Could not import multiple_sportsbook_routes: cannot import name 'RateLimiter' from 'backend.middleware.rate_limit' (C:\\Users\\bcmad\\Downloads\\A1Betting7-13.2\\backend\\middleware\\rate_limit.py)\nINFO     backend.core.app:app.py:1495 \u2705 Sportsbook compatibility router mounted at /api/sportsbook\nINFO     backend.core.app:app.py:1527 \U0001f50d Bootstrap validation scheduled on startup\nINFO     backend.core.app:app.py:1535 \U0001f3e5 Health endpoints normalized: /api/health, /health, /api/v2/health -> identical envelope format\nINFO     backend.core.app:app.py:1536 \u2705 A1Betting canonical app created successfully
---------------------------- Captured stderr call -----------------------------
2025-08-23 08:03:55,744 - backend.middleware.rate_limit - INFO - Rate limiting disabled\n2025-08-23 08:03:55,744 - backend.middleware.security_headers - INFO - \u2705 Security headers middleware enabled: CSP=report-only, HSTS=True, strict_mode=False\n2025-08-23 08:03:55,744 - backend.middleware.legacy_middleware - INFO - Registered known legacy endpoints with forwarding paths\n2025-08-23 08:03:55,744 - backend.middleware.legacy_middleware - INFO - Legacy middleware initialized\n{"timestamp": "2025-08-23T13:03:55.745095", "level": "INFO", "logger": "a1betting", "message": "Request started", "module": "structured_logging_middleware", "function": "log_request_start", "line": 109, "request_id": "e4fbc761-6912-4adb-889f-2cec36d0cb5c", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro", "event_type": "request_start", "method": "GET", "url": "http://testserver/mlb/test-props/", "path": "/mlb/test-props/", "query_params": {}, "client_ip": "127.0.0.1", "user_agent": "python-httpx/0.28.1", "content_type": null}\n2025-08-23 08:03:55,745 - backend.middleware.request_id_middleware - INFO - Request started: GET /mlb/test-props/\n2025-08-23 08:03:55,745 - backend.errors.catalog - ERROR - API Error: E4040_NOT_FOUND\n2025-08-23 08:03:55,745 - backend.middleware.request_id_middleware - INFO - Request completed: GET /mlb/test-props/ - 404\n2025-08-23 08:03:55,746 - backend.middleware.distributed_trace_middleware - INFO - Trace completed: 078dba5f-a109-4f46-a986-96f1f2f38e77\n{"timestamp": "2025-08-23T13:03:55.746071", "level": "INFO", "logger": "a1betting", "message": "Request completed", "module": "structured_logging_middleware", "function": "log_request_success", "line": 124, "request_id": "e4fbc761-6912-4adb-889f-2cec36d0cb5c", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro", "event_type": "request_success", "method": "GET", "url": "http://testserver/mlb/test-props/", "path": "/mlb/test-props/", "status_code": 404, "duration_ms": 1.0, "response_size": "243", "performance_category": "fast"}
------------------------------ Captured log call ------------------------------
INFO     backend.middleware.rate_limit:rate_limit.py:90 Rate limiting disabled\nINFO     backend.middleware.security_headers:security_headers.py:71 \u2705 Security headers middleware enabled: CSP=report-only, HSTS=True, strict_mode=False\nINFO     backend.middleware.legacy_middleware:legacy_middleware.py:68 Registered known legacy endpoints with forwarding paths\nINFO     backend.middleware.legacy_middleware:legacy_middleware.py:44 Legacy middleware initialized\nINFO     backend.middleware.request_id_middleware:request_id_middleware.py:67 Request started: GET /mlb/test-props/\nERROR    backend.errors.catalog:catalog.py:304 API Error: E4040_NOT_FOUND\nINFO     backend.middleware.request_id_middleware:request_id_middleware.py:92 Request completed: GET /mlb/test-props/ - 404\nINFO     backend.middleware.distributed_trace_middleware:distributed_trace_middleware.py:224 Trace completed: 078dba5f-a109-4f46-a986-96f1f2f38e77
______________ TestMLBExtrasRoutes.test_get_todays_games_success ______________
tests\backend\routes\test_mlb_extras.py:78: in test_get_todays_games_success
    assert response.status_code == status.HTTP_200_OK
E   assert 404 == 200
E    +  where 404 = <Response [404 Not Found]>.status_code
E    +  and   200 = status.HTTP_200_OK
---------------------------- Captured stderr setup ----------------------------
2025-08-23 08:03:55,753 - backend.core.app - INFO - \U0001f680 Creating A1Betting canonical app...\n2025-08-23 08:03:55,753 - backend.core.app - INFO - \u2705 Request ID correlation middleware added\n2025-08-23 08:03:55,754 - backend.core.app - INFO - \u2705 Distributed trace correlation middleware added\n2025-08-23 08:03:55,754 - backend.core.app - INFO - \u2705 Structured logging middleware added\n2025-08-23 08:03:55,754 - backend.core.app - INFO - \u2705 Prometheus metrics middleware added\n2025-08-23 08:03:55,754 - backend.core.app - INFO - \u2705 Payload guard middleware added: max_size=262144 bytes, enforce_json=True, enabled=True\n2025-08-23 08:03:55,754 - backend.middleware.rate_limit - INFO - Rate limiting disabled\n2025-08-23 08:03:55,754 - backend.core.app - INFO - \u2705 Rate limiting middleware added: 100/min, burst=200, enabled=False\n2025-08-23 08:03:55,754 - backend.core.app - INFO - \u2705 Security headers middleware added: [HSTS, CSP(report-only), COOP, COEP], x_frame_options=DENY\n2025-08-23 08:03:55,754 - backend.core.app - INFO - \u2705 Legacy endpoint middleware added for usage telemetry and deprecation controls\n2025-08-23 08:03:55,754 - backend.exceptions.handlers - INFO - \u2705 PayloadRejectionError handler registered\n2025-08-23 08:03:55,754 - backend.exceptions.handlers - INFO - \u2705 All exception handlers registered with structured error taxonomy\n2025-08-23 08:03:55,754 - backend.core.app - INFO - \u2705 Centralized exception handlers registered\n2025-08-23 08:03:55,755 - backend.core.app - INFO - \u2705 PR11 Enhanced WebSocket client route included (/ws/client)\n2025-08-23 08:03:55,759 - backend.core.app - INFO - \u2705 Auth routes also exposed at root (/auth/*) for compatibility\n2025-08-23 08:03:55,759 - backend.core.app - INFO - \u2705 Auth and users routes included (auth with /api prefix)\n2025-08-23 08:03:55,760 - backend.core.app - INFO - \u2705 Diagnostics routes included (/api/v2/diagnostics/health, /api/v2/diagnostics/system)\n2025-08-23 08:03:55,761 - backend.core.app - INFO - \u2705 Meta cache routes included (/api/v2/meta/cache-stats, /api/v2/meta/cache-health)\n2025-08-23 08:03:55,762 - backend.core.app - INFO - \u2705 Legacy meta routes included (/api/v2/meta/legacy-usage, /api/v2/meta/migration-readiness)\n2025-08-23 08:03:55,765 - backend.core.app - ERROR - \u274c Failed to register CSP report routes: Invalid args for response field! Hint: check that <class 'logging.Logger'> is a valid Pydantic field type. If you are using a return type annotation that is not a valid Pydantic field (e.g. Union[Response, dict, None]) you can disable generating the response model from the type annotation with the path operation decorator parameter response_model=None. Read more: https://fastapi.tiangolo.com/tutorial/response-model/\n2025-08-23 08:03:55,765 - backend.core.app - INFO - \u2705 Trace test routes included (/api/trace/* endpoints)\n2025-08-23 08:03:55,767 - backend.core.app - INFO - \u2705 Model inference routes included (/api/v2/models/* endpoints)\n2025-08-23 08:03:55,768 - backend.core.app - INFO - \u2705 Observability events routes included (/api/v2/observability/* endpoints)\n2025-08-23 08:03:55,769 - backend.core.app - INFO - \u2705 Admin control routes included (/api/v2/models/shadow/* and /api/v2/models/admin/* endpoints)\n2025-08-23 08:03:55,772 - backend.core.app - INFO - \u2705 Enhanced WebSocket routes included (/ws/v2/* endpoints)\n2025-08-23 08:03:55,772 - backend.core.app - INFO - \u2705 WebSocket logging routes included (/api/websocket/* endpoints)\n2025-08-23 08:03:55,773 - backend.core.app - INFO - \u2705 Version routes included (/api/version/* endpoints)\n2025-08-23 08:03:55,774 - backend.core.app - INFO - \u2705 WebVitals pipeline routes included (/api/metrics/v1/* endpoints)\n2025-08-23 08:03:55,778 - backend.core.app - INFO - \u2705 Enhanced ML routes included (/api/enhanced-ml/* endpoints)\n2025-08-23 08:03:55,778 - backend.core.app - INFO - \u2705 Fallback enhanced-ml compatibility router mounted at /api/enhanced-ml\n2025-08-23 08:03:55,783 - backend.core.app - INFO - \u2705 Consolidated PrizePicks routes included (/api/v2/prizepicks/* endpoints)\n2025-08-23 08:03:55,787 - backend.core.app - INFO - \u2705 Consolidated ML routes included (/api/v2/ml/* endpoints)\n2025-08-23 08:03:55,789 - backend.core.app - ERROR - \u274c Failed to register consolidated Admin routes: parameter without a default follows parameter with a default (consolidated_admin.py, line 165)\n2025-08-23 08:03:55,792 - backend.core.app - INFO - \u2705 Odds & Line Movement routes included (/v1/odds/* endpoints)\n2025-08-23 08:03:55,794 - backend.core.app - INFO - \u2705 Advanced-Kelly compatibility router mounted at /api/advanced-kelly\n2025-08-23 08:03:55,797 - backend.core.app - ERROR - \u274c Failed to register Risk Management & Personalization routes: 'NoneType' object has no attribute 'alert_evaluation_interval_seconds'\n2025-08-23 08:03:55,798 - backend.core.app - INFO - \u2705 Dependencies Health routes included (/api/dependencies/* endpoints)\n2025-08-23 08:03:55,800 - backend.core.app - INFO - \u2705 Provider Resilience routes included (/api/provider-resilience/* endpoints)\n2025-08-23 08:03:55,802 - backend.core.app - INFO - \u2705 System capabilities routes included (/api/system/* endpoints)\n2025-08-23 08:03:55,803 - backend.core.app - INFO - \u2705 Real-time market streaming routes included (/streaming/* endpoints)\n2025-08-23 08:03:55,804 - backend.core.app - INFO - \u2705 Security HEAD endpoints included (/api/* HEAD endpoints)\n2025-08-23 08:03:55,806 - backend.core.app - INFO - \u2705 ML Model Registry routes included (/api/models/* endpoints)\n2025-08-23 08:03:55,807 - backend.core.app - INFO - \u2705 Data ingestion routes included (/api/v1/ingestion/* endpoints)\n2025-08-23 08:03:55,811 - backend.core.app - INFO - \u2705 Enterprise model registry routes included (/api/models/enterprise/* endpoints)\n2025-08-23 08:03:55,814 - backend.core.app - INFO - \u2705 Alert engine routes included (/api/alert-engine/* endpoints)\n2025-08-23 08:03:55,818 - backend.core.app - INFO - \u2705 PropFinder routes included (/api/propfinder/* endpoints)\n2025-08-23 08:03:55,819 - backend.core.app - WARNING - \u26a0\ufe0f Could not import multiple_sportsbook_routes: cannot import name 'RateLimiter' from 'backend.middleware.rate_limit' (C:\\Users\\bcmad\\Downloads\\A1Betting7-13.2\\backend\\middleware\\rate_limit.py)\n2025-08-23 08:03:55,822 - backend.core.app - INFO - \u2705 Sportsbook compatibility router mounted at /api/sportsbook\n2025-08-23 08:03:55,822 - backend.core.app - INFO - \U0001f50d Bootstrap validation scheduled on startup\n2025-08-23 08:03:55,822 - backend.core.app - INFO - \U0001f3e5 Health endpoints normalized: /api/health, /health, /api/v2/health -> identical envelope format\n2025-08-23 08:03:55,822 - backend.core.app - INFO - \u2705 A1Betting canonical app created successfully
----------------------------- Captured log setup ------------------------------
INFO     backend.core.app:app.py:65 \U0001f680 Creating A1Betting canonical app...\nINFO     backend.core.app:app.py:104 \u2705 Request ID correlation middleware added\nINFO     backend.core.app:app.py:114 \u2705 Distributed trace correlation middleware added\nINFO     backend.core.app:app.py:126 \u2705 Structured logging middleware added\nINFO     backend.core.app:app.py:146 \u2705 Prometheus metrics middleware added\nINFO     backend.core.app:app.py:167 \u2705 Payload guard middleware added: max_size=262144 bytes, enforce_json=True, enabled=True\nINFO     backend.middleware.rate_limit:rate_limit.py:90 Rate limiting disabled\nINFO     backend.core.app:app.py:202 \u2705 Rate limiting middleware added: 100/min, burst=200, enabled=False\nINFO     backend.core.app:app.py:244 \u2705 Security headers middleware added: [HSTS, CSP(report-only), COOP, COEP], x_frame_options=DENY\nINFO     backend.core.app:app.py:259 \u2705 Legacy endpoint middleware added for usage telemetry and deprecation controls\nINFO     backend.exceptions.handlers:handlers.py:235 \u2705 PayloadRejectionError handler registered\nINFO     backend.exceptions.handlers:handlers.py:250 \u2705 All exception handlers registered with structured error taxonomy\nINFO     backend.core.app:app.py:269 \u2705 Centralized exception handlers registered\nINFO     backend.core.app:app.py:332 \u2705 PR11 Enhanced WebSocket client route included (/ws/client)\nINFO     backend.core.app:app.py:702 \u2705 Auth routes also exposed at root (/auth/*) for compatibility\nINFO     backend.core.app:app.py:706 \u2705 Auth and users routes included (auth with /api prefix)\nINFO     backend.core.app:app.py:714 \u2705 Diagnostics routes included (/api/v2/diagnostics/health, /api/v2/diagnostics/system)\nINFO     backend.core.app:app.py:763 \u2705 Meta cache routes included (/api/v2/meta/cache-stats, /api/v2/meta/cache-health)\nINFO     backend.core.app:app.py:773 \u2705 Legacy meta routes included (/api/v2/meta/legacy-usage, /api/v2/meta/migration-readiness)\nERROR    backend.core.app:app.py:788 \u274c Failed to register CSP report routes: Invalid args for response field! Hint: check that <class 'logging.Logger'> is a valid Pydantic field type. If you are using a return type annotation that is not a valid Pydantic field (e.g. Union[Response, dict, None]) you can disable generating the response model from the type annotation with the path operation decorator parameter response_model=None. Read more: https://fastapi.tiangolo.com/tutorial/response-model/\nINFO     backend.core.app:app.py:794 \u2705 Trace test routes included (/api/trace/* endpoints)\nINFO     backend.core.app:app.py:804 \u2705 Model inference routes included (/api/v2/models/* endpoints)\nINFO     backend.core.app:app.py:814 \u2705 Observability events routes included (/api/v2/observability/* endpoints)\nINFO     backend.core.app:app.py:824 \u2705 Admin control routes included (/api/v2/models/shadow/* and /api/v2/models/admin/* endpoints)\nINFO     backend.core.app:app.py:834 \u2705 Enhanced WebSocket routes included (/ws/v2/* endpoints)\nINFO     backend.core.app:app.py:844 \u2705 WebSocket logging routes included (/api/websocket/* endpoints)\nINFO     backend.core.app:app.py:854 \u2705 Version routes included (/api/version/* endpoints)\nINFO     backend.core.app:app.py:864 \u2705 WebVitals pipeline routes included (/api/metrics/v1/* endpoints)\nINFO     backend.core.app:app.py:874 \u2705 Enhanced ML routes included (/api/enhanced-ml/* endpoints)\nINFO     backend.core.app:app.py:986 \u2705 Fallback enhanced-ml compatibility router mounted at /api/enhanced-ml\nINFO     backend.core.app:app.py:995 \u2705 Consolidated PrizePicks routes included (/api/v2/prizepicks/* endpoints)\nINFO     backend.core.app:app.py:1005 \u2705 Consolidated ML routes included (/api/v2/ml/* endpoints)\nERROR    backend.core.app:app.py:1019 \u274c Failed to register consolidated Admin routes: parameter without a default follows parameter with a default (consolidated_admin.py, line 165)\nINFO     backend.core.app:app.py:1025 \u2705 Odds & Line Movement routes included (/v1/odds/* endpoints)\nINFO     backend.core.app:app.py:1066 \u2705 Advanced-Kelly compatibility router mounted at /api/advanced-kelly\nERROR    backend.core.app:app.py:1078 \u274c Failed to register Risk Management & Personalization routes: 'NoneType' object has no attribute 'alert_evaluation_interval_seconds'\nINFO     backend.core.app:app.py:1084 \u2705 Dependencies Health routes included (/api/dependencies/* endpoints)\nINFO     backend.core.app:app.py:1094 \u2705 Provider Resilience routes included (/api/provider-resilience/* endpoints)\nINFO     backend.core.app:app.py:1104 \u2705 System capabilities routes included (/api/system/* endpoints)\nINFO     backend.core.app:app.py:1114 \u2705 Real-time market streaming routes included (/streaming/* endpoints)\nINFO     backend.core.app:app.py:1124 \u2705 Security HEAD endpoints included (/api/* HEAD endpoints)\nINFO     backend.core.app:app.py:1134 \u2705 ML Model Registry routes included (/api/models/* endpoints)\nINFO     backend.core.app:app.py:1144 \u2705 Data ingestion routes included (/api/v1/ingestion/* endpoints)\nINFO     backend.core.app:app.py:1154 \u2705 Enterprise model registry routes included (/api/models/enterprise/* endpoints)\nINFO     backend.core.app:app.py:1199 \u2705 Alert engine routes included (/api/alert-engine/* endpoints)\nINFO     backend.core.app:app.py:1209 \u2705 PropFinder routes included (/api/propfinder/* endpoints)\nWARNING  backend.core.app:app.py:1221 \u26a0\ufe0f Could not import multiple_sportsbook_routes: cannot import name 'RateLimiter' from 'backend.middleware.rate_limit' (C:\\Users\\bcmad\\Downloads\\A1Betting7-13.2\\backend\\middleware\\rate_limit.py)\nINFO     backend.core.app:app.py:1495 \u2705 Sportsbook compatibility router mounted at /api/sportsbook\nINFO     backend.core.app:app.py:1527 \U0001f50d Bootstrap validation scheduled on startup\nINFO     backend.core.app:app.py:1535 \U0001f3e5 Health endpoints normalized: /api/health, /health, /api/v2/health -> identical envelope format\nINFO     backend.core.app:app.py:1536 \u2705 A1Betting canonical app created successfully
---------------------------- Captured stderr call -----------------------------
2025-08-23 08:03:55,825 - backend.middleware.rate_limit - INFO - Rate limiting disabled\n2025-08-23 08:03:55,825 - backend.middleware.security_headers - INFO - \u2705 Security headers middleware enabled: CSP=report-only, HSTS=True, strict_mode=False\n2025-08-23 08:03:55,825 - backend.middleware.legacy_middleware - INFO - Registered known legacy endpoints with forwarding paths\n2025-08-23 08:03:55,825 - backend.middleware.legacy_middleware - INFO - Legacy middleware initialized\n{"timestamp": "2025-08-23T13:03:55.828174", "level": "INFO", "logger": "a1betting", "message": "Request started", "module": "structured_logging_middleware", "function": "log_request_start", "line": 109, "request_id": "1754b7be-ea5a-4a68-8079-8c3112618775", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro", "event_type": "request_start", "method": "GET", "url": "http://testserver/mlb/todays-games", "path": "/mlb/todays-games", "query_params": {}, "client_ip": "127.0.0.1", "user_agent": "python-httpx/0.28.1", "content_type": null}\n2025-08-23 08:03:55,828 - backend.middleware.request_id_middleware - INFO - Request started: GET /mlb/todays-games\n2025-08-23 08:03:55,828 - backend.errors.catalog - ERROR - API Error: E4040_NOT_FOUND\n2025-08-23 08:03:55,828 - backend.middleware.request_id_middleware - INFO - Request completed: GET /mlb/todays-games - 404\n2025-08-23 08:03:55,829 - backend.middleware.distributed_trace_middleware - INFO - Trace completed: c7058888-293c-4c00-94c5-776692fe1c8c\n{"timestamp": "2025-08-23T13:03:55.829145", "level": "INFO", "logger": "a1betting", "message": "Request completed", "module": "structured_logging_middleware", "function": "log_request_success", "line": 124, "request_id": "1754b7be-ea5a-4a68-8079-8c3112618775", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro", "event_type": "request_success", "method": "GET", "url": "http://testserver/mlb/todays-games", "path": "/mlb/todays-games", "status_code": 404, "duration_ms": 1.0, "response_size": "243", "performance_category": "fast"}
------------------------------ Captured log call ------------------------------
INFO     backend.middleware.rate_limit:rate_limit.py:90 Rate limiting disabled\nINFO     backend.middleware.security_headers:security_headers.py:71 \u2705 Security headers middleware enabled: CSP=report-only, HSTS=True, strict_mode=False\nINFO     backend.middleware.legacy_middleware:legacy_middleware.py:68 Registered known legacy endpoints with forwarding paths\nINFO     backend.middleware.legacy_middleware:legacy_middleware.py:44 Legacy middleware initialized\nINFO     backend.middleware.request_id_middleware:request_id_middleware.py:67 Request started: GET /mlb/todays-games\nERROR    backend.errors.catalog:catalog.py:304 API Error: E4040_NOT_FOUND\nINFO     backend.middleware.request_id_middleware:request_id_middleware.py:92 Request completed: GET /mlb/todays-games - 404\nINFO     backend.middleware.distributed_trace_middleware:distributed_trace_middleware.py:224 Trace completed: c7058888-293c-4c00-94c5-776692fe1c8c
_______________ TestMLBExtrasRoutes.test_get_todays_games_empty _______________
tests\backend\routes\test_mlb_extras.py:98: in test_get_todays_games_empty
    assert response.status_code == status.HTTP_200_OK
E   assert 404 == 200
E    +  where 404 = <Response [404 Not Found]>.status_code
E    +  and   200 = status.HTTP_200_OK
---------------------------- Captured stderr setup ----------------------------
2025-08-23 08:03:55,836 - backend.core.app - INFO - \U0001f680 Creating A1Betting canonical app...\n2025-08-23 08:03:55,836 - backend.core.app - INFO - \u2705 Request ID correlation middleware added\n2025-08-23 08:03:55,836 - backend.core.app - INFO - \u2705 Distributed trace correlation middleware added\n2025-08-23 08:03:55,836 - backend.core.app - INFO - \u2705 Structured logging middleware added\n2025-08-23 08:03:55,836 - backend.core.app - INFO - \u2705 Prometheus metrics middleware added\n2025-08-23 08:03:55,836 - backend.core.app - INFO - \u2705 Payload guard middleware added: max_size=262144 bytes, enforce_json=True, enabled=True\n2025-08-23 08:03:55,836 - backend.middleware.rate_limit - INFO - Rate limiting disabled\n2025-08-23 08:03:55,836 - backend.core.app - INFO - \u2705 Rate limiting middleware added: 100/min, burst=200, enabled=False\n2025-08-23 08:03:55,836 - backend.core.app - INFO - \u2705 Security headers middleware added: [HSTS, CSP(report-only), COOP, COEP], x_frame_options=DENY\n2025-08-23 08:03:55,836 - backend.core.app - INFO - \u2705 Legacy endpoint middleware added for usage telemetry and deprecation controls\n2025-08-23 08:03:55,837 - backend.exceptions.handlers - INFO - \u2705 PayloadRejectionError handler registered\n2025-08-23 08:03:55,837 - backend.exceptions.handlers - INFO - \u2705 All exception handlers registered with structured error taxonomy\n2025-08-23 08:03:55,837 - backend.core.app - INFO - \u2705 Centralized exception handlers registered\n2025-08-23 08:03:55,838 - backend.core.app - INFO - \u2705 PR11 Enhanced WebSocket client route included (/ws/client)\n2025-08-23 08:03:55,842 - backend.core.app - INFO - \u2705 Auth routes also exposed at root (/auth/*) for compatibility\n2025-08-23 08:03:55,842 - backend.core.app - INFO - \u2705 Auth and users routes included (auth with /api prefix)\n2025-08-23 08:03:55,843 - backend.core.app - INFO - \u2705 Diagnostics routes included (/api/v2/diagnostics/health, /api/v2/diagnostics/system)\n2025-08-23 08:03:55,844 - backend.core.app - INFO - \u2705 Meta cache routes included (/api/v2/meta/cache-stats, /api/v2/meta/cache-health)\n2025-08-23 08:03:55,845 - backend.core.app - INFO - \u2705 Legacy meta routes included (/api/v2/meta/legacy-usage, /api/v2/meta/migration-readiness)\n2025-08-23 08:03:55,848 - backend.core.app - ERROR - \u274c Failed to register CSP report routes: Invalid args for response field! Hint: check that <class 'logging.Logger'> is a valid Pydantic field type. If you are using a return type annotation that is not a valid Pydantic field (e.g. Union[Response, dict, None]) you can disable generating the response model from the type annotation with the path operation decorator parameter response_model=None. Read more: https://fastapi.tiangolo.com/tutorial/response-model/\n2025-08-23 08:03:55,848 - backend.core.app - INFO - \u2705 Trace test routes included (/api/trace/* endpoints)\n2025-08-23 08:03:55,850 - backend.core.app - INFO - \u2705 Model inference routes included (/api/v2/models/* endpoints)\n2025-08-23 08:03:55,851 - backend.core.app - INFO - \u2705 Observability events routes included (/api/v2/observability/* endpoints)\n2025-08-23 08:03:55,852 - backend.core.app - INFO - \u2705 Admin control routes included (/api/v2/models/shadow/* and /api/v2/models/admin/* endpoints)\n2025-08-23 08:03:55,855 - backend.core.app - INFO - \u2705 Enhanced WebSocket routes included (/ws/v2/* endpoints)\n2025-08-23 08:03:55,856 - backend.core.app - INFO - \u2705 WebSocket logging routes included (/api/websocket/* endpoints)\n2025-08-23 08:03:55,856 - backend.core.app - INFO - \u2705 Version routes included (/api/version/* endpoints)\n2025-08-23 08:03:55,857 - backend.core.app - INFO - \u2705 WebVitals pipeline routes included (/api/metrics/v1/* endpoints)\n2025-08-23 08:03:55,860 - backend.core.app - INFO - \u2705 Enhanced ML routes included (/api/enhanced-ml/* endpoints)\n2025-08-23 08:03:55,861 - backend.core.app - INFO - \u2705 Fallback enhanced-ml compatibility router mounted at /api/enhanced-ml\n2025-08-23 08:03:55,866 - backend.core.app - INFO - \u2705 Consolidated PrizePicks routes included (/api/v2/prizepicks/* endpoints)\n2025-08-23 08:03:55,869 - backend.core.app - INFO - \u2705 Consolidated ML routes included (/api/v2/ml/* endpoints)\n2025-08-23 08:03:55,872 - backend.core.app - ERROR - \u274c Failed to register consolidated Admin routes: parameter without a default follows parameter with a default (consolidated_admin.py, line 165)\n2025-08-23 08:03:55,875 - backend.core.app - INFO - \u2705 Odds & Line Movement routes included (/v1/odds/* endpoints)\n2025-08-23 08:03:55,877 - backend.core.app - INFO - \u2705 Advanced-Kelly compatibility router mounted at /api/advanced-kelly\n2025-08-23 08:03:55,880 - backend.core.app - ERROR - \u274c Failed to register Risk Management & Personalization routes: 'NoneType' object has no attribute 'alert_evaluation_interval_seconds'\n2025-08-23 08:03:55,881 - backend.core.app - INFO - \u2705 Dependencies Health routes included (/api/dependencies/* endpoints)\n2025-08-23 08:03:55,884 - backend.core.app - INFO - \u2705 Provider Resilience routes included (/api/provider-resilience/* endpoints)\n2025-08-23 08:03:55,885 - backend.core.app - INFO - \u2705 System capabilities routes included (/api/system/* endpoints)\n2025-08-23 08:03:55,886 - backend.core.app - INFO - \u2705 Real-time market streaming routes included (/streaming/* endpoints)\n2025-08-23 08:03:55,887 - backend.core.app - INFO - \u2705 Security HEAD endpoints included (/api/* HEAD endpoints)\n2025-08-23 08:03:55,889 - backend.core.app - INFO - \u2705 ML Model Registry routes included (/api/models/* endpoints)\n2025-08-23 08:03:55,890 - backend.core.app - INFO - \u2705 Data ingestion routes included (/api/v1/ingestion/* endpoints)\n2025-08-23 08:03:55,893 - backend.core.app - INFO - \u2705 Enterprise model registry routes included (/api/models/enterprise/* endpoints)\n2025-08-23 08:03:55,897 - backend.core.app - INFO - \u2705 Alert engine routes included (/api/alert-engine/* endpoints)\n2025-08-23 08:03:55,900 - backend.core.app - INFO - \u2705 PropFinder routes included (/api/propfinder/* endpoints)\n2025-08-23 08:03:55,901 - backend.core.app - WARNING - \u26a0\ufe0f Could not import multiple_sportsbook_routes: cannot import name 'RateLimiter' from 'backend.middleware.rate_limit' (C:\\Users\\bcmad\\Downloads\\A1Betting7-13.2\\backend\\middleware\\rate_limit.py)\n2025-08-23 08:03:55,904 - backend.core.app - INFO - \u2705 Sportsbook compatibility router mounted at /api/sportsbook\n2025-08-23 08:03:55,904 - backend.core.app - INFO - \U0001f50d Bootstrap validation scheduled on startup\n2025-08-23 08:03:55,905 - backend.core.app - INFO - \U0001f3e5 Health endpoints normalized: /api/health, /health, /api/v2/health -> identical envelope format\n2025-08-23 08:03:55,905 - backend.core.app - INFO - \u2705 A1Betting canonical app created successfully
----------------------------- Captured log setup ------------------------------
INFO     backend.core.app:app.py:65 \U0001f680 Creating A1Betting canonical app...\nINFO     backend.core.app:app.py:104 \u2705 Request ID correlation middleware added\nINFO     backend.core.app:app.py:114 \u2705 Distributed trace correlation middleware added\nINFO     backend.core.app:app.py:126 \u2705 Structured logging middleware added\nINFO     backend.core.app:app.py:146 \u2705 Prometheus metrics middleware added\nINFO     backend.core.app:app.py:167 \u2705 Payload guard middleware added: max_size=262144 bytes, enforce_json=True, enabled=True\nINFO     backend.middleware.rate_limit:rate_limit.py:90 Rate limiting disabled\nINFO     backend.core.app:app.py:202 \u2705 Rate limiting middleware added: 100/min, burst=200, enabled=False\nINFO     backend.core.app:app.py:244 \u2705 Security headers middleware added: [HSTS, CSP(report-only), COOP, COEP], x_frame_options=DENY\nINFO     backend.core.app:app.py:259 \u2705 Legacy endpoint middleware added for usage telemetry and deprecation controls\nINFO     backend.exceptions.handlers:handlers.py:235 \u2705 PayloadRejectionError handler registered\nINFO     backend.exceptions.handlers:handlers.py:250 \u2705 All exception handlers registered with structured error taxonomy\nINFO     backend.core.app:app.py:269 \u2705 Centralized exception handlers registered\nINFO     backend.core.app:app.py:332 \u2705 PR11 Enhanced WebSocket client route included (/ws/client)\nINFO     backend.core.app:app.py:702 \u2705 Auth routes also exposed at root (/auth/*) for compatibility\nINFO     backend.core.app:app.py:706 \u2705 Auth and users routes included (auth with /api prefix)\nINFO     backend.core.app:app.py:714 \u2705 Diagnostics routes included (/api/v2/diagnostics/health, /api/v2/diagnostics/system)\nINFO     backend.core.app:app.py:763 \u2705 Meta cache routes included (/api/v2/meta/cache-stats, /api/v2/meta/cache-health)\nINFO     backend.core.app:app.py:773 \u2705 Legacy meta routes included (/api/v2/meta/legacy-usage, /api/v2/meta/migration-readiness)\nERROR    backend.core.app:app.py:788 \u274c Failed to register CSP report routes: Invalid args for response field! Hint: check that <class 'logging.Logger'> is a valid Pydantic field type. If you are using a return type annotation that is not a valid Pydantic field (e.g. Union[Response, dict, None]) you can disable generating the response model from the type annotation with the path operation decorator parameter response_model=None. Read more: https://fastapi.tiangolo.com/tutorial/response-model/\nINFO     backend.core.app:app.py:794 \u2705 Trace test routes included (/api/trace/* endpoints)\nINFO     backend.core.app:app.py:804 \u2705 Model inference routes included (/api/v2/models/* endpoints)\nINFO     backend.core.app:app.py:814 \u2705 Observability events routes included (/api/v2/observability/* endpoints)\nINFO     backend.core.app:app.py:824 \u2705 Admin control routes included (/api/v2/models/shadow/* and /api/v2/models/admin/* endpoints)\nINFO     backend.core.app:app.py:834 \u2705 Enhanced WebSocket routes included (/ws/v2/* endpoints)\nINFO     backend.core.app:app.py:844 \u2705 WebSocket logging routes included (/api/websocket/* endpoints)\nINFO     backend.core.app:app.py:854 \u2705 Version routes included (/api/version/* endpoints)\nINFO     backend.core.app:app.py:864 \u2705 WebVitals pipeline routes included (/api/metrics/v1/* endpoints)\nINFO     backend.core.app:app.py:874 \u2705 Enhanced ML routes included (/api/enhanced-ml/* endpoints)\nINFO     backend.core.app:app.py:986 \u2705 Fallback enhanced-ml compatibility router mounted at /api/enhanced-ml\nINFO     backend.core.app:app.py:995 \u2705 Consolidated PrizePicks routes included (/api/v2/prizepicks/* endpoints)\nINFO     backend.core.app:app.py:1005 \u2705 Consolidated ML routes included (/api/v2/ml/* endpoints)\nERROR    backend.core.app:app.py:1019 \u274c Failed to register consolidated Admin routes: parameter without a default follows parameter with a default (consolidated_admin.py, line 165)\nINFO     backend.core.app:app.py:1025 \u2705 Odds & Line Movement routes included (/v1/odds/* endpoints)\nINFO     backend.core.app:app.py:1066 \u2705 Advanced-Kelly compatibility router mounted at /api/advanced-kelly\nERROR    backend.core.app:app.py:1078 \u274c Failed to register Risk Management & Personalization routes: 'NoneType' object has no attribute 'alert_evaluation_interval_seconds'\nINFO     backend.core.app:app.py:1084 \u2705 Dependencies Health routes included (/api/dependencies/* endpoints)\nINFO     backend.core.app:app.py:1094 \u2705 Provider Resilience routes included (/api/provider-resilience/* endpoints)\nINFO     backend.core.app:app.py:1104 \u2705 System capabilities routes included (/api/system/* endpoints)\nINFO     backend.core.app:app.py:1114 \u2705 Real-time market streaming routes included (/streaming/* endpoints)\nINFO     backend.core.app:app.py:1124 \u2705 Security HEAD endpoints included (/api/* HEAD endpoints)\nINFO     backend.core.app:app.py:1134 \u2705 ML Model Registry routes included (/api/models/* endpoints)\nINFO     backend.core.app:app.py:1144 \u2705 Data ingestion routes included (/api/v1/ingestion/* endpoints)\nINFO     backend.core.app:app.py:1154 \u2705 Enterprise model registry routes included (/api/models/enterprise/* endpoints)\nINFO     backend.core.app:app.py:1199 \u2705 Alert engine routes included (/api/alert-engine/* endpoints)\nINFO     backend.core.app:app.py:1209 \u2705 PropFinder routes included (/api/propfinder/* endpoints)\nWARNING  backend.core.app:app.py:1221 \u26a0\ufe0f Could not import multiple_sportsbook_routes: cannot import name 'RateLimiter' from 'backend.middleware.rate_limit' (C:\\Users\\bcmad\\Downloads\\A1Betting7-13.2\\backend\\middleware\\rate_limit.py)\nINFO     backend.core.app:app.py:1495 \u2705 Sportsbook compatibility router mounted at /api/sportsbook\nINFO     backend.core.app:app.py:1527 \U0001f50d Bootstrap validation scheduled on startup\nINFO     backend.core.app:app.py:1535 \U0001f3e5 Health endpoints normalized: /api/health, /health, /api/v2/health -> identical envelope format\nINFO     backend.core.app:app.py:1536 \u2705 A1Betting canonical app created successfully
---------------------------- Captured stderr call -----------------------------
2025-08-23 08:03:55,906 - backend.middleware.rate_limit - INFO - Rate limiting disabled\n2025-08-23 08:03:55,906 - backend.middleware.security_headers - INFO - \u2705 Security headers middleware enabled: CSP=report-only, HSTS=True, strict_mode=False\n2025-08-23 08:03:55,906 - backend.middleware.legacy_middleware - INFO - Registered known legacy endpoints with forwarding paths\n2025-08-23 08:03:55,906 - backend.middleware.legacy_middleware - INFO - Legacy middleware initialized\n{"timestamp": "2025-08-23T13:03:55.907285", "level": "INFO", "logger": "a1betting", "message": "Request started", "module": "structured_logging_middleware", "function": "log_request_start", "line": 109, "request_id": "1c20715a-f5c7-4a49-b764-e504199317f2", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro", "event_type": "request_start", "method": "GET", "url": "http://testserver/mlb/todays-games", "path": "/mlb/todays-games", "query_params": {}, "client_ip": "127.0.0.1", "user_agent": "python-httpx/0.28.1", "content_type": null}\n2025-08-23 08:03:55,907 - backend.middleware.request_id_middleware - INFO - Request started: GET /mlb/todays-games\n2025-08-23 08:03:55,908 - backend.errors.catalog - ERROR - API Error: E4040_NOT_FOUND\n2025-08-23 08:03:55,908 - backend.middleware.request_id_middleware - INFO - Request completed: GET /mlb/todays-games - 404\n2025-08-23 08:03:55,908 - backend.middleware.distributed_trace_middleware - INFO - Trace completed: 6c474f6c-9a1c-4d51-ad92-dc6cee52aea4\n{"timestamp": "2025-08-23T13:03:55.908386", "level": "INFO", "logger": "a1betting", "message": "Request completed", "module": "structured_logging_middleware", "function": "log_request_success", "line": 124, "request_id": "1c20715a-f5c7-4a49-b764-e504199317f2", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro", "event_type": "request_success", "method": "GET", "url": "http://testserver/mlb/todays-games", "path": "/mlb/todays-games", "status_code": 404, "duration_ms": 1.12, "response_size": "243", "performance_category": "fast"}
------------------------------ Captured log call ------------------------------
INFO     backend.middleware.rate_limit:rate_limit.py:90 Rate limiting disabled\nINFO     backend.middleware.security_headers:security_headers.py:71 \u2705 Security headers middleware enabled: CSP=report-only, HSTS=True, strict_mode=False\nINFO     backend.middleware.legacy_middleware:legacy_middleware.py:68 Registered known legacy endpoints with forwarding paths\nINFO     backend.middleware.legacy_middleware:legacy_middleware.py:44 Legacy middleware initialized\nINFO     backend.middleware.request_id_middleware:request_id_middleware.py:67 Request started: GET /mlb/todays-games\nERROR    backend.errors.catalog:catalog.py:304 API Error: E4040_NOT_FOUND\nINFO     backend.middleware.request_id_middleware:request_id_middleware.py:92 Request completed: GET /mlb/todays-games - 404\nINFO     backend.middleware.distributed_trace_middleware:distributed_trace_middleware.py:224 Trace completed: 6c474f6c-9a1c-4d51-ad92-dc6cee52aea4
___________ TestMLBExtrasRoutes.test_get_todays_games_service_error ___________
tests\backend\routes\test_mlb_extras.py:113: in test_get_todays_games_service_error
    assert response.status_code == status.HTTP_500_INTERNAL_SERVER_ERROR
E   assert 404 == 500
E    +  where 404 = <Response [404 Not Found]>.status_code
E    +  and   500 = status.HTTP_500_INTERNAL_SERVER_ERROR
---------------------------- Captured stderr setup ----------------------------
2025-08-23 08:03:55,917 - backend.core.app - INFO - \U0001f680 Creating A1Betting canonical app...\n2025-08-23 08:03:55,917 - backend.core.app - INFO - \u2705 Request ID correlation middleware added\n2025-08-23 08:03:55,918 - backend.core.app - INFO - \u2705 Distributed trace correlation middleware added\n2025-08-23 08:03:55,918 - backend.core.app - INFO - \u2705 Structured logging middleware added\n2025-08-23 08:03:55,918 - backend.core.app - INFO - \u2705 Prometheus metrics middleware added\n2025-08-23 08:03:55,918 - backend.core.app - INFO - \u2705 Payload guard middleware added: max_size=262144 bytes, enforce_json=True, enabled=True\n2025-08-23 08:03:55,918 - backend.middleware.rate_limit - INFO - Rate limiting disabled\n2025-08-23 08:03:55,918 - backend.core.app - INFO - \u2705 Rate limiting middleware added: 100/min, burst=200, enabled=False\n2025-08-23 08:03:55,918 - backend.core.app - INFO - \u2705 Security headers middleware added: [HSTS, CSP(report-only), COOP, COEP], x_frame_options=DENY\n2025-08-23 08:03:55,918 - backend.core.app - INFO - \u2705 Legacy endpoint middleware added for usage telemetry and deprecation controls\n2025-08-23 08:03:55,918 - backend.exceptions.handlers - INFO - \u2705 PayloadRejectionError handler registered\n2025-08-23 08:03:55,918 - backend.exceptions.handlers - INFO - \u2705 All exception handlers registered with structured error taxonomy\n2025-08-23 08:03:55,918 - backend.core.app - INFO - \u2705 Centralized exception handlers registered\n2025-08-23 08:03:55,919 - backend.core.app - INFO - \u2705 PR11 Enhanced WebSocket client route included (/ws/client)\n2025-08-23 08:03:55,923 - backend.core.app - INFO - \u2705 Auth routes also exposed at root (/auth/*) for compatibility\n2025-08-23 08:03:55,923 - backend.core.app - INFO - \u2705 Auth and users routes included (auth with /api prefix)\n2025-08-23 08:03:55,924 - backend.core.app - INFO - \u2705 Diagnostics routes included (/api/v2/diagnostics/health, /api/v2/diagnostics/system)\n2025-08-23 08:03:55,925 - backend.core.app - INFO - \u2705 Meta cache routes included (/api/v2/meta/cache-stats, /api/v2/meta/cache-health)\n2025-08-23 08:03:55,926 - backend.core.app - INFO - \u2705 Legacy meta routes included (/api/v2/meta/legacy-usage, /api/v2/meta/migration-readiness)\n2025-08-23 08:03:55,928 - backend.core.app - ERROR - \u274c Failed to register CSP report routes: Invalid args for response field! Hint: check that <class 'logging.Logger'> is a valid Pydantic field type. If you are using a return type annotation that is not a valid Pydantic field (e.g. Union[Response, dict, None]) you can disable generating the response model from the type annotation with the path operation decorator parameter response_model=None. Read more: https://fastapi.tiangolo.com/tutorial/response-model/\n2025-08-23 08:03:55,928 - backend.core.app - INFO - \u2705 Trace test routes included (/api/trace/* endpoints)\n2025-08-23 08:03:55,930 - backend.core.app - INFO - \u2705 Model inference routes included (/api/v2/models/* endpoints)\n2025-08-23 08:03:55,932 - backend.core.app - INFO - \u2705 Observability events routes included (/api/v2/observability/* endpoints)\n2025-08-23 08:03:55,933 - backend.core.app - INFO - \u2705 Admin control routes included (/api/v2/models/shadow/* and /api/v2/models/admin/* endpoints)\n2025-08-23 08:03:55,935 - backend.core.app - INFO - \u2705 Enhanced WebSocket routes included (/ws/v2/* endpoints)\n2025-08-23 08:03:55,936 - backend.core.app - INFO - \u2705 WebSocket logging routes included (/api/websocket/* endpoints)\n2025-08-23 08:03:55,937 - backend.core.app - INFO - \u2705 Version routes included (/api/version/* endpoints)\n2025-08-23 08:03:55,937 - backend.core.app - INFO - \u2705 WebVitals pipeline routes included (/api/metrics/v1/* endpoints)\n2025-08-23 08:03:55,941 - backend.core.app - INFO - \u2705 Enhanced ML routes included (/api/enhanced-ml/* endpoints)\n2025-08-23 08:03:55,942 - backend.core.app - INFO - \u2705 Fallback enhanced-ml compatibility router mounted at /api/enhanced-ml\n2025-08-23 08:03:55,947 - backend.core.app - INFO - \u2705 Consolidated PrizePicks routes included (/api/v2/prizepicks/* endpoints)\n2025-08-23 08:03:55,950 - backend.core.app - INFO - \u2705 Consolidated ML routes included (/api/v2/ml/* endpoints)\n2025-08-23 08:03:55,952 - backend.core.app - ERROR - \u274c Failed to register consolidated Admin routes: parameter without a default follows parameter with a default (consolidated_admin.py, line 165)\n2025-08-23 08:03:55,956 - backend.core.app - INFO - \u2705 Odds & Line Movement routes included (/v1/odds/* endpoints)\n2025-08-23 08:03:55,958 - backend.core.app - INFO - \u2705 Advanced-Kelly compatibility router mounted at /api/advanced-kelly\n2025-08-23 08:03:55,960 - backend.core.app - ERROR - \u274c Failed to register Risk Management & Personalization routes: 'NoneType' object has no attribute 'alert_evaluation_interval_seconds'\n2025-08-23 08:03:55,962 - backend.core.app - INFO - \u2705 Dependencies Health routes included (/api/dependencies/* endpoints)\n2025-08-23 08:03:55,964 - backend.core.app - INFO - \u2705 Provider Resilience routes included (/api/provider-resilience/* endpoints)\n2025-08-23 08:03:55,966 - backend.core.app - INFO - \u2705 System capabilities routes included (/api/system/* endpoints)\n2025-08-23 08:03:55,967 - backend.core.app - INFO - \u2705 Real-time market streaming routes included (/streaming/* endpoints)\n2025-08-23 08:03:55,968 - backend.core.app - INFO - \u2705 Security HEAD endpoints included (/api/* HEAD endpoints)\n2025-08-23 08:03:55,969 - backend.core.app - INFO - \u2705 ML Model Registry routes included (/api/models/* endpoints)\n2025-08-23 08:03:55,970 - backend.core.app - INFO - \u2705 Data ingestion routes included (/api/v1/ingestion/* endpoints)\n2025-08-23 08:03:55,974 - backend.core.app - INFO - \u2705 Enterprise model registry routes included (/api/models/enterprise/* endpoints)\n2025-08-23 08:03:55,978 - backend.core.app - INFO - \u2705 Alert engine routes included (/api/alert-engine/* endpoints)\n2025-08-23 08:03:55,982 - backend.core.app - INFO - \u2705 PropFinder routes included (/api/propfinder/* endpoints)\n2025-08-23 08:03:55,983 - backend.core.app - WARNING - \u26a0\ufe0f Could not import multiple_sportsbook_routes: cannot import name 'RateLimiter' from 'backend.middleware.rate_limit' (C:\\Users\\bcmad\\Downloads\\A1Betting7-13.2\\backend\\middleware\\rate_limit.py)\n2025-08-23 08:03:55,985 - backend.core.app - INFO - \u2705 Sportsbook compatibility router mounted at /api/sportsbook\n2025-08-23 08:03:55,985 - backend.core.app - INFO - \U0001f50d Bootstrap validation scheduled on startup\n2025-08-23 08:03:55,986 - backend.core.app - INFO - \U0001f3e5 Health endpoints normalized: /api/health, /health, /api/v2/health -> identical envelope format\n2025-08-23 08:03:55,986 - backend.core.app - INFO - \u2705 A1Betting canonical app created successfully
----------------------------- Captured log setup ------------------------------
INFO     backend.core.app:app.py:65 \U0001f680 Creating A1Betting canonical app...\nINFO     backend.core.app:app.py:104 \u2705 Request ID correlation middleware added\nINFO     backend.core.app:app.py:114 \u2705 Distributed trace correlation middleware added\nINFO     backend.core.app:app.py:126 \u2705 Structured logging middleware added\nINFO     backend.core.app:app.py:146 \u2705 Prometheus metrics middleware added\nINFO     backend.core.app:app.py:167 \u2705 Payload guard middleware added: max_size=262144 bytes, enforce_json=True, enabled=True\nINFO     backend.middleware.rate_limit:rate_limit.py:90 Rate limiting disabled\nINFO     backend.core.app:app.py:202 \u2705 Rate limiting middleware added: 100/min, burst=200, enabled=False\nINFO     backend.core.app:app.py:244 \u2705 Security headers middleware added: [HSTS, CSP(report-only), COOP, COEP], x_frame_options=DENY\nINFO     backend.core.app:app.py:259 \u2705 Legacy endpoint middleware added for usage telemetry and deprecation controls\nINFO     backend.exceptions.handlers:handlers.py:235 \u2705 PayloadRejectionError handler registered\nINFO     backend.exceptions.handlers:handlers.py:250 \u2705 All exception handlers registered with structured error taxonomy\nINFO     backend.core.app:app.py:269 \u2705 Centralized exception handlers registered\nINFO     backend.core.app:app.py:332 \u2705 PR11 Enhanced WebSocket client route included (/ws/client)\nINFO     backend.core.app:app.py:702 \u2705 Auth routes also exposed at root (/auth/*) for compatibility\nINFO     backend.core.app:app.py:706 \u2705 Auth and users routes included (auth with /api prefix)\nINFO     backend.core.app:app.py:714 \u2705 Diagnostics routes included (/api/v2/diagnostics/health, /api/v2/diagnostics/system)\nINFO     backend.core.app:app.py:763 \u2705 Meta cache routes included (/api/v2/meta/cache-stats, /api/v2/meta/cache-health)\nINFO     backend.core.app:app.py:773 \u2705 Legacy meta routes included (/api/v2/meta/legacy-usage, /api/v2/meta/migration-readiness)\nERROR    backend.core.app:app.py:788 \u274c Failed to register CSP report routes: Invalid args for response field! Hint: check that <class 'logging.Logger'> is a valid Pydantic field type. If you are using a return type annotation that is not a valid Pydantic field (e.g. Union[Response, dict, None]) you can disable generating the response model from the type annotation with the path operation decorator parameter response_model=None. Read more: https://fastapi.tiangolo.com/tutorial/response-model/\nINFO     backend.core.app:app.py:794 \u2705 Trace test routes included (/api/trace/* endpoints)\nINFO     backend.core.app:app.py:804 \u2705 Model inference routes included (/api/v2/models/* endpoints)\nINFO     backend.core.app:app.py:814 \u2705 Observability events routes included (/api/v2/observability/* endpoints)\nINFO     backend.core.app:app.py:824 \u2705 Admin control routes included (/api/v2/models/shadow/* and /api/v2/models/admin/* endpoints)\nINFO     backend.core.app:app.py:834 \u2705 Enhanced WebSocket routes included (/ws/v2/* endpoints)\nINFO     backend.core.app:app.py:844 \u2705 WebSocket logging routes included (/api/websocket/* endpoints)\nINFO     backend.core.app:app.py:854 \u2705 Version routes included (/api/version/* endpoints)\nINFO     backend.core.app:app.py:864 \u2705 WebVitals pipeline routes included (/api/metrics/v1/* endpoints)\nINFO     backend.core.app:app.py:874 \u2705 Enhanced ML routes included (/api/enhanced-ml/* endpoints)\nINFO     backend.core.app:app.py:986 \u2705 Fallback enhanced-ml compatibility router mounted at /api/enhanced-ml\nINFO     backend.core.app:app.py:995 \u2705 Consolidated PrizePicks routes included (/api/v2/prizepicks/* endpoints)\nINFO     backend.core.app:app.py:1005 \u2705 Consolidated ML routes included (/api/v2/ml/* endpoints)\nERROR    backend.core.app:app.py:1019 \u274c Failed to register consolidated Admin routes: parameter without a default follows parameter with a default (consolidated_admin.py, line 165)\nINFO     backend.core.app:app.py:1025 \u2705 Odds & Line Movement routes included (/v1/odds/* endpoints)\nINFO     backend.core.app:app.py:1066 \u2705 Advanced-Kelly compatibility router mounted at /api/advanced-kelly\nERROR    backend.core.app:app.py:1078 \u274c Failed to register Risk Management & Personalization routes: 'NoneType' object has no attribute 'alert_evaluation_interval_seconds'\nINFO     backend.core.app:app.py:1084 \u2705 Dependencies Health routes included (/api/dependencies/* endpoints)\nINFO     backend.core.app:app.py:1094 \u2705 Provider Resilience routes included (/api/provider-resilience/* endpoints)\nINFO     backend.core.app:app.py:1104 \u2705 System capabilities routes included (/api/system/* endpoints)\nINFO     backend.core.app:app.py:1114 \u2705 Real-time market streaming routes included (/streaming/* endpoints)\nINFO     backend.core.app:app.py:1124 \u2705 Security HEAD endpoints included (/api/* HEAD endpoints)\nINFO     backend.core.app:app.py:1134 \u2705 ML Model Registry routes included (/api/models/* endpoints)\nINFO     backend.core.app:app.py:1144 \u2705 Data ingestion routes included (/api/v1/ingestion/* endpoints)\nINFO     backend.core.app:app.py:1154 \u2705 Enterprise model registry routes included (/api/models/enterprise/* endpoints)\nINFO     backend.core.app:app.py:1199 \u2705 Alert engine routes included (/api/alert-engine/* endpoints)\nINFO     backend.core.app:app.py:1209 \u2705 PropFinder routes included (/api/propfinder/* endpoints)\nWARNING  backend.core.app:app.py:1221 \u26a0\ufe0f Could not import multiple_sportsbook_routes: cannot import name 'RateLimiter' from 'backend.middleware.rate_limit' (C:\\Users\\bcmad\\Downloads\\A1Betting7-13.2\\backend\\middleware\\rate_limit.py)\nINFO     backend.core.app:app.py:1495 \u2705 Sportsbook compatibility router mounted at /api/sportsbook\nINFO     backend.core.app:app.py:1527 \U0001f50d Bootstrap validation scheduled on startup\nINFO     backend.core.app:app.py:1535 \U0001f3e5 Health endpoints normalized: /api/health, /health, /api/v2/health -> identical envelope format\nINFO     backend.core.app:app.py:1536 \u2705 A1Betting canonical app created successfully
---------------------------- Captured stderr call -----------------------------
2025-08-23 08:03:55,987 - backend.middleware.rate_limit - INFO - Rate limiting disabled\n2025-08-23 08:03:55,988 - backend.middleware.security_headers - INFO - \u2705 Security headers middleware enabled: CSP=report-only, HSTS=True, strict_mode=False\n2025-08-23 08:03:55,988 - backend.middleware.legacy_middleware - INFO - Registered known legacy endpoints with forwarding paths\n2025-08-23 08:03:55,988 - backend.middleware.legacy_middleware - INFO - Legacy middleware initialized\n{"timestamp": "2025-08-23T13:03:55.988392", "level": "INFO", "logger": "a1betting", "message": "Request started", "module": "structured_logging_middleware", "function": "log_request_start", "line": 109, "request_id": "52bba9a6-4587-4bd4-a0e7-688936b15ea3", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro", "event_type": "request_start", "method": "GET", "url": "http://testserver/mlb/todays-games", "path": "/mlb/todays-games", "query_params": {}, "client_ip": "127.0.0.1", "user_agent": "python-httpx/0.28.1", "content_type": null}\n2025-08-23 08:03:55,988 - backend.middleware.request_id_middleware - INFO - Request started: GET /mlb/todays-games\n2025-08-23 08:03:55,989 - backend.errors.catalog - ERROR - API Error: E4040_NOT_FOUND\n2025-08-23 08:03:55,989 - backend.middleware.request_id_middleware - INFO - Request completed: GET /mlb/todays-games - 404\n2025-08-23 08:03:55,989 - backend.middleware.distributed_trace_middleware - INFO - Trace completed: 244d821b-9025-43b7-8923-d96881f3c369\n{"timestamp": "2025-08-23T13:03:55.989630", "level": "INFO", "logger": "a1betting", "message": "Request completed", "module": "structured_logging_middleware", "function": "log_request_success", "line": 124, "request_id": "52bba9a6-4587-4bd4-a0e7-688936b15ea3", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro", "event_type": "request_success", "method": "GET", "url": "http://testserver/mlb/todays-games", "path": "/mlb/todays-games", "status_code": 404, "duration_ms": 1.26, "response_size": "243", "performance_category": "fast"}
------------------------------ Captured log call ------------------------------
INFO     backend.middleware.rate_limit:rate_limit.py:90 Rate limiting disabled\nINFO     backend.middleware.security_headers:security_headers.py:71 \u2705 Security headers middleware enabled: CSP=report-only, HSTS=True, strict_mode=False\nINFO     backend.middleware.legacy_middleware:legacy_middleware.py:68 Registered known legacy endpoints with forwarding paths\nINFO     backend.middleware.legacy_middleware:legacy_middleware.py:44 Legacy middleware initialized\nINFO     backend.middleware.request_id_middleware:request_id_middleware.py:67 Request started: GET /mlb/todays-games\nERROR    backend.errors.catalog:catalog.py:304 API Error: E4040_NOT_FOUND\nINFO     backend.middleware.request_id_middleware:request_id_middleware.py:92 Request completed: GET /mlb/todays-games - 404\nINFO     backend.middleware.distributed_trace_middleware:distributed_trace_middleware.py:224 Trace completed: 244d821b-9025-43b7-8923-d96881f3c369
____________ TestMLBExtrasRoutes.test_get_prizepicks_props_success ____________
tests\backend\routes\test_mlb_extras.py:149: in test_get_prizepicks_props_success
    with patch('backend.routes.mlb_extras.get_filtered_prizepicks_props', return_value=mock_props):
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
C:\Python313\Lib\unittest\mock.py:1497: in __enter__
    original, local = self.get_original()
                      ^^^^^^^^^^^^^^^^^^^
C:\Python313\Lib\unittest\mock.py:1467: in get_original
    raise AttributeError(
E   AttributeError: <module 'backend.routes.mlb_extras' from 'C:\\Users\\bcmad\\Downloads\\A1Betting7-13.2\\backend\\routes\\mlb_extras.py'> does not have the attribute 'get_filtered_prizepicks_props'
---------------------------- Captured stderr setup ----------------------------
2025-08-23 08:03:55,996 - backend.core.app - INFO - \U0001f680 Creating A1Betting canonical app...\n2025-08-23 08:03:55,996 - backend.core.app - INFO - \u2705 Request ID correlation middleware added\n2025-08-23 08:03:55,996 - backend.core.app - INFO - \u2705 Distributed trace correlation middleware added\n2025-08-23 08:03:55,996 - backend.core.app - INFO - \u2705 Structured logging middleware added\n2025-08-23 08:03:55,997 - backend.core.app - INFO - \u2705 Prometheus metrics middleware added\n2025-08-23 08:03:55,997 - backend.core.app - INFO - \u2705 Payload guard middleware added: max_size=262144 bytes, enforce_json=True, enabled=True\n2025-08-23 08:03:55,997 - backend.middleware.rate_limit - INFO - Rate limiting disabled\n2025-08-23 08:03:55,997 - backend.core.app - INFO - \u2705 Rate limiting middleware added: 100/min, burst=200, enabled=False\n2025-08-23 08:03:55,997 - backend.core.app - INFO - \u2705 Security headers middleware added: [HSTS, CSP(report-only), COOP, COEP], x_frame_options=DENY\n2025-08-23 08:03:55,997 - backend.core.app - INFO - \u2705 Legacy endpoint middleware added for usage telemetry and deprecation controls\n2025-08-23 08:03:55,997 - backend.exceptions.handlers - INFO - \u2705 PayloadRejectionError handler registered\n2025-08-23 08:03:55,997 - backend.exceptions.handlers - INFO - \u2705 All exception handlers registered with structured error taxonomy\n2025-08-23 08:03:55,997 - backend.core.app - INFO - \u2705 Centralized exception handlers registered\n2025-08-23 08:03:55,998 - backend.core.app - INFO - \u2705 PR11 Enhanced WebSocket client route included (/ws/client)\n2025-08-23 08:03:56,003 - backend.core.app - INFO - \u2705 Auth routes also exposed at root (/auth/*) for compatibility\n2025-08-23 08:03:56,003 - backend.core.app - INFO - \u2705 Auth and users routes included (auth with /api prefix)\n2025-08-23 08:03:56,004 - backend.core.app - INFO - \u2705 Diagnostics routes included (/api/v2/diagnostics/health, /api/v2/diagnostics/system)\n2025-08-23 08:03:56,005 - backend.core.app - INFO - \u2705 Meta cache routes included (/api/v2/meta/cache-stats, /api/v2/meta/cache-health)\n2025-08-23 08:03:56,006 - backend.core.app - INFO - \u2705 Legacy meta routes included (/api/v2/meta/legacy-usage, /api/v2/meta/migration-readiness)\n2025-08-23 08:03:56,009 - backend.core.app - ERROR - \u274c Failed to register CSP report routes: Invalid args for response field! Hint: check that <class 'logging.Logger'> is a valid Pydantic field type. If you are using a return type annotation that is not a valid Pydantic field (e.g. Union[Response, dict, None]) you can disable generating the response model from the type annotation with the path operation decorator parameter response_model=None. Read more: https://fastapi.tiangolo.com/tutorial/response-model/\n2025-08-23 08:03:56,009 - backend.core.app - INFO - \u2705 Trace test routes included (/api/trace/* endpoints)\n2025-08-23 08:03:56,010 - backend.core.app - INFO - \u2705 Model inference routes included (/api/v2/models/* endpoints)\n2025-08-23 08:03:56,012 - backend.core.app - INFO - \u2705 Observability events routes included (/api/v2/observability/* endpoints)\n2025-08-23 08:03:56,013 - backend.core.app - INFO - \u2705 Admin control routes included (/api/v2/models/shadow/* and /api/v2/models/admin/* endpoints)\n2025-08-23 08:03:56,015 - backend.core.app - INFO - \u2705 Enhanced WebSocket routes included (/ws/v2/* endpoints)\n2025-08-23 08:03:56,016 - backend.core.app - INFO - \u2705 WebSocket logging routes included (/api/websocket/* endpoints)\n2025-08-23 08:03:56,017 - backend.core.app - INFO - \u2705 Version routes included (/api/version/* endpoints)\n2025-08-23 08:03:56,017 - backend.core.app - INFO - \u2705 WebVitals pipeline routes included (/api/metrics/v1/* endpoints)\n2025-08-23 08:03:56,021 - backend.core.app - INFO - \u2705 Enhanced ML routes included (/api/enhanced-ml/* endpoints)\n2025-08-23 08:03:56,022 - backend.core.app - INFO - \u2705 Fallback enhanced-ml compatibility router mounted at /api/enhanced-ml\n2025-08-23 08:03:56,026 - backend.core.app - INFO - \u2705 Consolidated PrizePicks routes included (/api/v2/prizepicks/* endpoints)\n2025-08-23 08:03:56,030 - backend.core.app - INFO - \u2705 Consolidated ML routes included (/api/v2/ml/* endpoints)\n2025-08-23 08:03:56,032 - backend.core.app - ERROR - \u274c Failed to register consolidated Admin routes: parameter without a default follows parameter with a default (consolidated_admin.py, line 165)\n2025-08-23 08:03:56,035 - backend.core.app - INFO - \u2705 Odds & Line Movement routes included (/v1/odds/* endpoints)\n2025-08-23 08:03:56,037 - backend.core.app - INFO - \u2705 Advanced-Kelly compatibility router mounted at /api/advanced-kelly\n2025-08-23 08:03:56,040 - backend.core.app - ERROR - \u274c Failed to register Risk Management & Personalization routes: 'NoneType' object has no attribute 'alert_evaluation_interval_seconds'\n2025-08-23 08:03:56,041 - backend.core.app - INFO - \u2705 Dependencies Health routes included (/api/dependencies/* endpoints)\n2025-08-23 08:03:56,043 - backend.core.app - INFO - \u2705 Provider Resilience routes included (/api/provider-resilience/* endpoints)\n2025-08-23 08:03:56,044 - backend.core.app - INFO - \u2705 System capabilities routes included (/api/system/* endpoints)\n2025-08-23 08:03:56,046 - backend.core.app - INFO - \u2705 Real-time market streaming routes included (/streaming/* endpoints)\n2025-08-23 08:03:56,047 - backend.core.app - INFO - \u2705 Security HEAD endpoints included (/api/* HEAD endpoints)\n2025-08-23 08:03:56,049 - backend.core.app - INFO - \u2705 ML Model Registry routes included (/api/models/* endpoints)\n2025-08-23 08:03:56,050 - backend.core.app - INFO - \u2705 Data ingestion routes included (/api/v1/ingestion/* endpoints)\n2025-08-23 08:03:56,053 - backend.core.app - INFO - \u2705 Enterprise model registry routes included (/api/models/enterprise/* endpoints)\n2025-08-23 08:03:56,057 - backend.core.app - INFO - \u2705 Alert engine routes included (/api/alert-engine/* endpoints)\n2025-08-23 08:03:56,061 - backend.core.app - INFO - \u2705 PropFinder routes included (/api/propfinder/* endpoints)\n2025-08-23 08:03:56,062 - backend.core.app - WARNING - \u26a0\ufe0f Could not import multiple_sportsbook_routes: cannot import name 'RateLimiter' from 'backend.middleware.rate_limit' (C:\\Users\\bcmad\\Downloads\\A1Betting7-13.2\\backend\\middleware\\rate_limit.py)\n2025-08-23 08:03:56,065 - backend.core.app - INFO - \u2705 Sportsbook compatibility router mounted at /api/sportsbook\n2025-08-23 08:03:56,065 - backend.core.app - INFO - \U0001f50d Bootstrap validation scheduled on startup\n2025-08-23 08:03:56,065 - backend.core.app - INFO - \U0001f3e5 Health endpoints normalized: /api/health, /health, /api/v2/health -> identical envelope format\n2025-08-23 08:03:56,065 - backend.core.app - INFO - \u2705 A1Betting canonical app created successfully
----------------------------- Captured log setup ------------------------------
INFO     backend.core.app:app.py:65 \U0001f680 Creating A1Betting canonical app...\nINFO     backend.core.app:app.py:104 \u2705 Request ID correlation middleware added\nINFO     backend.core.app:app.py:114 \u2705 Distributed trace correlation middleware added\nINFO     backend.core.app:app.py:126 \u2705 Structured logging middleware added\nINFO     backend.core.app:app.py:146 \u2705 Prometheus metrics middleware added\nINFO     backend.core.app:app.py:167 \u2705 Payload guard middleware added: max_size=262144 bytes, enforce_json=True, enabled=True\nINFO     backend.middleware.rate_limit:rate_limit.py:90 Rate limiting disabled\nINFO     backend.core.app:app.py:202 \u2705 Rate limiting middleware added: 100/min, burst=200, enabled=False\nINFO     backend.core.app:app.py:244 \u2705 Security headers middleware added: [HSTS, CSP(report-only), COOP, COEP], x_frame_options=DENY\nINFO     backend.core.app:app.py:259 \u2705 Legacy endpoint middleware added for usage telemetry and deprecation controls\nINFO     backend.exceptions.handlers:handlers.py:235 \u2705 PayloadRejectionError handler registered\nINFO     backend.exceptions.handlers:handlers.py:250 \u2705 All exception handlers registered with structured error taxonomy\nINFO     backend.core.app:app.py:269 \u2705 Centralized exception handlers registered\nINFO     backend.core.app:app.py:332 \u2705 PR11 Enhanced WebSocket client route included (/ws/client)\nINFO     backend.core.app:app.py:702 \u2705 Auth routes also exposed at root (/auth/*) for compatibility\nINFO     backend.core.app:app.py:706 \u2705 Auth and users routes included (auth with /api prefix)\nINFO     backend.core.app:app.py:714 \u2705 Diagnostics routes included (/api/v2/diagnostics/health, /api/v2/diagnostics/system)\nINFO     backend.core.app:app.py:763 \u2705 Meta cache routes included (/api/v2/meta/cache-stats, /api/v2/meta/cache-health)\nINFO     backend.core.app:app.py:773 \u2705 Legacy meta routes included (/api/v2/meta/legacy-usage, /api/v2/meta/migration-readiness)\nERROR    backend.core.app:app.py:788 \u274c Failed to register CSP report routes: Invalid args for response field! Hint: check that <class 'logging.Logger'> is a valid Pydantic field type. If you are using a return type annotation that is not a valid Pydantic field (e.g. Union[Response, dict, None]) you can disable generating the response model from the type annotation with the path operation decorator parameter response_model=None. Read more: https://fastapi.tiangolo.com/tutorial/response-model/\nINFO     backend.core.app:app.py:794 \u2705 Trace test routes included (/api/trace/* endpoints)\nINFO     backend.core.app:app.py:804 \u2705 Model inference routes included (/api/v2/models/* endpoints)\nINFO     backend.core.app:app.py:814 \u2705 Observability events routes included (/api/v2/observability/* endpoints)\nINFO     backend.core.app:app.py:824 \u2705 Admin control routes included (/api/v2/models/shadow/* and /api/v2/models/admin/* endpoints)\nINFO     backend.core.app:app.py:834 \u2705 Enhanced WebSocket routes included (/ws/v2/* endpoints)\nINFO     backend.core.app:app.py:844 \u2705 WebSocket logging routes included (/api/websocket/* endpoints)\nINFO     backend.core.app:app.py:854 \u2705 Version routes included (/api/version/* endpoints)\nINFO     backend.core.app:app.py:864 \u2705 WebVitals pipeline routes included (/api/metrics/v1/* endpoints)\nINFO     backend.core.app:app.py:874 \u2705 Enhanced ML routes included (/api/enhanced-ml/* endpoints)\nINFO     backend.core.app:app.py:986 \u2705 Fallback enhanced-ml compatibility router mounted at /api/enhanced-ml\nINFO     backend.core.app:app.py:995 \u2705 Consolidated PrizePicks routes included (/api/v2/prizepicks/* endpoints)\nINFO     backend.core.app:app.py:1005 \u2705 Consolidated ML routes included (/api/v2/ml/* endpoints)\nERROR    backend.core.app:app.py:1019 \u274c Failed to register consolidated Admin routes: parameter without a default follows parameter with a default (consolidated_admin.py, line 165)\nINFO     backend.core.app:app.py:1025 \u2705 Odds & Line Movement routes included (/v1/odds/* endpoints)\nINFO     backend.core.app:app.py:1066 \u2705 Advanced-Kelly compatibility router mounted at /api/advanced-kelly\nERROR    backend.core.app:app.py:1078 \u274c Failed to register Risk Management & Personalization routes: 'NoneType' object has no attribute 'alert_evaluation_interval_seconds'\nINFO     backend.core.app:app.py:1084 \u2705 Dependencies Health routes included (/api/dependencies/* endpoints)\nINFO     backend.core.app:app.py:1094 \u2705 Provider Resilience routes included (/api/provider-resilience/* endpoints)\nINFO     backend.core.app:app.py:1104 \u2705 System capabilities routes included (/api/system/* endpoints)\nINFO     backend.core.app:app.py:1114 \u2705 Real-time market streaming routes included (/streaming/* endpoints)\nINFO     backend.core.app:app.py:1124 \u2705 Security HEAD endpoints included (/api/* HEAD endpoints)\nINFO     backend.core.app:app.py:1134 \u2705 ML Model Registry routes included (/api/models/* endpoints)\nINFO     backend.core.app:app.py:1144 \u2705 Data ingestion routes included (/api/v1/ingestion/* endpoints)\nINFO     backend.core.app:app.py:1154 \u2705 Enterprise model registry routes included (/api/models/enterprise/* endpoints)\nINFO     backend.core.app:app.py:1199 \u2705 Alert engine routes included (/api/alert-engine/* endpoints)\nINFO     backend.core.app:app.py:1209 \u2705 PropFinder routes included (/api/propfinder/* endpoints)\nWARNING  backend.core.app:app.py:1221 \u26a0\ufe0f Could not import multiple_sportsbook_routes: cannot import name 'RateLimiter' from 'backend.middleware.rate_limit' (C:\\Users\\bcmad\\Downloads\\A1Betting7-13.2\\backend\\middleware\\rate_limit.py)\nINFO     backend.core.app:app.py:1495 \u2705 Sportsbook compatibility router mounted at /api/sportsbook\nINFO     backend.core.app:app.py:1527 \U0001f50d Bootstrap validation scheduled on startup\nINFO     backend.core.app:app.py:1535 \U0001f3e5 Health endpoints normalized: /api/health, /health, /api/v2/health -> identical envelope format\nINFO     backend.core.app:app.py:1536 \u2705 A1Betting canonical app created successfully
_______ TestMLBExtrasRoutes.test_get_prizepicks_props_fallback_to_empty _______
tests\backend\routes\test_mlb_extras.py:170: in test_get_prizepicks_props_fallback_to_empty
    with patch('backend.routes.mlb_extras.get_filtered_prizepicks_props', side_effect=Exception("All sources failed")):
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
C:\Python313\Lib\unittest\mock.py:1497: in __enter__
    original, local = self.get_original()
                      ^^^^^^^^^^^^^^^^^^^
C:\Python313\Lib\unittest\mock.py:1467: in get_original
    raise AttributeError(
E   AttributeError: <module 'backend.routes.mlb_extras' from 'C:\\Users\\bcmad\\Downloads\\A1Betting7-13.2\\backend\\routes\\mlb_extras.py'> does not have the attribute 'get_filtered_prizepicks_props'
---------------------------- Captured stderr setup ----------------------------
2025-08-23 08:03:56,101 - backend.core.app - INFO - \U0001f680 Creating A1Betting canonical app...\n2025-08-23 08:03:56,101 - backend.core.app - INFO - \u2705 Request ID correlation middleware added\n2025-08-23 08:03:56,101 - backend.core.app - INFO - \u2705 Distributed trace correlation middleware added\n2025-08-23 08:03:56,102 - backend.core.app - INFO - \u2705 Structured logging middleware added\n2025-08-23 08:03:56,102 - backend.core.app - INFO - \u2705 Prometheus metrics middleware added\n2025-08-23 08:03:56,102 - backend.core.app - INFO - \u2705 Payload guard middleware added: max_size=262144 bytes, enforce_json=True, enabled=True\n2025-08-23 08:03:56,102 - backend.middleware.rate_limit - INFO - Rate limiting disabled\n2025-08-23 08:03:56,102 - backend.core.app - INFO - \u2705 Rate limiting middleware added: 100/min, burst=200, enabled=False\n2025-08-23 08:03:56,102 - backend.core.app - INFO - \u2705 Security headers middleware added: [HSTS, CSP(report-only), COOP, COEP], x_frame_options=DENY\n2025-08-23 08:03:56,102 - backend.core.app - INFO - \u2705 Legacy endpoint middleware added for usage telemetry and deprecation controls\n2025-08-23 08:03:56,102 - backend.exceptions.handlers - INFO - \u2705 PayloadRejectionError handler registered\n2025-08-23 08:03:56,102 - backend.exceptions.handlers - INFO - \u2705 All exception handlers registered with structured error taxonomy\n2025-08-23 08:03:56,102 - backend.core.app - INFO - \u2705 Centralized exception handlers registered\n2025-08-23 08:03:56,103 - backend.core.app - INFO - \u2705 PR11 Enhanced WebSocket client route included (/ws/client)\n2025-08-23 08:03:56,107 - backend.core.app - INFO - \u2705 Auth routes also exposed at root (/auth/*) for compatibility\n2025-08-23 08:03:56,107 - backend.core.app - INFO - \u2705 Auth and users routes included (auth with /api prefix)\n2025-08-23 08:03:56,108 - backend.core.app - INFO - \u2705 Diagnostics routes included (/api/v2/diagnostics/health, /api/v2/diagnostics/system)\n2025-08-23 08:03:56,109 - backend.core.app - INFO - \u2705 Meta cache routes included (/api/v2/meta/cache-stats, /api/v2/meta/cache-health)\n2025-08-23 08:03:56,110 - backend.core.app - INFO - \u2705 Legacy meta routes included (/api/v2/meta/legacy-usage, /api/v2/meta/migration-readiness)\n2025-08-23 08:03:56,114 - backend.core.app - ERROR - \u274c Failed to register CSP report routes: Invalid args for response field! Hint: check that <class 'logging.Logger'> is a valid Pydantic field type. If you are using a return type annotation that is not a valid Pydantic field (e.g. Union[Response, dict, None]) you can disable generating the response model from the type annotation with the path operation decorator parameter response_model=None. Read more: https://fastapi.tiangolo.com/tutorial/response-model/\n2025-08-23 08:03:56,115 - backend.core.app - INFO - \u2705 Trace test routes included (/api/trace/* endpoints)\n2025-08-23 08:03:56,116 - backend.core.app - INFO - \u2705 Model inference routes included (/api/v2/models/* endpoints)\n2025-08-23 08:03:56,118 - backend.core.app - INFO - \u2705 Observability events routes included (/api/v2/observability/* endpoints)\n2025-08-23 08:03:56,119 - backend.core.app - INFO - \u2705 Admin control routes included (/api/v2/models/shadow/* and /api/v2/models/admin/* endpoints)\n2025-08-23 08:03:56,121 - backend.core.app - INFO - \u2705 Enhanced WebSocket routes included (/ws/v2/* endpoints)\n2025-08-23 08:03:56,122 - backend.core.app - INFO - \u2705 WebSocket logging routes included (/api/websocket/* endpoints)\n2025-08-23 08:03:56,123 - backend.core.app - INFO - \u2705 Version routes included (/api/version/* endpoints)\n2025-08-23 08:03:56,123 - backend.core.app - INFO - \u2705 WebVitals pipeline routes included (/api/metrics/v1/* endpoints)\n2025-08-23 08:03:56,128 - backend.core.app - INFO - \u2705 Enhanced ML routes included (/api/enhanced-ml/* endpoints)\n2025-08-23 08:03:56,128 - backend.core.app - INFO - \u2705 Fallback enhanced-ml compatibility router mounted at /api/enhanced-ml\n2025-08-23 08:03:56,134 - backend.core.app - INFO - \u2705 Consolidated PrizePicks routes included (/api/v2/prizepicks/* endpoints)\n2025-08-23 08:03:56,137 - backend.core.app - INFO - \u2705 Consolidated ML routes included (/api/v2/ml/* endpoints)\n2025-08-23 08:03:56,139 - backend.core.app - ERROR - \u274c Failed to register consolidated Admin routes: parameter without a default follows parameter with a default (consolidated_admin.py, line 165)\n2025-08-23 08:03:56,142 - backend.core.app - INFO - \u2705 Odds & Line Movement routes included (/v1/odds/* endpoints)\n2025-08-23 08:03:56,143 - backend.core.app - INFO - \u2705 Advanced-Kelly compatibility router mounted at /api/advanced-kelly\n2025-08-23 08:03:56,146 - backend.core.app - ERROR - \u274c Failed to register Risk Management & Personalization routes: 'NoneType' object has no attribute 'alert_evaluation_interval_seconds'\n2025-08-23 08:03:56,148 - backend.core.app - INFO - \u2705 Dependencies Health routes included (/api/dependencies/* endpoints)\n2025-08-23 08:03:56,150 - backend.core.app - INFO - \u2705 Provider Resilience routes included (/api/provider-resilience/* endpoints)\n2025-08-23 08:03:56,151 - backend.core.app - INFO - \u2705 System capabilities routes included (/api/system/* endpoints)\n2025-08-23 08:03:56,152 - backend.core.app - INFO - \u2705 Real-time market streaming routes included (/streaming/* endpoints)\n2025-08-23 08:03:56,153 - backend.core.app - INFO - \u2705 Security HEAD endpoints included (/api/* HEAD endpoints)\n2025-08-23 08:03:56,155 - backend.core.app - INFO - \u2705 ML Model Registry routes included (/api/models/* endpoints)\n2025-08-23 08:03:56,156 - backend.core.app - INFO - \u2705 Data ingestion routes included (/api/v1/ingestion/* endpoints)\n2025-08-23 08:03:56,159 - backend.core.app - INFO - \u2705 Enterprise model registry routes included (/api/models/enterprise/* endpoints)\n2025-08-23 08:03:56,163 - backend.core.app - INFO - \u2705 Alert engine routes included (/api/alert-engine/* endpoints)\n2025-08-23 08:03:56,167 - backend.core.app - INFO - \u2705 PropFinder routes included (/api/propfinder/* endpoints)\n2025-08-23 08:03:56,168 - backend.core.app - WARNING - \u26a0\ufe0f Could not import multiple_sportsbook_routes: cannot import name 'RateLimiter' from 'backend.middleware.rate_limit' (C:\\Users\\bcmad\\Downloads\\A1Betting7-13.2\\backend\\middleware\\rate_limit.py)\n2025-08-23 08:03:56,170 - backend.core.app - INFO - \u2705 Sportsbook compatibility router mounted at /api/sportsbook\n2025-08-23 08:03:56,171 - backend.core.app - INFO - \U0001f50d Bootstrap validation scheduled on startup\n2025-08-23 08:03:56,171 - backend.core.app - INFO - \U0001f3e5 Health endpoints normalized: /api/health, /health, /api/v2/health -> identical envelope format\n2025-08-23 08:03:56,171 - backend.core.app - INFO - \u2705 A1Betting canonical app created successfully
----------------------------- Captured log setup ------------------------------
INFO     backend.core.app:app.py:65 \U0001f680 Creating A1Betting canonical app...\nINFO     backend.core.app:app.py:104 \u2705 Request ID correlation middleware added\nINFO     backend.core.app:app.py:114 \u2705 Distributed trace correlation middleware added\nINFO     backend.core.app:app.py:126 \u2705 Structured logging middleware added\nINFO     backend.core.app:app.py:146 \u2705 Prometheus metrics middleware added\nINFO     backend.core.app:app.py:167 \u2705 Payload guard middleware added: max_size=262144 bytes, enforce_json=True, enabled=True\nINFO     backend.middleware.rate_limit:rate_limit.py:90 Rate limiting disabled\nINFO     backend.core.app:app.py:202 \u2705 Rate limiting middleware added: 100/min, burst=200, enabled=False\nINFO     backend.core.app:app.py:244 \u2705 Security headers middleware added: [HSTS, CSP(report-only), COOP, COEP], x_frame_options=DENY\nINFO     backend.core.app:app.py:259 \u2705 Legacy endpoint middleware added for usage telemetry and deprecation controls\nINFO     backend.exceptions.handlers:handlers.py:235 \u2705 PayloadRejectionError handler registered\nINFO     backend.exceptions.handlers:handlers.py:250 \u2705 All exception handlers registered with structured error taxonomy\nINFO     backend.core.app:app.py:269 \u2705 Centralized exception handlers registered\nINFO     backend.core.app:app.py:332 \u2705 PR11 Enhanced WebSocket client route included (/ws/client)\nINFO     backend.core.app:app.py:702 \u2705 Auth routes also exposed at root (/auth/*) for compatibility\nINFO     backend.core.app:app.py:706 \u2705 Auth and users routes included (auth with /api prefix)\nINFO     backend.core.app:app.py:714 \u2705 Diagnostics routes included (/api/v2/diagnostics/health, /api/v2/diagnostics/system)\nINFO     backend.core.app:app.py:763 \u2705 Meta cache routes included (/api/v2/meta/cache-stats, /api/v2/meta/cache-health)\nINFO     backend.core.app:app.py:773 \u2705 Legacy meta routes included (/api/v2/meta/legacy-usage, /api/v2/meta/migration-readiness)\nERROR    backend.core.app:app.py:788 \u274c Failed to register CSP report routes: Invalid args for response field! Hint: check that <class 'logging.Logger'> is a valid Pydantic field type. If you are using a return type annotation that is not a valid Pydantic field (e.g. Union[Response, dict, None]) you can disable generating the response model from the type annotation with the path operation decorator parameter response_model=None. Read more: https://fastapi.tiangolo.com/tutorial/response-model/\nINFO     backend.core.app:app.py:794 \u2705 Trace test routes included (/api/trace/* endpoints)\nINFO     backend.core.app:app.py:804 \u2705 Model inference routes included (/api/v2/models/* endpoints)\nINFO     backend.core.app:app.py:814 \u2705 Observability events routes included (/api/v2/observability/* endpoints)\nINFO     backend.core.app:app.py:824 \u2705 Admin control routes included (/api/v2/models/shadow/* and /api/v2/models/admin/* endpoints)\nINFO     backend.core.app:app.py:834 \u2705 Enhanced WebSocket routes included (/ws/v2/* endpoints)\nINFO     backend.core.app:app.py:844 \u2705 WebSocket logging routes included (/api/websocket/* endpoints)\nINFO     backend.core.app:app.py:854 \u2705 Version routes included (/api/version/* endpoints)\nINFO     backend.core.app:app.py:864 \u2705 WebVitals pipeline routes included (/api/metrics/v1/* endpoints)\nINFO     backend.core.app:app.py:874 \u2705 Enhanced ML routes included (/api/enhanced-ml/* endpoints)\nINFO     backend.core.app:app.py:986 \u2705 Fallback enhanced-ml compatibility router mounted at /api/enhanced-ml\nINFO     backend.core.app:app.py:995 \u2705 Consolidated PrizePicks routes included (/api/v2/prizepicks/* endpoints)\nINFO     backend.core.app:app.py:1005 \u2705 Consolidated ML routes included (/api/v2/ml/* endpoints)\nERROR    backend.core.app:app.py:1019 \u274c Failed to register consolidated Admin routes: parameter without a default follows parameter with a default (consolidated_admin.py, line 165)\nINFO     backend.core.app:app.py:1025 \u2705 Odds & Line Movement routes included (/v1/odds/* endpoints)\nINFO     backend.core.app:app.py:1066 \u2705 Advanced-Kelly compatibility router mounted at /api/advanced-kelly\nERROR    backend.core.app:app.py:1078 \u274c Failed to register Risk Management & Personalization routes: 'NoneType' object has no attribute 'alert_evaluation_interval_seconds'\nINFO     backend.core.app:app.py:1084 \u2705 Dependencies Health routes included (/api/dependencies/* endpoints)\nINFO     backend.core.app:app.py:1094 \u2705 Provider Resilience routes included (/api/provider-resilience/* endpoints)\nINFO     backend.core.app:app.py:1104 \u2705 System capabilities routes included (/api/system/* endpoints)\nINFO     backend.core.app:app.py:1114 \u2705 Real-time market streaming routes included (/streaming/* endpoints)\nINFO     backend.core.app:app.py:1124 \u2705 Security HEAD endpoints included (/api/* HEAD endpoints)\nINFO     backend.core.app:app.py:1134 \u2705 ML Model Registry routes included (/api/models/* endpoints)\nINFO     backend.core.app:app.py:1144 \u2705 Data ingestion routes included (/api/v1/ingestion/* endpoints)\nINFO     backend.core.app:app.py:1154 \u2705 Enterprise model registry routes included (/api/models/enterprise/* endpoints)\nINFO     backend.core.app:app.py:1199 \u2705 Alert engine routes included (/api/alert-engine/* endpoints)\nINFO     backend.core.app:app.py:1209 \u2705 PropFinder routes included (/api/propfinder/* endpoints)\nWARNING  backend.core.app:app.py:1221 \u26a0\ufe0f Could not import multiple_sportsbook_routes: cannot import name 'RateLimiter' from 'backend.middleware.rate_limit' (C:\\Users\\bcmad\\Downloads\\A1Betting7-13.2\\backend\\middleware\\rate_limit.py)\nINFO     backend.core.app:app.py:1495 \u2705 Sportsbook compatibility router mounted at /api/sportsbook\nINFO     backend.core.app:app.py:1527 \U0001f50d Bootstrap validation scheduled on startup\nINFO     backend.core.app:app.py:1535 \U0001f3e5 Health endpoints normalized: /api/health, /health, /api/v2/health -> identical envelope format\nINFO     backend.core.app:app.py:1536 \u2705 A1Betting canonical app created successfully
__________ TestMLBExtrasRoutes.test_get_comprehensive_props_success ___________
tests\backend\routes\test_mlb_extras.py:228: in test_get_comprehensive_props_success
    assert response.status_code == status.HTTP_200_OK
E   assert 404 == 200
E    +  where 404 = <Response [404 Not Found]>.status_code
E    +  and   200 = status.HTTP_200_OK
---------------------------- Captured stderr setup ----------------------------
2025-08-23 08:03:56,205 - backend.core.app - INFO - \U0001f680 Creating A1Betting canonical app...\n2025-08-23 08:03:56,205 - backend.core.app - INFO - \u2705 Request ID correlation middleware added\n2025-08-23 08:03:56,205 - backend.core.app - INFO - \u2705 Distributed trace correlation middleware added\n2025-08-23 08:03:56,205 - backend.core.app - INFO - \u2705 Structured logging middleware added\n2025-08-23 08:03:56,206 - backend.core.app - INFO - \u2705 Prometheus metrics middleware added\n2025-08-23 08:03:56,206 - backend.core.app - INFO - \u2705 Payload guard middleware added: max_size=262144 bytes, enforce_json=True, enabled=True\n2025-08-23 08:03:56,206 - backend.middleware.rate_limit - INFO - Rate limiting disabled\n2025-08-23 08:03:56,206 - backend.core.app - INFO - \u2705 Rate limiting middleware added: 100/min, burst=200, enabled=False\n2025-08-23 08:03:56,206 - backend.core.app - INFO - \u2705 Security headers middleware added: [HSTS, CSP(report-only), COOP, COEP], x_frame_options=DENY\n2025-08-23 08:03:56,206 - backend.core.app - INFO - \u2705 Legacy endpoint middleware added for usage telemetry and deprecation controls\n2025-08-23 08:03:56,206 - backend.exceptions.handlers - INFO - \u2705 PayloadRejectionError handler registered\n2025-08-23 08:03:56,206 - backend.exceptions.handlers - INFO - \u2705 All exception handlers registered with structured error taxonomy\n2025-08-23 08:03:56,206 - backend.core.app - INFO - \u2705 Centralized exception handlers registered\n2025-08-23 08:03:56,207 - backend.core.app - INFO - \u2705 PR11 Enhanced WebSocket client route included (/ws/client)\n2025-08-23 08:03:56,212 - backend.core.app - INFO - \u2705 Auth routes also exposed at root (/auth/*) for compatibility\n2025-08-23 08:03:56,212 - backend.core.app - INFO - \u2705 Auth and users routes included (auth with /api prefix)\n2025-08-23 08:03:56,213 - backend.core.app - INFO - \u2705 Diagnostics routes included (/api/v2/diagnostics/health, /api/v2/diagnostics/system)\n2025-08-23 08:03:56,214 - backend.core.app - INFO - \u2705 Meta cache routes included (/api/v2/meta/cache-stats, /api/v2/meta/cache-health)\n2025-08-23 08:03:56,214 - backend.core.app - INFO - \u2705 Legacy meta routes included (/api/v2/meta/legacy-usage, /api/v2/meta/migration-readiness)\n2025-08-23 08:03:56,217 - backend.core.app - ERROR - \u274c Failed to register CSP report routes: Invalid args for response field! Hint: check that <class 'logging.Logger'> is a valid Pydantic field type. If you are using a return type annotation that is not a valid Pydantic field (e.g. Union[Response, dict, None]) you can disable generating the response model from the type annotation with the path operation decorator parameter response_model=None. Read more: https://fastapi.tiangolo.com/tutorial/response-model/\n2025-08-23 08:03:56,217 - backend.core.app - INFO - \u2705 Trace test routes included (/api/trace/* endpoints)\n2025-08-23 08:03:56,219 - backend.core.app - INFO - \u2705 Model inference routes included (/api/v2/models/* endpoints)\n2025-08-23 08:03:56,220 - backend.core.app - INFO - \u2705 Observability events routes included (/api/v2/observability/* endpoints)\n2025-08-23 08:03:56,221 - backend.core.app - INFO - \u2705 Admin control routes included (/api/v2/models/shadow/* and /api/v2/models/admin/* endpoints)\n2025-08-23 08:03:56,225 - backend.core.app - INFO - \u2705 Enhanced WebSocket routes included (/ws/v2/* endpoints)\n2025-08-23 08:03:56,226 - backend.core.app - INFO - \u2705 WebSocket logging routes included (/api/websocket/* endpoints)\n2025-08-23 08:03:56,227 - backend.core.app - INFO - \u2705 Version routes included (/api/version/* endpoints)\n2025-08-23 08:03:56,227 - backend.core.app - INFO - \u2705 WebVitals pipeline routes included (/api/metrics/v1/* endpoints)\n2025-08-23 08:03:56,232 - backend.core.app - INFO - \u2705 Enhanced ML routes included (/api/enhanced-ml/* endpoints)\n2025-08-23 08:03:56,232 - backend.core.app - INFO - \u2705 Fallback enhanced-ml compatibility router mounted at /api/enhanced-ml\n2025-08-23 08:03:56,237 - backend.core.app - INFO - \u2705 Consolidated PrizePicks routes included (/api/v2/prizepicks/* endpoints)\n2025-08-23 08:03:56,240 - backend.core.app - INFO - \u2705 Consolidated ML routes included (/api/v2/ml/* endpoints)\n2025-08-23 08:03:56,242 - backend.core.app - ERROR - \u274c Failed to register consolidated Admin routes: parameter without a default follows parameter with a default (consolidated_admin.py, line 165)\n2025-08-23 08:03:56,246 - backend.core.app - INFO - \u2705 Odds & Line Movement routes included (/v1/odds/* endpoints)\n2025-08-23 08:03:56,247 - backend.core.app - INFO - \u2705 Advanced-Kelly compatibility router mounted at /api/advanced-kelly\n2025-08-23 08:03:56,249 - backend.core.app - ERROR - \u274c Failed to register Risk Management & Personalization routes: 'NoneType' object has no attribute 'alert_evaluation_interval_seconds'\n2025-08-23 08:03:56,251 - backend.core.app - INFO - \u2705 Dependencies Health routes included (/api/dependencies/* endpoints)\n2025-08-23 08:03:56,253 - backend.core.app - INFO - \u2705 Provider Resilience routes included (/api/provider-resilience/* endpoints)\n2025-08-23 08:03:56,254 - backend.core.app - INFO - \u2705 System capabilities routes included (/api/system/* endpoints)\n2025-08-23 08:03:56,255 - backend.core.app - INFO - \u2705 Real-time market streaming routes included (/streaming/* endpoints)\n2025-08-23 08:03:56,257 - backend.core.app - INFO - \u2705 Security HEAD endpoints included (/api/* HEAD endpoints)\n2025-08-23 08:03:56,258 - backend.core.app - INFO - \u2705 ML Model Registry routes included (/api/models/* endpoints)\n2025-08-23 08:03:56,259 - backend.core.app - INFO - \u2705 Data ingestion routes included (/api/v1/ingestion/* endpoints)\n2025-08-23 08:03:56,263 - backend.core.app - INFO - \u2705 Enterprise model registry routes included (/api/models/enterprise/* endpoints)\n2025-08-23 08:03:56,266 - backend.core.app - INFO - \u2705 Alert engine routes included (/api/alert-engine/* endpoints)\n2025-08-23 08:03:56,270 - backend.core.app - INFO - \u2705 PropFinder routes included (/api/propfinder/* endpoints)\n2025-08-23 08:03:56,272 - backend.core.app - WARNING - \u26a0\ufe0f Could not import multiple_sportsbook_routes: cannot import name 'RateLimiter' from 'backend.middleware.rate_limit' (C:\\Users\\bcmad\\Downloads\\A1Betting7-13.2\\backend\\middleware\\rate_limit.py)\n2025-08-23 08:03:56,274 - backend.core.app - INFO - \u2705 Sportsbook compatibility router mounted at /api/sportsbook\n2025-08-23 08:03:56,274 - backend.core.app - INFO - \U0001f50d Bootstrap validation scheduled on startup\n2025-08-23 08:03:56,274 - backend.core.app - INFO - \U0001f3e5 Health endpoints normalized: /api/health, /health, /api/v2/health -> identical envelope format\n2025-08-23 08:03:56,274 - backend.core.app - INFO - \u2705 A1Betting canonical app created successfully
----------------------------- Captured log setup ------------------------------
INFO     backend.core.app:app.py:65 \U0001f680 Creating A1Betting canonical app...\nINFO     backend.core.app:app.py:104 \u2705 Request ID correlation middleware added\nINFO     backend.core.app:app.py:114 \u2705 Distributed trace correlation middleware added\nINFO     backend.core.app:app.py:126 \u2705 Structured logging middleware added\nINFO     backend.core.app:app.py:146 \u2705 Prometheus metrics middleware added\nINFO     backend.core.app:app.py:167 \u2705 Payload guard middleware added: max_size=262144 bytes, enforce_json=True, enabled=True\nINFO     backend.middleware.rate_limit:rate_limit.py:90 Rate limiting disabled\nINFO     backend.core.app:app.py:202 \u2705 Rate limiting middleware added: 100/min, burst=200, enabled=False\nINFO     backend.core.app:app.py:244 \u2705 Security headers middleware added: [HSTS, CSP(report-only), COOP, COEP], x_frame_options=DENY\nINFO     backend.core.app:app.py:259 \u2705 Legacy endpoint middleware added for usage telemetry and deprecation controls\nINFO     backend.exceptions.handlers:handlers.py:235 \u2705 PayloadRejectionError handler registered\nINFO     backend.exceptions.handlers:handlers.py:250 \u2705 All exception handlers registered with structured error taxonomy\nINFO     backend.core.app:app.py:269 \u2705 Centralized exception handlers registered\nINFO     backend.core.app:app.py:332 \u2705 PR11 Enhanced WebSocket client route included (/ws/client)\nINFO     backend.core.app:app.py:702 \u2705 Auth routes also exposed at root (/auth/*) for compatibility\nINFO     backend.core.app:app.py:706 \u2705 Auth and users routes included (auth with /api prefix)\nINFO     backend.core.app:app.py:714 \u2705 Diagnostics routes included (/api/v2/diagnostics/health, /api/v2/diagnostics/system)\nINFO     backend.core.app:app.py:763 \u2705 Meta cache routes included (/api/v2/meta/cache-stats, /api/v2/meta/cache-health)\nINFO     backend.core.app:app.py:773 \u2705 Legacy meta routes included (/api/v2/meta/legacy-usage, /api/v2/meta/migration-readiness)\nERROR    backend.core.app:app.py:788 \u274c Failed to register CSP report routes: Invalid args for response field! Hint: check that <class 'logging.Logger'> is a valid Pydantic field type. If you are using a return type annotation that is not a valid Pydantic field (e.g. Union[Response, dict, None]) you can disable generating the response model from the type annotation with the path operation decorator parameter response_model=None. Read more: https://fastapi.tiangolo.com/tutorial/response-model/\nINFO     backend.core.app:app.py:794 \u2705 Trace test routes included (/api/trace/* endpoints)\nINFO     backend.core.app:app.py:804 \u2705 Model inference routes included (/api/v2/models/* endpoints)\nINFO     backend.core.app:app.py:814 \u2705 Observability events routes included (/api/v2/observability/* endpoints)\nINFO     backend.core.app:app.py:824 \u2705 Admin control routes included (/api/v2/models/shadow/* and /api/v2/models/admin/* endpoints)\nINFO     backend.core.app:app.py:834 \u2705 Enhanced WebSocket routes included (/ws/v2/* endpoints)\nINFO     backend.core.app:app.py:844 \u2705 WebSocket logging routes included (/api/websocket/* endpoints)\nINFO     backend.core.app:app.py:854 \u2705 Version routes included (/api/version/* endpoints)\nINFO     backend.core.app:app.py:864 \u2705 WebVitals pipeline routes included (/api/metrics/v1/* endpoints)\nINFO     backend.core.app:app.py:874 \u2705 Enhanced ML routes included (/api/enhanced-ml/* endpoints)\nINFO     backend.core.app:app.py:986 \u2705 Fallback enhanced-ml compatibility router mounted at /api/enhanced-ml\nINFO     backend.core.app:app.py:995 \u2705 Consolidated PrizePicks routes included (/api/v2/prizepicks/* endpoints)\nINFO     backend.core.app:app.py:1005 \u2705 Consolidated ML routes included (/api/v2/ml/* endpoints)\nERROR    backend.core.app:app.py:1019 \u274c Failed to register consolidated Admin routes: parameter without a default follows parameter with a default (consolidated_admin.py, line 165)\nINFO     backend.core.app:app.py:1025 \u2705 Odds & Line Movement routes included (/v1/odds/* endpoints)\nINFO     backend.core.app:app.py:1066 \u2705 Advanced-Kelly compatibility router mounted at /api/advanced-kelly\nERROR    backend.core.app:app.py:1078 \u274c Failed to register Risk Management & Personalization routes: 'NoneType' object has no attribute 'alert_evaluation_interval_seconds'\nINFO     backend.core.app:app.py:1084 \u2705 Dependencies Health routes included (/api/dependencies/* endpoints)\nINFO     backend.core.app:app.py:1094 \u2705 Provider Resilience routes included (/api/provider-resilience/* endpoints)\nINFO     backend.core.app:app.py:1104 \u2705 System capabilities routes included (/api/system/* endpoints)\nINFO     backend.core.app:app.py:1114 \u2705 Real-time market streaming routes included (/streaming/* endpoints)\nINFO     backend.core.app:app.py:1124 \u2705 Security HEAD endpoints included (/api/* HEAD endpoints)\nINFO     backend.core.app:app.py:1134 \u2705 ML Model Registry routes included (/api/models/* endpoints)\nINFO     backend.core.app:app.py:1144 \u2705 Data ingestion routes included (/api/v1/ingestion/* endpoints)\nINFO     backend.core.app:app.py:1154 \u2705 Enterprise model registry routes included (/api/models/enterprise/* endpoints)\nINFO     backend.core.app:app.py:1199 \u2705 Alert engine routes included (/api/alert-engine/* endpoints)\nINFO     backend.core.app:app.py:1209 \u2705 PropFinder routes included (/api/propfinder/* endpoints)\nWARNING  backend.core.app:app.py:1221 \u26a0\ufe0f Could not import multiple_sportsbook_routes: cannot import name 'RateLimiter' from 'backend.middleware.rate_limit' (C:\\Users\\bcmad\\Downloads\\A1Betting7-13.2\\backend\\middleware\\rate_limit.py)\nINFO     backend.core.app:app.py:1495 \u2705 Sportsbook compatibility router mounted at /api/sportsbook\nINFO     backend.core.app:app.py:1527 \U0001f50d Bootstrap validation scheduled on startup\nINFO     backend.core.app:app.py:1535 \U0001f3e5 Health endpoints normalized: /api/health, /health, /api/v2/health -> identical envelope format\nINFO     backend.core.app:app.py:1536 \u2705 A1Betting canonical app created successfully
---------------------------- Captured stderr call -----------------------------
2025-08-23 08:03:56,278 - root - WARNING - ONNX not available. Model export functionality disabled.\n2025-08-23 08:03:56,279 - root - WARNING - TensorRT not available. GPU acceleration limited.\n2025-08-23 08:03:56,279 - backend.services.performance_optimization - INFO - Performance optimization service initialized\n2025-08-23 08:03:56,279 - backend.services.performance_optimization - INFO - Device: cpu\n2025-08-23 08:03:56,279 - backend.services.performance_optimization - INFO - ONNX available: False\n2025-08-23 08:03:56,279 - backend.services.performance_optimization - INFO - TensorRT available: False\n2025-08-23 08:03:56,363 - data_validation - INFO - \U0001f50d DataValidationOrchestrator initialized with enterprise patterns\n2025-08-23 08:03:56,387 - optimized_validation - INFO - Prometheus metrics server started on port 8001\n2025-08-23 08:03:56,389 - enhanced_validation_integration - INFO - Enhanced Data Validation Integration Service initialized\n2025-08-23 08:03:56,389 - propollama - INFO - \u2705 Enhanced data validation integration available\n--- Logging error ---\nTraceback (most recent call last):\n  File "C:\\Python313\\Lib\\logging\\__init__.py", line 1154, in emit\n    stream.write(msg + self.terminator)\n    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^\n  File "C:\\Python313\\Lib\\encodings\\cp1252.py", line 19, in encode\n    return codecs.charmap_encode(input,self.errors,encoding_table)[0]\n           ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nUnicodeEncodeError: 'charmap' codec can't encode character '\\U0001f4e1' in position 119: character maps to <undefined>\nCall stack:\n  File "<frozen runpy>", line 198, in _run_module_as_main\n  File "<frozen runpy>", line 88, in _run_code\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\Scripts\\pytest.exe\\__main__.py", line 7, in <module>\n    sys.exit(console_main())\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\_pytest\\config\\__init__.py", line 201, in console_main\n    code = main()\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\_pytest\\config\\__init__.py", line 175, in main\n    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\pluggy\\_hooks.py", line 512, in __call__\n    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\pluggy\\_manager.py", line 120, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\pluggy\\_callers.py", line 121, in _multicall\n    res = hook_impl.function(*args)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\_pytest\\main.py", line 336, in pytest_cmdline_main\n    return wrap_session(config, _main)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\_pytest\\main.py", line 289, in wrap_session\n    session.exitstatus = doit(config, session) or 0\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\_pytest\\main.py", line 343, in _main\n    config.hook.pytest_runtestloop(session=session)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\pluggy\\_hooks.py", line 512, in __call__\n    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\pluggy\\_manager.py", line 120, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\pluggy\\_callers.py", line 121, in _multicall\n    res = hook_impl.function(*args)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\_pytest\\main.py", line 367, in pytest_runtestloop\n    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\pluggy\\_hooks.py", line 512, in __call__\n    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\pluggy\\_manager.py", line 120, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\pluggy\\_callers.py", line 121, in _multicall\n    res = hook_impl.function(*args)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\_pytest\\runner.py", line 117, in pytest_runtest_protocol\n    runtestprotocol(item, nextitem=nextitem)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\_pytest\\runner.py", line 136, in runtestprotocol\n    reports.append(call_and_report(item, "call", log))\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\_pytest\\runner.py", line 245, in call_and_report\n    call = CallInfo.from_call(\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\_pytest\\runner.py", line 344, in from_call\n    result: TResult | None = func()\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\_pytest\\runner.py", line 246, in <lambda>\n    lambda: runtest_hook(item=item, **kwds), when=when, reraise=reraise\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\pluggy\\_hooks.py", line 512, in __call__\n    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\pluggy\\_manager.py", line 120, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\pluggy\\_callers.py", line 121, in _multicall\n    res = hook_impl.function(*args)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\_pytest\\runner.py", line 178, in pytest_runtest_call\n    item.runtest()\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\pytest_asyncio\\plugin.py", line 426, in runtest\n    super().runtest()\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\_pytest\\python.py", line 1671, in runtest\n    self.ihook.pytest_pyfunc_call(pyfuncitem=self)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\pluggy\\_hooks.py", line 512, in __call__\n    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\pluggy\\_manager.py", line 120, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\pluggy\\_callers.py", line 121, in _multicall\n    res = hook_impl.function(*args)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\_pytest\\python.py", line 157, in pytest_pyfunc_call\n    result = testfunction(**testargs)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\pytest_asyncio\\plugin.py", line 642, in inner\n    _loop.run_until_complete(task)\n  File "C:\\Python313\\Lib\\asyncio\\base_events.py", line 712, in run_until_complete\n    self.run_forever()\n  File "C:\\Python313\\Lib\\asyncio\\base_events.py", line 683, in run_forever\n    self._run_once()\n  File "C:\\Python313\\Lib\\asyncio\\base_events.py", line 2042, in _run_once\n    handle._run()\n  File "C:\\Python313\\Lib\\asyncio\\events.py", line 89, in _run\n    self._context.run(self._callback, *self._args)\n  File "C:\\Users\\bcmad\\Downloads\\A1Betting7-13.2\\tests\\backend\\routes\\test_mlb_extras.py", line 221, in test_get_comprehensive_props_success\n    with patch('backend.services.comprehensive_prop_generator.ComprehensivePropGenerator') as MockGenerator:\n  File "C:\\Python313\\Lib\\unittest\\mock.py", line 1481, in __enter__\n    self.target = self.getter()\n  File "C:\\Python313\\Lib\\pkgutil.py", line 518, in resolve_name\n    mod = importlib.import_module(s)\n  File "C:\\Python313\\Lib\\importlib\\__init__.py", line 88, in import_module\n    return _bootstrap._gcd_import(name[level:], package, level)\n  File "<frozen importlib._bootstrap>", line 1387, in _gcd_import\n  File "<frozen importlib._bootstrap>", line 1360, in _find_and_load\n  File "<frozen importlib._bootstrap>", line 1331, in _find_and_load_unlocked\n  File "<frozen importlib._bootstrap>", line 935, in _load_unlocked\n  File "<frozen importlib._bootstrap_external>", line 1026, in exec_module\n  File "<frozen importlib._bootstrap>", line 488, in _call_with_frames_removed\n  File "C:\\Users\\bcmad\\Downloads\\A1Betting7-13.2\\backend\\services\\comprehensive_prop_generator.py", line 2980, in <module>\n    comprehensive_prop_generator = ComprehensivePropGenerator()\n  File "C:\\Users\\bcmad\\Downloads\\A1Betting7-13.2\\backend\\services\\comprehensive_prop_generator.py", line 1107, in __init__\n    self.stats_analyzer = PlayerStatsAnalyzer()\n  File "C:\\Users\\bcmad\\Downloads\\A1Betting7-13.2\\backend\\services\\comprehensive_prop_generator.py", line 501, in __init__\n    self.mlb_client = MLBProviderClient()\n  File "C:\\Users\\bcmad\\Downloads\\A1Betting7-13.2\\backend\\services\\mlb_provider_client.py", line 66, in __init__\n    self.data_pipeline.register_data_source(\n  File "C:\\Users\\bcmad\\Downloads\\A1Betting7-13.2\\backend\\services\\enhanced_data_pipeline.py", line 284, in register_data_source\n    logger.info(f"\U0001f4e1 Registered data source: {source_name}")\n  File "C:\\Users\\bcmad\\Downloads\\A1Betting7-13.2\\backend\\utils\\enhanced_logging.py", line 233, in info\n    self._log_with_context(logging.INFO, message, *args, **kwargs)\n  File "C:\\Users\\bcmad\\Downloads\\A1Betting7-13.2\\backend\\utils\\enhanced_logging.py", line 227, in _log_with_context\n    self.logger.log(level, message, *args, **kwargs)\nMessage: '\U0001f4e1 Registered data source: theodds_api'\nArguments: ()\n{"timestamp": "2025-08-23T08:03:56.390487", "level": "INFO", "logger": "a1betting.enhanced_data_pipeline", "message": "\U0001f4e1 Registered data source: theodds_api", "module": "enhanced_logging", "function": "_log_with_context", "line": 227, "taskName": "Task-637"}\n--- Logging error ---\nTraceback (most recent call last):\n  File "C:\\Python313\\Lib\\logging\\__init__.py", line 1154, in emit\n    stream.write(msg + self.terminator)\n    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^\n  File "C:\\Python313\\Lib\\encodings\\cp1252.py", line 19, in encode\n    return codecs.charmap_encode(input,self.errors,encoding_table)[0]\n           ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nUnicodeEncodeError: 'charmap' codec can't encode character '\\U0001f4e1' in position 119: character maps to <undefined>\nCall stack:\n  File "<frozen runpy>", line 198, in _run_module_as_main\n  File "<frozen runpy>", line 88, in _run_code\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\Scripts\\pytest.exe\\__main__.py", line 7, in <module>\n    sys.exit(console_main())\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\_pytest\\config\\__init__.py", line 201, in console_main\n    code = main()\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\_pytest\\config\\__init__.py", line 175, in main\n    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\pluggy\\_hooks.py", line 512, in __call__\n    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\pluggy\\_manager.py", line 120, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\pluggy\\_callers.py", line 121, in _multicall\n    res = hook_impl.function(*args)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\_pytest\\main.py", line 336, in pytest_cmdline_main\n    return wrap_session(config, _main)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\_pytest\\main.py", line 289, in wrap_session\n    session.exitstatus = doit(config, session) or 0\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\_pytest\\main.py", line 343, in _main\n    config.hook.pytest_runtestloop(session=session)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\pluggy\\_hooks.py", line 512, in __call__\n    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\pluggy\\_manager.py", line 120, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\pluggy\\_callers.py", line 121, in _multicall\n    res = hook_impl.function(*args)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\_pytest\\main.py", line 367, in pytest_runtestloop\n    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\pluggy\\_hooks.py", line 512, in __call__\n    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\pluggy\\_manager.py", line 120, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\pluggy\\_callers.py", line 121, in _multicall\n    res = hook_impl.function(*args)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\_pytest\\runner.py", line 117, in pytest_runtest_protocol\n    runtestprotocol(item, nextitem=nextitem)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\_pytest\\runner.py", line 136, in runtestprotocol\n    reports.append(call_and_report(item, "call", log))\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\_pytest\\runner.py", line 245, in call_and_report\n    call = CallInfo.from_call(\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\_pytest\\runner.py", line 344, in from_call\n    result: TResult | None = func()\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\_pytest\\runner.py", line 246, in <lambda>\n    lambda: runtest_hook(item=item, **kwds), when=when, reraise=reraise\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\pluggy\\_hooks.py", line 512, in __call__\n    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\pluggy\\_manager.py", line 120, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\pluggy\\_callers.py", line 121, in _multicall\n    res = hook_impl.function(*args)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\_pytest\\runner.py", line 178, in pytest_runtest_call\n    item.runtest()\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\pytest_asyncio\\plugin.py", line 426, in runtest\n    super().runtest()\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\_pytest\\python.py", line 1671, in runtest\n    self.ihook.pytest_pyfunc_call(pyfuncitem=self)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\pluggy\\_hooks.py", line 512, in __call__\n    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\pluggy\\_manager.py", line 120, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\pluggy\\_callers.py", line 121, in _multicall\n    res = hook_impl.function(*args)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\_pytest\\python.py", line 157, in pytest_pyfunc_call\n    result = testfunction(**testargs)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\pytest_asyncio\\plugin.py", line 642, in inner\n    _loop.run_until_complete(task)\n  File "C:\\Python313\\Lib\\asyncio\\base_events.py", line 712, in run_until_complete\n    self.run_forever()\n  File "C:\\Python313\\Lib\\asyncio\\base_events.py", line 683, in run_forever\n    self._run_once()\n  File "C:\\Python313\\Lib\\asyncio\\base_events.py", line 2042, in _run_once\n    handle._run()\n  File "C:\\Python313\\Lib\\asyncio\\events.py", line 89, in _run\n    self._context.run(self._callback, *self._args)\n  File "C:\\Users\\bcmad\\Downloads\\A1Betting7-13.2\\tests\\backend\\routes\\test_mlb_extras.py", line 221, in test_get_comprehensive_props_success\n    with patch('backend.services.comprehensive_prop_generator.ComprehensivePropGenerator') as MockGenerator:\n  File "C:\\Python313\\Lib\\unittest\\mock.py", line 1481, in __enter__\n    self.target = self.getter()\n  File "C:\\Python313\\Lib\\pkgutil.py", line 518, in resolve_name\n    mod = importlib.import_module(s)\n  File "C:\\Python313\\Lib\\importlib\\__init__.py", line 88, in import_module\n    return _bootstrap._gcd_import(name[level:], package, level)\n  File "<frozen importlib._bootstrap>", line 1387, in _gcd_import\n  File "<frozen importlib._bootstrap>", line 1360, in _find_and_load\n  File "<frozen importlib._bootstrap>", line 1331, in _find_and_load_unlocked\n  File "<frozen importlib._bootstrap>", line 935, in _load_unlocked\n  File "<frozen importlib._bootstrap_external>", line 1026, in exec_module\n  File "<frozen importlib._bootstrap>", line 488, in _call_with_frames_removed\n  File "C:\\Users\\bcmad\\Downloads\\A1Betting7-13.2\\backend\\services\\comprehensive_prop_generator.py", line 2980, in <module>\n    comprehensive_prop_generator = ComprehensivePropGenerator()\n  File "C:\\Users\\bcmad\\Downloads\\A1Betting7-13.2\\backend\\services\\comprehensive_prop_generator.py", line 1107, in __init__\n    self.stats_analyzer = PlayerStatsAnalyzer()\n  File "C:\\Users\\bcmad\\Downloads\\A1Betting7-13.2\\backend\\services\\comprehensive_prop_generator.py", line 501, in __init__\n    self.mlb_client = MLBProviderClient()\n  File "C:\\Users\\bcmad\\Downloads\\A1Betting7-13.2\\backend\\services\\mlb_provider_client.py", line 70, in __init__\n    self.data_pipeline.register_data_source(\n  File "C:\\Users\\bcmad\\Downloads\\A1Betting7-13.2\\backend\\services\\enhanced_data_pipeline.py", line 284, in register_data_source\n    logger.info(f"\U0001f4e1 Registered data source: {source_name}")\n  File "C:\\Users\\bcmad\\Downloads\\A1Betting7-13.2\\backend\\utils\\enhanced_logging.py", line 233, in info\n    self._log_with_context(logging.INFO, message, *args, **kwargs)\n  File "C:\\Users\\bcmad\\Downloads\\A1Betting7-13.2\\backend\\utils\\enhanced_logging.py", line 227, in _log_with_context\n    self.logger.log(level, message, *args, **kwargs)\nMessage: '\U0001f4e1 Registered data source: mlb_stats_api'\nArguments: ()\n{"timestamp": "2025-08-23T08:03:56.394790", "level": "INFO", "logger": "a1betting.enhanced_data_pipeline", "message": "\U0001f4e1 Registered data source: mlb_stats_api", "module": "enhanced_logging", "function": "_log_with_context", "line": 227, "taskName": "Task-637"}\n2025-08-23 08:03:56,396 - backend.services.automated_feature_engineering - INFO - Advanced Feature Engineering initialized\n2025-08-23 08:03:56,396 - backend.services.automated_feature_engineering - INFO - Advanced Feature Engineering initialized\n--- Logging error ---\nTraceback (most recent call last):\n  File "C:\\Python313\\Lib\\logging\\__init__.py", line 1154, in emit\n    stream.write(msg + self.terminator)\n    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^\n  File "C:\\Python313\\Lib\\encodings\\cp1252.py", line 19, in encode\n    return codecs.charmap_encode(input,self.errors,encoding_table)[0]\n           ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nUnicodeEncodeError: 'charmap' codec can't encode character '\\U0001f4e1' in position 119: character maps to <undefined>\nCall stack:\n  File "<frozen runpy>", line 198, in _run_module_as_main\n  File "<frozen runpy>", line 88, in _run_code\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\Scripts\\pytest.exe\\__main__.py", line 7, in <module>\n    sys.exit(console_main())\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\_pytest\\config\\__init__.py", line 201, in console_main\n    code = main()\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\_pytest\\config\\__init__.py", line 175, in main\n    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\pluggy\\_hooks.py", line 512, in __call__\n    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\pluggy\\_manager.py", line 120, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\pluggy\\_callers.py", line 121, in _multicall\n    res = hook_impl.function(*args)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\_pytest\\main.py", line 336, in pytest_cmdline_main\n    return wrap_session(config, _main)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\_pytest\\main.py", line 289, in wrap_session\n    session.exitstatus = doit(config, session) or 0\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\_pytest\\main.py", line 343, in _main\n    config.hook.pytest_runtestloop(session=session)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\pluggy\\_hooks.py", line 512, in __call__\n    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\pluggy\\_manager.py", line 120, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\pluggy\\_callers.py", line 121, in _multicall\n    res = hook_impl.function(*args)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\_pytest\\main.py", line 367, in pytest_runtestloop\n    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\pluggy\\_hooks.py", line 512, in __call__\n    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\pluggy\\_manager.py", line 120, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\pluggy\\_callers.py", line 121, in _multicall\n    res = hook_impl.function(*args)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\_pytest\\runner.py", line 117, in pytest_runtest_protocol\n    runtestprotocol(item, nextitem=nextitem)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\_pytest\\runner.py", line 136, in runtestprotocol\n    reports.append(call_and_report(item, "call", log))\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\_pytest\\runner.py", line 245, in call_and_report\n    call = CallInfo.from_call(\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\_pytest\\runner.py", line 344, in from_call\n    result: TResult | None = func()\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\_pytest\\runner.py", line 246, in <lambda>\n    lambda: runtest_hook(item=item, **kwds), when=when, reraise=reraise\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\pluggy\\_hooks.py", line 512, in __call__\n    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\pluggy\\_manager.py", line 120, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\pluggy\\_callers.py", line 121, in _multicall\n    res = hook_impl.function(*args)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\_pytest\\runner.py", line 178, in pytest_runtest_call\n    item.runtest()\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\pytest_asyncio\\plugin.py", line 426, in runtest\n    super().runtest()\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\_pytest\\python.py", line 1671, in runtest\n    self.ihook.pytest_pyfunc_call(pyfuncitem=self)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\pluggy\\_hooks.py", line 512, in __call__\n    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\pluggy\\_manager.py", line 120, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\pluggy\\_callers.py", line 121, in _multicall\n    res = hook_impl.function(*args)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\_pytest\\python.py", line 157, in pytest_pyfunc_call\n    result = testfunction(**testargs)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\pytest_asyncio\\plugin.py", line 642, in inner\n    _loop.run_until_complete(task)\n  File "C:\\Python313\\Lib\\asyncio\\base_events.py", line 712, in run_until_complete\n    self.run_forever()\n  File "C:\\Python313\\Lib\\asyncio\\base_events.py", line 683, in run_forever\n    self._run_once()\n  File "C:\\Python313\\Lib\\asyncio\\base_events.py", line 2042, in _run_once\n    handle._run()\n  File "C:\\Python313\\Lib\\asyncio\\events.py", line 89, in _run\n    self._context.run(self._callback, *self._args)\n  File "C:\\Users\\bcmad\\Downloads\\A1Betting7-13.2\\tests\\backend\\routes\\test_mlb_extras.py", line 221, in test_get_comprehensive_props_success\n    with patch('backend.services.comprehensive_prop_generator.ComprehensivePropGenerator') as MockGenerator:\n  File "C:\\Python313\\Lib\\unittest\\mock.py", line 1481, in __enter__\n    self.target = self.getter()\n  File "C:\\Python313\\Lib\\pkgutil.py", line 518, in resolve_name\n    mod = importlib.import_module(s)\n  File "C:\\Python313\\Lib\\importlib\\__init__.py", line 88, in import_module\n    return _bootstrap._gcd_import(name[level:], package, level)\n  File "<frozen importlib._bootstrap>", line 1387, in _gcd_import\n  File "<frozen importlib._bootstrap>", line 1360, in _find_and_load\n  File "<frozen importlib._bootstrap>", line 1331, in _find_and_load_unlocked\n  File "<frozen importlib._bootstrap>", line 935, in _load_unlocked\n  File "<frozen importlib._bootstrap_external>", line 1026, in exec_module\n  File "<frozen importlib._bootstrap>", line 488, in _call_with_frames_removed\n  File "C:\\Users\\bcmad\\Downloads\\A1Betting7-13.2\\backend\\services\\comprehensive_prop_generator.py", line 2980, in <module>\n    comprehensive_prop_generator = ComprehensivePropGenerator()\n  File "C:\\Users\\bcmad\\Downloads\\A1Betting7-13.2\\backend\\services\\comprehensive_prop_generator.py", line 1109, in __init__\n    self.mlb_client = MLBProviderClient()\n  File "C:\\Users\\bcmad\\Downloads\\A1Betting7-13.2\\backend\\services\\mlb_provider_client.py", line 66, in __init__\n    self.data_pipeline.register_data_source(\n  File "C:\\Users\\bcmad\\Downloads\\A1Betting7-13.2\\backend\\services\\enhanced_data_pipeline.py", line 284, in register_data_source\n    logger.info(f"\U0001f4e1 Registered data source: {source_name}")\n  File "C:\\Users\\bcmad\\Downloads\\A1Betting7-13.2\\backend\\utils\\enhanced_logging.py", line 233, in info\n    self._log_with_context(logging.INFO, message, *args, **kwargs)\n  File "C:\\Users\\bcmad\\Downloads\\A1Betting7-13.2\\backend\\utils\\enhanced_logging.py", line 227, in _log_with_context\n    self.logger.log(level, message, *args, **kwargs)\nMessage: '\U0001f4e1 Registered data source: theodds_api'\nArguments: ()\n{"timestamp": "2025-08-23T08:03:56.396878", "level": "INFO", "logger": "a1betting.enhanced_data_pipeline", "message": "\U0001f4e1 Registered data source: theodds_api", "module": "enhanced_logging", "function": "_log_with_context", "line": 227, "taskName": "Task-637"}\n--- Logging error ---\nTraceback (most recent call last):\n  File "C:\\Python313\\Lib\\logging\\__init__.py", line 1154, in emit\n    stream.write(msg + self.terminator)\n    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^\n  File "C:\\Python313\\Lib\\encodings\\cp1252.py", line 19, in encode\n    return codecs.charmap_encode(input,self.errors,encoding_table)[0]\n           ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nUnicodeEncodeError: 'charmap' codec can't encode character '\\U0001f4e1' in position 119: character maps to <undefined>\nCall stack:\n  File "<frozen runpy>", line 198, in _run_module_as_main\n  File "<frozen runpy>", line 88, in _run_code\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\Scripts\\pytest.exe\\__main__.py", line 7, in <module>\n    sys.exit(console_main())\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\_pytest\\config\\__init__.py", line 201, in console_main\n    code = main()\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\_pytest\\config\\__init__.py", line 175, in main\n    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\pluggy\\_hooks.py", line 512, in __call__\n    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\pluggy\\_manager.py", line 120, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\pluggy\\_callers.py", line 121, in _multicall\n    res = hook_impl.function(*args)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\_pytest\\main.py", line 336, in pytest_cmdline_main\n    return wrap_session(config, _main)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\_pytest\\main.py", line 289, in wrap_session\n    session.exitstatus = doit(config, session) or 0\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\_pytest\\main.py", line 343, in _main\n    config.hook.pytest_runtestloop(session=session)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\pluggy\\_hooks.py", line 512, in __call__\n    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\pluggy\\_manager.py", line 120, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\pluggy\\_callers.py", line 121, in _multicall\n    res = hook_impl.function(*args)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\_pytest\\main.py", line 367, in pytest_runtestloop\n    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\pluggy\\_hooks.py", line 512, in __call__\n    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\pluggy\\_manager.py", line 120, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\pluggy\\_callers.py", line 121, in _multicall\n    res = hook_impl.function(*args)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\_pytest\\runner.py", line 117, in pytest_runtest_protocol\n    runtestprotocol(item, nextitem=nextitem)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\_pytest\\runner.py", line 136, in runtestprotocol\n    reports.append(call_and_report(item, "call", log))\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\_pytest\\runner.py", line 245, in call_and_report\n    call = CallInfo.from_call(\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\_pytest\\runner.py", line 344, in from_call\n    result: TResult | None = func()\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\_pytest\\runner.py", line 246, in <lambda>\n    lambda: runtest_hook(item=item, **kwds), when=when, reraise=reraise\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\pluggy\\_hooks.py", line 512, in __call__\n    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\pluggy\\_manager.py", line 120, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\pluggy\\_callers.py", line 121, in _multicall\n    res = hook_impl.function(*args)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\_pytest\\runner.py", line 178, in pytest_runtest_call\n    item.runtest()\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\pytest_asyncio\\plugin.py", line 426, in runtest\n    super().runtest()\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\_pytest\\python.py", line 1671, in runtest\n    self.ihook.pytest_pyfunc_call(pyfuncitem=self)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\pluggy\\_hooks.py", line 512, in __call__\n    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\pluggy\\_manager.py", line 120, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\pluggy\\_callers.py", line 121, in _multicall\n    res = hook_impl.function(*args)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\_pytest\\python.py", line 157, in pytest_pyfunc_call\n    result = testfunction(**testargs)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\pytest_asyncio\\plugin.py", line 642, in inner\n    _loop.run_until_complete(task)\n  File "C:\\Python313\\Lib\\asyncio\\base_events.py", line 712, in run_until_complete\n    self.run_forever()\n  File "C:\\Python313\\Lib\\asyncio\\base_events.py", line 683, in run_forever\n    self._run_once()\n  File "C:\\Python313\\Lib\\asyncio\\base_events.py", line 2042, in _run_once\n    handle._run()\n  File "C:\\Python313\\Lib\\asyncio\\events.py", line 89, in _run\n    self._context.run(self._callback, *self._args)\n  File "C:\\Users\\bcmad\\Downloads\\A1Betting7-13.2\\tests\\backend\\routes\\test_mlb_extras.py", line 221, in test_get_comprehensive_props_success\n    with patch('backend.services.comprehensive_prop_generator.ComprehensivePropGenerator') as MockGenerator:\n  File "C:\\Python313\\Lib\\unittest\\mock.py", line 1481, in __enter__\n    self.target = self.getter()\n  File "C:\\Python313\\Lib\\pkgutil.py", line 518, in resolve_name\n    mod = importlib.import_module(s)\n  File "C:\\Python313\\Lib\\importlib\\__init__.py", line 88, in import_module\n    return _bootstrap._gcd_import(name[level:], package, level)\n  File "<frozen importlib._bootstrap>", line 1387, in _gcd_import\n  File "<frozen importlib._bootstrap>", line 1360, in _find_and_load\n  File "<frozen importlib._bootstrap>", line 1331, in _find_and_load_unlocked\n  File "<frozen importlib._bootstrap>", line 935, in _load_unlocked\n  File "<frozen importlib._bootstrap_external>", line 1026, in exec_module\n  File "<frozen importlib._bootstrap>", line 488, in _call_with_frames_removed\n  File "C:\\Users\\bcmad\\Downloads\\A1Betting7-13.2\\backend\\services\\comprehensive_prop_generator.py", line 2980, in <module>\n    comprehensive_prop_generator = ComprehensivePropGenerator()\n  File "C:\\Users\\bcmad\\Downloads\\A1Betting7-13.2\\backend\\services\\comprehensive_prop_generator.py", line 1109, in __init__\n    self.mlb_client = MLBProviderClient()\n  File "C:\\Users\\bcmad\\Downloads\\A1Betting7-13.2\\backend\\services\\mlb_provider_client.py", line 70, in __init__\n    self.data_pipeline.register_data_source(\n  File "C:\\Users\\bcmad\\Downloads\\A1Betting7-13.2\\backend\\services\\enhanced_data_pipeline.py", line 284, in register_data_source\n    logger.info(f"\U0001f4e1 Registered data source: {source_name}")\n  File "C:\\Users\\bcmad\\Downloads\\A1Betting7-13.2\\backend\\utils\\enhanced_logging.py", line 233, in info\n    self._log_with_context(logging.INFO, message, *args, **kwargs)\n  File "C:\\Users\\bcmad\\Downloads\\A1Betting7-13.2\\backend\\utils\\enhanced_logging.py", line 227, in _log_with_context\n    self.logger.log(level, message, *args, **kwargs)\nMessage: '\U0001f4e1 Registered data source: mlb_stats_api'\nArguments: ()\n{"timestamp": "2025-08-23T08:03:56.398173", "level": "INFO", "logger": "a1betting.enhanced_data_pipeline", "message": "\U0001f4e1 Registered data source: mlb_stats_api", "module": "enhanced_logging", "function": "_log_with_context", "line": 227, "taskName": "Task-637"}\n2025-08-23 08:03:56,399 - propollama - INFO - \u2705 Enhanced data validation integration enabled\n2025-08-23 08:03:56,399 - propollama - INFO - \U0001f680 Enterprise ComprehensivePropGenerator initialized with modern async patterns\n2025-08-23 08:03:56,400 - backend.middleware.rate_limit - INFO - Rate limiting disabled\n2025-08-23 08:03:56,400 - backend.middleware.security_headers - INFO - \u2705 Security headers middleware enabled: CSP=report-only, HSTS=True, strict_mode=False\n2025-08-23 08:03:56,400 - backend.middleware.legacy_middleware - INFO - Registered known legacy endpoints with forwarding paths\n2025-08-23 08:03:56,400 - backend.middleware.legacy_middleware - INFO - Legacy middleware initialized\n{"timestamp": "2025-08-23T13:03:56.400889", "level": "INFO", "logger": "a1betting", "message": "Request started", "module": "structured_logging_middleware", "function": "log_request_start", "line": 109, "request_id": "ae73be9c-e937-4968-923a-f178146d23c9", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro", "event_type": "request_start", "method": "GET", "url": "http://testserver/mlb/comprehensive-props/662253?optimize_performance=true", "path": "/mlb/comprehensive-props/662253", "query_params": {"optimize_performance": "true"}, "client_ip": "127.0.0.1", "user_agent": "python-httpx/0.28.1", "content_type": null}\n2025-08-23 08:03:56,401 - backend.middleware.request_id_middleware - INFO - Request started: GET /mlb/comprehensive-props/662253\n2025-08-23 08:03:56,401 - backend.errors.catalog - ERROR - API Error: E4040_NOT_FOUND\n2025-08-23 08:03:56,401 - backend.middleware.request_id_middleware - INFO - Request completed: GET /mlb/comprehensive-props/662253 - 404\n2025-08-23 08:03:56,401 - backend.middleware.distributed_trace_middleware - INFO - Trace completed: e7c82752-3e6b-4b96-a29a-4e9b874acd9d\n{"timestamp": "2025-08-23T13:03:56.401921", "level": "INFO", "logger": "a1betting", "message": "Request completed", "module": "structured_logging_middleware", "function": "log_request_success", "line": 124, "request_id": "ae73be9c-e937-4968-923a-f178146d23c9", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro", "event_type": "request_success", "method": "GET", "url": "http://testserver/mlb/comprehensive-props/662253?optimize_performance=true", "path": "/mlb/comprehensive-props/662253", "status_code": 404, "duration_ms": 1.06, "response_size": "243", "performance_category": "fast"}
------------------------------ Captured log call ------------------------------
WARNING  root:performance_optimization.py:32 ONNX not available. Model export functionality disabled.\nWARNING  root:performance_optimization.py:41 TensorRT not available. GPU acceleration limited.\nINFO     backend.services.performance_optimization:performance_optimization.py:414 Performance optimization service initialized\nINFO     backend.services.performance_optimization:performance_optimization.py:415 Device: cpu\nINFO     backend.services.performance_optimization:performance_optimization.py:416 ONNX available: False\nINFO     backend.services.performance_optimization:performance_optimization.py:417 TensorRT available: False\nINFO     data_validation:data_validation_orchestrator.py:343 \U0001f50d DataValidationOrchestrator initialized with enterprise patterns\nINFO     optimized_validation:optimized_data_validation_orchestrator.py:296 Prometheus metrics server started on port 8001\nINFO     enhanced_validation_integration:enhanced_data_validation_integration.py:270 Enhanced Data Validation Integration Service initialized\nINFO     propollama:comprehensive_prop_generator.py:158 \u2705 Enhanced data validation integration available\nINFO     backend.services.automated_feature_engineering:automated_feature_engineering.py:585 Advanced Feature Engineering initialized\nINFO     backend.services.automated_feature_engineering:automated_feature_engineering.py:585 Advanced Feature Engineering initialized\nINFO     propollama:comprehensive_prop_generator.py:1121 \u2705 Enhanced data validation integration enabled\nINFO     propollama:comprehensive_prop_generator.py:1181 \U0001f680 Enterprise ComprehensivePropGenerator initialized with modern async patterns\nINFO     backend.middleware.rate_limit:rate_limit.py:90 Rate limiting disabled\nINFO     backend.middleware.security_headers:security_headers.py:71 \u2705 Security headers middleware enabled: CSP=report-only, HSTS=True, strict_mode=False\nINFO     backend.middleware.legacy_middleware:legacy_middleware.py:68 Registered known legacy endpoints with forwarding paths\nINFO     backend.middleware.legacy_middleware:legacy_middleware.py:44 Legacy middleware initialized\nINFO     backend.middleware.request_id_middleware:request_id_middleware.py:67 Request started: GET /mlb/comprehensive-props/662253\nERROR    backend.errors.catalog:catalog.py:304 API Error: E4040_NOT_FOUND\nINFO     backend.middleware.request_id_middleware:request_id_middleware.py:92 Request completed: GET /mlb/comprehensive-props/662253 - 404\nINFO     backend.middleware.distributed_trace_middleware:distributed_trace_middleware.py:224 Trace completed: e7c82752-3e6b-4b96-a29a-4e9b874acd9d
____ TestMLBExtrasRoutes.test_get_comprehensive_props_without_optimization ____
tests\backend\routes\test_mlb_extras.py:253: in test_get_comprehensive_props_without_optimization
    assert response.status_code == status.HTTP_200_OK
E   assert 404 == 200
E    +  where 404 = <Response [404 Not Found]>.status_code
E    +  and   200 = status.HTTP_200_OK
---------------------------- Captured stderr setup ----------------------------
2025-08-23 08:03:56,409 - backend.core.app - INFO - \U0001f680 Creating A1Betting canonical app...\n2025-08-23 08:03:56,409 - backend.core.app - INFO - \u2705 Request ID correlation middleware added\n2025-08-23 08:03:56,409 - backend.core.app - INFO - \u2705 Distributed trace correlation middleware added\n2025-08-23 08:03:56,409 - backend.core.app - INFO - \u2705 Structured logging middleware added\n2025-08-23 08:03:56,410 - backend.core.app - INFO - \u2705 Prometheus metrics middleware added\n2025-08-23 08:03:56,410 - backend.core.app - INFO - \u2705 Payload guard middleware added: max_size=262144 bytes, enforce_json=True, enabled=True\n2025-08-23 08:03:56,410 - backend.middleware.rate_limit - INFO - Rate limiting disabled\n2025-08-23 08:03:56,410 - backend.core.app - INFO - \u2705 Rate limiting middleware added: 100/min, burst=200, enabled=False\n2025-08-23 08:03:56,410 - backend.core.app - INFO - \u2705 Security headers middleware added: [HSTS, CSP(report-only), COOP, COEP], x_frame_options=DENY\n2025-08-23 08:03:56,410 - backend.core.app - INFO - \u2705 Legacy endpoint middleware added for usage telemetry and deprecation controls\n2025-08-23 08:03:56,410 - backend.exceptions.handlers - INFO - \u2705 PayloadRejectionError handler registered\n2025-08-23 08:03:56,410 - backend.exceptions.handlers - INFO - \u2705 All exception handlers registered with structured error taxonomy\n2025-08-23 08:03:56,410 - backend.core.app - INFO - \u2705 Centralized exception handlers registered\n2025-08-23 08:03:56,411 - backend.core.app - INFO - \u2705 PR11 Enhanced WebSocket client route included (/ws/client)\n2025-08-23 08:03:56,415 - backend.core.app - INFO - \u2705 Auth routes also exposed at root (/auth/*) for compatibility\n2025-08-23 08:03:56,415 - backend.core.app - INFO - \u2705 Auth and users routes included (auth with /api prefix)\n2025-08-23 08:03:56,416 - backend.core.app - INFO - \u2705 Diagnostics routes included (/api/v2/diagnostics/health, /api/v2/diagnostics/system)\n2025-08-23 08:03:56,418 - backend.core.app - INFO - \u2705 Meta cache routes included (/api/v2/meta/cache-stats, /api/v2/meta/cache-health)\n2025-08-23 08:03:56,418 - backend.core.app - INFO - \u2705 Legacy meta routes included (/api/v2/meta/legacy-usage, /api/v2/meta/migration-readiness)\n2025-08-23 08:03:56,420 - backend.core.app - ERROR - \u274c Failed to register CSP report routes: Invalid args for response field! Hint: check that <class 'logging.Logger'> is a valid Pydantic field type. If you are using a return type annotation that is not a valid Pydantic field (e.g. Union[Response, dict, None]) you can disable generating the response model from the type annotation with the path operation decorator parameter response_model=None. Read more: https://fastapi.tiangolo.com/tutorial/response-model/\n2025-08-23 08:03:56,421 - backend.core.app - INFO - \u2705 Trace test routes included (/api/trace/* endpoints)\n2025-08-23 08:03:56,423 - backend.core.app - INFO - \u2705 Model inference routes included (/api/v2/models/* endpoints)\n2025-08-23 08:03:56,424 - backend.core.app - INFO - \u2705 Observability events routes included (/api/v2/observability/* endpoints)\n2025-08-23 08:03:56,425 - backend.core.app - INFO - \u2705 Admin control routes included (/api/v2/models/shadow/* and /api/v2/models/admin/* endpoints)\n2025-08-23 08:03:56,427 - backend.core.app - INFO - \u2705 Enhanced WebSocket routes included (/ws/v2/* endpoints)\n2025-08-23 08:03:56,428 - backend.core.app - INFO - \u2705 WebSocket logging routes included (/api/websocket/* endpoints)\n2025-08-23 08:03:56,429 - backend.core.app - INFO - \u2705 Version routes included (/api/version/* endpoints)\n2025-08-23 08:03:56,429 - backend.core.app - INFO - \u2705 WebVitals pipeline routes included (/api/metrics/v1/* endpoints)\n2025-08-23 08:03:56,433 - backend.core.app - INFO - \u2705 Enhanced ML routes included (/api/enhanced-ml/* endpoints)\n2025-08-23 08:03:56,434 - backend.core.app - INFO - \u2705 Fallback enhanced-ml compatibility router mounted at /api/enhanced-ml\n2025-08-23 08:03:56,439 - backend.core.app - INFO - \u2705 Consolidated PrizePicks routes included (/api/v2/prizepicks/* endpoints)\n2025-08-23 08:03:56,442 - backend.core.app - INFO - \u2705 Consolidated ML routes included (/api/v2/ml/* endpoints)\n2025-08-23 08:03:56,445 - backend.core.app - ERROR - \u274c Failed to register consolidated Admin routes: parameter without a default follows parameter with a default (consolidated_admin.py, line 165)\n2025-08-23 08:03:56,448 - backend.core.app - INFO - \u2705 Odds & Line Movement routes included (/v1/odds/* endpoints)\n2025-08-23 08:03:56,452 - backend.core.app - INFO - \u2705 Advanced-Kelly compatibility router mounted at /api/advanced-kelly\n2025-08-23 08:03:56,454 - backend.core.app - ERROR - \u274c Failed to register Risk Management & Personalization routes: 'NoneType' object has no attribute 'alert_evaluation_interval_seconds'\n2025-08-23 08:03:56,456 - backend.core.app - INFO - \u2705 Dependencies Health routes included (/api/dependencies/* endpoints)\n2025-08-23 08:03:56,458 - backend.core.app - INFO - \u2705 Provider Resilience routes included (/api/provider-resilience/* endpoints)\n2025-08-23 08:03:56,460 - backend.core.app - INFO - \u2705 System capabilities routes included (/api/system/* endpoints)\n2025-08-23 08:03:56,461 - backend.core.app - INFO - \u2705 Real-time market streaming routes included (/streaming/* endpoints)\n2025-08-23 08:03:56,462 - backend.core.app - INFO - \u2705 Security HEAD endpoints included (/api/* HEAD endpoints)\n2025-08-23 08:03:56,463 - backend.core.app - INFO - \u2705 ML Model Registry routes included (/api/models/* endpoints)\n2025-08-23 08:03:56,464 - backend.core.app - INFO - \u2705 Data ingestion routes included (/api/v1/ingestion/* endpoints)\n2025-08-23 08:03:56,468 - backend.core.app - INFO - \u2705 Enterprise model registry routes included (/api/models/enterprise/* endpoints)\n2025-08-23 08:03:56,472 - backend.core.app - INFO - \u2705 Alert engine routes included (/api/alert-engine/* endpoints)\n2025-08-23 08:03:56,476 - backend.core.app - INFO - \u2705 PropFinder routes included (/api/propfinder/* endpoints)\n2025-08-23 08:03:56,477 - backend.core.app - WARNING - \u26a0\ufe0f Could not import multiple_sportsbook_routes: cannot import name 'RateLimiter' from 'backend.middleware.rate_limit' (C:\\Users\\bcmad\\Downloads\\A1Betting7-13.2\\backend\\middleware\\rate_limit.py)\n2025-08-23 08:03:56,480 - backend.core.app - INFO - \u2705 Sportsbook compatibility router mounted at /api/sportsbook\n2025-08-23 08:03:56,480 - backend.core.app - INFO - \U0001f50d Bootstrap validation scheduled on startup\n2025-08-23 08:03:56,480 - backend.core.app - INFO - \U0001f3e5 Health endpoints normalized: /api/health, /health, /api/v2/health -> identical envelope format\n2025-08-23 08:03:56,480 - backend.core.app - INFO - \u2705 A1Betting canonical app created successfully
----------------------------- Captured log setup ------------------------------
INFO     backend.core.app:app.py:65 \U0001f680 Creating A1Betting canonical app...\nINFO     backend.core.app:app.py:104 \u2705 Request ID correlation middleware added\nINFO     backend.core.app:app.py:114 \u2705 Distributed trace correlation middleware added\nINFO     backend.core.app:app.py:126 \u2705 Structured logging middleware added\nINFO     backend.core.app:app.py:146 \u2705 Prometheus metrics middleware added\nINFO     backend.core.app:app.py:167 \u2705 Payload guard middleware added: max_size=262144 bytes, enforce_json=True, enabled=True\nINFO     backend.middleware.rate_limit:rate_limit.py:90 Rate limiting disabled\nINFO     backend.core.app:app.py:202 \u2705 Rate limiting middleware added: 100/min, burst=200, enabled=False\nINFO     backend.core.app:app.py:244 \u2705 Security headers middleware added: [HSTS, CSP(report-only), COOP, COEP], x_frame_options=DENY\nINFO     backend.core.app:app.py:259 \u2705 Legacy endpoint middleware added for usage telemetry and deprecation controls\nINFO     backend.exceptions.handlers:handlers.py:235 \u2705 PayloadRejectionError handler registered\nINFO     backend.exceptions.handlers:handlers.py:250 \u2705 All exception handlers registered with structured error taxonomy\nINFO     backend.core.app:app.py:269 \u2705 Centralized exception handlers registered\nINFO     backend.core.app:app.py:332 \u2705 PR11 Enhanced WebSocket client route included (/ws/client)\nINFO     backend.core.app:app.py:702 \u2705 Auth routes also exposed at root (/auth/*) for compatibility\nINFO     backend.core.app:app.py:706 \u2705 Auth and users routes included (auth with /api prefix)\nINFO     backend.core.app:app.py:714 \u2705 Diagnostics routes included (/api/v2/diagnostics/health, /api/v2/diagnostics/system)\nINFO     backend.core.app:app.py:763 \u2705 Meta cache routes included (/api/v2/meta/cache-stats, /api/v2/meta/cache-health)\nINFO     backend.core.app:app.py:773 \u2705 Legacy meta routes included (/api/v2/meta/legacy-usage, /api/v2/meta/migration-readiness)\nERROR    backend.core.app:app.py:788 \u274c Failed to register CSP report routes: Invalid args for response field! Hint: check that <class 'logging.Logger'> is a valid Pydantic field type. If you are using a return type annotation that is not a valid Pydantic field (e.g. Union[Response, dict, None]) you can disable generating the response model from the type annotation with the path operation decorator parameter response_model=None. Read more: https://fastapi.tiangolo.com/tutorial/response-model/\nINFO     backend.core.app:app.py:794 \u2705 Trace test routes included (/api/trace/* endpoints)\nINFO     backend.core.app:app.py:804 \u2705 Model inference routes included (/api/v2/models/* endpoints)\nINFO     backend.core.app:app.py:814 \u2705 Observability events routes included (/api/v2/observability/* endpoints)\nINFO     backend.core.app:app.py:824 \u2705 Admin control routes included (/api/v2/models/shadow/* and /api/v2/models/admin/* endpoints)\nINFO     backend.core.app:app.py:834 \u2705 Enhanced WebSocket routes included (/ws/v2/* endpoints)\nINFO     backend.core.app:app.py:844 \u2705 WebSocket logging routes included (/api/websocket/* endpoints)\nINFO     backend.core.app:app.py:854 \u2705 Version routes included (/api/version/* endpoints)\nINFO     backend.core.app:app.py:864 \u2705 WebVitals pipeline routes included (/api/metrics/v1/* endpoints)\nINFO     backend.core.app:app.py:874 \u2705 Enhanced ML routes included (/api/enhanced-ml/* endpoints)\nINFO     backend.core.app:app.py:986 \u2705 Fallback enhanced-ml compatibility router mounted at /api/enhanced-ml\nINFO     backend.core.app:app.py:995 \u2705 Consolidated PrizePicks routes included (/api/v2/prizepicks/* endpoints)\nINFO     backend.core.app:app.py:1005 \u2705 Consolidated ML routes included (/api/v2/ml/* endpoints)\nERROR    backend.core.app:app.py:1019 \u274c Failed to register consolidated Admin routes: parameter without a default follows parameter with a default (consolidated_admin.py, line 165)\nINFO     backend.core.app:app.py:1025 \u2705 Odds & Line Movement routes included (/v1/odds/* endpoints)\nINFO     backend.core.app:app.py:1066 \u2705 Advanced-Kelly compatibility router mounted at /api/advanced-kelly\nERROR    backend.core.app:app.py:1078 \u274c Failed to register Risk Management & Personalization routes: 'NoneType' object has no attribute 'alert_evaluation_interval_seconds'\nINFO     backend.core.app:app.py:1084 \u2705 Dependencies Health routes included (/api/dependencies/* endpoints)\nINFO     backend.core.app:app.py:1094 \u2705 Provider Resilience routes included (/api/provider-resilience/* endpoints)\nINFO     backend.core.app:app.py:1104 \u2705 System capabilities routes included (/api/system/* endpoints)\nINFO     backend.core.app:app.py:1114 \u2705 Real-time market streaming routes included (/streaming/* endpoints)\nINFO     backend.core.app:app.py:1124 \u2705 Security HEAD endpoints included (/api/* HEAD endpoints)\nINFO     backend.core.app:app.py:1134 \u2705 ML Model Registry routes included (/api/models/* endpoints)\nINFO     backend.core.app:app.py:1144 \u2705 Data ingestion routes included (/api/v1/ingestion/* endpoints)\nINFO     backend.core.app:app.py:1154 \u2705 Enterprise model registry routes included (/api/models/enterprise/* endpoints)\nINFO     backend.core.app:app.py:1199 \u2705 Alert engine routes included (/api/alert-engine/* endpoints)\nINFO     backend.core.app:app.py:1209 \u2705 PropFinder routes included (/api/propfinder/* endpoints)\nWARNING  backend.core.app:app.py:1221 \u26a0\ufe0f Could not import multiple_sportsbook_routes: cannot import name 'RateLimiter' from 'backend.middleware.rate_limit' (C:\\Users\\bcmad\\Downloads\\A1Betting7-13.2\\backend\\middleware\\rate_limit.py)\nINFO     backend.core.app:app.py:1495 \u2705 Sportsbook compatibility router mounted at /api/sportsbook\nINFO     backend.core.app:app.py:1527 \U0001f50d Bootstrap validation scheduled on startup\nINFO     backend.core.app:app.py:1535 \U0001f3e5 Health endpoints normalized: /api/health, /health, /api/v2/health -> identical envelope format\nINFO     backend.core.app:app.py:1536 \u2705 A1Betting canonical app created successfully
---------------------------- Captured stderr call -----------------------------
2025-08-23 08:03:56,482 - backend.middleware.rate_limit - INFO - Rate limiting disabled\n2025-08-23 08:03:56,483 - backend.middleware.security_headers - INFO - \u2705 Security headers middleware enabled: CSP=report-only, HSTS=True, strict_mode=False\n2025-08-23 08:03:56,483 - backend.middleware.legacy_middleware - INFO - Registered known legacy endpoints with forwarding paths\n2025-08-23 08:03:56,483 - backend.middleware.legacy_middleware - INFO - Legacy middleware initialized\n{"timestamp": "2025-08-23T13:03:56.483423", "level": "INFO", "logger": "a1betting", "message": "Request started", "module": "structured_logging_middleware", "function": "log_request_start", "line": 109, "request_id": "2500e09a-31c9-4da3-b9bc-8cba26d1a0e1", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro", "event_type": "request_start", "method": "GET", "url": "http://testserver/mlb/comprehensive-props/662253", "path": "/mlb/comprehensive-props/662253", "query_params": {}, "client_ip": "127.0.0.1", "user_agent": "python-httpx/0.28.1", "content_type": null}\n2025-08-23 08:03:56,483 - backend.middleware.request_id_middleware - INFO - Request started: GET /mlb/comprehensive-props/662253\n2025-08-23 08:03:56,484 - backend.errors.catalog - ERROR - API Error: E4040_NOT_FOUND\n2025-08-23 08:03:56,484 - backend.middleware.request_id_middleware - INFO - Request completed: GET /mlb/comprehensive-props/662253 - 404\n2025-08-23 08:03:56,484 - backend.middleware.distributed_trace_middleware - INFO - Trace completed: 00b75ec4-6264-4050-a54a-540df9fcbefd\n{"timestamp": "2025-08-23T13:03:56.484604", "level": "INFO", "logger": "a1betting", "message": "Request completed", "module": "structured_logging_middleware", "function": "log_request_success", "line": 124, "request_id": "2500e09a-31c9-4da3-b9bc-8cba26d1a0e1", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro", "event_type": "request_success", "method": "GET", "url": "http://testserver/mlb/comprehensive-props/662253", "path": "/mlb/comprehensive-props/662253", "status_code": 404, "duration_ms": 1.2, "response_size": "243", "performance_category": "fast"}
------------------------------ Captured log call ------------------------------
INFO     backend.middleware.rate_limit:rate_limit.py:90 Rate limiting disabled\nINFO     backend.middleware.security_headers:security_headers.py:71 \u2705 Security headers middleware enabled: CSP=report-only, HSTS=True, strict_mode=False\nINFO     backend.middleware.legacy_middleware:legacy_middleware.py:68 Registered known legacy endpoints with forwarding paths\nINFO     backend.middleware.legacy_middleware:legacy_middleware.py:44 Legacy middleware initialized\nINFO     backend.middleware.request_id_middleware:request_id_middleware.py:67 Request started: GET /mlb/comprehensive-props/662253\nERROR    backend.errors.catalog:catalog.py:304 API Error: E4040_NOT_FOUND\nINFO     backend.middleware.request_id_middleware:request_id_middleware.py:92 Request completed: GET /mlb/comprehensive-props/662253 - 404\nINFO     backend.middleware.distributed_trace_middleware:distributed_trace_middleware.py:224 Trace completed: 00b75ec4-6264-4050-a54a-540df9fcbefd
_______ TestMLBExtrasRoutes.test_get_comprehensive_props_service_error ________
tests\backend\routes\test_mlb_extras.py:270: in test_get_comprehensive_props_service_error
    assert response.status_code == status.HTTP_500_INTERNAL_SERVER_ERROR
E   assert 404 == 500
E    +  where 404 = <Response [404 Not Found]>.status_code
E    +  and   500 = status.HTTP_500_INTERNAL_SERVER_ERROR
---------------------------- Captured stderr setup ----------------------------
2025-08-23 08:03:56,492 - backend.core.app - INFO - \U0001f680 Creating A1Betting canonical app...\n2025-08-23 08:03:56,493 - backend.core.app - INFO - \u2705 Request ID correlation middleware added\n2025-08-23 08:03:56,493 - backend.core.app - INFO - \u2705 Distributed trace correlation middleware added\n2025-08-23 08:03:56,493 - backend.core.app - INFO - \u2705 Structured logging middleware added\n2025-08-23 08:03:56,493 - backend.core.app - INFO - \u2705 Prometheus metrics middleware added\n2025-08-23 08:03:56,493 - backend.core.app - INFO - \u2705 Payload guard middleware added: max_size=262144 bytes, enforce_json=True, enabled=True\n2025-08-23 08:03:56,493 - backend.middleware.rate_limit - INFO - Rate limiting disabled\n2025-08-23 08:03:56,493 - backend.core.app - INFO - \u2705 Rate limiting middleware added: 100/min, burst=200, enabled=False\n2025-08-23 08:03:56,493 - backend.core.app - INFO - \u2705 Security headers middleware added: [HSTS, CSP(report-only), COOP, COEP], x_frame_options=DENY\n2025-08-23 08:03:56,493 - backend.core.app - INFO - \u2705 Legacy endpoint middleware added for usage telemetry and deprecation controls\n2025-08-23 08:03:56,493 - backend.exceptions.handlers - INFO - \u2705 PayloadRejectionError handler registered\n2025-08-23 08:03:56,493 - backend.exceptions.handlers - INFO - \u2705 All exception handlers registered with structured error taxonomy\n2025-08-23 08:03:56,493 - backend.core.app - INFO - \u2705 Centralized exception handlers registered\n2025-08-23 08:03:56,494 - backend.core.app - INFO - \u2705 PR11 Enhanced WebSocket client route included (/ws/client)\n2025-08-23 08:03:56,498 - backend.core.app - INFO - \u2705 Auth routes also exposed at root (/auth/*) for compatibility\n2025-08-23 08:03:56,498 - backend.core.app - INFO - \u2705 Auth and users routes included (auth with /api prefix)\n2025-08-23 08:03:56,499 - backend.core.app - INFO - \u2705 Diagnostics routes included (/api/v2/diagnostics/health, /api/v2/diagnostics/system)\n2025-08-23 08:03:56,500 - backend.core.app - INFO - \u2705 Meta cache routes included (/api/v2/meta/cache-stats, /api/v2/meta/cache-health)\n2025-08-23 08:03:56,501 - backend.core.app - INFO - \u2705 Legacy meta routes included (/api/v2/meta/legacy-usage, /api/v2/meta/migration-readiness)\n2025-08-23 08:03:56,504 - backend.core.app - ERROR - \u274c Failed to register CSP report routes: Invalid args for response field! Hint: check that <class 'logging.Logger'> is a valid Pydantic field type. If you are using a return type annotation that is not a valid Pydantic field (e.g. Union[Response, dict, None]) you can disable generating the response model from the type annotation with the path operation decorator parameter response_model=None. Read more: https://fastapi.tiangolo.com/tutorial/response-model/\n2025-08-23 08:03:56,504 - backend.core.app - INFO - \u2705 Trace test routes included (/api/trace/* endpoints)\n2025-08-23 08:03:56,506 - backend.core.app - INFO - \u2705 Model inference routes included (/api/v2/models/* endpoints)\n2025-08-23 08:03:56,507 - backend.core.app - INFO - \u2705 Observability events routes included (/api/v2/observability/* endpoints)\n2025-08-23 08:03:56,508 - backend.core.app - INFO - \u2705 Admin control routes included (/api/v2/models/shadow/* and /api/v2/models/admin/* endpoints)\n2025-08-23 08:03:56,510 - backend.core.app - INFO - \u2705 Enhanced WebSocket routes included (/ws/v2/* endpoints)\n2025-08-23 08:03:56,511 - backend.core.app - INFO - \u2705 WebSocket logging routes included (/api/websocket/* endpoints)\n2025-08-23 08:03:56,512 - backend.core.app - INFO - \u2705 Version routes included (/api/version/* endpoints)\n2025-08-23 08:03:56,512 - backend.core.app - INFO - \u2705 WebVitals pipeline routes included (/api/metrics/v1/* endpoints)\n2025-08-23 08:03:56,516 - backend.core.app - INFO - \u2705 Enhanced ML routes included (/api/enhanced-ml/* endpoints)\n2025-08-23 08:03:56,517 - backend.core.app - INFO - \u2705 Fallback enhanced-ml compatibility router mounted at /api/enhanced-ml\n2025-08-23 08:03:56,522 - backend.core.app - INFO - \u2705 Consolidated PrizePicks routes included (/api/v2/prizepicks/* endpoints)\n2025-08-23 08:03:56,525 - backend.core.app - INFO - \u2705 Consolidated ML routes included (/api/v2/ml/* endpoints)\n2025-08-23 08:03:56,527 - backend.core.app - ERROR - \u274c Failed to register consolidated Admin routes: parameter without a default follows parameter with a default (consolidated_admin.py, line 165)\n2025-08-23 08:03:56,531 - backend.core.app - INFO - \u2705 Odds & Line Movement routes included (/v1/odds/* endpoints)\n2025-08-23 08:03:56,532 - backend.core.app - INFO - \u2705 Advanced-Kelly compatibility router mounted at /api/advanced-kelly\n2025-08-23 08:03:56,535 - backend.core.app - ERROR - \u274c Failed to register Risk Management & Personalization routes: 'NoneType' object has no attribute 'alert_evaluation_interval_seconds'\n2025-08-23 08:03:56,536 - backend.core.app - INFO - \u2705 Dependencies Health routes included (/api/dependencies/* endpoints)\n2025-08-23 08:03:56,538 - backend.core.app - INFO - \u2705 Provider Resilience routes included (/api/provider-resilience/* endpoints)\n2025-08-23 08:03:56,541 - backend.core.app - INFO - \u2705 System capabilities routes included (/api/system/* endpoints)\n2025-08-23 08:03:56,543 - backend.core.app - INFO - \u2705 Real-time market streaming routes included (/streaming/* endpoints)\n2025-08-23 08:03:56,543 - backend.core.app - INFO - \u2705 Security HEAD endpoints included (/api/* HEAD endpoints)\n2025-08-23 08:03:56,545 - backend.core.app - INFO - \u2705 ML Model Registry routes included (/api/models/* endpoints)\n2025-08-23 08:03:56,546 - backend.core.app - INFO - \u2705 Data ingestion routes included (/api/v1/ingestion/* endpoints)\n2025-08-23 08:03:56,549 - backend.core.app - INFO - \u2705 Enterprise model registry routes included (/api/models/enterprise/* endpoints)\n2025-08-23 08:03:56,553 - backend.core.app - INFO - \u2705 Alert engine routes included (/api/alert-engine/* endpoints)\n2025-08-23 08:03:56,557 - backend.core.app - INFO - \u2705 PropFinder routes included (/api/propfinder/* endpoints)\n2025-08-23 08:03:56,557 - backend.core.app - WARNING - \u26a0\ufe0f Could not import multiple_sportsbook_routes: cannot import name 'RateLimiter' from 'backend.middleware.rate_limit' (C:\\Users\\bcmad\\Downloads\\A1Betting7-13.2\\backend\\middleware\\rate_limit.py)\n2025-08-23 08:03:56,560 - backend.core.app - INFO - \u2705 Sportsbook compatibility router mounted at /api/sportsbook\n2025-08-23 08:03:56,560 - backend.core.app - INFO - \U0001f50d Bootstrap validation scheduled on startup\n2025-08-23 08:03:56,560 - backend.core.app - INFO - \U0001f3e5 Health endpoints normalized: /api/health, /health, /api/v2/health -> identical envelope format\n2025-08-23 08:03:56,560 - backend.core.app - INFO - \u2705 A1Betting canonical app created successfully
----------------------------- Captured log setup ------------------------------
INFO     backend.core.app:app.py:65 \U0001f680 Creating A1Betting canonical app...\nINFO     backend.core.app:app.py:104 \u2705 Request ID correlation middleware added\nINFO     backend.core.app:app.py:114 \u2705 Distributed trace correlation middleware added\nINFO     backend.core.app:app.py:126 \u2705 Structured logging middleware added\nINFO     backend.core.app:app.py:146 \u2705 Prometheus metrics middleware added\nINFO     backend.core.app:app.py:167 \u2705 Payload guard middleware added: max_size=262144 bytes, enforce_json=True, enabled=True\nINFO     backend.middleware.rate_limit:rate_limit.py:90 Rate limiting disabled\nINFO     backend.core.app:app.py:202 \u2705 Rate limiting middleware added: 100/min, burst=200, enabled=False\nINFO     backend.core.app:app.py:244 \u2705 Security headers middleware added: [HSTS, CSP(report-only), COOP, COEP], x_frame_options=DENY\nINFO     backend.core.app:app.py:259 \u2705 Legacy endpoint middleware added for usage telemetry and deprecation controls\nINFO     backend.exceptions.handlers:handlers.py:235 \u2705 PayloadRejectionError handler registered\nINFO     backend.exceptions.handlers:handlers.py:250 \u2705 All exception handlers registered with structured error taxonomy\nINFO     backend.core.app:app.py:269 \u2705 Centralized exception handlers registered\nINFO     backend.core.app:app.py:332 \u2705 PR11 Enhanced WebSocket client route included (/ws/client)\nINFO     backend.core.app:app.py:702 \u2705 Auth routes also exposed at root (/auth/*) for compatibility\nINFO     backend.core.app:app.py:706 \u2705 Auth and users routes included (auth with /api prefix)\nINFO     backend.core.app:app.py:714 \u2705 Diagnostics routes included (/api/v2/diagnostics/health, /api/v2/diagnostics/system)\nINFO     backend.core.app:app.py:763 \u2705 Meta cache routes included (/api/v2/meta/cache-stats, /api/v2/meta/cache-health)\nINFO     backend.core.app:app.py:773 \u2705 Legacy meta routes included (/api/v2/meta/legacy-usage, /api/v2/meta/migration-readiness)\nERROR    backend.core.app:app.py:788 \u274c Failed to register CSP report routes: Invalid args for response field! Hint: check that <class 'logging.Logger'> is a valid Pydantic field type. If you are using a return type annotation that is not a valid Pydantic field (e.g. Union[Response, dict, None]) you can disable generating the response model from the type annotation with the path operation decorator parameter response_model=None. Read more: https://fastapi.tiangolo.com/tutorial/response-model/\nINFO     backend.core.app:app.py:794 \u2705 Trace test routes included (/api/trace/* endpoints)\nINFO     backend.core.app:app.py:804 \u2705 Model inference routes included (/api/v2/models/* endpoints)\nINFO     backend.core.app:app.py:814 \u2705 Observability events routes included (/api/v2/observability/* endpoints)\nINFO     backend.core.app:app.py:824 \u2705 Admin control routes included (/api/v2/models/shadow/* and /api/v2/models/admin/* endpoints)\nINFO     backend.core.app:app.py:834 \u2705 Enhanced WebSocket routes included (/ws/v2/* endpoints)\nINFO     backend.core.app:app.py:844 \u2705 WebSocket logging routes included (/api/websocket/* endpoints)\nINFO     backend.core.app:app.py:854 \u2705 Version routes included (/api/version/* endpoints)\nINFO     backend.core.app:app.py:864 \u2705 WebVitals pipeline routes included (/api/metrics/v1/* endpoints)\nINFO     backend.core.app:app.py:874 \u2705 Enhanced ML routes included (/api/enhanced-ml/* endpoints)\nINFO     backend.core.app:app.py:986 \u2705 Fallback enhanced-ml compatibility router mounted at /api/enhanced-ml\nINFO     backend.core.app:app.py:995 \u2705 Consolidated PrizePicks routes included (/api/v2/prizepicks/* endpoints)\nINFO     backend.core.app:app.py:1005 \u2705 Consolidated ML routes included (/api/v2/ml/* endpoints)\nERROR    backend.core.app:app.py:1019 \u274c Failed to register consolidated Admin routes: parameter without a default follows parameter with a default (consolidated_admin.py, line 165)\nINFO     backend.core.app:app.py:1025 \u2705 Odds & Line Movement routes included (/v1/odds/* endpoints)\nINFO     backend.core.app:app.py:1066 \u2705 Advanced-Kelly compatibility router mounted at /api/advanced-kelly\nERROR    backend.core.app:app.py:1078 \u274c Failed to register Risk Management & Personalization routes: 'NoneType' object has no attribute 'alert_evaluation_interval_seconds'\nINFO     backend.core.app:app.py:1084 \u2705 Dependencies Health routes included (/api/dependencies/* endpoints)\nINFO     backend.core.app:app.py:1094 \u2705 Provider Resilience routes included (/api/provider-resilience/* endpoints)\nINFO     backend.core.app:app.py:1104 \u2705 System capabilities routes included (/api/system/* endpoints)\nINFO     backend.core.app:app.py:1114 \u2705 Real-time market streaming routes included (/streaming/* endpoints)\nINFO     backend.core.app:app.py:1124 \u2705 Security HEAD endpoints included (/api/* HEAD endpoints)\nINFO     backend.core.app:app.py:1134 \u2705 ML Model Registry routes included (/api/models/* endpoints)\nINFO     backend.core.app:app.py:1144 \u2705 Data ingestion routes included (/api/v1/ingestion/* endpoints)\nINFO     backend.core.app:app.py:1154 \u2705 Enterprise model registry routes included (/api/models/enterprise/* endpoints)\nINFO     backend.core.app:app.py:1199 \u2705 Alert engine routes included (/api/alert-engine/* endpoints)\nINFO     backend.core.app:app.py:1209 \u2705 PropFinder routes included (/api/propfinder/* endpoints)\nWARNING  backend.core.app:app.py:1221 \u26a0\ufe0f Could not import multiple_sportsbook_routes: cannot import name 'RateLimiter' from 'backend.middleware.rate_limit' (C:\\Users\\bcmad\\Downloads\\A1Betting7-13.2\\backend\\middleware\\rate_limit.py)\nINFO     backend.core.app:app.py:1495 \u2705 Sportsbook compatibility router mounted at /api/sportsbook\nINFO     backend.core.app:app.py:1527 \U0001f50d Bootstrap validation scheduled on startup\nINFO     backend.core.app:app.py:1535 \U0001f3e5 Health endpoints normalized: /api/health, /health, /api/v2/health -> identical envelope format\nINFO     backend.core.app:app.py:1536 \u2705 A1Betting canonical app created successfully
---------------------------- Captured stderr call -----------------------------
2025-08-23 08:03:56,562 - backend.middleware.rate_limit - INFO - Rate limiting disabled\n2025-08-23 08:03:56,562 - backend.middleware.security_headers - INFO - \u2705 Security headers middleware enabled: CSP=report-only, HSTS=True, strict_mode=False\n2025-08-23 08:03:56,562 - backend.middleware.legacy_middleware - INFO - Registered known legacy endpoints with forwarding paths\n2025-08-23 08:03:56,562 - backend.middleware.legacy_middleware - INFO - Legacy middleware initialized\n{"timestamp": "2025-08-23T13:03:56.562969", "level": "INFO", "logger": "a1betting", "message": "Request started", "module": "structured_logging_middleware", "function": "log_request_start", "line": 109, "request_id": "4479c641-eb3d-42dc-89f3-c8020233d4ba", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro", "event_type": "request_start", "method": "GET", "url": "http://testserver/mlb/comprehensive-props/662253", "path": "/mlb/comprehensive-props/662253", "query_params": {}, "client_ip": "127.0.0.1", "user_agent": "python-httpx/0.28.1", "content_type": null}\n2025-08-23 08:03:56,563 - backend.middleware.request_id_middleware - INFO - Request started: GET /mlb/comprehensive-props/662253\n2025-08-23 08:03:56,563 - backend.errors.catalog - ERROR - API Error: E4040_NOT_FOUND\n2025-08-23 08:03:56,563 - backend.middleware.request_id_middleware - INFO - Request completed: GET /mlb/comprehensive-props/662253 - 404\n2025-08-23 08:03:56,564 - backend.middleware.distributed_trace_middleware - INFO - Trace completed: 317ae27d-848a-4497-a781-661c3257b6c7\n{"timestamp": "2025-08-23T13:03:56.564139", "level": "INFO", "logger": "a1betting", "message": "Request completed", "module": "structured_logging_middleware", "function": "log_request_success", "line": 124, "request_id": "4479c641-eb3d-42dc-89f3-c8020233d4ba", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro", "event_type": "request_success", "method": "GET", "url": "http://testserver/mlb/comprehensive-props/662253", "path": "/mlb/comprehensive-props/662253", "status_code": 404, "duration_ms": 1.19, "response_size": "243", "performance_category": "fast"}
------------------------------ Captured log call ------------------------------
INFO     backend.middleware.rate_limit:rate_limit.py:90 Rate limiting disabled\nINFO     backend.middleware.security_headers:security_headers.py:71 \u2705 Security headers middleware enabled: CSP=report-only, HSTS=True, strict_mode=False\nINFO     backend.middleware.legacy_middleware:legacy_middleware.py:68 Registered known legacy endpoints with forwarding paths\nINFO     backend.middleware.legacy_middleware:legacy_middleware.py:44 Legacy middleware initialized\nINFO     backend.middleware.request_id_middleware:request_id_middleware.py:67 Request started: GET /mlb/comprehensive-props/662253\nERROR    backend.errors.catalog:catalog.py:304 API Error: E4040_NOT_FOUND\nINFO     backend.middleware.request_id_middleware:request_id_middleware.py:92 Request completed: GET /mlb/comprehensive-props/662253 - 404\nINFO     backend.middleware.distributed_trace_middleware:distributed_trace_middleware.py:224 Trace completed: 317ae27d-848a-4497-a781-661c3257b6c7
____________ TestMLBExtrasRoutes.test_get_live_game_stats_success _____________
tests\backend\routes\test_mlb_extras.py:310: in test_get_live_game_stats_success
    with patch('backend.routes.mlb_extras.get_live_game_data', return_value=mock_live_stats):
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
C:\Python313\Lib\unittest\mock.py:1497: in __enter__
    original, local = self.get_original()
                      ^^^^^^^^^^^^^^^^^^^
C:\Python313\Lib\unittest\mock.py:1467: in get_original
    raise AttributeError(
E   AttributeError: <module 'backend.routes.mlb_extras' from 'C:\\Users\\bcmad\\Downloads\\A1Betting7-13.2\\backend\\routes\\mlb_extras.py'> does not have the attribute 'get_live_game_data'
---------------------------- Captured stderr setup ----------------------------
2025-08-23 08:03:56,595 - backend.core.app - INFO - \U0001f680 Creating A1Betting canonical app...\n2025-08-23 08:03:56,596 - backend.core.app - INFO - \u2705 Request ID correlation middleware added\n2025-08-23 08:03:56,596 - backend.core.app - INFO - \u2705 Distributed trace correlation middleware added\n2025-08-23 08:03:56,596 - backend.core.app - INFO - \u2705 Structured logging middleware added\n2025-08-23 08:03:56,596 - backend.core.app - INFO - \u2705 Prometheus metrics middleware added\n2025-08-23 08:03:56,596 - backend.core.app - INFO - \u2705 Payload guard middleware added: max_size=262144 bytes, enforce_json=True, enabled=True\n2025-08-23 08:03:56,596 - backend.middleware.rate_limit - INFO - Rate limiting disabled\n2025-08-23 08:03:56,596 - backend.core.app - INFO - \u2705 Rate limiting middleware added: 100/min, burst=200, enabled=False\n2025-08-23 08:03:56,596 - backend.core.app - INFO - \u2705 Security headers middleware added: [HSTS, CSP(report-only), COOP, COEP], x_frame_options=DENY\n2025-08-23 08:03:56,596 - backend.core.app - INFO - \u2705 Legacy endpoint middleware added for usage telemetry and deprecation controls\n2025-08-23 08:03:56,596 - backend.exceptions.handlers - INFO - \u2705 PayloadRejectionError handler registered\n2025-08-23 08:03:56,596 - backend.exceptions.handlers - INFO - \u2705 All exception handlers registered with structured error taxonomy\n2025-08-23 08:03:56,596 - backend.core.app - INFO - \u2705 Centralized exception handlers registered\n2025-08-23 08:03:56,598 - backend.core.app - INFO - \u2705 PR11 Enhanced WebSocket client route included (/ws/client)\n2025-08-23 08:03:56,603 - backend.core.app - INFO - \u2705 Auth routes also exposed at root (/auth/*) for compatibility\n2025-08-23 08:03:56,603 - backend.core.app - INFO - \u2705 Auth and users routes included (auth with /api prefix)\n2025-08-23 08:03:56,604 - backend.core.app - INFO - \u2705 Diagnostics routes included (/api/v2/diagnostics/health, /api/v2/diagnostics/system)\n2025-08-23 08:03:56,604 - backend.core.app - INFO - \u2705 Meta cache routes included (/api/v2/meta/cache-stats, /api/v2/meta/cache-health)\n2025-08-23 08:03:56,605 - backend.core.app - INFO - \u2705 Legacy meta routes included (/api/v2/meta/legacy-usage, /api/v2/meta/migration-readiness)\n2025-08-23 08:03:56,607 - backend.core.app - ERROR - \u274c Failed to register CSP report routes: Invalid args for response field! Hint: check that <class 'logging.Logger'> is a valid Pydantic field type. If you are using a return type annotation that is not a valid Pydantic field (e.g. Union[Response, dict, None]) you can disable generating the response model from the type annotation with the path operation decorator parameter response_model=None. Read more: https://fastapi.tiangolo.com/tutorial/response-model/\n2025-08-23 08:03:56,608 - backend.core.app - INFO - \u2705 Trace test routes included (/api/trace/* endpoints)\n2025-08-23 08:03:56,609 - backend.core.app - INFO - \u2705 Model inference routes included (/api/v2/models/* endpoints)\n2025-08-23 08:03:56,611 - backend.core.app - INFO - \u2705 Observability events routes included (/api/v2/observability/* endpoints)\n2025-08-23 08:03:56,612 - backend.core.app - INFO - \u2705 Admin control routes included (/api/v2/models/shadow/* and /api/v2/models/admin/* endpoints)\n2025-08-23 08:03:56,614 - backend.core.app - INFO - \u2705 Enhanced WebSocket routes included (/ws/v2/* endpoints)\n2025-08-23 08:03:56,615 - backend.core.app - INFO - \u2705 WebSocket logging routes included (/api/websocket/* endpoints)\n2025-08-23 08:03:56,616 - backend.core.app - INFO - \u2705 Version routes included (/api/version/* endpoints)\n2025-08-23 08:03:56,616 - backend.core.app - INFO - \u2705 WebVitals pipeline routes included (/api/metrics/v1/* endpoints)\n2025-08-23 08:03:56,620 - backend.core.app - INFO - \u2705 Enhanced ML routes included (/api/enhanced-ml/* endpoints)\n2025-08-23 08:03:56,621 - backend.core.app - INFO - \u2705 Fallback enhanced-ml compatibility router mounted at /api/enhanced-ml\n2025-08-23 08:03:56,626 - backend.core.app - INFO - \u2705 Consolidated PrizePicks routes included (/api/v2/prizepicks/* endpoints)\n2025-08-23 08:03:56,631 - backend.core.app - INFO - \u2705 Consolidated ML routes included (/api/v2/ml/* endpoints)\n2025-08-23 08:03:56,633 - backend.core.app - ERROR - \u274c Failed to register consolidated Admin routes: parameter without a default follows parameter with a default (consolidated_admin.py, line 165)\n2025-08-23 08:03:56,636 - backend.core.app - INFO - \u2705 Odds & Line Movement routes included (/v1/odds/* endpoints)\n2025-08-23 08:03:56,638 - backend.core.app - INFO - \u2705 Advanced-Kelly compatibility router mounted at /api/advanced-kelly\n2025-08-23 08:03:56,642 - backend.core.app - ERROR - \u274c Failed to register Risk Management & Personalization routes: 'NoneType' object has no attribute 'alert_evaluation_interval_seconds'\n2025-08-23 08:03:56,643 - backend.core.app - INFO - \u2705 Dependencies Health routes included (/api/dependencies/* endpoints)\n2025-08-23 08:03:56,646 - backend.core.app - INFO - \u2705 Provider Resilience routes included (/api/provider-resilience/* endpoints)\n2025-08-23 08:03:56,647 - backend.core.app - INFO - \u2705 System capabilities routes included (/api/system/* endpoints)\n2025-08-23 08:03:56,648 - backend.core.app - INFO - \u2705 Real-time market streaming routes included (/streaming/* endpoints)\n2025-08-23 08:03:56,649 - backend.core.app - INFO - \u2705 Security HEAD endpoints included (/api/* HEAD endpoints)\n2025-08-23 08:03:56,651 - backend.core.app - INFO - \u2705 ML Model Registry routes included (/api/models/* endpoints)\n2025-08-23 08:03:56,652 - backend.core.app - INFO - \u2705 Data ingestion routes included (/api/v1/ingestion/* endpoints)\n2025-08-23 08:03:56,657 - backend.core.app - INFO - \u2705 Enterprise model registry routes included (/api/models/enterprise/* endpoints)\n2025-08-23 08:03:56,660 - backend.core.app - INFO - \u2705 Alert engine routes included (/api/alert-engine/* endpoints)\n2025-08-23 08:03:56,929 - backend.core.app - INFO - \u2705 PropFinder routes included (/api/propfinder/* endpoints)\n2025-08-23 08:03:56,930 - backend.core.app - WARNING - \u26a0\ufe0f Could not import multiple_sportsbook_routes: cannot import name 'RateLimiter' from 'backend.middleware.rate_limit' (C:\\Users\\bcmad\\Downloads\\A1Betting7-13.2\\backend\\middleware\\rate_limit.py)\n2025-08-23 08:03:56,933 - backend.core.app - INFO - \u2705 Sportsbook compatibility router mounted at /api/sportsbook\n2025-08-23 08:03:56,933 - backend.core.app - INFO - \U0001f50d Bootstrap validation scheduled on startup\n2025-08-23 08:03:56,933 - backend.core.app - INFO - \U0001f3e5 Health endpoints normalized: /api/health, /health, /api/v2/health -> identical envelope format\n2025-08-23 08:03:56,933 - backend.core.app - INFO - \u2705 A1Betting canonical app created successfully
----------------------------- Captured log setup ------------------------------
INFO     backend.core.app:app.py:65 \U0001f680 Creating A1Betting canonical app...\nINFO     backend.core.app:app.py:104 \u2705 Request ID correlation middleware added\nINFO     backend.core.app:app.py:114 \u2705 Distributed trace correlation middleware added\nINFO     backend.core.app:app.py:126 \u2705 Structured logging middleware added\nINFO     backend.core.app:app.py:146 \u2705 Prometheus metrics middleware added\nINFO     backend.core.app:app.py:167 \u2705 Payload guard middleware added: max_size=262144 bytes, enforce_json=True, enabled=True\nINFO     backend.middleware.rate_limit:rate_limit.py:90 Rate limiting disabled\nINFO     backend.core.app:app.py:202 \u2705 Rate limiting middleware added: 100/min, burst=200, enabled=False\nINFO     backend.core.app:app.py:244 \u2705 Security headers middleware added: [HSTS, CSP(report-only), COOP, COEP], x_frame_options=DENY\nINFO     backend.core.app:app.py:259 \u2705 Legacy endpoint middleware added for usage telemetry and deprecation controls\nINFO     backend.exceptions.handlers:handlers.py:235 \u2705 PayloadRejectionError handler registered\nINFO     backend.exceptions.handlers:handlers.py:250 \u2705 All exception handlers registered with structured error taxonomy\nINFO     backend.core.app:app.py:269 \u2705 Centralized exception handlers registered\nINFO     backend.core.app:app.py:332 \u2705 PR11 Enhanced WebSocket client route included (/ws/client)\nINFO     backend.core.app:app.py:702 \u2705 Auth routes also exposed at root (/auth/*) for compatibility\nINFO     backend.core.app:app.py:706 \u2705 Auth and users routes included (auth with /api prefix)\nINFO     backend.core.app:app.py:714 \u2705 Diagnostics routes included (/api/v2/diagnostics/health, /api/v2/diagnostics/system)\nINFO     backend.core.app:app.py:763 \u2705 Meta cache routes included (/api/v2/meta/cache-stats, /api/v2/meta/cache-health)\nINFO     backend.core.app:app.py:773 \u2705 Legacy meta routes included (/api/v2/meta/legacy-usage, /api/v2/meta/migration-readiness)\nERROR    backend.core.app:app.py:788 \u274c Failed to register CSP report routes: Invalid args for response field! Hint: check that <class 'logging.Logger'> is a valid Pydantic field type. If you are using a return type annotation that is not a valid Pydantic field (e.g. Union[Response, dict, None]) you can disable generating the response model from the type annotation with the path operation decorator parameter response_model=None. Read more: https://fastapi.tiangolo.com/tutorial/response-model/\nINFO     backend.core.app:app.py:794 \u2705 Trace test routes included (/api/trace/* endpoints)\nINFO     backend.core.app:app.py:804 \u2705 Model inference routes included (/api/v2/models/* endpoints)\nINFO     backend.core.app:app.py:814 \u2705 Observability events routes included (/api/v2/observability/* endpoints)\nINFO     backend.core.app:app.py:824 \u2705 Admin control routes included (/api/v2/models/shadow/* and /api/v2/models/admin/* endpoints)\nINFO     backend.core.app:app.py:834 \u2705 Enhanced WebSocket routes included (/ws/v2/* endpoints)\nINFO     backend.core.app:app.py:844 \u2705 WebSocket logging routes included (/api/websocket/* endpoints)\nINFO     backend.core.app:app.py:854 \u2705 Version routes included (/api/version/* endpoints)\nINFO     backend.core.app:app.py:864 \u2705 WebVitals pipeline routes included (/api/metrics/v1/* endpoints)\nINFO     backend.core.app:app.py:874 \u2705 Enhanced ML routes included (/api/enhanced-ml/* endpoints)\nINFO     backend.core.app:app.py:986 \u2705 Fallback enhanced-ml compatibility router mounted at /api/enhanced-ml\nINFO     backend.core.app:app.py:995 \u2705 Consolidated PrizePicks routes included (/api/v2/prizepicks/* endpoints)\nINFO     backend.core.app:app.py:1005 \u2705 Consolidated ML routes included (/api/v2/ml/* endpoints)\nERROR    backend.core.app:app.py:1019 \u274c Failed to register consolidated Admin routes: parameter without a default follows parameter with a default (consolidated_admin.py, line 165)\nINFO     backend.core.app:app.py:1025 \u2705 Odds & Line Movement routes included (/v1/odds/* endpoints)\nINFO     backend.core.app:app.py:1066 \u2705 Advanced-Kelly compatibility router mounted at /api/advanced-kelly\nERROR    backend.core.app:app.py:1078 \u274c Failed to register Risk Management & Personalization routes: 'NoneType' object has no attribute 'alert_evaluation_interval_seconds'\nINFO     backend.core.app:app.py:1084 \u2705 Dependencies Health routes included (/api/dependencies/* endpoints)\nINFO     backend.core.app:app.py:1094 \u2705 Provider Resilience routes included (/api/provider-resilience/* endpoints)\nINFO     backend.core.app:app.py:1104 \u2705 System capabilities routes included (/api/system/* endpoints)\nINFO     backend.core.app:app.py:1114 \u2705 Real-time market streaming routes included (/streaming/* endpoints)\nINFO     backend.core.app:app.py:1124 \u2705 Security HEAD endpoints included (/api/* HEAD endpoints)\nINFO     backend.core.app:app.py:1134 \u2705 ML Model Registry routes included (/api/models/* endpoints)\nINFO     backend.core.app:app.py:1144 \u2705 Data ingestion routes included (/api/v1/ingestion/* endpoints)\nINFO     backend.core.app:app.py:1154 \u2705 Enterprise model registry routes included (/api/models/enterprise/* endpoints)\nINFO     backend.core.app:app.py:1199 \u2705 Alert engine routes included (/api/alert-engine/* endpoints)\nINFO     backend.core.app:app.py:1209 \u2705 PropFinder routes included (/api/propfinder/* endpoints)\nWARNING  backend.core.app:app.py:1221 \u26a0\ufe0f Could not import multiple_sportsbook_routes: cannot import name 'RateLimiter' from 'backend.middleware.rate_limit' (C:\\Users\\bcmad\\Downloads\\A1Betting7-13.2\\backend\\middleware\\rate_limit.py)\nINFO     backend.core.app:app.py:1495 \u2705 Sportsbook compatibility router mounted at /api/sportsbook\nINFO     backend.core.app:app.py:1527 \U0001f50d Bootstrap validation scheduled on startup\nINFO     backend.core.app:app.py:1535 \U0001f3e5 Health endpoints normalized: /api/health, /health, /api/v2/health -> identical envelope format\nINFO     backend.core.app:app.py:1536 \u2705 A1Betting canonical app created successfully
___________ TestMLBExtrasRoutes.test_get_live_game_stats_not_found ____________
tests\backend\routes\test_mlb_extras.py:329: in test_get_live_game_stats_not_found
    with patch('backend.routes.mlb_extras.get_live_game_data', return_value=None):
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
C:\Python313\Lib\unittest\mock.py:1497: in __enter__
    original, local = self.get_original()
                      ^^^^^^^^^^^^^^^^^^^
C:\Python313\Lib\unittest\mock.py:1467: in get_original
    raise AttributeError(
E   AttributeError: <module 'backend.routes.mlb_extras' from 'C:\\Users\\bcmad\\Downloads\\A1Betting7-13.2\\backend\\routes\\mlb_extras.py'> does not have the attribute 'get_live_game_data'
---------------------------- Captured stderr setup ----------------------------
2025-08-23 08:03:56,969 - backend.core.app - INFO - \U0001f680 Creating A1Betting canonical app...\n2025-08-23 08:03:56,969 - backend.core.app - INFO - \u2705 Request ID correlation middleware added\n2025-08-23 08:03:56,970 - backend.core.app - INFO - \u2705 Distributed trace correlation middleware added\n2025-08-23 08:03:56,970 - backend.core.app - INFO - \u2705 Structured logging middleware added\n2025-08-23 08:03:56,970 - backend.core.app - INFO - \u2705 Prometheus metrics middleware added\n2025-08-23 08:03:56,970 - backend.core.app - INFO - \u2705 Payload guard middleware added: max_size=262144 bytes, enforce_json=True, enabled=True\n2025-08-23 08:03:56,970 - backend.middleware.rate_limit - INFO - Rate limiting disabled\n2025-08-23 08:03:56,970 - backend.core.app - INFO - \u2705 Rate limiting middleware added: 100/min, burst=200, enabled=False\n2025-08-23 08:03:56,970 - backend.core.app - INFO - \u2705 Security headers middleware added: [HSTS, CSP(report-only), COOP, COEP], x_frame_options=DENY\n2025-08-23 08:03:56,970 - backend.core.app - INFO - \u2705 Legacy endpoint middleware added for usage telemetry and deprecation controls\n2025-08-23 08:03:56,970 - backend.exceptions.handlers - INFO - \u2705 PayloadRejectionError handler registered\n2025-08-23 08:03:56,970 - backend.exceptions.handlers - INFO - \u2705 All exception handlers registered with structured error taxonomy\n2025-08-23 08:03:56,970 - backend.core.app - INFO - \u2705 Centralized exception handlers registered\n2025-08-23 08:03:56,971 - backend.core.app - INFO - \u2705 PR11 Enhanced WebSocket client route included (/ws/client)\n2025-08-23 08:03:56,975 - backend.core.app - INFO - \u2705 Auth routes also exposed at root (/auth/*) for compatibility\n2025-08-23 08:03:56,975 - backend.core.app - INFO - \u2705 Auth and users routes included (auth with /api prefix)\n2025-08-23 08:03:56,976 - backend.core.app - INFO - \u2705 Diagnostics routes included (/api/v2/diagnostics/health, /api/v2/diagnostics/system)\n2025-08-23 08:03:56,978 - backend.core.app - INFO - \u2705 Meta cache routes included (/api/v2/meta/cache-stats, /api/v2/meta/cache-health)\n2025-08-23 08:03:56,978 - backend.core.app - INFO - \u2705 Legacy meta routes included (/api/v2/meta/legacy-usage, /api/v2/meta/migration-readiness)\n2025-08-23 08:03:56,980 - backend.core.app - ERROR - \u274c Failed to register CSP report routes: Invalid args for response field! Hint: check that <class 'logging.Logger'> is a valid Pydantic field type. If you are using a return type annotation that is not a valid Pydantic field (e.g. Union[Response, dict, None]) you can disable generating the response model from the type annotation with the path operation decorator parameter response_model=None. Read more: https://fastapi.tiangolo.com/tutorial/response-model/\n2025-08-23 08:03:56,981 - backend.core.app - INFO - \u2705 Trace test routes included (/api/trace/* endpoints)\n2025-08-23 08:03:56,982 - backend.core.app - INFO - \u2705 Model inference routes included (/api/v2/models/* endpoints)\n2025-08-23 08:03:56,984 - backend.core.app - INFO - \u2705 Observability events routes included (/api/v2/observability/* endpoints)\n2025-08-23 08:03:56,985 - backend.core.app - INFO - \u2705 Admin control routes included (/api/v2/models/shadow/* and /api/v2/models/admin/* endpoints)\n2025-08-23 08:03:56,987 - backend.core.app - INFO - \u2705 Enhanced WebSocket routes included (/ws/v2/* endpoints)\n2025-08-23 08:03:56,988 - backend.core.app - INFO - \u2705 WebSocket logging routes included (/api/websocket/* endpoints)\n2025-08-23 08:03:56,990 - backend.core.app - INFO - \u2705 Version routes included (/api/version/* endpoints)\n2025-08-23 08:03:56,990 - backend.core.app - INFO - \u2705 WebVitals pipeline routes included (/api/metrics/v1/* endpoints)\n2025-08-23 08:03:56,994 - backend.core.app - INFO - \u2705 Enhanced ML routes included (/api/enhanced-ml/* endpoints)\n2025-08-23 08:03:56,995 - backend.core.app - INFO - \u2705 Fallback enhanced-ml compatibility router mounted at /api/enhanced-ml\n2025-08-23 08:03:56,999 - backend.core.app - INFO - \u2705 Consolidated PrizePicks routes included (/api/v2/prizepicks/* endpoints)\n2025-08-23 08:03:57,002 - backend.core.app - INFO - \u2705 Consolidated ML routes included (/api/v2/ml/* endpoints)\n2025-08-23 08:03:57,004 - backend.core.app - ERROR - \u274c Failed to register consolidated Admin routes: parameter without a default follows parameter with a default (consolidated_admin.py, line 165)\n2025-08-23 08:03:57,008 - backend.core.app - INFO - \u2705 Odds & Line Movement routes included (/v1/odds/* endpoints)\n2025-08-23 08:03:57,009 - backend.core.app - INFO - \u2705 Advanced-Kelly compatibility router mounted at /api/advanced-kelly\n2025-08-23 08:03:57,012 - backend.core.app - ERROR - \u274c Failed to register Risk Management & Personalization routes: 'NoneType' object has no attribute 'alert_evaluation_interval_seconds'\n2025-08-23 08:03:57,013 - backend.core.app - INFO - \u2705 Dependencies Health routes included (/api/dependencies/* endpoints)\n2025-08-23 08:03:57,015 - backend.core.app - INFO - \u2705 Provider Resilience routes included (/api/provider-resilience/* endpoints)\n2025-08-23 08:03:57,017 - backend.core.app - INFO - \u2705 System capabilities routes included (/api/system/* endpoints)\n2025-08-23 08:03:57,018 - backend.core.app - INFO - \u2705 Real-time market streaming routes included (/streaming/* endpoints)\n2025-08-23 08:03:57,019 - backend.core.app - INFO - \u2705 Security HEAD endpoints included (/api/* HEAD endpoints)\n2025-08-23 08:03:57,020 - backend.core.app - INFO - \u2705 ML Model Registry routes included (/api/models/* endpoints)\n2025-08-23 08:03:57,021 - backend.core.app - INFO - \u2705 Data ingestion routes included (/api/v1/ingestion/* endpoints)\n2025-08-23 08:03:57,025 - backend.core.app - INFO - \u2705 Enterprise model registry routes included (/api/models/enterprise/* endpoints)\n2025-08-23 08:03:57,028 - backend.core.app - INFO - \u2705 Alert engine routes included (/api/alert-engine/* endpoints)\n2025-08-23 08:03:57,032 - backend.core.app - INFO - \u2705 PropFinder routes included (/api/propfinder/* endpoints)\n2025-08-23 08:03:57,033 - backend.core.app - WARNING - \u26a0\ufe0f Could not import multiple_sportsbook_routes: cannot import name 'RateLimiter' from 'backend.middleware.rate_limit' (C:\\Users\\bcmad\\Downloads\\A1Betting7-13.2\\backend\\middleware\\rate_limit.py)\n2025-08-23 08:03:57,036 - backend.core.app - INFO - \u2705 Sportsbook compatibility router mounted at /api/sportsbook\n2025-08-23 08:03:57,036 - backend.core.app - INFO - \U0001f50d Bootstrap validation scheduled on startup\n2025-08-23 08:03:57,036 - backend.core.app - INFO - \U0001f3e5 Health endpoints normalized: /api/health, /health, /api/v2/health -> identical envelope format\n2025-08-23 08:03:57,036 - backend.core.app - INFO - \u2705 A1Betting canonical app created successfully
----------------------------- Captured log setup ------------------------------
INFO     backend.core.app:app.py:65 \U0001f680 Creating A1Betting canonical app...\nINFO     backend.core.app:app.py:104 \u2705 Request ID correlation middleware added\nINFO     backend.core.app:app.py:114 \u2705 Distributed trace correlation middleware added\nINFO     backend.core.app:app.py:126 \u2705 Structured logging middleware added\nINFO     backend.core.app:app.py:146 \u2705 Prometheus metrics middleware added\nINFO     backend.core.app:app.py:167 \u2705 Payload guard middleware added: max_size=262144 bytes, enforce_json=True, enabled=True\nINFO     backend.middleware.rate_limit:rate_limit.py:90 Rate limiting disabled\nINFO     backend.core.app:app.py:202 \u2705 Rate limiting middleware added: 100/min, burst=200, enabled=False\nINFO     backend.core.app:app.py:244 \u2705 Security headers middleware added: [HSTS, CSP(report-only), COOP, COEP], x_frame_options=DENY\nINFO     backend.core.app:app.py:259 \u2705 Legacy endpoint middleware added for usage telemetry and deprecation controls\nINFO     backend.exceptions.handlers:handlers.py:235 \u2705 PayloadRejectionError handler registered\nINFO     backend.exceptions.handlers:handlers.py:250 \u2705 All exception handlers registered with structured error taxonomy\nINFO     backend.core.app:app.py:269 \u2705 Centralized exception handlers registered\nINFO     backend.core.app:app.py:332 \u2705 PR11 Enhanced WebSocket client route included (/ws/client)\nINFO     backend.core.app:app.py:702 \u2705 Auth routes also exposed at root (/auth/*) for compatibility\nINFO     backend.core.app:app.py:706 \u2705 Auth and users routes included (auth with /api prefix)\nINFO     backend.core.app:app.py:714 \u2705 Diagnostics routes included (/api/v2/diagnostics/health, /api/v2/diagnostics/system)\nINFO     backend.core.app:app.py:763 \u2705 Meta cache routes included (/api/v2/meta/cache-stats, /api/v2/meta/cache-health)\nINFO     backend.core.app:app.py:773 \u2705 Legacy meta routes included (/api/v2/meta/legacy-usage, /api/v2/meta/migration-readiness)\nERROR    backend.core.app:app.py:788 \u274c Failed to register CSP report routes: Invalid args for response field! Hint: check that <class 'logging.Logger'> is a valid Pydantic field type. If you are using a return type annotation that is not a valid Pydantic field (e.g. Union[Response, dict, None]) you can disable generating the response model from the type annotation with the path operation decorator parameter response_model=None. Read more: https://fastapi.tiangolo.com/tutorial/response-model/\nINFO     backend.core.app:app.py:794 \u2705 Trace test routes included (/api/trace/* endpoints)\nINFO     backend.core.app:app.py:804 \u2705 Model inference routes included (/api/v2/models/* endpoints)\nINFO     backend.core.app:app.py:814 \u2705 Observability events routes included (/api/v2/observability/* endpoints)\nINFO     backend.core.app:app.py:824 \u2705 Admin control routes included (/api/v2/models/shadow/* and /api/v2/models/admin/* endpoints)\nINFO     backend.core.app:app.py:834 \u2705 Enhanced WebSocket routes included (/ws/v2/* endpoints)\nINFO     backend.core.app:app.py:844 \u2705 WebSocket logging routes included (/api/websocket/* endpoints)\nINFO     backend.core.app:app.py:854 \u2705 Version routes included (/api/version/* endpoints)\nINFO     backend.core.app:app.py:864 \u2705 WebVitals pipeline routes included (/api/metrics/v1/* endpoints)\nINFO     backend.core.app:app.py:874 \u2705 Enhanced ML routes included (/api/enhanced-ml/* endpoints)\nINFO     backend.core.app:app.py:986 \u2705 Fallback enhanced-ml compatibility router mounted at /api/enhanced-ml\nINFO     backend.core.app:app.py:995 \u2705 Consolidated PrizePicks routes included (/api/v2/prizepicks/* endpoints)\nINFO     backend.core.app:app.py:1005 \u2705 Consolidated ML routes included (/api/v2/ml/* endpoints)\nERROR    backend.core.app:app.py:1019 \u274c Failed to register consolidated Admin routes: parameter without a default follows parameter with a default (consolidated_admin.py, line 165)\nINFO     backend.core.app:app.py:1025 \u2705 Odds & Line Movement routes included (/v1/odds/* endpoints)\nINFO     backend.core.app:app.py:1066 \u2705 Advanced-Kelly compatibility router mounted at /api/advanced-kelly\nERROR    backend.core.app:app.py:1078 \u274c Failed to register Risk Management & Personalization routes: 'NoneType' object has no attribute 'alert_evaluation_interval_seconds'\nINFO     backend.core.app:app.py:1084 \u2705 Dependencies Health routes included (/api/dependencies/* endpoints)\nINFO     backend.core.app:app.py:1094 \u2705 Provider Resilience routes included (/api/provider-resilience/* endpoints)\nINFO     backend.core.app:app.py:1104 \u2705 System capabilities routes included (/api/system/* endpoints)\nINFO     backend.core.app:app.py:1114 \u2705 Real-time market streaming routes included (/streaming/* endpoints)\nINFO     backend.core.app:app.py:1124 \u2705 Security HEAD endpoints included (/api/* HEAD endpoints)\nINFO     backend.core.app:app.py:1134 \u2705 ML Model Registry routes included (/api/models/* endpoints)\nINFO     backend.core.app:app.py:1144 \u2705 Data ingestion routes included (/api/v1/ingestion/* endpoints)\nINFO     backend.core.app:app.py:1154 \u2705 Enterprise model registry routes included (/api/models/enterprise/* endpoints)\nINFO     backend.core.app:app.py:1199 \u2705 Alert engine routes included (/api/alert-engine/* endpoints)\nINFO     backend.core.app:app.py:1209 \u2705 PropFinder routes included (/api/propfinder/* endpoints)\nWARNING  backend.core.app:app.py:1221 \u26a0\ufe0f Could not import multiple_sportsbook_routes: cannot import name 'RateLimiter' from 'backend.middleware.rate_limit' (C:\\Users\\bcmad\\Downloads\\A1Betting7-13.2\\backend\\middleware\\rate_limit.py)\nINFO     backend.core.app:app.py:1495 \u2705 Sportsbook compatibility router mounted at /api/sportsbook\nINFO     backend.core.app:app.py:1527 \U0001f50d Bootstrap validation scheduled on startup\nINFO     backend.core.app:app.py:1535 \U0001f3e5 Health endpoints normalized: /api/health, /health, /api/v2/health -> identical envelope format\nINFO     backend.core.app:app.py:1536 \u2705 A1Betting canonical app created successfully
_________ TestMLBExtrasRoutes.test_get_live_game_stats_scheduled_game _________
tests\backend\routes\test_mlb_extras.py:350: in test_get_live_game_stats_scheduled_game
    with patch('backend.routes.mlb_extras.get_live_game_data', return_value=mock_scheduled_game):
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
C:\Python313\Lib\unittest\mock.py:1497: in __enter__
    original, local = self.get_original()
                      ^^^^^^^^^^^^^^^^^^^
C:\Python313\Lib\unittest\mock.py:1467: in get_original
    raise AttributeError(
E   AttributeError: <module 'backend.routes.mlb_extras' from 'C:\\Users\\bcmad\\Downloads\\A1Betting7-13.2\\backend\\routes\\mlb_extras.py'> does not have the attribute 'get_live_game_data'
---------------------------- Captured stderr setup ----------------------------
2025-08-23 08:03:57,072 - backend.core.app - INFO - \U0001f680 Creating A1Betting canonical app...\n2025-08-23 08:03:57,072 - backend.core.app - INFO - \u2705 Request ID correlation middleware added\n2025-08-23 08:03:57,072 - backend.core.app - INFO - \u2705 Distributed trace correlation middleware added\n2025-08-23 08:03:57,072 - backend.core.app - INFO - \u2705 Structured logging middleware added\n2025-08-23 08:03:57,073 - backend.core.app - INFO - \u2705 Prometheus metrics middleware added\n2025-08-23 08:03:57,073 - backend.core.app - INFO - \u2705 Payload guard middleware added: max_size=262144 bytes, enforce_json=True, enabled=True\n2025-08-23 08:03:57,073 - backend.middleware.rate_limit - INFO - Rate limiting disabled\n2025-08-23 08:03:57,073 - backend.core.app - INFO - \u2705 Rate limiting middleware added: 100/min, burst=200, enabled=False\n2025-08-23 08:03:57,073 - backend.core.app - INFO - \u2705 Security headers middleware added: [HSTS, CSP(report-only), COOP, COEP], x_frame_options=DENY\n2025-08-23 08:03:57,073 - backend.core.app - INFO - \u2705 Legacy endpoint middleware added for usage telemetry and deprecation controls\n2025-08-23 08:03:57,073 - backend.exceptions.handlers - INFO - \u2705 PayloadRejectionError handler registered\n2025-08-23 08:03:57,073 - backend.exceptions.handlers - INFO - \u2705 All exception handlers registered with structured error taxonomy\n2025-08-23 08:03:57,073 - backend.core.app - INFO - \u2705 Centralized exception handlers registered\n2025-08-23 08:03:57,074 - backend.core.app - INFO - \u2705 PR11 Enhanced WebSocket client route included (/ws/client)\n2025-08-23 08:03:57,078 - backend.core.app - INFO - \u2705 Auth routes also exposed at root (/auth/*) for compatibility\n2025-08-23 08:03:57,078 - backend.core.app - INFO - \u2705 Auth and users routes included (auth with /api prefix)\n2025-08-23 08:03:57,079 - backend.core.app - INFO - \u2705 Diagnostics routes included (/api/v2/diagnostics/health, /api/v2/diagnostics/system)\n2025-08-23 08:03:57,081 - backend.core.app - INFO - \u2705 Meta cache routes included (/api/v2/meta/cache-stats, /api/v2/meta/cache-health)\n2025-08-23 08:03:57,082 - backend.core.app - INFO - \u2705 Legacy meta routes included (/api/v2/meta/legacy-usage, /api/v2/meta/migration-readiness)\n2025-08-23 08:03:57,084 - backend.core.app - ERROR - \u274c Failed to register CSP report routes: Invalid args for response field! Hint: check that <class 'logging.Logger'> is a valid Pydantic field type. If you are using a return type annotation that is not a valid Pydantic field (e.g. Union[Response, dict, None]) you can disable generating the response model from the type annotation with the path operation decorator parameter response_model=None. Read more: https://fastapi.tiangolo.com/tutorial/response-model/\n2025-08-23 08:03:57,084 - backend.core.app - INFO - \u2705 Trace test routes included (/api/trace/* endpoints)\n2025-08-23 08:03:57,086 - backend.core.app - INFO - \u2705 Model inference routes included (/api/v2/models/* endpoints)\n2025-08-23 08:03:57,088 - backend.core.app - INFO - \u2705 Observability events routes included (/api/v2/observability/* endpoints)\n2025-08-23 08:03:57,089 - backend.core.app - INFO - \u2705 Admin control routes included (/api/v2/models/shadow/* and /api/v2/models/admin/* endpoints)\n2025-08-23 08:03:57,091 - backend.core.app - INFO - \u2705 Enhanced WebSocket routes included (/ws/v2/* endpoints)\n2025-08-23 08:03:57,092 - backend.core.app - INFO - \u2705 WebSocket logging routes included (/api/websocket/* endpoints)\n2025-08-23 08:03:57,093 - backend.core.app - INFO - \u2705 Version routes included (/api/version/* endpoints)\n2025-08-23 08:03:57,093 - backend.core.app - INFO - \u2705 WebVitals pipeline routes included (/api/metrics/v1/* endpoints)\n2025-08-23 08:03:57,097 - backend.core.app - INFO - \u2705 Enhanced ML routes included (/api/enhanced-ml/* endpoints)\n2025-08-23 08:03:57,098 - backend.core.app - INFO - \u2705 Fallback enhanced-ml compatibility router mounted at /api/enhanced-ml\n2025-08-23 08:03:57,103 - backend.core.app - INFO - \u2705 Consolidated PrizePicks routes included (/api/v2/prizepicks/* endpoints)\n2025-08-23 08:03:57,106 - backend.core.app - INFO - \u2705 Consolidated ML routes included (/api/v2/ml/* endpoints)\n2025-08-23 08:03:57,109 - backend.core.app - ERROR - \u274c Failed to register consolidated Admin routes: parameter without a default follows parameter with a default (consolidated_admin.py, line 165)\n2025-08-23 08:03:57,112 - backend.core.app - INFO - \u2705 Odds & Line Movement routes included (/v1/odds/* endpoints)\n2025-08-23 08:03:57,114 - backend.core.app - INFO - \u2705 Advanced-Kelly compatibility router mounted at /api/advanced-kelly\n2025-08-23 08:03:57,116 - backend.core.app - ERROR - \u274c Failed to register Risk Management & Personalization routes: 'NoneType' object has no attribute 'alert_evaluation_interval_seconds'\n2025-08-23 08:03:57,118 - backend.core.app - INFO - \u2705 Dependencies Health routes included (/api/dependencies/* endpoints)\n2025-08-23 08:03:57,120 - backend.core.app - INFO - \u2705 Provider Resilience routes included (/api/provider-resilience/* endpoints)\n2025-08-23 08:03:57,121 - backend.core.app - INFO - \u2705 System capabilities routes included (/api/system/* endpoints)\n2025-08-23 08:03:57,123 - backend.core.app - INFO - \u2705 Real-time market streaming routes included (/streaming/* endpoints)\n2025-08-23 08:03:57,124 - backend.core.app - INFO - \u2705 Security HEAD endpoints included (/api/* HEAD endpoints)\n2025-08-23 08:03:57,125 - backend.core.app - INFO - \u2705 ML Model Registry routes included (/api/models/* endpoints)\n2025-08-23 08:03:57,126 - backend.core.app - INFO - \u2705 Data ingestion routes included (/api/v1/ingestion/* endpoints)\n2025-08-23 08:03:57,130 - backend.core.app - INFO - \u2705 Enterprise model registry routes included (/api/models/enterprise/* endpoints)\n2025-08-23 08:03:57,133 - backend.core.app - INFO - \u2705 Alert engine routes included (/api/alert-engine/* endpoints)\n2025-08-23 08:03:57,137 - backend.core.app - INFO - \u2705 PropFinder routes included (/api/propfinder/* endpoints)\n2025-08-23 08:03:57,138 - backend.core.app - WARNING - \u26a0\ufe0f Could not import multiple_sportsbook_routes: cannot import name 'RateLimiter' from 'backend.middleware.rate_limit' (C:\\Users\\bcmad\\Downloads\\A1Betting7-13.2\\backend\\middleware\\rate_limit.py)\n2025-08-23 08:03:57,140 - backend.core.app - INFO - \u2705 Sportsbook compatibility router mounted at /api/sportsbook\n2025-08-23 08:03:57,141 - backend.core.app - INFO - \U0001f50d Bootstrap validation scheduled on startup\n2025-08-23 08:03:57,141 - backend.core.app - INFO - \U0001f3e5 Health endpoints normalized: /api/health, /health, /api/v2/health -> identical envelope format\n2025-08-23 08:03:57,141 - backend.core.app - INFO - \u2705 A1Betting canonical app created successfully
----------------------------- Captured log setup ------------------------------
INFO     backend.core.app:app.py:65 \U0001f680 Creating A1Betting canonical app...\nINFO     backend.core.app:app.py:104 \u2705 Request ID correlation middleware added\nINFO     backend.core.app:app.py:114 \u2705 Distributed trace correlation middleware added\nINFO     backend.core.app:app.py:126 \u2705 Structured logging middleware added\nINFO     backend.core.app:app.py:146 \u2705 Prometheus metrics middleware added\nINFO     backend.core.app:app.py:167 \u2705 Payload guard middleware added: max_size=262144 bytes, enforce_json=True, enabled=True\nINFO     backend.middleware.rate_limit:rate_limit.py:90 Rate limiting disabled\nINFO     backend.core.app:app.py:202 \u2705 Rate limiting middleware added: 100/min, burst=200, enabled=False\nINFO     backend.core.app:app.py:244 \u2705 Security headers middleware added: [HSTS, CSP(report-only), COOP, COEP], x_frame_options=DENY\nINFO     backend.core.app:app.py:259 \u2705 Legacy endpoint middleware added for usage telemetry and deprecation controls\nINFO     backend.exceptions.handlers:handlers.py:235 \u2705 PayloadRejectionError handler registered\nINFO     backend.exceptions.handlers:handlers.py:250 \u2705 All exception handlers registered with structured error taxonomy\nINFO     backend.core.app:app.py:269 \u2705 Centralized exception handlers registered\nINFO     backend.core.app:app.py:332 \u2705 PR11 Enhanced WebSocket client route included (/ws/client)\nINFO     backend.core.app:app.py:702 \u2705 Auth routes also exposed at root (/auth/*) for compatibility\nINFO     backend.core.app:app.py:706 \u2705 Auth and users routes included (auth with /api prefix)\nINFO     backend.core.app:app.py:714 \u2705 Diagnostics routes included (/api/v2/diagnostics/health, /api/v2/diagnostics/system)\nINFO     backend.core.app:app.py:763 \u2705 Meta cache routes included (/api/v2/meta/cache-stats, /api/v2/meta/cache-health)\nINFO     backend.core.app:app.py:773 \u2705 Legacy meta routes included (/api/v2/meta/legacy-usage, /api/v2/meta/migration-readiness)\nERROR    backend.core.app:app.py:788 \u274c Failed to register CSP report routes: Invalid args for response field! Hint: check that <class 'logging.Logger'> is a valid Pydantic field type. If you are using a return type annotation that is not a valid Pydantic field (e.g. Union[Response, dict, None]) you can disable generating the response model from the type annotation with the path operation decorator parameter response_model=None. Read more: https://fastapi.tiangolo.com/tutorial/response-model/\nINFO     backend.core.app:app.py:794 \u2705 Trace test routes included (/api/trace/* endpoints)\nINFO     backend.core.app:app.py:804 \u2705 Model inference routes included (/api/v2/models/* endpoints)\nINFO     backend.core.app:app.py:814 \u2705 Observability events routes included (/api/v2/observability/* endpoints)\nINFO     backend.core.app:app.py:824 \u2705 Admin control routes included (/api/v2/models/shadow/* and /api/v2/models/admin/* endpoints)\nINFO     backend.core.app:app.py:834 \u2705 Enhanced WebSocket routes included (/ws/v2/* endpoints)\nINFO     backend.core.app:app.py:844 \u2705 WebSocket logging routes included (/api/websocket/* endpoints)\nINFO     backend.core.app:app.py:854 \u2705 Version routes included (/api/version/* endpoints)\nINFO     backend.core.app:app.py:864 \u2705 WebVitals pipeline routes included (/api/metrics/v1/* endpoints)\nINFO     backend.core.app:app.py:874 \u2705 Enhanced ML routes included (/api/enhanced-ml/* endpoints)\nINFO     backend.core.app:app.py:986 \u2705 Fallback enhanced-ml compatibility router mounted at /api/enhanced-ml\nINFO     backend.core.app:app.py:995 \u2705 Consolidated PrizePicks routes included (/api/v2/prizepicks/* endpoints)\nINFO     backend.core.app:app.py:1005 \u2705 Consolidated ML routes included (/api/v2/ml/* endpoints)\nERROR    backend.core.app:app.py:1019 \u274c Failed to register consolidated Admin routes: parameter without a default follows parameter with a default (consolidated_admin.py, line 165)\nINFO     backend.core.app:app.py:1025 \u2705 Odds & Line Movement routes included (/v1/odds/* endpoints)\nINFO     backend.core.app:app.py:1066 \u2705 Advanced-Kelly compatibility router mounted at /api/advanced-kelly\nERROR    backend.core.app:app.py:1078 \u274c Failed to register Risk Management & Personalization routes: 'NoneType' object has no attribute 'alert_evaluation_interval_seconds'\nINFO     backend.core.app:app.py:1084 \u2705 Dependencies Health routes included (/api/dependencies/* endpoints)\nINFO     backend.core.app:app.py:1094 \u2705 Provider Resilience routes included (/api/provider-resilience/* endpoints)\nINFO     backend.core.app:app.py:1104 \u2705 System capabilities routes included (/api/system/* endpoints)\nINFO     backend.core.app:app.py:1114 \u2705 Real-time market streaming routes included (/streaming/* endpoints)\nINFO     backend.core.app:app.py:1124 \u2705 Security HEAD endpoints included (/api/* HEAD endpoints)\nINFO     backend.core.app:app.py:1134 \u2705 ML Model Registry routes included (/api/models/* endpoints)\nINFO     backend.core.app:app.py:1144 \u2705 Data ingestion routes included (/api/v1/ingestion/* endpoints)\nINFO     backend.core.app:app.py:1154 \u2705 Enterprise model registry routes included (/api/models/enterprise/* endpoints)\nINFO     backend.core.app:app.py:1199 \u2705 Alert engine routes included (/api/alert-engine/* endpoints)\nINFO     backend.core.app:app.py:1209 \u2705 PropFinder routes included (/api/propfinder/* endpoints)\nWARNING  backend.core.app:app.py:1221 \u26a0\ufe0f Could not import multiple_sportsbook_routes: cannot import name 'RateLimiter' from 'backend.middleware.rate_limit' (C:\\Users\\bcmad\\Downloads\\A1Betting7-13.2\\backend\\middleware\\rate_limit.py)\nINFO     backend.core.app:app.py:1495 \u2705 Sportsbook compatibility router mounted at /api/sportsbook\nINFO     backend.core.app:app.py:1527 \U0001f50d Bootstrap validation scheduled on startup\nINFO     backend.core.app:app.py:1535 \U0001f3e5 Health endpoints normalized: /api/health, /health, /api/v2/health -> identical envelope format\nINFO     backend.core.app:app.py:1536 \u2705 A1Betting canonical app created successfully
______________ TestMLBExtrasRoutes.test_get_play_by_play_success ______________
tests\backend\routes\test_mlb_extras.py:401: in test_get_play_by_play_success
    with patch('backend.routes.mlb_extras.get_play_by_play_data', return_value=mock_play_by_play):
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
C:\Python313\Lib\unittest\mock.py:1497: in __enter__
    original, local = self.get_original()
                      ^^^^^^^^^^^^^^^^^^^
C:\Python313\Lib\unittest\mock.py:1467: in get_original
    raise AttributeError(
E   AttributeError: <module 'backend.routes.mlb_extras' from 'C:\\Users\\bcmad\\Downloads\\A1Betting7-13.2\\backend\\routes\\mlb_extras.py'> does not have the attribute 'get_play_by_play_data'
---------------------------- Captured stderr setup ----------------------------
2025-08-23 08:03:57,178 - backend.core.app - INFO - \U0001f680 Creating A1Betting canonical app...\n2025-08-23 08:03:57,178 - backend.core.app - INFO - \u2705 Request ID correlation middleware added\n2025-08-23 08:03:57,178 - backend.core.app - INFO - \u2705 Distributed trace correlation middleware added\n2025-08-23 08:03:57,178 - backend.core.app - INFO - \u2705 Structured logging middleware added\n2025-08-23 08:03:57,178 - backend.core.app - INFO - \u2705 Prometheus metrics middleware added\n2025-08-23 08:03:57,178 - backend.core.app - INFO - \u2705 Payload guard middleware added: max_size=262144 bytes, enforce_json=True, enabled=True\n2025-08-23 08:03:57,178 - backend.middleware.rate_limit - INFO - Rate limiting disabled\n2025-08-23 08:03:57,178 - backend.core.app - INFO - \u2705 Rate limiting middleware added: 100/min, burst=200, enabled=False\n2025-08-23 08:03:57,178 - backend.core.app - INFO - \u2705 Security headers middleware added: [HSTS, CSP(report-only), COOP, COEP], x_frame_options=DENY\n2025-08-23 08:03:57,178 - backend.core.app - INFO - \u2705 Legacy endpoint middleware added for usage telemetry and deprecation controls\n2025-08-23 08:03:57,178 - backend.exceptions.handlers - INFO - \u2705 PayloadRejectionError handler registered\n2025-08-23 08:03:57,179 - backend.exceptions.handlers - INFO - \u2705 All exception handlers registered with structured error taxonomy\n2025-08-23 08:03:57,179 - backend.core.app - INFO - \u2705 Centralized exception handlers registered\n2025-08-23 08:03:57,180 - backend.core.app - INFO - \u2705 PR11 Enhanced WebSocket client route included (/ws/client)\n2025-08-23 08:03:57,184 - backend.core.app - INFO - \u2705 Auth routes also exposed at root (/auth/*) for compatibility\n2025-08-23 08:03:57,184 - backend.core.app - INFO - \u2705 Auth and users routes included (auth with /api prefix)\n2025-08-23 08:03:57,185 - backend.core.app - INFO - \u2705 Diagnostics routes included (/api/v2/diagnostics/health, /api/v2/diagnostics/system)\n2025-08-23 08:03:57,186 - backend.core.app - INFO - \u2705 Meta cache routes included (/api/v2/meta/cache-stats, /api/v2/meta/cache-health)\n2025-08-23 08:03:57,187 - backend.core.app - INFO - \u2705 Legacy meta routes included (/api/v2/meta/legacy-usage, /api/v2/meta/migration-readiness)\n2025-08-23 08:03:57,189 - backend.core.app - ERROR - \u274c Failed to register CSP report routes: Invalid args for response field! Hint: check that <class 'logging.Logger'> is a valid Pydantic field type. If you are using a return type annotation that is not a valid Pydantic field (e.g. Union[Response, dict, None]) you can disable generating the response model from the type annotation with the path operation decorator parameter response_model=None. Read more: https://fastapi.tiangolo.com/tutorial/response-model/\n2025-08-23 08:03:57,189 - backend.core.app - INFO - \u2705 Trace test routes included (/api/trace/* endpoints)\n2025-08-23 08:03:57,191 - backend.core.app - INFO - \u2705 Model inference routes included (/api/v2/models/* endpoints)\n2025-08-23 08:03:57,192 - backend.core.app - INFO - \u2705 Observability events routes included (/api/v2/observability/* endpoints)\n2025-08-23 08:03:57,193 - backend.core.app - INFO - \u2705 Admin control routes included (/api/v2/models/shadow/* and /api/v2/models/admin/* endpoints)\n2025-08-23 08:03:57,195 - backend.core.app - INFO - \u2705 Enhanced WebSocket routes included (/ws/v2/* endpoints)\n2025-08-23 08:03:57,196 - backend.core.app - INFO - \u2705 WebSocket logging routes included (/api/websocket/* endpoints)\n2025-08-23 08:03:57,197 - backend.core.app - INFO - \u2705 Version routes included (/api/version/* endpoints)\n2025-08-23 08:03:57,197 - backend.core.app - INFO - \u2705 WebVitals pipeline routes included (/api/metrics/v1/* endpoints)\n2025-08-23 08:03:57,202 - backend.core.app - INFO - \u2705 Enhanced ML routes included (/api/enhanced-ml/* endpoints)\n2025-08-23 08:03:57,202 - backend.core.app - INFO - \u2705 Fallback enhanced-ml compatibility router mounted at /api/enhanced-ml\n2025-08-23 08:03:57,207 - backend.core.app - INFO - \u2705 Consolidated PrizePicks routes included (/api/v2/prizepicks/* endpoints)\n2025-08-23 08:03:57,211 - backend.core.app - INFO - \u2705 Consolidated ML routes included (/api/v2/ml/* endpoints)\n2025-08-23 08:03:57,213 - backend.core.app - ERROR - \u274c Failed to register consolidated Admin routes: parameter without a default follows parameter with a default (consolidated_admin.py, line 165)\n2025-08-23 08:03:57,216 - backend.core.app - INFO - \u2705 Odds & Line Movement routes included (/v1/odds/* endpoints)\n2025-08-23 08:03:57,218 - backend.core.app - INFO - \u2705 Advanced-Kelly compatibility router mounted at /api/advanced-kelly\n2025-08-23 08:03:57,220 - backend.core.app - ERROR - \u274c Failed to register Risk Management & Personalization routes: 'NoneType' object has no attribute 'alert_evaluation_interval_seconds'\n2025-08-23 08:03:57,222 - backend.core.app - INFO - \u2705 Dependencies Health routes included (/api/dependencies/* endpoints)\n2025-08-23 08:03:57,224 - backend.core.app - INFO - \u2705 Provider Resilience routes included (/api/provider-resilience/* endpoints)\n2025-08-23 08:03:57,225 - backend.core.app - INFO - \u2705 System capabilities routes included (/api/system/* endpoints)\n2025-08-23 08:03:57,227 - backend.core.app - INFO - \u2705 Real-time market streaming routes included (/streaming/* endpoints)\n2025-08-23 08:03:57,227 - backend.core.app - INFO - \u2705 Security HEAD endpoints included (/api/* HEAD endpoints)\n2025-08-23 08:03:57,229 - backend.core.app - INFO - \u2705 ML Model Registry routes included (/api/models/* endpoints)\n2025-08-23 08:03:57,230 - backend.core.app - INFO - \u2705 Data ingestion routes included (/api/v1/ingestion/* endpoints)\n2025-08-23 08:03:57,233 - backend.core.app - INFO - \u2705 Enterprise model registry routes included (/api/models/enterprise/* endpoints)\n2025-08-23 08:03:57,237 - backend.core.app - INFO - \u2705 Alert engine routes included (/api/alert-engine/* endpoints)\n2025-08-23 08:03:57,241 - backend.core.app - INFO - \u2705 PropFinder routes included (/api/propfinder/* endpoints)\n2025-08-23 08:03:57,242 - backend.core.app - WARNING - \u26a0\ufe0f Could not import multiple_sportsbook_routes: cannot import name 'RateLimiter' from 'backend.middleware.rate_limit' (C:\\Users\\bcmad\\Downloads\\A1Betting7-13.2\\backend\\middleware\\rate_limit.py)\n2025-08-23 08:03:57,244 - backend.core.app - INFO - \u2705 Sportsbook compatibility router mounted at /api/sportsbook\n2025-08-23 08:03:57,244 - backend.core.app - INFO - \U0001f50d Bootstrap validation scheduled on startup\n2025-08-23 08:03:57,244 - backend.core.app - INFO - \U0001f3e5 Health endpoints normalized: /api/health, /health, /api/v2/health -> identical envelope format\n2025-08-23 08:03:57,244 - backend.core.app - INFO - \u2705 A1Betting canonical app created successfully
----------------------------- Captured log setup ------------------------------
INFO     backend.core.app:app.py:65 \U0001f680 Creating A1Betting canonical app...\nINFO     backend.core.app:app.py:104 \u2705 Request ID correlation middleware added\nINFO     backend.core.app:app.py:114 \u2705 Distributed trace correlation middleware added\nINFO     backend.core.app:app.py:126 \u2705 Structured logging middleware added\nINFO     backend.core.app:app.py:146 \u2705 Prometheus metrics middleware added\nINFO     backend.core.app:app.py:167 \u2705 Payload guard middleware added: max_size=262144 bytes, enforce_json=True, enabled=True\nINFO     backend.middleware.rate_limit:rate_limit.py:90 Rate limiting disabled\nINFO     backend.core.app:app.py:202 \u2705 Rate limiting middleware added: 100/min, burst=200, enabled=False\nINFO     backend.core.app:app.py:244 \u2705 Security headers middleware added: [HSTS, CSP(report-only), COOP, COEP], x_frame_options=DENY\nINFO     backend.core.app:app.py:259 \u2705 Legacy endpoint middleware added for usage telemetry and deprecation controls\nINFO     backend.exceptions.handlers:handlers.py:235 \u2705 PayloadRejectionError handler registered\nINFO     backend.exceptions.handlers:handlers.py:250 \u2705 All exception handlers registered with structured error taxonomy\nINFO     backend.core.app:app.py:269 \u2705 Centralized exception handlers registered\nINFO     backend.core.app:app.py:332 \u2705 PR11 Enhanced WebSocket client route included (/ws/client)\nINFO     backend.core.app:app.py:702 \u2705 Auth routes also exposed at root (/auth/*) for compatibility\nINFO     backend.core.app:app.py:706 \u2705 Auth and users routes included (auth with /api prefix)\nINFO     backend.core.app:app.py:714 \u2705 Diagnostics routes included (/api/v2/diagnostics/health, /api/v2/diagnostics/system)\nINFO     backend.core.app:app.py:763 \u2705 Meta cache routes included (/api/v2/meta/cache-stats, /api/v2/meta/cache-health)\nINFO     backend.core.app:app.py:773 \u2705 Legacy meta routes included (/api/v2/meta/legacy-usage, /api/v2/meta/migration-readiness)\nERROR    backend.core.app:app.py:788 \u274c Failed to register CSP report routes: Invalid args for response field! Hint: check that <class 'logging.Logger'> is a valid Pydantic field type. If you are using a return type annotation that is not a valid Pydantic field (e.g. Union[Response, dict, None]) you can disable generating the response model from the type annotation with the path operation decorator parameter response_model=None. Read more: https://fastapi.tiangolo.com/tutorial/response-model/\nINFO     backend.core.app:app.py:794 \u2705 Trace test routes included (/api/trace/* endpoints)\nINFO     backend.core.app:app.py:804 \u2705 Model inference routes included (/api/v2/models/* endpoints)\nINFO     backend.core.app:app.py:814 \u2705 Observability events routes included (/api/v2/observability/* endpoints)\nINFO     backend.core.app:app.py:824 \u2705 Admin control routes included (/api/v2/models/shadow/* and /api/v2/models/admin/* endpoints)\nINFO     backend.core.app:app.py:834 \u2705 Enhanced WebSocket routes included (/ws/v2/* endpoints)\nINFO     backend.core.app:app.py:844 \u2705 WebSocket logging routes included (/api/websocket/* endpoints)\nINFO     backend.core.app:app.py:854 \u2705 Version routes included (/api/version/* endpoints)\nINFO     backend.core.app:app.py:864 \u2705 WebVitals pipeline routes included (/api/metrics/v1/* endpoints)\nINFO     backend.core.app:app.py:874 \u2705 Enhanced ML routes included (/api/enhanced-ml/* endpoints)\nINFO     backend.core.app:app.py:986 \u2705 Fallback enhanced-ml compatibility router mounted at /api/enhanced-ml\nINFO     backend.core.app:app.py:995 \u2705 Consolidated PrizePicks routes included (/api/v2/prizepicks/* endpoints)\nINFO     backend.core.app:app.py:1005 \u2705 Consolidated ML routes included (/api/v2/ml/* endpoints)\nERROR    backend.core.app:app.py:1019 \u274c Failed to register consolidated Admin routes: parameter without a default follows parameter with a default (consolidated_admin.py, line 165)\nINFO     backend.core.app:app.py:1025 \u2705 Odds & Line Movement routes included (/v1/odds/* endpoints)\nINFO     backend.core.app:app.py:1066 \u2705 Advanced-Kelly compatibility router mounted at /api/advanced-kelly\nERROR    backend.core.app:app.py:1078 \u274c Failed to register Risk Management & Personalization routes: 'NoneType' object has no attribute 'alert_evaluation_interval_seconds'\nINFO     backend.core.app:app.py:1084 \u2705 Dependencies Health routes included (/api/dependencies/* endpoints)\nINFO     backend.core.app:app.py:1094 \u2705 Provider Resilience routes included (/api/provider-resilience/* endpoints)\nINFO     backend.core.app:app.py:1104 \u2705 System capabilities routes included (/api/system/* endpoints)\nINFO     backend.core.app:app.py:1114 \u2705 Real-time market streaming routes included (/streaming/* endpoints)\nINFO     backend.core.app:app.py:1124 \u2705 Security HEAD endpoints included (/api/* HEAD endpoints)\nINFO     backend.core.app:app.py:1134 \u2705 ML Model Registry routes included (/api/models/* endpoints)\nINFO     backend.core.app:app.py:1144 \u2705 Data ingestion routes included (/api/v1/ingestion/* endpoints)\nINFO     backend.core.app:app.py:1154 \u2705 Enterprise model registry routes included (/api/models/enterprise/* endpoints)\nINFO     backend.core.app:app.py:1199 \u2705 Alert engine routes included (/api/alert-engine/* endpoints)\nINFO     backend.core.app:app.py:1209 \u2705 PropFinder routes included (/api/propfinder/* endpoints)\nWARNING  backend.core.app:app.py:1221 \u26a0\ufe0f Could not import multiple_sportsbook_routes: cannot import name 'RateLimiter' from 'backend.middleware.rate_limit' (C:\\Users\\bcmad\\Downloads\\A1Betting7-13.2\\backend\\middleware\\rate_limit.py)\nINFO     backend.core.app:app.py:1495 \u2705 Sportsbook compatibility router mounted at /api/sportsbook\nINFO     backend.core.app:app.py:1527 \U0001f50d Bootstrap validation scheduled on startup\nINFO     backend.core.app:app.py:1535 \U0001f3e5 Health endpoints normalized: /api/health, /health, /api/v2/health -> identical envelope format\nINFO     backend.core.app:app.py:1536 \u2705 A1Betting canonical app created successfully
___________ TestMLBExtrasRoutes.test_get_play_by_play_empty_events ____________
tests\backend\routes\test_mlb_extras.py:428: in test_get_play_by_play_empty_events
    with patch('backend.routes.mlb_extras.get_play_by_play_data', return_value=mock_empty_play_by_play):
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
C:\Python313\Lib\unittest\mock.py:1497: in __enter__
    original, local = self.get_original()
                      ^^^^^^^^^^^^^^^^^^^
C:\Python313\Lib\unittest\mock.py:1467: in get_original
    raise AttributeError(
E   AttributeError: <module 'backend.routes.mlb_extras' from 'C:\\Users\\bcmad\\Downloads\\A1Betting7-13.2\\backend\\routes\\mlb_extras.py'> does not have the attribute 'get_play_by_play_data'
---------------------------- Captured stderr setup ----------------------------
2025-08-23 08:03:57,279 - backend.core.app - INFO - \U0001f680 Creating A1Betting canonical app...\n2025-08-23 08:03:57,279 - backend.core.app - INFO - \u2705 Request ID correlation middleware added\n2025-08-23 08:03:57,279 - backend.core.app - INFO - \u2705 Distributed trace correlation middleware added\n2025-08-23 08:03:57,279 - backend.core.app - INFO - \u2705 Structured logging middleware added\n2025-08-23 08:03:57,280 - backend.core.app - INFO - \u2705 Prometheus metrics middleware added\n2025-08-23 08:03:57,280 - backend.core.app - INFO - \u2705 Payload guard middleware added: max_size=262144 bytes, enforce_json=True, enabled=True\n2025-08-23 08:03:57,280 - backend.middleware.rate_limit - INFO - Rate limiting disabled\n2025-08-23 08:03:57,280 - backend.core.app - INFO - \u2705 Rate limiting middleware added: 100/min, burst=200, enabled=False\n2025-08-23 08:03:57,280 - backend.core.app - INFO - \u2705 Security headers middleware added: [HSTS, CSP(report-only), COOP, COEP], x_frame_options=DENY\n2025-08-23 08:03:57,280 - backend.core.app - INFO - \u2705 Legacy endpoint middleware added for usage telemetry and deprecation controls\n2025-08-23 08:03:57,280 - backend.exceptions.handlers - INFO - \u2705 PayloadRejectionError handler registered\n2025-08-23 08:03:57,280 - backend.exceptions.handlers - INFO - \u2705 All exception handlers registered with structured error taxonomy\n2025-08-23 08:03:57,280 - backend.core.app - INFO - \u2705 Centralized exception handlers registered\n2025-08-23 08:03:57,281 - backend.core.app - INFO - \u2705 PR11 Enhanced WebSocket client route included (/ws/client)\n2025-08-23 08:03:57,287 - backend.core.app - INFO - \u2705 Auth routes also exposed at root (/auth/*) for compatibility\n2025-08-23 08:03:57,287 - backend.core.app - INFO - \u2705 Auth and users routes included (auth with /api prefix)\n2025-08-23 08:03:57,288 - backend.core.app - INFO - \u2705 Diagnostics routes included (/api/v2/diagnostics/health, /api/v2/diagnostics/system)\n2025-08-23 08:03:57,289 - backend.core.app - INFO - \u2705 Meta cache routes included (/api/v2/meta/cache-stats, /api/v2/meta/cache-health)\n2025-08-23 08:03:57,290 - backend.core.app - INFO - \u2705 Legacy meta routes included (/api/v2/meta/legacy-usage, /api/v2/meta/migration-readiness)\n2025-08-23 08:03:57,293 - backend.core.app - ERROR - \u274c Failed to register CSP report routes: Invalid args for response field! Hint: check that <class 'logging.Logger'> is a valid Pydantic field type. If you are using a return type annotation that is not a valid Pydantic field (e.g. Union[Response, dict, None]) you can disable generating the response model from the type annotation with the path operation decorator parameter response_model=None. Read more: https://fastapi.tiangolo.com/tutorial/response-model/\n2025-08-23 08:03:57,293 - backend.core.app - INFO - \u2705 Trace test routes included (/api/trace/* endpoints)\n2025-08-23 08:03:57,295 - backend.core.app - INFO - \u2705 Model inference routes included (/api/v2/models/* endpoints)\n2025-08-23 08:03:57,296 - backend.core.app - INFO - \u2705 Observability events routes included (/api/v2/observability/* endpoints)\n2025-08-23 08:03:57,298 - backend.core.app - INFO - \u2705 Admin control routes included (/api/v2/models/shadow/* and /api/v2/models/admin/* endpoints)\n2025-08-23 08:03:57,300 - backend.core.app - INFO - \u2705 Enhanced WebSocket routes included (/ws/v2/* endpoints)\n2025-08-23 08:03:57,301 - backend.core.app - INFO - \u2705 WebSocket logging routes included (/api/websocket/* endpoints)\n2025-08-23 08:03:57,302 - backend.core.app - INFO - \u2705 Version routes included (/api/version/* endpoints)\n2025-08-23 08:03:57,302 - backend.core.app - INFO - \u2705 WebVitals pipeline routes included (/api/metrics/v1/* endpoints)\n2025-08-23 08:03:57,306 - backend.core.app - INFO - \u2705 Enhanced ML routes included (/api/enhanced-ml/* endpoints)\n2025-08-23 08:03:57,307 - backend.core.app - INFO - \u2705 Fallback enhanced-ml compatibility router mounted at /api/enhanced-ml\n2025-08-23 08:03:57,312 - backend.core.app - INFO - \u2705 Consolidated PrizePicks routes included (/api/v2/prizepicks/* endpoints)\n2025-08-23 08:03:57,315 - backend.core.app - INFO - \u2705 Consolidated ML routes included (/api/v2/ml/* endpoints)\n2025-08-23 08:03:57,317 - backend.core.app - ERROR - \u274c Failed to register consolidated Admin routes: parameter without a default follows parameter with a default (consolidated_admin.py, line 165)\n2025-08-23 08:03:57,320 - backend.core.app - INFO - \u2705 Odds & Line Movement routes included (/v1/odds/* endpoints)\n2025-08-23 08:03:57,322 - backend.core.app - INFO - \u2705 Advanced-Kelly compatibility router mounted at /api/advanced-kelly\n2025-08-23 08:03:57,324 - backend.core.app - ERROR - \u274c Failed to register Risk Management & Personalization routes: 'NoneType' object has no attribute 'alert_evaluation_interval_seconds'\n2025-08-23 08:03:57,326 - backend.core.app - INFO - \u2705 Dependencies Health routes included (/api/dependencies/* endpoints)\n2025-08-23 08:03:57,328 - backend.core.app - INFO - \u2705 Provider Resilience routes included (/api/provider-resilience/* endpoints)\n2025-08-23 08:03:57,329 - backend.core.app - INFO - \u2705 System capabilities routes included (/api/system/* endpoints)\n2025-08-23 08:03:57,331 - backend.core.app - INFO - \u2705 Real-time market streaming routes included (/streaming/* endpoints)\n2025-08-23 08:03:57,332 - backend.core.app - INFO - \u2705 Security HEAD endpoints included (/api/* HEAD endpoints)\n2025-08-23 08:03:57,333 - backend.core.app - INFO - \u2705 ML Model Registry routes included (/api/models/* endpoints)\n2025-08-23 08:03:57,334 - backend.core.app - INFO - \u2705 Data ingestion routes included (/api/v1/ingestion/* endpoints)\n2025-08-23 08:03:57,338 - backend.core.app - INFO - \u2705 Enterprise model registry routes included (/api/models/enterprise/* endpoints)\n2025-08-23 08:03:57,342 - backend.core.app - INFO - \u2705 Alert engine routes included (/api/alert-engine/* endpoints)\n2025-08-23 08:03:57,346 - backend.core.app - INFO - \u2705 PropFinder routes included (/api/propfinder/* endpoints)\n2025-08-23 08:03:57,347 - backend.core.app - WARNING - \u26a0\ufe0f Could not import multiple_sportsbook_routes: cannot import name 'RateLimiter' from 'backend.middleware.rate_limit' (C:\\Users\\bcmad\\Downloads\\A1Betting7-13.2\\backend\\middleware\\rate_limit.py)\n2025-08-23 08:03:57,349 - backend.core.app - INFO - \u2705 Sportsbook compatibility router mounted at /api/sportsbook\n2025-08-23 08:03:57,349 - backend.core.app - INFO - \U0001f50d Bootstrap validation scheduled on startup\n2025-08-23 08:03:57,349 - backend.core.app - INFO - \U0001f3e5 Health endpoints normalized: /api/health, /health, /api/v2/health -> identical envelope format\n2025-08-23 08:03:57,349 - backend.core.app - INFO - \u2705 A1Betting canonical app created successfully
----------------------------- Captured log setup ------------------------------
INFO     backend.core.app:app.py:65 \U0001f680 Creating A1Betting canonical app...\nINFO     backend.core.app:app.py:104 \u2705 Request ID correlation middleware added\nINFO     backend.core.app:app.py:114 \u2705 Distributed trace correlation middleware added\nINFO     backend.core.app:app.py:126 \u2705 Structured logging middleware added\nINFO     backend.core.app:app.py:146 \u2705 Prometheus metrics middleware added\nINFO     backend.core.app:app.py:167 \u2705 Payload guard middleware added: max_size=262144 bytes, enforce_json=True, enabled=True\nINFO     backend.middleware.rate_limit:rate_limit.py:90 Rate limiting disabled\nINFO     backend.core.app:app.py:202 \u2705 Rate limiting middleware added: 100/min, burst=200, enabled=False\nINFO     backend.core.app:app.py:244 \u2705 Security headers middleware added: [HSTS, CSP(report-only), COOP, COEP], x_frame_options=DENY\nINFO     backend.core.app:app.py:259 \u2705 Legacy endpoint middleware added for usage telemetry and deprecation controls\nINFO     backend.exceptions.handlers:handlers.py:235 \u2705 PayloadRejectionError handler registered\nINFO     backend.exceptions.handlers:handlers.py:250 \u2705 All exception handlers registered with structured error taxonomy\nINFO     backend.core.app:app.py:269 \u2705 Centralized exception handlers registered\nINFO     backend.core.app:app.py:332 \u2705 PR11 Enhanced WebSocket client route included (/ws/client)\nINFO     backend.core.app:app.py:702 \u2705 Auth routes also exposed at root (/auth/*) for compatibility\nINFO     backend.core.app:app.py:706 \u2705 Auth and users routes included (auth with /api prefix)\nINFO     backend.core.app:app.py:714 \u2705 Diagnostics routes included (/api/v2/diagnostics/health, /api/v2/diagnostics/system)\nINFO     backend.core.app:app.py:763 \u2705 Meta cache routes included (/api/v2/meta/cache-stats, /api/v2/meta/cache-health)\nINFO     backend.core.app:app.py:773 \u2705 Legacy meta routes included (/api/v2/meta/legacy-usage, /api/v2/meta/migration-readiness)\nERROR    backend.core.app:app.py:788 \u274c Failed to register CSP report routes: Invalid args for response field! Hint: check that <class 'logging.Logger'> is a valid Pydantic field type. If you are using a return type annotation that is not a valid Pydantic field (e.g. Union[Response, dict, None]) you can disable generating the response model from the type annotation with the path operation decorator parameter response_model=None. Read more: https://fastapi.tiangolo.com/tutorial/response-model/\nINFO     backend.core.app:app.py:794 \u2705 Trace test routes included (/api/trace/* endpoints)\nINFO     backend.core.app:app.py:804 \u2705 Model inference routes included (/api/v2/models/* endpoints)\nINFO     backend.core.app:app.py:814 \u2705 Observability events routes included (/api/v2/observability/* endpoints)\nINFO     backend.core.app:app.py:824 \u2705 Admin control routes included (/api/v2/models/shadow/* and /api/v2/models/admin/* endpoints)\nINFO     backend.core.app:app.py:834 \u2705 Enhanced WebSocket routes included (/ws/v2/* endpoints)\nINFO     backend.core.app:app.py:844 \u2705 WebSocket logging routes included (/api/websocket/* endpoints)\nINFO     backend.core.app:app.py:854 \u2705 Version routes included (/api/version/* endpoints)\nINFO     backend.core.app:app.py:864 \u2705 WebVitals pipeline routes included (/api/metrics/v1/* endpoints)\nINFO     backend.core.app:app.py:874 \u2705 Enhanced ML routes included (/api/enhanced-ml/* endpoints)\nINFO     backend.core.app:app.py:986 \u2705 Fallback enhanced-ml compatibility router mounted at /api/enhanced-ml\nINFO     backend.core.app:app.py:995 \u2705 Consolidated PrizePicks routes included (/api/v2/prizepicks/* endpoints)\nINFO     backend.core.app:app.py:1005 \u2705 Consolidated ML routes included (/api/v2/ml/* endpoints)\nERROR    backend.core.app:app.py:1019 \u274c Failed to register consolidated Admin routes: parameter without a default follows parameter with a default (consolidated_admin.py, line 165)\nINFO     backend.core.app:app.py:1025 \u2705 Odds & Line Movement routes included (/v1/odds/* endpoints)\nINFO     backend.core.app:app.py:1066 \u2705 Advanced-Kelly compatibility router mounted at /api/advanced-kelly\nERROR    backend.core.app:app.py:1078 \u274c Failed to register Risk Management & Personalization routes: 'NoneType' object has no attribute 'alert_evaluation_interval_seconds'\nINFO     backend.core.app:app.py:1084 \u2705 Dependencies Health routes included (/api/dependencies/* endpoints)\nINFO     backend.core.app:app.py:1094 \u2705 Provider Resilience routes included (/api/provider-resilience/* endpoints)\nINFO     backend.core.app:app.py:1104 \u2705 System capabilities routes included (/api/system/* endpoints)\nINFO     backend.core.app:app.py:1114 \u2705 Real-time market streaming routes included (/streaming/* endpoints)\nINFO     backend.core.app:app.py:1124 \u2705 Security HEAD endpoints included (/api/* HEAD endpoints)\nINFO     backend.core.app:app.py:1134 \u2705 ML Model Registry routes included (/api/models/* endpoints)\nINFO     backend.core.app:app.py:1144 \u2705 Data ingestion routes included (/api/v1/ingestion/* endpoints)\nINFO     backend.core.app:app.py:1154 \u2705 Enterprise model registry routes included (/api/models/enterprise/* endpoints)\nINFO     backend.core.app:app.py:1199 \u2705 Alert engine routes included (/api/alert-engine/* endpoints)\nINFO     backend.core.app:app.py:1209 \u2705 PropFinder routes included (/api/propfinder/* endpoints)\nWARNING  backend.core.app:app.py:1221 \u26a0\ufe0f Could not import multiple_sportsbook_routes: cannot import name 'RateLimiter' from 'backend.middleware.rate_limit' (C:\\Users\\bcmad\\Downloads\\A1Betting7-13.2\\backend\\middleware\\rate_limit.py)\nINFO     backend.core.app:app.py:1495 \u2705 Sportsbook compatibility router mounted at /api/sportsbook\nINFO     backend.core.app:app.py:1527 \U0001f50d Bootstrap validation scheduled on startup\nINFO     backend.core.app:app.py:1535 \U0001f3e5 Health endpoints normalized: /api/health, /health, /api/v2/health -> identical envelope format\nINFO     backend.core.app:app.py:1536 \u2705 A1Betting canonical app created successfully
__________ TestMLBExtrasRoutes.test_get_play_by_play_game_not_found ___________
tests\backend\routes\test_mlb_extras.py:444: in test_get_play_by_play_game_not_found
    with patch('backend.routes.mlb_extras.get_play_by_play_data', return_value=None):
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
C:\Python313\Lib\unittest\mock.py:1497: in __enter__
    original, local = self.get_original()
                      ^^^^^^^^^^^^^^^^^^^
C:\Python313\Lib\unittest\mock.py:1467: in get_original
    raise AttributeError(
E   AttributeError: <module 'backend.routes.mlb_extras' from 'C:\\Users\\bcmad\\Downloads\\A1Betting7-13.2\\backend\\routes\\mlb_extras.py'> does not have the attribute 'get_play_by_play_data'
---------------------------- Captured stderr setup ----------------------------
2025-08-23 08:03:57,384 - backend.core.app - INFO - \U0001f680 Creating A1Betting canonical app...\n2025-08-23 08:03:57,385 - backend.core.app - INFO - \u2705 Request ID correlation middleware added\n2025-08-23 08:03:57,385 - backend.core.app - INFO - \u2705 Distributed trace correlation middleware added\n2025-08-23 08:03:57,385 - backend.core.app - INFO - \u2705 Structured logging middleware added\n2025-08-23 08:03:57,385 - backend.core.app - INFO - \u2705 Prometheus metrics middleware added\n2025-08-23 08:03:57,385 - backend.core.app - INFO - \u2705 Payload guard middleware added: max_size=262144 bytes, enforce_json=True, enabled=True\n2025-08-23 08:03:57,385 - backend.middleware.rate_limit - INFO - Rate limiting disabled\n2025-08-23 08:03:57,385 - backend.core.app - INFO - \u2705 Rate limiting middleware added: 100/min, burst=200, enabled=False\n2025-08-23 08:03:57,385 - backend.core.app - INFO - \u2705 Security headers middleware added: [HSTS, CSP(report-only), COOP, COEP], x_frame_options=DENY\n2025-08-23 08:03:57,385 - backend.core.app - INFO - \u2705 Legacy endpoint middleware added for usage telemetry and deprecation controls\n2025-08-23 08:03:57,385 - backend.exceptions.handlers - INFO - \u2705 PayloadRejectionError handler registered\n2025-08-23 08:03:57,385 - backend.exceptions.handlers - INFO - \u2705 All exception handlers registered with structured error taxonomy\n2025-08-23 08:03:57,385 - backend.core.app - INFO - \u2705 Centralized exception handlers registered\n2025-08-23 08:03:57,386 - backend.core.app - INFO - \u2705 PR11 Enhanced WebSocket client route included (/ws/client)\n2025-08-23 08:03:57,390 - backend.core.app - INFO - \u2705 Auth routes also exposed at root (/auth/*) for compatibility\n2025-08-23 08:03:57,390 - backend.core.app - INFO - \u2705 Auth and users routes included (auth with /api prefix)\n2025-08-23 08:03:57,392 - backend.core.app - INFO - \u2705 Diagnostics routes included (/api/v2/diagnostics/health, /api/v2/diagnostics/system)\n2025-08-23 08:03:57,393 - backend.core.app - INFO - \u2705 Meta cache routes included (/api/v2/meta/cache-stats, /api/v2/meta/cache-health)\n2025-08-23 08:03:57,393 - backend.core.app - INFO - \u2705 Legacy meta routes included (/api/v2/meta/legacy-usage, /api/v2/meta/migration-readiness)\n2025-08-23 08:03:57,397 - backend.core.app - ERROR - \u274c Failed to register CSP report routes: Invalid args for response field! Hint: check that <class 'logging.Logger'> is a valid Pydantic field type. If you are using a return type annotation that is not a valid Pydantic field (e.g. Union[Response, dict, None]) you can disable generating the response model from the type annotation with the path operation decorator parameter response_model=None. Read more: https://fastapi.tiangolo.com/tutorial/response-model/\n2025-08-23 08:03:57,398 - backend.core.app - INFO - \u2705 Trace test routes included (/api/trace/* endpoints)\n2025-08-23 08:03:57,399 - backend.core.app - INFO - \u2705 Model inference routes included (/api/v2/models/* endpoints)\n2025-08-23 08:03:57,401 - backend.core.app - INFO - \u2705 Observability events routes included (/api/v2/observability/* endpoints)\n2025-08-23 08:03:57,402 - backend.core.app - INFO - \u2705 Admin control routes included (/api/v2/models/shadow/* and /api/v2/models/admin/* endpoints)\n2025-08-23 08:03:57,404 - backend.core.app - INFO - \u2705 Enhanced WebSocket routes included (/ws/v2/* endpoints)\n2025-08-23 08:03:57,405 - backend.core.app - INFO - \u2705 WebSocket logging routes included (/api/websocket/* endpoints)\n2025-08-23 08:03:57,406 - backend.core.app - INFO - \u2705 Version routes included (/api/version/* endpoints)\n2025-08-23 08:03:57,406 - backend.core.app - INFO - \u2705 WebVitals pipeline routes included (/api/metrics/v1/* endpoints)\n2025-08-23 08:03:57,410 - backend.core.app - INFO - \u2705 Enhanced ML routes included (/api/enhanced-ml/* endpoints)\n2025-08-23 08:03:57,411 - backend.core.app - INFO - \u2705 Fallback enhanced-ml compatibility router mounted at /api/enhanced-ml\n2025-08-23 08:03:57,416 - backend.core.app - INFO - \u2705 Consolidated PrizePicks routes included (/api/v2/prizepicks/* endpoints)\n2025-08-23 08:03:57,420 - backend.core.app - INFO - \u2705 Consolidated ML routes included (/api/v2/ml/* endpoints)\n2025-08-23 08:03:57,422 - backend.core.app - ERROR - \u274c Failed to register consolidated Admin routes: parameter without a default follows parameter with a default (consolidated_admin.py, line 165)\n2025-08-23 08:03:57,425 - backend.core.app - INFO - \u2705 Odds & Line Movement routes included (/v1/odds/* endpoints)\n2025-08-23 08:03:57,426 - backend.core.app - INFO - \u2705 Advanced-Kelly compatibility router mounted at /api/advanced-kelly\n2025-08-23 08:03:57,429 - backend.core.app - ERROR - \u274c Failed to register Risk Management & Personalization routes: 'NoneType' object has no attribute 'alert_evaluation_interval_seconds'\n2025-08-23 08:03:57,430 - backend.core.app - INFO - \u2705 Dependencies Health routes included (/api/dependencies/* endpoints)\n2025-08-23 08:03:57,432 - backend.core.app - INFO - \u2705 Provider Resilience routes included (/api/provider-resilience/* endpoints)\n2025-08-23 08:03:57,434 - backend.core.app - INFO - \u2705 System capabilities routes included (/api/system/* endpoints)\n2025-08-23 08:03:57,435 - backend.core.app - INFO - \u2705 Real-time market streaming routes included (/streaming/* endpoints)\n2025-08-23 08:03:57,436 - backend.core.app - INFO - \u2705 Security HEAD endpoints included (/api/* HEAD endpoints)\n2025-08-23 08:03:57,438 - backend.core.app - INFO - \u2705 ML Model Registry routes included (/api/models/* endpoints)\n2025-08-23 08:03:57,439 - backend.core.app - INFO - \u2705 Data ingestion routes included (/api/v1/ingestion/* endpoints)\n2025-08-23 08:03:57,442 - backend.core.app - INFO - \u2705 Enterprise model registry routes included (/api/models/enterprise/* endpoints)\n2025-08-23 08:03:57,446 - backend.core.app - INFO - \u2705 Alert engine routes included (/api/alert-engine/* endpoints)\n2025-08-23 08:03:57,451 - backend.core.app - INFO - \u2705 PropFinder routes included (/api/propfinder/* endpoints)\n2025-08-23 08:03:57,451 - backend.core.app - WARNING - \u26a0\ufe0f Could not import multiple_sportsbook_routes: cannot import name 'RateLimiter' from 'backend.middleware.rate_limit' (C:\\Users\\bcmad\\Downloads\\A1Betting7-13.2\\backend\\middleware\\rate_limit.py)\n2025-08-23 08:03:57,455 - backend.core.app - INFO - \u2705 Sportsbook compatibility router mounted at /api/sportsbook\n2025-08-23 08:03:57,455 - backend.core.app - INFO - \U0001f50d Bootstrap validation scheduled on startup\n2025-08-23 08:03:57,455 - backend.core.app - INFO - \U0001f3e5 Health endpoints normalized: /api/health, /health, /api/v2/health -> identical envelope format\n2025-08-23 08:03:57,455 - backend.core.app - INFO - \u2705 A1Betting canonical app created successfully
----------------------------- Captured log setup ------------------------------
INFO     backend.core.app:app.py:65 \U0001f680 Creating A1Betting canonical app...\nINFO     backend.core.app:app.py:104 \u2705 Request ID correlation middleware added\nINFO     backend.core.app:app.py:114 \u2705 Distributed trace correlation middleware added\nINFO     backend.core.app:app.py:126 \u2705 Structured logging middleware added\nINFO     backend.core.app:app.py:146 \u2705 Prometheus metrics middleware added\nINFO     backend.core.app:app.py:167 \u2705 Payload guard middleware added: max_size=262144 bytes, enforce_json=True, enabled=True\nINFO     backend.middleware.rate_limit:rate_limit.py:90 Rate limiting disabled\nINFO     backend.core.app:app.py:202 \u2705 Rate limiting middleware added: 100/min, burst=200, enabled=False\nINFO     backend.core.app:app.py:244 \u2705 Security headers middleware added: [HSTS, CSP(report-only), COOP, COEP], x_frame_options=DENY\nINFO     backend.core.app:app.py:259 \u2705 Legacy endpoint middleware added for usage telemetry and deprecation controls\nINFO     backend.exceptions.handlers:handlers.py:235 \u2705 PayloadRejectionError handler registered\nINFO     backend.exceptions.handlers:handlers.py:250 \u2705 All exception handlers registered with structured error taxonomy\nINFO     backend.core.app:app.py:269 \u2705 Centralized exception handlers registered\nINFO     backend.core.app:app.py:332 \u2705 PR11 Enhanced WebSocket client route included (/ws/client)\nINFO     backend.core.app:app.py:702 \u2705 Auth routes also exposed at root (/auth/*) for compatibility\nINFO     backend.core.app:app.py:706 \u2705 Auth and users routes included (auth with /api prefix)\nINFO     backend.core.app:app.py:714 \u2705 Diagnostics routes included (/api/v2/diagnostics/health, /api/v2/diagnostics/system)\nINFO     backend.core.app:app.py:763 \u2705 Meta cache routes included (/api/v2/meta/cache-stats, /api/v2/meta/cache-health)\nINFO     backend.core.app:app.py:773 \u2705 Legacy meta routes included (/api/v2/meta/legacy-usage, /api/v2/meta/migration-readiness)\nERROR    backend.core.app:app.py:788 \u274c Failed to register CSP report routes: Invalid args for response field! Hint: check that <class 'logging.Logger'> is a valid Pydantic field type. If you are using a return type annotation that is not a valid Pydantic field (e.g. Union[Response, dict, None]) you can disable generating the response model from the type annotation with the path operation decorator parameter response_model=None. Read more: https://fastapi.tiangolo.com/tutorial/response-model/\nINFO     backend.core.app:app.py:794 \u2705 Trace test routes included (/api/trace/* endpoints)\nINFO     backend.core.app:app.py:804 \u2705 Model inference routes included (/api/v2/models/* endpoints)\nINFO     backend.core.app:app.py:814 \u2705 Observability events routes included (/api/v2/observability/* endpoints)\nINFO     backend.core.app:app.py:824 \u2705 Admin control routes included (/api/v2/models/shadow/* and /api/v2/models/admin/* endpoints)\nINFO     backend.core.app:app.py:834 \u2705 Enhanced WebSocket routes included (/ws/v2/* endpoints)\nINFO     backend.core.app:app.py:844 \u2705 WebSocket logging routes included (/api/websocket/* endpoints)\nINFO     backend.core.app:app.py:854 \u2705 Version routes included (/api/version/* endpoints)\nINFO     backend.core.app:app.py:864 \u2705 WebVitals pipeline routes included (/api/metrics/v1/* endpoints)\nINFO     backend.core.app:app.py:874 \u2705 Enhanced ML routes included (/api/enhanced-ml/* endpoints)\nINFO     backend.core.app:app.py:986 \u2705 Fallback enhanced-ml compatibility router mounted at /api/enhanced-ml\nINFO     backend.core.app:app.py:995 \u2705 Consolidated PrizePicks routes included (/api/v2/prizepicks/* endpoints)\nINFO     backend.core.app:app.py:1005 \u2705 Consolidated ML routes included (/api/v2/ml/* endpoints)\nERROR    backend.core.app:app.py:1019 \u274c Failed to register consolidated Admin routes: parameter without a default follows parameter with a default (consolidated_admin.py, line 165)\nINFO     backend.core.app:app.py:1025 \u2705 Odds & Line Movement routes included (/v1/odds/* endpoints)\nINFO     backend.core.app:app.py:1066 \u2705 Advanced-Kelly compatibility router mounted at /api/advanced-kelly\nERROR    backend.core.app:app.py:1078 \u274c Failed to register Risk Management & Personalization routes: 'NoneType' object has no attribute 'alert_evaluation_interval_seconds'\nINFO     backend.core.app:app.py:1084 \u2705 Dependencies Health routes included (/api/dependencies/* endpoints)\nINFO     backend.core.app:app.py:1094 \u2705 Provider Resilience routes included (/api/provider-resilience/* endpoints)\nINFO     backend.core.app:app.py:1104 \u2705 System capabilities routes included (/api/system/* endpoints)\nINFO     backend.core.app:app.py:1114 \u2705 Real-time market streaming routes included (/streaming/* endpoints)\nINFO     backend.core.app:app.py:1124 \u2705 Security HEAD endpoints included (/api/* HEAD endpoints)\nINFO     backend.core.app:app.py:1134 \u2705 ML Model Registry routes included (/api/models/* endpoints)\nINFO     backend.core.app:app.py:1144 \u2705 Data ingestion routes included (/api/v1/ingestion/* endpoints)\nINFO     backend.core.app:app.py:1154 \u2705 Enterprise model registry routes included (/api/models/enterprise/* endpoints)\nINFO     backend.core.app:app.py:1199 \u2705 Alert engine routes included (/api/alert-engine/* endpoints)\nINFO     backend.core.app:app.py:1209 \u2705 PropFinder routes included (/api/propfinder/* endpoints)\nWARNING  backend.core.app:app.py:1221 \u26a0\ufe0f Could not import multiple_sportsbook_routes: cannot import name 'RateLimiter' from 'backend.middleware.rate_limit' (C:\\Users\\bcmad\\Downloads\\A1Betting7-13.2\\backend\\middleware\\rate_limit.py)\nINFO     backend.core.app:app.py:1495 \u2705 Sportsbook compatibility router mounted at /api/sportsbook\nINFO     backend.core.app:app.py:1527 \U0001f50d Bootstrap validation scheduled on startup\nINFO     backend.core.app:app.py:1535 \U0001f3e5 Health endpoints normalized: /api/health, /health, /api/v2/health -> identical envelope format\nINFO     backend.core.app:app.py:1536 \u2705 A1Betting canonical app created successfully
______________ TestMLBExtrasRoutes.test_service_timeout_handling ______________
tests\backend\routes\test_mlb_extras.py:475: in test_service_timeout_handling
    with patch('backend.routes.mlb_extras.get_live_game_data', side_effect=asyncio.TimeoutError("Request timed out")):
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
C:\Python313\Lib\unittest\mock.py:1497: in __enter__
    original, local = self.get_original()
                      ^^^^^^^^^^^^^^^^^^^
C:\Python313\Lib\unittest\mock.py:1467: in get_original
    raise AttributeError(
E   AttributeError: <module 'backend.routes.mlb_extras' from 'C:\\Users\\bcmad\\Downloads\\A1Betting7-13.2\\backend\\routes\\mlb_extras.py'> does not have the attribute 'get_live_game_data'
---------------------------- Captured stderr setup ----------------------------
2025-08-23 08:03:57,588 - backend.core.app - INFO - \U0001f680 Creating A1Betting canonical app...\n2025-08-23 08:03:57,588 - backend.core.app - INFO - \u2705 Request ID correlation middleware added\n2025-08-23 08:03:57,588 - backend.core.app - INFO - \u2705 Distributed trace correlation middleware added\n2025-08-23 08:03:57,588 - backend.core.app - INFO - \u2705 Structured logging middleware added\n2025-08-23 08:03:57,588 - backend.core.app - INFO - \u2705 Prometheus metrics middleware added\n2025-08-23 08:03:57,588 - backend.core.app - INFO - \u2705 Payload guard middleware added: max_size=262144 bytes, enforce_json=True, enabled=True\n2025-08-23 08:03:57,588 - backend.middleware.rate_limit - INFO - Rate limiting disabled\n2025-08-23 08:03:57,588 - backend.core.app - INFO - \u2705 Rate limiting middleware added: 100/min, burst=200, enabled=False\n2025-08-23 08:03:57,588 - backend.core.app - INFO - \u2705 Security headers middleware added: [HSTS, CSP(report-only), COOP, COEP], x_frame_options=DENY\n2025-08-23 08:03:57,588 - backend.core.app - INFO - \u2705 Legacy endpoint middleware added for usage telemetry and deprecation controls\n2025-08-23 08:03:57,588 - backend.exceptions.handlers - INFO - \u2705 PayloadRejectionError handler registered\n2025-08-23 08:03:57,588 - backend.exceptions.handlers - INFO - \u2705 All exception handlers registered with structured error taxonomy\n2025-08-23 08:03:57,589 - backend.core.app - INFO - \u2705 Centralized exception handlers registered\n2025-08-23 08:03:57,590 - backend.core.app - INFO - \u2705 PR11 Enhanced WebSocket client route included (/ws/client)\n2025-08-23 08:03:57,594 - backend.core.app - INFO - \u2705 Auth routes also exposed at root (/auth/*) for compatibility\n2025-08-23 08:03:57,594 - backend.core.app - INFO - \u2705 Auth and users routes included (auth with /api prefix)\n2025-08-23 08:03:57,595 - backend.core.app - INFO - \u2705 Diagnostics routes included (/api/v2/diagnostics/health, /api/v2/diagnostics/system)\n2025-08-23 08:03:57,596 - backend.core.app - INFO - \u2705 Meta cache routes included (/api/v2/meta/cache-stats, /api/v2/meta/cache-health)\n2025-08-23 08:03:57,597 - backend.core.app - INFO - \u2705 Legacy meta routes included (/api/v2/meta/legacy-usage, /api/v2/meta/migration-readiness)\n2025-08-23 08:03:57,600 - backend.core.app - ERROR - \u274c Failed to register CSP report routes: Invalid args for response field! Hint: check that <class 'logging.Logger'> is a valid Pydantic field type. If you are using a return type annotation that is not a valid Pydantic field (e.g. Union[Response, dict, None]) you can disable generating the response model from the type annotation with the path operation decorator parameter response_model=None. Read more: https://fastapi.tiangolo.com/tutorial/response-model/\n2025-08-23 08:03:57,600 - backend.core.app - INFO - \u2705 Trace test routes included (/api/trace/* endpoints)\n2025-08-23 08:03:57,602 - backend.core.app - INFO - \u2705 Model inference routes included (/api/v2/models/* endpoints)\n2025-08-23 08:03:57,603 - backend.core.app - INFO - \u2705 Observability events routes included (/api/v2/observability/* endpoints)\n2025-08-23 08:03:57,605 - backend.core.app - INFO - \u2705 Admin control routes included (/api/v2/models/shadow/* and /api/v2/models/admin/* endpoints)\n2025-08-23 08:03:57,607 - backend.core.app - INFO - \u2705 Enhanced WebSocket routes included (/ws/v2/* endpoints)\n2025-08-23 08:03:57,608 - backend.core.app - INFO - \u2705 WebSocket logging routes included (/api/websocket/* endpoints)\n2025-08-23 08:03:57,609 - backend.core.app - INFO - \u2705 Version routes included (/api/version/* endpoints)\n2025-08-23 08:03:57,609 - backend.core.app - INFO - \u2705 WebVitals pipeline routes included (/api/metrics/v1/* endpoints)\n2025-08-23 08:03:57,613 - backend.core.app - INFO - \u2705 Enhanced ML routes included (/api/enhanced-ml/* endpoints)\n2025-08-23 08:03:57,614 - backend.core.app - INFO - \u2705 Fallback enhanced-ml compatibility router mounted at /api/enhanced-ml\n2025-08-23 08:03:57,621 - backend.core.app - INFO - \u2705 Consolidated PrizePicks routes included (/api/v2/prizepicks/* endpoints)\n2025-08-23 08:03:57,624 - backend.core.app - INFO - \u2705 Consolidated ML routes included (/api/v2/ml/* endpoints)\n2025-08-23 08:03:57,626 - backend.core.app - ERROR - \u274c Failed to register consolidated Admin routes: parameter without a default follows parameter with a default (consolidated_admin.py, line 165)\n2025-08-23 08:03:57,630 - backend.core.app - INFO - \u2705 Odds & Line Movement routes included (/v1/odds/* endpoints)\n2025-08-23 08:03:57,631 - backend.core.app - INFO - \u2705 Advanced-Kelly compatibility router mounted at /api/advanced-kelly\n2025-08-23 08:03:57,634 - backend.core.app - ERROR - \u274c Failed to register Risk Management & Personalization routes: 'NoneType' object has no attribute 'alert_evaluation_interval_seconds'\n2025-08-23 08:03:57,636 - backend.core.app - INFO - \u2705 Dependencies Health routes included (/api/dependencies/* endpoints)\n2025-08-23 08:03:57,638 - backend.core.app - INFO - \u2705 Provider Resilience routes included (/api/provider-resilience/* endpoints)\n2025-08-23 08:03:57,639 - backend.core.app - INFO - \u2705 System capabilities routes included (/api/system/* endpoints)\n2025-08-23 08:03:57,641 - backend.core.app - INFO - \u2705 Real-time market streaming routes included (/streaming/* endpoints)\n2025-08-23 08:03:57,642 - backend.core.app - INFO - \u2705 Security HEAD endpoints included (/api/* HEAD endpoints)\n2025-08-23 08:03:57,643 - backend.core.app - INFO - \u2705 ML Model Registry routes included (/api/models/* endpoints)\n2025-08-23 08:03:57,644 - backend.core.app - INFO - \u2705 Data ingestion routes included (/api/v1/ingestion/* endpoints)\n2025-08-23 08:03:57,648 - backend.core.app - INFO - \u2705 Enterprise model registry routes included (/api/models/enterprise/* endpoints)\n2025-08-23 08:03:57,652 - backend.core.app - INFO - \u2705 Alert engine routes included (/api/alert-engine/* endpoints)\n2025-08-23 08:03:57,656 - backend.core.app - INFO - \u2705 PropFinder routes included (/api/propfinder/* endpoints)\n2025-08-23 08:03:57,656 - backend.core.app - WARNING - \u26a0\ufe0f Could not import multiple_sportsbook_routes: cannot import name 'RateLimiter' from 'backend.middleware.rate_limit' (C:\\Users\\bcmad\\Downloads\\A1Betting7-13.2\\backend\\middleware\\rate_limit.py)\n2025-08-23 08:03:57,659 - backend.core.app - INFO - \u2705 Sportsbook compatibility router mounted at /api/sportsbook\n2025-08-23 08:03:57,659 - backend.core.app - INFO - \U0001f50d Bootstrap validation scheduled on startup\n2025-08-23 08:03:57,659 - backend.core.app - INFO - \U0001f3e5 Health endpoints normalized: /api/health, /health, /api/v2/health -> identical envelope format\n2025-08-23 08:03:57,659 - backend.core.app - INFO - \u2705 A1Betting canonical app created successfully
----------------------------- Captured log setup ------------------------------
INFO     backend.core.app:app.py:65 \U0001f680 Creating A1Betting canonical app...\nINFO     backend.core.app:app.py:104 \u2705 Request ID correlation middleware added\nINFO     backend.core.app:app.py:114 \u2705 Distributed trace correlation middleware added\nINFO     backend.core.app:app.py:126 \u2705 Structured logging middleware added\nINFO     backend.core.app:app.py:146 \u2705 Prometheus metrics middleware added\nINFO     backend.core.app:app.py:167 \u2705 Payload guard middleware added: max_size=262144 bytes, enforce_json=True, enabled=True\nINFO     backend.middleware.rate_limit:rate_limit.py:90 Rate limiting disabled\nINFO     backend.core.app:app.py:202 \u2705 Rate limiting middleware added: 100/min, burst=200, enabled=False\nINFO     backend.core.app:app.py:244 \u2705 Security headers middleware added: [HSTS, CSP(report-only), COOP, COEP], x_frame_options=DENY\nINFO     backend.core.app:app.py:259 \u2705 Legacy endpoint middleware added for usage telemetry and deprecation controls\nINFO     backend.exceptions.handlers:handlers.py:235 \u2705 PayloadRejectionError handler registered\nINFO     backend.exceptions.handlers:handlers.py:250 \u2705 All exception handlers registered with structured error taxonomy\nINFO     backend.core.app:app.py:269 \u2705 Centralized exception handlers registered\nINFO     backend.core.app:app.py:332 \u2705 PR11 Enhanced WebSocket client route included (/ws/client)\nINFO     backend.core.app:app.py:702 \u2705 Auth routes also exposed at root (/auth/*) for compatibility\nINFO     backend.core.app:app.py:706 \u2705 Auth and users routes included (auth with /api prefix)\nINFO     backend.core.app:app.py:714 \u2705 Diagnostics routes included (/api/v2/diagnostics/health, /api/v2/diagnostics/system)\nINFO     backend.core.app:app.py:763 \u2705 Meta cache routes included (/api/v2/meta/cache-stats, /api/v2/meta/cache-health)\nINFO     backend.core.app:app.py:773 \u2705 Legacy meta routes included (/api/v2/meta/legacy-usage, /api/v2/meta/migration-readiness)\nERROR    backend.core.app:app.py:788 \u274c Failed to register CSP report routes: Invalid args for response field! Hint: check that <class 'logging.Logger'> is a valid Pydantic field type. If you are using a return type annotation that is not a valid Pydantic field (e.g. Union[Response, dict, None]) you can disable generating the response model from the type annotation with the path operation decorator parameter response_model=None. Read more: https://fastapi.tiangolo.com/tutorial/response-model/\nINFO     backend.core.app:app.py:794 \u2705 Trace test routes included (/api/trace/* endpoints)\nINFO     backend.core.app:app.py:804 \u2705 Model inference routes included (/api/v2/models/* endpoints)\nINFO     backend.core.app:app.py:814 \u2705 Observability events routes included (/api/v2/observability/* endpoints)\nINFO     backend.core.app:app.py:824 \u2705 Admin control routes included (/api/v2/models/shadow/* and /api/v2/models/admin/* endpoints)\nINFO     backend.core.app:app.py:834 \u2705 Enhanced WebSocket routes included (/ws/v2/* endpoints)\nINFO     backend.core.app:app.py:844 \u2705 WebSocket logging routes included (/api/websocket/* endpoints)\nINFO     backend.core.app:app.py:854 \u2705 Version routes included (/api/version/* endpoints)\nINFO     backend.core.app:app.py:864 \u2705 WebVitals pipeline routes included (/api/metrics/v1/* endpoints)\nINFO     backend.core.app:app.py:874 \u2705 Enhanced ML routes included (/api/enhanced-ml/* endpoints)\nINFO     backend.core.app:app.py:986 \u2705 Fallback enhanced-ml compatibility router mounted at /api/enhanced-ml\nINFO     backend.core.app:app.py:995 \u2705 Consolidated PrizePicks routes included (/api/v2/prizepicks/* endpoints)\nINFO     backend.core.app:app.py:1005 \u2705 Consolidated ML routes included (/api/v2/ml/* endpoints)\nERROR    backend.core.app:app.py:1019 \u274c Failed to register consolidated Admin routes: parameter without a default follows parameter with a default (consolidated_admin.py, line 165)\nINFO     backend.core.app:app.py:1025 \u2705 Odds & Line Movement routes included (/v1/odds/* endpoints)\nINFO     backend.core.app:app.py:1066 \u2705 Advanced-Kelly compatibility router mounted at /api/advanced-kelly\nERROR    backend.core.app:app.py:1078 \u274c Failed to register Risk Management & Personalization routes: 'NoneType' object has no attribute 'alert_evaluation_interval_seconds'\nINFO     backend.core.app:app.py:1084 \u2705 Dependencies Health routes included (/api/dependencies/* endpoints)\nINFO     backend.core.app:app.py:1094 \u2705 Provider Resilience routes included (/api/provider-resilience/* endpoints)\nINFO     backend.core.app:app.py:1104 \u2705 System capabilities routes included (/api/system/* endpoints)\nINFO     backend.core.app:app.py:1114 \u2705 Real-time market streaming routes included (/streaming/* endpoints)\nINFO     backend.core.app:app.py:1124 \u2705 Security HEAD endpoints included (/api/* HEAD endpoints)\nINFO     backend.core.app:app.py:1134 \u2705 ML Model Registry routes included (/api/models/* endpoints)\nINFO     backend.core.app:app.py:1144 \u2705 Data ingestion routes included (/api/v1/ingestion/* endpoints)\nINFO     backend.core.app:app.py:1154 \u2705 Enterprise model registry routes included (/api/models/enterprise/* endpoints)\nINFO     backend.core.app:app.py:1199 \u2705 Alert engine routes included (/api/alert-engine/* endpoints)\nINFO     backend.core.app:app.py:1209 \u2705 PropFinder routes included (/api/propfinder/* endpoints)\nWARNING  backend.core.app:app.py:1221 \u26a0\ufe0f Could not import multiple_sportsbook_routes: cannot import name 'RateLimiter' from 'backend.middleware.rate_limit' (C:\\Users\\bcmad\\Downloads\\A1Betting7-13.2\\backend\\middleware\\rate_limit.py)\nINFO     backend.core.app:app.py:1495 \u2705 Sportsbook compatibility router mounted at /api/sportsbook\nINFO     backend.core.app:app.py:1527 \U0001f50d Bootstrap validation scheduled on startup\nINFO     backend.core.app:app.py:1535 \U0001f3e5 Health endpoints normalized: /api/health, /health, /api/v2/health -> identical envelope format\nINFO     backend.core.app:app.py:1536 \u2705 A1Betting canonical app created successfully
_____________ TestMLBExtrasRoutes.test_mlb_data_flow_integration ______________
tests\backend\routes\test_mlb_extras.py:501: in test_mlb_data_flow_integration
    with patch('backend.routes.mlb_extras.get_filtered_prizepicks_props', return_value=mock_props):
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
C:\Python313\Lib\unittest\mock.py:1497: in __enter__
    original, local = self.get_original()
                      ^^^^^^^^^^^^^^^^^^^
C:\Python313\Lib\unittest\mock.py:1467: in get_original
    raise AttributeError(
E   AttributeError: <module 'backend.routes.mlb_extras' from 'C:\\Users\\bcmad\\Downloads\\A1Betting7-13.2\\backend\\routes\\mlb_extras.py'> does not have the attribute 'get_filtered_prizepicks_props'
---------------------------- Captured stderr setup ----------------------------
2025-08-23 08:03:57,697 - backend.core.app - INFO - \U0001f680 Creating A1Betting canonical app...\n2025-08-23 08:03:57,697 - backend.core.app - INFO - \u2705 Request ID correlation middleware added\n2025-08-23 08:03:57,697 - backend.core.app - INFO - \u2705 Distributed trace correlation middleware added\n2025-08-23 08:03:57,697 - backend.core.app - INFO - \u2705 Structured logging middleware added\n2025-08-23 08:03:57,698 - backend.core.app - INFO - \u2705 Prometheus metrics middleware added\n2025-08-23 08:03:57,698 - backend.core.app - INFO - \u2705 Payload guard middleware added: max_size=262144 bytes, enforce_json=True, enabled=True\n2025-08-23 08:03:57,698 - backend.middleware.rate_limit - INFO - Rate limiting disabled\n2025-08-23 08:03:57,698 - backend.core.app - INFO - \u2705 Rate limiting middleware added: 100/min, burst=200, enabled=False\n2025-08-23 08:03:57,698 - backend.core.app - INFO - \u2705 Security headers middleware added: [HSTS, CSP(report-only), COOP, COEP], x_frame_options=DENY\n2025-08-23 08:03:57,698 - backend.core.app - INFO - \u2705 Legacy endpoint middleware added for usage telemetry and deprecation controls\n2025-08-23 08:03:57,698 - backend.exceptions.handlers - INFO - \u2705 PayloadRejectionError handler registered\n2025-08-23 08:03:57,698 - backend.exceptions.handlers - INFO - \u2705 All exception handlers registered with structured error taxonomy\n2025-08-23 08:03:57,698 - backend.core.app - INFO - \u2705 Centralized exception handlers registered\n2025-08-23 08:03:57,699 - backend.core.app - INFO - \u2705 PR11 Enhanced WebSocket client route included (/ws/client)\n2025-08-23 08:03:57,703 - backend.core.app - INFO - \u2705 Auth routes also exposed at root (/auth/*) for compatibility\n2025-08-23 08:03:57,703 - backend.core.app - INFO - \u2705 Auth and users routes included (auth with /api prefix)\n2025-08-23 08:03:57,704 - backend.core.app - INFO - \u2705 Diagnostics routes included (/api/v2/diagnostics/health, /api/v2/diagnostics/system)\n2025-08-23 08:03:57,705 - backend.core.app - INFO - \u2705 Meta cache routes included (/api/v2/meta/cache-stats, /api/v2/meta/cache-health)\n2025-08-23 08:03:57,705 - backend.core.app - INFO - \u2705 Legacy meta routes included (/api/v2/meta/legacy-usage, /api/v2/meta/migration-readiness)\n2025-08-23 08:03:57,708 - backend.core.app - ERROR - \u274c Failed to register CSP report routes: Invalid args for response field! Hint: check that <class 'logging.Logger'> is a valid Pydantic field type. If you are using a return type annotation that is not a valid Pydantic field (e.g. Union[Response, dict, None]) you can disable generating the response model from the type annotation with the path operation decorator parameter response_model=None. Read more: https://fastapi.tiangolo.com/tutorial/response-model/\n2025-08-23 08:03:57,708 - backend.core.app - INFO - \u2705 Trace test routes included (/api/trace/* endpoints)\n2025-08-23 08:03:57,710 - backend.core.app - INFO - \u2705 Model inference routes included (/api/v2/models/* endpoints)\n2025-08-23 08:03:57,711 - backend.core.app - INFO - \u2705 Observability events routes included (/api/v2/observability/* endpoints)\n2025-08-23 08:03:57,712 - backend.core.app - INFO - \u2705 Admin control routes included (/api/v2/models/shadow/* and /api/v2/models/admin/* endpoints)\n2025-08-23 08:03:57,715 - backend.core.app - INFO - \u2705 Enhanced WebSocket routes included (/ws/v2/* endpoints)\n2025-08-23 08:03:57,715 - backend.core.app - INFO - \u2705 WebSocket logging routes included (/api/websocket/* endpoints)\n2025-08-23 08:03:57,716 - backend.core.app - INFO - \u2705 Version routes included (/api/version/* endpoints)\n2025-08-23 08:03:57,716 - backend.core.app - INFO - \u2705 WebVitals pipeline routes included (/api/metrics/v1/* endpoints)\n2025-08-23 08:03:57,720 - backend.core.app - INFO - \u2705 Enhanced ML routes included (/api/enhanced-ml/* endpoints)\n2025-08-23 08:03:57,721 - backend.core.app - INFO - \u2705 Fallback enhanced-ml compatibility router mounted at /api/enhanced-ml\n2025-08-23 08:03:57,726 - backend.core.app - INFO - \u2705 Consolidated PrizePicks routes included (/api/v2/prizepicks/* endpoints)\n2025-08-23 08:03:57,729 - backend.core.app - INFO - \u2705 Consolidated ML routes included (/api/v2/ml/* endpoints)\n2025-08-23 08:03:57,731 - backend.core.app - ERROR - \u274c Failed to register consolidated Admin routes: parameter without a default follows parameter with a default (consolidated_admin.py, line 165)\n2025-08-23 08:03:57,734 - backend.core.app - INFO - \u2705 Odds & Line Movement routes included (/v1/odds/* endpoints)\n2025-08-23 08:03:57,738 - backend.core.app - INFO - \u2705 Advanced-Kelly compatibility router mounted at /api/advanced-kelly\n2025-08-23 08:03:57,740 - backend.core.app - ERROR - \u274c Failed to register Risk Management & Personalization routes: 'NoneType' object has no attribute 'alert_evaluation_interval_seconds'\n2025-08-23 08:03:57,741 - backend.core.app - INFO - \u2705 Dependencies Health routes included (/api/dependencies/* endpoints)\n2025-08-23 08:03:57,743 - backend.core.app - INFO - \u2705 Provider Resilience routes included (/api/provider-resilience/* endpoints)\n2025-08-23 08:03:57,745 - backend.core.app - INFO - \u2705 System capabilities routes included (/api/system/* endpoints)\n2025-08-23 08:03:57,746 - backend.core.app - INFO - \u2705 Real-time market streaming routes included (/streaming/* endpoints)\n2025-08-23 08:03:57,747 - backend.core.app - INFO - \u2705 Security HEAD endpoints included (/api/* HEAD endpoints)\n2025-08-23 08:03:57,749 - backend.core.app - INFO - \u2705 ML Model Registry routes included (/api/models/* endpoints)\n2025-08-23 08:03:57,750 - backend.core.app - INFO - \u2705 Data ingestion routes included (/api/v1/ingestion/* endpoints)\n2025-08-23 08:03:57,753 - backend.core.app - INFO - \u2705 Enterprise model registry routes included (/api/models/enterprise/* endpoints)\n2025-08-23 08:03:57,757 - backend.core.app - INFO - \u2705 Alert engine routes included (/api/alert-engine/* endpoints)\n2025-08-23 08:03:57,760 - backend.core.app - INFO - \u2705 PropFinder routes included (/api/propfinder/* endpoints)\n2025-08-23 08:03:57,761 - backend.core.app - WARNING - \u26a0\ufe0f Could not import multiple_sportsbook_routes: cannot import name 'RateLimiter' from 'backend.middleware.rate_limit' (C:\\Users\\bcmad\\Downloads\\A1Betting7-13.2\\backend\\middleware\\rate_limit.py)\n2025-08-23 08:03:57,764 - backend.core.app - INFO - \u2705 Sportsbook compatibility router mounted at /api/sportsbook\n2025-08-23 08:03:57,764 - backend.core.app - INFO - \U0001f50d Bootstrap validation scheduled on startup\n2025-08-23 08:03:57,764 - backend.core.app - INFO - \U0001f3e5 Health endpoints normalized: /api/health, /health, /api/v2/health -> identical envelope format\n2025-08-23 08:03:57,764 - backend.core.app - INFO - \u2705 A1Betting canonical app created successfully
----------------------------- Captured log setup ------------------------------
INFO     backend.core.app:app.py:65 \U0001f680 Creating A1Betting canonical app...\nINFO     backend.core.app:app.py:104 \u2705 Request ID correlation middleware added\nINFO     backend.core.app:app.py:114 \u2705 Distributed trace correlation middleware added\nINFO     backend.core.app:app.py:126 \u2705 Structured logging middleware added\nINFO     backend.core.app:app.py:146 \u2705 Prometheus metrics middleware added\nINFO     backend.core.app:app.py:167 \u2705 Payload guard middleware added: max_size=262144 bytes, enforce_json=True, enabled=True\nINFO     backend.middleware.rate_limit:rate_limit.py:90 Rate limiting disabled\nINFO     backend.core.app:app.py:202 \u2705 Rate limiting middleware added: 100/min, burst=200, enabled=False\nINFO     backend.core.app:app.py:244 \u2705 Security headers middleware added: [HSTS, CSP(report-only), COOP, COEP], x_frame_options=DENY\nINFO     backend.core.app:app.py:259 \u2705 Legacy endpoint middleware added for usage telemetry and deprecation controls\nINFO     backend.exceptions.handlers:handlers.py:235 \u2705 PayloadRejectionError handler registered\nINFO     backend.exceptions.handlers:handlers.py:250 \u2705 All exception handlers registered with structured error taxonomy\nINFO     backend.core.app:app.py:269 \u2705 Centralized exception handlers registered\nINFO     backend.core.app:app.py:332 \u2705 PR11 Enhanced WebSocket client route included (/ws/client)\nINFO     backend.core.app:app.py:702 \u2705 Auth routes also exposed at root (/auth/*) for compatibility\nINFO     backend.core.app:app.py:706 \u2705 Auth and users routes included (auth with /api prefix)\nINFO     backend.core.app:app.py:714 \u2705 Diagnostics routes included (/api/v2/diagnostics/health, /api/v2/diagnostics/system)\nINFO     backend.core.app:app.py:763 \u2705 Meta cache routes included (/api/v2/meta/cache-stats, /api/v2/meta/cache-health)\nINFO     backend.core.app:app.py:773 \u2705 Legacy meta routes included (/api/v2/meta/legacy-usage, /api/v2/meta/migration-readiness)\nERROR    backend.core.app:app.py:788 \u274c Failed to register CSP report routes: Invalid args for response field! Hint: check that <class 'logging.Logger'> is a valid Pydantic field type. If you are using a return type annotation that is not a valid Pydantic field (e.g. Union[Response, dict, None]) you can disable generating the response model from the type annotation with the path operation decorator parameter response_model=None. Read more: https://fastapi.tiangolo.com/tutorial/response-model/\nINFO     backend.core.app:app.py:794 \u2705 Trace test routes included (/api/trace/* endpoints)\nINFO     backend.core.app:app.py:804 \u2705 Model inference routes included (/api/v2/models/* endpoints)\nINFO     backend.core.app:app.py:814 \u2705 Observability events routes included (/api/v2/observability/* endpoints)\nINFO     backend.core.app:app.py:824 \u2705 Admin control routes included (/api/v2/models/shadow/* and /api/v2/models/admin/* endpoints)\nINFO     backend.core.app:app.py:834 \u2705 Enhanced WebSocket routes included (/ws/v2/* endpoints)\nINFO     backend.core.app:app.py:844 \u2705 WebSocket logging routes included (/api/websocket/* endpoints)\nINFO     backend.core.app:app.py:854 \u2705 Version routes included (/api/version/* endpoints)\nINFO     backend.core.app:app.py:864 \u2705 WebVitals pipeline routes included (/api/metrics/v1/* endpoints)\nINFO     backend.core.app:app.py:874 \u2705 Enhanced ML routes included (/api/enhanced-ml/* endpoints)\nINFO     backend.core.app:app.py:986 \u2705 Fallback enhanced-ml compatibility router mounted at /api/enhanced-ml\nINFO     backend.core.app:app.py:995 \u2705 Consolidated PrizePicks routes included (/api/v2/prizepicks/* endpoints)\nINFO     backend.core.app:app.py:1005 \u2705 Consolidated ML routes included (/api/v2/ml/* endpoints)\nERROR    backend.core.app:app.py:1019 \u274c Failed to register consolidated Admin routes: parameter without a default follows parameter with a default (consolidated_admin.py, line 165)\nINFO     backend.core.app:app.py:1025 \u2705 Odds & Line Movement routes included (/v1/odds/* endpoints)\nINFO     backend.core.app:app.py:1066 \u2705 Advanced-Kelly compatibility router mounted at /api/advanced-kelly\nERROR    backend.core.app:app.py:1078 \u274c Failed to register Risk Management & Personalization routes: 'NoneType' object has no attribute 'alert_evaluation_interval_seconds'\nINFO     backend.core.app:app.py:1084 \u2705 Dependencies Health routes included (/api/dependencies/* endpoints)\nINFO     backend.core.app:app.py:1094 \u2705 Provider Resilience routes included (/api/provider-resilience/* endpoints)\nINFO     backend.core.app:app.py:1104 \u2705 System capabilities routes included (/api/system/* endpoints)\nINFO     backend.core.app:app.py:1114 \u2705 Real-time market streaming routes included (/streaming/* endpoints)\nINFO     backend.core.app:app.py:1124 \u2705 Security HEAD endpoints included (/api/* HEAD endpoints)\nINFO     backend.core.app:app.py:1134 \u2705 ML Model Registry routes included (/api/models/* endpoints)\nINFO     backend.core.app:app.py:1144 \u2705 Data ingestion routes included (/api/v1/ingestion/* endpoints)\nINFO     backend.core.app:app.py:1154 \u2705 Enterprise model registry routes included (/api/models/enterprise/* endpoints)\nINFO     backend.core.app:app.py:1199 \u2705 Alert engine routes included (/api/alert-engine/* endpoints)\nINFO     backend.core.app:app.py:1209 \u2705 PropFinder routes included (/api/propfinder/* endpoints)\nWARNING  backend.core.app:app.py:1221 \u26a0\ufe0f Could not import multiple_sportsbook_routes: cannot import name 'RateLimiter' from 'backend.middleware.rate_limit' (C:\\Users\\bcmad\\Downloads\\A1Betting7-13.2\\backend\\middleware\\rate_limit.py)\nINFO     backend.core.app:app.py:1495 \u2705 Sportsbook compatibility router mounted at /api/sportsbook\nINFO     backend.core.app:app.py:1527 \U0001f50d Bootstrap validation scheduled on startup\nINFO     backend.core.app:app.py:1535 \U0001f3e5 Health endpoints normalized: /api/health, /health, /api/v2/health -> identical envelope format\nINFO     backend.core.app:app.py:1536 \u2705 A1Betting canonical app created successfully
__________ TestMLBExtrasRoutes.test_comprehensive_props_performance ___________
tests\backend\routes\test_mlb_extras.py:546: in test_comprehensive_props_performance
    assert response.status_code == status.HTTP_200_OK
E   assert 404 == 200
E    +  where 404 = <Response [404 Not Found]>.status_code
E    +  and   200 = status.HTTP_200_OK
---------------------------- Captured stderr setup ----------------------------
2025-08-23 08:03:57,801 - backend.core.app - INFO - \U0001f680 Creating A1Betting canonical app...\n2025-08-23 08:03:57,801 - backend.core.app - INFO - \u2705 Request ID correlation middleware added\n2025-08-23 08:03:57,801 - backend.core.app - INFO - \u2705 Distributed trace correlation middleware added\n2025-08-23 08:03:57,801 - backend.core.app - INFO - \u2705 Structured logging middleware added\n2025-08-23 08:03:57,801 - backend.core.app - INFO - \u2705 Prometheus metrics middleware added\n2025-08-23 08:03:57,801 - backend.core.app - INFO - \u2705 Payload guard middleware added: max_size=262144 bytes, enforce_json=True, enabled=True\n2025-08-23 08:03:57,801 - backend.middleware.rate_limit - INFO - Rate limiting disabled\n2025-08-23 08:03:57,801 - backend.core.app - INFO - \u2705 Rate limiting middleware added: 100/min, burst=200, enabled=False\n2025-08-23 08:03:57,801 - backend.core.app - INFO - \u2705 Security headers middleware added: [HSTS, CSP(report-only), COOP, COEP], x_frame_options=DENY\n2025-08-23 08:03:57,801 - backend.core.app - INFO - \u2705 Legacy endpoint middleware added for usage telemetry and deprecation controls\n2025-08-23 08:03:57,801 - backend.exceptions.handlers - INFO - \u2705 PayloadRejectionError handler registered\n2025-08-23 08:03:57,801 - backend.exceptions.handlers - INFO - \u2705 All exception handlers registered with structured error taxonomy\n2025-08-23 08:03:57,801 - backend.core.app - INFO - \u2705 Centralized exception handlers registered\n2025-08-23 08:03:57,802 - backend.core.app - INFO - \u2705 PR11 Enhanced WebSocket client route included (/ws/client)\n2025-08-23 08:03:57,806 - backend.core.app - INFO - \u2705 Auth routes also exposed at root (/auth/*) for compatibility\n2025-08-23 08:03:57,807 - backend.core.app - INFO - \u2705 Auth and users routes included (auth with /api prefix)\n2025-08-23 08:03:57,808 - backend.core.app - INFO - \u2705 Diagnostics routes included (/api/v2/diagnostics/health, /api/v2/diagnostics/system)\n2025-08-23 08:03:57,809 - backend.core.app - INFO - \u2705 Meta cache routes included (/api/v2/meta/cache-stats, /api/v2/meta/cache-health)\n2025-08-23 08:03:57,809 - backend.core.app - INFO - \u2705 Legacy meta routes included (/api/v2/meta/legacy-usage, /api/v2/meta/migration-readiness)\n2025-08-23 08:03:57,812 - backend.core.app - ERROR - \u274c Failed to register CSP report routes: Invalid args for response field! Hint: check that <class 'logging.Logger'> is a valid Pydantic field type. If you are using a return type annotation that is not a valid Pydantic field (e.g. Union[Response, dict, None]) you can disable generating the response model from the type annotation with the path operation decorator parameter response_model=None. Read more: https://fastapi.tiangolo.com/tutorial/response-model/\n2025-08-23 08:03:57,812 - backend.core.app - INFO - \u2705 Trace test routes included (/api/trace/* endpoints)\n2025-08-23 08:03:57,814 - backend.core.app - INFO - \u2705 Model inference routes included (/api/v2/models/* endpoints)\n2025-08-23 08:03:57,815 - backend.core.app - INFO - \u2705 Observability events routes included (/api/v2/observability/* endpoints)\n2025-08-23 08:03:57,816 - backend.core.app - INFO - \u2705 Admin control routes included (/api/v2/models/shadow/* and /api/v2/models/admin/* endpoints)\n2025-08-23 08:03:57,818 - backend.core.app - INFO - \u2705 Enhanced WebSocket routes included (/ws/v2/* endpoints)\n2025-08-23 08:03:57,819 - backend.core.app - INFO - \u2705 WebSocket logging routes included (/api/websocket/* endpoints)\n2025-08-23 08:03:57,820 - backend.core.app - INFO - \u2705 Version routes included (/api/version/* endpoints)\n2025-08-23 08:03:57,821 - backend.core.app - INFO - \u2705 WebVitals pipeline routes included (/api/metrics/v1/* endpoints)\n2025-08-23 08:03:57,825 - backend.core.app - INFO - \u2705 Enhanced ML routes included (/api/enhanced-ml/* endpoints)\n2025-08-23 08:03:57,825 - backend.core.app - INFO - \u2705 Fallback enhanced-ml compatibility router mounted at /api/enhanced-ml\n2025-08-23 08:03:57,830 - backend.core.app - INFO - \u2705 Consolidated PrizePicks routes included (/api/v2/prizepicks/* endpoints)\n2025-08-23 08:03:57,833 - backend.core.app - INFO - \u2705 Consolidated ML routes included (/api/v2/ml/* endpoints)\n2025-08-23 08:03:57,836 - backend.core.app - ERROR - \u274c Failed to register consolidated Admin routes: parameter without a default follows parameter with a default (consolidated_admin.py, line 165)\n2025-08-23 08:03:57,841 - backend.core.app - INFO - \u2705 Odds & Line Movement routes included (/v1/odds/* endpoints)\n2025-08-23 08:03:57,843 - backend.core.app - INFO - \u2705 Advanced-Kelly compatibility router mounted at /api/advanced-kelly\n2025-08-23 08:03:57,845 - backend.core.app - ERROR - \u274c Failed to register Risk Management & Personalization routes: 'NoneType' object has no attribute 'alert_evaluation_interval_seconds'\n2025-08-23 08:03:57,846 - backend.core.app - INFO - \u2705 Dependencies Health routes included (/api/dependencies/* endpoints)\n2025-08-23 08:03:57,848 - backend.core.app - INFO - \u2705 Provider Resilience routes included (/api/provider-resilience/* endpoints)\n2025-08-23 08:03:57,851 - backend.core.app - INFO - \u2705 System capabilities routes included (/api/system/* endpoints)\n2025-08-23 08:03:57,852 - backend.core.app - INFO - \u2705 Real-time market streaming routes included (/streaming/* endpoints)\n2025-08-23 08:03:57,854 - backend.core.app - INFO - \u2705 Security HEAD endpoints included (/api/* HEAD endpoints)\n2025-08-23 08:03:57,855 - backend.core.app - INFO - \u2705 ML Model Registry routes included (/api/models/* endpoints)\n2025-08-23 08:03:57,856 - backend.core.app - INFO - \u2705 Data ingestion routes included (/api/v1/ingestion/* endpoints)\n2025-08-23 08:03:57,860 - backend.core.app - INFO - \u2705 Enterprise model registry routes included (/api/models/enterprise/* endpoints)\n2025-08-23 08:03:57,864 - backend.core.app - INFO - \u2705 Alert engine routes included (/api/alert-engine/* endpoints)\n2025-08-23 08:03:57,867 - backend.core.app - INFO - \u2705 PropFinder routes included (/api/propfinder/* endpoints)\n2025-08-23 08:03:57,868 - backend.core.app - WARNING - \u26a0\ufe0f Could not import multiple_sportsbook_routes: cannot import name 'RateLimiter' from 'backend.middleware.rate_limit' (C:\\Users\\bcmad\\Downloads\\A1Betting7-13.2\\backend\\middleware\\rate_limit.py)\n2025-08-23 08:03:57,871 - backend.core.app - INFO - \u2705 Sportsbook compatibility router mounted at /api/sportsbook\n2025-08-23 08:03:57,871 - backend.core.app - INFO - \U0001f50d Bootstrap validation scheduled on startup\n2025-08-23 08:03:57,871 - backend.core.app - INFO - \U0001f3e5 Health endpoints normalized: /api/health, /health, /api/v2/health -> identical envelope format\n2025-08-23 08:03:57,871 - backend.core.app - INFO - \u2705 A1Betting canonical app created successfully
----------------------------- Captured log setup ------------------------------
INFO     backend.core.app:app.py:65 \U0001f680 Creating A1Betting canonical app...\nINFO     backend.core.app:app.py:104 \u2705 Request ID correlation middleware added\nINFO     backend.core.app:app.py:114 \u2705 Distributed trace correlation middleware added\nINFO     backend.core.app:app.py:126 \u2705 Structured logging middleware added\nINFO     backend.core.app:app.py:146 \u2705 Prometheus metrics middleware added\nINFO     backend.core.app:app.py:167 \u2705 Payload guard middleware added: max_size=262144 bytes, enforce_json=True, enabled=True\nINFO     backend.middleware.rate_limit:rate_limit.py:90 Rate limiting disabled\nINFO     backend.core.app:app.py:202 \u2705 Rate limiting middleware added: 100/min, burst=200, enabled=False\nINFO     backend.core.app:app.py:244 \u2705 Security headers middleware added: [HSTS, CSP(report-only), COOP, COEP], x_frame_options=DENY\nINFO     backend.core.app:app.py:259 \u2705 Legacy endpoint middleware added for usage telemetry and deprecation controls\nINFO     backend.exceptions.handlers:handlers.py:235 \u2705 PayloadRejectionError handler registered\nINFO     backend.exceptions.handlers:handlers.py:250 \u2705 All exception handlers registered with structured error taxonomy\nINFO     backend.core.app:app.py:269 \u2705 Centralized exception handlers registered\nINFO     backend.core.app:app.py:332 \u2705 PR11 Enhanced WebSocket client route included (/ws/client)\nINFO     backend.core.app:app.py:702 \u2705 Auth routes also exposed at root (/auth/*) for compatibility\nINFO     backend.core.app:app.py:706 \u2705 Auth and users routes included (auth with /api prefix)\nINFO     backend.core.app:app.py:714 \u2705 Diagnostics routes included (/api/v2/diagnostics/health, /api/v2/diagnostics/system)\nINFO     backend.core.app:app.py:763 \u2705 Meta cache routes included (/api/v2/meta/cache-stats, /api/v2/meta/cache-health)\nINFO     backend.core.app:app.py:773 \u2705 Legacy meta routes included (/api/v2/meta/legacy-usage, /api/v2/meta/migration-readiness)\nERROR    backend.core.app:app.py:788 \u274c Failed to register CSP report routes: Invalid args for response field! Hint: check that <class 'logging.Logger'> is a valid Pydantic field type. If you are using a return type annotation that is not a valid Pydantic field (e.g. Union[Response, dict, None]) you can disable generating the response model from the type annotation with the path operation decorator parameter response_model=None. Read more: https://fastapi.tiangolo.com/tutorial/response-model/\nINFO     backend.core.app:app.py:794 \u2705 Trace test routes included (/api/trace/* endpoints)\nINFO     backend.core.app:app.py:804 \u2705 Model inference routes included (/api/v2/models/* endpoints)\nINFO     backend.core.app:app.py:814 \u2705 Observability events routes included (/api/v2/observability/* endpoints)\nINFO     backend.core.app:app.py:824 \u2705 Admin control routes included (/api/v2/models/shadow/* and /api/v2/models/admin/* endpoints)\nINFO     backend.core.app:app.py:834 \u2705 Enhanced WebSocket routes included (/ws/v2/* endpoints)\nINFO     backend.core.app:app.py:844 \u2705 WebSocket logging routes included (/api/websocket/* endpoints)\nINFO     backend.core.app:app.py:854 \u2705 Version routes included (/api/version/* endpoints)\nINFO     backend.core.app:app.py:864 \u2705 WebVitals pipeline routes included (/api/metrics/v1/* endpoints)\nINFO     backend.core.app:app.py:874 \u2705 Enhanced ML routes included (/api/enhanced-ml/* endpoints)\nINFO     backend.core.app:app.py:986 \u2705 Fallback enhanced-ml compatibility router mounted at /api/enhanced-ml\nINFO     backend.core.app:app.py:995 \u2705 Consolidated PrizePicks routes included (/api/v2/prizepicks/* endpoints)\nINFO     backend.core.app:app.py:1005 \u2705 Consolidated ML routes included (/api/v2/ml/* endpoints)\nERROR    backend.core.app:app.py:1019 \u274c Failed to register consolidated Admin routes: parameter without a default follows parameter with a default (consolidated_admin.py, line 165)\nINFO     backend.core.app:app.py:1025 \u2705 Odds & Line Movement routes included (/v1/odds/* endpoints)\nINFO     backend.core.app:app.py:1066 \u2705 Advanced-Kelly compatibility router mounted at /api/advanced-kelly\nERROR    backend.core.app:app.py:1078 \u274c Failed to register Risk Management & Personalization routes: 'NoneType' object has no attribute 'alert_evaluation_interval_seconds'\nINFO     backend.core.app:app.py:1084 \u2705 Dependencies Health routes included (/api/dependencies/* endpoints)\nINFO     backend.core.app:app.py:1094 \u2705 Provider Resilience routes included (/api/provider-resilience/* endpoints)\nINFO     backend.core.app:app.py:1104 \u2705 System capabilities routes included (/api/system/* endpoints)\nINFO     backend.core.app:app.py:1114 \u2705 Real-time market streaming routes included (/streaming/* endpoints)\nINFO     backend.core.app:app.py:1124 \u2705 Security HEAD endpoints included (/api/* HEAD endpoints)\nINFO     backend.core.app:app.py:1134 \u2705 ML Model Registry routes included (/api/models/* endpoints)\nINFO     backend.core.app:app.py:1144 \u2705 Data ingestion routes included (/api/v1/ingestion/* endpoints)\nINFO     backend.core.app:app.py:1154 \u2705 Enterprise model registry routes included (/api/models/enterprise/* endpoints)\nINFO     backend.core.app:app.py:1199 \u2705 Alert engine routes included (/api/alert-engine/* endpoints)\nINFO     backend.core.app:app.py:1209 \u2705 PropFinder routes included (/api/propfinder/* endpoints)\nWARNING  backend.core.app:app.py:1221 \u26a0\ufe0f Could not import multiple_sportsbook_routes: cannot import name 'RateLimiter' from 'backend.middleware.rate_limit' (C:\\Users\\bcmad\\Downloads\\A1Betting7-13.2\\backend\\middleware\\rate_limit.py)\nINFO     backend.core.app:app.py:1495 \u2705 Sportsbook compatibility router mounted at /api/sportsbook\nINFO     backend.core.app:app.py:1527 \U0001f50d Bootstrap validation scheduled on startup\nINFO     backend.core.app:app.py:1535 \U0001f3e5 Health endpoints normalized: /api/health, /health, /api/v2/health -> identical envelope format\nINFO     backend.core.app:app.py:1536 \u2705 A1Betting canonical app created successfully
---------------------------- Captured stderr call -----------------------------
2025-08-23 08:03:57,873 - backend.middleware.rate_limit - INFO - Rate limiting disabled\n2025-08-23 08:03:57,873 - backend.middleware.security_headers - INFO - \u2705 Security headers middleware enabled: CSP=report-only, HSTS=True, strict_mode=False\n2025-08-23 08:03:57,873 - backend.middleware.legacy_middleware - INFO - Registered known legacy endpoints with forwarding paths\n2025-08-23 08:03:57,873 - backend.middleware.legacy_middleware - INFO - Legacy middleware initialized\n{"timestamp": "2025-08-23T13:03:57.874347", "level": "INFO", "logger": "a1betting", "message": "Request started", "module": "structured_logging_middleware", "function": "log_request_start", "line": 109, "request_id": "096ca742-5595-41e9-8fa7-42d28b516625", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro", "event_type": "request_start", "method": "GET", "url": "http://testserver/mlb/comprehensive-props/662253?optimize_performance=true", "path": "/mlb/comprehensive-props/662253", "query_params": {"optimize_performance": "true"}, "client_ip": "127.0.0.1", "user_agent": "python-httpx/0.28.1", "content_type": null}\n2025-08-23 08:03:57,874 - backend.middleware.request_id_middleware - INFO - Request started: GET /mlb/comprehensive-props/662253\n2025-08-23 08:03:57,875 - backend.errors.catalog - ERROR - API Error: E4040_NOT_FOUND\n2025-08-23 08:03:57,875 - backend.middleware.request_id_middleware - INFO - Request completed: GET /mlb/comprehensive-props/662253 - 404\n2025-08-23 08:03:57,875 - backend.middleware.distributed_trace_middleware - INFO - Trace completed: 46fcf226-b487-4a1e-9ec9-567e73490e70\n{"timestamp": "2025-08-23T13:03:57.875283", "level": "INFO", "logger": "a1betting", "message": "Request completed", "module": "structured_logging_middleware", "function": "log_request_success", "line": 124, "request_id": "096ca742-5595-41e9-8fa7-42d28b516625", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro", "event_type": "request_success", "method": "GET", "url": "http://testserver/mlb/comprehensive-props/662253?optimize_performance=true", "path": "/mlb/comprehensive-props/662253", "status_code": 404, "duration_ms": 0.96, "response_size": "243", "performance_category": "fast"}
------------------------------ Captured log call ------------------------------
INFO     backend.middleware.rate_limit:rate_limit.py:90 Rate limiting disabled\nINFO     backend.middleware.security_headers:security_headers.py:71 \u2705 Security headers middleware enabled: CSP=report-only, HSTS=True, strict_mode=False\nINFO     backend.middleware.legacy_middleware:legacy_middleware.py:68 Registered known legacy endpoints with forwarding paths\nINFO     backend.middleware.legacy_middleware:legacy_middleware.py:44 Legacy middleware initialized\nINFO     backend.middleware.request_id_middleware:request_id_middleware.py:67 Request started: GET /mlb/comprehensive-props/662253\nERROR    backend.errors.catalog:catalog.py:304 API Error: E4040_NOT_FOUND\nINFO     backend.middleware.request_id_middleware:request_id_middleware.py:92 Request completed: GET /mlb/comprehensive-props/662253 - 404\nINFO     backend.middleware.distributed_trace_middleware:distributed_trace_middleware.py:224 Trace completed: 46fcf226-b487-4a1e-9ec9-567e73490e70
____________ TestMLBExtrasRoutes.test_multiple_concurrent_requests ____________
tests\backend\routes\test_mlb_extras.py:558: in test_multiple_concurrent_requests
    with patch('backend.routes.mlb_extras.get_filtered_prizepicks_props', return_value=mock_props):
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
C:\Python313\Lib\unittest\mock.py:1497: in __enter__
    original, local = self.get_original()
                      ^^^^^^^^^^^^^^^^^^^
C:\Python313\Lib\unittest\mock.py:1467: in get_original
    raise AttributeError(
E   AttributeError: <module 'backend.routes.mlb_extras' from 'C:\\Users\\bcmad\\Downloads\\A1Betting7-13.2\\backend\\routes\\mlb_extras.py'> does not have the attribute 'get_filtered_prizepicks_props'
---------------------------- Captured stderr setup ----------------------------
2025-08-23 08:03:57,882 - backend.core.app - INFO - \U0001f680 Creating A1Betting canonical app...\n2025-08-23 08:03:57,882 - backend.core.app - INFO - \u2705 Request ID correlation middleware added\n2025-08-23 08:03:57,882 - backend.core.app - INFO - \u2705 Distributed trace correlation middleware added\n2025-08-23 08:03:57,882 - backend.core.app - INFO - \u2705 Structured logging middleware added\n2025-08-23 08:03:57,882 - backend.core.app - INFO - \u2705 Prometheus metrics middleware added\n2025-08-23 08:03:57,882 - backend.core.app - INFO - \u2705 Payload guard middleware added: max_size=262144 bytes, enforce_json=True, enabled=True\n2025-08-23 08:03:57,882 - backend.middleware.rate_limit - INFO - Rate limiting disabled\n2025-08-23 08:03:57,882 - backend.core.app - INFO - \u2705 Rate limiting middleware added: 100/min, burst=200, enabled=False\n2025-08-23 08:03:57,882 - backend.core.app - INFO - \u2705 Security headers middleware added: [HSTS, CSP(report-only), COOP, COEP], x_frame_options=DENY\n2025-08-23 08:03:57,882 - backend.core.app - INFO - \u2705 Legacy endpoint middleware added for usage telemetry and deprecation controls\n2025-08-23 08:03:57,882 - backend.exceptions.handlers - INFO - \u2705 PayloadRejectionError handler registered\n2025-08-23 08:03:57,882 - backend.exceptions.handlers - INFO - \u2705 All exception handlers registered with structured error taxonomy\n2025-08-23 08:03:57,882 - backend.core.app - INFO - \u2705 Centralized exception handlers registered\n2025-08-23 08:03:57,884 - backend.core.app - INFO - \u2705 PR11 Enhanced WebSocket client route included (/ws/client)\n2025-08-23 08:03:57,887 - backend.core.app - INFO - \u2705 Auth routes also exposed at root (/auth/*) for compatibility\n2025-08-23 08:03:57,887 - backend.core.app - INFO - \u2705 Auth and users routes included (auth with /api prefix)\n2025-08-23 08:03:57,888 - backend.core.app - INFO - \u2705 Diagnostics routes included (/api/v2/diagnostics/health, /api/v2/diagnostics/system)\n2025-08-23 08:03:57,889 - backend.core.app - INFO - \u2705 Meta cache routes included (/api/v2/meta/cache-stats, /api/v2/meta/cache-health)\n2025-08-23 08:03:57,890 - backend.core.app - INFO - \u2705 Legacy meta routes included (/api/v2/meta/legacy-usage, /api/v2/meta/migration-readiness)\n2025-08-23 08:03:57,893 - backend.core.app - ERROR - \u274c Failed to register CSP report routes: Invalid args for response field! Hint: check that <class 'logging.Logger'> is a valid Pydantic field type. If you are using a return type annotation that is not a valid Pydantic field (e.g. Union[Response, dict, None]) you can disable generating the response model from the type annotation with the path operation decorator parameter response_model=None. Read more: https://fastapi.tiangolo.com/tutorial/response-model/\n2025-08-23 08:03:57,893 - backend.core.app - INFO - \u2705 Trace test routes included (/api/trace/* endpoints)\n2025-08-23 08:03:57,894 - backend.core.app - INFO - \u2705 Model inference routes included (/api/v2/models/* endpoints)\n2025-08-23 08:03:57,896 - backend.core.app - INFO - \u2705 Observability events routes included (/api/v2/observability/* endpoints)\n2025-08-23 08:03:57,897 - backend.core.app - INFO - \u2705 Admin control routes included (/api/v2/models/shadow/* and /api/v2/models/admin/* endpoints)\n2025-08-23 08:03:57,900 - backend.core.app - INFO - \u2705 Enhanced WebSocket routes included (/ws/v2/* endpoints)\n2025-08-23 08:03:57,900 - backend.core.app - INFO - \u2705 WebSocket logging routes included (/api/websocket/* endpoints)\n2025-08-23 08:03:57,901 - backend.core.app - INFO - \u2705 Version routes included (/api/version/* endpoints)\n2025-08-23 08:03:57,902 - backend.core.app - INFO - \u2705 WebVitals pipeline routes included (/api/metrics/v1/* endpoints)\n2025-08-23 08:03:57,906 - backend.core.app - INFO - \u2705 Enhanced ML routes included (/api/enhanced-ml/* endpoints)\n2025-08-23 08:03:57,906 - backend.core.app - INFO - \u2705 Fallback enhanced-ml compatibility router mounted at /api/enhanced-ml\n2025-08-23 08:03:57,912 - backend.core.app - INFO - \u2705 Consolidated PrizePicks routes included (/api/v2/prizepicks/* endpoints)\n2025-08-23 08:03:57,915 - backend.core.app - INFO - \u2705 Consolidated ML routes included (/api/v2/ml/* endpoints)\n2025-08-23 08:03:57,917 - backend.core.app - ERROR - \u274c Failed to register consolidated Admin routes: parameter without a default follows parameter with a default (consolidated_admin.py, line 165)\n2025-08-23 08:03:57,920 - backend.core.app - INFO - \u2705 Odds & Line Movement routes included (/v1/odds/* endpoints)\n2025-08-23 08:03:57,922 - backend.core.app - INFO - \u2705 Advanced-Kelly compatibility router mounted at /api/advanced-kelly\n2025-08-23 08:03:57,924 - backend.core.app - ERROR - \u274c Failed to register Risk Management & Personalization routes: 'NoneType' object has no attribute 'alert_evaluation_interval_seconds'\n2025-08-23 08:03:57,925 - backend.core.app - INFO - \u2705 Dependencies Health routes included (/api/dependencies/* endpoints)\n2025-08-23 08:03:57,928 - backend.core.app - INFO - \u2705 Provider Resilience routes included (/api/provider-resilience/* endpoints)\n2025-08-23 08:03:57,929 - backend.core.app - INFO - \u2705 System capabilities routes included (/api/system/* endpoints)\n2025-08-23 08:03:57,930 - backend.core.app - INFO - \u2705 Real-time market streaming routes included (/streaming/* endpoints)\n2025-08-23 08:03:57,931 - backend.core.app - INFO - \u2705 Security HEAD endpoints included (/api/* HEAD endpoints)\n2025-08-23 08:03:57,933 - backend.core.app - INFO - \u2705 ML Model Registry routes included (/api/models/* endpoints)\n2025-08-23 08:03:57,933 - backend.core.app - INFO - \u2705 Data ingestion routes included (/api/v1/ingestion/* endpoints)\n2025-08-23 08:03:57,939 - backend.core.app - INFO - \u2705 Enterprise model registry routes included (/api/models/enterprise/* endpoints)\n2025-08-23 08:03:57,942 - backend.core.app - INFO - \u2705 Alert engine routes included (/api/alert-engine/* endpoints)\n2025-08-23 08:03:57,946 - backend.core.app - INFO - \u2705 PropFinder routes included (/api/propfinder/* endpoints)\n2025-08-23 08:03:57,947 - backend.core.app - WARNING - \u26a0\ufe0f Could not import multiple_sportsbook_routes: cannot import name 'RateLimiter' from 'backend.middleware.rate_limit' (C:\\Users\\bcmad\\Downloads\\A1Betting7-13.2\\backend\\middleware\\rate_limit.py)\n2025-08-23 08:03:57,950 - backend.core.app - INFO - \u2705 Sportsbook compatibility router mounted at /api/sportsbook\n2025-08-23 08:03:57,950 - backend.core.app - INFO - \U0001f50d Bootstrap validation scheduled on startup\n2025-08-23 08:03:57,950 - backend.core.app - INFO - \U0001f3e5 Health endpoints normalized: /api/health, /health, /api/v2/health -> identical envelope format\n2025-08-23 08:03:57,950 - backend.core.app - INFO - \u2705 A1Betting canonical app created successfully
----------------------------- Captured log setup ------------------------------
INFO     backend.core.app:app.py:65 \U0001f680 Creating A1Betting canonical app...\nINFO     backend.core.app:app.py:104 \u2705 Request ID correlation middleware added\nINFO     backend.core.app:app.py:114 \u2705 Distributed trace correlation middleware added\nINFO     backend.core.app:app.py:126 \u2705 Structured logging middleware added\nINFO     backend.core.app:app.py:146 \u2705 Prometheus metrics middleware added\nINFO     backend.core.app:app.py:167 \u2705 Payload guard middleware added: max_size=262144 bytes, enforce_json=True, enabled=True\nINFO     backend.middleware.rate_limit:rate_limit.py:90 Rate limiting disabled\nINFO     backend.core.app:app.py:202 \u2705 Rate limiting middleware added: 100/min, burst=200, enabled=False\nINFO     backend.core.app:app.py:244 \u2705 Security headers middleware added: [HSTS, CSP(report-only), COOP, COEP], x_frame_options=DENY\nINFO     backend.core.app:app.py:259 \u2705 Legacy endpoint middleware added for usage telemetry and deprecation controls\nINFO     backend.exceptions.handlers:handlers.py:235 \u2705 PayloadRejectionError handler registered\nINFO     backend.exceptions.handlers:handlers.py:250 \u2705 All exception handlers registered with structured error taxonomy\nINFO     backend.core.app:app.py:269 \u2705 Centralized exception handlers registered\nINFO     backend.core.app:app.py:332 \u2705 PR11 Enhanced WebSocket client route included (/ws/client)\nINFO     backend.core.app:app.py:702 \u2705 Auth routes also exposed at root (/auth/*) for compatibility\nINFO     backend.core.app:app.py:706 \u2705 Auth and users routes included (auth with /api prefix)\nINFO     backend.core.app:app.py:714 \u2705 Diagnostics routes included (/api/v2/diagnostics/health, /api/v2/diagnostics/system)\nINFO     backend.core.app:app.py:763 \u2705 Meta cache routes included (/api/v2/meta/cache-stats, /api/v2/meta/cache-health)\nINFO     backend.core.app:app.py:773 \u2705 Legacy meta routes included (/api/v2/meta/legacy-usage, /api/v2/meta/migration-readiness)\nERROR    backend.core.app:app.py:788 \u274c Failed to register CSP report routes: Invalid args for response field! Hint: check that <class 'logging.Logger'> is a valid Pydantic field type. If you are using a return type annotation that is not a valid Pydantic field (e.g. Union[Response, dict, None]) you can disable generating the response model from the type annotation with the path operation decorator parameter response_model=None. Read more: https://fastapi.tiangolo.com/tutorial/response-model/\nINFO     backend.core.app:app.py:794 \u2705 Trace test routes included (/api/trace/* endpoints)\nINFO     backend.core.app:app.py:804 \u2705 Model inference routes included (/api/v2/models/* endpoints)\nINFO     backend.core.app:app.py:814 \u2705 Observability events routes included (/api/v2/observability/* endpoints)\nINFO     backend.core.app:app.py:824 \u2705 Admin control routes included (/api/v2/models/shadow/* and /api/v2/models/admin/* endpoints)\nINFO     backend.core.app:app.py:834 \u2705 Enhanced WebSocket routes included (/ws/v2/* endpoints)\nINFO     backend.core.app:app.py:844 \u2705 WebSocket logging routes included (/api/websocket/* endpoints)\nINFO     backend.core.app:app.py:854 \u2705 Version routes included (/api/version/* endpoints)\nINFO     backend.core.app:app.py:864 \u2705 WebVitals pipeline routes included (/api/metrics/v1/* endpoints)\nINFO     backend.core.app:app.py:874 \u2705 Enhanced ML routes included (/api/enhanced-ml/* endpoints)\nINFO     backend.core.app:app.py:986 \u2705 Fallback enhanced-ml compatibility router mounted at /api/enhanced-ml\nINFO     backend.core.app:app.py:995 \u2705 Consolidated PrizePicks routes included (/api/v2/prizepicks/* endpoints)\nINFO     backend.core.app:app.py:1005 \u2705 Consolidated ML routes included (/api/v2/ml/* endpoints)\nERROR    backend.core.app:app.py:1019 \u274c Failed to register consolidated Admin routes: parameter without a default follows parameter with a default (consolidated_admin.py, line 165)\nINFO     backend.core.app:app.py:1025 \u2705 Odds & Line Movement routes included (/v1/odds/* endpoints)\nINFO     backend.core.app:app.py:1066 \u2705 Advanced-Kelly compatibility router mounted at /api/advanced-kelly\nERROR    backend.core.app:app.py:1078 \u274c Failed to register Risk Management & Personalization routes: 'NoneType' object has no attribute 'alert_evaluation_interval_seconds'\nINFO     backend.core.app:app.py:1084 \u2705 Dependencies Health routes included (/api/dependencies/* endpoints)\nINFO     backend.core.app:app.py:1094 \u2705 Provider Resilience routes included (/api/provider-resilience/* endpoints)\nINFO     backend.core.app:app.py:1104 \u2705 System capabilities routes included (/api/system/* endpoints)\nINFO     backend.core.app:app.py:1114 \u2705 Real-time market streaming routes included (/streaming/* endpoints)\nINFO     backend.core.app:app.py:1124 \u2705 Security HEAD endpoints included (/api/* HEAD endpoints)\nINFO     backend.core.app:app.py:1134 \u2705 ML Model Registry routes included (/api/models/* endpoints)\nINFO     backend.core.app:app.py:1144 \u2705 Data ingestion routes included (/api/v1/ingestion/* endpoints)\nINFO     backend.core.app:app.py:1154 \u2705 Enterprise model registry routes included (/api/models/enterprise/* endpoints)\nINFO     backend.core.app:app.py:1199 \u2705 Alert engine routes included (/api/alert-engine/* endpoints)\nINFO     backend.core.app:app.py:1209 \u2705 PropFinder routes included (/api/propfinder/* endpoints)\nWARNING  backend.core.app:app.py:1221 \u26a0\ufe0f Could not import multiple_sportsbook_routes: cannot import name 'RateLimiter' from 'backend.middleware.rate_limit' (C:\\Users\\bcmad\\Downloads\\A1Betting7-13.2\\backend\\middleware\\rate_limit.py)\nINFO     backend.core.app:app.py:1495 \u2705 Sportsbook compatibility router mounted at /api/sportsbook\nINFO     backend.core.app:app.py:1527 \U0001f50d Bootstrap validation scheduled on startup\nINFO     backend.core.app:app.py:1535 \U0001f3e5 Health endpoints normalized: /api/health, /health, /api/v2/health -> identical envelope format\nINFO     backend.core.app:app.py:1536 \u2705 A1Betting canonical app created successfully
_________ TestMultipleSportsbookRoutes.test_get_player_props_success __________
tests\backend\routes\test_multiple_sportsbook_routes.py:84: in test_get_player_props_success
    assert len(data["data"]) == 2
E   assert 0 == 2
E    +  where 0 = len([])
---------------------------- Captured stderr setup ----------------------------
2025-08-23 08:03:57,987 - backend.core.app - INFO - \U0001f680 Creating A1Betting canonical app...\n2025-08-23 08:03:57,987 - backend.core.app - INFO - \u2705 Request ID correlation middleware added\n2025-08-23 08:03:57,988 - backend.core.app - INFO - \u2705 Distributed trace correlation middleware added\n2025-08-23 08:03:57,988 - backend.core.app - INFO - \u2705 Structured logging middleware added\n2025-08-23 08:03:57,988 - backend.core.app - INFO - \u2705 Prometheus metrics middleware added\n2025-08-23 08:03:57,988 - backend.core.app - INFO - \u2705 Payload guard middleware added: max_size=262144 bytes, enforce_json=True, enabled=True\n2025-08-23 08:03:57,988 - backend.middleware.rate_limit - INFO - Rate limiting disabled\n2025-08-23 08:03:57,988 - backend.core.app - INFO - \u2705 Rate limiting middleware added: 100/min, burst=200, enabled=False\n2025-08-23 08:03:57,988 - backend.core.app - INFO - \u2705 Security headers middleware added: [HSTS, CSP(report-only), COOP, COEP], x_frame_options=DENY\n2025-08-23 08:03:57,988 - backend.core.app - INFO - \u2705 Legacy endpoint middleware added for usage telemetry and deprecation controls\n2025-08-23 08:03:57,988 - backend.exceptions.handlers - INFO - \u2705 PayloadRejectionError handler registered\n2025-08-23 08:03:57,988 - backend.exceptions.handlers - INFO - \u2705 All exception handlers registered with structured error taxonomy\n2025-08-23 08:03:57,988 - backend.core.app - INFO - \u2705 Centralized exception handlers registered\n2025-08-23 08:03:57,989 - backend.core.app - INFO - \u2705 PR11 Enhanced WebSocket client route included (/ws/client)\n2025-08-23 08:03:57,993 - backend.core.app - INFO - \u2705 Auth routes also exposed at root (/auth/*) for compatibility\n2025-08-23 08:03:57,993 - backend.core.app - INFO - \u2705 Auth and users routes included (auth with /api prefix)\n2025-08-23 08:03:57,994 - backend.core.app - INFO - \u2705 Diagnostics routes included (/api/v2/diagnostics/health, /api/v2/diagnostics/system)\n2025-08-23 08:03:57,995 - backend.core.app - INFO - \u2705 Meta cache routes included (/api/v2/meta/cache-stats, /api/v2/meta/cache-health)\n2025-08-23 08:03:57,996 - backend.core.app - INFO - \u2705 Legacy meta routes included (/api/v2/meta/legacy-usage, /api/v2/meta/migration-readiness)\n2025-08-23 08:03:57,999 - backend.core.app - ERROR - \u274c Failed to register CSP report routes: Invalid args for response field! Hint: check that <class 'logging.Logger'> is a valid Pydantic field type. If you are using a return type annotation that is not a valid Pydantic field (e.g. Union[Response, dict, None]) you can disable generating the response model from the type annotation with the path operation decorator parameter response_model=None. Read more: https://fastapi.tiangolo.com/tutorial/response-model/\n2025-08-23 08:03:57,999 - backend.core.app - INFO - \u2705 Trace test routes included (/api/trace/* endpoints)\n2025-08-23 08:03:58,000 - backend.core.app - INFO - \u2705 Model inference routes included (/api/v2/models/* endpoints)\n2025-08-23 08:03:58,002 - backend.core.app - INFO - \u2705 Observability events routes included (/api/v2/observability/* endpoints)\n2025-08-23 08:03:58,003 - backend.core.app - INFO - \u2705 Admin control routes included (/api/v2/models/shadow/* and /api/v2/models/admin/* endpoints)\n2025-08-23 08:03:58,006 - backend.core.app - INFO - \u2705 Enhanced WebSocket routes included (/ws/v2/* endpoints)\n2025-08-23 08:03:58,007 - backend.core.app - INFO - \u2705 WebSocket logging routes included (/api/websocket/* endpoints)\n2025-08-23 08:03:58,008 - backend.core.app - INFO - \u2705 Version routes included (/api/version/* endpoints)\n2025-08-23 08:03:58,008 - backend.core.app - INFO - \u2705 WebVitals pipeline routes included (/api/metrics/v1/* endpoints)\n2025-08-23 08:03:58,012 - backend.core.app - INFO - \u2705 Enhanced ML routes included (/api/enhanced-ml/* endpoints)\n2025-08-23 08:03:58,013 - backend.core.app - INFO - \u2705 Fallback enhanced-ml compatibility router mounted at /api/enhanced-ml\n2025-08-23 08:03:58,018 - backend.core.app - INFO - \u2705 Consolidated PrizePicks routes included (/api/v2/prizepicks/* endpoints)\n2025-08-23 08:03:58,022 - backend.core.app - INFO - \u2705 Consolidated ML routes included (/api/v2/ml/* endpoints)\n2025-08-23 08:03:58,024 - backend.core.app - ERROR - \u274c Failed to register consolidated Admin routes: parameter without a default follows parameter with a default (consolidated_admin.py, line 165)\n2025-08-23 08:03:58,027 - backend.core.app - INFO - \u2705 Odds & Line Movement routes included (/v1/odds/* endpoints)\n2025-08-23 08:03:58,029 - backend.core.app - INFO - \u2705 Advanced-Kelly compatibility router mounted at /api/advanced-kelly\n2025-08-23 08:03:58,032 - backend.core.app - ERROR - \u274c Failed to register Risk Management & Personalization routes: 'NoneType' object has no attribute 'alert_evaluation_interval_seconds'\n2025-08-23 08:03:58,034 - backend.core.app - INFO - \u2705 Dependencies Health routes included (/api/dependencies/* endpoints)\n2025-08-23 08:03:58,036 - backend.core.app - INFO - \u2705 Provider Resilience routes included (/api/provider-resilience/* endpoints)\n2025-08-23 08:03:58,038 - backend.core.app - INFO - \u2705 System capabilities routes included (/api/system/* endpoints)\n2025-08-23 08:03:58,039 - backend.core.app - INFO - \u2705 Real-time market streaming routes included (/streaming/* endpoints)\n2025-08-23 08:03:58,040 - backend.core.app - INFO - \u2705 Security HEAD endpoints included (/api/* HEAD endpoints)\n2025-08-23 08:03:58,041 - backend.core.app - INFO - \u2705 ML Model Registry routes included (/api/models/* endpoints)\n2025-08-23 08:03:58,042 - backend.core.app - INFO - \u2705 Data ingestion routes included (/api/v1/ingestion/* endpoints)\n2025-08-23 08:03:58,046 - backend.core.app - INFO - \u2705 Enterprise model registry routes included (/api/models/enterprise/* endpoints)\n2025-08-23 08:03:58,050 - backend.core.app - INFO - \u2705 Alert engine routes included (/api/alert-engine/* endpoints)\n2025-08-23 08:03:58,055 - backend.core.app - INFO - \u2705 PropFinder routes included (/api/propfinder/* endpoints)\n2025-08-23 08:03:58,056 - backend.core.app - WARNING - \u26a0\ufe0f Could not import multiple_sportsbook_routes: cannot import name 'RateLimiter' from 'backend.middleware.rate_limit' (C:\\Users\\bcmad\\Downloads\\A1Betting7-13.2\\backend\\middleware\\rate_limit.py)\n2025-08-23 08:03:58,059 - backend.core.app - INFO - \u2705 Sportsbook compatibility router mounted at /api/sportsbook\n2025-08-23 08:03:58,059 - backend.core.app - INFO - \U0001f50d Bootstrap validation scheduled on startup\n2025-08-23 08:03:58,059 - backend.core.app - INFO - \U0001f3e5 Health endpoints normalized: /api/health, /health, /api/v2/health -> identical envelope format\n2025-08-23 08:03:58,059 - backend.core.app - INFO - \u2705 A1Betting canonical app created successfully
----------------------------- Captured log setup ------------------------------
INFO     backend.core.app:app.py:65 \U0001f680 Creating A1Betting canonical app...\nINFO     backend.core.app:app.py:104 \u2705 Request ID correlation middleware added\nINFO     backend.core.app:app.py:114 \u2705 Distributed trace correlation middleware added\nINFO     backend.core.app:app.py:126 \u2705 Structured logging middleware added\nINFO     backend.core.app:app.py:146 \u2705 Prometheus metrics middleware added\nINFO     backend.core.app:app.py:167 \u2705 Payload guard middleware added: max_size=262144 bytes, enforce_json=True, enabled=True\nINFO     backend.middleware.rate_limit:rate_limit.py:90 Rate limiting disabled\nINFO     backend.core.app:app.py:202 \u2705 Rate limiting middleware added: 100/min, burst=200, enabled=False\nINFO     backend.core.app:app.py:244 \u2705 Security headers middleware added: [HSTS, CSP(report-only), COOP, COEP], x_frame_options=DENY\nINFO     backend.core.app:app.py:259 \u2705 Legacy endpoint middleware added for usage telemetry and deprecation controls\nINFO     backend.exceptions.handlers:handlers.py:235 \u2705 PayloadRejectionError handler registered\nINFO     backend.exceptions.handlers:handlers.py:250 \u2705 All exception handlers registered with structured error taxonomy\nINFO     backend.core.app:app.py:269 \u2705 Centralized exception handlers registered\nINFO     backend.core.app:app.py:332 \u2705 PR11 Enhanced WebSocket client route included (/ws/client)\nINFO     backend.core.app:app.py:702 \u2705 Auth routes also exposed at root (/auth/*) for compatibility\nINFO     backend.core.app:app.py:706 \u2705 Auth and users routes included (auth with /api prefix)\nINFO     backend.core.app:app.py:714 \u2705 Diagnostics routes included (/api/v2/diagnostics/health, /api/v2/diagnostics/system)\nINFO     backend.core.app:app.py:763 \u2705 Meta cache routes included (/api/v2/meta/cache-stats, /api/v2/meta/cache-health)\nINFO     backend.core.app:app.py:773 \u2705 Legacy meta routes included (/api/v2/meta/legacy-usage, /api/v2/meta/migration-readiness)\nERROR    backend.core.app:app.py:788 \u274c Failed to register CSP report routes: Invalid args for response field! Hint: check that <class 'logging.Logger'> is a valid Pydantic field type. If you are using a return type annotation that is not a valid Pydantic field (e.g. Union[Response, dict, None]) you can disable generating the response model from the type annotation with the path operation decorator parameter response_model=None. Read more: https://fastapi.tiangolo.com/tutorial/response-model/\nINFO     backend.core.app:app.py:794 \u2705 Trace test routes included (/api/trace/* endpoints)\nINFO     backend.core.app:app.py:804 \u2705 Model inference routes included (/api/v2/models/* endpoints)\nINFO     backend.core.app:app.py:814 \u2705 Observability events routes included (/api/v2/observability/* endpoints)\nINFO     backend.core.app:app.py:824 \u2705 Admin control routes included (/api/v2/models/shadow/* and /api/v2/models/admin/* endpoints)\nINFO     backend.core.app:app.py:834 \u2705 Enhanced WebSocket routes included (/ws/v2/* endpoints)\nINFO     backend.core.app:app.py:844 \u2705 WebSocket logging routes included (/api/websocket/* endpoints)\nINFO     backend.core.app:app.py:854 \u2705 Version routes included (/api/version/* endpoints)\nINFO     backend.core.app:app.py:864 \u2705 WebVitals pipeline routes included (/api/metrics/v1/* endpoints)\nINFO     backend.core.app:app.py:874 \u2705 Enhanced ML routes included (/api/enhanced-ml/* endpoints)\nINFO     backend.core.app:app.py:986 \u2705 Fallback enhanced-ml compatibility router mounted at /api/enhanced-ml\nINFO     backend.core.app:app.py:995 \u2705 Consolidated PrizePicks routes included (/api/v2/prizepicks/* endpoints)\nINFO     backend.core.app:app.py:1005 \u2705 Consolidated ML routes included (/api/v2/ml/* endpoints)\nERROR    backend.core.app:app.py:1019 \u274c Failed to register consolidated Admin routes: parameter without a default follows parameter with a default (consolidated_admin.py, line 165)\nINFO     backend.core.app:app.py:1025 \u2705 Odds & Line Movement routes included (/v1/odds/* endpoints)\nINFO     backend.core.app:app.py:1066 \u2705 Advanced-Kelly compatibility router mounted at /api/advanced-kelly\nERROR    backend.core.app:app.py:1078 \u274c Failed to register Risk Management & Personalization routes: 'NoneType' object has no attribute 'alert_evaluation_interval_seconds'\nINFO     backend.core.app:app.py:1084 \u2705 Dependencies Health routes included (/api/dependencies/* endpoints)\nINFO     backend.core.app:app.py:1094 \u2705 Provider Resilience routes included (/api/provider-resilience/* endpoints)\nINFO     backend.core.app:app.py:1104 \u2705 System capabilities routes included (/api/system/* endpoints)\nINFO     backend.core.app:app.py:1114 \u2705 Real-time market streaming routes included (/streaming/* endpoints)\nINFO     backend.core.app:app.py:1124 \u2705 Security HEAD endpoints included (/api/* HEAD endpoints)\nINFO     backend.core.app:app.py:1134 \u2705 ML Model Registry routes included (/api/models/* endpoints)\nINFO     backend.core.app:app.py:1144 \u2705 Data ingestion routes included (/api/v1/ingestion/* endpoints)\nINFO     backend.core.app:app.py:1154 \u2705 Enterprise model registry routes included (/api/models/enterprise/* endpoints)\nINFO     backend.core.app:app.py:1199 \u2705 Alert engine routes included (/api/alert-engine/* endpoints)\nINFO     backend.core.app:app.py:1209 \u2705 PropFinder routes included (/api/propfinder/* endpoints)\nWARNING  backend.core.app:app.py:1221 \u26a0\ufe0f Could not import multiple_sportsbook_routes: cannot import name 'RateLimiter' from 'backend.middleware.rate_limit' (C:\\Users\\bcmad\\Downloads\\A1Betting7-13.2\\backend\\middleware\\rate_limit.py)\nINFO     backend.core.app:app.py:1495 \u2705 Sportsbook compatibility router mounted at /api/sportsbook\nINFO     backend.core.app:app.py:1527 \U0001f50d Bootstrap validation scheduled on startup\nINFO     backend.core.app:app.py:1535 \U0001f3e5 Health endpoints normalized: /api/health, /health, /api/v2/health -> identical envelope format\nINFO     backend.core.app:app.py:1536 \u2705 A1Betting canonical app created successfully
---------------------------- Captured stderr call -----------------------------
2025-08-23 08:03:58,062 - backend.routes - WARNING - Failed to import backend.routes.multiple_sportsbook_routes, creating test placeholder\n2025-08-23 08:03:58,064 - backend.middleware.rate_limit - INFO - Rate limiting disabled\n2025-08-23 08:03:58,064 - backend.middleware.security_headers - INFO - \u2705 Security headers middleware enabled: CSP=report-only, HSTS=True, strict_mode=False\n2025-08-23 08:03:58,064 - backend.middleware.legacy_middleware - INFO - Registered known legacy endpoints with forwarding paths\n2025-08-23 08:03:58,064 - backend.middleware.legacy_middleware - INFO - Legacy middleware initialized\n2025-08-23 08:03:58,065 - backend.services.legacy_registry - INFO - Registered legacy endpoint: /api/sportsbook/player-props -> None\n2025-08-23 08:03:58,065 - backend.middleware.legacy_middleware - INFO - Legacy endpoint accessed: GET /api/sportsbook/player-props (count: 1)\n{"timestamp": "2025-08-23T13:03:58.065650", "level": "INFO", "logger": "a1betting", "message": "Request started", "module": "structured_logging_middleware", "function": "log_request_start", "line": 109, "request_id": "90a7e1c0-a2fa-4a2d-8782-2bddc094d4ec", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro", "event_type": "request_start", "method": "GET", "url": "http://testserver/api/sportsbook/player-props?sport=mlb", "path": "/api/sportsbook/player-props", "query_params": {"sport": "mlb"}, "client_ip": "127.0.0.1", "user_agent": "python-httpx/0.28.1", "content_type": null}\n2025-08-23 08:03:58,065 - backend.middleware.request_id_middleware - INFO - Request started: GET /api/sportsbook/player-props\n2025-08-23 08:03:58,066 - backend.middleware.request_id_middleware - INFO - Request completed: GET /api/sportsbook/player-props - 200\n2025-08-23 08:03:58,066 - backend.middleware.distributed_trace_middleware - INFO - Trace completed: 7f1e9c85-ec76-45fe-80d4-5b9d6a7489f4\n{"timestamp": "2025-08-23T13:03:58.066712", "level": "INFO", "logger": "a1betting", "message": "Request completed", "module": "structured_logging_middleware", "function": "log_request_success", "line": 124, "request_id": "90a7e1c0-a2fa-4a2d-8782-2bddc094d4ec", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro", "event_type": "request_success", "method": "GET", "url": "http://testserver/api/sportsbook/player-props?sport=mlb", "path": "/api/sportsbook/player-props", "status_code": 200, "duration_ms": 1.09, "response_size": "39", "performance_category": "fast"}
------------------------------ Captured log call ------------------------------
WARNING  backend.routes:__init__.py:29 Failed to import backend.routes.multiple_sportsbook_routes, creating test placeholder\nINFO     backend.middleware.rate_limit:rate_limit.py:90 Rate limiting disabled\nINFO     backend.middleware.security_headers:security_headers.py:71 \u2705 Security headers middleware enabled: CSP=report-only, HSTS=True, strict_mode=False\nINFO     backend.middleware.legacy_middleware:legacy_middleware.py:68 Registered known legacy endpoints with forwarding paths\nINFO     backend.middleware.legacy_middleware:legacy_middleware.py:44 Legacy middleware initialized\nINFO     backend.services.legacy_registry:legacy_registry.py:102 Registered legacy endpoint: /api/sportsbook/player-props -> None\nINFO     backend.middleware.legacy_middleware:legacy_middleware.py:177 Legacy endpoint accessed: GET /api/sportsbook/player-props (count: 1)\nINFO     backend.middleware.request_id_middleware:request_id_middleware.py:67 Request started: GET /api/sportsbook/player-props\nINFO     backend.middleware.request_id_middleware:request_id_middleware.py:92 Request completed: GET /api/sportsbook/player-props - 200\nINFO     backend.middleware.distributed_trace_middleware:distributed_trace_middleware.py:224 Trace completed: 7f1e9c85-ec76-45fe-80d4-5b9d6a7489f4
_______ TestMultipleSportsbookRoutes.test_get_player_props_with_filters _______
tests\backend\routes\test_multiple_sportsbook_routes.py:124: in test_get_player_props_with_filters
    assert len(data["data"]) == 1
E   assert 0 == 1
E    +  where 0 = len([])
---------------------------- Captured stderr setup ----------------------------
2025-08-23 08:03:58,098 - backend.core.app - INFO - \U0001f680 Creating A1Betting canonical app...\n2025-08-23 08:03:58,099 - backend.core.app - INFO - \u2705 Request ID correlation middleware added\n2025-08-23 08:03:58,099 - backend.core.app - INFO - \u2705 Distributed trace correlation middleware added\n2025-08-23 08:03:58,099 - backend.core.app - INFO - \u2705 Structured logging middleware added\n2025-08-23 08:03:58,099 - backend.core.app - INFO - \u2705 Prometheus metrics middleware added\n2025-08-23 08:03:58,099 - backend.core.app - INFO - \u2705 Payload guard middleware added: max_size=262144 bytes, enforce_json=True, enabled=True\n2025-08-23 08:03:58,099 - backend.middleware.rate_limit - INFO - Rate limiting disabled\n2025-08-23 08:03:58,099 - backend.core.app - INFO - \u2705 Rate limiting middleware added: 100/min, burst=200, enabled=False\n2025-08-23 08:03:58,099 - backend.core.app - INFO - \u2705 Security headers middleware added: [HSTS, CSP(report-only), COOP, COEP], x_frame_options=DENY\n2025-08-23 08:03:58,099 - backend.core.app - INFO - \u2705 Legacy endpoint middleware added for usage telemetry and deprecation controls\n2025-08-23 08:03:58,099 - backend.exceptions.handlers - INFO - \u2705 PayloadRejectionError handler registered\n2025-08-23 08:03:58,099 - backend.exceptions.handlers - INFO - \u2705 All exception handlers registered with structured error taxonomy\n2025-08-23 08:03:58,099 - backend.core.app - INFO - \u2705 Centralized exception handlers registered\n2025-08-23 08:03:58,101 - backend.core.app - INFO - \u2705 PR11 Enhanced WebSocket client route included (/ws/client)\n2025-08-23 08:03:58,105 - backend.core.app - INFO - \u2705 Auth routes also exposed at root (/auth/*) for compatibility\n2025-08-23 08:03:58,105 - backend.core.app - INFO - \u2705 Auth and users routes included (auth with /api prefix)\n2025-08-23 08:03:58,106 - backend.core.app - INFO - \u2705 Diagnostics routes included (/api/v2/diagnostics/health, /api/v2/diagnostics/system)\n2025-08-23 08:03:58,107 - backend.core.app - INFO - \u2705 Meta cache routes included (/api/v2/meta/cache-stats, /api/v2/meta/cache-health)\n2025-08-23 08:03:58,108 - backend.core.app - INFO - \u2705 Legacy meta routes included (/api/v2/meta/legacy-usage, /api/v2/meta/migration-readiness)\n2025-08-23 08:03:58,110 - backend.core.app - ERROR - \u274c Failed to register CSP report routes: Invalid args for response field! Hint: check that <class 'logging.Logger'> is a valid Pydantic field type. If you are using a return type annotation that is not a valid Pydantic field (e.g. Union[Response, dict, None]) you can disable generating the response model from the type annotation with the path operation decorator parameter response_model=None. Read more: https://fastapi.tiangolo.com/tutorial/response-model/\n2025-08-23 08:03:58,110 - backend.core.app - INFO - \u2705 Trace test routes included (/api/trace/* endpoints)\n2025-08-23 08:03:58,112 - backend.core.app - INFO - \u2705 Model inference routes included (/api/v2/models/* endpoints)\n2025-08-23 08:03:58,113 - backend.core.app - INFO - \u2705 Observability events routes included (/api/v2/observability/* endpoints)\n2025-08-23 08:03:58,114 - backend.core.app - INFO - \u2705 Admin control routes included (/api/v2/models/shadow/* and /api/v2/models/admin/* endpoints)\n2025-08-23 08:03:58,116 - backend.core.app - INFO - \u2705 Enhanced WebSocket routes included (/ws/v2/* endpoints)\n2025-08-23 08:03:58,117 - backend.core.app - INFO - \u2705 WebSocket logging routes included (/api/websocket/* endpoints)\n2025-08-23 08:03:58,119 - backend.core.app - INFO - \u2705 Version routes included (/api/version/* endpoints)\n2025-08-23 08:03:58,119 - backend.core.app - INFO - \u2705 WebVitals pipeline routes included (/api/metrics/v1/* endpoints)\n2025-08-23 08:03:58,123 - backend.core.app - INFO - \u2705 Enhanced ML routes included (/api/enhanced-ml/* endpoints)\n2025-08-23 08:03:58,123 - backend.core.app - INFO - \u2705 Fallback enhanced-ml compatibility router mounted at /api/enhanced-ml\n2025-08-23 08:03:58,128 - backend.core.app - INFO - \u2705 Consolidated PrizePicks routes included (/api/v2/prizepicks/* endpoints)\n2025-08-23 08:03:58,132 - backend.core.app - INFO - \u2705 Consolidated ML routes included (/api/v2/ml/* endpoints)\n2025-08-23 08:03:58,134 - backend.core.app - ERROR - \u274c Failed to register consolidated Admin routes: parameter without a default follows parameter with a default (consolidated_admin.py, line 165)\n2025-08-23 08:03:58,137 - backend.core.app - INFO - \u2705 Odds & Line Movement routes included (/v1/odds/* endpoints)\n2025-08-23 08:03:58,138 - backend.core.app - INFO - \u2705 Advanced-Kelly compatibility router mounted at /api/advanced-kelly\n2025-08-23 08:03:58,141 - backend.core.app - ERROR - \u274c Failed to register Risk Management & Personalization routes: 'NoneType' object has no attribute 'alert_evaluation_interval_seconds'\n2025-08-23 08:03:58,142 - backend.core.app - INFO - \u2705 Dependencies Health routes included (/api/dependencies/* endpoints)\n2025-08-23 08:03:58,144 - backend.core.app - INFO - \u2705 Provider Resilience routes included (/api/provider-resilience/* endpoints)\n2025-08-23 08:03:58,146 - backend.core.app - INFO - \u2705 System capabilities routes included (/api/system/* endpoints)\n2025-08-23 08:03:58,147 - backend.core.app - INFO - \u2705 Real-time market streaming routes included (/streaming/* endpoints)\n2025-08-23 08:03:58,148 - backend.core.app - INFO - \u2705 Security HEAD endpoints included (/api/* HEAD endpoints)\n2025-08-23 08:03:58,150 - backend.core.app - INFO - \u2705 ML Model Registry routes included (/api/models/* endpoints)\n2025-08-23 08:03:58,151 - backend.core.app - INFO - \u2705 Data ingestion routes included (/api/v1/ingestion/* endpoints)\n2025-08-23 08:03:58,154 - backend.core.app - INFO - \u2705 Enterprise model registry routes included (/api/models/enterprise/* endpoints)\n2025-08-23 08:03:58,158 - backend.core.app - INFO - \u2705 Alert engine routes included (/api/alert-engine/* endpoints)\n2025-08-23 08:03:58,162 - backend.core.app - INFO - \u2705 PropFinder routes included (/api/propfinder/* endpoints)\n2025-08-23 08:03:58,163 - backend.core.app - WARNING - \u26a0\ufe0f Could not import multiple_sportsbook_routes: cannot import name 'RateLimiter' from 'backend.middleware.rate_limit' (C:\\Users\\bcmad\\Downloads\\A1Betting7-13.2\\backend\\middleware\\rate_limit.py)\n2025-08-23 08:03:58,165 - backend.core.app - INFO - \u2705 Sportsbook compatibility router mounted at /api/sportsbook\n2025-08-23 08:03:58,166 - backend.core.app - INFO - \U0001f50d Bootstrap validation scheduled on startup\n2025-08-23 08:03:58,166 - backend.core.app - INFO - \U0001f3e5 Health endpoints normalized: /api/health, /health, /api/v2/health -> identical envelope format\n2025-08-23 08:03:58,166 - backend.core.app - INFO - \u2705 A1Betting canonical app created successfully
----------------------------- Captured log setup ------------------------------
INFO     backend.core.app:app.py:65 \U0001f680 Creating A1Betting canonical app...\nINFO     backend.core.app:app.py:104 \u2705 Request ID correlation middleware added\nINFO     backend.core.app:app.py:114 \u2705 Distributed trace correlation middleware added\nINFO     backend.core.app:app.py:126 \u2705 Structured logging middleware added\nINFO     backend.core.app:app.py:146 \u2705 Prometheus metrics middleware added\nINFO     backend.core.app:app.py:167 \u2705 Payload guard middleware added: max_size=262144 bytes, enforce_json=True, enabled=True\nINFO     backend.middleware.rate_limit:rate_limit.py:90 Rate limiting disabled\nINFO     backend.core.app:app.py:202 \u2705 Rate limiting middleware added: 100/min, burst=200, enabled=False\nINFO     backend.core.app:app.py:244 \u2705 Security headers middleware added: [HSTS, CSP(report-only), COOP, COEP], x_frame_options=DENY\nINFO     backend.core.app:app.py:259 \u2705 Legacy endpoint middleware added for usage telemetry and deprecation controls\nINFO     backend.exceptions.handlers:handlers.py:235 \u2705 PayloadRejectionError handler registered\nINFO     backend.exceptions.handlers:handlers.py:250 \u2705 All exception handlers registered with structured error taxonomy\nINFO     backend.core.app:app.py:269 \u2705 Centralized exception handlers registered\nINFO     backend.core.app:app.py:332 \u2705 PR11 Enhanced WebSocket client route included (/ws/client)\nINFO     backend.core.app:app.py:702 \u2705 Auth routes also exposed at root (/auth/*) for compatibility\nINFO     backend.core.app:app.py:706 \u2705 Auth and users routes included (auth with /api prefix)\nINFO     backend.core.app:app.py:714 \u2705 Diagnostics routes included (/api/v2/diagnostics/health, /api/v2/diagnostics/system)\nINFO     backend.core.app:app.py:763 \u2705 Meta cache routes included (/api/v2/meta/cache-stats, /api/v2/meta/cache-health)\nINFO     backend.core.app:app.py:773 \u2705 Legacy meta routes included (/api/v2/meta/legacy-usage, /api/v2/meta/migration-readiness)\nERROR    backend.core.app:app.py:788 \u274c Failed to register CSP report routes: Invalid args for response field! Hint: check that <class 'logging.Logger'> is a valid Pydantic field type. If you are using a return type annotation that is not a valid Pydantic field (e.g. Union[Response, dict, None]) you can disable generating the response model from the type annotation with the path operation decorator parameter response_model=None. Read more: https://fastapi.tiangolo.com/tutorial/response-model/\nINFO     backend.core.app:app.py:794 \u2705 Trace test routes included (/api/trace/* endpoints)\nINFO     backend.core.app:app.py:804 \u2705 Model inference routes included (/api/v2/models/* endpoints)\nINFO     backend.core.app:app.py:814 \u2705 Observability events routes included (/api/v2/observability/* endpoints)\nINFO     backend.core.app:app.py:824 \u2705 Admin control routes included (/api/v2/models/shadow/* and /api/v2/models/admin/* endpoints)\nINFO     backend.core.app:app.py:834 \u2705 Enhanced WebSocket routes included (/ws/v2/* endpoints)\nINFO     backend.core.app:app.py:844 \u2705 WebSocket logging routes included (/api/websocket/* endpoints)\nINFO     backend.core.app:app.py:854 \u2705 Version routes included (/api/version/* endpoints)\nINFO     backend.core.app:app.py:864 \u2705 WebVitals pipeline routes included (/api/metrics/v1/* endpoints)\nINFO     backend.core.app:app.py:874 \u2705 Enhanced ML routes included (/api/enhanced-ml/* endpoints)\nINFO     backend.core.app:app.py:986 \u2705 Fallback enhanced-ml compatibility router mounted at /api/enhanced-ml\nINFO     backend.core.app:app.py:995 \u2705 Consolidated PrizePicks routes included (/api/v2/prizepicks/* endpoints)\nINFO     backend.core.app:app.py:1005 \u2705 Consolidated ML routes included (/api/v2/ml/* endpoints)\nERROR    backend.core.app:app.py:1019 \u274c Failed to register consolidated Admin routes: parameter without a default follows parameter with a default (consolidated_admin.py, line 165)\nINFO     backend.core.app:app.py:1025 \u2705 Odds & Line Movement routes included (/v1/odds/* endpoints)\nINFO     backend.core.app:app.py:1066 \u2705 Advanced-Kelly compatibility router mounted at /api/advanced-kelly\nERROR    backend.core.app:app.py:1078 \u274c Failed to register Risk Management & Personalization routes: 'NoneType' object has no attribute 'alert_evaluation_interval_seconds'\nINFO     backend.core.app:app.py:1084 \u2705 Dependencies Health routes included (/api/dependencies/* endpoints)\nINFO     backend.core.app:app.py:1094 \u2705 Provider Resilience routes included (/api/provider-resilience/* endpoints)\nINFO     backend.core.app:app.py:1104 \u2705 System capabilities routes included (/api/system/* endpoints)\nINFO     backend.core.app:app.py:1114 \u2705 Real-time market streaming routes included (/streaming/* endpoints)\nINFO     backend.core.app:app.py:1124 \u2705 Security HEAD endpoints included (/api/* HEAD endpoints)\nINFO     backend.core.app:app.py:1134 \u2705 ML Model Registry routes included (/api/models/* endpoints)\nINFO     backend.core.app:app.py:1144 \u2705 Data ingestion routes included (/api/v1/ingestion/* endpoints)\nINFO     backend.core.app:app.py:1154 \u2705 Enterprise model registry routes included (/api/models/enterprise/* endpoints)\nINFO     backend.core.app:app.py:1199 \u2705 Alert engine routes included (/api/alert-engine/* endpoints)\nINFO     backend.core.app:app.py:1209 \u2705 PropFinder routes included (/api/propfinder/* endpoints)\nWARNING  backend.core.app:app.py:1221 \u26a0\ufe0f Could not import multiple_sportsbook_routes: cannot import name 'RateLimiter' from 'backend.middleware.rate_limit' (C:\\Users\\bcmad\\Downloads\\A1Betting7-13.2\\backend\\middleware\\rate_limit.py)\nINFO     backend.core.app:app.py:1495 \u2705 Sportsbook compatibility router mounted at /api/sportsbook\nINFO     backend.core.app:app.py:1527 \U0001f50d Bootstrap validation scheduled on startup\nINFO     backend.core.app:app.py:1535 \U0001f3e5 Health endpoints normalized: /api/health, /health, /api/v2/health -> identical envelope format\nINFO     backend.core.app:app.py:1536 \u2705 A1Betting canonical app created successfully
---------------------------- Captured stderr call -----------------------------
2025-08-23 08:03:58,170 - backend.middleware.rate_limit - INFO - Rate limiting disabled\n2025-08-23 08:03:58,170 - backend.middleware.security_headers - INFO - \u2705 Security headers middleware enabled: CSP=report-only, HSTS=True, strict_mode=False\n2025-08-23 08:03:58,170 - backend.middleware.legacy_middleware - INFO - Registered known legacy endpoints with forwarding paths\n2025-08-23 08:03:58,170 - backend.middleware.legacy_middleware - INFO - Legacy middleware initialized\n2025-08-23 08:03:58,170 - backend.middleware.legacy_middleware - INFO - Legacy endpoint accessed: GET /api/sportsbook/player-props (count: 2)\n{"timestamp": "2025-08-23T13:03:58.172187", "level": "INFO", "logger": "a1betting", "message": "Request started", "module": "structured_logging_middleware", "function": "log_request_start", "line": 109, "request_id": "1c3d2077-2583-49ee-be00-9b55aadb4ce0", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro", "event_type": "request_start", "method": "GET", "url": "http://testserver/api/sportsbook/player-props?sport=mlb&player_name=Aaron%20Judge&providers=DraftKings,FanDuel", "path": "/api/sportsbook/player-props", "query_params": {"sport": "mlb", "player_name": "Aaron Judge", "providers": "DraftKings,FanDuel"}, "client_ip": "127.0.0.1", "user_agent": "python-httpx/0.28.1", "content_type": null}\n2025-08-23 08:03:58,172 - backend.middleware.request_id_middleware - INFO - Request started: GET /api/sportsbook/player-props\n2025-08-23 08:03:58,172 - backend.middleware.request_id_middleware - INFO - Request completed: GET /api/sportsbook/player-props - 200\n2025-08-23 08:03:58,172 - backend.middleware.distributed_trace_middleware - INFO - Trace completed: d0f78c15-8c90-4c44-a6ab-57a870280096\n{"timestamp": "2025-08-23T13:03:58.173008", "level": "INFO", "logger": "a1betting", "message": "Request completed", "module": "structured_logging_middleware", "function": "log_request_success", "line": 124, "request_id": "1c3d2077-2583-49ee-be00-9b55aadb4ce0", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro", "event_type": "request_success", "method": "GET", "url": "http://testserver/api/sportsbook/player-props?sport=mlb&player_name=Aaron%20Judge&providers=DraftKings,FanDuel", "path": "/api/sportsbook/player-props", "status_code": 200, "duration_ms": 0.94, "response_size": "39", "performance_category": "fast"}
------------------------------ Captured log call ------------------------------
INFO     backend.middleware.rate_limit:rate_limit.py:90 Rate limiting disabled\nINFO     backend.middleware.security_headers:security_headers.py:71 \u2705 Security headers middleware enabled: CSP=report-only, HSTS=True, strict_mode=False\nINFO     backend.middleware.legacy_middleware:legacy_middleware.py:68 Registered known legacy endpoints with forwarding paths\nINFO     backend.middleware.legacy_middleware:legacy_middleware.py:44 Legacy middleware initialized\nINFO     backend.middleware.legacy_middleware:legacy_middleware.py:177 Legacy endpoint accessed: GET /api/sportsbook/player-props (count: 2)\nINFO     backend.middleware.request_id_middleware:request_id_middleware.py:67 Request started: GET /api/sportsbook/player-props\nINFO     backend.middleware.request_id_middleware:request_id_middleware.py:92 Request completed: GET /api/sportsbook/player-props - 200\nINFO     backend.middleware.distributed_trace_middleware:distributed_trace_middleware.py:224 Trace completed: d0f78c15-8c90-4c44-a6ab-57a870280096
______ TestMultipleSportsbookRoutes.test_get_player_props_missing_sport _______
tests\backend\routes\test_multiple_sportsbook_routes.py:137: in test_get_player_props_missing_sport
    assert response.status_code == status.HTTP_422_UNPROCESSABLE_ENTITY
E   assert 200 == 422
E    +  where 200 = <Response [200 OK]>.status_code
E    +  and   422 = status.HTTP_422_UNPROCESSABLE_ENTITY
---------------------------- Captured stderr setup ----------------------------
2025-08-23 08:03:58,181 - backend.core.app - INFO - \U0001f680 Creating A1Betting canonical app...\n2025-08-23 08:03:58,181 - backend.core.app - INFO - \u2705 Request ID correlation middleware added\n2025-08-23 08:03:58,182 - backend.core.app - INFO - \u2705 Distributed trace correlation middleware added\n2025-08-23 08:03:58,182 - backend.core.app - INFO - \u2705 Structured logging middleware added\n2025-08-23 08:03:58,182 - backend.core.app - INFO - \u2705 Prometheus metrics middleware added\n2025-08-23 08:03:58,182 - backend.core.app - INFO - \u2705 Payload guard middleware added: max_size=262144 bytes, enforce_json=True, enabled=True\n2025-08-23 08:03:58,182 - backend.middleware.rate_limit - INFO - Rate limiting disabled\n2025-08-23 08:03:58,182 - backend.core.app - INFO - \u2705 Rate limiting middleware added: 100/min, burst=200, enabled=False\n2025-08-23 08:03:58,182 - backend.core.app - INFO - \u2705 Security headers middleware added: [HSTS, CSP(report-only), COOP, COEP], x_frame_options=DENY\n2025-08-23 08:03:58,182 - backend.core.app - INFO - \u2705 Legacy endpoint middleware added for usage telemetry and deprecation controls\n2025-08-23 08:03:58,182 - backend.exceptions.handlers - INFO - \u2705 PayloadRejectionError handler registered\n2025-08-23 08:03:58,182 - backend.exceptions.handlers - INFO - \u2705 All exception handlers registered with structured error taxonomy\n2025-08-23 08:03:58,182 - backend.core.app - INFO - \u2705 Centralized exception handlers registered\n2025-08-23 08:03:58,183 - backend.core.app - INFO - \u2705 PR11 Enhanced WebSocket client route included (/ws/client)\n2025-08-23 08:03:58,187 - backend.core.app - INFO - \u2705 Auth routes also exposed at root (/auth/*) for compatibility\n2025-08-23 08:03:58,187 - backend.core.app - INFO - \u2705 Auth and users routes included (auth with /api prefix)\n2025-08-23 08:03:58,188 - backend.core.app - INFO - \u2705 Diagnostics routes included (/api/v2/diagnostics/health, /api/v2/diagnostics/system)\n2025-08-23 08:03:58,189 - backend.core.app - INFO - \u2705 Meta cache routes included (/api/v2/meta/cache-stats, /api/v2/meta/cache-health)\n2025-08-23 08:03:58,190 - backend.core.app - INFO - \u2705 Legacy meta routes included (/api/v2/meta/legacy-usage, /api/v2/meta/migration-readiness)\n2025-08-23 08:03:58,192 - backend.core.app - ERROR - \u274c Failed to register CSP report routes: Invalid args for response field! Hint: check that <class 'logging.Logger'> is a valid Pydantic field type. If you are using a return type annotation that is not a valid Pydantic field (e.g. Union[Response, dict, None]) you can disable generating the response model from the type annotation with the path operation decorator parameter response_model=None. Read more: https://fastapi.tiangolo.com/tutorial/response-model/\n2025-08-23 08:03:58,193 - backend.core.app - INFO - \u2705 Trace test routes included (/api/trace/* endpoints)\n2025-08-23 08:03:58,194 - backend.core.app - INFO - \u2705 Model inference routes included (/api/v2/models/* endpoints)\n2025-08-23 08:03:58,196 - backend.core.app - INFO - \u2705 Observability events routes included (/api/v2/observability/* endpoints)\n2025-08-23 08:03:58,197 - backend.core.app - INFO - \u2705 Admin control routes included (/api/v2/models/shadow/* and /api/v2/models/admin/* endpoints)\n2025-08-23 08:03:58,199 - backend.core.app - INFO - \u2705 Enhanced WebSocket routes included (/ws/v2/* endpoints)\n2025-08-23 08:03:58,200 - backend.core.app - INFO - \u2705 WebSocket logging routes included (/api/websocket/* endpoints)\n2025-08-23 08:03:58,201 - backend.core.app - INFO - \u2705 Version routes included (/api/version/* endpoints)\n2025-08-23 08:03:58,201 - backend.core.app - INFO - \u2705 WebVitals pipeline routes included (/api/metrics/v1/* endpoints)\n2025-08-23 08:03:58,205 - backend.core.app - INFO - \u2705 Enhanced ML routes included (/api/enhanced-ml/* endpoints)\n2025-08-23 08:03:58,206 - backend.core.app - INFO - \u2705 Fallback enhanced-ml compatibility router mounted at /api/enhanced-ml\n2025-08-23 08:03:58,212 - backend.core.app - INFO - \u2705 Consolidated PrizePicks routes included (/api/v2/prizepicks/* endpoints)\n2025-08-23 08:03:58,215 - backend.core.app - INFO - \u2705 Consolidated ML routes included (/api/v2/ml/* endpoints)\n2025-08-23 08:03:58,217 - backend.core.app - ERROR - \u274c Failed to register consolidated Admin routes: parameter without a default follows parameter with a default (consolidated_admin.py, line 165)\n2025-08-23 08:03:58,220 - backend.core.app - INFO - \u2705 Odds & Line Movement routes included (/v1/odds/* endpoints)\n2025-08-23 08:03:58,222 - backend.core.app - INFO - \u2705 Advanced-Kelly compatibility router mounted at /api/advanced-kelly\n2025-08-23 08:03:58,224 - backend.core.app - ERROR - \u274c Failed to register Risk Management & Personalization routes: 'NoneType' object has no attribute 'alert_evaluation_interval_seconds'\n2025-08-23 08:03:58,226 - backend.core.app - INFO - \u2705 Dependencies Health routes included (/api/dependencies/* endpoints)\n2025-08-23 08:03:58,228 - backend.core.app - INFO - \u2705 Provider Resilience routes included (/api/provider-resilience/* endpoints)\n2025-08-23 08:03:58,229 - backend.core.app - INFO - \u2705 System capabilities routes included (/api/system/* endpoints)\n2025-08-23 08:03:58,231 - backend.core.app - INFO - \u2705 Real-time market streaming routes included (/streaming/* endpoints)\n2025-08-23 08:03:58,232 - backend.core.app - INFO - \u2705 Security HEAD endpoints included (/api/* HEAD endpoints)\n2025-08-23 08:03:58,234 - backend.core.app - INFO - \u2705 ML Model Registry routes included (/api/models/* endpoints)\n2025-08-23 08:03:58,235 - backend.core.app - INFO - \u2705 Data ingestion routes included (/api/v1/ingestion/* endpoints)\n2025-08-23 08:03:58,239 - backend.core.app - INFO - \u2705 Enterprise model registry routes included (/api/models/enterprise/* endpoints)\n2025-08-23 08:03:58,242 - backend.core.app - INFO - \u2705 Alert engine routes included (/api/alert-engine/* endpoints)\n2025-08-23 08:03:58,246 - backend.core.app - INFO - \u2705 PropFinder routes included (/api/propfinder/* endpoints)\n2025-08-23 08:03:58,247 - backend.core.app - WARNING - \u26a0\ufe0f Could not import multiple_sportsbook_routes: cannot import name 'RateLimiter' from 'backend.middleware.rate_limit' (C:\\Users\\bcmad\\Downloads\\A1Betting7-13.2\\backend\\middleware\\rate_limit.py)\n2025-08-23 08:03:58,250 - backend.core.app - INFO - \u2705 Sportsbook compatibility router mounted at /api/sportsbook\n2025-08-23 08:03:58,250 - backend.core.app - INFO - \U0001f50d Bootstrap validation scheduled on startup\n2025-08-23 08:03:58,250 - backend.core.app - INFO - \U0001f3e5 Health endpoints normalized: /api/health, /health, /api/v2/health -> identical envelope format\n2025-08-23 08:03:58,250 - backend.core.app - INFO - \u2705 A1Betting canonical app created successfully
----------------------------- Captured log setup ------------------------------
INFO     backend.core.app:app.py:65 \U0001f680 Creating A1Betting canonical app...\nINFO     backend.core.app:app.py:104 \u2705 Request ID correlation middleware added\nINFO     backend.core.app:app.py:114 \u2705 Distributed trace correlation middleware added\nINFO     backend.core.app:app.py:126 \u2705 Structured logging middleware added\nINFO     backend.core.app:app.py:146 \u2705 Prometheus metrics middleware added\nINFO     backend.core.app:app.py:167 \u2705 Payload guard middleware added: max_size=262144 bytes, enforce_json=True, enabled=True\nINFO     backend.middleware.rate_limit:rate_limit.py:90 Rate limiting disabled\nINFO     backend.core.app:app.py:202 \u2705 Rate limiting middleware added: 100/min, burst=200, enabled=False\nINFO     backend.core.app:app.py:244 \u2705 Security headers middleware added: [HSTS, CSP(report-only), COOP, COEP], x_frame_options=DENY\nINFO     backend.core.app:app.py:259 \u2705 Legacy endpoint middleware added for usage telemetry and deprecation controls\nINFO     backend.exceptions.handlers:handlers.py:235 \u2705 PayloadRejectionError handler registered\nINFO     backend.exceptions.handlers:handlers.py:250 \u2705 All exception handlers registered with structured error taxonomy\nINFO     backend.core.app:app.py:269 \u2705 Centralized exception handlers registered\nINFO     backend.core.app:app.py:332 \u2705 PR11 Enhanced WebSocket client route included (/ws/client)\nINFO     backend.core.app:app.py:702 \u2705 Auth routes also exposed at root (/auth/*) for compatibility\nINFO     backend.core.app:app.py:706 \u2705 Auth and users routes included (auth with /api prefix)\nINFO     backend.core.app:app.py:714 \u2705 Diagnostics routes included (/api/v2/diagnostics/health, /api/v2/diagnostics/system)\nINFO     backend.core.app:app.py:763 \u2705 Meta cache routes included (/api/v2/meta/cache-stats, /api/v2/meta/cache-health)\nINFO     backend.core.app:app.py:773 \u2705 Legacy meta routes included (/api/v2/meta/legacy-usage, /api/v2/meta/migration-readiness)\nERROR    backend.core.app:app.py:788 \u274c Failed to register CSP report routes: Invalid args for response field! Hint: check that <class 'logging.Logger'> is a valid Pydantic field type. If you are using a return type annotation that is not a valid Pydantic field (e.g. Union[Response, dict, None]) you can disable generating the response model from the type annotation with the path operation decorator parameter response_model=None. Read more: https://fastapi.tiangolo.com/tutorial/response-model/\nINFO     backend.core.app:app.py:794 \u2705 Trace test routes included (/api/trace/* endpoints)\nINFO     backend.core.app:app.py:804 \u2705 Model inference routes included (/api/v2/models/* endpoints)\nINFO     backend.core.app:app.py:814 \u2705 Observability events routes included (/api/v2/observability/* endpoints)\nINFO     backend.core.app:app.py:824 \u2705 Admin control routes included (/api/v2/models/shadow/* and /api/v2/models/admin/* endpoints)\nINFO     backend.core.app:app.py:834 \u2705 Enhanced WebSocket routes included (/ws/v2/* endpoints)\nINFO     backend.core.app:app.py:844 \u2705 WebSocket logging routes included (/api/websocket/* endpoints)\nINFO     backend.core.app:app.py:854 \u2705 Version routes included (/api/version/* endpoints)\nINFO     backend.core.app:app.py:864 \u2705 WebVitals pipeline routes included (/api/metrics/v1/* endpoints)\nINFO     backend.core.app:app.py:874 \u2705 Enhanced ML routes included (/api/enhanced-ml/* endpoints)\nINFO     backend.core.app:app.py:986 \u2705 Fallback enhanced-ml compatibility router mounted at /api/enhanced-ml\nINFO     backend.core.app:app.py:995 \u2705 Consolidated PrizePicks routes included (/api/v2/prizepicks/* endpoints)\nINFO     backend.core.app:app.py:1005 \u2705 Consolidated ML routes included (/api/v2/ml/* endpoints)\nERROR    backend.core.app:app.py:1019 \u274c Failed to register consolidated Admin routes: parameter without a default follows parameter with a default (consolidated_admin.py, line 165)\nINFO     backend.core.app:app.py:1025 \u2705 Odds & Line Movement routes included (/v1/odds/* endpoints)\nINFO     backend.core.app:app.py:1066 \u2705 Advanced-Kelly compatibility router mounted at /api/advanced-kelly\nERROR    backend.core.app:app.py:1078 \u274c Failed to register Risk Management & Personalization routes: 'NoneType' object has no attribute 'alert_evaluation_interval_seconds'\nINFO     backend.core.app:app.py:1084 \u2705 Dependencies Health routes included (/api/dependencies/* endpoints)\nINFO     backend.core.app:app.py:1094 \u2705 Provider Resilience routes included (/api/provider-resilience/* endpoints)\nINFO     backend.core.app:app.py:1104 \u2705 System capabilities routes included (/api/system/* endpoints)\nINFO     backend.core.app:app.py:1114 \u2705 Real-time market streaming routes included (/streaming/* endpoints)\nINFO     backend.core.app:app.py:1124 \u2705 Security HEAD endpoints included (/api/* HEAD endpoints)\nINFO     backend.core.app:app.py:1134 \u2705 ML Model Registry routes included (/api/models/* endpoints)\nINFO     backend.core.app:app.py:1144 \u2705 Data ingestion routes included (/api/v1/ingestion/* endpoints)\nINFO     backend.core.app:app.py:1154 \u2705 Enterprise model registry routes included (/api/models/enterprise/* endpoints)\nINFO     backend.core.app:app.py:1199 \u2705 Alert engine routes included (/api/alert-engine/* endpoints)\nINFO     backend.core.app:app.py:1209 \u2705 PropFinder routes included (/api/propfinder/* endpoints)\nWARNING  backend.core.app:app.py:1221 \u26a0\ufe0f Could not import multiple_sportsbook_routes: cannot import name 'RateLimiter' from 'backend.middleware.rate_limit' (C:\\Users\\bcmad\\Downloads\\A1Betting7-13.2\\backend\\middleware\\rate_limit.py)\nINFO     backend.core.app:app.py:1495 \u2705 Sportsbook compatibility router mounted at /api/sportsbook\nINFO     backend.core.app:app.py:1527 \U0001f50d Bootstrap validation scheduled on startup\nINFO     backend.core.app:app.py:1535 \U0001f3e5 Health endpoints normalized: /api/health, /health, /api/v2/health -> identical envelope format\nINFO     backend.core.app:app.py:1536 \u2705 A1Betting canonical app created successfully
---------------------------- Captured stderr call -----------------------------
2025-08-23 08:03:58,251 - backend.middleware.rate_limit - INFO - Rate limiting disabled\n2025-08-23 08:03:58,252 - backend.middleware.security_headers - INFO - \u2705 Security headers middleware enabled: CSP=report-only, HSTS=True, strict_mode=False\n2025-08-23 08:03:58,252 - backend.middleware.legacy_middleware - INFO - Registered known legacy endpoints with forwarding paths\n2025-08-23 08:03:58,252 - backend.middleware.legacy_middleware - INFO - Legacy middleware initialized\n2025-08-23 08:03:58,252 - backend.middleware.legacy_middleware - INFO - Legacy endpoint accessed: GET /api/sportsbook/player-props (count: 3)\n{"timestamp": "2025-08-23T13:03:58.252514", "level": "INFO", "logger": "a1betting", "message": "Request started", "module": "structured_logging_middleware", "function": "log_request_start", "line": 109, "request_id": "f7aa2cdb-d001-4b35-aea8-0736277c787a", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro", "event_type": "request_start", "method": "GET", "url": "http://testserver/api/sportsbook/player-props", "path": "/api/sportsbook/player-props", "query_params": {}, "client_ip": "127.0.0.1", "user_agent": "python-httpx/0.28.1", "content_type": null}\n2025-08-23 08:03:58,252 - backend.middleware.request_id_middleware - INFO - Request started: GET /api/sportsbook/player-props\n2025-08-23 08:03:58,253 - backend.middleware.request_id_middleware - INFO - Request completed: GET /api/sportsbook/player-props - 200\n2025-08-23 08:03:58,253 - backend.middleware.distributed_trace_middleware - INFO - Trace completed: dc1b8602-8e0f-4ee6-84cb-122b04c71424\n{"timestamp": "2025-08-23T13:03:58.253658", "level": "INFO", "logger": "a1betting", "message": "Request completed", "module": "structured_logging_middleware", "function": "log_request_success", "line": 124, "request_id": "f7aa2cdb-d001-4b35-aea8-0736277c787a", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro", "event_type": "request_success", "method": "GET", "url": "http://testserver/api/sportsbook/player-props", "path": "/api/sportsbook/player-props", "status_code": 200, "duration_ms": 1.16, "response_size": "39", "performance_category": "fast"}
------------------------------ Captured log call ------------------------------
INFO     backend.middleware.rate_limit:rate_limit.py:90 Rate limiting disabled\nINFO     backend.middleware.security_headers:security_headers.py:71 \u2705 Security headers middleware enabled: CSP=report-only, HSTS=True, strict_mode=False\nINFO     backend.middleware.legacy_middleware:legacy_middleware.py:68 Registered known legacy endpoints with forwarding paths\nINFO     backend.middleware.legacy_middleware:legacy_middleware.py:44 Legacy middleware initialized\nINFO     backend.middleware.legacy_middleware:legacy_middleware.py:177 Legacy endpoint accessed: GET /api/sportsbook/player-props (count: 3)\nINFO     backend.middleware.request_id_middleware:request_id_middleware.py:67 Request started: GET /api/sportsbook/player-props\nINFO     backend.middleware.request_id_middleware:request_id_middleware.py:92 Request completed: GET /api/sportsbook/player-props - 200\nINFO     backend.middleware.distributed_trace_middleware:distributed_trace_middleware.py:224 Trace completed: dc1b8602-8e0f-4ee6-84cb-122b04c71424
______ TestMultipleSportsbookRoutes.test_get_player_props_service_error _______
tests\backend\routes\test_multiple_sportsbook_routes.py:153: in test_get_player_props_service_error
    assert response.status_code == status.HTTP_500_INTERNAL_SERVER_ERROR
E   assert 200 == 500
E    +  where 200 = <Response [200 OK]>.status_code
E    +  and   500 = status.HTTP_500_INTERNAL_SERVER_ERROR
---------------------------- Captured stderr setup ----------------------------
2025-08-23 08:03:58,286 - backend.core.app - INFO - \U0001f680 Creating A1Betting canonical app...\n2025-08-23 08:03:58,286 - backend.core.app - INFO - \u2705 Request ID correlation middleware added\n2025-08-23 08:03:58,286 - backend.core.app - INFO - \u2705 Distributed trace correlation middleware added\n2025-08-23 08:03:58,286 - backend.core.app - INFO - \u2705 Structured logging middleware added\n2025-08-23 08:03:58,287 - backend.core.app - INFO - \u2705 Prometheus metrics middleware added\n2025-08-23 08:03:58,287 - backend.core.app - INFO - \u2705 Payload guard middleware added: max_size=262144 bytes, enforce_json=True, enabled=True\n2025-08-23 08:03:58,287 - backend.middleware.rate_limit - INFO - Rate limiting disabled\n2025-08-23 08:03:58,287 - backend.core.app - INFO - \u2705 Rate limiting middleware added: 100/min, burst=200, enabled=False\n2025-08-23 08:03:58,287 - backend.core.app - INFO - \u2705 Security headers middleware added: [HSTS, CSP(report-only), COOP, COEP], x_frame_options=DENY\n2025-08-23 08:03:58,287 - backend.core.app - INFO - \u2705 Legacy endpoint middleware added for usage telemetry and deprecation controls\n2025-08-23 08:03:58,287 - backend.exceptions.handlers - INFO - \u2705 PayloadRejectionError handler registered\n2025-08-23 08:03:58,287 - backend.exceptions.handlers - INFO - \u2705 All exception handlers registered with structured error taxonomy\n2025-08-23 08:03:58,287 - backend.core.app - INFO - \u2705 Centralized exception handlers registered\n2025-08-23 08:03:58,289 - backend.core.app - INFO - \u2705 PR11 Enhanced WebSocket client route included (/ws/client)\n2025-08-23 08:03:58,294 - backend.core.app - INFO - \u2705 Auth routes also exposed at root (/auth/*) for compatibility\n2025-08-23 08:03:58,294 - backend.core.app - INFO - \u2705 Auth and users routes included (auth with /api prefix)\n2025-08-23 08:03:58,295 - backend.core.app - INFO - \u2705 Diagnostics routes included (/api/v2/diagnostics/health, /api/v2/diagnostics/system)\n2025-08-23 08:03:58,296 - backend.core.app - INFO - \u2705 Meta cache routes included (/api/v2/meta/cache-stats, /api/v2/meta/cache-health)\n2025-08-23 08:03:58,297 - backend.core.app - INFO - \u2705 Legacy meta routes included (/api/v2/meta/legacy-usage, /api/v2/meta/migration-readiness)\n2025-08-23 08:03:58,299 - backend.core.app - ERROR - \u274c Failed to register CSP report routes: Invalid args for response field! Hint: check that <class 'logging.Logger'> is a valid Pydantic field type. If you are using a return type annotation that is not a valid Pydantic field (e.g. Union[Response, dict, None]) you can disable generating the response model from the type annotation with the path operation decorator parameter response_model=None. Read more: https://fastapi.tiangolo.com/tutorial/response-model/\n2025-08-23 08:03:58,299 - backend.core.app - INFO - \u2705 Trace test routes included (/api/trace/* endpoints)\n2025-08-23 08:03:58,301 - backend.core.app - INFO - \u2705 Model inference routes included (/api/v2/models/* endpoints)\n2025-08-23 08:03:58,303 - backend.core.app - INFO - \u2705 Observability events routes included (/api/v2/observability/* endpoints)\n2025-08-23 08:03:58,304 - backend.core.app - INFO - \u2705 Admin control routes included (/api/v2/models/shadow/* and /api/v2/models/admin/* endpoints)\n2025-08-23 08:03:58,306 - backend.core.app - INFO - \u2705 Enhanced WebSocket routes included (/ws/v2/* endpoints)\n2025-08-23 08:03:58,307 - backend.core.app - INFO - \u2705 WebSocket logging routes included (/api/websocket/* endpoints)\n2025-08-23 08:03:58,308 - backend.core.app - INFO - \u2705 Version routes included (/api/version/* endpoints)\n2025-08-23 08:03:58,308 - backend.core.app - INFO - \u2705 WebVitals pipeline routes included (/api/metrics/v1/* endpoints)\n2025-08-23 08:03:58,312 - backend.core.app - INFO - \u2705 Enhanced ML routes included (/api/enhanced-ml/* endpoints)\n2025-08-23 08:03:58,313 - backend.core.app - INFO - \u2705 Fallback enhanced-ml compatibility router mounted at /api/enhanced-ml\n2025-08-23 08:03:58,318 - backend.core.app - INFO - \u2705 Consolidated PrizePicks routes included (/api/v2/prizepicks/* endpoints)\n2025-08-23 08:03:58,321 - backend.core.app - INFO - \u2705 Consolidated ML routes included (/api/v2/ml/* endpoints)\n2025-08-23 08:03:58,323 - backend.core.app - ERROR - \u274c Failed to register consolidated Admin routes: parameter without a default follows parameter with a default (consolidated_admin.py, line 165)\n2025-08-23 08:03:58,327 - backend.core.app - INFO - \u2705 Odds & Line Movement routes included (/v1/odds/* endpoints)\n2025-08-23 08:03:58,328 - backend.core.app - INFO - \u2705 Advanced-Kelly compatibility router mounted at /api/advanced-kelly\n2025-08-23 08:03:58,331 - backend.core.app - ERROR - \u274c Failed to register Risk Management & Personalization routes: 'NoneType' object has no attribute 'alert_evaluation_interval_seconds'\n2025-08-23 08:03:58,332 - backend.core.app - INFO - \u2705 Dependencies Health routes included (/api/dependencies/* endpoints)\n2025-08-23 08:03:58,335 - backend.core.app - INFO - \u2705 Provider Resilience routes included (/api/provider-resilience/* endpoints)\n2025-08-23 08:03:58,336 - backend.core.app - INFO - \u2705 System capabilities routes included (/api/system/* endpoints)\n2025-08-23 08:03:58,337 - backend.core.app - INFO - \u2705 Real-time market streaming routes included (/streaming/* endpoints)\n2025-08-23 08:03:58,338 - backend.core.app - INFO - \u2705 Security HEAD endpoints included (/api/* HEAD endpoints)\n2025-08-23 08:03:58,340 - backend.core.app - INFO - \u2705 ML Model Registry routes included (/api/models/* endpoints)\n2025-08-23 08:03:58,341 - backend.core.app - INFO - \u2705 Data ingestion routes included (/api/v1/ingestion/* endpoints)\n2025-08-23 08:03:58,344 - backend.core.app - INFO - \u2705 Enterprise model registry routes included (/api/models/enterprise/* endpoints)\n2025-08-23 08:03:58,348 - backend.core.app - INFO - \u2705 Alert engine routes included (/api/alert-engine/* endpoints)\n2025-08-23 08:03:58,352 - backend.core.app - INFO - \u2705 PropFinder routes included (/api/propfinder/* endpoints)\n2025-08-23 08:03:58,353 - backend.core.app - WARNING - \u26a0\ufe0f Could not import multiple_sportsbook_routes: cannot import name 'RateLimiter' from 'backend.middleware.rate_limit' (C:\\Users\\bcmad\\Downloads\\A1Betting7-13.2\\backend\\middleware\\rate_limit.py)\n2025-08-23 08:03:58,356 - backend.core.app - INFO - \u2705 Sportsbook compatibility router mounted at /api/sportsbook\n2025-08-23 08:03:58,356 - backend.core.app - INFO - \U0001f50d Bootstrap validation scheduled on startup\n2025-08-23 08:03:58,356 - backend.core.app - INFO - \U0001f3e5 Health endpoints normalized: /api/health, /health, /api/v2/health -> identical envelope format\n2025-08-23 08:03:58,356 - backend.core.app - INFO - \u2705 A1Betting canonical app created successfully
----------------------------- Captured log setup ------------------------------
INFO     backend.core.app:app.py:65 \U0001f680 Creating A1Betting canonical app...\nINFO     backend.core.app:app.py:104 \u2705 Request ID correlation middleware added\nINFO     backend.core.app:app.py:114 \u2705 Distributed trace correlation middleware added\nINFO     backend.core.app:app.py:126 \u2705 Structured logging middleware added\nINFO     backend.core.app:app.py:146 \u2705 Prometheus metrics middleware added\nINFO     backend.core.app:app.py:167 \u2705 Payload guard middleware added: max_size=262144 bytes, enforce_json=True, enabled=True\nINFO     backend.middleware.rate_limit:rate_limit.py:90 Rate limiting disabled\nINFO     backend.core.app:app.py:202 \u2705 Rate limiting middleware added: 100/min, burst=200, enabled=False\nINFO     backend.core.app:app.py:244 \u2705 Security headers middleware added: [HSTS, CSP(report-only), COOP, COEP], x_frame_options=DENY\nINFO     backend.core.app:app.py:259 \u2705 Legacy endpoint middleware added for usage telemetry and deprecation controls\nINFO     backend.exceptions.handlers:handlers.py:235 \u2705 PayloadRejectionError handler registered\nINFO     backend.exceptions.handlers:handlers.py:250 \u2705 All exception handlers registered with structured error taxonomy\nINFO     backend.core.app:app.py:269 \u2705 Centralized exception handlers registered\nINFO     backend.core.app:app.py:332 \u2705 PR11 Enhanced WebSocket client route included (/ws/client)\nINFO     backend.core.app:app.py:702 \u2705 Auth routes also exposed at root (/auth/*) for compatibility\nINFO     backend.core.app:app.py:706 \u2705 Auth and users routes included (auth with /api prefix)\nINFO     backend.core.app:app.py:714 \u2705 Diagnostics routes included (/api/v2/diagnostics/health, /api/v2/diagnostics/system)\nINFO     backend.core.app:app.py:763 \u2705 Meta cache routes included (/api/v2/meta/cache-stats, /api/v2/meta/cache-health)\nINFO     backend.core.app:app.py:773 \u2705 Legacy meta routes included (/api/v2/meta/legacy-usage, /api/v2/meta/migration-readiness)\nERROR    backend.core.app:app.py:788 \u274c Failed to register CSP report routes: Invalid args for response field! Hint: check that <class 'logging.Logger'> is a valid Pydantic field type. If you are using a return type annotation that is not a valid Pydantic field (e.g. Union[Response, dict, None]) you can disable generating the response model from the type annotation with the path operation decorator parameter response_model=None. Read more: https://fastapi.tiangolo.com/tutorial/response-model/\nINFO     backend.core.app:app.py:794 \u2705 Trace test routes included (/api/trace/* endpoints)\nINFO     backend.core.app:app.py:804 \u2705 Model inference routes included (/api/v2/models/* endpoints)\nINFO     backend.core.app:app.py:814 \u2705 Observability events routes included (/api/v2/observability/* endpoints)\nINFO     backend.core.app:app.py:824 \u2705 Admin control routes included (/api/v2/models/shadow/* and /api/v2/models/admin/* endpoints)\nINFO     backend.core.app:app.py:834 \u2705 Enhanced WebSocket routes included (/ws/v2/* endpoints)\nINFO     backend.core.app:app.py:844 \u2705 WebSocket logging routes included (/api/websocket/* endpoints)\nINFO     backend.core.app:app.py:854 \u2705 Version routes included (/api/version/* endpoints)\nINFO     backend.core.app:app.py:864 \u2705 WebVitals pipeline routes included (/api/metrics/v1/* endpoints)\nINFO     backend.core.app:app.py:874 \u2705 Enhanced ML routes included (/api/enhanced-ml/* endpoints)\nINFO     backend.core.app:app.py:986 \u2705 Fallback enhanced-ml compatibility router mounted at /api/enhanced-ml\nINFO     backend.core.app:app.py:995 \u2705 Consolidated PrizePicks routes included (/api/v2/prizepicks/* endpoints)\nINFO     backend.core.app:app.py:1005 \u2705 Consolidated ML routes included (/api/v2/ml/* endpoints)\nERROR    backend.core.app:app.py:1019 \u274c Failed to register consolidated Admin routes: parameter without a default follows parameter with a default (consolidated_admin.py, line 165)\nINFO     backend.core.app:app.py:1025 \u2705 Odds & Line Movement routes included (/v1/odds/* endpoints)\nINFO     backend.core.app:app.py:1066 \u2705 Advanced-Kelly compatibility router mounted at /api/advanced-kelly\nERROR    backend.core.app:app.py:1078 \u274c Failed to register Risk Management & Personalization routes: 'NoneType' object has no attribute 'alert_evaluation_interval_seconds'\nINFO     backend.core.app:app.py:1084 \u2705 Dependencies Health routes included (/api/dependencies/* endpoints)\nINFO     backend.core.app:app.py:1094 \u2705 Provider Resilience routes included (/api/provider-resilience/* endpoints)\nINFO     backend.core.app:app.py:1104 \u2705 System capabilities routes included (/api/system/* endpoints)\nINFO     backend.core.app:app.py:1114 \u2705 Real-time market streaming routes included (/streaming/* endpoints)\nINFO     backend.core.app:app.py:1124 \u2705 Security HEAD endpoints included (/api/* HEAD endpoints)\nINFO     backend.core.app:app.py:1134 \u2705 ML Model Registry routes included (/api/models/* endpoints)\nINFO     backend.core.app:app.py:1144 \u2705 Data ingestion routes included (/api/v1/ingestion/* endpoints)\nINFO     backend.core.app:app.py:1154 \u2705 Enterprise model registry routes included (/api/models/enterprise/* endpoints)\nINFO     backend.core.app:app.py:1199 \u2705 Alert engine routes included (/api/alert-engine/* endpoints)\nINFO     backend.core.app:app.py:1209 \u2705 PropFinder routes included (/api/propfinder/* endpoints)\nWARNING  backend.core.app:app.py:1221 \u26a0\ufe0f Could not import multiple_sportsbook_routes: cannot import name 'RateLimiter' from 'backend.middleware.rate_limit' (C:\\Users\\bcmad\\Downloads\\A1Betting7-13.2\\backend\\middleware\\rate_limit.py)\nINFO     backend.core.app:app.py:1495 \u2705 Sportsbook compatibility router mounted at /api/sportsbook\nINFO     backend.core.app:app.py:1527 \U0001f50d Bootstrap validation scheduled on startup\nINFO     backend.core.app:app.py:1535 \U0001f3e5 Health endpoints normalized: /api/health, /health, /api/v2/health -> identical envelope format\nINFO     backend.core.app:app.py:1536 \u2705 A1Betting canonical app created successfully
---------------------------- Captured stderr call -----------------------------
2025-08-23 08:03:58,359 - backend.middleware.rate_limit - INFO - Rate limiting disabled\n2025-08-23 08:03:58,359 - backend.middleware.security_headers - INFO - \u2705 Security headers middleware enabled: CSP=report-only, HSTS=True, strict_mode=False\n2025-08-23 08:03:58,359 - backend.middleware.legacy_middleware - INFO - Registered known legacy endpoints with forwarding paths\n2025-08-23 08:03:58,359 - backend.middleware.legacy_middleware - INFO - Legacy middleware initialized\n2025-08-23 08:03:58,359 - backend.middleware.legacy_middleware - INFO - Legacy endpoint accessed: GET /api/sportsbook/player-props (count: 4)\n{"timestamp": "2025-08-23T13:03:58.360189", "level": "INFO", "logger": "a1betting", "message": "Request started", "module": "structured_logging_middleware", "function": "log_request_start", "line": 109, "request_id": "2b156f46-17db-4d40-b6a1-c090aad1dae2", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro", "event_type": "request_start", "method": "GET", "url": "http://testserver/api/sportsbook/player-props?sport=mlb", "path": "/api/sportsbook/player-props", "query_params": {"sport": "mlb"}, "client_ip": "127.0.0.1", "user_agent": "python-httpx/0.28.1", "content_type": null}\n2025-08-23 08:03:58,360 - backend.middleware.request_id_middleware - INFO - Request started: GET /api/sportsbook/player-props\n2025-08-23 08:03:58,360 - backend.middleware.request_id_middleware - INFO - Request completed: GET /api/sportsbook/player-props - 200\n2025-08-23 08:03:58,361 - backend.middleware.distributed_trace_middleware - INFO - Trace completed: 4ff76bb3-06c2-4652-babe-a3156942df31\n{"timestamp": "2025-08-23T13:03:58.361470", "level": "INFO", "logger": "a1betting", "message": "Request completed", "module": "structured_logging_middleware", "function": "log_request_success", "line": 124, "request_id": "2b156f46-17db-4d40-b6a1-c090aad1dae2", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro", "event_type": "request_success", "method": "GET", "url": "http://testserver/api/sportsbook/player-props?sport=mlb", "path": "/api/sportsbook/player-props", "status_code": 200, "duration_ms": 1.31, "response_size": "39", "performance_category": "fast"}
------------------------------ Captured log call ------------------------------
INFO     backend.middleware.rate_limit:rate_limit.py:90 Rate limiting disabled\nINFO     backend.middleware.security_headers:security_headers.py:71 \u2705 Security headers middleware enabled: CSP=report-only, HSTS=True, strict_mode=False\nINFO     backend.middleware.legacy_middleware:legacy_middleware.py:68 Registered known legacy endpoints with forwarding paths\nINFO     backend.middleware.legacy_middleware:legacy_middleware.py:44 Legacy middleware initialized\nINFO     backend.middleware.legacy_middleware:legacy_middleware.py:177 Legacy endpoint accessed: GET /api/sportsbook/player-props (count: 4)\nINFO     backend.middleware.request_id_middleware:request_id_middleware.py:67 Request started: GET /api/sportsbook/player-props\nINFO     backend.middleware.request_id_middleware:request_id_middleware.py:92 Request completed: GET /api/sportsbook/player-props - 200\nINFO     backend.middleware.distributed_trace_middleware:distributed_trace_middleware.py:224 Trace completed: 4ff76bb3-06c2-4652-babe-a3156942df31
___________ TestMultipleSportsbookRoutes.test_get_best_odds_success ___________
tests\backend\routes\test_multiple_sportsbook_routes.py:203: in test_get_best_odds_success
    odds_data = data["data"][0]
                ^^^^^^^^^^^^^^^
E   IndexError: list index out of range
---------------------------- Captured stderr setup ----------------------------
2025-08-23 08:03:58,369 - backend.core.app - INFO - \U0001f680 Creating A1Betting canonical app...\n2025-08-23 08:03:58,369 - backend.core.app - INFO - \u2705 Request ID correlation middleware added\n2025-08-23 08:03:58,369 - backend.core.app - INFO - \u2705 Distributed trace correlation middleware added\n2025-08-23 08:03:58,369 - backend.core.app - INFO - \u2705 Structured logging middleware added\n2025-08-23 08:03:58,369 - backend.core.app - INFO - \u2705 Prometheus metrics middleware added\n2025-08-23 08:03:58,369 - backend.core.app - INFO - \u2705 Payload guard middleware added: max_size=262144 bytes, enforce_json=True, enabled=True\n2025-08-23 08:03:58,369 - backend.middleware.rate_limit - INFO - Rate limiting disabled\n2025-08-23 08:03:58,369 - backend.core.app - INFO - \u2705 Rate limiting middleware added: 100/min, burst=200, enabled=False\n2025-08-23 08:03:58,369 - backend.core.app - INFO - \u2705 Security headers middleware added: [HSTS, CSP(report-only), COOP, COEP], x_frame_options=DENY\n2025-08-23 08:03:58,369 - backend.core.app - INFO - \u2705 Legacy endpoint middleware added for usage telemetry and deprecation controls\n2025-08-23 08:03:58,369 - backend.exceptions.handlers - INFO - \u2705 PayloadRejectionError handler registered\n2025-08-23 08:03:58,369 - backend.exceptions.handlers - INFO - \u2705 All exception handlers registered with structured error taxonomy\n2025-08-23 08:03:58,369 - backend.core.app - INFO - \u2705 Centralized exception handlers registered\n2025-08-23 08:03:58,370 - backend.core.app - INFO - \u2705 PR11 Enhanced WebSocket client route included (/ws/client)\n2025-08-23 08:03:58,376 - backend.core.app - INFO - \u2705 Auth routes also exposed at root (/auth/*) for compatibility\n2025-08-23 08:03:58,376 - backend.core.app - INFO - \u2705 Auth and users routes included (auth with /api prefix)\n2025-08-23 08:03:58,377 - backend.core.app - INFO - \u2705 Diagnostics routes included (/api/v2/diagnostics/health, /api/v2/diagnostics/system)\n2025-08-23 08:03:58,378 - backend.core.app - INFO - \u2705 Meta cache routes included (/api/v2/meta/cache-stats, /api/v2/meta/cache-health)\n2025-08-23 08:03:58,702 - backend.core.app - INFO - \u2705 Legacy meta routes included (/api/v2/meta/legacy-usage, /api/v2/meta/migration-readiness)\n2025-08-23 08:03:58,706 - backend.core.app - ERROR - \u274c Failed to register CSP report routes: Invalid args for response field! Hint: check that <class 'logging.Logger'> is a valid Pydantic field type. If you are using a return type annotation that is not a valid Pydantic field (e.g. Union[Response, dict, None]) you can disable generating the response model from the type annotation with the path operation decorator parameter response_model=None. Read more: https://fastapi.tiangolo.com/tutorial/response-model/\n2025-08-23 08:03:58,706 - backend.core.app - INFO - \u2705 Trace test routes included (/api/trace/* endpoints)\n2025-08-23 08:03:58,708 - backend.core.app - INFO - \u2705 Model inference routes included (/api/v2/models/* endpoints)\n2025-08-23 08:03:58,710 - backend.core.app - INFO - \u2705 Observability events routes included (/api/v2/observability/* endpoints)\n2025-08-23 08:03:58,711 - backend.core.app - INFO - \u2705 Admin control routes included (/api/v2/models/shadow/* and /api/v2/models/admin/* endpoints)\n2025-08-23 08:03:58,713 - backend.core.app - INFO - \u2705 Enhanced WebSocket routes included (/ws/v2/* endpoints)\n2025-08-23 08:03:58,714 - backend.core.app - INFO - \u2705 WebSocket logging routes included (/api/websocket/* endpoints)\n2025-08-23 08:03:58,715 - backend.core.app - INFO - \u2705 Version routes included (/api/version/* endpoints)\n2025-08-23 08:03:58,715 - backend.core.app - INFO - \u2705 WebVitals pipeline routes included (/api/metrics/v1/* endpoints)\n2025-08-23 08:03:58,719 - backend.core.app - INFO - \u2705 Enhanced ML routes included (/api/enhanced-ml/* endpoints)\n2025-08-23 08:03:58,720 - backend.core.app - INFO - \u2705 Fallback enhanced-ml compatibility router mounted at /api/enhanced-ml\n2025-08-23 08:03:58,725 - backend.core.app - INFO - \u2705 Consolidated PrizePicks routes included (/api/v2/prizepicks/* endpoints)\n2025-08-23 08:03:58,728 - backend.core.app - INFO - \u2705 Consolidated ML routes included (/api/v2/ml/* endpoints)\n2025-08-23 08:03:58,730 - backend.core.app - ERROR - \u274c Failed to register consolidated Admin routes: parameter without a default follows parameter with a default (consolidated_admin.py, line 165)\n2025-08-23 08:03:58,733 - backend.core.app - INFO - \u2705 Odds & Line Movement routes included (/v1/odds/* endpoints)\n2025-08-23 08:03:58,734 - backend.core.app - INFO - \u2705 Advanced-Kelly compatibility router mounted at /api/advanced-kelly\n2025-08-23 08:03:58,736 - backend.core.app - ERROR - \u274c Failed to register Risk Management & Personalization routes: 'NoneType' object has no attribute 'alert_evaluation_interval_seconds'\n2025-08-23 08:03:58,738 - backend.core.app - INFO - \u2705 Dependencies Health routes included (/api/dependencies/* endpoints)\n2025-08-23 08:03:58,740 - backend.core.app - INFO - \u2705 Provider Resilience routes included (/api/provider-resilience/* endpoints)\n2025-08-23 08:03:58,741 - backend.core.app - INFO - \u2705 System capabilities routes included (/api/system/* endpoints)\n2025-08-23 08:03:58,743 - backend.core.app - INFO - \u2705 Real-time market streaming routes included (/streaming/* endpoints)\n2025-08-23 08:03:58,743 - backend.core.app - INFO - \u2705 Security HEAD endpoints included (/api/* HEAD endpoints)\n2025-08-23 08:03:58,745 - backend.core.app - INFO - \u2705 ML Model Registry routes included (/api/models/* endpoints)\n2025-08-23 08:03:58,746 - backend.core.app - INFO - \u2705 Data ingestion routes included (/api/v1/ingestion/* endpoints)\n2025-08-23 08:03:58,749 - backend.core.app - INFO - \u2705 Enterprise model registry routes included (/api/models/enterprise/* endpoints)\n2025-08-23 08:03:58,753 - backend.core.app - INFO - \u2705 Alert engine routes included (/api/alert-engine/* endpoints)\n2025-08-23 08:03:58,757 - backend.core.app - INFO - \u2705 PropFinder routes included (/api/propfinder/* endpoints)\n2025-08-23 08:03:58,758 - backend.core.app - WARNING - \u26a0\ufe0f Could not import multiple_sportsbook_routes: cannot import name 'RateLimiter' from 'backend.middleware.rate_limit' (C:\\Users\\bcmad\\Downloads\\A1Betting7-13.2\\backend\\middleware\\rate_limit.py)\n2025-08-23 08:03:58,760 - backend.core.app - INFO - \u2705 Sportsbook compatibility router mounted at /api/sportsbook\n2025-08-23 08:03:58,760 - backend.core.app - INFO - \U0001f50d Bootstrap validation scheduled on startup\n2025-08-23 08:03:58,760 - backend.core.app - INFO - \U0001f3e5 Health endpoints normalized: /api/health, /health, /api/v2/health -> identical envelope format\n2025-08-23 08:03:58,760 - backend.core.app - INFO - \u2705 A1Betting canonical app created successfully
----------------------------- Captured log setup ------------------------------
INFO     backend.core.app:app.py:65 \U0001f680 Creating A1Betting canonical app...\nINFO     backend.core.app:app.py:104 \u2705 Request ID correlation middleware added\nINFO     backend.core.app:app.py:114 \u2705 Distributed trace correlation middleware added\nINFO     backend.core.app:app.py:126 \u2705 Structured logging middleware added\nINFO     backend.core.app:app.py:146 \u2705 Prometheus metrics middleware added\nINFO     backend.core.app:app.py:167 \u2705 Payload guard middleware added: max_size=262144 bytes, enforce_json=True, enabled=True\nINFO     backend.middleware.rate_limit:rate_limit.py:90 Rate limiting disabled\nINFO     backend.core.app:app.py:202 \u2705 Rate limiting middleware added: 100/min, burst=200, enabled=False\nINFO     backend.core.app:app.py:244 \u2705 Security headers middleware added: [HSTS, CSP(report-only), COOP, COEP], x_frame_options=DENY\nINFO     backend.core.app:app.py:259 \u2705 Legacy endpoint middleware added for usage telemetry and deprecation controls\nINFO     backend.exceptions.handlers:handlers.py:235 \u2705 PayloadRejectionError handler registered\nINFO     backend.exceptions.handlers:handlers.py:250 \u2705 All exception handlers registered with structured error taxonomy\nINFO     backend.core.app:app.py:269 \u2705 Centralized exception handlers registered\nINFO     backend.core.app:app.py:332 \u2705 PR11 Enhanced WebSocket client route included (/ws/client)\nINFO     backend.core.app:app.py:702 \u2705 Auth routes also exposed at root (/auth/*) for compatibility\nINFO     backend.core.app:app.py:706 \u2705 Auth and users routes included (auth with /api prefix)\nINFO     backend.core.app:app.py:714 \u2705 Diagnostics routes included (/api/v2/diagnostics/health, /api/v2/diagnostics/system)\nINFO     backend.core.app:app.py:763 \u2705 Meta cache routes included (/api/v2/meta/cache-stats, /api/v2/meta/cache-health)\nINFO     backend.core.app:app.py:773 \u2705 Legacy meta routes included (/api/v2/meta/legacy-usage, /api/v2/meta/migration-readiness)\nERROR    backend.core.app:app.py:788 \u274c Failed to register CSP report routes: Invalid args for response field! Hint: check that <class 'logging.Logger'> is a valid Pydantic field type. If you are using a return type annotation that is not a valid Pydantic field (e.g. Union[Response, dict, None]) you can disable generating the response model from the type annotation with the path operation decorator parameter response_model=None. Read more: https://fastapi.tiangolo.com/tutorial/response-model/\nINFO     backend.core.app:app.py:794 \u2705 Trace test routes included (/api/trace/* endpoints)\nINFO     backend.core.app:app.py:804 \u2705 Model inference routes included (/api/v2/models/* endpoints)\nINFO     backend.core.app:app.py:814 \u2705 Observability events routes included (/api/v2/observability/* endpoints)\nINFO     backend.core.app:app.py:824 \u2705 Admin control routes included (/api/v2/models/shadow/* and /api/v2/models/admin/* endpoints)\nINFO     backend.core.app:app.py:834 \u2705 Enhanced WebSocket routes included (/ws/v2/* endpoints)\nINFO     backend.core.app:app.py:844 \u2705 WebSocket logging routes included (/api/websocket/* endpoints)\nINFO     backend.core.app:app.py:854 \u2705 Version routes included (/api/version/* endpoints)\nINFO     backend.core.app:app.py:864 \u2705 WebVitals pipeline routes included (/api/metrics/v1/* endpoints)\nINFO     backend.core.app:app.py:874 \u2705 Enhanced ML routes included (/api/enhanced-ml/* endpoints)\nINFO     backend.core.app:app.py:986 \u2705 Fallback enhanced-ml compatibility router mounted at /api/enhanced-ml\nINFO     backend.core.app:app.py:995 \u2705 Consolidated PrizePicks routes included (/api/v2/prizepicks/* endpoints)\nINFO     backend.core.app:app.py:1005 \u2705 Consolidated ML routes included (/api/v2/ml/* endpoints)\nERROR    backend.core.app:app.py:1019 \u274c Failed to register consolidated Admin routes: parameter without a default follows parameter with a default (consolidated_admin.py, line 165)\nINFO     backend.core.app:app.py:1025 \u2705 Odds & Line Movement routes included (/v1/odds/* endpoints)\nINFO     backend.core.app:app.py:1066 \u2705 Advanced-Kelly compatibility router mounted at /api/advanced-kelly\nERROR    backend.core.app:app.py:1078 \u274c Failed to register Risk Management & Personalization routes: 'NoneType' object has no attribute 'alert_evaluation_interval_seconds'\nINFO     backend.core.app:app.py:1084 \u2705 Dependencies Health routes included (/api/dependencies/* endpoints)\nINFO     backend.core.app:app.py:1094 \u2705 Provider Resilience routes included (/api/provider-resilience/* endpoints)\nINFO     backend.core.app:app.py:1104 \u2705 System capabilities routes included (/api/system/* endpoints)\nINFO     backend.core.app:app.py:1114 \u2705 Real-time market streaming routes included (/streaming/* endpoints)\nINFO     backend.core.app:app.py:1124 \u2705 Security HEAD endpoints included (/api/* HEAD endpoints)\nINFO     backend.core.app:app.py:1134 \u2705 ML Model Registry routes included (/api/models/* endpoints)\nINFO     backend.core.app:app.py:1144 \u2705 Data ingestion routes included (/api/v1/ingestion/* endpoints)\nINFO     backend.core.app:app.py:1154 \u2705 Enterprise model registry routes included (/api/models/enterprise/* endpoints)\nINFO     backend.core.app:app.py:1199 \u2705 Alert engine routes included (/api/alert-engine/* endpoints)\nINFO     backend.core.app:app.py:1209 \u2705 PropFinder routes included (/api/propfinder/* endpoints)\nWARNING  backend.core.app:app.py:1221 \u26a0\ufe0f Could not import multiple_sportsbook_routes: cannot import name 'RateLimiter' from 'backend.middleware.rate_limit' (C:\\Users\\bcmad\\Downloads\\A1Betting7-13.2\\backend\\middleware\\rate_limit.py)\nINFO     backend.core.app:app.py:1495 \u2705 Sportsbook compatibility router mounted at /api/sportsbook\nINFO     backend.core.app:app.py:1527 \U0001f50d Bootstrap validation scheduled on startup\nINFO     backend.core.app:app.py:1535 \U0001f3e5 Health endpoints normalized: /api/health, /health, /api/v2/health -> identical envelope format\nINFO     backend.core.app:app.py:1536 \u2705 A1Betting canonical app created successfully
---------------------------- Captured stderr call -----------------------------
2025-08-23 08:03:58,764 - backend.middleware.rate_limit - INFO - Rate limiting disabled\n2025-08-23 08:03:58,764 - backend.middleware.security_headers - INFO - \u2705 Security headers middleware enabled: CSP=report-only, HSTS=True, strict_mode=False\n2025-08-23 08:03:58,764 - backend.middleware.legacy_middleware - INFO - Registered known legacy endpoints with forwarding paths\n2025-08-23 08:03:58,764 - backend.middleware.legacy_middleware - INFO - Legacy middleware initialized\n2025-08-23 08:03:58,764 - backend.services.legacy_registry - INFO - Registered legacy endpoint: /api/sportsbook/best-odds -> None\n2025-08-23 08:03:58,764 - backend.middleware.legacy_middleware - INFO - Legacy endpoint accessed: GET /api/sportsbook/best-odds (count: 1)\n{"timestamp": "2025-08-23T13:03:58.764890", "level": "INFO", "logger": "a1betting", "message": "Request started", "module": "structured_logging_middleware", "function": "log_request_start", "line": 109, "request_id": "53c1306c-4bcf-4efe-941c-2a178305ff0b", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro", "event_type": "request_start", "method": "GET", "url": "http://testserver/api/sportsbook/best-odds?sport=mlb", "path": "/api/sportsbook/best-odds", "query_params": {"sport": "mlb"}, "client_ip": "127.0.0.1", "user_agent": "python-httpx/0.28.1", "content_type": null}\n2025-08-23 08:03:58,765 - backend.middleware.request_id_middleware - INFO - Request started: GET /api/sportsbook/best-odds\n2025-08-23 08:03:58,765 - backend.middleware.request_id_middleware - INFO - Request completed: GET /api/sportsbook/best-odds - 200\n2025-08-23 08:03:58,765 - backend.middleware.distributed_trace_middleware - INFO - Trace completed: 300d1bd2-b88e-4853-9d7b-816e58ce69ca\n{"timestamp": "2025-08-23T13:03:58.765743", "level": "INFO", "logger": "a1betting", "message": "Request completed", "module": "structured_logging_middleware", "function": "log_request_success", "line": 124, "request_id": "53c1306c-4bcf-4efe-941c-2a178305ff0b", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro", "event_type": "request_success", "method": "GET", "url": "http://testserver/api/sportsbook/best-odds?sport=mlb", "path": "/api/sportsbook/best-odds", "status_code": 200, "duration_ms": 0.88, "response_size": "39", "performance_category": "fast"}
------------------------------ Captured log call ------------------------------
INFO     backend.middleware.rate_limit:rate_limit.py:90 Rate limiting disabled\nINFO     backend.middleware.security_headers:security_headers.py:71 \u2705 Security headers middleware enabled: CSP=report-only, HSTS=True, strict_mode=False\nINFO     backend.middleware.legacy_middleware:legacy_middleware.py:68 Registered known legacy endpoints with forwarding paths\nINFO     backend.middleware.legacy_middleware:legacy_middleware.py:44 Legacy middleware initialized\nINFO     backend.services.legacy_registry:legacy_registry.py:102 Registered legacy endpoint: /api/sportsbook/best-odds -> None\nINFO     backend.middleware.legacy_middleware:legacy_middleware.py:177 Legacy endpoint accessed: GET /api/sportsbook/best-odds (count: 1)\nINFO     backend.middleware.request_id_middleware:request_id_middleware.py:67 Request started: GET /api/sportsbook/best-odds\nINFO     backend.middleware.request_id_middleware:request_id_middleware.py:92 Request completed: GET /api/sportsbook/best-odds - 200\nINFO     backend.middleware.distributed_trace_middleware:distributed_trace_middleware.py:224 Trace completed: 300d1bd2-b88e-4853-9d7b-816e58ce69ca
________ TestMultipleSportsbookRoutes.test_get_best_odds_with_filters _________
tests\backend\routes\test_multiple_sportsbook_routes.py:237: in test_get_best_odds_with_filters
    assert data["data"][0]["player"] == "Mike Trout"
           ^^^^^^^^^^^^^^^
E   IndexError: list index out of range
---------------------------- Captured stderr setup ----------------------------
2025-08-23 08:03:58,772 - backend.core.app - INFO - \U0001f680 Creating A1Betting canonical app...\n2025-08-23 08:03:58,772 - backend.core.app - INFO - \u2705 Request ID correlation middleware added\n2025-08-23 08:03:58,772 - backend.core.app - INFO - \u2705 Distributed trace correlation middleware added\n2025-08-23 08:03:58,772 - backend.core.app - INFO - \u2705 Structured logging middleware added\n2025-08-23 08:03:58,772 - backend.core.app - INFO - \u2705 Prometheus metrics middleware added\n2025-08-23 08:03:58,773 - backend.core.app - INFO - \u2705 Payload guard middleware added: max_size=262144 bytes, enforce_json=True, enabled=True\n2025-08-23 08:03:58,773 - backend.middleware.rate_limit - INFO - Rate limiting disabled\n2025-08-23 08:03:58,773 - backend.core.app - INFO - \u2705 Rate limiting middleware added: 100/min, burst=200, enabled=False\n2025-08-23 08:03:58,773 - backend.core.app - INFO - \u2705 Security headers middleware added: [HSTS, CSP(report-only), COOP, COEP], x_frame_options=DENY\n2025-08-23 08:03:58,773 - backend.core.app - INFO - \u2705 Legacy endpoint middleware added for usage telemetry and deprecation controls\n2025-08-23 08:03:58,773 - backend.exceptions.handlers - INFO - \u2705 PayloadRejectionError handler registered\n2025-08-23 08:03:58,773 - backend.exceptions.handlers - INFO - \u2705 All exception handlers registered with structured error taxonomy\n2025-08-23 08:03:58,773 - backend.core.app - INFO - \u2705 Centralized exception handlers registered\n2025-08-23 08:03:58,774 - backend.core.app - INFO - \u2705 PR11 Enhanced WebSocket client route included (/ws/client)\n2025-08-23 08:03:58,778 - backend.core.app - INFO - \u2705 Auth routes also exposed at root (/auth/*) for compatibility\n2025-08-23 08:03:58,778 - backend.core.app - INFO - \u2705 Auth and users routes included (auth with /api prefix)\n2025-08-23 08:03:58,779 - backend.core.app - INFO - \u2705 Diagnostics routes included (/api/v2/diagnostics/health, /api/v2/diagnostics/system)\n2025-08-23 08:03:58,780 - backend.core.app - INFO - \u2705 Meta cache routes included (/api/v2/meta/cache-stats, /api/v2/meta/cache-health)\n2025-08-23 08:03:58,780 - backend.core.app - INFO - \u2705 Legacy meta routes included (/api/v2/meta/legacy-usage, /api/v2/meta/migration-readiness)\n2025-08-23 08:03:58,782 - backend.core.app - ERROR - \u274c Failed to register CSP report routes: Invalid args for response field! Hint: check that <class 'logging.Logger'> is a valid Pydantic field type. If you are using a return type annotation that is not a valid Pydantic field (e.g. Union[Response, dict, None]) you can disable generating the response model from the type annotation with the path operation decorator parameter response_model=None. Read more: https://fastapi.tiangolo.com/tutorial/response-model/\n2025-08-23 08:03:58,783 - backend.core.app - INFO - \u2705 Trace test routes included (/api/trace/* endpoints)\n2025-08-23 08:03:58,784 - backend.core.app - INFO - \u2705 Model inference routes included (/api/v2/models/* endpoints)\n2025-08-23 08:03:58,786 - backend.core.app - INFO - \u2705 Observability events routes included (/api/v2/observability/* endpoints)\n2025-08-23 08:03:58,788 - backend.core.app - INFO - \u2705 Admin control routes included (/api/v2/models/shadow/* and /api/v2/models/admin/* endpoints)\n2025-08-23 08:03:58,791 - backend.core.app - INFO - \u2705 Enhanced WebSocket routes included (/ws/v2/* endpoints)\n2025-08-23 08:03:58,791 - backend.core.app - INFO - \u2705 WebSocket logging routes included (/api/websocket/* endpoints)\n2025-08-23 08:03:58,792 - backend.core.app - INFO - \u2705 Version routes included (/api/version/* endpoints)\n2025-08-23 08:03:58,793 - backend.core.app - INFO - \u2705 WebVitals pipeline routes included (/api/metrics/v1/* endpoints)\n2025-08-23 08:03:58,797 - backend.core.app - INFO - \u2705 Enhanced ML routes included (/api/enhanced-ml/* endpoints)\n2025-08-23 08:03:58,798 - backend.core.app - INFO - \u2705 Fallback enhanced-ml compatibility router mounted at /api/enhanced-ml\n2025-08-23 08:03:58,802 - backend.core.app - INFO - \u2705 Consolidated PrizePicks routes included (/api/v2/prizepicks/* endpoints)\n2025-08-23 08:03:58,805 - backend.core.app - INFO - \u2705 Consolidated ML routes included (/api/v2/ml/* endpoints)\n2025-08-23 08:03:58,807 - backend.core.app - ERROR - \u274c Failed to register consolidated Admin routes: parameter without a default follows parameter with a default (consolidated_admin.py, line 165)\n2025-08-23 08:03:58,811 - backend.core.app - INFO - \u2705 Odds & Line Movement routes included (/v1/odds/* endpoints)\n2025-08-23 08:03:58,812 - backend.core.app - INFO - \u2705 Advanced-Kelly compatibility router mounted at /api/advanced-kelly\n2025-08-23 08:03:58,815 - backend.core.app - ERROR - \u274c Failed to register Risk Management & Personalization routes: 'NoneType' object has no attribute 'alert_evaluation_interval_seconds'\n2025-08-23 08:03:58,816 - backend.core.app - INFO - \u2705 Dependencies Health routes included (/api/dependencies/* endpoints)\n2025-08-23 08:03:58,819 - backend.core.app - INFO - \u2705 Provider Resilience routes included (/api/provider-resilience/* endpoints)\n2025-08-23 08:03:58,820 - backend.core.app - INFO - \u2705 System capabilities routes included (/api/system/* endpoints)\n2025-08-23 08:03:58,821 - backend.core.app - INFO - \u2705 Real-time market streaming routes included (/streaming/* endpoints)\n2025-08-23 08:03:58,822 - backend.core.app - INFO - \u2705 Security HEAD endpoints included (/api/* HEAD endpoints)\n2025-08-23 08:03:58,823 - backend.core.app - INFO - \u2705 ML Model Registry routes included (/api/models/* endpoints)\n2025-08-23 08:03:58,824 - backend.core.app - INFO - \u2705 Data ingestion routes included (/api/v1/ingestion/* endpoints)\n2025-08-23 08:03:58,828 - backend.core.app - INFO - \u2705 Enterprise model registry routes included (/api/models/enterprise/* endpoints)\n2025-08-23 08:03:58,831 - backend.core.app - INFO - \u2705 Alert engine routes included (/api/alert-engine/* endpoints)\n2025-08-23 08:03:58,835 - backend.core.app - INFO - \u2705 PropFinder routes included (/api/propfinder/* endpoints)\n2025-08-23 08:03:58,836 - backend.core.app - WARNING - \u26a0\ufe0f Could not import multiple_sportsbook_routes: cannot import name 'RateLimiter' from 'backend.middleware.rate_limit' (C:\\Users\\bcmad\\Downloads\\A1Betting7-13.2\\backend\\middleware\\rate_limit.py)\n2025-08-23 08:03:58,839 - backend.core.app - INFO - \u2705 Sportsbook compatibility router mounted at /api/sportsbook\n2025-08-23 08:03:58,839 - backend.core.app - INFO - \U0001f50d Bootstrap validation scheduled on startup\n2025-08-23 08:03:58,839 - backend.core.app - INFO - \U0001f3e5 Health endpoints normalized: /api/health, /health, /api/v2/health -> identical envelope format\n2025-08-23 08:03:58,839 - backend.core.app - INFO - \u2705 A1Betting canonical app created successfully
----------------------------- Captured log setup ------------------------------
INFO     backend.core.app:app.py:65 \U0001f680 Creating A1Betting canonical app...\nINFO     backend.core.app:app.py:104 \u2705 Request ID correlation middleware added\nINFO     backend.core.app:app.py:114 \u2705 Distributed trace correlation middleware added\nINFO     backend.core.app:app.py:126 \u2705 Structured logging middleware added\nINFO     backend.core.app:app.py:146 \u2705 Prometheus metrics middleware added\nINFO     backend.core.app:app.py:167 \u2705 Payload guard middleware added: max_size=262144 bytes, enforce_json=True, enabled=True\nINFO     backend.middleware.rate_limit:rate_limit.py:90 Rate limiting disabled\nINFO     backend.core.app:app.py:202 \u2705 Rate limiting middleware added: 100/min, burst=200, enabled=False\nINFO     backend.core.app:app.py:244 \u2705 Security headers middleware added: [HSTS, CSP(report-only), COOP, COEP], x_frame_options=DENY\nINFO     backend.core.app:app.py:259 \u2705 Legacy endpoint middleware added for usage telemetry and deprecation controls\nINFO     backend.exceptions.handlers:handlers.py:235 \u2705 PayloadRejectionError handler registered\nINFO     backend.exceptions.handlers:handlers.py:250 \u2705 All exception handlers registered with structured error taxonomy\nINFO     backend.core.app:app.py:269 \u2705 Centralized exception handlers registered\nINFO     backend.core.app:app.py:332 \u2705 PR11 Enhanced WebSocket client route included (/ws/client)\nINFO     backend.core.app:app.py:702 \u2705 Auth routes also exposed at root (/auth/*) for compatibility\nINFO     backend.core.app:app.py:706 \u2705 Auth and users routes included (auth with /api prefix)\nINFO     backend.core.app:app.py:714 \u2705 Diagnostics routes included (/api/v2/diagnostics/health, /api/v2/diagnostics/system)\nINFO     backend.core.app:app.py:763 \u2705 Meta cache routes included (/api/v2/meta/cache-stats, /api/v2/meta/cache-health)\nINFO     backend.core.app:app.py:773 \u2705 Legacy meta routes included (/api/v2/meta/legacy-usage, /api/v2/meta/migration-readiness)\nERROR    backend.core.app:app.py:788 \u274c Failed to register CSP report routes: Invalid args for response field! Hint: check that <class 'logging.Logger'> is a valid Pydantic field type. If you are using a return type annotation that is not a valid Pydantic field (e.g. Union[Response, dict, None]) you can disable generating the response model from the type annotation with the path operation decorator parameter response_model=None. Read more: https://fastapi.tiangolo.com/tutorial/response-model/\nINFO     backend.core.app:app.py:794 \u2705 Trace test routes included (/api/trace/* endpoints)\nINFO     backend.core.app:app.py:804 \u2705 Model inference routes included (/api/v2/models/* endpoints)\nINFO     backend.core.app:app.py:814 \u2705 Observability events routes included (/api/v2/observability/* endpoints)\nINFO     backend.core.app:app.py:824 \u2705 Admin control routes included (/api/v2/models/shadow/* and /api/v2/models/admin/* endpoints)\nINFO     backend.core.app:app.py:834 \u2705 Enhanced WebSocket routes included (/ws/v2/* endpoints)\nINFO     backend.core.app:app.py:844 \u2705 WebSocket logging routes included (/api/websocket/* endpoints)\nINFO     backend.core.app:app.py:854 \u2705 Version routes included (/api/version/* endpoints)\nINFO     backend.core.app:app.py:864 \u2705 WebVitals pipeline routes included (/api/metrics/v1/* endpoints)\nINFO     backend.core.app:app.py:874 \u2705 Enhanced ML routes included (/api/enhanced-ml/* endpoints)\nINFO     backend.core.app:app.py:986 \u2705 Fallback enhanced-ml compatibility router mounted at /api/enhanced-ml\nINFO     backend.core.app:app.py:995 \u2705 Consolidated PrizePicks routes included (/api/v2/prizepicks/* endpoints)\nINFO     backend.core.app:app.py:1005 \u2705 Consolidated ML routes included (/api/v2/ml/* endpoints)\nERROR    backend.core.app:app.py:1019 \u274c Failed to register consolidated Admin routes: parameter without a default follows parameter with a default (consolidated_admin.py, line 165)\nINFO     backend.core.app:app.py:1025 \u2705 Odds & Line Movement routes included (/v1/odds/* endpoints)\nINFO     backend.core.app:app.py:1066 \u2705 Advanced-Kelly compatibility router mounted at /api/advanced-kelly\nERROR    backend.core.app:app.py:1078 \u274c Failed to register Risk Management & Personalization routes: 'NoneType' object has no attribute 'alert_evaluation_interval_seconds'\nINFO     backend.core.app:app.py:1084 \u2705 Dependencies Health routes included (/api/dependencies/* endpoints)\nINFO     backend.core.app:app.py:1094 \u2705 Provider Resilience routes included (/api/provider-resilience/* endpoints)\nINFO     backend.core.app:app.py:1104 \u2705 System capabilities routes included (/api/system/* endpoints)\nINFO     backend.core.app:app.py:1114 \u2705 Real-time market streaming routes included (/streaming/* endpoints)\nINFO     backend.core.app:app.py:1124 \u2705 Security HEAD endpoints included (/api/* HEAD endpoints)\nINFO     backend.core.app:app.py:1134 \u2705 ML Model Registry routes included (/api/models/* endpoints)\nINFO     backend.core.app:app.py:1144 \u2705 Data ingestion routes included (/api/v1/ingestion/* endpoints)\nINFO     backend.core.app:app.py:1154 \u2705 Enterprise model registry routes included (/api/models/enterprise/* endpoints)\nINFO     backend.core.app:app.py:1199 \u2705 Alert engine routes included (/api/alert-engine/* endpoints)\nINFO     backend.core.app:app.py:1209 \u2705 PropFinder routes included (/api/propfinder/* endpoints)\nWARNING  backend.core.app:app.py:1221 \u26a0\ufe0f Could not import multiple_sportsbook_routes: cannot import name 'RateLimiter' from 'backend.middleware.rate_limit' (C:\\Users\\bcmad\\Downloads\\A1Betting7-13.2\\backend\\middleware\\rate_limit.py)\nINFO     backend.core.app:app.py:1495 \u2705 Sportsbook compatibility router mounted at /api/sportsbook\nINFO     backend.core.app:app.py:1527 \U0001f50d Bootstrap validation scheduled on startup\nINFO     backend.core.app:app.py:1535 \U0001f3e5 Health endpoints normalized: /api/health, /health, /api/v2/health -> identical envelope format\nINFO     backend.core.app:app.py:1536 \u2705 A1Betting canonical app created successfully
---------------------------- Captured stderr call -----------------------------
2025-08-23 08:03:58,842 - backend.middleware.rate_limit - INFO - Rate limiting disabled\n2025-08-23 08:03:58,842 - backend.middleware.security_headers - INFO - \u2705 Security headers middleware enabled: CSP=report-only, HSTS=True, strict_mode=False\n2025-08-23 08:03:58,843 - backend.middleware.legacy_middleware - INFO - Registered known legacy endpoints with forwarding paths\n2025-08-23 08:03:58,843 - backend.middleware.legacy_middleware - INFO - Legacy middleware initialized\n2025-08-23 08:03:58,843 - backend.middleware.legacy_middleware - INFO - Legacy endpoint accessed: GET /api/sportsbook/best-odds (count: 2)\n{"timestamp": "2025-08-23T13:03:58.843649", "level": "INFO", "logger": "a1betting", "message": "Request started", "module": "structured_logging_middleware", "function": "log_request_start", "line": 109, "request_id": "0866d47f-d405-4160-aa8c-39e6307a0d00", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro", "event_type": "request_start", "method": "GET", "url": "http://testserver/api/sportsbook/best-odds?sport=mlb&player_name=Mike%20Trout&bet_type=hits", "path": "/api/sportsbook/best-odds", "query_params": {"sport": "mlb", "player_name": "Mike Trout", "bet_type": "hits"}, "client_ip": "127.0.0.1", "user_agent": "python-httpx/0.28.1", "content_type": null}\n2025-08-23 08:03:58,843 - backend.middleware.request_id_middleware - INFO - Request started: GET /api/sportsbook/best-odds\n2025-08-23 08:03:58,844 - backend.middleware.request_id_middleware - INFO - Request completed: GET /api/sportsbook/best-odds - 200\n2025-08-23 08:03:58,844 - backend.middleware.distributed_trace_middleware - INFO - Trace completed: c80021c0-9f73-489c-a07f-592e9e5871a5\n{"timestamp": "2025-08-23T13:03:58.844479", "level": "INFO", "logger": "a1betting", "message": "Request completed", "module": "structured_logging_middleware", "function": "log_request_success", "line": 124, "request_id": "0866d47f-d405-4160-aa8c-39e6307a0d00", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro", "event_type": "request_success", "method": "GET", "url": "http://testserver/api/sportsbook/best-odds?sport=mlb&player_name=Mike%20Trout&bet_type=hits", "path": "/api/sportsbook/best-odds", "status_code": 200, "duration_ms": 0.86, "response_size": "39", "performance_category": "fast"}
------------------------------ Captured log call ------------------------------
INFO     backend.middleware.rate_limit:rate_limit.py:90 Rate limiting disabled\nINFO     backend.middleware.security_headers:security_headers.py:71 \u2705 Security headers middleware enabled: CSP=report-only, HSTS=True, strict_mode=False\nINFO     backend.middleware.legacy_middleware:legacy_middleware.py:68 Registered known legacy endpoints with forwarding paths\nINFO     backend.middleware.legacy_middleware:legacy_middleware.py:44 Legacy middleware initialized\nINFO     backend.middleware.legacy_middleware:legacy_middleware.py:177 Legacy endpoint accessed: GET /api/sportsbook/best-odds (count: 2)\nINFO     backend.middleware.request_id_middleware:request_id_middleware.py:67 Request started: GET /api/sportsbook/best-odds\nINFO     backend.middleware.request_id_middleware:request_id_middleware.py:92 Request completed: GET /api/sportsbook/best-odds - 200\nINFO     backend.middleware.distributed_trace_middleware:distributed_trace_middleware.py:224 Trace completed: c80021c0-9f73-489c-a07f-592e9e5871a5
__________ TestMultipleSportsbookRoutes.test_get_performance_metrics __________
tests\backend\routes\test_multiple_sportsbook_routes.py:355: in test_get_performance_metrics
    assert response.status_code == status.HTTP_200_OK
E   assert 404 == 200
E    +  where 404 = <Response [404 Not Found]>.status_code
E    +  and   200 = status.HTTP_200_OK
---------------------------- Captured stderr setup ----------------------------
2025-08-23 08:03:59,044 - backend.core.app - INFO - \U0001f680 Creating A1Betting canonical app...\n2025-08-23 08:03:59,044 - backend.core.app - INFO - \u2705 Request ID correlation middleware added\n2025-08-23 08:03:59,044 - backend.core.app - INFO - \u2705 Distributed trace correlation middleware added\n2025-08-23 08:03:59,044 - backend.core.app - INFO - \u2705 Structured logging middleware added\n2025-08-23 08:03:59,044 - backend.core.app - INFO - \u2705 Prometheus metrics middleware added\n2025-08-23 08:03:59,044 - backend.core.app - INFO - \u2705 Payload guard middleware added: max_size=262144 bytes, enforce_json=True, enabled=True\n2025-08-23 08:03:59,044 - backend.middleware.rate_limit - INFO - Rate limiting disabled\n2025-08-23 08:03:59,044 - backend.core.app - INFO - \u2705 Rate limiting middleware added: 100/min, burst=200, enabled=False\n2025-08-23 08:03:59,044 - backend.core.app - INFO - \u2705 Security headers middleware added: [HSTS, CSP(report-only), COOP, COEP], x_frame_options=DENY\n2025-08-23 08:03:59,044 - backend.core.app - INFO - \u2705 Legacy endpoint middleware added for usage telemetry and deprecation controls\n2025-08-23 08:03:59,044 - backend.exceptions.handlers - INFO - \u2705 PayloadRejectionError handler registered\n2025-08-23 08:03:59,044 - backend.exceptions.handlers - INFO - \u2705 All exception handlers registered with structured error taxonomy\n2025-08-23 08:03:59,044 - backend.core.app - INFO - \u2705 Centralized exception handlers registered\n2025-08-23 08:03:59,045 - backend.core.app - INFO - \u2705 PR11 Enhanced WebSocket client route included (/ws/client)\n2025-08-23 08:03:59,050 - backend.core.app - INFO - \u2705 Auth routes also exposed at root (/auth/*) for compatibility\n2025-08-23 08:03:59,050 - backend.core.app - INFO - \u2705 Auth and users routes included (auth with /api prefix)\n2025-08-23 08:03:59,051 - backend.core.app - INFO - \u2705 Diagnostics routes included (/api/v2/diagnostics/health, /api/v2/diagnostics/system)\n2025-08-23 08:03:59,052 - backend.core.app - INFO - \u2705 Meta cache routes included (/api/v2/meta/cache-stats, /api/v2/meta/cache-health)\n2025-08-23 08:03:59,052 - backend.core.app - INFO - \u2705 Legacy meta routes included (/api/v2/meta/legacy-usage, /api/v2/meta/migration-readiness)\n2025-08-23 08:03:59,055 - backend.core.app - ERROR - \u274c Failed to register CSP report routes: Invalid args for response field! Hint: check that <class 'logging.Logger'> is a valid Pydantic field type. If you are using a return type annotation that is not a valid Pydantic field (e.g. Union[Response, dict, None]) you can disable generating the response model from the type annotation with the path operation decorator parameter response_model=None. Read more: https://fastapi.tiangolo.com/tutorial/response-model/\n2025-08-23 08:03:59,055 - backend.core.app - INFO - \u2705 Trace test routes included (/api/trace/* endpoints)\n2025-08-23 08:03:59,057 - backend.core.app - INFO - \u2705 Model inference routes included (/api/v2/models/* endpoints)\n2025-08-23 08:03:59,058 - backend.core.app - INFO - \u2705 Observability events routes included (/api/v2/observability/* endpoints)\n2025-08-23 08:03:59,060 - backend.core.app - INFO - \u2705 Admin control routes included (/api/v2/models/shadow/* and /api/v2/models/admin/* endpoints)\n2025-08-23 08:03:59,062 - backend.core.app - INFO - \u2705 Enhanced WebSocket routes included (/ws/v2/* endpoints)\n2025-08-23 08:03:59,063 - backend.core.app - INFO - \u2705 WebSocket logging routes included (/api/websocket/* endpoints)\n2025-08-23 08:03:59,064 - backend.core.app - INFO - \u2705 Version routes included (/api/version/* endpoints)\n2025-08-23 08:03:59,064 - backend.core.app - INFO - \u2705 WebVitals pipeline routes included (/api/metrics/v1/* endpoints)\n2025-08-23 08:03:59,068 - backend.core.app - INFO - \u2705 Enhanced ML routes included (/api/enhanced-ml/* endpoints)\n2025-08-23 08:03:59,068 - backend.core.app - INFO - \u2705 Fallback enhanced-ml compatibility router mounted at /api/enhanced-ml\n2025-08-23 08:03:59,073 - backend.core.app - INFO - \u2705 Consolidated PrizePicks routes included (/api/v2/prizepicks/* endpoints)\n2025-08-23 08:03:59,077 - backend.core.app - INFO - \u2705 Consolidated ML routes included (/api/v2/ml/* endpoints)\n2025-08-23 08:03:59,079 - backend.core.app - ERROR - \u274c Failed to register consolidated Admin routes: parameter without a default follows parameter with a default (consolidated_admin.py, line 165)\n2025-08-23 08:03:59,083 - backend.core.app - INFO - \u2705 Odds & Line Movement routes included (/v1/odds/* endpoints)\n2025-08-23 08:03:59,084 - backend.core.app - INFO - \u2705 Advanced-Kelly compatibility router mounted at /api/advanced-kelly\n2025-08-23 08:03:59,087 - backend.core.app - ERROR - \u274c Failed to register Risk Management & Personalization routes: 'NoneType' object has no attribute 'alert_evaluation_interval_seconds'\n2025-08-23 08:03:59,088 - backend.core.app - INFO - \u2705 Dependencies Health routes included (/api/dependencies/* endpoints)\n2025-08-23 08:03:59,091 - backend.core.app - INFO - \u2705 Provider Resilience routes included (/api/provider-resilience/* endpoints)\n2025-08-23 08:03:59,092 - backend.core.app - INFO - \u2705 System capabilities routes included (/api/system/* endpoints)\n2025-08-23 08:03:59,093 - backend.core.app - INFO - \u2705 Real-time market streaming routes included (/streaming/* endpoints)\n2025-08-23 08:03:59,094 - backend.core.app - INFO - \u2705 Security HEAD endpoints included (/api/* HEAD endpoints)\n2025-08-23 08:03:59,096 - backend.core.app - INFO - \u2705 ML Model Registry routes included (/api/models/* endpoints)\n2025-08-23 08:03:59,099 - backend.core.app - INFO - \u2705 Data ingestion routes included (/api/v1/ingestion/* endpoints)\n2025-08-23 08:03:59,102 - backend.core.app - INFO - \u2705 Enterprise model registry routes included (/api/models/enterprise/* endpoints)\n2025-08-23 08:03:59,106 - backend.core.app - INFO - \u2705 Alert engine routes included (/api/alert-engine/* endpoints)\n2025-08-23 08:03:59,110 - backend.core.app - INFO - \u2705 PropFinder routes included (/api/propfinder/* endpoints)\n2025-08-23 08:03:59,110 - backend.core.app - WARNING - \u26a0\ufe0f Could not import multiple_sportsbook_routes: cannot import name 'RateLimiter' from 'backend.middleware.rate_limit' (C:\\Users\\bcmad\\Downloads\\A1Betting7-13.2\\backend\\middleware\\rate_limit.py)\n2025-08-23 08:03:59,113 - backend.core.app - INFO - \u2705 Sportsbook compatibility router mounted at /api/sportsbook\n2025-08-23 08:03:59,113 - backend.core.app - INFO - \U0001f50d Bootstrap validation scheduled on startup\n2025-08-23 08:03:59,113 - backend.core.app - INFO - \U0001f3e5 Health endpoints normalized: /api/health, /health, /api/v2/health -> identical envelope format\n2025-08-23 08:03:59,113 - backend.core.app - INFO - \u2705 A1Betting canonical app created successfully
----------------------------- Captured log setup ------------------------------
INFO     backend.core.app:app.py:65 \U0001f680 Creating A1Betting canonical app...\nINFO     backend.core.app:app.py:104 \u2705 Request ID correlation middleware added\nINFO     backend.core.app:app.py:114 \u2705 Distributed trace correlation middleware added\nINFO     backend.core.app:app.py:126 \u2705 Structured logging middleware added\nINFO     backend.core.app:app.py:146 \u2705 Prometheus metrics middleware added\nINFO     backend.core.app:app.py:167 \u2705 Payload guard middleware added: max_size=262144 bytes, enforce_json=True, enabled=True\nINFO     backend.middleware.rate_limit:rate_limit.py:90 Rate limiting disabled\nINFO     backend.core.app:app.py:202 \u2705 Rate limiting middleware added: 100/min, burst=200, enabled=False\nINFO     backend.core.app:app.py:244 \u2705 Security headers middleware added: [HSTS, CSP(report-only), COOP, COEP], x_frame_options=DENY\nINFO     backend.core.app:app.py:259 \u2705 Legacy endpoint middleware added for usage telemetry and deprecation controls\nINFO     backend.exceptions.handlers:handlers.py:235 \u2705 PayloadRejectionError handler registered\nINFO     backend.exceptions.handlers:handlers.py:250 \u2705 All exception handlers registered with structured error taxonomy\nINFO     backend.core.app:app.py:269 \u2705 Centralized exception handlers registered\nINFO     backend.core.app:app.py:332 \u2705 PR11 Enhanced WebSocket client route included (/ws/client)\nINFO     backend.core.app:app.py:702 \u2705 Auth routes also exposed at root (/auth/*) for compatibility\nINFO     backend.core.app:app.py:706 \u2705 Auth and users routes included (auth with /api prefix)\nINFO     backend.core.app:app.py:714 \u2705 Diagnostics routes included (/api/v2/diagnostics/health, /api/v2/diagnostics/system)\nINFO     backend.core.app:app.py:763 \u2705 Meta cache routes included (/api/v2/meta/cache-stats, /api/v2/meta/cache-health)\nINFO     backend.core.app:app.py:773 \u2705 Legacy meta routes included (/api/v2/meta/legacy-usage, /api/v2/meta/migration-readiness)\nERROR    backend.core.app:app.py:788 \u274c Failed to register CSP report routes: Invalid args for response field! Hint: check that <class 'logging.Logger'> is a valid Pydantic field type. If you are using a return type annotation that is not a valid Pydantic field (e.g. Union[Response, dict, None]) you can disable generating the response model from the type annotation with the path operation decorator parameter response_model=None. Read more: https://fastapi.tiangolo.com/tutorial/response-model/\nINFO     backend.core.app:app.py:794 \u2705 Trace test routes included (/api/trace/* endpoints)\nINFO     backend.core.app:app.py:804 \u2705 Model inference routes included (/api/v2/models/* endpoints)\nINFO     backend.core.app:app.py:814 \u2705 Observability events routes included (/api/v2/observability/* endpoints)\nINFO     backend.core.app:app.py:824 \u2705 Admin control routes included (/api/v2/models/shadow/* and /api/v2/models/admin/* endpoints)\nINFO     backend.core.app:app.py:834 \u2705 Enhanced WebSocket routes included (/ws/v2/* endpoints)\nINFO     backend.core.app:app.py:844 \u2705 WebSocket logging routes included (/api/websocket/* endpoints)\nINFO     backend.core.app:app.py:854 \u2705 Version routes included (/api/version/* endpoints)\nINFO     backend.core.app:app.py:864 \u2705 WebVitals pipeline routes included (/api/metrics/v1/* endpoints)\nINFO     backend.core.app:app.py:874 \u2705 Enhanced ML routes included (/api/enhanced-ml/* endpoints)\nINFO     backend.core.app:app.py:986 \u2705 Fallback enhanced-ml compatibility router mounted at /api/enhanced-ml\nINFO     backend.core.app:app.py:995 \u2705 Consolidated PrizePicks routes included (/api/v2/prizepicks/* endpoints)\nINFO     backend.core.app:app.py:1005 \u2705 Consolidated ML routes included (/api/v2/ml/* endpoints)\nERROR    backend.core.app:app.py:1019 \u274c Failed to register consolidated Admin routes: parameter without a default follows parameter with a default (consolidated_admin.py, line 165)\nINFO     backend.core.app:app.py:1025 \u2705 Odds & Line Movement routes included (/v1/odds/* endpoints)\nINFO     backend.core.app:app.py:1066 \u2705 Advanced-Kelly compatibility router mounted at /api/advanced-kelly\nERROR    backend.core.app:app.py:1078 \u274c Failed to register Risk Management & Personalization routes: 'NoneType' object has no attribute 'alert_evaluation_interval_seconds'\nINFO     backend.core.app:app.py:1084 \u2705 Dependencies Health routes included (/api/dependencies/* endpoints)\nINFO     backend.core.app:app.py:1094 \u2705 Provider Resilience routes included (/api/provider-resilience/* endpoints)\nINFO     backend.core.app:app.py:1104 \u2705 System capabilities routes included (/api/system/* endpoints)\nINFO     backend.core.app:app.py:1114 \u2705 Real-time market streaming routes included (/streaming/* endpoints)\nINFO     backend.core.app:app.py:1124 \u2705 Security HEAD endpoints included (/api/* HEAD endpoints)\nINFO     backend.core.app:app.py:1134 \u2705 ML Model Registry routes included (/api/models/* endpoints)\nINFO     backend.core.app:app.py:1144 \u2705 Data ingestion routes included (/api/v1/ingestion/* endpoints)\nINFO     backend.core.app:app.py:1154 \u2705 Enterprise model registry routes included (/api/models/enterprise/* endpoints)\nINFO     backend.core.app:app.py:1199 \u2705 Alert engine routes included (/api/alert-engine/* endpoints)\nINFO     backend.core.app:app.py:1209 \u2705 PropFinder routes included (/api/propfinder/* endpoints)\nWARNING  backend.core.app:app.py:1221 \u26a0\ufe0f Could not import multiple_sportsbook_routes: cannot import name 'RateLimiter' from 'backend.middleware.rate_limit' (C:\\Users\\bcmad\\Downloads\\A1Betting7-13.2\\backend\\middleware\\rate_limit.py)\nINFO     backend.core.app:app.py:1495 \u2705 Sportsbook compatibility router mounted at /api/sportsbook\nINFO     backend.core.app:app.py:1527 \U0001f50d Bootstrap validation scheduled on startup\nINFO     backend.core.app:app.py:1535 \U0001f3e5 Health endpoints normalized: /api/health, /health, /api/v2/health -> identical envelope format\nINFO     backend.core.app:app.py:1536 \u2705 A1Betting canonical app created successfully
---------------------------- Captured stderr call -----------------------------
2025-08-23 08:03:59,116 - backend.middleware.rate_limit - INFO - Rate limiting disabled\n2025-08-23 08:03:59,116 - backend.middleware.security_headers - INFO - \u2705 Security headers middleware enabled: CSP=report-only, HSTS=True, strict_mode=False\n2025-08-23 08:03:59,116 - backend.middleware.legacy_middleware - INFO - Registered known legacy endpoints with forwarding paths\n2025-08-23 08:03:59,116 - backend.middleware.legacy_middleware - INFO - Legacy middleware initialized\n2025-08-23 08:03:59,116 - backend.services.legacy_registry - INFO - Registered legacy endpoint: /api/sportsbook/performance -> None\n2025-08-23 08:03:59,116 - backend.middleware.legacy_middleware - INFO - Legacy endpoint accessed: GET /api/sportsbook/performance (count: 1)\n{"timestamp": "2025-08-23T13:03:59.117121", "level": "INFO", "logger": "a1betting", "message": "Request started", "module": "structured_logging_middleware", "function": "log_request_start", "line": 109, "request_id": "09d7df13-9131-4826-a8e8-793758b1ebe2", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro", "event_type": "request_start", "method": "GET", "url": "http://testserver/api/sportsbook/performance", "path": "/api/sportsbook/performance", "query_params": {}, "client_ip": "127.0.0.1", "user_agent": "python-httpx/0.28.1", "content_type": null}\n2025-08-23 08:03:59,117 - backend.middleware.request_id_middleware - INFO - Request started: GET /api/sportsbook/performance\n2025-08-23 08:03:59,117 - backend.errors.catalog - ERROR - API Error: E4040_NOT_FOUND\n2025-08-23 08:03:59,117 - backend.middleware.request_id_middleware - INFO - Request completed: GET /api/sportsbook/performance - 404\n2025-08-23 08:03:59,118 - backend.middleware.distributed_trace_middleware - INFO - Trace completed: 49e8984c-3397-4a40-b3c0-4025a758713f\n{"timestamp": "2025-08-23T13:03:59.118110", "level": "INFO", "logger": "a1betting", "message": "Request completed", "module": "structured_logging_middleware", "function": "log_request_success", "line": 124, "request_id": "09d7df13-9131-4826-a8e8-793758b1ebe2", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro", "event_type": "request_success", "method": "GET", "url": "http://testserver/api/sportsbook/performance", "path": "/api/sportsbook/performance", "status_code": 404, "duration_ms": 1.02, "response_size": "243", "performance_category": "fast"}
------------------------------ Captured log call ------------------------------
INFO     backend.middleware.rate_limit:rate_limit.py:90 Rate limiting disabled\nINFO     backend.middleware.security_headers:security_headers.py:71 \u2705 Security headers middleware enabled: CSP=report-only, HSTS=True, strict_mode=False\nINFO     backend.middleware.legacy_middleware:legacy_middleware.py:68 Registered known legacy endpoints with forwarding paths\nINFO     backend.middleware.legacy_middleware:legacy_middleware.py:44 Legacy middleware initialized\nINFO     backend.services.legacy_registry:legacy_registry.py:102 Registered legacy endpoint: /api/sportsbook/performance -> None\nINFO     backend.middleware.legacy_middleware:legacy_middleware.py:177 Legacy endpoint accessed: GET /api/sportsbook/performance (count: 1)\nINFO     backend.middleware.request_id_middleware:request_id_middleware.py:67 Request started: GET /api/sportsbook/performance\nERROR    backend.errors.catalog:catalog.py:304 API Error: E4040_NOT_FOUND\nINFO     backend.middleware.request_id_middleware:request_id_middleware.py:92 Request completed: GET /api/sportsbook/performance - 404\nINFO     backend.middleware.distributed_trace_middleware:distributed_trace_middleware.py:224 Trace completed: 49e8984c-3397-4a40-b3c0-4025a758713f
___________ TestMultipleSportsbookRoutes.test_get_available_sports ____________
tests\backend\routes\test_multiple_sportsbook_routes.py:380: in test_get_available_sports
    assert len(data) >= len(expected_sports)
E   AssertionError: assert 3 >= 10
E    +  where 3 = len({'data': ['nba', 'nfl', 'mlb'], 'error': None, 'success': True})
E    +  and   10 = len(['nba', 'nfl', 'mlb', 'nhl', 'ncaab', 'ncaaf', ...])
---------------------------- Captured stderr setup ----------------------------
2025-08-23 08:03:59,125 - backend.core.app - INFO - \U0001f680 Creating A1Betting canonical app...\n2025-08-23 08:03:59,125 - backend.core.app - INFO - \u2705 Request ID correlation middleware added\n2025-08-23 08:03:59,125 - backend.core.app - INFO - \u2705 Distributed trace correlation middleware added\n2025-08-23 08:03:59,125 - backend.core.app - INFO - \u2705 Structured logging middleware added\n2025-08-23 08:03:59,125 - backend.core.app - INFO - \u2705 Prometheus metrics middleware added\n2025-08-23 08:03:59,125 - backend.core.app - INFO - \u2705 Payload guard middleware added: max_size=262144 bytes, enforce_json=True, enabled=True\n2025-08-23 08:03:59,126 - backend.middleware.rate_limit - INFO - Rate limiting disabled\n2025-08-23 08:03:59,126 - backend.core.app - INFO - \u2705 Rate limiting middleware added: 100/min, burst=200, enabled=False\n2025-08-23 08:03:59,126 - backend.core.app - INFO - \u2705 Security headers middleware added: [HSTS, CSP(report-only), COOP, COEP], x_frame_options=DENY\n2025-08-23 08:03:59,126 - backend.core.app - INFO - \u2705 Legacy endpoint middleware added for usage telemetry and deprecation controls\n2025-08-23 08:03:59,126 - backend.exceptions.handlers - INFO - \u2705 PayloadRejectionError handler registered\n2025-08-23 08:03:59,126 - backend.exceptions.handlers - INFO - \u2705 All exception handlers registered with structured error taxonomy\n2025-08-23 08:03:59,126 - backend.core.app - INFO - \u2705 Centralized exception handlers registered\n2025-08-23 08:03:59,127 - backend.core.app - INFO - \u2705 PR11 Enhanced WebSocket client route included (/ws/client)\n2025-08-23 08:03:59,131 - backend.core.app - INFO - \u2705 Auth routes also exposed at root (/auth/*) for compatibility\n2025-08-23 08:03:59,131 - backend.core.app - INFO - \u2705 Auth and users routes included (auth with /api prefix)\n2025-08-23 08:03:59,132 - backend.core.app - INFO - \u2705 Diagnostics routes included (/api/v2/diagnostics/health, /api/v2/diagnostics/system)\n2025-08-23 08:03:59,133 - backend.core.app - INFO - \u2705 Meta cache routes included (/api/v2/meta/cache-stats, /api/v2/meta/cache-health)\n2025-08-23 08:03:59,134 - backend.core.app - INFO - \u2705 Legacy meta routes included (/api/v2/meta/legacy-usage, /api/v2/meta/migration-readiness)\n2025-08-23 08:03:59,136 - backend.core.app - ERROR - \u274c Failed to register CSP report routes: Invalid args for response field! Hint: check that <class 'logging.Logger'> is a valid Pydantic field type. If you are using a return type annotation that is not a valid Pydantic field (e.g. Union[Response, dict, None]) you can disable generating the response model from the type annotation with the path operation decorator parameter response_model=None. Read more: https://fastapi.tiangolo.com/tutorial/response-model/\n2025-08-23 08:03:59,136 - backend.core.app - INFO - \u2705 Trace test routes included (/api/trace/* endpoints)\n2025-08-23 08:03:59,138 - backend.core.app - INFO - \u2705 Model inference routes included (/api/v2/models/* endpoints)\n2025-08-23 08:03:59,139 - backend.core.app - INFO - \u2705 Observability events routes included (/api/v2/observability/* endpoints)\n2025-08-23 08:03:59,140 - backend.core.app - INFO - \u2705 Admin control routes included (/api/v2/models/shadow/* and /api/v2/models/admin/* endpoints)\n2025-08-23 08:03:59,142 - backend.core.app - INFO - \u2705 Enhanced WebSocket routes included (/ws/v2/* endpoints)\n2025-08-23 08:03:59,143 - backend.core.app - INFO - \u2705 WebSocket logging routes included (/api/websocket/* endpoints)\n2025-08-23 08:03:59,144 - backend.core.app - INFO - \u2705 Version routes included (/api/version/* endpoints)\n2025-08-23 08:03:59,144 - backend.core.app - INFO - \u2705 WebVitals pipeline routes included (/api/metrics/v1/* endpoints)\n2025-08-23 08:03:59,148 - backend.core.app - INFO - \u2705 Enhanced ML routes included (/api/enhanced-ml/* endpoints)\n2025-08-23 08:03:59,149 - backend.core.app - INFO - \u2705 Fallback enhanced-ml compatibility router mounted at /api/enhanced-ml\n2025-08-23 08:03:59,154 - backend.core.app - INFO - \u2705 Consolidated PrizePicks routes included (/api/v2/prizepicks/* endpoints)\n2025-08-23 08:03:59,158 - backend.core.app - INFO - \u2705 Consolidated ML routes included (/api/v2/ml/* endpoints)\n2025-08-23 08:03:59,160 - backend.core.app - ERROR - \u274c Failed to register consolidated Admin routes: parameter without a default follows parameter with a default (consolidated_admin.py, line 165)\n2025-08-23 08:03:59,163 - backend.core.app - INFO - \u2705 Odds & Line Movement routes included (/v1/odds/* endpoints)\n2025-08-23 08:03:59,164 - backend.core.app - INFO - \u2705 Advanced-Kelly compatibility router mounted at /api/advanced-kelly\n2025-08-23 08:03:59,166 - backend.core.app - ERROR - \u274c Failed to register Risk Management & Personalization routes: 'NoneType' object has no attribute 'alert_evaluation_interval_seconds'\n2025-08-23 08:03:59,168 - backend.core.app - INFO - \u2705 Dependencies Health routes included (/api/dependencies/* endpoints)\n2025-08-23 08:03:59,170 - backend.core.app - INFO - \u2705 Provider Resilience routes included (/api/provider-resilience/* endpoints)\n2025-08-23 08:03:59,171 - backend.core.app - INFO - \u2705 System capabilities routes included (/api/system/* endpoints)\n2025-08-23 08:03:59,173 - backend.core.app - INFO - \u2705 Real-time market streaming routes included (/streaming/* endpoints)\n2025-08-23 08:03:59,174 - backend.core.app - INFO - \u2705 Security HEAD endpoints included (/api/* HEAD endpoints)\n2025-08-23 08:03:59,175 - backend.core.app - INFO - \u2705 ML Model Registry routes included (/api/models/* endpoints)\n2025-08-23 08:03:59,176 - backend.core.app - INFO - \u2705 Data ingestion routes included (/api/v1/ingestion/* endpoints)\n2025-08-23 08:03:59,180 - backend.core.app - INFO - \u2705 Enterprise model registry routes included (/api/models/enterprise/* endpoints)\n2025-08-23 08:03:59,184 - backend.core.app - INFO - \u2705 Alert engine routes included (/api/alert-engine/* endpoints)\n2025-08-23 08:03:59,190 - backend.core.app - INFO - \u2705 PropFinder routes included (/api/propfinder/* endpoints)\n2025-08-23 08:03:59,191 - backend.core.app - WARNING - \u26a0\ufe0f Could not import multiple_sportsbook_routes: cannot import name 'RateLimiter' from 'backend.middleware.rate_limit' (C:\\Users\\bcmad\\Downloads\\A1Betting7-13.2\\backend\\middleware\\rate_limit.py)\n2025-08-23 08:03:59,193 - backend.core.app - INFO - \u2705 Sportsbook compatibility router mounted at /api/sportsbook\n2025-08-23 08:03:59,194 - backend.core.app - INFO - \U0001f50d Bootstrap validation scheduled on startup\n2025-08-23 08:03:59,194 - backend.core.app - INFO - \U0001f3e5 Health endpoints normalized: /api/health, /health, /api/v2/health -> identical envelope format\n2025-08-23 08:03:59,194 - backend.core.app - INFO - \u2705 A1Betting canonical app created successfully
----------------------------- Captured log setup ------------------------------
INFO     backend.core.app:app.py:65 \U0001f680 Creating A1Betting canonical app...\nINFO     backend.core.app:app.py:104 \u2705 Request ID correlation middleware added\nINFO     backend.core.app:app.py:114 \u2705 Distributed trace correlation middleware added\nINFO     backend.core.app:app.py:126 \u2705 Structured logging middleware added\nINFO     backend.core.app:app.py:146 \u2705 Prometheus metrics middleware added\nINFO     backend.core.app:app.py:167 \u2705 Payload guard middleware added: max_size=262144 bytes, enforce_json=True, enabled=True\nINFO     backend.middleware.rate_limit:rate_limit.py:90 Rate limiting disabled\nINFO     backend.core.app:app.py:202 \u2705 Rate limiting middleware added: 100/min, burst=200, enabled=False\nINFO     backend.core.app:app.py:244 \u2705 Security headers middleware added: [HSTS, CSP(report-only), COOP, COEP], x_frame_options=DENY\nINFO     backend.core.app:app.py:259 \u2705 Legacy endpoint middleware added for usage telemetry and deprecation controls\nINFO     backend.exceptions.handlers:handlers.py:235 \u2705 PayloadRejectionError handler registered\nINFO     backend.exceptions.handlers:handlers.py:250 \u2705 All exception handlers registered with structured error taxonomy\nINFO     backend.core.app:app.py:269 \u2705 Centralized exception handlers registered\nINFO     backend.core.app:app.py:332 \u2705 PR11 Enhanced WebSocket client route included (/ws/client)\nINFO     backend.core.app:app.py:702 \u2705 Auth routes also exposed at root (/auth/*) for compatibility\nINFO     backend.core.app:app.py:706 \u2705 Auth and users routes included (auth with /api prefix)\nINFO     backend.core.app:app.py:714 \u2705 Diagnostics routes included (/api/v2/diagnostics/health, /api/v2/diagnostics/system)\nINFO     backend.core.app:app.py:763 \u2705 Meta cache routes included (/api/v2/meta/cache-stats, /api/v2/meta/cache-health)\nINFO     backend.core.app:app.py:773 \u2705 Legacy meta routes included (/api/v2/meta/legacy-usage, /api/v2/meta/migration-readiness)\nERROR    backend.core.app:app.py:788 \u274c Failed to register CSP report routes: Invalid args for response field! Hint: check that <class 'logging.Logger'> is a valid Pydantic field type. If you are using a return type annotation that is not a valid Pydantic field (e.g. Union[Response, dict, None]) you can disable generating the response model from the type annotation with the path operation decorator parameter response_model=None. Read more: https://fastapi.tiangolo.com/tutorial/response-model/\nINFO     backend.core.app:app.py:794 \u2705 Trace test routes included (/api/trace/* endpoints)\nINFO     backend.core.app:app.py:804 \u2705 Model inference routes included (/api/v2/models/* endpoints)\nINFO     backend.core.app:app.py:814 \u2705 Observability events routes included (/api/v2/observability/* endpoints)\nINFO     backend.core.app:app.py:824 \u2705 Admin control routes included (/api/v2/models/shadow/* and /api/v2/models/admin/* endpoints)\nINFO     backend.core.app:app.py:834 \u2705 Enhanced WebSocket routes included (/ws/v2/* endpoints)\nINFO     backend.core.app:app.py:844 \u2705 WebSocket logging routes included (/api/websocket/* endpoints)\nINFO     backend.core.app:app.py:854 \u2705 Version routes included (/api/version/* endpoints)\nINFO     backend.core.app:app.py:864 \u2705 WebVitals pipeline routes included (/api/metrics/v1/* endpoints)\nINFO     backend.core.app:app.py:874 \u2705 Enhanced ML routes included (/api/enhanced-ml/* endpoints)\nINFO     backend.core.app:app.py:986 \u2705 Fallback enhanced-ml compatibility router mounted at /api/enhanced-ml\nINFO     backend.core.app:app.py:995 \u2705 Consolidated PrizePicks routes included (/api/v2/prizepicks/* endpoints)\nINFO     backend.core.app:app.py:1005 \u2705 Consolidated ML routes included (/api/v2/ml/* endpoints)\nERROR    backend.core.app:app.py:1019 \u274c Failed to register consolidated Admin routes: parameter without a default follows parameter with a default (consolidated_admin.py, line 165)\nINFO     backend.core.app:app.py:1025 \u2705 Odds & Line Movement routes included (/v1/odds/* endpoints)\nINFO     backend.core.app:app.py:1066 \u2705 Advanced-Kelly compatibility router mounted at /api/advanced-kelly\nERROR    backend.core.app:app.py:1078 \u274c Failed to register Risk Management & Personalization routes: 'NoneType' object has no attribute 'alert_evaluation_interval_seconds'\nINFO     backend.core.app:app.py:1084 \u2705 Dependencies Health routes included (/api/dependencies/* endpoints)\nINFO     backend.core.app:app.py:1094 \u2705 Provider Resilience routes included (/api/provider-resilience/* endpoints)\nINFO     backend.core.app:app.py:1104 \u2705 System capabilities routes included (/api/system/* endpoints)\nINFO     backend.core.app:app.py:1114 \u2705 Real-time market streaming routes included (/streaming/* endpoints)\nINFO     backend.core.app:app.py:1124 \u2705 Security HEAD endpoints included (/api/* HEAD endpoints)\nINFO     backend.core.app:app.py:1134 \u2705 ML Model Registry routes included (/api/models/* endpoints)\nINFO     backend.core.app:app.py:1144 \u2705 Data ingestion routes included (/api/v1/ingestion/* endpoints)\nINFO     backend.core.app:app.py:1154 \u2705 Enterprise model registry routes included (/api/models/enterprise/* endpoints)\nINFO     backend.core.app:app.py:1199 \u2705 Alert engine routes included (/api/alert-engine/* endpoints)\nINFO     backend.core.app:app.py:1209 \u2705 PropFinder routes included (/api/propfinder/* endpoints)\nWARNING  backend.core.app:app.py:1221 \u26a0\ufe0f Could not import multiple_sportsbook_routes: cannot import name 'RateLimiter' from 'backend.middleware.rate_limit' (C:\\Users\\bcmad\\Downloads\\A1Betting7-13.2\\backend\\middleware\\rate_limit.py)\nINFO     backend.core.app:app.py:1495 \u2705 Sportsbook compatibility router mounted at /api/sportsbook\nINFO     backend.core.app:app.py:1527 \U0001f50d Bootstrap validation scheduled on startup\nINFO     backend.core.app:app.py:1535 \U0001f3e5 Health endpoints normalized: /api/health, /health, /api/v2/health -> identical envelope format\nINFO     backend.core.app:app.py:1536 \u2705 A1Betting canonical app created successfully
---------------------------- Captured stderr call -----------------------------
2025-08-23 08:03:59,195 - backend.middleware.rate_limit - INFO - Rate limiting disabled\n2025-08-23 08:03:59,195 - backend.middleware.security_headers - INFO - \u2705 Security headers middleware enabled: CSP=report-only, HSTS=True, strict_mode=False\n2025-08-23 08:03:59,195 - backend.middleware.legacy_middleware - INFO - Registered known legacy endpoints with forwarding paths\n2025-08-23 08:03:59,195 - backend.middleware.legacy_middleware - INFO - Legacy middleware initialized\n2025-08-23 08:03:59,195 - backend.services.legacy_registry - INFO - Registered legacy endpoint: /api/sportsbook/sports -> None\n2025-08-23 08:03:59,195 - backend.middleware.legacy_middleware - INFO - Legacy endpoint accessed: GET /api/sportsbook/sports (count: 1)\n{"timestamp": "2025-08-23T13:03:59.196136", "level": "INFO", "logger": "a1betting", "message": "Request started", "module": "structured_logging_middleware", "function": "log_request_start", "line": 109, "request_id": "0e6bccb1-c078-4d40-b072-8bbafe48d2b3", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro", "event_type": "request_start", "method": "GET", "url": "http://testserver/api/sportsbook/sports", "path": "/api/sportsbook/sports", "query_params": {}, "client_ip": "127.0.0.1", "user_agent": "python-httpx/0.28.1", "content_type": null}\n2025-08-23 08:03:59,196 - backend.middleware.request_id_middleware - INFO - Request started: GET /api/sportsbook/sports\n2025-08-23 08:03:59,197 - backend.middleware.request_id_middleware - INFO - Request completed: GET /api/sportsbook/sports - 200\n2025-08-23 08:03:59,197 - backend.middleware.distributed_trace_middleware - INFO - Trace completed: 87c2f54e-85b3-464d-a0fc-c00275ab2b59\n{"timestamp": "2025-08-23T13:03:59.197764", "level": "INFO", "logger": "a1betting", "message": "Request completed", "module": "structured_logging_middleware", "function": "log_request_success", "line": 124, "request_id": "0e6bccb1-c078-4d40-b072-8bbafe48d2b3", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro", "event_type": "request_success", "method": "GET", "url": "http://testserver/api/sportsbook/sports", "path": "/api/sportsbook/sports", "status_code": 200, "duration_ms": 1.64, "response_size": "56", "performance_category": "fast"}
------------------------------ Captured log call ------------------------------
INFO     backend.middleware.rate_limit:rate_limit.py:90 Rate limiting disabled\nINFO     backend.middleware.security_headers:security_headers.py:71 \u2705 Security headers middleware enabled: CSP=report-only, HSTS=True, strict_mode=False\nINFO     backend.middleware.legacy_middleware:legacy_middleware.py:68 Registered known legacy endpoints with forwarding paths\nINFO     backend.middleware.legacy_middleware:legacy_middleware.py:44 Legacy middleware initialized\nINFO     backend.services.legacy_registry:legacy_registry.py:102 Registered legacy endpoint: /api/sportsbook/sports -> None\nINFO     backend.middleware.legacy_middleware:legacy_middleware.py:177 Legacy endpoint accessed: GET /api/sportsbook/sports (count: 1)\nINFO     backend.middleware.request_id_middleware:request_id_middleware.py:67 Request started: GET /api/sportsbook/sports\nINFO     backend.middleware.request_id_middleware:request_id_middleware.py:92 Request completed: GET /api/sportsbook/sports - 200\nINFO     backend.middleware.distributed_trace_middleware:distributed_trace_middleware.py:224 Trace completed: 87c2f54e-85b3-464d-a0fc-c00275ab2b59
____________ TestMultipleSportsbookRoutes.test_search_player_props ____________
tests\backend\routes\test_multiple_sportsbook_routes.py:424: in test_search_player_props
    assert len(data["data"]) == 1
E   assert 0 == 1
E    +  where 0 = len([])
---------------------------- Captured stderr setup ----------------------------
2025-08-23 08:03:59,205 - backend.core.app - INFO - \U0001f680 Creating A1Betting canonical app...\n2025-08-23 08:03:59,206 - backend.core.app - INFO - \u2705 Request ID correlation middleware added\n2025-08-23 08:03:59,206 - backend.core.app - INFO - \u2705 Distributed trace correlation middleware added\n2025-08-23 08:03:59,206 - backend.core.app - INFO - \u2705 Structured logging middleware added\n2025-08-23 08:03:59,206 - backend.core.app - INFO - \u2705 Prometheus metrics middleware added\n2025-08-23 08:03:59,206 - backend.core.app - INFO - \u2705 Payload guard middleware added: max_size=262144 bytes, enforce_json=True, enabled=True\n2025-08-23 08:03:59,206 - backend.middleware.rate_limit - INFO - Rate limiting disabled\n2025-08-23 08:03:59,206 - backend.core.app - INFO - \u2705 Rate limiting middleware added: 100/min, burst=200, enabled=False\n2025-08-23 08:03:59,206 - backend.core.app - INFO - \u2705 Security headers middleware added: [HSTS, CSP(report-only), COOP, COEP], x_frame_options=DENY\n2025-08-23 08:03:59,206 - backend.core.app - INFO - \u2705 Legacy endpoint middleware added for usage telemetry and deprecation controls\n2025-08-23 08:03:59,206 - backend.exceptions.handlers - INFO - \u2705 PayloadRejectionError handler registered\n2025-08-23 08:03:59,206 - backend.exceptions.handlers - INFO - \u2705 All exception handlers registered with structured error taxonomy\n2025-08-23 08:03:59,206 - backend.core.app - INFO - \u2705 Centralized exception handlers registered\n2025-08-23 08:03:59,207 - backend.core.app - INFO - \u2705 PR11 Enhanced WebSocket client route included (/ws/client)\n2025-08-23 08:03:59,211 - backend.core.app - INFO - \u2705 Auth routes also exposed at root (/auth/*) for compatibility\n2025-08-23 08:03:59,211 - backend.core.app - INFO - \u2705 Auth and users routes included (auth with /api prefix)\n2025-08-23 08:03:59,212 - backend.core.app - INFO - \u2705 Diagnostics routes included (/api/v2/diagnostics/health, /api/v2/diagnostics/system)\n2025-08-23 08:03:59,213 - backend.core.app - INFO - \u2705 Meta cache routes included (/api/v2/meta/cache-stats, /api/v2/meta/cache-health)\n2025-08-23 08:03:59,214 - backend.core.app - INFO - \u2705 Legacy meta routes included (/api/v2/meta/legacy-usage, /api/v2/meta/migration-readiness)\n2025-08-23 08:03:59,216 - backend.core.app - ERROR - \u274c Failed to register CSP report routes: Invalid args for response field! Hint: check that <class 'logging.Logger'> is a valid Pydantic field type. If you are using a return type annotation that is not a valid Pydantic field (e.g. Union[Response, dict, None]) you can disable generating the response model from the type annotation with the path operation decorator parameter response_model=None. Read more: https://fastapi.tiangolo.com/tutorial/response-model/\n2025-08-23 08:03:59,216 - backend.core.app - INFO - \u2705 Trace test routes included (/api/trace/* endpoints)\n2025-08-23 08:03:59,218 - backend.core.app - INFO - \u2705 Model inference routes included (/api/v2/models/* endpoints)\n2025-08-23 08:03:59,220 - backend.core.app - INFO - \u2705 Observability events routes included (/api/v2/observability/* endpoints)\n2025-08-23 08:03:59,221 - backend.core.app - INFO - \u2705 Admin control routes included (/api/v2/models/shadow/* and /api/v2/models/admin/* endpoints)\n2025-08-23 08:03:59,223 - backend.core.app - INFO - \u2705 Enhanced WebSocket routes included (/ws/v2/* endpoints)\n2025-08-23 08:03:59,224 - backend.core.app - INFO - \u2705 WebSocket logging routes included (/api/websocket/* endpoints)\n2025-08-23 08:03:59,225 - backend.core.app - INFO - \u2705 Version routes included (/api/version/* endpoints)\n2025-08-23 08:03:59,225 - backend.core.app - INFO - \u2705 WebVitals pipeline routes included (/api/metrics/v1/* endpoints)\n2025-08-23 08:03:59,229 - backend.core.app - INFO - \u2705 Enhanced ML routes included (/api/enhanced-ml/* endpoints)\n2025-08-23 08:03:59,230 - backend.core.app - INFO - \u2705 Fallback enhanced-ml compatibility router mounted at /api/enhanced-ml\n2025-08-23 08:03:59,235 - backend.core.app - INFO - \u2705 Consolidated PrizePicks routes included (/api/v2/prizepicks/* endpoints)\n2025-08-23 08:03:59,238 - backend.core.app - INFO - \u2705 Consolidated ML routes included (/api/v2/ml/* endpoints)\n2025-08-23 08:03:59,240 - backend.core.app - ERROR - \u274c Failed to register consolidated Admin routes: parameter without a default follows parameter with a default (consolidated_admin.py, line 165)\n2025-08-23 08:03:59,243 - backend.core.app - INFO - \u2705 Odds & Line Movement routes included (/v1/odds/* endpoints)\n2025-08-23 08:03:59,245 - backend.core.app - INFO - \u2705 Advanced-Kelly compatibility router mounted at /api/advanced-kelly\n2025-08-23 08:03:59,247 - backend.core.app - ERROR - \u274c Failed to register Risk Management & Personalization routes: 'NoneType' object has no attribute 'alert_evaluation_interval_seconds'\n2025-08-23 08:03:59,249 - backend.core.app - INFO - \u2705 Dependencies Health routes included (/api/dependencies/* endpoints)\n2025-08-23 08:03:59,251 - backend.core.app - INFO - \u2705 Provider Resilience routes included (/api/provider-resilience/* endpoints)\n2025-08-23 08:03:59,252 - backend.core.app - INFO - \u2705 System capabilities routes included (/api/system/* endpoints)\n2025-08-23 08:03:59,253 - backend.core.app - INFO - \u2705 Real-time market streaming routes included (/streaming/* endpoints)\n2025-08-23 08:03:59,254 - backend.core.app - INFO - \u2705 Security HEAD endpoints included (/api/* HEAD endpoints)\n2025-08-23 08:03:59,256 - backend.core.app - INFO - \u2705 ML Model Registry routes included (/api/models/* endpoints)\n2025-08-23 08:03:59,257 - backend.core.app - INFO - \u2705 Data ingestion routes included (/api/v1/ingestion/* endpoints)\n2025-08-23 08:03:59,260 - backend.core.app - INFO - \u2705 Enterprise model registry routes included (/api/models/enterprise/* endpoints)\n2025-08-23 08:03:59,264 - backend.core.app - INFO - \u2705 Alert engine routes included (/api/alert-engine/* endpoints)\n2025-08-23 08:03:59,268 - backend.core.app - INFO - \u2705 PropFinder routes included (/api/propfinder/* endpoints)\n2025-08-23 08:03:59,268 - backend.core.app - WARNING - \u26a0\ufe0f Could not import multiple_sportsbook_routes: cannot import name 'RateLimiter' from 'backend.middleware.rate_limit' (C:\\Users\\bcmad\\Downloads\\A1Betting7-13.2\\backend\\middleware\\rate_limit.py)\n2025-08-23 08:03:59,271 - backend.core.app - INFO - \u2705 Sportsbook compatibility router mounted at /api/sportsbook\n2025-08-23 08:03:59,271 - backend.core.app - INFO - \U0001f50d Bootstrap validation scheduled on startup\n2025-08-23 08:03:59,271 - backend.core.app - INFO - \U0001f3e5 Health endpoints normalized: /api/health, /health, /api/v2/health -> identical envelope format\n2025-08-23 08:03:59,271 - backend.core.app - INFO - \u2705 A1Betting canonical app created successfully
----------------------------- Captured log setup ------------------------------
INFO     backend.core.app:app.py:65 \U0001f680 Creating A1Betting canonical app...\nINFO     backend.core.app:app.py:104 \u2705 Request ID correlation middleware added\nINFO     backend.core.app:app.py:114 \u2705 Distributed trace correlation middleware added\nINFO     backend.core.app:app.py:126 \u2705 Structured logging middleware added\nINFO     backend.core.app:app.py:146 \u2705 Prometheus metrics middleware added\nINFO     backend.core.app:app.py:167 \u2705 Payload guard middleware added: max_size=262144 bytes, enforce_json=True, enabled=True\nINFO     backend.middleware.rate_limit:rate_limit.py:90 Rate limiting disabled\nINFO     backend.core.app:app.py:202 \u2705 Rate limiting middleware added: 100/min, burst=200, enabled=False\nINFO     backend.core.app:app.py:244 \u2705 Security headers middleware added: [HSTS, CSP(report-only), COOP, COEP], x_frame_options=DENY\nINFO     backend.core.app:app.py:259 \u2705 Legacy endpoint middleware added for usage telemetry and deprecation controls\nINFO     backend.exceptions.handlers:handlers.py:235 \u2705 PayloadRejectionError handler registered\nINFO     backend.exceptions.handlers:handlers.py:250 \u2705 All exception handlers registered with structured error taxonomy\nINFO     backend.core.app:app.py:269 \u2705 Centralized exception handlers registered\nINFO     backend.core.app:app.py:332 \u2705 PR11 Enhanced WebSocket client route included (/ws/client)\nINFO     backend.core.app:app.py:702 \u2705 Auth routes also exposed at root (/auth/*) for compatibility\nINFO     backend.core.app:app.py:706 \u2705 Auth and users routes included (auth with /api prefix)\nINFO     backend.core.app:app.py:714 \u2705 Diagnostics routes included (/api/v2/diagnostics/health, /api/v2/diagnostics/system)\nINFO     backend.core.app:app.py:763 \u2705 Meta cache routes included (/api/v2/meta/cache-stats, /api/v2/meta/cache-health)\nINFO     backend.core.app:app.py:773 \u2705 Legacy meta routes included (/api/v2/meta/legacy-usage, /api/v2/meta/migration-readiness)\nERROR    backend.core.app:app.py:788 \u274c Failed to register CSP report routes: Invalid args for response field! Hint: check that <class 'logging.Logger'> is a valid Pydantic field type. If you are using a return type annotation that is not a valid Pydantic field (e.g. Union[Response, dict, None]) you can disable generating the response model from the type annotation with the path operation decorator parameter response_model=None. Read more: https://fastapi.tiangolo.com/tutorial/response-model/\nINFO     backend.core.app:app.py:794 \u2705 Trace test routes included (/api/trace/* endpoints)\nINFO     backend.core.app:app.py:804 \u2705 Model inference routes included (/api/v2/models/* endpoints)\nINFO     backend.core.app:app.py:814 \u2705 Observability events routes included (/api/v2/observability/* endpoints)\nINFO     backend.core.app:app.py:824 \u2705 Admin control routes included (/api/v2/models/shadow/* and /api/v2/models/admin/* endpoints)\nINFO     backend.core.app:app.py:834 \u2705 Enhanced WebSocket routes included (/ws/v2/* endpoints)\nINFO     backend.core.app:app.py:844 \u2705 WebSocket logging routes included (/api/websocket/* endpoints)\nINFO     backend.core.app:app.py:854 \u2705 Version routes included (/api/version/* endpoints)\nINFO     backend.core.app:app.py:864 \u2705 WebVitals pipeline routes included (/api/metrics/v1/* endpoints)\nINFO     backend.core.app:app.py:874 \u2705 Enhanced ML routes included (/api/enhanced-ml/* endpoints)\nINFO     backend.core.app:app.py:986 \u2705 Fallback enhanced-ml compatibility router mounted at /api/enhanced-ml\nINFO     backend.core.app:app.py:995 \u2705 Consolidated PrizePicks routes included (/api/v2/prizepicks/* endpoints)\nINFO     backend.core.app:app.py:1005 \u2705 Consolidated ML routes included (/api/v2/ml/* endpoints)\nERROR    backend.core.app:app.py:1019 \u274c Failed to register consolidated Admin routes: parameter without a default follows parameter with a default (consolidated_admin.py, line 165)\nINFO     backend.core.app:app.py:1025 \u2705 Odds & Line Movement routes included (/v1/odds/* endpoints)\nINFO     backend.core.app:app.py:1066 \u2705 Advanced-Kelly compatibility router mounted at /api/advanced-kelly\nERROR    backend.core.app:app.py:1078 \u274c Failed to register Risk Management & Personalization routes: 'NoneType' object has no attribute 'alert_evaluation_interval_seconds'\nINFO     backend.core.app:app.py:1084 \u2705 Dependencies Health routes included (/api/dependencies/* endpoints)\nINFO     backend.core.app:app.py:1094 \u2705 Provider Resilience routes included (/api/provider-resilience/* endpoints)\nINFO     backend.core.app:app.py:1104 \u2705 System capabilities routes included (/api/system/* endpoints)\nINFO     backend.core.app:app.py:1114 \u2705 Real-time market streaming routes included (/streaming/* endpoints)\nINFO     backend.core.app:app.py:1124 \u2705 Security HEAD endpoints included (/api/* HEAD endpoints)\nINFO     backend.core.app:app.py:1134 \u2705 ML Model Registry routes included (/api/models/* endpoints)\nINFO     backend.core.app:app.py:1144 \u2705 Data ingestion routes included (/api/v1/ingestion/* endpoints)\nINFO     backend.core.app:app.py:1154 \u2705 Enterprise model registry routes included (/api/models/enterprise/* endpoints)\nINFO     backend.core.app:app.py:1199 \u2705 Alert engine routes included (/api/alert-engine/* endpoints)\nINFO     backend.core.app:app.py:1209 \u2705 PropFinder routes included (/api/propfinder/* endpoints)\nWARNING  backend.core.app:app.py:1221 \u26a0\ufe0f Could not import multiple_sportsbook_routes: cannot import name 'RateLimiter' from 'backend.middleware.rate_limit' (C:\\Users\\bcmad\\Downloads\\A1Betting7-13.2\\backend\\middleware\\rate_limit.py)\nINFO     backend.core.app:app.py:1495 \u2705 Sportsbook compatibility router mounted at /api/sportsbook\nINFO     backend.core.app:app.py:1527 \U0001f50d Bootstrap validation scheduled on startup\nINFO     backend.core.app:app.py:1535 \U0001f3e5 Health endpoints normalized: /api/health, /health, /api/v2/health -> identical envelope format\nINFO     backend.core.app:app.py:1536 \u2705 A1Betting canonical app created successfully
---------------------------- Captured stderr call -----------------------------
2025-08-23 08:03:59,274 - backend.middleware.rate_limit - INFO - Rate limiting disabled\n2025-08-23 08:03:59,274 - backend.middleware.security_headers - INFO - \u2705 Security headers middleware enabled: CSP=report-only, HSTS=True, strict_mode=False\n2025-08-23 08:03:59,274 - backend.middleware.legacy_middleware - INFO - Registered known legacy endpoints with forwarding paths\n2025-08-23 08:03:59,274 - backend.middleware.legacy_middleware - INFO - Legacy middleware initialized\n2025-08-23 08:03:59,274 - backend.services.legacy_registry - INFO - Registered legacy endpoint: /api/sportsbook/search -> None\n2025-08-23 08:03:59,275 - backend.middleware.legacy_middleware - INFO - Legacy endpoint accessed: GET /api/sportsbook/search (count: 1)\n{"timestamp": "2025-08-23T13:03:59.277332", "level": "INFO", "logger": "a1betting", "message": "Request started", "module": "structured_logging_middleware", "function": "log_request_start", "line": 109, "request_id": "e2943c57-e8ac-47cc-a98d-b7e3540ea473", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro", "event_type": "request_start", "method": "GET", "url": "http://testserver/api/sportsbook/search?player_name=Aaron%20Judge&sport=mlb&bet_type=home_runs", "path": "/api/sportsbook/search", "query_params": {"player_name": "Aaron Judge", "sport": "mlb", "bet_type": "home_runs"}, "client_ip": "127.0.0.1", "user_agent": "python-httpx/0.28.1", "content_type": null}\n2025-08-23 08:03:59,277 - backend.middleware.request_id_middleware - INFO - Request started: GET /api/sportsbook/search\n2025-08-23 08:03:59,278 - backend.middleware.request_id_middleware - INFO - Request completed: GET /api/sportsbook/search - 200\n2025-08-23 08:03:59,278 - backend.middleware.distributed_trace_middleware - INFO - Trace completed: e0eed1d3-2106-42f0-9071-1f6975f39e15\n{"timestamp": "2025-08-23T13:03:59.278203", "level": "INFO", "logger": "a1betting", "message": "Request completed", "module": "structured_logging_middleware", "function": "log_request_success", "line": 124, "request_id": "e2943c57-e8ac-47cc-a98d-b7e3540ea473", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro", "event_type": "request_success", "method": "GET", "url": "http://testserver/api/sportsbook/search?player_name=Aaron%20Judge&sport=mlb&bet_type=home_runs", "path": "/api/sportsbook/search", "status_code": 200, "duration_ms": 0.91, "response_size": "39", "performance_category": "fast"}
------------------------------ Captured log call ------------------------------
INFO     backend.middleware.rate_limit:rate_limit.py:90 Rate limiting disabled\nINFO     backend.middleware.security_headers:security_headers.py:71 \u2705 Security headers middleware enabled: CSP=report-only, HSTS=True, strict_mode=False\nINFO     backend.middleware.legacy_middleware:legacy_middleware.py:68 Registered known legacy endpoints with forwarding paths\nINFO     backend.middleware.legacy_middleware:legacy_middleware.py:44 Legacy middleware initialized\nINFO     backend.services.legacy_registry:legacy_registry.py:102 Registered legacy endpoint: /api/sportsbook/search -> None\nINFO     backend.middleware.legacy_middleware:legacy_middleware.py:177 Legacy endpoint accessed: GET /api/sportsbook/search (count: 1)\nINFO     backend.middleware.request_id_middleware:request_id_middleware.py:67 Request started: GET /api/sportsbook/search\nINFO     backend.middleware.request_id_middleware:request_id_middleware.py:92 Request completed: GET /api/sportsbook/search - 200\nINFO     backend.middleware.distributed_trace_middleware:distributed_trace_middleware.py:224 Trace completed: e0eed1d3-2106-42f0-9071-1f6975f39e15
____ TestMultipleSportsbookRoutes.test_search_player_props_missing_params _____
tests\backend\routes\test_multiple_sportsbook_routes.py:434: in test_search_player_props_missing_params
    assert response.status_code == status.HTTP_422_UNPROCESSABLE_ENTITY
E   assert 200 == 422
E    +  where 200 = <Response [200 OK]>.status_code
E    +  and   422 = status.HTTP_422_UNPROCESSABLE_ENTITY
---------------------------- Captured stderr setup ----------------------------
2025-08-23 08:03:59,285 - backend.core.app - INFO - \U0001f680 Creating A1Betting canonical app...\n2025-08-23 08:03:59,285 - backend.core.app - INFO - \u2705 Request ID correlation middleware added\n2025-08-23 08:03:59,285 - backend.core.app - INFO - \u2705 Distributed trace correlation middleware added\n2025-08-23 08:03:59,285 - backend.core.app - INFO - \u2705 Structured logging middleware added\n2025-08-23 08:03:59,286 - backend.core.app - INFO - \u2705 Prometheus metrics middleware added\n2025-08-23 08:03:59,286 - backend.core.app - INFO - \u2705 Payload guard middleware added: max_size=262144 bytes, enforce_json=True, enabled=True\n2025-08-23 08:03:59,286 - backend.middleware.rate_limit - INFO - Rate limiting disabled\n2025-08-23 08:03:59,286 - backend.core.app - INFO - \u2705 Rate limiting middleware added: 100/min, burst=200, enabled=False\n2025-08-23 08:03:59,286 - backend.core.app - INFO - \u2705 Security headers middleware added: [HSTS, CSP(report-only), COOP, COEP], x_frame_options=DENY\n2025-08-23 08:03:59,286 - backend.core.app - INFO - \u2705 Legacy endpoint middleware added for usage telemetry and deprecation controls\n2025-08-23 08:03:59,286 - backend.exceptions.handlers - INFO - \u2705 PayloadRejectionError handler registered\n2025-08-23 08:03:59,286 - backend.exceptions.handlers - INFO - \u2705 All exception handlers registered with structured error taxonomy\n2025-08-23 08:03:59,286 - backend.core.app - INFO - \u2705 Centralized exception handlers registered\n2025-08-23 08:03:59,287 - backend.core.app - INFO - \u2705 PR11 Enhanced WebSocket client route included (/ws/client)\n2025-08-23 08:03:59,292 - backend.core.app - INFO - \u2705 Auth routes also exposed at root (/auth/*) for compatibility\n2025-08-23 08:03:59,292 - backend.core.app - INFO - \u2705 Auth and users routes included (auth with /api prefix)\n2025-08-23 08:03:59,293 - backend.core.app - INFO - \u2705 Diagnostics routes included (/api/v2/diagnostics/health, /api/v2/diagnostics/system)\n2025-08-23 08:03:59,294 - backend.core.app - INFO - \u2705 Meta cache routes included (/api/v2/meta/cache-stats, /api/v2/meta/cache-health)\n2025-08-23 08:03:59,294 - backend.core.app - INFO - \u2705 Legacy meta routes included (/api/v2/meta/legacy-usage, /api/v2/meta/migration-readiness)\n2025-08-23 08:03:59,297 - backend.core.app - ERROR - \u274c Failed to register CSP report routes: Invalid args for response field! Hint: check that <class 'logging.Logger'> is a valid Pydantic field type. If you are using a return type annotation that is not a valid Pydantic field (e.g. Union[Response, dict, None]) you can disable generating the response model from the type annotation with the path operation decorator parameter response_model=None. Read more: https://fastapi.tiangolo.com/tutorial/response-model/\n2025-08-23 08:03:59,297 - backend.core.app - INFO - \u2705 Trace test routes included (/api/trace/* endpoints)\n2025-08-23 08:03:59,299 - backend.core.app - INFO - \u2705 Model inference routes included (/api/v2/models/* endpoints)\n2025-08-23 08:03:59,300 - backend.core.app - INFO - \u2705 Observability events routes included (/api/v2/observability/* endpoints)\n2025-08-23 08:03:59,301 - backend.core.app - INFO - \u2705 Admin control routes included (/api/v2/models/shadow/* and /api/v2/models/admin/* endpoints)\n2025-08-23 08:03:59,303 - backend.core.app - INFO - \u2705 Enhanced WebSocket routes included (/ws/v2/* endpoints)\n2025-08-23 08:03:59,304 - backend.core.app - INFO - \u2705 WebSocket logging routes included (/api/websocket/* endpoints)\n2025-08-23 08:03:59,305 - backend.core.app - INFO - \u2705 Version routes included (/api/version/* endpoints)\n2025-08-23 08:03:59,305 - backend.core.app - INFO - \u2705 WebVitals pipeline routes included (/api/metrics/v1/* endpoints)\n2025-08-23 08:03:59,309 - backend.core.app - INFO - \u2705 Enhanced ML routes included (/api/enhanced-ml/* endpoints)\n2025-08-23 08:03:59,310 - backend.core.app - INFO - \u2705 Fallback enhanced-ml compatibility router mounted at /api/enhanced-ml\n2025-08-23 08:03:59,315 - backend.core.app - INFO - \u2705 Consolidated PrizePicks routes included (/api/v2/prizepicks/* endpoints)\n2025-08-23 08:03:59,318 - backend.core.app - INFO - \u2705 Consolidated ML routes included (/api/v2/ml/* endpoints)\n2025-08-23 08:03:59,320 - backend.core.app - ERROR - \u274c Failed to register consolidated Admin routes: parameter without a default follows parameter with a default (consolidated_admin.py, line 165)\n2025-08-23 08:03:59,323 - backend.core.app - INFO - \u2705 Odds & Line Movement routes included (/v1/odds/* endpoints)\n2025-08-23 08:03:59,325 - backend.core.app - INFO - \u2705 Advanced-Kelly compatibility router mounted at /api/advanced-kelly\n2025-08-23 08:03:59,327 - backend.core.app - ERROR - \u274c Failed to register Risk Management & Personalization routes: 'NoneType' object has no attribute 'alert_evaluation_interval_seconds'\n2025-08-23 08:03:59,328 - backend.core.app - INFO - \u2705 Dependencies Health routes included (/api/dependencies/* endpoints)\n2025-08-23 08:03:59,331 - backend.core.app - INFO - \u2705 Provider Resilience routes included (/api/provider-resilience/* endpoints)\n2025-08-23 08:03:59,332 - backend.core.app - INFO - \u2705 System capabilities routes included (/api/system/* endpoints)\n2025-08-23 08:03:59,333 - backend.core.app - INFO - \u2705 Real-time market streaming routes included (/streaming/* endpoints)\n2025-08-23 08:03:59,334 - backend.core.app - INFO - \u2705 Security HEAD endpoints included (/api/* HEAD endpoints)\n2025-08-23 08:03:59,336 - backend.core.app - INFO - \u2705 ML Model Registry routes included (/api/models/* endpoints)\n2025-08-23 08:03:59,337 - backend.core.app - INFO - \u2705 Data ingestion routes included (/api/v1/ingestion/* endpoints)\n2025-08-23 08:03:59,340 - backend.core.app - INFO - \u2705 Enterprise model registry routes included (/api/models/enterprise/* endpoints)\n2025-08-23 08:03:59,344 - backend.core.app - INFO - \u2705 Alert engine routes included (/api/alert-engine/* endpoints)\n2025-08-23 08:03:59,348 - backend.core.app - INFO - \u2705 PropFinder routes included (/api/propfinder/* endpoints)\n2025-08-23 08:03:59,349 - backend.core.app - WARNING - \u26a0\ufe0f Could not import multiple_sportsbook_routes: cannot import name 'RateLimiter' from 'backend.middleware.rate_limit' (C:\\Users\\bcmad\\Downloads\\A1Betting7-13.2\\backend\\middleware\\rate_limit.py)\n2025-08-23 08:03:59,352 - backend.core.app - INFO - \u2705 Sportsbook compatibility router mounted at /api/sportsbook\n2025-08-23 08:03:59,352 - backend.core.app - INFO - \U0001f50d Bootstrap validation scheduled on startup\n2025-08-23 08:03:59,352 - backend.core.app - INFO - \U0001f3e5 Health endpoints normalized: /api/health, /health, /api/v2/health -> identical envelope format\n2025-08-23 08:03:59,352 - backend.core.app - INFO - \u2705 A1Betting canonical app created successfully
----------------------------- Captured log setup ------------------------------
INFO     backend.core.app:app.py:65 \U0001f680 Creating A1Betting canonical app...\nINFO     backend.core.app:app.py:104 \u2705 Request ID correlation middleware added\nINFO     backend.core.app:app.py:114 \u2705 Distributed trace correlation middleware added\nINFO     backend.core.app:app.py:126 \u2705 Structured logging middleware added\nINFO     backend.core.app:app.py:146 \u2705 Prometheus metrics middleware added\nINFO     backend.core.app:app.py:167 \u2705 Payload guard middleware added: max_size=262144 bytes, enforce_json=True, enabled=True\nINFO     backend.middleware.rate_limit:rate_limit.py:90 Rate limiting disabled\nINFO     backend.core.app:app.py:202 \u2705 Rate limiting middleware added: 100/min, burst=200, enabled=False\nINFO     backend.core.app:app.py:244 \u2705 Security headers middleware added: [HSTS, CSP(report-only), COOP, COEP], x_frame_options=DENY\nINFO     backend.core.app:app.py:259 \u2705 Legacy endpoint middleware added for usage telemetry and deprecation controls\nINFO     backend.exceptions.handlers:handlers.py:235 \u2705 PayloadRejectionError handler registered\nINFO     backend.exceptions.handlers:handlers.py:250 \u2705 All exception handlers registered with structured error taxonomy\nINFO     backend.core.app:app.py:269 \u2705 Centralized exception handlers registered\nINFO     backend.core.app:app.py:332 \u2705 PR11 Enhanced WebSocket client route included (/ws/client)\nINFO     backend.core.app:app.py:702 \u2705 Auth routes also exposed at root (/auth/*) for compatibility\nINFO     backend.core.app:app.py:706 \u2705 Auth and users routes included (auth with /api prefix)\nINFO     backend.core.app:app.py:714 \u2705 Diagnostics routes included (/api/v2/diagnostics/health, /api/v2/diagnostics/system)\nINFO     backend.core.app:app.py:763 \u2705 Meta cache routes included (/api/v2/meta/cache-stats, /api/v2/meta/cache-health)\nINFO     backend.core.app:app.py:773 \u2705 Legacy meta routes included (/api/v2/meta/legacy-usage, /api/v2/meta/migration-readiness)\nERROR    backend.core.app:app.py:788 \u274c Failed to register CSP report routes: Invalid args for response field! Hint: check that <class 'logging.Logger'> is a valid Pydantic field type. If you are using a return type annotation that is not a valid Pydantic field (e.g. Union[Response, dict, None]) you can disable generating the response model from the type annotation with the path operation decorator parameter response_model=None. Read more: https://fastapi.tiangolo.com/tutorial/response-model/\nINFO     backend.core.app:app.py:794 \u2705 Trace test routes included (/api/trace/* endpoints)\nINFO     backend.core.app:app.py:804 \u2705 Model inference routes included (/api/v2/models/* endpoints)\nINFO     backend.core.app:app.py:814 \u2705 Observability events routes included (/api/v2/observability/* endpoints)\nINFO     backend.core.app:app.py:824 \u2705 Admin control routes included (/api/v2/models/shadow/* and /api/v2/models/admin/* endpoints)\nINFO     backend.core.app:app.py:834 \u2705 Enhanced WebSocket routes included (/ws/v2/* endpoints)\nINFO     backend.core.app:app.py:844 \u2705 WebSocket logging routes included (/api/websocket/* endpoints)\nINFO     backend.core.app:app.py:854 \u2705 Version routes included (/api/version/* endpoints)\nINFO     backend.core.app:app.py:864 \u2705 WebVitals pipeline routes included (/api/metrics/v1/* endpoints)\nINFO     backend.core.app:app.py:874 \u2705 Enhanced ML routes included (/api/enhanced-ml/* endpoints)\nINFO     backend.core.app:app.py:986 \u2705 Fallback enhanced-ml compatibility router mounted at /api/enhanced-ml\nINFO     backend.core.app:app.py:995 \u2705 Consolidated PrizePicks routes included (/api/v2/prizepicks/* endpoints)\nINFO     backend.core.app:app.py:1005 \u2705 Consolidated ML routes included (/api/v2/ml/* endpoints)\nERROR    backend.core.app:app.py:1019 \u274c Failed to register consolidated Admin routes: parameter without a default follows parameter with a default (consolidated_admin.py, line 165)\nINFO     backend.core.app:app.py:1025 \u2705 Odds & Line Movement routes included (/v1/odds/* endpoints)\nINFO     backend.core.app:app.py:1066 \u2705 Advanced-Kelly compatibility router mounted at /api/advanced-kelly\nERROR    backend.core.app:app.py:1078 \u274c Failed to register Risk Management & Personalization routes: 'NoneType' object has no attribute 'alert_evaluation_interval_seconds'\nINFO     backend.core.app:app.py:1084 \u2705 Dependencies Health routes included (/api/dependencies/* endpoints)\nINFO     backend.core.app:app.py:1094 \u2705 Provider Resilience routes included (/api/provider-resilience/* endpoints)\nINFO     backend.core.app:app.py:1104 \u2705 System capabilities routes included (/api/system/* endpoints)\nINFO     backend.core.app:app.py:1114 \u2705 Real-time market streaming routes included (/streaming/* endpoints)\nINFO     backend.core.app:app.py:1124 \u2705 Security HEAD endpoints included (/api/* HEAD endpoints)\nINFO     backend.core.app:app.py:1134 \u2705 ML Model Registry routes included (/api/models/* endpoints)\nINFO     backend.core.app:app.py:1144 \u2705 Data ingestion routes included (/api/v1/ingestion/* endpoints)\nINFO     backend.core.app:app.py:1154 \u2705 Enterprise model registry routes included (/api/models/enterprise/* endpoints)\nINFO     backend.core.app:app.py:1199 \u2705 Alert engine routes included (/api/alert-engine/* endpoints)\nINFO     backend.core.app:app.py:1209 \u2705 PropFinder routes included (/api/propfinder/* endpoints)\nWARNING  backend.core.app:app.py:1221 \u26a0\ufe0f Could not import multiple_sportsbook_routes: cannot import name 'RateLimiter' from 'backend.middleware.rate_limit' (C:\\Users\\bcmad\\Downloads\\A1Betting7-13.2\\backend\\middleware\\rate_limit.py)\nINFO     backend.core.app:app.py:1495 \u2705 Sportsbook compatibility router mounted at /api/sportsbook\nINFO     backend.core.app:app.py:1527 \U0001f50d Bootstrap validation scheduled on startup\nINFO     backend.core.app:app.py:1535 \U0001f3e5 Health endpoints normalized: /api/health, /health, /api/v2/health -> identical envelope format\nINFO     backend.core.app:app.py:1536 \u2705 A1Betting canonical app created successfully
---------------------------- Captured stderr call -----------------------------
2025-08-23 08:03:59,353 - backend.middleware.rate_limit - INFO - Rate limiting disabled\n2025-08-23 08:03:59,354 - backend.middleware.security_headers - INFO - \u2705 Security headers middleware enabled: CSP=report-only, HSTS=True, strict_mode=False\n2025-08-23 08:03:59,354 - backend.middleware.legacy_middleware - INFO - Registered known legacy endpoints with forwarding paths\n2025-08-23 08:03:59,354 - backend.middleware.legacy_middleware - INFO - Legacy middleware initialized\n2025-08-23 08:03:59,354 - backend.middleware.legacy_middleware - INFO - Legacy endpoint accessed: GET /api/sportsbook/search (count: 2)\n{"timestamp": "2025-08-23T13:03:59.354511", "level": "INFO", "logger": "a1betting", "message": "Request started", "module": "structured_logging_middleware", "function": "log_request_start", "line": 109, "request_id": "e93e4a44-c9f4-4dea-a446-853a9c3e7163", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro", "event_type": "request_start", "method": "GET", "url": "http://testserver/api/sportsbook/search", "path": "/api/sportsbook/search", "query_params": {}, "client_ip": "127.0.0.1", "user_agent": "python-httpx/0.28.1", "content_type": null}\n2025-08-23 08:03:59,355 - backend.middleware.request_id_middleware - INFO - Request started: GET /api/sportsbook/search\n2025-08-23 08:03:59,355 - backend.middleware.request_id_middleware - INFO - Request completed: GET /api/sportsbook/search - 200\n2025-08-23 08:03:59,355 - backend.middleware.distributed_trace_middleware - INFO - Trace completed: 40c20b5c-518c-4d56-a2ae-5d7900f0f394\n{"timestamp": "2025-08-23T13:03:59.355527", "level": "INFO", "logger": "a1betting", "message": "Request completed", "module": "structured_logging_middleware", "function": "log_request_success", "line": 124, "request_id": "e93e4a44-c9f4-4dea-a446-853a9c3e7163", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro", "event_type": "request_success", "method": "GET", "url": "http://testserver/api/sportsbook/search", "path": "/api/sportsbook/search", "status_code": 200, "duration_ms": 1.03, "response_size": "39", "performance_category": "fast"}
------------------------------ Captured log call ------------------------------
INFO     backend.middleware.rate_limit:rate_limit.py:90 Rate limiting disabled\nINFO     backend.middleware.security_headers:security_headers.py:71 \u2705 Security headers middleware enabled: CSP=report-only, HSTS=True, strict_mode=False\nINFO     backend.middleware.legacy_middleware:legacy_middleware.py:68 Registered known legacy endpoints with forwarding paths\nINFO     backend.middleware.legacy_middleware:legacy_middleware.py:44 Legacy middleware initialized\nINFO     backend.middleware.legacy_middleware:legacy_middleware.py:177 Legacy endpoint accessed: GET /api/sportsbook/search (count: 2)\nINFO     backend.middleware.request_id_middleware:request_id_middleware.py:67 Request started: GET /api/sportsbook/search\nINFO     backend.middleware.request_id_middleware:request_id_middleware.py:92 Request completed: GET /api/sportsbook/search - 200\nINFO     backend.middleware.distributed_trace_middleware:distributed_trace_middleware.py:224 Trace completed: 40c20b5c-518c-4d56-a2ae-5d7900f0f394
___________ TestMultipleSportsbookRoutes.test_websocket_connection ____________
tests\backend\routes\test_multiple_sportsbook_routes.py:446: in test_websocket_connection
    with sync_client.websocket_connect("/api/sportsbook/ws") as websocket:
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
..\..\AppData\Roaming\Python\Python313\site-packages\starlette\testclient.py:121: in __enter__
    self._raise_on_close(message)
..\..\AppData\Roaming\Python\Python313\site-packages\starlette\testclient.py:150: in _raise_on_close
    raise WebSocketDisconnect(code=message.get("code", 1000), reason=message.get("reason", ""))
E   starlette.websockets.WebSocketDisconnect
---------------------------- Captured stderr setup ----------------------------
2025-08-23 08:03:59,364 - backend.core.app - INFO - \U0001f680 Creating A1Betting canonical app...\n2025-08-23 08:03:59,364 - backend.core.app - INFO - \u2705 Request ID correlation middleware added\n2025-08-23 08:03:59,364 - backend.core.app - INFO - \u2705 Distributed trace correlation middleware added\n2025-08-23 08:03:59,364 - backend.core.app - INFO - \u2705 Structured logging middleware added\n2025-08-23 08:03:59,364 - backend.core.app - INFO - \u2705 Prometheus metrics middleware added\n2025-08-23 08:03:59,364 - backend.core.app - INFO - \u2705 Payload guard middleware added: max_size=262144 bytes, enforce_json=True, enabled=True\n2025-08-23 08:03:59,364 - backend.middleware.rate_limit - INFO - Rate limiting disabled\n2025-08-23 08:03:59,364 - backend.core.app - INFO - \u2705 Rate limiting middleware added: 100/min, burst=200, enabled=False\n2025-08-23 08:03:59,364 - backend.core.app - INFO - \u2705 Security headers middleware added: [HSTS, CSP(report-only), COOP, COEP], x_frame_options=DENY\n2025-08-23 08:03:59,364 - backend.core.app - INFO - \u2705 Legacy endpoint middleware added for usage telemetry and deprecation controls\n2025-08-23 08:03:59,365 - backend.exceptions.handlers - INFO - \u2705 PayloadRejectionError handler registered\n2025-08-23 08:03:59,365 - backend.exceptions.handlers - INFO - \u2705 All exception handlers registered with structured error taxonomy\n2025-08-23 08:03:59,365 - backend.core.app - INFO - \u2705 Centralized exception handlers registered\n2025-08-23 08:03:59,366 - backend.core.app - INFO - \u2705 PR11 Enhanced WebSocket client route included (/ws/client)\n2025-08-23 08:03:59,370 - backend.core.app - INFO - \u2705 Auth routes also exposed at root (/auth/*) for compatibility\n2025-08-23 08:03:59,370 - backend.core.app - INFO - \u2705 Auth and users routes included (auth with /api prefix)\n2025-08-23 08:03:59,371 - backend.core.app - INFO - \u2705 Diagnostics routes included (/api/v2/diagnostics/health, /api/v2/diagnostics/system)\n2025-08-23 08:03:59,372 - backend.core.app - INFO - \u2705 Meta cache routes included (/api/v2/meta/cache-stats, /api/v2/meta/cache-health)\n2025-08-23 08:03:59,373 - backend.core.app - INFO - \u2705 Legacy meta routes included (/api/v2/meta/legacy-usage, /api/v2/meta/migration-readiness)\n2025-08-23 08:03:59,375 - backend.core.app - ERROR - \u274c Failed to register CSP report routes: Invalid args for response field! Hint: check that <class 'logging.Logger'> is a valid Pydantic field type. If you are using a return type annotation that is not a valid Pydantic field (e.g. Union[Response, dict, None]) you can disable generating the response model from the type annotation with the path operation decorator parameter response_model=None. Read more: https://fastapi.tiangolo.com/tutorial/response-model/\n2025-08-23 08:03:59,375 - backend.core.app - INFO - \u2705 Trace test routes included (/api/trace/* endpoints)\n2025-08-23 08:03:59,377 - backend.core.app - INFO - \u2705 Model inference routes included (/api/v2/models/* endpoints)\n2025-08-23 08:03:59,378 - backend.core.app - INFO - \u2705 Observability events routes included (/api/v2/observability/* endpoints)\n2025-08-23 08:03:59,380 - backend.core.app - INFO - \u2705 Admin control routes included (/api/v2/models/shadow/* and /api/v2/models/admin/* endpoints)\n2025-08-23 08:03:59,382 - backend.core.app - INFO - \u2705 Enhanced WebSocket routes included (/ws/v2/* endpoints)\n2025-08-23 08:03:59,383 - backend.core.app - INFO - \u2705 WebSocket logging routes included (/api/websocket/* endpoints)\n2025-08-23 08:03:59,384 - backend.core.app - INFO - \u2705 Version routes included (/api/version/* endpoints)\n2025-08-23 08:03:59,384 - backend.core.app - INFO - \u2705 WebVitals pipeline routes included (/api/metrics/v1/* endpoints)\n2025-08-23 08:03:59,389 - backend.core.app - INFO - \u2705 Enhanced ML routes included (/api/enhanced-ml/* endpoints)\n2025-08-23 08:03:59,389 - backend.core.app - INFO - \u2705 Fallback enhanced-ml compatibility router mounted at /api/enhanced-ml\n2025-08-23 08:03:59,394 - backend.core.app - INFO - \u2705 Consolidated PrizePicks routes included (/api/v2/prizepicks/* endpoints)\n2025-08-23 08:03:59,397 - backend.core.app - INFO - \u2705 Consolidated ML routes included (/api/v2/ml/* endpoints)\n2025-08-23 08:03:59,399 - backend.core.app - ERROR - \u274c Failed to register consolidated Admin routes: parameter without a default follows parameter with a default (consolidated_admin.py, line 165)\n2025-08-23 08:03:59,402 - backend.core.app - INFO - \u2705 Odds & Line Movement routes included (/v1/odds/* endpoints)\n2025-08-23 08:03:59,404 - backend.core.app - INFO - \u2705 Advanced-Kelly compatibility router mounted at /api/advanced-kelly\n2025-08-23 08:03:59,406 - backend.core.app - ERROR - \u274c Failed to register Risk Management & Personalization routes: 'NoneType' object has no attribute 'alert_evaluation_interval_seconds'\n2025-08-23 08:03:59,408 - backend.core.app - INFO - \u2705 Dependencies Health routes included (/api/dependencies/* endpoints)\n2025-08-23 08:03:59,410 - backend.core.app - INFO - \u2705 Provider Resilience routes included (/api/provider-resilience/* endpoints)\n2025-08-23 08:03:59,411 - backend.core.app - INFO - \u2705 System capabilities routes included (/api/system/* endpoints)\n2025-08-23 08:03:59,412 - backend.core.app - INFO - \u2705 Real-time market streaming routes included (/streaming/* endpoints)\n2025-08-23 08:03:59,413 - backend.core.app - INFO - \u2705 Security HEAD endpoints included (/api/* HEAD endpoints)\n2025-08-23 08:03:59,415 - backend.core.app - INFO - \u2705 ML Model Registry routes included (/api/models/* endpoints)\n2025-08-23 08:03:59,416 - backend.core.app - INFO - \u2705 Data ingestion routes included (/api/v1/ingestion/* endpoints)\n2025-08-23 08:03:59,420 - backend.core.app - INFO - \u2705 Enterprise model registry routes included (/api/models/enterprise/* endpoints)\n2025-08-23 08:03:59,424 - backend.core.app - INFO - \u2705 Alert engine routes included (/api/alert-engine/* endpoints)\n2025-08-23 08:03:59,428 - backend.core.app - INFO - \u2705 PropFinder routes included (/api/propfinder/* endpoints)\n2025-08-23 08:03:59,428 - backend.core.app - WARNING - \u26a0\ufe0f Could not import multiple_sportsbook_routes: cannot import name 'RateLimiter' from 'backend.middleware.rate_limit' (C:\\Users\\bcmad\\Downloads\\A1Betting7-13.2\\backend\\middleware\\rate_limit.py)\n2025-08-23 08:03:59,431 - backend.core.app - INFO - \u2705 Sportsbook compatibility router mounted at /api/sportsbook\n2025-08-23 08:03:59,431 - backend.core.app - INFO - \U0001f50d Bootstrap validation scheduled on startup\n2025-08-23 08:03:59,431 - backend.core.app - INFO - \U0001f3e5 Health endpoints normalized: /api/health, /health, /api/v2/health -> identical envelope format\n2025-08-23 08:03:59,431 - backend.core.app - INFO - \u2705 A1Betting canonical app created successfully
----------------------------- Captured log setup ------------------------------
INFO     backend.core.app:app.py:65 \U0001f680 Creating A1Betting canonical app...\nINFO     backend.core.app:app.py:104 \u2705 Request ID correlation middleware added\nINFO     backend.core.app:app.py:114 \u2705 Distributed trace correlation middleware added\nINFO     backend.core.app:app.py:126 \u2705 Structured logging middleware added\nINFO     backend.core.app:app.py:146 \u2705 Prometheus metrics middleware added\nINFO     backend.core.app:app.py:167 \u2705 Payload guard middleware added: max_size=262144 bytes, enforce_json=True, enabled=True\nINFO     backend.middleware.rate_limit:rate_limit.py:90 Rate limiting disabled\nINFO     backend.core.app:app.py:202 \u2705 Rate limiting middleware added: 100/min, burst=200, enabled=False\nINFO     backend.core.app:app.py:244 \u2705 Security headers middleware added: [HSTS, CSP(report-only), COOP, COEP], x_frame_options=DENY\nINFO     backend.core.app:app.py:259 \u2705 Legacy endpoint middleware added for usage telemetry and deprecation controls\nINFO     backend.exceptions.handlers:handlers.py:235 \u2705 PayloadRejectionError handler registered\nINFO     backend.exceptions.handlers:handlers.py:250 \u2705 All exception handlers registered with structured error taxonomy\nINFO     backend.core.app:app.py:269 \u2705 Centralized exception handlers registered\nINFO     backend.core.app:app.py:332 \u2705 PR11 Enhanced WebSocket client route included (/ws/client)\nINFO     backend.core.app:app.py:702 \u2705 Auth routes also exposed at root (/auth/*) for compatibility\nINFO     backend.core.app:app.py:706 \u2705 Auth and users routes included (auth with /api prefix)\nINFO     backend.core.app:app.py:714 \u2705 Diagnostics routes included (/api/v2/diagnostics/health, /api/v2/diagnostics/system)\nINFO     backend.core.app:app.py:763 \u2705 Meta cache routes included (/api/v2/meta/cache-stats, /api/v2/meta/cache-health)\nINFO     backend.core.app:app.py:773 \u2705 Legacy meta routes included (/api/v2/meta/legacy-usage, /api/v2/meta/migration-readiness)\nERROR    backend.core.app:app.py:788 \u274c Failed to register CSP report routes: Invalid args for response field! Hint: check that <class 'logging.Logger'> is a valid Pydantic field type. If you are using a return type annotation that is not a valid Pydantic field (e.g. Union[Response, dict, None]) you can disable generating the response model from the type annotation with the path operation decorator parameter response_model=None. Read more: https://fastapi.tiangolo.com/tutorial/response-model/\nINFO     backend.core.app:app.py:794 \u2705 Trace test routes included (/api/trace/* endpoints)\nINFO     backend.core.app:app.py:804 \u2705 Model inference routes included (/api/v2/models/* endpoints)\nINFO     backend.core.app:app.py:814 \u2705 Observability events routes included (/api/v2/observability/* endpoints)\nINFO     backend.core.app:app.py:824 \u2705 Admin control routes included (/api/v2/models/shadow/* and /api/v2/models/admin/* endpoints)\nINFO     backend.core.app:app.py:834 \u2705 Enhanced WebSocket routes included (/ws/v2/* endpoints)\nINFO     backend.core.app:app.py:844 \u2705 WebSocket logging routes included (/api/websocket/* endpoints)\nINFO     backend.core.app:app.py:854 \u2705 Version routes included (/api/version/* endpoints)\nINFO     backend.core.app:app.py:864 \u2705 WebVitals pipeline routes included (/api/metrics/v1/* endpoints)\nINFO     backend.core.app:app.py:874 \u2705 Enhanced ML routes included (/api/enhanced-ml/* endpoints)\nINFO     backend.core.app:app.py:986 \u2705 Fallback enhanced-ml compatibility router mounted at /api/enhanced-ml\nINFO     backend.core.app:app.py:995 \u2705 Consolidated PrizePicks routes included (/api/v2/prizepicks/* endpoints)\nINFO     backend.core.app:app.py:1005 \u2705 Consolidated ML routes included (/api/v2/ml/* endpoints)\nERROR    backend.core.app:app.py:1019 \u274c Failed to register consolidated Admin routes: parameter without a default follows parameter with a default (consolidated_admin.py, line 165)\nINFO     backend.core.app:app.py:1025 \u2705 Odds & Line Movement routes included (/v1/odds/* endpoints)\nINFO     backend.core.app:app.py:1066 \u2705 Advanced-Kelly compatibility router mounted at /api/advanced-kelly\nERROR    backend.core.app:app.py:1078 \u274c Failed to register Risk Management & Personalization routes: 'NoneType' object has no attribute 'alert_evaluation_interval_seconds'\nINFO     backend.core.app:app.py:1084 \u2705 Dependencies Health routes included (/api/dependencies/* endpoints)\nINFO     backend.core.app:app.py:1094 \u2705 Provider Resilience routes included (/api/provider-resilience/* endpoints)\nINFO     backend.core.app:app.py:1104 \u2705 System capabilities routes included (/api/system/* endpoints)\nINFO     backend.core.app:app.py:1114 \u2705 Real-time market streaming routes included (/streaming/* endpoints)\nINFO     backend.core.app:app.py:1124 \u2705 Security HEAD endpoints included (/api/* HEAD endpoints)\nINFO     backend.core.app:app.py:1134 \u2705 ML Model Registry routes included (/api/models/* endpoints)\nINFO     backend.core.app:app.py:1144 \u2705 Data ingestion routes included (/api/v1/ingestion/* endpoints)\nINFO     backend.core.app:app.py:1154 \u2705 Enterprise model registry routes included (/api/models/enterprise/* endpoints)\nINFO     backend.core.app:app.py:1199 \u2705 Alert engine routes included (/api/alert-engine/* endpoints)\nINFO     backend.core.app:app.py:1209 \u2705 PropFinder routes included (/api/propfinder/* endpoints)\nWARNING  backend.core.app:app.py:1221 \u26a0\ufe0f Could not import multiple_sportsbook_routes: cannot import name 'RateLimiter' from 'backend.middleware.rate_limit' (C:\\Users\\bcmad\\Downloads\\A1Betting7-13.2\\backend\\middleware\\rate_limit.py)\nINFO     backend.core.app:app.py:1495 \u2705 Sportsbook compatibility router mounted at /api/sportsbook\nINFO     backend.core.app:app.py:1527 \U0001f50d Bootstrap validation scheduled on startup\nINFO     backend.core.app:app.py:1535 \U0001f3e5 Health endpoints normalized: /api/health, /health, /api/v2/health -> identical envelope format\nINFO     backend.core.app:app.py:1536 \u2705 A1Betting canonical app created successfully
---------------------------- Captured stderr call -----------------------------
2025-08-23 08:03:59,436 - backend.middleware.rate_limit - INFO - Rate limiting disabled\n2025-08-23 08:03:59,436 - backend.middleware.security_headers - INFO - \u2705 Security headers middleware enabled: CSP=report-only, HSTS=True, strict_mode=False\n2025-08-23 08:03:59,436 - backend.middleware.legacy_middleware - INFO - Registered known legacy endpoints with forwarding paths\n2025-08-23 08:03:59,436 - backend.middleware.legacy_middleware - INFO - Legacy middleware initialized
------------------------------ Captured log call ------------------------------
INFO     backend.middleware.rate_limit:rate_limit.py:90 Rate limiting disabled\nINFO     backend.middleware.security_headers:security_headers.py:71 \u2705 Security headers middleware enabled: CSP=report-only, HSTS=True, strict_mode=False\nINFO     backend.middleware.legacy_middleware:legacy_middleware.py:68 Registered known legacy endpoints with forwarding paths\nINFO     backend.middleware.legacy_middleware:legacy_middleware.py:44 Legacy middleware initialized
_____ TestMultipleSportsbookRoutes.test_websocket_multiple_subscriptions ______
tests\backend\routes\test_multiple_sportsbook_routes.py:472: in test_websocket_multiple_subscriptions
    with sync_client.websocket_connect("/api/sportsbook/ws") as websocket:
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
..\..\AppData\Roaming\Python\Python313\site-packages\starlette\testclient.py:121: in __enter__
    self._raise_on_close(message)
..\..\AppData\Roaming\Python\Python313\site-packages\starlette\testclient.py:150: in _raise_on_close
    raise WebSocketDisconnect(code=message.get("code", 1000), reason=message.get("reason", ""))
E   starlette.websockets.WebSocketDisconnect
---------------------------- Captured stderr setup ----------------------------
2025-08-23 08:03:59,452 - backend.core.app - INFO - \U0001f680 Creating A1Betting canonical app...\n2025-08-23 08:03:59,452 - backend.core.app - INFO - \u2705 Request ID correlation middleware added\n2025-08-23 08:03:59,452 - backend.core.app - INFO - \u2705 Distributed trace correlation middleware added\n2025-08-23 08:03:59,452 - backend.core.app - INFO - \u2705 Structured logging middleware added\n2025-08-23 08:03:59,452 - backend.core.app - INFO - \u2705 Prometheus metrics middleware added\n2025-08-23 08:03:59,452 - backend.core.app - INFO - \u2705 Payload guard middleware added: max_size=262144 bytes, enforce_json=True, enabled=True\n2025-08-23 08:03:59,452 - backend.middleware.rate_limit - INFO - Rate limiting disabled\n2025-08-23 08:03:59,452 - backend.core.app - INFO - \u2705 Rate limiting middleware added: 100/min, burst=200, enabled=False\n2025-08-23 08:03:59,452 - backend.core.app - INFO - \u2705 Security headers middleware added: [HSTS, CSP(report-only), COOP, COEP], x_frame_options=DENY\n2025-08-23 08:03:59,452 - backend.core.app - INFO - \u2705 Legacy endpoint middleware added for usage telemetry and deprecation controls\n2025-08-23 08:03:59,452 - backend.exceptions.handlers - INFO - \u2705 PayloadRejectionError handler registered\n2025-08-23 08:03:59,452 - backend.exceptions.handlers - INFO - \u2705 All exception handlers registered with structured error taxonomy\n2025-08-23 08:03:59,452 - backend.core.app - INFO - \u2705 Centralized exception handlers registered\n2025-08-23 08:03:59,454 - backend.core.app - INFO - \u2705 PR11 Enhanced WebSocket client route included (/ws/client)\n2025-08-23 08:03:59,459 - backend.core.app - INFO - \u2705 Auth routes also exposed at root (/auth/*) for compatibility\n2025-08-23 08:03:59,459 - backend.core.app - INFO - \u2705 Auth and users routes included (auth with /api prefix)\n2025-08-23 08:03:59,460 - backend.core.app - INFO - \u2705 Diagnostics routes included (/api/v2/diagnostics/health, /api/v2/diagnostics/system)\n2025-08-23 08:03:59,461 - backend.core.app - INFO - \u2705 Meta cache routes included (/api/v2/meta/cache-stats, /api/v2/meta/cache-health)\n2025-08-23 08:03:59,462 - backend.core.app - INFO - \u2705 Legacy meta routes included (/api/v2/meta/legacy-usage, /api/v2/meta/migration-readiness)\n2025-08-23 08:03:59,464 - backend.core.app - ERROR - \u274c Failed to register CSP report routes: Invalid args for response field! Hint: check that <class 'logging.Logger'> is a valid Pydantic field type. If you are using a return type annotation that is not a valid Pydantic field (e.g. Union[Response, dict, None]) you can disable generating the response model from the type annotation with the path operation decorator parameter response_model=None. Read more: https://fastapi.tiangolo.com/tutorial/response-model/\n2025-08-23 08:03:59,465 - backend.core.app - INFO - \u2705 Trace test routes included (/api/trace/* endpoints)\n2025-08-23 08:03:59,466 - backend.core.app - INFO - \u2705 Model inference routes included (/api/v2/models/* endpoints)\n2025-08-23 08:03:59,467 - backend.core.app - INFO - \u2705 Observability events routes included (/api/v2/observability/* endpoints)\n2025-08-23 08:03:59,469 - backend.core.app - INFO - \u2705 Admin control routes included (/api/v2/models/shadow/* and /api/v2/models/admin/* endpoints)\n2025-08-23 08:03:59,471 - backend.core.app - INFO - \u2705 Enhanced WebSocket routes included (/ws/v2/* endpoints)\n2025-08-23 08:03:59,472 - backend.core.app - INFO - \u2705 WebSocket logging routes included (/api/websocket/* endpoints)\n2025-08-23 08:03:59,472 - backend.core.app - INFO - \u2705 Version routes included (/api/version/* endpoints)\n2025-08-23 08:03:59,473 - backend.core.app - INFO - \u2705 WebVitals pipeline routes included (/api/metrics/v1/* endpoints)\n2025-08-23 08:03:59,477 - backend.core.app - INFO - \u2705 Enhanced ML routes included (/api/enhanced-ml/* endpoints)\n2025-08-23 08:03:59,478 - backend.core.app - INFO - \u2705 Fallback enhanced-ml compatibility router mounted at /api/enhanced-ml\n2025-08-23 08:03:59,484 - backend.core.app - INFO - \u2705 Consolidated PrizePicks routes included (/api/v2/prizepicks/* endpoints)\n2025-08-23 08:03:59,487 - backend.core.app - INFO - \u2705 Consolidated ML routes included (/api/v2/ml/* endpoints)\n2025-08-23 08:03:59,489 - backend.core.app - ERROR - \u274c Failed to register consolidated Admin routes: parameter without a default follows parameter with a default (consolidated_admin.py, line 165)\n2025-08-23 08:03:59,492 - backend.core.app - INFO - \u2705 Odds & Line Movement routes included (/v1/odds/* endpoints)\n2025-08-23 08:03:59,494 - backend.core.app - INFO - \u2705 Advanced-Kelly compatibility router mounted at /api/advanced-kelly\n2025-08-23 08:03:59,497 - backend.core.app - ERROR - \u274c Failed to register Risk Management & Personalization routes: 'NoneType' object has no attribute 'alert_evaluation_interval_seconds'\n2025-08-23 08:03:59,498 - backend.core.app - INFO - \u2705 Dependencies Health routes included (/api/dependencies/* endpoints)\n2025-08-23 08:03:59,500 - backend.core.app - INFO - \u2705 Provider Resilience routes included (/api/provider-resilience/* endpoints)\n2025-08-23 08:03:59,502 - backend.core.app - INFO - \u2705 System capabilities routes included (/api/system/* endpoints)\n2025-08-23 08:03:59,503 - backend.core.app - INFO - \u2705 Real-time market streaming routes included (/streaming/* endpoints)\n2025-08-23 08:03:59,504 - backend.core.app - INFO - \u2705 Security HEAD endpoints included (/api/* HEAD endpoints)\n2025-08-23 08:03:59,506 - backend.core.app - INFO - \u2705 ML Model Registry routes included (/api/models/* endpoints)\n2025-08-23 08:03:59,507 - backend.core.app - INFO - \u2705 Data ingestion routes included (/api/v1/ingestion/* endpoints)\n2025-08-23 08:03:59,510 - backend.core.app - INFO - \u2705 Enterprise model registry routes included (/api/models/enterprise/* endpoints)\n2025-08-23 08:03:59,514 - backend.core.app - INFO - \u2705 Alert engine routes included (/api/alert-engine/* endpoints)\n2025-08-23 08:03:59,518 - backend.core.app - INFO - \u2705 PropFinder routes included (/api/propfinder/* endpoints)\n2025-08-23 08:03:59,519 - backend.core.app - WARNING - \u26a0\ufe0f Could not import multiple_sportsbook_routes: cannot import name 'RateLimiter' from 'backend.middleware.rate_limit' (C:\\Users\\bcmad\\Downloads\\A1Betting7-13.2\\backend\\middleware\\rate_limit.py)\n2025-08-23 08:03:59,521 - backend.core.app - INFO - \u2705 Sportsbook compatibility router mounted at /api/sportsbook\n2025-08-23 08:03:59,521 - backend.core.app - INFO - \U0001f50d Bootstrap validation scheduled on startup\n2025-08-23 08:03:59,521 - backend.core.app - INFO - \U0001f3e5 Health endpoints normalized: /api/health, /health, /api/v2/health -> identical envelope format\n2025-08-23 08:03:59,521 - backend.core.app - INFO - \u2705 A1Betting canonical app created successfully
----------------------------- Captured log setup ------------------------------
INFO     backend.core.app:app.py:65 \U0001f680 Creating A1Betting canonical app...\nINFO     backend.core.app:app.py:104 \u2705 Request ID correlation middleware added\nINFO     backend.core.app:app.py:114 \u2705 Distributed trace correlation middleware added\nINFO     backend.core.app:app.py:126 \u2705 Structured logging middleware added\nINFO     backend.core.app:app.py:146 \u2705 Prometheus metrics middleware added\nINFO     backend.core.app:app.py:167 \u2705 Payload guard middleware added: max_size=262144 bytes, enforce_json=True, enabled=True\nINFO     backend.middleware.rate_limit:rate_limit.py:90 Rate limiting disabled\nINFO     backend.core.app:app.py:202 \u2705 Rate limiting middleware added: 100/min, burst=200, enabled=False\nINFO     backend.core.app:app.py:244 \u2705 Security headers middleware added: [HSTS, CSP(report-only), COOP, COEP], x_frame_options=DENY\nINFO     backend.core.app:app.py:259 \u2705 Legacy endpoint middleware added for usage telemetry and deprecation controls\nINFO     backend.exceptions.handlers:handlers.py:235 \u2705 PayloadRejectionError handler registered\nINFO     backend.exceptions.handlers:handlers.py:250 \u2705 All exception handlers registered with structured error taxonomy\nINFO     backend.core.app:app.py:269 \u2705 Centralized exception handlers registered\nINFO     backend.core.app:app.py:332 \u2705 PR11 Enhanced WebSocket client route included (/ws/client)\nINFO     backend.core.app:app.py:702 \u2705 Auth routes also exposed at root (/auth/*) for compatibility\nINFO     backend.core.app:app.py:706 \u2705 Auth and users routes included (auth with /api prefix)\nINFO     backend.core.app:app.py:714 \u2705 Diagnostics routes included (/api/v2/diagnostics/health, /api/v2/diagnostics/system)\nINFO     backend.core.app:app.py:763 \u2705 Meta cache routes included (/api/v2/meta/cache-stats, /api/v2/meta/cache-health)\nINFO     backend.core.app:app.py:773 \u2705 Legacy meta routes included (/api/v2/meta/legacy-usage, /api/v2/meta/migration-readiness)\nERROR    backend.core.app:app.py:788 \u274c Failed to register CSP report routes: Invalid args for response field! Hint: check that <class 'logging.Logger'> is a valid Pydantic field type. If you are using a return type annotation that is not a valid Pydantic field (e.g. Union[Response, dict, None]) you can disable generating the response model from the type annotation with the path operation decorator parameter response_model=None. Read more: https://fastapi.tiangolo.com/tutorial/response-model/\nINFO     backend.core.app:app.py:794 \u2705 Trace test routes included (/api/trace/* endpoints)\nINFO     backend.core.app:app.py:804 \u2705 Model inference routes included (/api/v2/models/* endpoints)\nINFO     backend.core.app:app.py:814 \u2705 Observability events routes included (/api/v2/observability/* endpoints)\nINFO     backend.core.app:app.py:824 \u2705 Admin control routes included (/api/v2/models/shadow/* and /api/v2/models/admin/* endpoints)\nINFO     backend.core.app:app.py:834 \u2705 Enhanced WebSocket routes included (/ws/v2/* endpoints)\nINFO     backend.core.app:app.py:844 \u2705 WebSocket logging routes included (/api/websocket/* endpoints)\nINFO     backend.core.app:app.py:854 \u2705 Version routes included (/api/version/* endpoints)\nINFO     backend.core.app:app.py:864 \u2705 WebVitals pipeline routes included (/api/metrics/v1/* endpoints)\nINFO     backend.core.app:app.py:874 \u2705 Enhanced ML routes included (/api/enhanced-ml/* endpoints)\nINFO     backend.core.app:app.py:986 \u2705 Fallback enhanced-ml compatibility router mounted at /api/enhanced-ml\nINFO     backend.core.app:app.py:995 \u2705 Consolidated PrizePicks routes included (/api/v2/prizepicks/* endpoints)\nINFO     backend.core.app:app.py:1005 \u2705 Consolidated ML routes included (/api/v2/ml/* endpoints)\nERROR    backend.core.app:app.py:1019 \u274c Failed to register consolidated Admin routes: parameter without a default follows parameter with a default (consolidated_admin.py, line 165)\nINFO     backend.core.app:app.py:1025 \u2705 Odds & Line Movement routes included (/v1/odds/* endpoints)\nINFO     backend.core.app:app.py:1066 \u2705 Advanced-Kelly compatibility router mounted at /api/advanced-kelly\nERROR    backend.core.app:app.py:1078 \u274c Failed to register Risk Management & Personalization routes: 'NoneType' object has no attribute 'alert_evaluation_interval_seconds'\nINFO     backend.core.app:app.py:1084 \u2705 Dependencies Health routes included (/api/dependencies/* endpoints)\nINFO     backend.core.app:app.py:1094 \u2705 Provider Resilience routes included (/api/provider-resilience/* endpoints)\nINFO     backend.core.app:app.py:1104 \u2705 System capabilities routes included (/api/system/* endpoints)\nINFO     backend.core.app:app.py:1114 \u2705 Real-time market streaming routes included (/streaming/* endpoints)\nINFO     backend.core.app:app.py:1124 \u2705 Security HEAD endpoints included (/api/* HEAD endpoints)\nINFO     backend.core.app:app.py:1134 \u2705 ML Model Registry routes included (/api/models/* endpoints)\nINFO     backend.core.app:app.py:1144 \u2705 Data ingestion routes included (/api/v1/ingestion/* endpoints)\nINFO     backend.core.app:app.py:1154 \u2705 Enterprise model registry routes included (/api/models/enterprise/* endpoints)\nINFO     backend.core.app:app.py:1199 \u2705 Alert engine routes included (/api/alert-engine/* endpoints)\nINFO     backend.core.app:app.py:1209 \u2705 PropFinder routes included (/api/propfinder/* endpoints)\nWARNING  backend.core.app:app.py:1221 \u26a0\ufe0f Could not import multiple_sportsbook_routes: cannot import name 'RateLimiter' from 'backend.middleware.rate_limit' (C:\\Users\\bcmad\\Downloads\\A1Betting7-13.2\\backend\\middleware\\rate_limit.py)\nINFO     backend.core.app:app.py:1495 \u2705 Sportsbook compatibility router mounted at /api/sportsbook\nINFO     backend.core.app:app.py:1527 \U0001f50d Bootstrap validation scheduled on startup\nINFO     backend.core.app:app.py:1535 \U0001f3e5 Health endpoints normalized: /api/health, /health, /api/v2/health -> identical envelope format\nINFO     backend.core.app:app.py:1536 \u2705 A1Betting canonical app created successfully
---------------------------- Captured stderr call -----------------------------
2025-08-23 08:03:59,525 - backend.middleware.rate_limit - INFO - Rate limiting disabled\n2025-08-23 08:03:59,525 - backend.middleware.security_headers - INFO - \u2705 Security headers middleware enabled: CSP=report-only, HSTS=True, strict_mode=False\n2025-08-23 08:03:59,525 - backend.middleware.legacy_middleware - INFO - Registered known legacy endpoints with forwarding paths\n2025-08-23 08:03:59,525 - backend.middleware.legacy_middleware - INFO - Legacy middleware initialized
------------------------------ Captured log call ------------------------------
INFO     backend.middleware.rate_limit:rate_limit.py:90 Rate limiting disabled\nINFO     backend.middleware.security_headers:security_headers.py:71 \u2705 Security headers middleware enabled: CSP=report-only, HSTS=True, strict_mode=False\nINFO     backend.middleware.legacy_middleware:legacy_middleware.py:68 Registered known legacy endpoints with forwarding paths\nINFO     backend.middleware.legacy_middleware:legacy_middleware.py:44 Legacy middleware initialized
_______ TestMultipleSportsbookRoutes.test_websocket_disconnect_handling _______
tests\backend\routes\test_multiple_sportsbook_routes.py:502: in test_websocket_disconnect_handling
    assert self.mock_connection_manager.connect.called
E   AssertionError: assert False
E    +  where False = <AsyncMock name='mock.connect' id='1588152570208'>.called
E    +    where <AsyncMock name='mock.connect' id='1588152570208'> = <MagicMock id='1588152568864'>.connect
E    +      where <MagicMock id='1588152568864'> = <test_multiple_sportsbook_routes.TestMultipleSportsbookRoutes object at 0x00000171C036AF90>.mock_connection_manager
---------------------------- Captured stderr setup ----------------------------
2025-08-23 08:03:59,540 - backend.core.app - INFO - \U0001f680 Creating A1Betting canonical app...\n2025-08-23 08:03:59,540 - backend.core.app - INFO - \u2705 Request ID correlation middleware added\n2025-08-23 08:03:59,540 - backend.core.app - INFO - \u2705 Distributed trace correlation middleware added\n2025-08-23 08:03:59,540 - backend.core.app - INFO - \u2705 Structured logging middleware added\n2025-08-23 08:03:59,540 - backend.core.app - INFO - \u2705 Prometheus metrics middleware added\n2025-08-23 08:03:59,540 - backend.core.app - INFO - \u2705 Payload guard middleware added: max_size=262144 bytes, enforce_json=True, enabled=True\n2025-08-23 08:03:59,541 - backend.middleware.rate_limit - INFO - Rate limiting disabled\n2025-08-23 08:03:59,541 - backend.core.app - INFO - \u2705 Rate limiting middleware added: 100/min, burst=200, enabled=False\n2025-08-23 08:03:59,541 - backend.core.app - INFO - \u2705 Security headers middleware added: [HSTS, CSP(report-only), COOP, COEP], x_frame_options=DENY\n2025-08-23 08:03:59,541 - backend.core.app - INFO - \u2705 Legacy endpoint middleware added for usage telemetry and deprecation controls\n2025-08-23 08:03:59,541 - backend.exceptions.handlers - INFO - \u2705 PayloadRejectionError handler registered\n2025-08-23 08:03:59,541 - backend.exceptions.handlers - INFO - \u2705 All exception handlers registered with structured error taxonomy\n2025-08-23 08:03:59,541 - backend.core.app - INFO - \u2705 Centralized exception handlers registered\n2025-08-23 08:03:59,542 - backend.core.app - INFO - \u2705 PR11 Enhanced WebSocket client route included (/ws/client)\n2025-08-23 08:03:59,546 - backend.core.app - INFO - \u2705 Auth routes also exposed at root (/auth/*) for compatibility\n2025-08-23 08:03:59,546 - backend.core.app - INFO - \u2705 Auth and users routes included (auth with /api prefix)\n2025-08-23 08:03:59,547 - backend.core.app - INFO - \u2705 Diagnostics routes included (/api/v2/diagnostics/health, /api/v2/diagnostics/system)\n2025-08-23 08:03:59,548 - backend.core.app - INFO - \u2705 Meta cache routes included (/api/v2/meta/cache-stats, /api/v2/meta/cache-health)\n2025-08-23 08:03:59,550 - backend.core.app - INFO - \u2705 Legacy meta routes included (/api/v2/meta/legacy-usage, /api/v2/meta/migration-readiness)\n2025-08-23 08:03:59,553 - backend.core.app - ERROR - \u274c Failed to register CSP report routes: Invalid args for response field! Hint: check that <class 'logging.Logger'> is a valid Pydantic field type. If you are using a return type annotation that is not a valid Pydantic field (e.g. Union[Response, dict, None]) you can disable generating the response model from the type annotation with the path operation decorator parameter response_model=None. Read more: https://fastapi.tiangolo.com/tutorial/response-model/\n2025-08-23 08:03:59,553 - backend.core.app - INFO - \u2705 Trace test routes included (/api/trace/* endpoints)\n2025-08-23 08:03:59,555 - backend.core.app - INFO - \u2705 Model inference routes included (/api/v2/models/* endpoints)\n2025-08-23 08:03:59,556 - backend.core.app - INFO - \u2705 Observability events routes included (/api/v2/observability/* endpoints)\n2025-08-23 08:03:59,557 - backend.core.app - INFO - \u2705 Admin control routes included (/api/v2/models/shadow/* and /api/v2/models/admin/* endpoints)\n2025-08-23 08:03:59,560 - backend.core.app - INFO - \u2705 Enhanced WebSocket routes included (/ws/v2/* endpoints)\n2025-08-23 08:03:59,560 - backend.core.app - INFO - \u2705 WebSocket logging routes included (/api/websocket/* endpoints)\n2025-08-23 08:03:59,562 - backend.core.app - INFO - \u2705 Version routes included (/api/version/* endpoints)\n2025-08-23 08:03:59,562 - backend.core.app - INFO - \u2705 WebVitals pipeline routes included (/api/metrics/v1/* endpoints)\n2025-08-23 08:03:59,566 - backend.core.app - INFO - \u2705 Enhanced ML routes included (/api/enhanced-ml/* endpoints)\n2025-08-23 08:03:59,567 - backend.core.app - INFO - \u2705 Fallback enhanced-ml compatibility router mounted at /api/enhanced-ml\n2025-08-23 08:03:59,571 - backend.core.app - INFO - \u2705 Consolidated PrizePicks routes included (/api/v2/prizepicks/* endpoints)\n2025-08-23 08:03:59,574 - backend.core.app - INFO - \u2705 Consolidated ML routes included (/api/v2/ml/* endpoints)\n2025-08-23 08:03:59,576 - backend.core.app - ERROR - \u274c Failed to register consolidated Admin routes: parameter without a default follows parameter with a default (consolidated_admin.py, line 165)\n2025-08-23 08:03:59,580 - backend.core.app - INFO - \u2705 Odds & Line Movement routes included (/v1/odds/* endpoints)\n2025-08-23 08:03:59,581 - backend.core.app - INFO - \u2705 Advanced-Kelly compatibility router mounted at /api/advanced-kelly\n2025-08-23 08:03:59,583 - backend.core.app - ERROR - \u274c Failed to register Risk Management & Personalization routes: 'NoneType' object has no attribute 'alert_evaluation_interval_seconds'\n2025-08-23 08:03:59,585 - backend.core.app - INFO - \u2705 Dependencies Health routes included (/api/dependencies/* endpoints)\n2025-08-23 08:03:59,587 - backend.core.app - INFO - \u2705 Provider Resilience routes included (/api/provider-resilience/* endpoints)\n2025-08-23 08:03:59,588 - backend.core.app - INFO - \u2705 System capabilities routes included (/api/system/* endpoints)\n2025-08-23 08:03:59,590 - backend.core.app - INFO - \u2705 Real-time market streaming routes included (/streaming/* endpoints)\n2025-08-23 08:03:59,591 - backend.core.app - INFO - \u2705 Security HEAD endpoints included (/api/* HEAD endpoints)\n2025-08-23 08:03:59,592 - backend.core.app - INFO - \u2705 ML Model Registry routes included (/api/models/* endpoints)\n2025-08-23 08:03:59,593 - backend.core.app - INFO - \u2705 Data ingestion routes included (/api/v1/ingestion/* endpoints)\n2025-08-23 08:03:59,597 - backend.core.app - INFO - \u2705 Enterprise model registry routes included (/api/models/enterprise/* endpoints)\n2025-08-23 08:03:59,600 - backend.core.app - INFO - \u2705 Alert engine routes included (/api/alert-engine/* endpoints)\n2025-08-23 08:03:59,604 - backend.core.app - INFO - \u2705 PropFinder routes included (/api/propfinder/* endpoints)\n2025-08-23 08:03:59,605 - backend.core.app - WARNING - \u26a0\ufe0f Could not import multiple_sportsbook_routes: cannot import name 'RateLimiter' from 'backend.middleware.rate_limit' (C:\\Users\\bcmad\\Downloads\\A1Betting7-13.2\\backend\\middleware\\rate_limit.py)\n2025-08-23 08:03:59,608 - backend.core.app - INFO - \u2705 Sportsbook compatibility router mounted at /api/sportsbook\n2025-08-23 08:03:59,608 - backend.core.app - INFO - \U0001f50d Bootstrap validation scheduled on startup\n2025-08-23 08:03:59,608 - backend.core.app - INFO - \U0001f3e5 Health endpoints normalized: /api/health, /health, /api/v2/health -> identical envelope format\n2025-08-23 08:03:59,608 - backend.core.app - INFO - \u2705 A1Betting canonical app created successfully
----------------------------- Captured log setup ------------------------------
INFO     backend.core.app:app.py:65 \U0001f680 Creating A1Betting canonical app...\nINFO     backend.core.app:app.py:104 \u2705 Request ID correlation middleware added\nINFO     backend.core.app:app.py:114 \u2705 Distributed trace correlation middleware added\nINFO     backend.core.app:app.py:126 \u2705 Structured logging middleware added\nINFO     backend.core.app:app.py:146 \u2705 Prometheus metrics middleware added\nINFO     backend.core.app:app.py:167 \u2705 Payload guard middleware added: max_size=262144 bytes, enforce_json=True, enabled=True\nINFO     backend.middleware.rate_limit:rate_limit.py:90 Rate limiting disabled\nINFO     backend.core.app:app.py:202 \u2705 Rate limiting middleware added: 100/min, burst=200, enabled=False\nINFO     backend.core.app:app.py:244 \u2705 Security headers middleware added: [HSTS, CSP(report-only), COOP, COEP], x_frame_options=DENY\nINFO     backend.core.app:app.py:259 \u2705 Legacy endpoint middleware added for usage telemetry and deprecation controls\nINFO     backend.exceptions.handlers:handlers.py:235 \u2705 PayloadRejectionError handler registered\nINFO     backend.exceptions.handlers:handlers.py:250 \u2705 All exception handlers registered with structured error taxonomy\nINFO     backend.core.app:app.py:269 \u2705 Centralized exception handlers registered\nINFO     backend.core.app:app.py:332 \u2705 PR11 Enhanced WebSocket client route included (/ws/client)\nINFO     backend.core.app:app.py:702 \u2705 Auth routes also exposed at root (/auth/*) for compatibility\nINFO     backend.core.app:app.py:706 \u2705 Auth and users routes included (auth with /api prefix)\nINFO     backend.core.app:app.py:714 \u2705 Diagnostics routes included (/api/v2/diagnostics/health, /api/v2/diagnostics/system)\nINFO     backend.core.app:app.py:763 \u2705 Meta cache routes included (/api/v2/meta/cache-stats, /api/v2/meta/cache-health)\nINFO     backend.core.app:app.py:773 \u2705 Legacy meta routes included (/api/v2/meta/legacy-usage, /api/v2/meta/migration-readiness)\nERROR    backend.core.app:app.py:788 \u274c Failed to register CSP report routes: Invalid args for response field! Hint: check that <class 'logging.Logger'> is a valid Pydantic field type. If you are using a return type annotation that is not a valid Pydantic field (e.g. Union[Response, dict, None]) you can disable generating the response model from the type annotation with the path operation decorator parameter response_model=None. Read more: https://fastapi.tiangolo.com/tutorial/response-model/\nINFO     backend.core.app:app.py:794 \u2705 Trace test routes included (/api/trace/* endpoints)\nINFO     backend.core.app:app.py:804 \u2705 Model inference routes included (/api/v2/models/* endpoints)\nINFO     backend.core.app:app.py:814 \u2705 Observability events routes included (/api/v2/observability/* endpoints)\nINFO     backend.core.app:app.py:824 \u2705 Admin control routes included (/api/v2/models/shadow/* and /api/v2/models/admin/* endpoints)\nINFO     backend.core.app:app.py:834 \u2705 Enhanced WebSocket routes included (/ws/v2/* endpoints)\nINFO     backend.core.app:app.py:844 \u2705 WebSocket logging routes included (/api/websocket/* endpoints)\nINFO     backend.core.app:app.py:854 \u2705 Version routes included (/api/version/* endpoints)\nINFO     backend.core.app:app.py:864 \u2705 WebVitals pipeline routes included (/api/metrics/v1/* endpoints)\nINFO     backend.core.app:app.py:874 \u2705 Enhanced ML routes included (/api/enhanced-ml/* endpoints)\nINFO     backend.core.app:app.py:986 \u2705 Fallback enhanced-ml compatibility router mounted at /api/enhanced-ml\nINFO     backend.core.app:app.py:995 \u2705 Consolidated PrizePicks routes included (/api/v2/prizepicks/* endpoints)\nINFO     backend.core.app:app.py:1005 \u2705 Consolidated ML routes included (/api/v2/ml/* endpoints)\nERROR    backend.core.app:app.py:1019 \u274c Failed to register consolidated Admin routes: parameter without a default follows parameter with a default (consolidated_admin.py, line 165)\nINFO     backend.core.app:app.py:1025 \u2705 Odds & Line Movement routes included (/v1/odds/* endpoints)\nINFO     backend.core.app:app.py:1066 \u2705 Advanced-Kelly compatibility router mounted at /api/advanced-kelly\nERROR    backend.core.app:app.py:1078 \u274c Failed to register Risk Management & Personalization routes: 'NoneType' object has no attribute 'alert_evaluation_interval_seconds'\nINFO     backend.core.app:app.py:1084 \u2705 Dependencies Health routes included (/api/dependencies/* endpoints)\nINFO     backend.core.app:app.py:1094 \u2705 Provider Resilience routes included (/api/provider-resilience/* endpoints)\nINFO     backend.core.app:app.py:1104 \u2705 System capabilities routes included (/api/system/* endpoints)\nINFO     backend.core.app:app.py:1114 \u2705 Real-time market streaming routes included (/streaming/* endpoints)\nINFO     backend.core.app:app.py:1124 \u2705 Security HEAD endpoints included (/api/* HEAD endpoints)\nINFO     backend.core.app:app.py:1134 \u2705 ML Model Registry routes included (/api/models/* endpoints)\nINFO     backend.core.app:app.py:1144 \u2705 Data ingestion routes included (/api/v1/ingestion/* endpoints)\nINFO     backend.core.app:app.py:1154 \u2705 Enterprise model registry routes included (/api/models/enterprise/* endpoints)\nINFO     backend.core.app:app.py:1199 \u2705 Alert engine routes included (/api/alert-engine/* endpoints)\nINFO     backend.core.app:app.py:1209 \u2705 PropFinder routes included (/api/propfinder/* endpoints)\nWARNING  backend.core.app:app.py:1221 \u26a0\ufe0f Could not import multiple_sportsbook_routes: cannot import name 'RateLimiter' from 'backend.middleware.rate_limit' (C:\\Users\\bcmad\\Downloads\\A1Betting7-13.2\\backend\\middleware\\rate_limit.py)\nINFO     backend.core.app:app.py:1495 \u2705 Sportsbook compatibility router mounted at /api/sportsbook\nINFO     backend.core.app:app.py:1527 \U0001f50d Bootstrap validation scheduled on startup\nINFO     backend.core.app:app.py:1535 \U0001f3e5 Health endpoints normalized: /api/health, /health, /api/v2/health -> identical envelope format\nINFO     backend.core.app:app.py:1536 \u2705 A1Betting canonical app created successfully
---------------------------- Captured stderr call -----------------------------
2025-08-23 08:03:59,612 - backend.middleware.rate_limit - INFO - Rate limiting disabled\n2025-08-23 08:03:59,612 - backend.middleware.security_headers - INFO - \u2705 Security headers middleware enabled: CSP=report-only, HSTS=True, strict_mode=False\n2025-08-23 08:03:59,612 - backend.middleware.legacy_middleware - INFO - Registered known legacy endpoints with forwarding paths\n2025-08-23 08:03:59,612 - backend.middleware.legacy_middleware - INFO - Legacy middleware initialized
------------------------------ Captured log call ------------------------------
INFO     backend.middleware.rate_limit:rate_limit.py:90 Rate limiting disabled\nINFO     backend.middleware.security_headers:security_headers.py:71 \u2705 Security headers middleware enabled: CSP=report-only, HSTS=True, strict_mode=False\nINFO     backend.middleware.legacy_middleware:legacy_middleware.py:68 Registered known legacy endpoints with forwarding paths\nINFO     backend.middleware.legacy_middleware:legacy_middleware.py:44 Legacy middleware initialized
_________ TestMultipleSportsbookRoutes.test_service_timeout_handling __________
tests\backend\routes\test_multiple_sportsbook_routes.py:582: in test_service_timeout_handling
    assert response.status_code >= 400  # Error response expected
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   assert 200 >= 400
E    +  where 200 = <Response [200 OK]>.status_code
---------------------------- Captured stderr setup ----------------------------
2025-08-23 08:03:59,877 - backend.core.app - INFO - \U0001f680 Creating A1Betting canonical app...\n2025-08-23 08:03:59,877 - backend.core.app - INFO - \u2705 Request ID correlation middleware added\n2025-08-23 08:03:59,877 - backend.core.app - INFO - \u2705 Distributed trace correlation middleware added\n2025-08-23 08:03:59,877 - backend.core.app - INFO - \u2705 Structured logging middleware added\n2025-08-23 08:03:59,878 - backend.core.app - INFO - \u2705 Prometheus metrics middleware added\n2025-08-23 08:03:59,878 - backend.core.app - INFO - \u2705 Payload guard middleware added: max_size=262144 bytes, enforce_json=True, enabled=True\n2025-08-23 08:03:59,878 - backend.middleware.rate_limit - INFO - Rate limiting disabled\n2025-08-23 08:03:59,878 - backend.core.app - INFO - \u2705 Rate limiting middleware added: 100/min, burst=200, enabled=False\n2025-08-23 08:03:59,878 - backend.core.app - INFO - \u2705 Security headers middleware added: [HSTS, CSP(report-only), COOP, COEP], x_frame_options=DENY\n2025-08-23 08:03:59,878 - backend.core.app - INFO - \u2705 Legacy endpoint middleware added for usage telemetry and deprecation controls\n2025-08-23 08:03:59,878 - backend.exceptions.handlers - INFO - \u2705 PayloadRejectionError handler registered\n2025-08-23 08:03:59,878 - backend.exceptions.handlers - INFO - \u2705 All exception handlers registered with structured error taxonomy\n2025-08-23 08:03:59,878 - backend.core.app - INFO - \u2705 Centralized exception handlers registered\n2025-08-23 08:03:59,879 - backend.core.app - INFO - \u2705 PR11 Enhanced WebSocket client route included (/ws/client)\n2025-08-23 08:03:59,883 - backend.core.app - INFO - \u2705 Auth routes also exposed at root (/auth/*) for compatibility\n2025-08-23 08:03:59,883 - backend.core.app - INFO - \u2705 Auth and users routes included (auth with /api prefix)\n2025-08-23 08:03:59,884 - backend.core.app - INFO - \u2705 Diagnostics routes included (/api/v2/diagnostics/health, /api/v2/diagnostics/system)\n2025-08-23 08:03:59,885 - backend.core.app - INFO - \u2705 Meta cache routes included (/api/v2/meta/cache-stats, /api/v2/meta/cache-health)\n2025-08-23 08:03:59,886 - backend.core.app - INFO - \u2705 Legacy meta routes included (/api/v2/meta/legacy-usage, /api/v2/meta/migration-readiness)\n2025-08-23 08:03:59,888 - backend.core.app - ERROR - \u274c Failed to register CSP report routes: Invalid args for response field! Hint: check that <class 'logging.Logger'> is a valid Pydantic field type. If you are using a return type annotation that is not a valid Pydantic field (e.g. Union[Response, dict, None]) you can disable generating the response model from the type annotation with the path operation decorator parameter response_model=None. Read more: https://fastapi.tiangolo.com/tutorial/response-model/\n2025-08-23 08:03:59,888 - backend.core.app - INFO - \u2705 Trace test routes included (/api/trace/* endpoints)\n2025-08-23 08:03:59,890 - backend.core.app - INFO - \u2705 Model inference routes included (/api/v2/models/* endpoints)\n2025-08-23 08:03:59,891 - backend.core.app - INFO - \u2705 Observability events routes included (/api/v2/observability/* endpoints)\n2025-08-23 08:03:59,893 - backend.core.app - INFO - \u2705 Admin control routes included (/api/v2/models/shadow/* and /api/v2/models/admin/* endpoints)\n2025-08-23 08:03:59,895 - backend.core.app - INFO - \u2705 Enhanced WebSocket routes included (/ws/v2/* endpoints)\n2025-08-23 08:03:59,895 - backend.core.app - INFO - \u2705 WebSocket logging routes included (/api/websocket/* endpoints)\n2025-08-23 08:03:59,896 - backend.core.app - INFO - \u2705 Version routes included (/api/version/* endpoints)\n2025-08-23 08:03:59,897 - backend.core.app - INFO - \u2705 WebVitals pipeline routes included (/api/metrics/v1/* endpoints)\n2025-08-23 08:03:59,901 - backend.core.app - INFO - \u2705 Enhanced ML routes included (/api/enhanced-ml/* endpoints)\n2025-08-23 08:03:59,901 - backend.core.app - INFO - \u2705 Fallback enhanced-ml compatibility router mounted at /api/enhanced-ml\n2025-08-23 08:03:59,906 - backend.core.app - INFO - \u2705 Consolidated PrizePicks routes included (/api/v2/prizepicks/* endpoints)\n2025-08-23 08:03:59,910 - backend.core.app - INFO - \u2705 Consolidated ML routes included (/api/v2/ml/* endpoints)\n2025-08-23 08:03:59,912 - backend.core.app - ERROR - \u274c Failed to register consolidated Admin routes: parameter without a default follows parameter with a default (consolidated_admin.py, line 165)\n2025-08-23 08:03:59,915 - backend.core.app - INFO - \u2705 Odds & Line Movement routes included (/v1/odds/* endpoints)\n2025-08-23 08:03:59,917 - backend.core.app - INFO - \u2705 Advanced-Kelly compatibility router mounted at /api/advanced-kelly\n2025-08-23 08:03:59,919 - backend.core.app - ERROR - \u274c Failed to register Risk Management & Personalization routes: 'NoneType' object has no attribute 'alert_evaluation_interval_seconds'\n2025-08-23 08:03:59,921 - backend.core.app - INFO - \u2705 Dependencies Health routes included (/api/dependencies/* endpoints)\n2025-08-23 08:03:59,923 - backend.core.app - INFO - \u2705 Provider Resilience routes included (/api/provider-resilience/* endpoints)\n2025-08-23 08:03:59,924 - backend.core.app - INFO - \u2705 System capabilities routes included (/api/system/* endpoints)\n2025-08-23 08:03:59,925 - backend.core.app - INFO - \u2705 Real-time market streaming routes included (/streaming/* endpoints)\n2025-08-23 08:03:59,926 - backend.core.app - INFO - \u2705 Security HEAD endpoints included (/api/* HEAD endpoints)\n2025-08-23 08:03:59,928 - backend.core.app - INFO - \u2705 ML Model Registry routes included (/api/models/* endpoints)\n2025-08-23 08:03:59,929 - backend.core.app - INFO - \u2705 Data ingestion routes included (/api/v1/ingestion/* endpoints)\n2025-08-23 08:03:59,932 - backend.core.app - INFO - \u2705 Enterprise model registry routes included (/api/models/enterprise/* endpoints)\n2025-08-23 08:03:59,936 - backend.core.app - INFO - \u2705 Alert engine routes included (/api/alert-engine/* endpoints)\n2025-08-23 08:03:59,940 - backend.core.app - INFO - \u2705 PropFinder routes included (/api/propfinder/* endpoints)\n2025-08-23 08:03:59,941 - backend.core.app - WARNING - \u26a0\ufe0f Could not import multiple_sportsbook_routes: cannot import name 'RateLimiter' from 'backend.middleware.rate_limit' (C:\\Users\\bcmad\\Downloads\\A1Betting7-13.2\\backend\\middleware\\rate_limit.py)\n2025-08-23 08:03:59,944 - backend.core.app - INFO - \u2705 Sportsbook compatibility router mounted at /api/sportsbook\n2025-08-23 08:03:59,944 - backend.core.app - INFO - \U0001f50d Bootstrap validation scheduled on startup\n2025-08-23 08:03:59,944 - backend.core.app - INFO - \U0001f3e5 Health endpoints normalized: /api/health, /health, /api/v2/health -> identical envelope format\n2025-08-23 08:03:59,944 - backend.core.app - INFO - \u2705 A1Betting canonical app created successfully
----------------------------- Captured log setup ------------------------------
INFO     backend.core.app:app.py:65 \U0001f680 Creating A1Betting canonical app...\nINFO     backend.core.app:app.py:104 \u2705 Request ID correlation middleware added\nINFO     backend.core.app:app.py:114 \u2705 Distributed trace correlation middleware added\nINFO     backend.core.app:app.py:126 \u2705 Structured logging middleware added\nINFO     backend.core.app:app.py:146 \u2705 Prometheus metrics middleware added\nINFO     backend.core.app:app.py:167 \u2705 Payload guard middleware added: max_size=262144 bytes, enforce_json=True, enabled=True\nINFO     backend.middleware.rate_limit:rate_limit.py:90 Rate limiting disabled\nINFO     backend.core.app:app.py:202 \u2705 Rate limiting middleware added: 100/min, burst=200, enabled=False\nINFO     backend.core.app:app.py:244 \u2705 Security headers middleware added: [HSTS, CSP(report-only), COOP, COEP], x_frame_options=DENY\nINFO     backend.core.app:app.py:259 \u2705 Legacy endpoint middleware added for usage telemetry and deprecation controls\nINFO     backend.exceptions.handlers:handlers.py:235 \u2705 PayloadRejectionError handler registered\nINFO     backend.exceptions.handlers:handlers.py:250 \u2705 All exception handlers registered with structured error taxonomy\nINFO     backend.core.app:app.py:269 \u2705 Centralized exception handlers registered\nINFO     backend.core.app:app.py:332 \u2705 PR11 Enhanced WebSocket client route included (/ws/client)\nINFO     backend.core.app:app.py:702 \u2705 Auth routes also exposed at root (/auth/*) for compatibility\nINFO     backend.core.app:app.py:706 \u2705 Auth and users routes included (auth with /api prefix)\nINFO     backend.core.app:app.py:714 \u2705 Diagnostics routes included (/api/v2/diagnostics/health, /api/v2/diagnostics/system)\nINFO     backend.core.app:app.py:763 \u2705 Meta cache routes included (/api/v2/meta/cache-stats, /api/v2/meta/cache-health)\nINFO     backend.core.app:app.py:773 \u2705 Legacy meta routes included (/api/v2/meta/legacy-usage, /api/v2/meta/migration-readiness)\nERROR    backend.core.app:app.py:788 \u274c Failed to register CSP report routes: Invalid args for response field! Hint: check that <class 'logging.Logger'> is a valid Pydantic field type. If you are using a return type annotation that is not a valid Pydantic field (e.g. Union[Response, dict, None]) you can disable generating the response model from the type annotation with the path operation decorator parameter response_model=None. Read more: https://fastapi.tiangolo.com/tutorial/response-model/\nINFO     backend.core.app:app.py:794 \u2705 Trace test routes included (/api/trace/* endpoints)\nINFO     backend.core.app:app.py:804 \u2705 Model inference routes included (/api/v2/models/* endpoints)\nINFO     backend.core.app:app.py:814 \u2705 Observability events routes included (/api/v2/observability/* endpoints)\nINFO     backend.core.app:app.py:824 \u2705 Admin control routes included (/api/v2/models/shadow/* and /api/v2/models/admin/* endpoints)\nINFO     backend.core.app:app.py:834 \u2705 Enhanced WebSocket routes included (/ws/v2/* endpoints)\nINFO     backend.core.app:app.py:844 \u2705 WebSocket logging routes included (/api/websocket/* endpoints)\nINFO     backend.core.app:app.py:854 \u2705 Version routes included (/api/version/* endpoints)\nINFO     backend.core.app:app.py:864 \u2705 WebVitals pipeline routes included (/api/metrics/v1/* endpoints)\nINFO     backend.core.app:app.py:874 \u2705 Enhanced ML routes included (/api/enhanced-ml/* endpoints)\nINFO     backend.core.app:app.py:986 \u2705 Fallback enhanced-ml compatibility router mounted at /api/enhanced-ml\nINFO     backend.core.app:app.py:995 \u2705 Consolidated PrizePicks routes included (/api/v2/prizepicks/* endpoints)\nINFO     backend.core.app:app.py:1005 \u2705 Consolidated ML routes included (/api/v2/ml/* endpoints)\nERROR    backend.core.app:app.py:1019 \u274c Failed to register consolidated Admin routes: parameter without a default follows parameter with a default (consolidated_admin.py, line 165)\nINFO     backend.core.app:app.py:1025 \u2705 Odds & Line Movement routes included (/v1/odds/* endpoints)\nINFO     backend.core.app:app.py:1066 \u2705 Advanced-Kelly compatibility router mounted at /api/advanced-kelly\nERROR    backend.core.app:app.py:1078 \u274c Failed to register Risk Management & Personalization routes: 'NoneType' object has no attribute 'alert_evaluation_interval_seconds'\nINFO     backend.core.app:app.py:1084 \u2705 Dependencies Health routes included (/api/dependencies/* endpoints)\nINFO     backend.core.app:app.py:1094 \u2705 Provider Resilience routes included (/api/provider-resilience/* endpoints)\nINFO     backend.core.app:app.py:1104 \u2705 System capabilities routes included (/api/system/* endpoints)\nINFO     backend.core.app:app.py:1114 \u2705 Real-time market streaming routes included (/streaming/* endpoints)\nINFO     backend.core.app:app.py:1124 \u2705 Security HEAD endpoints included (/api/* HEAD endpoints)\nINFO     backend.core.app:app.py:1134 \u2705 ML Model Registry routes included (/api/models/* endpoints)\nINFO     backend.core.app:app.py:1144 \u2705 Data ingestion routes included (/api/v1/ingestion/* endpoints)\nINFO     backend.core.app:app.py:1154 \u2705 Enterprise model registry routes included (/api/models/enterprise/* endpoints)\nINFO     backend.core.app:app.py:1199 \u2705 Alert engine routes included (/api/alert-engine/* endpoints)\nINFO     backend.core.app:app.py:1209 \u2705 PropFinder routes included (/api/propfinder/* endpoints)\nWARNING  backend.core.app:app.py:1221 \u26a0\ufe0f Could not import multiple_sportsbook_routes: cannot import name 'RateLimiter' from 'backend.middleware.rate_limit' (C:\\Users\\bcmad\\Downloads\\A1Betting7-13.2\\backend\\middleware\\rate_limit.py)\nINFO     backend.core.app:app.py:1495 \u2705 Sportsbook compatibility router mounted at /api/sportsbook\nINFO     backend.core.app:app.py:1527 \U0001f50d Bootstrap validation scheduled on startup\nINFO     backend.core.app:app.py:1535 \U0001f3e5 Health endpoints normalized: /api/health, /health, /api/v2/health -> identical envelope format\nINFO     backend.core.app:app.py:1536 \u2705 A1Betting canonical app created successfully
---------------------------- Captured stderr call -----------------------------
2025-08-23 08:03:59,947 - backend.middleware.rate_limit - INFO - Rate limiting disabled\n2025-08-23 08:03:59,948 - backend.middleware.security_headers - INFO - \u2705 Security headers middleware enabled: CSP=report-only, HSTS=True, strict_mode=False\n2025-08-23 08:03:59,948 - backend.middleware.legacy_middleware - INFO - Registered known legacy endpoints with forwarding paths\n2025-08-23 08:03:59,948 - backend.middleware.legacy_middleware - INFO - Legacy middleware initialized\n2025-08-23 08:03:59,948 - backend.middleware.legacy_middleware - INFO - Legacy endpoint accessed: GET /api/sportsbook/player-props (count: 13)\n{"timestamp": "2025-08-23T13:03:59.950594", "level": "INFO", "logger": "a1betting", "message": "Request started", "module": "structured_logging_middleware", "function": "log_request_start", "line": 109, "request_id": "a9e8781e-3601-4884-96f0-262b7eef3a9f", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro", "event_type": "request_start", "method": "GET", "url": "http://testserver/api/sportsbook/player-props?sport=mlb", "path": "/api/sportsbook/player-props", "query_params": {"sport": "mlb"}, "client_ip": "127.0.0.1", "user_agent": "python-httpx/0.28.1", "content_type": null}\n2025-08-23 08:03:59,950 - backend.middleware.request_id_middleware - INFO - Request started: GET /api/sportsbook/player-props\n2025-08-23 08:03:59,951 - backend.middleware.request_id_middleware - INFO - Request completed: GET /api/sportsbook/player-props - 200\n2025-08-23 08:03:59,951 - backend.middleware.distributed_trace_middleware - INFO - Trace completed: d1999721-56ac-41db-a694-32f30746283e\n{"timestamp": "2025-08-23T13:03:59.951505", "level": "INFO", "logger": "a1betting", "message": "Request completed", "module": "structured_logging_middleware", "function": "log_request_success", "line": 124, "request_id": "a9e8781e-3601-4884-96f0-262b7eef3a9f", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro", "event_type": "request_success", "method": "GET", "url": "http://testserver/api/sportsbook/player-props?sport=mlb", "path": "/api/sportsbook/player-props", "status_code": 200, "duration_ms": 0.94, "response_size": "39", "performance_category": "fast"}
------------------------------ Captured log call ------------------------------
INFO     backend.middleware.rate_limit:rate_limit.py:90 Rate limiting disabled\nINFO     backend.middleware.security_headers:security_headers.py:71 \u2705 Security headers middleware enabled: CSP=report-only, HSTS=True, strict_mode=False\nINFO     backend.middleware.legacy_middleware:legacy_middleware.py:68 Registered known legacy endpoints with forwarding paths\nINFO     backend.middleware.legacy_middleware:legacy_middleware.py:44 Legacy middleware initialized\nINFO     backend.middleware.legacy_middleware:legacy_middleware.py:177 Legacy endpoint accessed: GET /api/sportsbook/player-props (count: 13)\nINFO     backend.middleware.request_id_middleware:request_id_middleware.py:67 Request started: GET /api/sportsbook/player-props\nINFO     backend.middleware.request_id_middleware:request_id_middleware.py:92 Request completed: GET /api/sportsbook/player-props - 200\nINFO     backend.middleware.distributed_trace_middleware:distributed_trace_middleware.py:224 Trace completed: d1999721-56ac-41db-a694-32f30746283e
______ TestPortfolioOptimizationRoutes.test_kelly_calculation_validation ______
tests\backend\routes\test_portfolio_optimization_routes.py:70: in test_kelly_calculation_validation
    assert "message" in data or "detail" in data
E   AssertionError: assert ('message' in {'error': {'message': 'Invalid probability'}, 'success': False} or 'detail' in {'error': {'message': 'Invalid probability'}, 'success': False})
---------------------------- Captured stderr call -----------------------------
2025-08-23 08:04:00,396 - backend.middleware.legacy_middleware - INFO - Legacy endpoint accessed: POST /api/advanced-kelly/calculate (count: 4)
{"timestamp": "2025-08-23T13:04:00.396811", "level": "INFO", "logger": "a1betting", "message": "Request started", "module": "structured_logging_middleware", "function": "log_request_start", "line": 109, "request_id": "3c0873d6-1d37-400f-b4cd-9a2d854d324a", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro", "event_type": "request_start", "method": "POST", "url": "http://testserver/api/advanced-kelly/calculate", "path": "/api/advanced-kelly/calculate", "query_params": {}, "client_ip": "testclient", "user_agent": "testclient", "content_type": "application/json"}
2025-08-23 08:04:00,397 - backend.middleware.request_id_middleware - INFO - Request started: POST /api/advanced-kelly/calculate
2025-08-23 08:04:00,398 - backend.middleware.request_id_middleware - INFO - Request completed: POST /api/advanced-kelly/calculate - 422
2025-08-23 08:04:00,398 - backend.middleware.distributed_trace_middleware - INFO - Trace completed: 6f090f84-8f68-405d-af0f-fc3e0e9a914c
{"timestamp": "2025-08-23T13:04:00.398467", "level": "INFO", "logger": "a1betting", "message": "Request completed", "module": "structured_logging_middleware", "function": "log_request_success", "line": 124, "request_id": "3c0873d6-1d37-400f-b4cd-9a2d854d324a", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro", "event_type": "request_success", "method": "POST", "url": "http://testserver/api/advanced-kelly/calculate", "path": "/api/advanced-kelly/calculate", "status_code": 422, "duration_ms": 1.67, "response_size": "59", "performance_category": "fast"}
------------------------------ Captured log call ------------------------------
INFO     backend.middleware.legacy_middleware:legacy_middleware.py:177 Legacy endpoint accessed: POST /api/advanced-kelly/calculate (count: 4)
INFO     backend.middleware.request_id_middleware:request_id_middleware.py:67 Request started: POST /api/advanced-kelly/calculate
INFO     backend.middleware.request_id_middleware:request_id_middleware.py:92 Request completed: POST /api/advanced-kelly/calculate - 422
INFO     backend.middleware.distributed_trace_middleware:distributed_trace_middleware.py:224 Trace completed: 6f090f84-8f68-405d-af0f-fc3e0e9a914c
___ TestPortfolioOptimizationRoutes.test_portfolio_optimization_validation ____
tests\backend\routes\test_portfolio_optimization_routes.py:129: in test_portfolio_optimization_validation
    assert response.status_code in [400, 422], f"Failed for request: {invalid_request}"
E   AssertionError: Failed for request: {'opportunities': [], 'total_bankroll': 1000.0}
E   assert 200 in [400, 422]
E    +  where 200 = <Response [200 OK]>.status_code
---------------------------- Captured stderr call -----------------------------
2025-08-23 08:04:00,428 - backend.middleware.legacy_middleware - INFO - Legacy endpoint accessed: POST /api/advanced-kelly/portfolio-optimization (count: 3)
{"timestamp": "2025-08-23T13:04:00.428608", "level": "INFO", "logger": "a1betting", "message": "Request started", "module": "structured_logging_middleware", "function": "log_request_start", "line": 109, "request_id": "22eddce8-e837-4a90-86a4-e23c789fcf1b", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro", "event_type": "request_start", "method": "POST", "url": "http://testserver/api/advanced-kelly/portfolio-optimization", "path": "/api/advanced-kelly/portfolio-optimization", "query_params": {}, "client_ip": "testclient", "user_agent": "testclient", "content_type": "application/json"}
2025-08-23 08:04:00,428 - backend.middleware.request_id_middleware - INFO - Request started: POST /api/advanced-kelly/portfolio-optimization
2025-08-23 08:04:00,429 - backend.middleware.request_id_middleware - INFO - Request completed: POST /api/advanced-kelly/portfolio-optimization - 200
2025-08-23 08:04:00,429 - backend.middleware.distributed_trace_middleware - INFO - Trace completed: 960da672-2db3-48b1-ae48-2767c2aadf22
{"timestamp": "2025-08-23T13:04:00.429863", "level": "INFO", "logger": "a1betting", "message": "Request completed", "module": "structured_logging_middleware", "function": "log_request_success", "line": 124, "request_id": "22eddce8-e837-4a90-86a4-e23c789fcf1b", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro", "event_type": "request_success", "method": "POST", "url": "http://testserver/api/advanced-kelly/portfolio-optimization", "path": "/api/advanced-kelly/portfolio-optimization", "status_code": 200, "duration_ms": 1.27, "response_size": "42", "performance_category": "fast"}
------------------------------ Captured log call ------------------------------
INFO     backend.middleware.legacy_middleware:legacy_middleware.py:177 Legacy endpoint accessed: POST /api/advanced-kelly/portfolio-optimization (count: 3)
INFO     backend.middleware.request_id_middleware:request_id_middleware.py:67 Request started: POST /api/advanced-kelly/portfolio-optimization
INFO     backend.middleware.request_id_middleware:request_id_middleware.py:92 Request completed: POST /api/advanced-kelly/portfolio-optimization - 200
INFO     backend.middleware.distributed_trace_middleware:distributed_trace_middleware.py:224 Trace completed: 960da672-2db3-48b1-ae48-2767c2aadf22
_______ TestPortfolioOptimizationRoutes.test_portfolio_metrics_endpoint _______
tests\backend\routes\test_portfolio_optimization_routes.py:145: in test_portfolio_metrics_endpoint
    assert any(key in data for key in [
E   assert False
E    +  where False = any(<generator object TestPortfolioOptimizationRoutes.test_portfolio_metrics_endpoint.<locals>.<genexpr> at 0x00000171C6C08040>)
---------------------------- Captured stderr call -----------------------------
2025-08-23 08:04:00,437 - backend.middleware.legacy_middleware - INFO - Legacy endpoint accessed: GET /api/advanced-kelly/portfolio-metrics (count: 2)
{"timestamp": "2025-08-23T13:04:00.437598", "level": "INFO", "logger": "a1betting", "message": "Request started", "module": "structured_logging_middleware", "function": "log_request_start", "line": 109, "request_id": "31316feb-c33d-4a79-bbd1-9a56998e5b96", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro", "event_type": "request_start", "method": "GET", "url": "http://testserver/api/advanced-kelly/portfolio-metrics", "path": "/api/advanced-kelly/portfolio-metrics", "query_params": {}, "client_ip": "testclient", "user_agent": "testclient", "content_type": null}
2025-08-23 08:04:00,437 - backend.middleware.request_id_middleware - INFO - Request started: GET /api/advanced-kelly/portfolio-metrics
2025-08-23 08:04:00,438 - backend.middleware.request_id_middleware - INFO - Request completed: GET /api/advanced-kelly/portfolio-metrics - 200
2025-08-23 08:04:00,438 - backend.middleware.distributed_trace_middleware - INFO - Trace completed: 10900161-8986-4003-8027-3c7686bd86af
{"timestamp": "2025-08-23T13:04:00.438489", "level": "INFO", "logger": "a1betting", "message": "Request completed", "module": "structured_logging_middleware", "function": "log_request_success", "line": 124, "request_id": "31316feb-c33d-4a79-bbd1-9a56998e5b96", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro", "event_type": "request_success", "method": "GET", "url": "http://testserver/api/advanced-kelly/portfolio-metrics", "path": "/api/advanced-kelly/portfolio-metrics", "status_code": 200, "duration_ms": 0.9, "response_size": "26", "performance_category": "fast"}
------------------------------ Captured log call ------------------------------
INFO     backend.middleware.legacy_middleware:legacy_middleware.py:177 Legacy endpoint accessed: GET /api/advanced-kelly/portfolio-metrics (count: 2)
INFO     backend.middleware.request_id_middleware:request_id_middleware.py:67 Request started: GET /api/advanced-kelly/portfolio-metrics
INFO     backend.middleware.request_id_middleware:request_id_middleware.py:92 Request completed: GET /api/advanced-kelly/portfolio-metrics - 200
INFO     backend.middleware.distributed_trace_middleware:distributed_trace_middleware.py:224 Trace completed: 10900161-8986-4003-8027-3c7686bd86af
________ TestPortfolioOptimizationRoutes.test_risk_management_endpoint ________
tests\backend\routes\test_portfolio_optimization_routes.py:238: in test_risk_management_endpoint
    assert any(key in data for key in [
E   assert False
E    +  where False = any(<generator object TestPortfolioOptimizationRoutes.test_risk_management_endpoint.<locals>.<genexpr> at 0x00000171C5853100>)
---------------------------- Captured stderr call -----------------------------
2025-08-23 08:04:00,492 - backend.middleware.legacy_middleware - INFO - Legacy endpoint accessed: POST /api/advanced-kelly/risk-analysis (count: 2)
{"timestamp": "2025-08-23T13:04:00.493033", "level": "INFO", "logger": "a1betting", "message": "Request started", "module": "structured_logging_middleware", "function": "log_request_start", "line": 109, "request_id": "f85ede5d-c861-4039-b09f-10464f8844f4", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro", "event_type": "request_start", "method": "POST", "url": "http://testserver/api/advanced-kelly/risk-analysis", "path": "/api/advanced-kelly/risk-analysis", "query_params": {}, "client_ip": "testclient", "user_agent": "testclient", "content_type": "application/json"}
2025-08-23 08:04:00,493 - backend.middleware.request_id_middleware - INFO - Request started: POST /api/advanced-kelly/risk-analysis
2025-08-23 08:04:00,494 - backend.middleware.request_id_middleware - INFO - Request completed: POST /api/advanced-kelly/risk-analysis - 200
2025-08-23 08:04:00,494 - backend.middleware.distributed_trace_middleware - INFO - Trace completed: 893ec2ee-a44c-423f-ac3c-40e1a33080d9
{"timestamp": "2025-08-23T13:04:00.494435", "level": "INFO", "logger": "a1betting", "message": "Request completed", "module": "structured_logging_middleware", "function": "log_request_success", "line": 124, "request_id": "f85ede5d-c861-4039-b09f-10464f8844f4", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro", "event_type": "request_success", "method": "POST", "url": "http://testserver/api/advanced-kelly/risk-analysis", "path": "/api/advanced-kelly/risk-analysis", "status_code": 200, "duration_ms": 1.42, "response_size": "35", "performance_category": "fast"}
------------------------------ Captured log call ------------------------------
INFO     backend.middleware.legacy_middleware:legacy_middleware.py:177 Legacy endpoint accessed: POST /api/advanced-kelly/risk-analysis (count: 2)
INFO     backend.middleware.request_id_middleware:request_id_middleware.py:67 Request started: POST /api/advanced-kelly/risk-analysis
INFO     backend.middleware.request_id_middleware:request_id_middleware.py:92 Request completed: POST /api/advanced-kelly/risk-analysis - 200
INFO     backend.middleware.distributed_trace_middleware:distributed_trace_middleware.py:224 Trace completed: 893ec2ee-a44c-423f-ac3c-40e1a33080d9
____ TestPortfolioOptimizationRoutes.test_historical_performance_endpoint _____
tests\backend\routes\test_portfolio_optimization_routes.py:271: in test_historical_performance_endpoint
    assert "message" in data or "detail" in data
E   AssertionError: assert ('message' in {'data': None, 'error': {'code': 'E4040_NOT_FOUND', 'message': 'Not Found'}, 'meta': {'category': 'CLIENT', 'request_id': '449cbb6f-de1e-45e8-9896-45049fcecfad', 'retryable': False, 'severity': 'LOW', ...}, 'success': False} or 'detail' in {'data': None, 'error': {'code': 'E4040_NOT_FOUND', 'message': 'Not Found'}, 'meta': {'category': 'CLIENT', 'request_id': '449cbb6f-de1e-45e8-9896-45049fcecfad', 'retryable': False, 'severity': 'LOW', ...}, 'success': False})
---------------------------- Captured stderr call -----------------------------
2025-08-23 08:04:00,501 - backend.services.legacy_registry - INFO - Registered legacy endpoint: /api/advanced-kelly/historical-performance -> None
2025-08-23 08:04:00,502 - backend.middleware.legacy_middleware - INFO - Legacy endpoint accessed: POST /api/advanced-kelly/historical-performance (count: 1)
{"timestamp": "2025-08-23T13:04:00.502296", "level": "INFO", "logger": "a1betting", "message": "Request started", "module": "structured_logging_middleware", "function": "log_request_start", "line": 109, "request_id": "449cbb6f-de1e-45e8-9896-45049fcecfad", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro", "event_type": "request_start", "method": "POST", "url": "http://testserver/api/advanced-kelly/historical-performance", "path": "/api/advanced-kelly/historical-performance", "query_params": {}, "client_ip": "testclient", "user_agent": "testclient", "content_type": "application/json"}
2025-08-23 08:04:00,502 - backend.middleware.request_id_middleware - INFO - Request started: POST /api/advanced-kelly/historical-performance
2025-08-23 08:04:00,502 - backend.errors.catalog - ERROR - API Error: E4040_NOT_FOUND
2025-08-23 08:04:00,503 - backend.middleware.request_id_middleware - INFO - Request completed: POST /api/advanced-kelly/historical-performance - 404
2025-08-23 08:04:00,503 - backend.middleware.distributed_trace_middleware - INFO - Trace completed: 6d0d9754-5382-430a-abd4-153bd5c142df
{"timestamp": "2025-08-23T13:04:00.503144", "level": "INFO", "logger": "a1betting", "message": "Request completed", "module": "structured_logging_middleware", "function": "log_request_success", "line": 124, "request_id": "449cbb6f-de1e-45e8-9896-45049fcecfad", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro", "event_type": "request_success", "method": "POST", "url": "http://testserver/api/advanced-kelly/historical-performance", "path": "/api/advanced-kelly/historical-performance", "status_code": 404, "duration_ms": 0.86, "response_size": "243", "performance_category": "fast"}
------------------------------ Captured log call ------------------------------
INFO     backend.services.legacy_registry:legacy_registry.py:102 Registered legacy endpoint: /api/advanced-kelly/historical-performance -> None
INFO     backend.middleware.legacy_middleware:legacy_middleware.py:177 Legacy endpoint accessed: POST /api/advanced-kelly/historical-performance (count: 1)
INFO     backend.middleware.request_id_middleware:request_id_middleware.py:67 Request started: POST /api/advanced-kelly/historical-performance
ERROR    backend.errors.catalog:catalog.py:304 API Error: E4040_NOT_FOUND
INFO     backend.middleware.request_id_middleware:request_id_middleware.py:92 Request completed: POST /api/advanced-kelly/historical-performance - 404
INFO     backend.middleware.distributed_trace_middleware:distributed_trace_middleware.py:224 Trace completed: 6d0d9754-5382-430a-abd4-153bd5c142df
________ TestPredictionEngineRoutes.test_single_prediction_validation _________
tests\backend\routes\test_prediction_engine_routes.py:85: in test_single_prediction_validation
    assert "message" in data or "detail" in data
E   AssertionError: assert ('message' in {'error': {'message': 'Validation error: missing fields'}, 'success': False} or 'detail' in {'error': {'message': 'Validation error: missing fields'}, 'success': False})
---------------------------- Captured stderr call -----------------------------
2025-08-23 08:04:00,579 - backend.middleware.legacy_middleware - INFO - Legacy endpoint accessed: POST /api/enhanced-ml/predict/single (count: 6)
{"timestamp": "2025-08-23T13:04:00.580067", "level": "INFO", "logger": "a1betting", "message": "Request started", "module": "structured_logging_middleware", "function": "log_request_start", "line": 109, "request_id": "ec19abec-7f90-4ede-b871-0f5e1e2d08d6", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro", "event_type": "request_start", "method": "POST", "url": "http://testserver/api/enhanced-ml/predict/single", "path": "/api/enhanced-ml/predict/single", "query_params": {}, "client_ip": "testclient", "user_agent": "testclient", "content_type": "application/json"}
2025-08-23 08:04:00,580 - backend.middleware.request_id_middleware - INFO - Request started: POST /api/enhanced-ml/predict/single
2025-08-23 08:04:00,581 - backend.middleware.request_id_middleware - INFO - Request completed: POST /api/enhanced-ml/predict/single - 422
2025-08-23 08:04:00,581 - backend.middleware.distributed_trace_middleware - INFO - Trace completed: 37276877-68f9-497d-894d-fa8ca6628d3f
{"timestamp": "2025-08-23T13:04:00.581181", "level": "INFO", "logger": "a1betting", "message": "Request completed", "module": "structured_logging_middleware", "function": "log_request_success", "line": 124, "request_id": "ec19abec-7f90-4ede-b871-0f5e1e2d08d6", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro", "event_type": "request_success", "method": "POST", "url": "http://testserver/api/enhanced-ml/predict/single", "path": "/api/enhanced-ml/predict/single", "status_code": 422, "duration_ms": 1.13, "response_size": "72", "performance_category": "fast"}
------------------------------ Captured log call ------------------------------
INFO     backend.middleware.legacy_middleware:legacy_middleware.py:177 Legacy endpoint accessed: POST /api/enhanced-ml/predict/single (count: 6)
INFO     backend.middleware.request_id_middleware:request_id_middleware.py:67 Request started: POST /api/enhanced-ml/predict/single
INFO     backend.middleware.request_id_middleware:request_id_middleware.py:92 Request completed: POST /api/enhanced-ml/predict/single - 422
INFO     backend.middleware.distributed_trace_middleware:distributed_trace_middleware.py:224 Trace completed: 37276877-68f9-497d-894d-fa8ca6628d3f
_________ TestPredictionEngineRoutes.test_batch_prediction_validation _________
tests\backend\routes\test_prediction_engine_routes.py:129: in test_batch_prediction_validation
    assert response.status_code in [400, 422]
E   assert 200 in [400, 422]
E    +  where 200 = <Response [200 OK]>.status_code
---------------------------- Captured stderr call -----------------------------
2025-08-23 08:04:00,594 - backend.middleware.legacy_middleware - INFO - Legacy endpoint accessed: POST /api/enhanced-ml/predict/batch (count: 3)
{"timestamp": "2025-08-23T13:04:00.595226", "level": "INFO", "logger": "a1betting", "message": "Request started", "module": "structured_logging_middleware", "function": "log_request_start", "line": 109, "request_id": "863f5c95-c72e-4bf5-b93a-db020682893f", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro", "event_type": "request_start", "method": "POST", "url": "http://testserver/api/enhanced-ml/predict/batch", "path": "/api/enhanced-ml/predict/batch", "query_params": {}, "client_ip": "testclient", "user_agent": "testclient", "content_type": "application/json"}
2025-08-23 08:04:00,595 - backend.middleware.request_id_middleware - INFO - Request started: POST /api/enhanced-ml/predict/batch
2025-08-23 08:04:00,596 - backend.middleware.request_id_middleware - INFO - Request completed: POST /api/enhanced-ml/predict/batch - 200
2025-08-23 08:04:00,596 - backend.middleware.distributed_trace_middleware - INFO - Trace completed: 6f30fb46-d701-4d74-b0a7-d38a6387194d
{"timestamp": "2025-08-23T13:04:00.596628", "level": "INFO", "logger": "a1betting", "message": "Request completed", "module": "structured_logging_middleware", "function": "log_request_success", "line": 124, "request_id": "863f5c95-c72e-4bf5-b93a-db020682893f", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro", "event_type": "request_success", "method": "POST", "url": "http://testserver/api/enhanced-ml/predict/batch", "path": "/api/enhanced-ml/predict/batch", "status_code": 200, "duration_ms": 1.41, "response_size": "38", "performance_category": "fast"}
------------------------------ Captured log call ------------------------------
INFO     backend.middleware.legacy_middleware:legacy_middleware.py:177 Legacy endpoint accessed: POST /api/enhanced-ml/predict/batch (count: 3)
INFO     backend.middleware.request_id_middleware:request_id_middleware.py:67 Request started: POST /api/enhanced-ml/predict/batch
INFO     backend.middleware.request_id_middleware:request_id_middleware.py:92 Request completed: POST /api/enhanced-ml/predict/batch - 200
INFO     backend.middleware.distributed_trace_middleware:distributed_trace_middleware.py:224 Trace completed: 6f30fb46-d701-4d74-b0a7-d38a6387194d
____ TestPredictionEngineRoutes.test_model_registration_endpoint_structure ____
tests\backend\routes\test_prediction_engine_routes.py:159: in test_model_registration_endpoint_structure
    assert response.status_code in [200, 201, 400, 409, 422]
E   assert 404 in [200, 201, 400, 409, 422]
E    +  where 404 = <Response [404 Not Found]>.status_code
---------------------------- Captured stderr call -----------------------------
2025-08-23 08:04:00,604 - backend.middleware.legacy_middleware - INFO - Legacy endpoint accessed: POST /api/enhanced-ml/models/register (count: 2)
{"timestamp": "2025-08-23T13:04:00.604692", "level": "INFO", "logger": "a1betting", "message": "Request started", "module": "structured_logging_middleware", "function": "log_request_start", "line": 109, "request_id": "926aa332-9cd4-48d0-9b84-d1fb862baf94", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro", "event_type": "request_start", "method": "POST", "url": "http://testserver/api/enhanced-ml/models/register", "path": "/api/enhanced-ml/models/register", "query_params": {}, "client_ip": "testclient", "user_agent": "testclient", "content_type": "application/json"}
2025-08-23 08:04:00,604 - backend.middleware.request_id_middleware - INFO - Request started: POST /api/enhanced-ml/models/register
2025-08-23 08:04:00,605 - backend.errors.catalog - ERROR - API Error: E4040_NOT_FOUND
2025-08-23 08:04:00,605 - backend.middleware.request_id_middleware - INFO - Request completed: POST /api/enhanced-ml/models/register - 404
2025-08-23 08:04:00,605 - backend.middleware.distributed_trace_middleware - INFO - Trace completed: 0e79e997-b8a9-478a-8aab-e5b3ba67b0a6
{"timestamp": "2025-08-23T13:04:00.605658", "level": "INFO", "logger": "a1betting", "message": "Request completed", "module": "structured_logging_middleware", "function": "log_request_success", "line": 124, "request_id": "926aa332-9cd4-48d0-9b84-d1fb862baf94", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro", "event_type": "request_success", "method": "POST", "url": "http://testserver/api/enhanced-ml/models/register", "path": "/api/enhanced-ml/models/register", "status_code": 404, "duration_ms": 0.98, "response_size": "243", "performance_category": "fast"}
------------------------------ Captured log call ------------------------------
INFO     backend.middleware.legacy_middleware:legacy_middleware.py:177 Legacy endpoint accessed: POST /api/enhanced-ml/models/register (count: 2)
INFO     backend.middleware.request_id_middleware:request_id_middleware.py:67 Request started: POST /api/enhanced-ml/models/register
ERROR    backend.errors.catalog:catalog.py:304 API Error: E4040_NOT_FOUND
INFO     backend.middleware.request_id_middleware:request_id_middleware.py:92 Request completed: POST /api/enhanced-ml/models/register - 404
INFO     backend.middleware.distributed_trace_middleware:distributed_trace_middleware.py:224 Trace completed: 0e79e997-b8a9-478a-8aab-e5b3ba67b0a6
_________ TestPredictionEngineRoutes.test_registered_models_endpoint __________
tests\backend\routes\test_prediction_engine_routes.py:170: in test_registered_models_endpoint
    assert response.status_code in [200, 500]
E   assert 404 in [200, 500]
E    +  where 404 = <Response [404 Not Found]>.status_code
---------------------------- Captured stderr call -----------------------------
2025-08-23 08:04:00,613 - backend.middleware.legacy_middleware - INFO - Legacy endpoint accessed: GET /api/enhanced-ml/models/registered (count: 3)
{"timestamp": "2025-08-23T13:04:00.613644", "level": "INFO", "logger": "a1betting", "message": "Request started", "module": "structured_logging_middleware", "function": "log_request_start", "line": 109, "request_id": "46343e4b-7806-4df2-8f8c-1dd941558bab", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro", "event_type": "request_start", "method": "GET", "url": "http://testserver/api/enhanced-ml/models/registered", "path": "/api/enhanced-ml/models/registered", "query_params": {}, "client_ip": "testclient", "user_agent": "testclient", "content_type": null}
2025-08-23 08:04:00,613 - backend.middleware.request_id_middleware - INFO - Request started: GET /api/enhanced-ml/models/registered
2025-08-23 08:04:00,614 - backend.errors.catalog - ERROR - API Error: E4040_NOT_FOUND
2025-08-23 08:04:00,614 - backend.middleware.request_id_middleware - INFO - Request completed: GET /api/enhanced-ml/models/registered - 404
2025-08-23 08:04:00,614 - backend.middleware.distributed_trace_middleware - INFO - Trace completed: 120f9f71-2ab8-4bdd-952f-0f01a35bce9e
{"timestamp": "2025-08-23T13:04:00.614543", "level": "INFO", "logger": "a1betting", "message": "Request completed", "module": "structured_logging_middleware", "function": "log_request_success", "line": 124, "request_id": "46343e4b-7806-4df2-8f8c-1dd941558bab", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro", "event_type": "request_success", "method": "GET", "url": "http://testserver/api/enhanced-ml/models/registered", "path": "/api/enhanced-ml/models/registered", "status_code": 404, "duration_ms": 0.91, "response_size": "243", "performance_category": "fast"}
------------------------------ Captured log call ------------------------------
INFO     backend.middleware.legacy_middleware:legacy_middleware.py:177 Legacy endpoint accessed: GET /api/enhanced-ml/models/registered (count: 3)
INFO     backend.middleware.request_id_middleware:request_id_middleware.py:67 Request started: GET /api/enhanced-ml/models/registered
ERROR    backend.errors.catalog:catalog.py:304 API Error: E4040_NOT_FOUND
INFO     backend.middleware.request_id_middleware:request_id_middleware.py:92 Request completed: GET /api/enhanced-ml/models/registered - 404
INFO     backend.middleware.distributed_trace_middleware:distributed_trace_middleware.py:224 Trace completed: 120f9f71-2ab8-4bdd-952f-0f01a35bce9e
____ TestPredictionEngineRoutes.test_performance_query_endpoint_structure _____
tests\backend\routes\test_prediction_engine_routes.py:200: in test_performance_query_endpoint_structure
    assert "message" in data or "detail" in data
E   AssertionError: assert ('message' in {'data': None, 'error': {'code': 'E4040_NOT_FOUND', 'message': 'Not Found'}, 'meta': {'category': 'CLIENT', 'request_id': '1694b0d4-9ddb-4371-8db2-a912e2b9c258', 'retryable': False, 'severity': 'LOW', ...}, 'success': False} or 'detail' in {'data': None, 'error': {'code': 'E4040_NOT_FOUND', 'message': 'Not Found'}, 'meta': {'category': 'CLIENT', 'request_id': '1694b0d4-9ddb-4371-8db2-a912e2b9c258', 'retryable': False, 'severity': 'LOW', ...}, 'success': False})
---------------------------- Captured stderr call -----------------------------
2025-08-23 08:04:00,621 - backend.services.legacy_registry - INFO - Registered legacy endpoint: /api/enhanced-ml/performance/query -> None
2025-08-23 08:04:00,621 - backend.middleware.legacy_middleware - INFO - Legacy endpoint accessed: POST /api/enhanced-ml/performance/query (count: 1)
{"timestamp": "2025-08-23T13:04:00.621740", "level": "INFO", "logger": "a1betting", "message": "Request started", "module": "structured_logging_middleware", "function": "log_request_start", "line": 109, "request_id": "1694b0d4-9ddb-4371-8db2-a912e2b9c258", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro", "event_type": "request_start", "method": "POST", "url": "http://testserver/api/enhanced-ml/performance/query", "path": "/api/enhanced-ml/performance/query", "query_params": {}, "client_ip": "testclient", "user_agent": "testclient", "content_type": "application/json"}
2025-08-23 08:04:00,621 - backend.middleware.request_id_middleware - INFO - Request started: POST /api/enhanced-ml/performance/query
2025-08-23 08:04:00,622 - backend.errors.catalog - ERROR - API Error: E4040_NOT_FOUND
2025-08-23 08:04:00,622 - backend.middleware.request_id_middleware - INFO - Request completed: POST /api/enhanced-ml/performance/query - 404
2025-08-23 08:04:00,622 - backend.middleware.distributed_trace_middleware - INFO - Trace completed: 7a31afe6-1475-4c8a-bd7a-7b6c6cf24c3a
{"timestamp": "2025-08-23T13:04:00.622595", "level": "INFO", "logger": "a1betting", "message": "Request completed", "module": "structured_logging_middleware", "function": "log_request_success", "line": 124, "request_id": "1694b0d4-9ddb-4371-8db2-a912e2b9c258", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro", "event_type": "request_success", "method": "POST", "url": "http://testserver/api/enhanced-ml/performance/query", "path": "/api/enhanced-ml/performance/query", "status_code": 404, "duration_ms": 0.87, "response_size": "243", "performance_category": "fast"}
------------------------------ Captured log call ------------------------------
INFO     backend.services.legacy_registry:legacy_registry.py:102 Registered legacy endpoint: /api/enhanced-ml/performance/query -> None
INFO     backend.middleware.legacy_middleware:legacy_middleware.py:177 Legacy endpoint accessed: POST /api/enhanced-ml/performance/query (count: 1)
INFO     backend.middleware.request_id_middleware:request_id_middleware.py:67 Request started: POST /api/enhanced-ml/performance/query
ERROR    backend.errors.catalog:catalog.py:304 API Error: E4040_NOT_FOUND
INFO     backend.middleware.request_id_middleware:request_id_middleware.py:92 Request completed: POST /api/enhanced-ml/performance/query - 404
INFO     backend.middleware.distributed_trace_middleware:distributed_trace_middleware.py:224 Trace completed: 7a31afe6-1475-4c8a-bd7a-7b6c6cf24c3a
_______________ TestPredictionEngineRoutes.test_health_endpoint _______________
tests\backend\routes\test_prediction_engine_routes.py:207: in test_health_endpoint
    assert response.status_code in [200, 503]
E   assert 404 in [200, 503]
E    +  where 404 = <Response [404 Not Found]>.status_code
---------------------------- Captured stderr call -----------------------------
2025-08-23 08:04:00,629 - backend.middleware.legacy_middleware - INFO - Legacy endpoint accessed: GET /api/enhanced-ml/health (count: 3)
{"timestamp": "2025-08-23T13:04:00.630310", "level": "INFO", "logger": "a1betting", "message": "Request started", "module": "structured_logging_middleware", "function": "log_request_start", "line": 109, "request_id": "e67967b9-daa8-47c3-8a13-cb3329113d58", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro", "event_type": "request_start", "method": "GET", "url": "http://testserver/api/enhanced-ml/health", "path": "/api/enhanced-ml/health", "query_params": {}, "client_ip": "testclient", "user_agent": "testclient", "content_type": null}
2025-08-23 08:04:00,630 - backend.middleware.request_id_middleware - INFO - Request started: GET /api/enhanced-ml/health
2025-08-23 08:04:00,630 - backend.errors.catalog - ERROR - API Error: E4040_NOT_FOUND
2025-08-23 08:04:00,631 - backend.middleware.request_id_middleware - INFO - Request completed: GET /api/enhanced-ml/health - 404
2025-08-23 08:04:00,631 - backend.middleware.distributed_trace_middleware - INFO - Trace completed: f47d1e7e-a692-40ec-99a0-992900acd453
{"timestamp": "2025-08-23T13:04:00.631205", "level": "INFO", "logger": "a1betting", "message": "Request completed", "module": "structured_logging_middleware", "function": "log_request_success", "line": 124, "request_id": "e67967b9-daa8-47c3-8a13-cb3329113d58", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro", "event_type": "request_success", "method": "GET", "url": "http://testserver/api/enhanced-ml/health", "path": "/api/enhanced-ml/health", "status_code": 404, "duration_ms": 0.91, "response_size": "243", "performance_category": "fast"}
------------------------------ Captured log call ------------------------------
INFO     backend.middleware.legacy_middleware:legacy_middleware.py:177 Legacy endpoint accessed: GET /api/enhanced-ml/health (count: 3)
INFO     backend.middleware.request_id_middleware:request_id_middleware.py:67 Request started: GET /api/enhanced-ml/health
ERROR    backend.errors.catalog:catalog.py:304 API Error: E4040_NOT_FOUND
INFO     backend.middleware.request_id_middleware:request_id_middleware.py:92 Request completed: GET /api/enhanced-ml/health - 404
INFO     backend.middleware.distributed_trace_middleware:distributed_trace_middleware.py:224 Trace completed: f47d1e7e-a692-40ec-99a0-992900acd453
_________ TestPredictionEngineRoutes.test_performance_alerts_endpoint _________
tests\backend\routes\test_prediction_engine_routes.py:218: in test_performance_alerts_endpoint
    assert response.status_code in [200, 500]
E   assert 404 in [200, 500]
E    +  where 404 = <Response [404 Not Found]>.status_code
---------------------------- Captured stderr call -----------------------------
2025-08-23 08:04:00,638 - backend.middleware.legacy_middleware - INFO - Legacy endpoint accessed: GET /api/enhanced-ml/performance/alerts (count: 2)
{"timestamp": "2025-08-23T13:04:00.638732", "level": "INFO", "logger": "a1betting", "message": "Request started", "module": "structured_logging_middleware", "function": "log_request_start", "line": 109, "request_id": "1d9c0866-da98-4d18-9a55-aaf8b5423369", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro", "event_type": "request_start", "method": "GET", "url": "http://testserver/api/enhanced-ml/performance/alerts", "path": "/api/enhanced-ml/performance/alerts", "query_params": {}, "client_ip": "testclient", "user_agent": "testclient", "content_type": null}
2025-08-23 08:04:00,638 - backend.middleware.request_id_middleware - INFO - Request started: GET /api/enhanced-ml/performance/alerts
2025-08-23 08:04:00,639 - backend.errors.catalog - ERROR - API Error: E4040_NOT_FOUND
2025-08-23 08:04:00,639 - backend.middleware.request_id_middleware - INFO - Request completed: GET /api/enhanced-ml/performance/alerts - 404
2025-08-23 08:04:00,639 - backend.middleware.distributed_trace_middleware - INFO - Trace completed: 74c19496-b319-4778-aa31-d4517ff0f484
{"timestamp": "2025-08-23T13:04:00.640029", "level": "INFO", "logger": "a1betting", "message": "Request completed", "module": "structured_logging_middleware", "function": "log_request_success", "line": 124, "request_id": "1d9c0866-da98-4d18-9a55-aaf8b5423369", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro", "event_type": "request_success", "method": "GET", "url": "http://testserver/api/enhanced-ml/performance/alerts", "path": "/api/enhanced-ml/performance/alerts", "status_code": 404, "duration_ms": 1.31, "response_size": "243", "performance_category": "fast"}
------------------------------ Captured log call ------------------------------
INFO     backend.middleware.legacy_middleware:legacy_middleware.py:177 Legacy endpoint accessed: GET /api/enhanced-ml/performance/alerts (count: 2)
INFO     backend.middleware.request_id_middleware:request_id_middleware.py:67 Request started: GET /api/enhanced-ml/performance/alerts
ERROR    backend.errors.catalog:catalog.py:304 API Error: E4040_NOT_FOUND
INFO     backend.middleware.request_id_middleware:request_id_middleware.py:92 Request completed: GET /api/enhanced-ml/performance/alerts - 404
INFO     backend.middleware.distributed_trace_middleware:distributed_trace_middleware.py:224 Trace completed: 74c19496-b319-4778-aa31-d4517ff0f484
____________ TestPredictionEngineRoutes.test_batch_stats_endpoint _____________
tests\backend\routes\test_prediction_engine_routes.py:232: in test_batch_stats_endpoint
    assert response.status_code in [200, 500]
E   assert 404 in [200, 500]
E    +  where 404 = <Response [404 Not Found]>.status_code
---------------------------- Captured stderr call -----------------------------
2025-08-23 08:04:00,647 - backend.middleware.legacy_middleware - INFO - Legacy endpoint accessed: GET /api/enhanced-ml/performance/batch-stats (count: 2)
{"timestamp": "2025-08-23T13:04:00.647449", "level": "INFO", "logger": "a1betting", "message": "Request started", "module": "structured_logging_middleware", "function": "log_request_start", "line": 109, "request_id": "4b7ac890-b956-42b6-a4c9-05a4f80ccb6d", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro", "event_type": "request_start", "method": "GET", "url": "http://testserver/api/enhanced-ml/performance/batch-stats", "path": "/api/enhanced-ml/performance/batch-stats", "query_params": {}, "client_ip": "testclient", "user_agent": "testclient", "content_type": null}
2025-08-23 08:04:00,647 - backend.middleware.request_id_middleware - INFO - Request started: GET /api/enhanced-ml/performance/batch-stats
2025-08-23 08:04:00,648 - backend.errors.catalog - ERROR - API Error: E4040_NOT_FOUND
2025-08-23 08:04:00,648 - backend.middleware.request_id_middleware - INFO - Request completed: GET /api/enhanced-ml/performance/batch-stats - 404
2025-08-23 08:04:00,648 - backend.middleware.distributed_trace_middleware - INFO - Trace completed: ba0de44c-d0ea-4d45-9b97-8ac9ee1a7596
{"timestamp": "2025-08-23T13:04:00.648331", "level": "INFO", "logger": "a1betting", "message": "Request completed", "module": "structured_logging_middleware", "function": "log_request_success", "line": 124, "request_id": "4b7ac890-b956-42b6-a4c9-05a4f80ccb6d", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro", "event_type": "request_success", "method": "GET", "url": "http://testserver/api/enhanced-ml/performance/batch-stats", "path": "/api/enhanced-ml/performance/batch-stats", "status_code": 404, "duration_ms": 0.9, "response_size": "243", "performance_category": "fast"}
------------------------------ Captured log call ------------------------------
INFO     backend.middleware.legacy_middleware:legacy_middleware.py:177 Legacy endpoint accessed: GET /api/enhanced-ml/performance/batch-stats (count: 2)
INFO     backend.middleware.request_id_middleware:request_id_middleware.py:67 Request started: GET /api/enhanced-ml/performance/batch-stats
ERROR    backend.errors.catalog:catalog.py:304 API Error: E4040_NOT_FOUND
INFO     backend.middleware.request_id_middleware:request_id_middleware.py:92 Request completed: GET /api/enhanced-ml/performance/batch-stats - 404
INFO     backend.middleware.distributed_trace_middleware:distributed_trace_middleware.py:224 Trace completed: ba0de44c-d0ea-4d45-9b97-8ac9ee1a7596
_____________ TestPredictionEngineRoutes.test_shap_stats_endpoint _____________
tests\backend\routes\test_prediction_engine_routes.py:246: in test_shap_stats_endpoint
    assert response.status_code in [200, 500]
E   assert 404 in [200, 500]
E    +  where 404 = <Response [404 Not Found]>.status_code
---------------------------- Captured stderr call -----------------------------
2025-08-23 08:04:00,655 - backend.services.legacy_registry - INFO - Registered legacy endpoint: /api/enhanced-ml/performance/shap-stats -> None
2025-08-23 08:04:00,655 - backend.middleware.legacy_middleware - INFO - Legacy endpoint accessed: GET /api/enhanced-ml/performance/shap-stats (count: 1)
{"timestamp": "2025-08-23T13:04:00.655615", "level": "INFO", "logger": "a1betting", "message": "Request started", "module": "structured_logging_middleware", "function": "log_request_start", "line": 109, "request_id": "69c9fd0b-f020-4f25-bd44-b389ad542531", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro", "event_type": "request_start", "method": "GET", "url": "http://testserver/api/enhanced-ml/performance/shap-stats", "path": "/api/enhanced-ml/performance/shap-stats", "query_params": {}, "client_ip": "testclient", "user_agent": "testclient", "content_type": null}
2025-08-23 08:04:00,655 - backend.middleware.request_id_middleware - INFO - Request started: GET /api/enhanced-ml/performance/shap-stats
2025-08-23 08:04:00,656 - backend.errors.catalog - ERROR - API Error: E4040_NOT_FOUND
2025-08-23 08:04:00,656 - backend.middleware.request_id_middleware - INFO - Request completed: GET /api/enhanced-ml/performance/shap-stats - 404
2025-08-23 08:04:00,656 - backend.middleware.distributed_trace_middleware - INFO - Trace completed: a4394351-5acd-418e-bb54-5ad5baf9dbe8
{"timestamp": "2025-08-23T13:04:00.656445", "level": "INFO", "logger": "a1betting", "message": "Request completed", "module": "structured_logging_middleware", "function": "log_request_success", "line": 124, "request_id": "69c9fd0b-f020-4f25-bd44-b389ad542531", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro", "event_type": "request_success", "method": "GET", "url": "http://testserver/api/enhanced-ml/performance/shap-stats", "path": "/api/enhanced-ml/performance/shap-stats", "status_code": 404, "duration_ms": 0.84, "response_size": "243", "performance_category": "fast"}
------------------------------ Captured log call ------------------------------
INFO     backend.services.legacy_registry:legacy_registry.py:102 Registered legacy endpoint: /api/enhanced-ml/performance/shap-stats -> None
INFO     backend.middleware.legacy_middleware:legacy_middleware.py:177 Legacy endpoint accessed: GET /api/enhanced-ml/performance/shap-stats (count: 1)
INFO     backend.middleware.request_id_middleware:request_id_middleware.py:67 Request started: GET /api/enhanced-ml/performance/shap-stats
ERROR    backend.errors.catalog:catalog.py:304 API Error: E4040_NOT_FOUND
INFO     backend.middleware.request_id_middleware:request_id_middleware.py:92 Request completed: GET /api/enhanced-ml/performance/shap-stats - 404
INFO     backend.middleware.distributed_trace_middleware:distributed_trace_middleware.py:224 Trace completed: a4394351-5acd-418e-bb54-5ad5baf9dbe8
_____________ TestPredictionEngineRoutes.test_initialize_endpoint _____________
tests\backend\routes\test_prediction_engine_routes.py:278: in test_initialize_endpoint
    assert response.status_code in [200, 409, 500]
E   assert 404 in [200, 409, 500]
E    +  where 404 = <Response [404 Not Found]>.status_code
---------------------------- Captured stderr call -----------------------------
2025-08-23 08:04:00,668 - backend.middleware.legacy_middleware - INFO - Legacy endpoint accessed: POST /api/enhanced-ml/initialize (count: 2)
{"timestamp": "2025-08-23T13:04:00.668778", "level": "INFO", "logger": "a1betting", "message": "Request started", "module": "structured_logging_middleware", "function": "log_request_start", "line": 109, "request_id": "0b5ee3d0-01fb-46ee-8cae-a3671edd8bd1", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro", "event_type": "request_start", "method": "POST", "url": "http://testserver/api/enhanced-ml/initialize", "path": "/api/enhanced-ml/initialize", "query_params": {}, "client_ip": "testclient", "user_agent": "testclient", "content_type": null}
2025-08-23 08:04:00,669 - backend.middleware.request_id_middleware - INFO - Request started: POST /api/enhanced-ml/initialize
2025-08-23 08:04:00,669 - backend.errors.catalog - ERROR - API Error: E4040_NOT_FOUND
2025-08-23 08:04:00,669 - backend.middleware.request_id_middleware - INFO - Request completed: POST /api/enhanced-ml/initialize - 404
2025-08-23 08:04:00,669 - backend.middleware.distributed_trace_middleware - INFO - Trace completed: 7f99ba20-ec08-4f1c-be46-5a33d37272ff
{"timestamp": "2025-08-23T13:04:00.669677", "level": "INFO", "logger": "a1betting", "message": "Request completed", "module": "structured_logging_middleware", "function": "log_request_success", "line": 124, "request_id": "0b5ee3d0-01fb-46ee-8cae-a3671edd8bd1", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro", "event_type": "request_success", "method": "POST", "url": "http://testserver/api/enhanced-ml/initialize", "path": "/api/enhanced-ml/initialize", "status_code": 404, "duration_ms": 0.91, "response_size": "243", "performance_category": "fast"}
------------------------------ Captured log call ------------------------------
INFO     backend.middleware.legacy_middleware:legacy_middleware.py:177 Legacy endpoint accessed: POST /api/enhanced-ml/initialize (count: 2)
INFO     backend.middleware.request_id_middleware:request_id_middleware.py:67 Request started: POST /api/enhanced-ml/initialize
ERROR    backend.errors.catalog:catalog.py:304 API Error: E4040_NOT_FOUND
INFO     backend.middleware.request_id_middleware:request_id_middleware.py:92 Request completed: POST /api/enhanced-ml/initialize - 404
INFO     backend.middleware.distributed_trace_middleware:distributed_trace_middleware.py:224 Trace completed: 7f99ba20-ec08-4f1c-be46-5a33d37272ff
______________ TestPredictionEngineRoutes.test_shutdown_endpoint ______________
tests\backend\routes\test_prediction_engine_routes.py:289: in test_shutdown_endpoint
    assert response.status_code in [200, 500]
E   assert 404 in [200, 500]
E    +  where 404 = <Response [404 Not Found]>.status_code
---------------------------- Captured stderr call -----------------------------
2025-08-23 08:04:00,676 - backend.middleware.legacy_middleware - INFO - Legacy endpoint accessed: POST /api/enhanced-ml/shutdown (count: 2)
{"timestamp": "2025-08-23T13:04:00.676865", "level": "INFO", "logger": "a1betting", "message": "Request started", "module": "structured_logging_middleware", "function": "log_request_start", "line": 109, "request_id": "515c9fda-6773-4efc-a2da-4369b9063c1b", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro", "event_type": "request_start", "method": "POST", "url": "http://testserver/api/enhanced-ml/shutdown", "path": "/api/enhanced-ml/shutdown", "query_params": {}, "client_ip": "testclient", "user_agent": "testclient", "content_type": null}
2025-08-23 08:04:00,677 - backend.middleware.request_id_middleware - INFO - Request started: POST /api/enhanced-ml/shutdown
2025-08-23 08:04:00,677 - backend.errors.catalog - ERROR - API Error: E4040_NOT_FOUND
2025-08-23 08:04:00,677 - backend.middleware.request_id_middleware - INFO - Request completed: POST /api/enhanced-ml/shutdown - 404
2025-08-23 08:04:00,677 - backend.middleware.distributed_trace_middleware - INFO - Trace completed: f00fd334-7065-470b-9272-c7477869ddbd
{"timestamp": "2025-08-23T13:04:00.677774", "level": "INFO", "logger": "a1betting", "message": "Request completed", "module": "structured_logging_middleware", "function": "log_request_success", "line": 124, "request_id": "515c9fda-6773-4efc-a2da-4369b9063c1b", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro", "event_type": "request_success", "method": "POST", "url": "http://testserver/api/enhanced-ml/shutdown", "path": "/api/enhanced-ml/shutdown", "status_code": 404, "duration_ms": 0.92, "response_size": "243", "performance_category": "fast"}
------------------------------ Captured log call ------------------------------
INFO     backend.middleware.legacy_middleware:legacy_middleware.py:177 Legacy endpoint accessed: POST /api/enhanced-ml/shutdown (count: 2)
INFO     backend.middleware.request_id_middleware:request_id_middleware.py:67 Request started: POST /api/enhanced-ml/shutdown
ERROR    backend.errors.catalog:catalog.py:304 API Error: E4040_NOT_FOUND
INFO     backend.middleware.request_id_middleware:request_id_middleware.py:92 Request completed: POST /api/enhanced-ml/shutdown - 404
INFO     backend.middleware.distributed_trace_middleware:distributed_trace_middleware.py:224 Trace completed: f00fd334-7065-470b-9272-c7477869ddbd
_________ TestPredictionEngineRoutes.test_prediction_flow_integration _________
tests\backend\routes\test_prediction_engine_routes.py:299: in test_prediction_flow_integration
    assert health_response.status_code in [200, 503]
E   assert 404 in [200, 503]
E    +  where 404 = <Response [404 Not Found]>.status_code
---------------------------- Captured stderr call -----------------------------
2025-08-23 08:04:00,684 - backend.middleware.legacy_middleware - INFO - Legacy endpoint accessed: GET /api/enhanced-ml/health (count: 4)
{"timestamp": "2025-08-23T13:04:00.684898", "level": "INFO", "logger": "a1betting", "message": "Request started", "module": "structured_logging_middleware", "function": "log_request_start", "line": 109, "request_id": "d9fd1b96-f0e6-48b3-b36c-71327a1edd69", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro", "event_type": "request_start", "method": "GET", "url": "http://testserver/api/enhanced-ml/health", "path": "/api/enhanced-ml/health", "query_params": {}, "client_ip": "testclient", "user_agent": "testclient", "content_type": null}
2025-08-23 08:04:00,685 - backend.middleware.request_id_middleware - INFO - Request started: GET /api/enhanced-ml/health
2025-08-23 08:04:00,685 - backend.errors.catalog - ERROR - API Error: E4040_NOT_FOUND
2025-08-23 08:04:00,685 - backend.middleware.request_id_middleware - INFO - Request completed: GET /api/enhanced-ml/health - 404
2025-08-23 08:04:00,685 - backend.middleware.distributed_trace_middleware - INFO - Trace completed: afbed54e-47d2-49e6-ae3f-a89e27912580
{"timestamp": "2025-08-23T13:04:00.685891", "level": "INFO", "logger": "a1betting", "message": "Request completed", "module": "structured_logging_middleware", "function": "log_request_success", "line": 124, "request_id": "d9fd1b96-f0e6-48b3-b36c-71327a1edd69", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro", "event_type": "request_success", "method": "GET", "url": "http://testserver/api/enhanced-ml/health", "path": "/api/enhanced-ml/health", "status_code": 404, "duration_ms": 1.01, "response_size": "243", "performance_category": "fast"}
------------------------------ Captured log call ------------------------------
INFO     backend.middleware.legacy_middleware:legacy_middleware.py:177 Legacy endpoint accessed: GET /api/enhanced-ml/health (count: 4)
INFO     backend.middleware.request_id_middleware:request_id_middleware.py:67 Request started: GET /api/enhanced-ml/health
ERROR    backend.errors.catalog:catalog.py:304 API Error: E4040_NOT_FOUND
INFO     backend.middleware.request_id_middleware:request_id_middleware.py:92 Request completed: GET /api/enhanced-ml/health - 404
INFO     backend.middleware.distributed_trace_middleware:distributed_trace_middleware.py:224 Trace completed: afbed54e-47d2-49e6-ae3f-a89e27912580
_________ TestPredictionEngineRoutes.test_error_handling_consistency __________
tests\backend\routes\test_prediction_engine_routes.py:345: in test_error_handling_consistency
    assert response.status_code in [400, 422, 500]
E   assert 404 in [400, 422, 500]
E    +  where 404 = <Response [404 Not Found]>.status_code
---------------------------- Captured stderr call -----------------------------
2025-08-23 08:04:00,692 - backend.middleware.legacy_middleware - INFO - Legacy endpoint accessed: POST /api/enhanced-ml/predict/single (count: 7)
{"timestamp": "2025-08-23T13:04:00.693168", "level": "INFO", "logger": "a1betting", "message": "Request started", "module": "structured_logging_middleware", "function": "log_request_start", "line": 109, "request_id": "551eb93f-e090-4d9d-b494-c16ef42f74ef", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro", "event_type": "request_start", "method": "POST", "url": "http://testserver/api/enhanced-ml/predict/single", "path": "/api/enhanced-ml/predict/single", "query_params": {}, "client_ip": "testclient", "user_agent": "testclient", "content_type": "application/json"}
2025-08-23 08:04:00,693 - backend.middleware.request_id_middleware - INFO - Request started: POST /api/enhanced-ml/predict/single
2025-08-23 08:04:00,694 - backend.middleware.request_id_middleware - INFO - Request completed: POST /api/enhanced-ml/predict/single - 422
2025-08-23 08:04:00,694 - backend.middleware.distributed_trace_middleware - INFO - Trace completed: 99ff0752-ea3b-4f10-b37b-7fa2771c4f53
{"timestamp": "2025-08-23T13:04:00.694368", "level": "INFO", "logger": "a1betting", "message": "Request completed", "module": "structured_logging_middleware", "function": "log_request_success", "line": 124, "request_id": "551eb93f-e090-4d9d-b494-c16ef42f74ef", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro", "event_type": "request_success", "method": "POST", "url": "http://testserver/api/enhanced-ml/predict/single", "path": "/api/enhanced-ml/predict/single", "status_code": 422, "duration_ms": 1.21, "response_size": "72", "performance_category": "fast"}
2025-08-23 08:04:00,696 - backend.middleware.legacy_middleware - INFO - Legacy endpoint accessed: POST /api/enhanced-ml/predict/batch (count: 4)
{"timestamp": "2025-08-23T13:04:00.697151", "level": "INFO", "logger": "a1betting", "message": "Request started", "module": "structured_logging_middleware", "function": "log_request_start", "line": 109, "request_id": "526f4afb-c40c-4234-aea1-aef12ec57207", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro", "event_type": "request_start", "method": "POST", "url": "http://testserver/api/enhanced-ml/predict/batch", "path": "/api/enhanced-ml/predict/batch", "query_params": {}, "client_ip": "testclient", "user_agent": "testclient", "content_type": "application/json"}
2025-08-23 08:04:00,697 - backend.middleware.request_id_middleware - INFO - Request started: POST /api/enhanced-ml/predict/batch
2025-08-23 08:04:00,698 - backend.middleware.request_id_middleware - INFO - Request completed: POST /api/enhanced-ml/predict/batch - 422
2025-08-23 08:04:00,698 - backend.middleware.distributed_trace_middleware - INFO - Trace completed: 3226c64a-22fc-4a0c-8ba6-9065beabad93
{"timestamp": "2025-08-23T13:04:00.698277", "level": "INFO", "logger": "a1betting", "message": "Request completed", "module": "structured_logging_middleware", "function": "log_request_success", "line": 124, "request_id": "526f4afb-c40c-4234-aea1-aef12ec57207", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro", "event_type": "request_success", "method": "POST", "url": "http://testserver/api/enhanced-ml/predict/batch", "path": "/api/enhanced-ml/predict/batch", "status_code": 422, "duration_ms": 1.14, "response_size": "74", "performance_category": "fast"}
2025-08-23 08:04:00,700 - backend.middleware.legacy_middleware - INFO - Legacy endpoint accessed: POST /api/enhanced-ml/models/register (count: 3)
{"timestamp": "2025-08-23T13:04:00.700707", "level": "INFO", "logger": "a1betting", "message": "Request started", "module": "structured_logging_middleware", "function": "log_request_start", "line": 109, "request_id": "fee305a9-d7f7-433b-8695-ac76c962e607", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro", "event_type": "request_start", "method": "POST", "url": "http://testserver/api/enhanced-ml/models/register", "path": "/api/enhanced-ml/models/register", "query_params": {}, "client_ip": "testclient", "user_agent": "testclient", "content_type": "application/json"}
2025-08-23 08:04:00,700 - backend.middleware.request_id_middleware - INFO - Request started: POST /api/enhanced-ml/models/register
2025-08-23 08:04:00,701 - backend.errors.catalog - ERROR - API Error: E4040_NOT_FOUND
2025-08-23 08:04:00,701 - backend.middleware.request_id_middleware - INFO - Request completed: POST /api/enhanced-ml/models/register - 404
2025-08-23 08:04:00,701 - backend.middleware.distributed_trace_middleware - INFO - Trace completed: 5de6a698-3c98-4988-875f-106dfcdc4185
{"timestamp": "2025-08-23T13:04:00.701727", "level": "INFO", "logger": "a1betting", "message": "Request completed", "module": "structured_logging_middleware", "function": "log_request_success", "line": 124, "request_id": "fee305a9-d7f7-433b-8695-ac76c962e607", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro", "event_type": "request_success", "method": "POST", "url": "http://testserver/api/enhanced-ml/models/register", "path": "/api/enhanced-ml/models/register", "status_code": 404, "duration_ms": 1.03, "response_size": "243", "performance_category": "fast"}
------------------------------ Captured log call ------------------------------
INFO     backend.middleware.legacy_middleware:legacy_middleware.py:177 Legacy endpoint accessed: POST /api/enhanced-ml/predict/single (count: 7)
INFO     backend.middleware.request_id_middleware:request_id_middleware.py:67 Request started: POST /api/enhanced-ml/predict/single
INFO     backend.middleware.request_id_middleware:request_id_middleware.py:92 Request completed: POST /api/enhanced-ml/predict/single - 422
INFO     backend.middleware.distributed_trace_middleware:distributed_trace_middleware.py:224 Trace completed: 99ff0752-ea3b-4f10-b37b-7fa2771c4f53
INFO     backend.middleware.legacy_middleware:legacy_middleware.py:177 Legacy endpoint accessed: POST /api/enhanced-ml/predict/batch (count: 4)
INFO     backend.middleware.request_id_middleware:request_id_middleware.py:67 Request started: POST /api/enhanced-ml/predict/batch
INFO     backend.middleware.request_id_middleware:request_id_middleware.py:92 Request completed: POST /api/enhanced-ml/predict/batch - 422
INFO     backend.middleware.distributed_trace_middleware:distributed_trace_middleware.py:224 Trace completed: 3226c64a-22fc-4a0c-8ba6-9065beabad93
INFO     backend.middleware.legacy_middleware:legacy_middleware.py:177 Legacy endpoint accessed: POST /api/enhanced-ml/models/register (count: 3)
INFO     backend.middleware.request_id_middleware:request_id_middleware.py:67 Request started: POST /api/enhanced-ml/models/register
ERROR    backend.errors.catalog:catalog.py:304 API Error: E4040_NOT_FOUND
INFO     backend.middleware.request_id_middleware:request_id_middleware.py:92 Request completed: POST /api/enhanced-ml/models/register - 404
INFO     backend.middleware.distributed_trace_middleware:distributed_trace_middleware.py:224 Trace completed: 5de6a698-3c98-4988-875f-106dfcdc4185
_______________________ test_validation_error_response ________________________
tests\errors\test_error_taxonomy.py:44: in test_validation_error_response
    assert "validation" in error["message"].lower()
E   AssertionError: assert 'validation' in 'sport is required'
E    +  where 'sport is required' = <built-in method lower of str object at 0x00000171C8FA9630>()
E    +    where <built-in method lower of str object at 0x00000171C8FA9630> = 'Sport is required'.lower
---------------------------- Captured stderr setup ----------------------------
2025-08-23 08:04:04,731 - backend.core.app - INFO - \U0001f680 Creating A1Betting canonical app...\n2025-08-23 08:04:04,731 - backend.core.app - INFO - \u2705 Request ID correlation middleware added\n2025-08-23 08:04:04,731 - backend.core.app - INFO - \u2705 Distributed trace correlation middleware added\n2025-08-23 08:04:04,731 - backend.core.app - INFO - \u2705 Structured logging middleware added\n2025-08-23 08:04:04,731 - backend.core.app - INFO - \u2705 Prometheus metrics middleware added\n2025-08-23 08:04:04,731 - backend.core.app - INFO - \u2705 Payload guard middleware added: max_size=262144 bytes, enforce_json=True, enabled=True\n2025-08-23 08:04:04,731 - backend.middleware.rate_limit - INFO - Rate limiting disabled\n2025-08-23 08:04:04,731 - backend.core.app - INFO - \u2705 Rate limiting middleware added: 100/min, burst=200, enabled=False\n2025-08-23 08:04:04,731 - backend.core.app - INFO - \u2705 Security headers middleware added: [HSTS, CSP(report-only), COOP, COEP], x_frame_options=DENY\n2025-08-23 08:04:04,731 - backend.core.app - INFO - \u2705 Legacy endpoint middleware added for usage telemetry and deprecation controls\n2025-08-23 08:04:04,731 - backend.exceptions.handlers - INFO - \u2705 PayloadRejectionError handler registered\n2025-08-23 08:04:04,731 - backend.exceptions.handlers - INFO - \u2705 All exception handlers registered with structured error taxonomy\n2025-08-23 08:04:04,731 - backend.core.app - INFO - \u2705 Centralized exception handlers registered\n2025-08-23 08:04:04,733 - backend.core.app - INFO - \u2705 PR11 Enhanced WebSocket client route included (/ws/client)\n2025-08-23 08:04:04,737 - backend.core.app - INFO - \u2705 Auth routes also exposed at root (/auth/*) for compatibility\n2025-08-23 08:04:04,737 - backend.core.app - INFO - \u2705 Auth and users routes included (auth with /api prefix)\n2025-08-23 08:04:04,738 - backend.core.app - INFO - \u2705 Diagnostics routes included (/api/v2/diagnostics/health, /api/v2/diagnostics/system)\n2025-08-23 08:04:04,739 - backend.core.app - INFO - \u2705 Meta cache routes included (/api/v2/meta/cache-stats, /api/v2/meta/cache-health)\n2025-08-23 08:04:04,739 - backend.core.app - INFO - \u2705 Legacy meta routes included (/api/v2/meta/legacy-usage, /api/v2/meta/migration-readiness)\n2025-08-23 08:04:04,742 - backend.core.app - ERROR - \u274c Failed to register CSP report routes: Invalid args for response field! Hint: check that <class 'logging.Logger'> is a valid Pydantic field type. If you are using a return type annotation that is not a valid Pydantic field (e.g. Union[Response, dict, None]) you can disable generating the response model from the type annotation with the path operation decorator parameter response_model=None. Read more: https://fastapi.tiangolo.com/tutorial/response-model/\n2025-08-23 08:04:04,742 - backend.core.app - INFO - \u2705 Trace test routes included (/api/trace/* endpoints)\n2025-08-23 08:04:04,744 - backend.core.app - INFO - \u2705 Model inference routes included (/api/v2/models/* endpoints)\n2025-08-23 08:04:04,745 - backend.core.app - INFO - \u2705 Observability events routes included (/api/v2/observability/* endpoints)\n2025-08-23 08:04:04,746 - backend.core.app - INFO - \u2705 Admin control routes included (/api/v2/models/shadow/* and /api/v2/models/admin/* endpoints)\n2025-08-23 08:04:04,749 - backend.core.app - INFO - \u2705 Enhanced WebSocket routes included (/ws/v2/* endpoints)\n2025-08-23 08:04:04,749 - backend.core.app - INFO - \u2705 WebSocket logging routes included (/api/websocket/* endpoints)\n2025-08-23 08:04:04,750 - backend.core.app - INFO - \u2705 Version routes included (/api/version/* endpoints)\n2025-08-23 08:04:04,751 - backend.core.app - INFO - \u2705 WebVitals pipeline routes included (/api/metrics/v1/* endpoints)\n2025-08-23 08:04:04,755 - backend.core.app - INFO - \u2705 Enhanced ML routes included (/api/enhanced-ml/* endpoints)\n2025-08-23 08:04:04,755 - backend.core.app - INFO - \u2705 Fallback enhanced-ml compatibility router mounted at /api/enhanced-ml\n2025-08-23 08:04:04,760 - backend.core.app - INFO - \u2705 Consolidated PrizePicks routes included (/api/v2/prizepicks/* endpoints)\n2025-08-23 08:04:04,763 - backend.core.app - INFO - \u2705 Consolidated ML routes included (/api/v2/ml/* endpoints)\n2025-08-23 08:04:04,765 - backend.core.app - ERROR - \u274c Failed to register consolidated Admin routes: parameter without a default follows parameter with a default (consolidated_admin.py, line 165)\n2025-08-23 08:04:04,769 - backend.core.app - INFO - \u2705 Odds & Line Movement routes included (/v1/odds/* endpoints)\n2025-08-23 08:04:04,770 - backend.core.app - INFO - \u2705 Advanced-Kelly compatibility router mounted at /api/advanced-kelly\n2025-08-23 08:04:04,772 - backend.core.app - ERROR - \u274c Failed to register Risk Management & Personalization routes: 'NoneType' object has no attribute 'alert_evaluation_interval_seconds'\n2025-08-23 08:04:04,774 - backend.core.app - INFO - \u2705 Dependencies Health routes included (/api/dependencies/* endpoints)\n2025-08-23 08:04:04,778 - backend.core.app - INFO - \u2705 Provider Resilience routes included (/api/provider-resilience/* endpoints)\n2025-08-23 08:04:04,779 - backend.core.app - INFO - \u2705 System capabilities routes included (/api/system/* endpoints)\n2025-08-23 08:04:04,780 - backend.core.app - INFO - \u2705 Real-time market streaming routes included (/streaming/* endpoints)\n2025-08-23 08:04:04,781 - backend.core.app - INFO - \u2705 Security HEAD endpoints included (/api/* HEAD endpoints)\n2025-08-23 08:04:04,783 - backend.core.app - INFO - \u2705 ML Model Registry routes included (/api/models/* endpoints)\n2025-08-23 08:04:04,784 - backend.core.app - INFO - \u2705 Data ingestion routes included (/api/v1/ingestion/* endpoints)\n2025-08-23 08:04:04,787 - backend.core.app - INFO - \u2705 Enterprise model registry routes included (/api/models/enterprise/* endpoints)\n2025-08-23 08:04:04,791 - backend.core.app - INFO - \u2705 Alert engine routes included (/api/alert-engine/* endpoints)\n2025-08-23 08:04:04,795 - backend.core.app - INFO - \u2705 PropFinder routes included (/api/propfinder/* endpoints)\n2025-08-23 08:04:04,796 - backend.core.app - WARNING - \u26a0\ufe0f Could not import multiple_sportsbook_routes: cannot import name 'RateLimiter' from 'backend.middleware.rate_limit' (C:\\Users\\bcmad\\Downloads\\A1Betting7-13.2\\backend\\middleware\\rate_limit.py)\n2025-08-23 08:04:04,799 - backend.core.app - INFO - \u2705 Sportsbook compatibility router mounted at /api/sportsbook\n2025-08-23 08:04:04,799 - backend.core.app - INFO - \U0001f50d Bootstrap validation scheduled on startup\n2025-08-23 08:04:04,799 - backend.core.app - INFO - \U0001f3e5 Health endpoints normalized: /api/health, /health, /api/v2/health -> identical envelope format\n2025-08-23 08:04:04,799 - backend.core.app - INFO - \u2705 A1Betting canonical app created successfully
----------------------------- Captured log setup ------------------------------
INFO     backend.core.app:app.py:65 \U0001f680 Creating A1Betting canonical app...\nINFO     backend.core.app:app.py:104 \u2705 Request ID correlation middleware added\nINFO     backend.core.app:app.py:114 \u2705 Distributed trace correlation middleware added\nINFO     backend.core.app:app.py:126 \u2705 Structured logging middleware added\nINFO     backend.core.app:app.py:146 \u2705 Prometheus metrics middleware added\nINFO     backend.core.app:app.py:167 \u2705 Payload guard middleware added: max_size=262144 bytes, enforce_json=True, enabled=True\nINFO     backend.middleware.rate_limit:rate_limit.py:90 Rate limiting disabled\nINFO     backend.core.app:app.py:202 \u2705 Rate limiting middleware added: 100/min, burst=200, enabled=False\nINFO     backend.core.app:app.py:244 \u2705 Security headers middleware added: [HSTS, CSP(report-only), COOP, COEP], x_frame_options=DENY\nINFO     backend.core.app:app.py:259 \u2705 Legacy endpoint middleware added for usage telemetry and deprecation controls\nINFO     backend.exceptions.handlers:handlers.py:235 \u2705 PayloadRejectionError handler registered\nINFO     backend.exceptions.handlers:handlers.py:250 \u2705 All exception handlers registered with structured error taxonomy\nINFO     backend.core.app:app.py:269 \u2705 Centralized exception handlers registered\nINFO     backend.core.app:app.py:332 \u2705 PR11 Enhanced WebSocket client route included (/ws/client)\nINFO     backend.core.app:app.py:702 \u2705 Auth routes also exposed at root (/auth/*) for compatibility\nINFO     backend.core.app:app.py:706 \u2705 Auth and users routes included (auth with /api prefix)\nINFO     backend.core.app:app.py:714 \u2705 Diagnostics routes included (/api/v2/diagnostics/health, /api/v2/diagnostics/system)\nINFO     backend.core.app:app.py:763 \u2705 Meta cache routes included (/api/v2/meta/cache-stats, /api/v2/meta/cache-health)\nINFO     backend.core.app:app.py:773 \u2705 Legacy meta routes included (/api/v2/meta/legacy-usage, /api/v2/meta/migration-readiness)\nERROR    backend.core.app:app.py:788 \u274c Failed to register CSP report routes: Invalid args for response field! Hint: check that <class 'logging.Logger'> is a valid Pydantic field type. If you are using a return type annotation that is not a valid Pydantic field (e.g. Union[Response, dict, None]) you can disable generating the response model from the type annotation with the path operation decorator parameter response_model=None. Read more: https://fastapi.tiangolo.com/tutorial/response-model/\nINFO     backend.core.app:app.py:794 \u2705 Trace test routes included (/api/trace/* endpoints)\nINFO     backend.core.app:app.py:804 \u2705 Model inference routes included (/api/v2/models/* endpoints)\nINFO     backend.core.app:app.py:814 \u2705 Observability events routes included (/api/v2/observability/* endpoints)\nINFO     backend.core.app:app.py:824 \u2705 Admin control routes included (/api/v2/models/shadow/* and /api/v2/models/admin/* endpoints)\nINFO     backend.core.app:app.py:834 \u2705 Enhanced WebSocket routes included (/ws/v2/* endpoints)\nINFO     backend.core.app:app.py:844 \u2705 WebSocket logging routes included (/api/websocket/* endpoints)\nINFO     backend.core.app:app.py:854 \u2705 Version routes included (/api/version/* endpoints)\nINFO     backend.core.app:app.py:864 \u2705 WebVitals pipeline routes included (/api/metrics/v1/* endpoints)\nINFO     backend.core.app:app.py:874 \u2705 Enhanced ML routes included (/api/enhanced-ml/* endpoints)\nINFO     backend.core.app:app.py:986 \u2705 Fallback enhanced-ml compatibility router mounted at /api/enhanced-ml\nINFO     backend.core.app:app.py:995 \u2705 Consolidated PrizePicks routes included (/api/v2/prizepicks/* endpoints)\nINFO     backend.core.app:app.py:1005 \u2705 Consolidated ML routes included (/api/v2/ml/* endpoints)\nERROR    backend.core.app:app.py:1019 \u274c Failed to register consolidated Admin routes: parameter without a default follows parameter with a default (consolidated_admin.py, line 165)\nINFO     backend.core.app:app.py:1025 \u2705 Odds & Line Movement routes included (/v1/odds/* endpoints)\nINFO     backend.core.app:app.py:1066 \u2705 Advanced-Kelly compatibility router mounted at /api/advanced-kelly\nERROR    backend.core.app:app.py:1078 \u274c Failed to register Risk Management & Personalization routes: 'NoneType' object has no attribute 'alert_evaluation_interval_seconds'\nINFO     backend.core.app:app.py:1084 \u2705 Dependencies Health routes included (/api/dependencies/* endpoints)\nINFO     backend.core.app:app.py:1094 \u2705 Provider Resilience routes included (/api/provider-resilience/* endpoints)\nINFO     backend.core.app:app.py:1104 \u2705 System capabilities routes included (/api/system/* endpoints)\nINFO     backend.core.app:app.py:1114 \u2705 Real-time market streaming routes included (/streaming/* endpoints)\nINFO     backend.core.app:app.py:1124 \u2705 Security HEAD endpoints included (/api/* HEAD endpoints)\nINFO     backend.core.app:app.py:1134 \u2705 ML Model Registry routes included (/api/models/* endpoints)\nINFO     backend.core.app:app.py:1144 \u2705 Data ingestion routes included (/api/v1/ingestion/* endpoints)\nINFO     backend.core.app:app.py:1154 \u2705 Enterprise model registry routes included (/api/models/enterprise/* endpoints)\nINFO     backend.core.app:app.py:1199 \u2705 Alert engine routes included (/api/alert-engine/* endpoints)\nINFO     backend.core.app:app.py:1209 \u2705 PropFinder routes included (/api/propfinder/* endpoints)\nWARNING  backend.core.app:app.py:1221 \u26a0\ufe0f Could not import multiple_sportsbook_routes: cannot import name 'RateLimiter' from 'backend.middleware.rate_limit' (C:\\Users\\bcmad\\Downloads\\A1Betting7-13.2\\backend\\middleware\\rate_limit.py)\nINFO     backend.core.app:app.py:1495 \u2705 Sportsbook compatibility router mounted at /api/sportsbook\nINFO     backend.core.app:app.py:1527 \U0001f50d Bootstrap validation scheduled on startup\nINFO     backend.core.app:app.py:1535 \U0001f3e5 Health endpoints normalized: /api/health, /health, /api/v2/health -> identical envelope format\nINFO     backend.core.app:app.py:1536 \u2705 A1Betting canonical app created successfully
---------------------------- Captured stderr call -----------------------------
2025-08-23 08:04:04,802 - backend.middleware.rate_limit - INFO - Rate limiting disabled\n2025-08-23 08:04:04,802 - backend.middleware.security_headers - INFO - \u2705 Security headers middleware enabled: CSP=report-only, HSTS=True, strict_mode=False\n2025-08-23 08:04:04,802 - backend.middleware.legacy_middleware - INFO - Registered known legacy endpoints with forwarding paths\n2025-08-23 08:04:04,802 - backend.middleware.legacy_middleware - INFO - Legacy middleware initialized\n{"timestamp": "2025-08-23T13:04:04.802841", "level": "INFO", "logger": "a1betting", "message": "Request started", "module": "structured_logging_middleware", "function": "log_request_start", "line": 109, "request_id": "d0f87703-cf1b-4f8e-8b80-87dc9e6d7855", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro", "event_type": "request_start", "method": "POST", "url": "http://testserver/api/v2/sports/activate", "path": "/api/v2/sports/activate", "query_params": {}, "client_ip": "testclient", "user_agent": "testclient", "content_type": "application/json"}\n2025-08-23 08:04:04,803 - backend.middleware.request_id_middleware - INFO - Request started: POST /api/v2/sports/activate\n2025-08-23 08:04:04,803 - backend.core.app - INFO - [API] /api/v2/sports/activate called\n2025-08-23 08:04:04,803 - backend.errors.catalog - ERROR - API Error: E1000_VALIDATION\n2025-08-23 08:04:04,803 - backend.exceptions.handlers - INFO - API Error handled: E1000_VALIDATION\n2025-08-23 08:04:04,803 - backend.middleware.request_id_middleware - INFO - Request completed: POST /api/v2/sports/activate - 400\n2025-08-23 08:04:04,804 - backend.middleware.distributed_trace_middleware - INFO - Trace completed: bc4c571f-fa09-4dce-b1be-9f1a21665840\n{"timestamp": "2025-08-23T13:04:04.804086", "level": "INFO", "logger": "a1betting", "message": "Request completed", "module": "structured_logging_middleware", "function": "log_request_success", "line": 124, "request_id": "d0f87703-cf1b-4f8e-8b80-87dc9e6d7855", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro", "event_type": "request_success", "method": "POST", "url": "http://testserver/api/v2/sports/activate", "path": "/api/v2/sports/activate", "status_code": 400, "duration_ms": 1.26, "response_size": "280", "performance_category": "fast"}
------------------------------ Captured log call ------------------------------
INFO     backend.middleware.rate_limit:rate_limit.py:90 Rate limiting disabled\nINFO     backend.middleware.security_headers:security_headers.py:71 \u2705 Security headers middleware enabled: CSP=report-only, HSTS=True, strict_mode=False\nINFO     backend.middleware.legacy_middleware:legacy_middleware.py:68 Registered known legacy endpoints with forwarding paths\nINFO     backend.middleware.legacy_middleware:legacy_middleware.py:44 Legacy middleware initialized\nINFO     backend.middleware.request_id_middleware:request_id_middleware.py:67 Request started: POST /api/v2/sports/activate\nINFO     backend.core.app:app.py:612 [API] /api/v2/sports/activate called\nERROR    backend.errors.catalog:catalog.py:304 API Error: E1000_VALIDATION\nINFO     backend.exceptions.handlers:handlers.py:91 API Error handled: E1000_VALIDATION\nINFO     backend.middleware.request_id_middleware:request_id_middleware.py:92 Request completed: POST /api/v2/sports/activate - 400\nINFO     backend.middleware.distributed_trace_middleware:distributed_trace_middleware.py:224 Trace completed: bc4c571f-fa09-4dce-b1be-9f1a21665840
_______________________ test_internal_error_simulation ________________________
tests\errors\test_error_taxonomy.py:118: in test_internal_error_simulation
    assert health_data["status"] == "healthy"
E   AssertionError: assert 'ok' == 'healthy'
E     
E     - healthy
E     + ok
---------------------------- Captured stderr setup ----------------------------
2025-08-23 08:04:04,957 - backend.core.app - INFO - \U0001f680 Creating A1Betting canonical app...\n2025-08-23 08:04:04,958 - backend.core.app - INFO - \u2705 Request ID correlation middleware added\n2025-08-23 08:04:04,958 - backend.core.app - INFO - \u2705 Distributed trace correlation middleware added\n2025-08-23 08:04:04,958 - backend.core.app - INFO - \u2705 Structured logging middleware added\n2025-08-23 08:04:04,958 - backend.core.app - INFO - \u2705 Prometheus metrics middleware added\n2025-08-23 08:04:04,958 - backend.core.app - INFO - \u2705 Payload guard middleware added: max_size=262144 bytes, enforce_json=True, enabled=True\n2025-08-23 08:04:04,958 - backend.middleware.rate_limit - INFO - Rate limiting disabled\n2025-08-23 08:04:04,958 - backend.core.app - INFO - \u2705 Rate limiting middleware added: 100/min, burst=200, enabled=False\n2025-08-23 08:04:04,958 - backend.core.app - INFO - \u2705 Security headers middleware added: [HSTS, CSP(report-only), COOP, COEP], x_frame_options=DENY\n2025-08-23 08:04:04,958 - backend.core.app - INFO - \u2705 Legacy endpoint middleware added for usage telemetry and deprecation controls\n2025-08-23 08:04:04,958 - backend.exceptions.handlers - INFO - \u2705 PayloadRejectionError handler registered\n2025-08-23 08:04:04,958 - backend.exceptions.handlers - INFO - \u2705 All exception handlers registered with structured error taxonomy\n2025-08-23 08:04:04,958 - backend.core.app - INFO - \u2705 Centralized exception handlers registered\n2025-08-23 08:04:04,959 - backend.core.app - INFO - \u2705 PR11 Enhanced WebSocket client route included (/ws/client)\n2025-08-23 08:04:04,966 - backend.core.app - INFO - \u2705 Auth routes also exposed at root (/auth/*) for compatibility\n2025-08-23 08:04:04,966 - backend.core.app - INFO - \u2705 Auth and users routes included (auth with /api prefix)\n2025-08-23 08:04:04,967 - backend.core.app - INFO - \u2705 Diagnostics routes included (/api/v2/diagnostics/health, /api/v2/diagnostics/system)\n2025-08-23 08:04:04,968 - backend.core.app - INFO - \u2705 Meta cache routes included (/api/v2/meta/cache-stats, /api/v2/meta/cache-health)\n2025-08-23 08:04:04,969 - backend.core.app - INFO - \u2705 Legacy meta routes included (/api/v2/meta/legacy-usage, /api/v2/meta/migration-readiness)\n2025-08-23 08:04:04,971 - backend.core.app - ERROR - \u274c Failed to register CSP report routes: Invalid args for response field! Hint: check that <class 'logging.Logger'> is a valid Pydantic field type. If you are using a return type annotation that is not a valid Pydantic field (e.g. Union[Response, dict, None]) you can disable generating the response model from the type annotation with the path operation decorator parameter response_model=None. Read more: https://fastapi.tiangolo.com/tutorial/response-model/\n2025-08-23 08:04:04,971 - backend.core.app - INFO - \u2705 Trace test routes included (/api/trace/* endpoints)\n2025-08-23 08:04:04,973 - backend.core.app - INFO - \u2705 Model inference routes included (/api/v2/models/* endpoints)\n2025-08-23 08:04:04,975 - backend.core.app - INFO - \u2705 Observability events routes included (/api/v2/observability/* endpoints)\n2025-08-23 08:04:04,976 - backend.core.app - INFO - \u2705 Admin control routes included (/api/v2/models/shadow/* and /api/v2/models/admin/* endpoints)\n2025-08-23 08:04:04,978 - backend.core.app - INFO - \u2705 Enhanced WebSocket routes included (/ws/v2/* endpoints)\n2025-08-23 08:04:04,979 - backend.core.app - INFO - \u2705 WebSocket logging routes included (/api/websocket/* endpoints)\n2025-08-23 08:04:04,980 - backend.core.app - INFO - \u2705 Version routes included (/api/version/* endpoints)\n2025-08-23 08:04:04,980 - backend.core.app - INFO - \u2705 WebVitals pipeline routes included (/api/metrics/v1/* endpoints)\n2025-08-23 08:04:04,984 - backend.core.app - INFO - \u2705 Enhanced ML routes included (/api/enhanced-ml/* endpoints)\n2025-08-23 08:04:04,985 - backend.core.app - INFO - \u2705 Fallback enhanced-ml compatibility router mounted at /api/enhanced-ml\n2025-08-23 08:04:04,990 - backend.core.app - INFO - \u2705 Consolidated PrizePicks routes included (/api/v2/prizepicks/* endpoints)\n2025-08-23 08:04:04,993 - backend.core.app - INFO - \u2705 Consolidated ML routes included (/api/v2/ml/* endpoints)\n2025-08-23 08:04:04,995 - backend.core.app - ERROR - \u274c Failed to register consolidated Admin routes: parameter without a default follows parameter with a default (consolidated_admin.py, line 165)\n2025-08-23 08:04:04,998 - backend.core.app - INFO - \u2705 Odds & Line Movement routes included (/v1/odds/* endpoints)\n2025-08-23 08:04:04,999 - backend.core.app - INFO - \u2705 Advanced-Kelly compatibility router mounted at /api/advanced-kelly\n2025-08-23 08:04:05,002 - backend.core.app - ERROR - \u274c Failed to register Risk Management & Personalization routes: 'NoneType' object has no attribute 'alert_evaluation_interval_seconds'\n2025-08-23 08:04:05,003 - backend.core.app - INFO - \u2705 Dependencies Health routes included (/api/dependencies/* endpoints)\n2025-08-23 08:04:05,005 - backend.core.app - INFO - \u2705 Provider Resilience routes included (/api/provider-resilience/* endpoints)\n2025-08-23 08:04:05,007 - backend.core.app - INFO - \u2705 System capabilities routes included (/api/system/* endpoints)\n2025-08-23 08:04:05,008 - backend.core.app - INFO - \u2705 Real-time market streaming routes included (/streaming/* endpoints)\n2025-08-23 08:04:05,009 - backend.core.app - INFO - \u2705 Security HEAD endpoints included (/api/* HEAD endpoints)\n2025-08-23 08:04:05,011 - backend.core.app - INFO - \u2705 ML Model Registry routes included (/api/models/* endpoints)\n2025-08-23 08:04:05,011 - backend.core.app - INFO - \u2705 Data ingestion routes included (/api/v1/ingestion/* endpoints)\n2025-08-23 08:04:05,015 - backend.core.app - INFO - \u2705 Enterprise model registry routes included (/api/models/enterprise/* endpoints)\n2025-08-23 08:04:05,019 - backend.core.app - INFO - \u2705 Alert engine routes included (/api/alert-engine/* endpoints)\n2025-08-23 08:04:05,023 - backend.core.app - INFO - \u2705 PropFinder routes included (/api/propfinder/* endpoints)\n2025-08-23 08:04:05,023 - backend.core.app - WARNING - \u26a0\ufe0f Could not import multiple_sportsbook_routes: cannot import name 'RateLimiter' from 'backend.middleware.rate_limit' (C:\\Users\\bcmad\\Downloads\\A1Betting7-13.2\\backend\\middleware\\rate_limit.py)\n2025-08-23 08:04:05,026 - backend.core.app - INFO - \u2705 Sportsbook compatibility router mounted at /api/sportsbook\n2025-08-23 08:04:05,026 - backend.core.app - INFO - \U0001f50d Bootstrap validation scheduled on startup\n2025-08-23 08:04:05,026 - backend.core.app - INFO - \U0001f3e5 Health endpoints normalized: /api/health, /health, /api/v2/health -> identical envelope format\n2025-08-23 08:04:05,026 - backend.core.app - INFO - \u2705 A1Betting canonical app created successfully
----------------------------- Captured log setup ------------------------------
INFO     backend.core.app:app.py:65 \U0001f680 Creating A1Betting canonical app...\nINFO     backend.core.app:app.py:104 \u2705 Request ID correlation middleware added\nINFO     backend.core.app:app.py:114 \u2705 Distributed trace correlation middleware added\nINFO     backend.core.app:app.py:126 \u2705 Structured logging middleware added\nINFO     backend.core.app:app.py:146 \u2705 Prometheus metrics middleware added\nINFO     backend.core.app:app.py:167 \u2705 Payload guard middleware added: max_size=262144 bytes, enforce_json=True, enabled=True\nINFO     backend.middleware.rate_limit:rate_limit.py:90 Rate limiting disabled\nINFO     backend.core.app:app.py:202 \u2705 Rate limiting middleware added: 100/min, burst=200, enabled=False\nINFO     backend.core.app:app.py:244 \u2705 Security headers middleware added: [HSTS, CSP(report-only), COOP, COEP], x_frame_options=DENY\nINFO     backend.core.app:app.py:259 \u2705 Legacy endpoint middleware added for usage telemetry and deprecation controls\nINFO     backend.exceptions.handlers:handlers.py:235 \u2705 PayloadRejectionError handler registered\nINFO     backend.exceptions.handlers:handlers.py:250 \u2705 All exception handlers registered with structured error taxonomy\nINFO     backend.core.app:app.py:269 \u2705 Centralized exception handlers registered\nINFO     backend.core.app:app.py:332 \u2705 PR11 Enhanced WebSocket client route included (/ws/client)\nINFO     backend.core.app:app.py:702 \u2705 Auth routes also exposed at root (/auth/*) for compatibility\nINFO     backend.core.app:app.py:706 \u2705 Auth and users routes included (auth with /api prefix)\nINFO     backend.core.app:app.py:714 \u2705 Diagnostics routes included (/api/v2/diagnostics/health, /api/v2/diagnostics/system)\nINFO     backend.core.app:app.py:763 \u2705 Meta cache routes included (/api/v2/meta/cache-stats, /api/v2/meta/cache-health)\nINFO     backend.core.app:app.py:773 \u2705 Legacy meta routes included (/api/v2/meta/legacy-usage, /api/v2/meta/migration-readiness)\nERROR    backend.core.app:app.py:788 \u274c Failed to register CSP report routes: Invalid args for response field! Hint: check that <class 'logging.Logger'> is a valid Pydantic field type. If you are using a return type annotation that is not a valid Pydantic field (e.g. Union[Response, dict, None]) you can disable generating the response model from the type annotation with the path operation decorator parameter response_model=None. Read more: https://fastapi.tiangolo.com/tutorial/response-model/\nINFO     backend.core.app:app.py:794 \u2705 Trace test routes included (/api/trace/* endpoints)\nINFO     backend.core.app:app.py:804 \u2705 Model inference routes included (/api/v2/models/* endpoints)\nINFO     backend.core.app:app.py:814 \u2705 Observability events routes included (/api/v2/observability/* endpoints)\nINFO     backend.core.app:app.py:824 \u2705 Admin control routes included (/api/v2/models/shadow/* and /api/v2/models/admin/* endpoints)\nINFO     backend.core.app:app.py:834 \u2705 Enhanced WebSocket routes included (/ws/v2/* endpoints)\nINFO     backend.core.app:app.py:844 \u2705 WebSocket logging routes included (/api/websocket/* endpoints)\nINFO     backend.core.app:app.py:854 \u2705 Version routes included (/api/version/* endpoints)\nINFO     backend.core.app:app.py:864 \u2705 WebVitals pipeline routes included (/api/metrics/v1/* endpoints)\nINFO     backend.core.app:app.py:874 \u2705 Enhanced ML routes included (/api/enhanced-ml/* endpoints)\nINFO     backend.core.app:app.py:986 \u2705 Fallback enhanced-ml compatibility router mounted at /api/enhanced-ml\nINFO     backend.core.app:app.py:995 \u2705 Consolidated PrizePicks routes included (/api/v2/prizepicks/* endpoints)\nINFO     backend.core.app:app.py:1005 \u2705 Consolidated ML routes included (/api/v2/ml/* endpoints)\nERROR    backend.core.app:app.py:1019 \u274c Failed to register consolidated Admin routes: parameter without a default follows parameter with a default (consolidated_admin.py, line 165)\nINFO     backend.core.app:app.py:1025 \u2705 Odds & Line Movement routes included (/v1/odds/* endpoints)\nINFO     backend.core.app:app.py:1066 \u2705 Advanced-Kelly compatibility router mounted at /api/advanced-kelly\nERROR    backend.core.app:app.py:1078 \u274c Failed to register Risk Management & Personalization routes: 'NoneType' object has no attribute 'alert_evaluation_interval_seconds'\nINFO     backend.core.app:app.py:1084 \u2705 Dependencies Health routes included (/api/dependencies/* endpoints)\nINFO     backend.core.app:app.py:1094 \u2705 Provider Resilience routes included (/api/provider-resilience/* endpoints)\nINFO     backend.core.app:app.py:1104 \u2705 System capabilities routes included (/api/system/* endpoints)\nINFO     backend.core.app:app.py:1114 \u2705 Real-time market streaming routes included (/streaming/* endpoints)\nINFO     backend.core.app:app.py:1124 \u2705 Security HEAD endpoints included (/api/* HEAD endpoints)\nINFO     backend.core.app:app.py:1134 \u2705 ML Model Registry routes included (/api/models/* endpoints)\nINFO     backend.core.app:app.py:1144 \u2705 Data ingestion routes included (/api/v1/ingestion/* endpoints)\nINFO     backend.core.app:app.py:1154 \u2705 Enterprise model registry routes included (/api/models/enterprise/* endpoints)\nINFO     backend.core.app:app.py:1199 \u2705 Alert engine routes included (/api/alert-engine/* endpoints)\nINFO     backend.core.app:app.py:1209 \u2705 PropFinder routes included (/api/propfinder/* endpoints)\nWARNING  backend.core.app:app.py:1221 \u26a0\ufe0f Could not import multiple_sportsbook_routes: cannot import name 'RateLimiter' from 'backend.middleware.rate_limit' (C:\\Users\\bcmad\\Downloads\\A1Betting7-13.2\\backend\\middleware\\rate_limit.py)\nINFO     backend.core.app:app.py:1495 \u2705 Sportsbook compatibility router mounted at /api/sportsbook\nINFO     backend.core.app:app.py:1527 \U0001f50d Bootstrap validation scheduled on startup\nINFO     backend.core.app:app.py:1535 \U0001f3e5 Health endpoints normalized: /api/health, /health, /api/v2/health -> identical envelope format\nINFO     backend.core.app:app.py:1536 \u2705 A1Betting canonical app created successfully
---------------------------- Captured stderr call -----------------------------
2025-08-23 08:04:05,030 - backend.middleware.rate_limit - INFO - Rate limiting disabled\n2025-08-23 08:04:05,030 - backend.middleware.security_headers - INFO - \u2705 Security headers middleware enabled: CSP=report-only, HSTS=True, strict_mode=False\n2025-08-23 08:04:05,030 - backend.middleware.legacy_middleware - INFO - Registered known legacy endpoints with forwarding paths\n2025-08-23 08:04:05,030 - backend.middleware.legacy_middleware - INFO - Legacy middleware initialized\n2025-08-23 08:04:05,030 - backend.middleware.legacy_middleware - INFO - Legacy endpoint accessed: GET /api/health (count: 4)\n{"timestamp": "2025-08-23T13:04:05.030540", "level": "INFO", "logger": "a1betting", "message": "Request started", "module": "structured_logging_middleware", "function": "log_request_start", "line": 109, "request_id": "7d27091e-527b-42e6-8550-2253fcaeb745", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro", "event_type": "request_start", "method": "GET", "url": "http://testserver/api/health", "path": "/api/health", "query_params": {}, "client_ip": "testclient", "user_agent": "testclient", "content_type": null}\n2025-08-23 08:04:05,030 - backend.middleware.request_id_middleware - INFO - Request started: GET /api/health\n2025-08-23 08:04:05,030 - backend.core.app - INFO - [API] /api/health called (DEPRECATED)\n2025-08-23 08:04:05,031 - backend.middleware.request_id_middleware - INFO - Request completed: GET /api/health - 200\n2025-08-23 08:04:05,031 - backend.middleware.distributed_trace_middleware - INFO - Trace completed: c26f4b51-2147-4aaa-b8f5-4085151019b2\n{"timestamp": "2025-08-23T13:04:05.031231", "level": "INFO", "logger": "a1betting", "message": "Request completed", "module": "structured_logging_middleware", "function": "log_request_success", "line": 124, "request_id": "7d27091e-527b-42e6-8550-2253fcaeb745", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro", "event_type": "request_success", "method": "GET", "url": "http://testserver/api/health", "path": "/api/health", "status_code": 200, "duration_ms": 0.71, "response_size": "277", "performance_category": "fast"}
------------------------------ Captured log call ------------------------------
INFO     backend.middleware.rate_limit:rate_limit.py:90 Rate limiting disabled\nINFO     backend.middleware.security_headers:security_headers.py:71 \u2705 Security headers middleware enabled: CSP=report-only, HSTS=True, strict_mode=False\nINFO     backend.middleware.legacy_middleware:legacy_middleware.py:68 Registered known legacy endpoints with forwarding paths\nINFO     backend.middleware.legacy_middleware:legacy_middleware.py:44 Legacy middleware initialized\nINFO     backend.middleware.legacy_middleware:legacy_middleware.py:177 Legacy endpoint accessed: GET /api/health (count: 4)\nINFO     backend.middleware.request_id_middleware:request_id_middleware.py:67 Request started: GET /api/health\nINFO     backend.core.app:app.py:350 [API] /api/health called (DEPRECATED)\nINFO     backend.middleware.request_id_middleware:request_id_middleware.py:92 Request completed: GET /api/health - 200\nINFO     backend.middleware.distributed_trace_middleware:distributed_trace_middleware.py:224 Trace completed: c26f4b51-2147-4aaa-b8f5-4085151019b2
____________ TestIngestionEndpoints.test_run_nba_ingestion_success ____________
tests\ingestion\test_ingestion_endpoints.py:91: in test_run_nba_ingestion_success
    assert data["status"] == "success"
           ^^^^^^^^^^^^^^
E   KeyError: 'status'
---------------------------- Captured stderr call -----------------------------
2025-08-23 08:04:05,639 - backend.middleware.legacy_middleware - INFO - Legacy endpoint accessed: POST /api/v1/ingestion/nba/run (count: 2)
{"timestamp": "2025-08-23T13:04:05.639492", "level": "INFO", "logger": "a1betting", "message": "Request started", "module": "structured_logging_middleware", "function": "log_request_start", "line": 109, "request_id": "7c070d47-7b87-4b6e-b29c-1aace24b6401", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro", "event_type": "request_start", "method": "POST", "url": "http://testserver/api/v1/ingestion/nba/run", "path": "/api/v1/ingestion/nba/run", "query_params": {}, "client_ip": "testclient", "user_agent": "testclient", "content_type": null}
2025-08-23 08:04:05,639 - backend.middleware.request_id_middleware - INFO - Request started: POST /api/v1/ingestion/nba/run
2025-08-23 08:04:05,640 - backend.ingestion.routes.ingestion_routes - INFO - NBA ingestion requested with limit=None, allow_upsert=True
2025-08-23 08:04:05,640 - backend.ingestion.routes.ingestion_routes - INFO - NBA ingestion successful: 50 props, 10 changes
2025-08-23 08:04:05,640 - backend.middleware.request_id_middleware - INFO - Request completed: POST /api/v1/ingestion/nba/run - 200
2025-08-23 08:04:05,640 - backend.middleware.distributed_trace_middleware - INFO - Trace completed: 07aa7349-00b3-4bc8-be6e-c9cfdca3eb13
{"timestamp": "2025-08-23T13:04:05.640855", "level": "INFO", "logger": "a1betting", "message": "Request completed", "module": "structured_logging_middleware", "function": "log_request_success", "line": 124, "request_id": "7c070d47-7b87-4b6e-b29c-1aace24b6401", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro", "event_type": "request_success", "method": "POST", "url": "http://testserver/api/v1/ingestion/nba/run", "path": "/api/v1/ingestion/nba/run", "status_code": 200, "duration_ms": 1.38, "response_size": "507", "performance_category": "fast"}
------------------------------ Captured log call ------------------------------
INFO     backend.middleware.legacy_middleware:legacy_middleware.py:177 Legacy endpoint accessed: POST /api/v1/ingestion/nba/run (count: 2)
INFO     backend.middleware.request_id_middleware:request_id_middleware.py:67 Request started: POST /api/v1/ingestion/nba/run
INFO     backend.ingestion.routes.ingestion_routes:ingestion_routes.py:73 NBA ingestion requested with limit=None, allow_upsert=True
INFO     backend.ingestion.routes.ingestion_routes:ingestion_routes.py:89 NBA ingestion successful: 50 props, 10 changes
INFO     backend.middleware.request_id_middleware:request_id_middleware.py:92 Request completed: POST /api/v1/ingestion/nba/run - 200
INFO     backend.middleware.distributed_trace_middleware:distributed_trace_middleware.py:224 Trace completed: 07aa7349-00b3-4bc8-be6e-c9cfdca3eb13
________ TestIngestionEndpoints.test_run_nba_ingestion_partial_success ________
tests\ingestion\test_ingestion_endpoints.py:118: in test_run_nba_ingestion_partial_success
    assert data["status"] == "partial"
           ^^^^^^^^^^^^^^
E   KeyError: 'status'
---------------------------- Captured stderr call -----------------------------
2025-08-23 08:04:05,648 - backend.middleware.legacy_middleware - INFO - Legacy endpoint accessed: POST /api/v1/ingestion/nba/run (count: 3)
{"timestamp": "2025-08-23T13:04:05.648823", "level": "INFO", "logger": "a1betting", "message": "Request started", "module": "structured_logging_middleware", "function": "log_request_start", "line": 109, "request_id": "1e1451b8-22f9-4d72-8c10-a057df05eb07", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro", "event_type": "request_start", "method": "POST", "url": "http://testserver/api/v1/ingestion/nba/run", "path": "/api/v1/ingestion/nba/run", "query_params": {}, "client_ip": "testclient", "user_agent": "testclient", "content_type": null}
2025-08-23 08:04:05,649 - backend.middleware.request_id_middleware - INFO - Request started: POST /api/v1/ingestion/nba/run
2025-08-23 08:04:05,649 - backend.ingestion.routes.ingestion_routes - INFO - NBA ingestion requested with limit=None, allow_upsert=True
2025-08-23 08:04:05,649 - backend.ingestion.routes.ingestion_routes - WARNING - NBA ingestion partial: 50 props, 2 errors
2025-08-23 08:04:05,650 - backend.middleware.request_id_middleware - INFO - Request completed: POST /api/v1/ingestion/nba/run - 200
2025-08-23 08:04:05,650 - backend.middleware.distributed_trace_middleware - INFO - Trace completed: 0cd0b654-b169-4a89-9bab-5d2815356bb3
{"timestamp": "2025-08-23T13:04:05.650296", "level": "INFO", "logger": "a1betting", "message": "Request completed", "module": "structured_logging_middleware", "function": "log_request_success", "line": 124, "request_id": "1e1451b8-22f9-4d72-8c10-a057df05eb07", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro", "event_type": "request_success", "method": "POST", "url": "http://testserver/api/v1/ingestion/nba/run", "path": "/api/v1/ingestion/nba/run", "status_code": 200, "duration_ms": 1.48, "response_size": "831", "performance_category": "fast"}
------------------------------ Captured log call ------------------------------
INFO     backend.middleware.legacy_middleware:legacy_middleware.py:177 Legacy endpoint accessed: POST /api/v1/ingestion/nba/run (count: 3)
INFO     backend.middleware.request_id_middleware:request_id_middleware.py:67 Request started: POST /api/v1/ingestion/nba/run
INFO     backend.ingestion.routes.ingestion_routes:ingestion_routes.py:73 NBA ingestion requested with limit=None, allow_upsert=True
WARNING  backend.ingestion.routes.ingestion_routes:ingestion_routes.py:97 NBA ingestion partial: 50 props, 2 errors
INFO     backend.middleware.request_id_middleware:request_id_middleware.py:92 Request completed: POST /api/v1/ingestion/nba/run - 200
INFO     backend.middleware.distributed_trace_middleware:distributed_trace_middleware.py:224 Trace completed: 0cd0b654-b169-4a89-9bab-5d2815356bb3
______ TestIngestionEndpoints.test_run_nba_ingestion_pipeline_exception _______
tests\ingestion\test_ingestion_endpoints.py:144: in test_run_nba_ingestion_pipeline_exception
    assert "Database connection failed" in data["error"]
E   AssertionError: assert 'Database connection failed' in {'code': 'E5000_INTERNAL', 'message': 'NBA ingestion failed with unexpected error: Database connection failed'}
---------------------------- Captured stderr call -----------------------------
2025-08-23 08:04:05,657 - backend.middleware.legacy_middleware - INFO - Legacy endpoint accessed: POST /api/v1/ingestion/nba/run (count: 4)
{"timestamp": "2025-08-23T13:04:05.658200", "level": "INFO", "logger": "a1betting", "message": "Request started", "module": "structured_logging_middleware", "function": "log_request_start", "line": 109, "request_id": "bdafbd6d-7fe9-4568-bf11-e3adc9d4a429", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro", "event_type": "request_start", "method": "POST", "url": "http://testserver/api/v1/ingestion/nba/run", "path": "/api/v1/ingestion/nba/run", "query_params": {}, "client_ip": "testclient", "user_agent": "testclient", "content_type": null}
2025-08-23 08:04:05,658 - backend.middleware.request_id_middleware - INFO - Request started: POST /api/v1/ingestion/nba/run
2025-08-23 08:04:05,659 - backend.ingestion.routes.ingestion_routes - INFO - NBA ingestion requested with limit=None, allow_upsert=True
2025-08-23 08:04:05,659 - backend.ingestion.routes.ingestion_routes - ERROR - NBA ingestion endpoint error: Database connection failed
Traceback (most recent call last):
  File "C:\Users\bcmad\Downloads\A1Betting7-13.2\backend\ingestion\routes\ingestion_routes.py", line 77, in run_nba_ingestion_endpoint
    result = await run_nba_ingestion(
             ^^^^^^^^^^^^^^^^^^^^^^^^
    ...<2 lines>...
    )
    ^
  File "C:\Users\bcmad\Downloads\A1Betting7-13.2\backend\ingestion\pipeline\nba_ingestion_pipeline.py", line 416, in run_nba_ingestion
    return await pipeline.run_nba_ingestion(limit=limit, allow_upsert=allow_upsert)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Python313\Lib\unittest\mock.py", line 2321, in _execute_mock_call
    raise effect
Exception: Database connection failed
2025-08-23 08:04:05,660 - backend.errors.catalog - ERROR - API Error: E5000_INTERNAL
2025-08-23 08:04:05,660 - backend.middleware.request_id_middleware - INFO - Request completed: POST /api/v1/ingestion/nba/run - 500
2025-08-23 08:04:05,660 - backend.middleware.distributed_trace_middleware - INFO - Trace completed: 529090c0-c0ce-4b7d-903d-756e0ca7794e
{"timestamp": "2025-08-23T13:04:05.660689", "level": "INFO", "logger": "a1betting", "message": "Request completed", "module": "structured_logging_middleware", "function": "log_request_success", "line": 124, "request_id": "bdafbd6d-7fe9-4568-bf11-e3adc9d4a429", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro", "event_type": "request_success", "method": "POST", "url": "http://testserver/api/v1/ingestion/nba/run", "path": "/api/v1/ingestion/nba/run", "status_code": 500, "duration_ms": 2.5, "response_size": "310", "performance_category": "fast"}
------------------------------ Captured log call ------------------------------
INFO     backend.middleware.legacy_middleware:legacy_middleware.py:177 Legacy endpoint accessed: POST /api/v1/ingestion/nba/run (count: 4)
INFO     backend.middleware.request_id_middleware:request_id_middleware.py:67 Request started: POST /api/v1/ingestion/nba/run
INFO     backend.ingestion.routes.ingestion_routes:ingestion_routes.py:73 NBA ingestion requested with limit=None, allow_upsert=True
ERROR    backend.ingestion.routes.ingestion_routes:ingestion_routes.py:111 NBA ingestion endpoint error: Database connection failed
Traceback (most recent call last):
  File "C:\Users\bcmad\Downloads\A1Betting7-13.2\backend\ingestion\routes\ingestion_routes.py", line 77, in run_nba_ingestion_endpoint
    result = await run_nba_ingestion(
             ^^^^^^^^^^^^^^^^^^^^^^^^
    ...<2 lines>...
    )
    ^
  File "C:\Users\bcmad\Downloads\A1Betting7-13.2\backend\ingestion\pipeline\nba_ingestion_pipeline.py", line 416, in run_nba_ingestion
    return await pipeline.run_nba_ingestion(limit=limit, allow_upsert=allow_upsert)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Python313\Lib\unittest\mock.py", line 2321, in _execute_mock_call
    raise effect
Exception: Database connection failed
ERROR    backend.errors.catalog:catalog.py:304 API Error: E5000_INTERNAL
INFO     backend.middleware.request_id_middleware:request_id_middleware.py:92 Request completed: POST /api/v1/ingestion/nba/run - 500
INFO     backend.middleware.distributed_trace_middleware:distributed_trace_middleware.py:224 Trace completed: 529090c0-c0ce-4b7d-903d-756e0ca7794e
____ TestIngestionEndpoints.test_run_nba_ingestion_response_serialization _____
tests\ingestion\test_ingestion_endpoints.py:220: in test_run_nba_ingestion_response_serialization
    assert data["changed_quote_ids"] == [1, 2, 3, 4, 5]
           ^^^^^^^^^^^^^^^^^^^^^^^^^
E   KeyError: 'changed_quote_ids'
---------------------------- Captured stderr call -----------------------------
2025-08-23 08:04:05,834 - backend.middleware.legacy_middleware - INFO - Legacy endpoint accessed: POST /api/v1/ingestion/nba/run (count: 9)
{"timestamp": "2025-08-23T13:04:05.834979", "level": "INFO", "logger": "a1betting", "message": "Request started", "module": "structured_logging_middleware", "function": "log_request_start", "line": 109, "request_id": "b3a14c57-bffd-413c-8c18-98aef5ef7511", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro", "event_type": "request_start", "method": "POST", "url": "http://testserver/api/v1/ingestion/nba/run", "path": "/api/v1/ingestion/nba/run", "query_params": {}, "client_ip": "testclient", "user_agent": "testclient", "content_type": null}
2025-08-23 08:04:05,835 - backend.middleware.request_id_middleware - INFO - Request started: POST /api/v1/ingestion/nba/run
2025-08-23 08:04:05,836 - backend.ingestion.routes.ingestion_routes - INFO - NBA ingestion requested with limit=None, allow_upsert=True
2025-08-23 08:04:05,836 - backend.ingestion.routes.ingestion_routes - INFO - NBA ingestion successful: 100 props, 0 changes
2025-08-23 08:04:05,836 - backend.middleware.request_id_middleware - INFO - Request completed: POST /api/v1/ingestion/nba/run - 200
2025-08-23 08:04:05,836 - backend.middleware.distributed_trace_middleware - INFO - Trace completed: 7ffce82d-f895-4dc4-8f70-1c5edd6fbd5f
{"timestamp": "2025-08-23T13:04:05.836450", "level": "INFO", "logger": "a1betting", "message": "Request completed", "module": "structured_logging_middleware", "function": "log_request_success", "line": 124, "request_id": "b3a14c57-bffd-413c-8c18-98aef5ef7511", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro", "event_type": "request_success", "method": "POST", "url": "http://testserver/api/v1/ingestion/nba/run", "path": "/api/v1/ingestion/nba/run", "status_code": 200, "duration_ms": 1.49, "response_size": "707", "performance_category": "fast"}
------------------------------ Captured log call ------------------------------
INFO     backend.middleware.legacy_middleware:legacy_middleware.py:177 Legacy endpoint accessed: POST /api/v1/ingestion/nba/run (count: 9)
INFO     backend.middleware.request_id_middleware:request_id_middleware.py:67 Request started: POST /api/v1/ingestion/nba/run
INFO     backend.ingestion.routes.ingestion_routes:ingestion_routes.py:73 NBA ingestion requested with limit=None, allow_upsert=True
INFO     backend.ingestion.routes.ingestion_routes:ingestion_routes.py:89 NBA ingestion successful: 100 props, 0 changes
INFO     backend.middleware.request_id_middleware:request_id_middleware.py:92 Request completed: POST /api/v1/ingestion/nba/run - 200
INFO     backend.middleware.distributed_trace_middleware:distributed_trace_middleware.py:224 Trace completed: 7ffce82d-f895-4dc4-8f70-1c5edd6fbd5f
_______ TestNBAIngestionPipeline.test_successful_run_with_small_dataset _______
tests\ingestion\test_nba_ingestion_pipeline.py:110: in test_successful_run_with_small_dataset
    assert result.status in ["success", "partial"]
E   AssertionError: assert 'failed' in ['success', 'partial']
E    +  where 'failed' = IngestResult(status='failed', sport='NBA', source='test_provider', started_at=datetime.datetime(2025, 8, 23, 13, 4, 6,...PM_1234567890'}, timestamp=datetime.datetime(2025, 8, 23, 13, 4, 6, 74098), external_prop_id=None)], ingest_run_id=123).status
---------------------------- Captured stderr call -----------------------------
2025-08-23 08:04:06,072 - nba_ingestion_pipeline - INFO - Starting NBA ingestion pipeline with limit=2, allow_upsert=True
2025-08-23 08:04:06,072 - nba_ingestion_pipeline - INFO - Created ingest run 123
2025-08-23 08:04:06,072 - nba_ingestion_pipeline - INFO - Fetching props from NBA provider
2025-08-23 08:04:06,072 - nba_ingestion_pipeline - INFO - Fetched 2 raw props from provider
2025-08-23 08:04:06,072 - nba_ingestion_pipeline - INFO - Created new player: LeBron James (123)
2025-08-23 08:04:06,073 - nba_ingestion_pipeline - INFO - Created new prop: LeBron James POINTS (123)
2025-08-23 08:04:06,073 - nba_ingestion_pipeline - ERROR - Error processing prop 0 (stub_lebron_001_Points_1234567890): Failed to process prop: 'NoneType' object has no attribute 'name'
2025-08-23 08:04:06,073 - nba_ingestion_pipeline - INFO - Created new player: Stephen Curry (123)
2025-08-23 08:04:06,073 - nba_ingestion_pipeline - INFO - Created new prop: Stephen Curry 3PM (123)
2025-08-23 08:04:06,074 - nba_ingestion_pipeline - ERROR - Error processing prop 1 (stub_curry_001_3PM_1234567890): Failed to process prop: 'NoneType' object has no attribute 'name'
2025-08-23 08:04:06,074 - nba_ingestion_pipeline - INFO - Finalized ingest run 123 with status failed
2025-08-23 08:04:06,074 - nba_ingestion_pipeline - INFO - TODO: Trigger model inference for 2 line changes
2025-08-23 08:04:06,074 - nba_ingestion_pipeline - INFO - NBA ingestion completed: failed with 2 errors
------------------------------ Captured log call ------------------------------
INFO     nba_ingestion_pipeline:nba_ingestion_pipeline.py:55 Starting NBA ingestion pipeline with limit=2, allow_upsert=True
INFO     nba_ingestion_pipeline:nba_ingestion_pipeline.py:87 Created ingest run 123
INFO     nba_ingestion_pipeline:nba_ingestion_pipeline.py:90 Fetching props from NBA provider
INFO     nba_ingestion_pipeline:nba_ingestion_pipeline.py:95 Fetched 2 raw props from provider
INFO     nba_ingestion_pipeline:nba_ingestion_pipeline.py:277 Created new player: LeBron James (123)
INFO     nba_ingestion_pipeline:nba_ingestion_pipeline.py:325 Created new prop: LeBron James POINTS (123)
ERROR    nba_ingestion_pipeline:nba_ingestion_pipeline.py:116 Error processing prop 0 (stub_lebron_001_Points_1234567890): Failed to process prop: 'NoneType' object has no attribute 'name'
INFO     nba_ingestion_pipeline:nba_ingestion_pipeline.py:277 Created new player: Stephen Curry (123)
INFO     nba_ingestion_pipeline:nba_ingestion_pipeline.py:325 Created new prop: Stephen Curry 3PM (123)
ERROR    nba_ingestion_pipeline:nba_ingestion_pipeline.py:116 Error processing prop 1 (stub_curry_001_3PM_1234567890): Failed to process prop: 'NoneType' object has no attribute 'name'
INFO     nba_ingestion_pipeline:nba_ingestion_pipeline.py:397 Finalized ingest run 123 with status failed
INFO     nba_ingestion_pipeline:nba_ingestion_pipeline.py:147 TODO: Trigger model inference for 2 line changes
INFO     nba_ingestion_pipeline:nba_ingestion_pipeline.py:150 NBA ingestion completed: failed with 2 errors
_____________ TestNBAIngestionPipeline.test_line_change_detection _____________
tests\ingestion\test_nba_ingestion_pipeline.py:199: in test_line_change_detection
    assert result.total_line_changes == 1
E   AssertionError: assert 0 == 1
E    +  where 0 = IngestResult(status='success', sport='NBA', source='test_provider', started_at=datetime.datetime(2025, 8, 23, 13, 4, 6...yers=1, total_new_props=0, changed_quote_ids=[], new_prop_ids=[], new_player_ids=[None], errors=[], ingest_run_id=None).total_line_changes
---------------------------- Captured stderr call -----------------------------
2025-08-23 08:04:06,088 - nba_ingestion_pipeline - INFO - Starting NBA ingestion pipeline with limit=1, allow_upsert=True
2025-08-23 08:04:06,089 - nba_ingestion_pipeline - INFO - Created ingest run None
2025-08-23 08:04:06,089 - nba_ingestion_pipeline - INFO - Fetching props from NBA provider
2025-08-23 08:04:06,089 - nba_ingestion_pipeline - INFO - Fetched 1 raw props from provider
2025-08-23 08:04:06,089 - nba_ingestion_pipeline - INFO - Created new player: LeBron James (None)
2025-08-23 08:04:06,089 - nba_ingestion_pipeline - INFO - Finalized ingest run None with status success
2025-08-23 08:04:06,089 - nba_ingestion_pipeline - INFO - NBA ingestion completed: success with 0 errors
------------------------------ Captured log call ------------------------------
INFO     nba_ingestion_pipeline:nba_ingestion_pipeline.py:55 Starting NBA ingestion pipeline with limit=1, allow_upsert=True
INFO     nba_ingestion_pipeline:nba_ingestion_pipeline.py:87 Created ingest run None
INFO     nba_ingestion_pipeline:nba_ingestion_pipeline.py:90 Fetching props from NBA provider
INFO     nba_ingestion_pipeline:nba_ingestion_pipeline.py:95 Fetched 1 raw props from provider
INFO     nba_ingestion_pipeline:nba_ingestion_pipeline.py:277 Created new player: LeBron James (None)
INFO     nba_ingestion_pipeline:nba_ingestion_pipeline.py:397 Finalized ingest run None with status success
INFO     nba_ingestion_pipeline:nba_ingestion_pipeline.py:150 NBA ingestion completed: success with 0 errors
_____________ TestNBAIngestionPipeline.test_taxonomy_failure_path _____________
tests\ingestion\test_nba_ingestion_pipeline.py:238: in test_taxonomy_failure_path
    assert any("taxonomy" in error.error_type.lower() or "normalization" in error.error_type.lower()
E   assert False
E    +  where False = any(<generator object TestNBAIngestionPipeline.test_taxonomy_failure_path.<locals>.<genexpr> at 0x00000171C536C6C0>)
---------------------------- Captured stderr call -----------------------------
2025-08-23 08:04:06,096 - nba_ingestion_pipeline - INFO - Starting NBA ingestion pipeline with limit=1, allow_upsert=True
2025-08-23 08:04:06,097 - nba_ingestion_pipeline - INFO - Created ingest run 126
2025-08-23 08:04:06,097 - nba_ingestion_pipeline - INFO - Fetching props from NBA provider
2025-08-23 08:04:06,097 - nba_ingestion_pipeline - INFO - Fetched 1 raw props from provider
2025-08-23 08:04:06,097 - nba_ingestion_pipeline - ERROR - Error processing prop 0 (test_prop_123): Failed to process prop: Normalization failed: Unexpected error mapping prop test_prop_123: Cannot derive prop type from category 'Unknown Category': Unknown prop category for NBA: 'Unknown Category' (provider: test_provider)
2025-08-23 08:04:06,097 - nba_ingestion_pipeline - INFO - Finalized ingest run 126 with status failed
2025-08-23 08:04:06,097 - nba_ingestion_pipeline - INFO - NBA ingestion completed: failed with 1 errors
------------------------------ Captured log call ------------------------------
INFO     nba_ingestion_pipeline:nba_ingestion_pipeline.py:55 Starting NBA ingestion pipeline with limit=1, allow_upsert=True
INFO     nba_ingestion_pipeline:nba_ingestion_pipeline.py:87 Created ingest run 126
INFO     nba_ingestion_pipeline:nba_ingestion_pipeline.py:90 Fetching props from NBA provider
INFO     nba_ingestion_pipeline:nba_ingestion_pipeline.py:95 Fetched 1 raw props from provider
ERROR    nba_ingestion_pipeline:nba_ingestion_pipeline.py:116 Error processing prop 0 (test_prop_123): Failed to process prop: Normalization failed: Unexpected error mapping prop test_prop_123: Cannot derive prop type from category 'Unknown Category': Unknown prop category for NBA: 'Unknown Category' (provider: test_provider)
INFO     nba_ingestion_pipeline:nba_ingestion_pipeline.py:397 Finalized ingest run 126 with status failed
INFO     nba_ingestion_pipeline:nba_ingestion_pipeline.py:150 NBA ingestion completed: failed with 1 errors
_____ TestNBAIngestionPipeline.test_player_upsert_matching_by_external_id _____
tests\ingestion\test_nba_ingestion_pipeline.py:271: in test_player_upsert_matching_by_external_id
    assert result.total_new_players == 0
E   AssertionError: assert 1 == 0
E    +  where 1 = IngestResult(status='failed', sport='NBA', source='test_provider', started_at=datetime.datetime(2025, 8, 23, 13, 4, 6,..._1234567890'}, timestamp=datetime.datetime(2025, 8, 23, 13, 4, 6, 123635), external_prop_id=None)], ingest_run_id=None).total_new_players
---------------------------- Captured stderr call -----------------------------
2025-08-23 08:04:06,122 - nba_ingestion_pipeline - INFO - Starting NBA ingestion pipeline with limit=1, allow_upsert=True
2025-08-23 08:04:06,122 - nba_ingestion_pipeline - INFO - Created ingest run None
2025-08-23 08:04:06,122 - nba_ingestion_pipeline - INFO - Fetching props from NBA provider
2025-08-23 08:04:06,122 - nba_ingestion_pipeline - INFO - Fetched 1 raw props from provider
2025-08-23 08:04:06,123 - nba_ingestion_pipeline - INFO - Created new player: LeBron James (None)
2025-08-23 08:04:06,123 - nba_ingestion_pipeline - ERROR - Error processing prop 0 (stub_lebron_001_Points_1234567890): Failed to process prop: 
2025-08-23 08:04:06,123 - nba_ingestion_pipeline - INFO - Finalized ingest run None with status failed
2025-08-23 08:04:06,123 - nba_ingestion_pipeline - INFO - NBA ingestion completed: failed with 1 errors
------------------------------ Captured log call ------------------------------
INFO     nba_ingestion_pipeline:nba_ingestion_pipeline.py:55 Starting NBA ingestion pipeline with limit=1, allow_upsert=True
INFO     nba_ingestion_pipeline:nba_ingestion_pipeline.py:87 Created ingest run None
INFO     nba_ingestion_pipeline:nba_ingestion_pipeline.py:90 Fetching props from NBA provider
INFO     nba_ingestion_pipeline:nba_ingestion_pipeline.py:95 Fetched 1 raw props from provider
INFO     nba_ingestion_pipeline:nba_ingestion_pipeline.py:277 Created new player: LeBron James (None)
ERROR    nba_ingestion_pipeline:nba_ingestion_pipeline.py:116 Error processing prop 0 (stub_lebron_001_Points_1234567890): Failed to process prop: 
INFO     nba_ingestion_pipeline:nba_ingestion_pipeline.py:397 Finalized ingest run None with status failed
INFO     nba_ingestion_pipeline:nba_ingestion_pipeline.py:150 NBA ingestion completed: failed with 1 errors
___ TestNBAIngestionPipeline.test_ingest_run_persisted_with_correct_status ____
tests\ingestion\test_nba_ingestion_pipeline.py:304: in test_ingest_run_persisted_with_correct_status
    assert len(created_runs) >= 1  # At least the ingest run was added
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   assert 0 >= 1
E    +  where 0 = len([])
---------------------------- Captured stderr call -----------------------------
2025-08-23 08:04:06,130 - nba_ingestion_pipeline - INFO - Starting NBA ingestion pipeline with limit=1, allow_upsert=True
2025-08-23 08:04:06,131 - nba_ingestion_pipeline - INFO - Created ingest run 128
2025-08-23 08:04:06,131 - nba_ingestion_pipeline - INFO - Fetching props from NBA provider
2025-08-23 08:04:06,131 - nba_ingestion_pipeline - INFO - Fetched 1 raw props from provider
2025-08-23 08:04:06,132 - nba_ingestion_pipeline - INFO - Finalized ingest run 128 with status success
2025-08-23 08:04:06,132 - nba_ingestion_pipeline - INFO - NBA ingestion completed: success with 0 errors
------------------------------ Captured log call ------------------------------
INFO     nba_ingestion_pipeline:nba_ingestion_pipeline.py:55 Starting NBA ingestion pipeline with limit=1, allow_upsert=True
INFO     nba_ingestion_pipeline:nba_ingestion_pipeline.py:87 Created ingest run 128
INFO     nba_ingestion_pipeline:nba_ingestion_pipeline.py:90 Fetching props from NBA provider
INFO     nba_ingestion_pipeline:nba_ingestion_pipeline.py:95 Fetched 1 raw props from provider
INFO     nba_ingestion_pipeline:nba_ingestion_pipeline.py:397 Finalized ingest run 128 with status success
INFO     nba_ingestion_pipeline:nba_ingestion_pipeline.py:150 NBA ingestion completed: success with 0 errors
________ TestPropMapper.test_map_raw_to_normalized_team_normalization _________
tests\ingestion\test_prop_mapper.py:92: in test_map_raw_to_normalized_team_normalization
    raw_prop = RawExternalPropDTO(
E   pydantic_core._pydantic_core.ValidationError: 1 validation error for RawExternalPropDTO
E   team_code
E     String should have at most 5 characters [type=string_too_long, input_value='Lakers', input_type=str]
E       For further information visit https://errors.pydantic.dev/2.11/v/string_too_long
---------------------------- Captured stderr setup ----------------------------
2025-08-23 08:04:06,297 - backend.ingestion.normalization.taxonomy_service - INFO - Loaded 48 prop mappings and 100 team mappings
2025-08-23 08:04:06,298 - backend.ingestion.normalization.taxonomy_service - INFO - Loaded provider-specific mappings for 6 providers
----------------------------- Captured log setup ------------------------------
INFO     backend.ingestion.normalization.taxonomy_service:taxonomy_service.py:157 Loaded 48 prop mappings and 100 team mappings
INFO     backend.ingestion.normalization.taxonomy_service:taxonomy_service.py:238 Loaded provider-specific mappings for 6 providers
____ TestPropMapper.test_map_raw_to_normalized_taxonomy_error_propagation _____
tests\ingestion\test_prop_mapper.py:142: in test_map_raw_to_normalized_taxonomy_error_propagation
    raw_prop = RawExternalPropDTO(
E   pydantic_core._pydantic_core.ValidationError: 1 validation error for RawExternalPropDTO
E   team_code
E     String should have at most 5 characters [type=string_too_long, input_value='UNKNOWN_TEAM', input_type=str]
E       For further information visit https://errors.pydantic.dev/2.11/v/string_too_long
---------------------------- Captured stderr setup ----------------------------
2025-08-23 08:04:06,303 - backend.ingestion.normalization.taxonomy_service - INFO - Loaded 48 prop mappings and 100 team mappings
2025-08-23 08:04:06,303 - backend.ingestion.normalization.taxonomy_service - INFO - Loaded provider-specific mappings for 6 providers
----------------------------- Captured log setup ------------------------------
INFO     backend.ingestion.normalization.taxonomy_service:taxonomy_service.py:157 Loaded 48 prop mappings and 100 team mappings
INFO     backend.ingestion.normalization.taxonomy_service:taxonomy_service.py:238 Loaded provider-specific mappings for 6 providers
_____________ TestPropMapper.test_compute_line_hash_deterministic _____________
tests\ingestion\test_prop_mapper.py:167: in test_compute_line_hash_deterministic
    payout_schema = PayoutSchema(type=PayoutType.STANDARD, over=-110, under=-110)
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   pydantic_core._pydantic_core.ValidationError: 1 validation error for PayoutSchema
E   variant_code
E     Field required [type=missing, input_value={'type': <PayoutType.STAN...r': -110, 'under': -110}, input_type=dict]
E       For further information visit https://errors.pydantic.dev/2.11/v/missing
________ TestPropMapper.test_compute_line_hash_with_different_payouts _________
tests\ingestion\test_prop_mapper.py:186: in test_compute_line_hash_with_different_payouts
    payout1 = PayoutSchema(type=PayoutType.STANDARD, over=-110, under=-110)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   pydantic_core._pydantic_core.ValidationError: 1 validation error for PayoutSchema
E   variant_code
E     Field required [type=missing, input_value={'type': <PayoutType.STAN...r': -110, 'under': -110}, input_type=dict]
E       For further information visit https://errors.pydantic.dev/2.11/v/missing
____________ TestPropMapper.test_compute_line_hash_with_none_odds _____________
tests\ingestion\test_prop_mapper.py:203: in test_compute_line_hash_with_none_odds
    payout1 = PayoutSchema(type=PayoutType.STANDARD, over=None, under=-110)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   pydantic_core._pydantic_core.ValidationError: 1 validation error for PayoutSchema
E   variant_code
E     Field required [type=missing, input_value={'type': <PayoutType.STAN...r': None, 'under': -110}, input_type=dict]
E       For further information visit https://errors.pydantic.dev/2.11/v/missing
_________ TestPropMapper.test_validate_normalized_prop_invalid_cases __________
tests\ingestion\test_prop_mapper.py:244: in test_validate_normalized_prop_invalid_cases
    payout_schema = PayoutSchema(type=PayoutType.STANDARD, over=-110, under=-110)
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   pydantic_core._pydantic_core.ValidationError: 1 validation error for PayoutSchema
E   variant_code
E     Field required [type=missing, input_value={'type': <PayoutType.STAN...r': -110, 'under': -110}, input_type=dict]
E       For further information visit https://errors.pydantic.dev/2.11/v/missing
______ TestTaxonomyService.test_normalize_prop_category_partial_matches _______
tests\ingestion\test_taxonomy_service.py:58: in test_normalize_prop_category_partial_matches
    assert taxonomy_service.normalize_prop_category("Three Point Makes") == PropTypeEnum.THREE_POINTERS_MADE
E   AssertionError: assert <PropTypeEnum...NTS: 'POINTS'> == <PropTypeEnum...S_MADE: '3PM'>
E     
E     - 3PM
E     + POINTS
---------------------------- Captured stderr setup ----------------------------
2025-08-23 08:04:06,332 - backend.ingestion.normalization.taxonomy_service - INFO - Loaded 48 prop mappings and 100 team mappings
2025-08-23 08:04:06,332 - backend.ingestion.normalization.taxonomy_service - INFO - Loaded provider-specific mappings for 6 providers
----------------------------- Captured log setup ------------------------------
INFO     backend.ingestion.normalization.taxonomy_service:taxonomy_service.py:157 Loaded 48 prop mappings and 100 team mappings
INFO     backend.ingestion.normalization.taxonomy_service:taxonomy_service.py:238 Loaded provider-specific mappings for 6 providers
____ TestTaxonomyService.test_normalize_prop_category_unknown_raises_error ____
tests\ingestion\test_taxonomy_service.py:69: in test_normalize_prop_category_unknown_raises_error
    with pytest.raises(TaxonomyError, match="Unknown prop category"):
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   Failed: DID NOT RAISE <class 'backend.ingestion.normalization.taxonomy_service.TaxonomyError'>
---------------------------- Captured stderr setup ----------------------------
2025-08-23 08:04:06,336 - backend.ingestion.normalization.taxonomy_service - INFO - Loaded 48 prop mappings and 100 team mappings
2025-08-23 08:04:06,336 - backend.ingestion.normalization.taxonomy_service - INFO - Loaded provider-specific mappings for 6 providers
----------------------------- Captured log setup ------------------------------
INFO     backend.ingestion.normalization.taxonomy_service:taxonomy_service.py:157 Loaded 48 prop mappings and 100 team mappings
INFO     backend.ingestion.normalization.taxonomy_service:taxonomy_service.py:238 Loaded provider-specific mappings for 6 providers
_______________________ test_rate_limit_headers_present _______________________
tests\rate_limit\test_rate_limit_basic.py:46: in test_rate_limit_headers_present
    assert "x-ratelimit-limit" in headers
E   AssertionError: assert 'x-ratelimit-limit' in Headers({'content-length': '277', 'content-type': 'application/json', 'x-request-id': 'aa4ac9b1-6e95-4d82-83cc-7d9c532...true', 'x-forward-to': '/api/v2/diagnostics/health', 'x-deprecated-warning': 'Use /api/v2/diagnostics/health instead'})
---------------------------- Captured stderr setup ----------------------------
2025-08-23 08:04:06,376 - backend.core.app - INFO - \U0001f680 Creating A1Betting canonical app...\n2025-08-23 08:04:06,377 - backend.core.app - INFO - \u2705 Request ID correlation middleware added\n2025-08-23 08:04:06,377 - backend.core.app - INFO - \u2705 Distributed trace correlation middleware added\n2025-08-23 08:04:06,377 - backend.core.app - INFO - \u2705 Structured logging middleware added\n2025-08-23 08:04:06,377 - backend.core.app - INFO - \u2705 Prometheus metrics middleware added\n2025-08-23 08:04:06,377 - backend.core.app - INFO - \u2705 Payload guard middleware added: max_size=262144 bytes, enforce_json=True, enabled=True\n2025-08-23 08:04:06,377 - backend.middleware.rate_limit - INFO - Rate limiting disabled\n2025-08-23 08:04:06,377 - backend.core.app - INFO - \u2705 Rate limiting middleware added: 100/min, burst=200, enabled=False\n2025-08-23 08:04:06,377 - backend.core.app - INFO - \u2705 Security headers middleware added: [HSTS, CSP(report-only), COOP, COEP], x_frame_options=DENY\n2025-08-23 08:04:06,377 - backend.core.app - INFO - \u2705 Legacy endpoint middleware added for usage telemetry and deprecation controls\n2025-08-23 08:04:06,377 - backend.exceptions.handlers - INFO - \u2705 PayloadRejectionError handler registered\n2025-08-23 08:04:06,377 - backend.exceptions.handlers - INFO - \u2705 All exception handlers registered with structured error taxonomy\n2025-08-23 08:04:06,377 - backend.core.app - INFO - \u2705 Centralized exception handlers registered\n2025-08-23 08:04:06,378 - backend.core.app - INFO - \u2705 PR11 Enhanced WebSocket client route included (/ws/client)\n2025-08-23 08:04:06,383 - backend.core.app - INFO - \u2705 Auth routes also exposed at root (/auth/*) for compatibility\n2025-08-23 08:04:06,383 - backend.core.app - INFO - \u2705 Auth and users routes included (auth with /api prefix)\n2025-08-23 08:04:06,384 - backend.core.app - INFO - \u2705 Diagnostics routes included (/api/v2/diagnostics/health, /api/v2/diagnostics/system)\n2025-08-23 08:04:06,385 - backend.core.app - INFO - \u2705 Meta cache routes included (/api/v2/meta/cache-stats, /api/v2/meta/cache-health)\n2025-08-23 08:04:06,386 - backend.core.app - INFO - \u2705 Legacy meta routes included (/api/v2/meta/legacy-usage, /api/v2/meta/migration-readiness)\n2025-08-23 08:04:06,388 - backend.core.app - ERROR - \u274c Failed to register CSP report routes: Invalid args for response field! Hint: check that <class 'logging.Logger'> is a valid Pydantic field type. If you are using a return type annotation that is not a valid Pydantic field (e.g. Union[Response, dict, None]) you can disable generating the response model from the type annotation with the path operation decorator parameter response_model=None. Read more: https://fastapi.tiangolo.com/tutorial/response-model/\n2025-08-23 08:04:06,389 - backend.core.app - INFO - \u2705 Trace test routes included (/api/trace/* endpoints)\n2025-08-23 08:04:06,390 - backend.core.app - INFO - \u2705 Model inference routes included (/api/v2/models/* endpoints)\n2025-08-23 08:04:06,392 - backend.core.app - INFO - \u2705 Observability events routes included (/api/v2/observability/* endpoints)\n2025-08-23 08:04:06,393 - backend.core.app - INFO - \u2705 Admin control routes included (/api/v2/models/shadow/* and /api/v2/models/admin/* endpoints)\n2025-08-23 08:04:06,395 - backend.core.app - INFO - \u2705 Enhanced WebSocket routes included (/ws/v2/* endpoints)\n2025-08-23 08:04:06,396 - backend.core.app - INFO - \u2705 WebSocket logging routes included (/api/websocket/* endpoints)\n2025-08-23 08:04:06,397 - backend.core.app - INFO - \u2705 Version routes included (/api/version/* endpoints)\n2025-08-23 08:04:06,397 - backend.core.app - INFO - \u2705 WebVitals pipeline routes included (/api/metrics/v1/* endpoints)\n2025-08-23 08:04:06,402 - backend.core.app - INFO - \u2705 Enhanced ML routes included (/api/enhanced-ml/* endpoints)\n2025-08-23 08:04:06,402 - backend.core.app - INFO - \u2705 Fallback enhanced-ml compatibility router mounted at /api/enhanced-ml\n2025-08-23 08:04:06,407 - backend.core.app - INFO - \u2705 Consolidated PrizePicks routes included (/api/v2/prizepicks/* endpoints)\n2025-08-23 08:04:06,410 - backend.core.app - INFO - \u2705 Consolidated ML routes included (/api/v2/ml/* endpoints)\n2025-08-23 08:04:06,412 - backend.core.app - ERROR - \u274c Failed to register consolidated Admin routes: parameter without a default follows parameter with a default (consolidated_admin.py, line 165)\n2025-08-23 08:04:06,416 - backend.core.app - INFO - \u2705 Odds & Line Movement routes included (/v1/odds/* endpoints)\n2025-08-23 08:04:06,418 - backend.core.app - INFO - \u2705 Advanced-Kelly compatibility router mounted at /api/advanced-kelly\n2025-08-23 08:04:06,420 - backend.core.app - ERROR - \u274c Failed to register Risk Management & Personalization routes: 'NoneType' object has no attribute 'alert_evaluation_interval_seconds'\n2025-08-23 08:04:06,422 - backend.core.app - INFO - \u2705 Dependencies Health routes included (/api/dependencies/* endpoints)\n2025-08-23 08:04:06,424 - backend.core.app - INFO - \u2705 Provider Resilience routes included (/api/provider-resilience/* endpoints)\n2025-08-23 08:04:06,425 - backend.core.app - INFO - \u2705 System capabilities routes included (/api/system/* endpoints)\n2025-08-23 08:04:06,427 - backend.core.app - INFO - \u2705 Real-time market streaming routes included (/streaming/* endpoints)\n2025-08-23 08:04:06,428 - backend.core.app - INFO - \u2705 Security HEAD endpoints included (/api/* HEAD endpoints)\n2025-08-23 08:04:06,430 - backend.core.app - INFO - \u2705 ML Model Registry routes included (/api/models/* endpoints)\n2025-08-23 08:04:06,431 - backend.core.app - INFO - \u2705 Data ingestion routes included (/api/v1/ingestion/* endpoints)\n2025-08-23 08:04:06,434 - backend.core.app - INFO - \u2705 Enterprise model registry routes included (/api/models/enterprise/* endpoints)\n2025-08-23 08:04:06,438 - backend.core.app - INFO - \u2705 Alert engine routes included (/api/alert-engine/* endpoints)\n2025-08-23 08:04:06,441 - backend.core.app - INFO - \u2705 PropFinder routes included (/api/propfinder/* endpoints)\n2025-08-23 08:04:06,442 - backend.core.app - WARNING - \u26a0\ufe0f Could not import multiple_sportsbook_routes: cannot import name 'RateLimiter' from 'backend.middleware.rate_limit' (C:\\Users\\bcmad\\Downloads\\A1Betting7-13.2\\backend\\middleware\\rate_limit.py)\n2025-08-23 08:04:06,444 - backend.core.app - INFO - \u2705 Sportsbook compatibility router mounted at /api/sportsbook\n2025-08-23 08:04:06,445 - backend.core.app - INFO - \U0001f50d Bootstrap validation scheduled on startup\n2025-08-23 08:04:06,445 - backend.core.app - INFO - \U0001f3e5 Health endpoints normalized: /api/health, /health, /api/v2/health -> identical envelope format\n2025-08-23 08:04:06,445 - backend.core.app - INFO - \u2705 A1Betting canonical app created successfully
----------------------------- Captured log setup ------------------------------
INFO     backend.core.app:app.py:65 \U0001f680 Creating A1Betting canonical app...\nINFO     backend.core.app:app.py:104 \u2705 Request ID correlation middleware added\nINFO     backend.core.app:app.py:114 \u2705 Distributed trace correlation middleware added\nINFO     backend.core.app:app.py:126 \u2705 Structured logging middleware added\nINFO     backend.core.app:app.py:146 \u2705 Prometheus metrics middleware added\nINFO     backend.core.app:app.py:167 \u2705 Payload guard middleware added: max_size=262144 bytes, enforce_json=True, enabled=True\nINFO     backend.middleware.rate_limit:rate_limit.py:90 Rate limiting disabled\nINFO     backend.core.app:app.py:202 \u2705 Rate limiting middleware added: 100/min, burst=200, enabled=False\nINFO     backend.core.app:app.py:244 \u2705 Security headers middleware added: [HSTS, CSP(report-only), COOP, COEP], x_frame_options=DENY\nINFO     backend.core.app:app.py:259 \u2705 Legacy endpoint middleware added for usage telemetry and deprecation controls\nINFO     backend.exceptions.handlers:handlers.py:235 \u2705 PayloadRejectionError handler registered\nINFO     backend.exceptions.handlers:handlers.py:250 \u2705 All exception handlers registered with structured error taxonomy\nINFO     backend.core.app:app.py:269 \u2705 Centralized exception handlers registered\nINFO     backend.core.app:app.py:332 \u2705 PR11 Enhanced WebSocket client route included (/ws/client)\nINFO     backend.core.app:app.py:702 \u2705 Auth routes also exposed at root (/auth/*) for compatibility\nINFO     backend.core.app:app.py:706 \u2705 Auth and users routes included (auth with /api prefix)\nINFO     backend.core.app:app.py:714 \u2705 Diagnostics routes included (/api/v2/diagnostics/health, /api/v2/diagnostics/system)\nINFO     backend.core.app:app.py:763 \u2705 Meta cache routes included (/api/v2/meta/cache-stats, /api/v2/meta/cache-health)\nINFO     backend.core.app:app.py:773 \u2705 Legacy meta routes included (/api/v2/meta/legacy-usage, /api/v2/meta/migration-readiness)\nERROR    backend.core.app:app.py:788 \u274c Failed to register CSP report routes: Invalid args for response field! Hint: check that <class 'logging.Logger'> is a valid Pydantic field type. If you are using a return type annotation that is not a valid Pydantic field (e.g. Union[Response, dict, None]) you can disable generating the response model from the type annotation with the path operation decorator parameter response_model=None. Read more: https://fastapi.tiangolo.com/tutorial/response-model/\nINFO     backend.core.app:app.py:794 \u2705 Trace test routes included (/api/trace/* endpoints)\nINFO     backend.core.app:app.py:804 \u2705 Model inference routes included (/api/v2/models/* endpoints)\nINFO     backend.core.app:app.py:814 \u2705 Observability events routes included (/api/v2/observability/* endpoints)\nINFO     backend.core.app:app.py:824 \u2705 Admin control routes included (/api/v2/models/shadow/* and /api/v2/models/admin/* endpoints)\nINFO     backend.core.app:app.py:834 \u2705 Enhanced WebSocket routes included (/ws/v2/* endpoints)\nINFO     backend.core.app:app.py:844 \u2705 WebSocket logging routes included (/api/websocket/* endpoints)\nINFO     backend.core.app:app.py:854 \u2705 Version routes included (/api/version/* endpoints)\nINFO     backend.core.app:app.py:864 \u2705 WebVitals pipeline routes included (/api/metrics/v1/* endpoints)\nINFO     backend.core.app:app.py:874 \u2705 Enhanced ML routes included (/api/enhanced-ml/* endpoints)\nINFO     backend.core.app:app.py:986 \u2705 Fallback enhanced-ml compatibility router mounted at /api/enhanced-ml\nINFO     backend.core.app:app.py:995 \u2705 Consolidated PrizePicks routes included (/api/v2/prizepicks/* endpoints)\nINFO     backend.core.app:app.py:1005 \u2705 Consolidated ML routes included (/api/v2/ml/* endpoints)\nERROR    backend.core.app:app.py:1019 \u274c Failed to register consolidated Admin routes: parameter without a default follows parameter with a default (consolidated_admin.py, line 165)\nINFO     backend.core.app:app.py:1025 \u2705 Odds & Line Movement routes included (/v1/odds/* endpoints)\nINFO     backend.core.app:app.py:1066 \u2705 Advanced-Kelly compatibility router mounted at /api/advanced-kelly\nERROR    backend.core.app:app.py:1078 \u274c Failed to register Risk Management & Personalization routes: 'NoneType' object has no attribute 'alert_evaluation_interval_seconds'\nINFO     backend.core.app:app.py:1084 \u2705 Dependencies Health routes included (/api/dependencies/* endpoints)\nINFO     backend.core.app:app.py:1094 \u2705 Provider Resilience routes included (/api/provider-resilience/* endpoints)\nINFO     backend.core.app:app.py:1104 \u2705 System capabilities routes included (/api/system/* endpoints)\nINFO     backend.core.app:app.py:1114 \u2705 Real-time market streaming routes included (/streaming/* endpoints)\nINFO     backend.core.app:app.py:1124 \u2705 Security HEAD endpoints included (/api/* HEAD endpoints)\nINFO     backend.core.app:app.py:1134 \u2705 ML Model Registry routes included (/api/models/* endpoints)\nINFO     backend.core.app:app.py:1144 \u2705 Data ingestion routes included (/api/v1/ingestion/* endpoints)\nINFO     backend.core.app:app.py:1154 \u2705 Enterprise model registry routes included (/api/models/enterprise/* endpoints)\nINFO     backend.core.app:app.py:1199 \u2705 Alert engine routes included (/api/alert-engine/* endpoints)\nINFO     backend.core.app:app.py:1209 \u2705 PropFinder routes included (/api/propfinder/* endpoints)\nWARNING  backend.core.app:app.py:1221 \u26a0\ufe0f Could not import multiple_sportsbook_routes: cannot import name 'RateLimiter' from 'backend.middleware.rate_limit' (C:\\Users\\bcmad\\Downloads\\A1Betting7-13.2\\backend\\middleware\\rate_limit.py)\nINFO     backend.core.app:app.py:1495 \u2705 Sportsbook compatibility router mounted at /api/sportsbook\nINFO     backend.core.app:app.py:1527 \U0001f50d Bootstrap validation scheduled on startup\nINFO     backend.core.app:app.py:1535 \U0001f3e5 Health endpoints normalized: /api/health, /health, /api/v2/health -> identical envelope format\nINFO     backend.core.app:app.py:1536 \u2705 A1Betting canonical app created successfully
---------------------------- Captured stderr call -----------------------------
2025-08-23 08:04:06,447 - backend.middleware.rate_limit - INFO - Rate limiting disabled\n2025-08-23 08:04:06,447 - backend.middleware.security_headers - INFO - \u2705 Security headers middleware enabled: CSP=report-only, HSTS=True, strict_mode=False\n2025-08-23 08:04:06,448 - backend.middleware.legacy_middleware - INFO - Registered known legacy endpoints with forwarding paths\n2025-08-23 08:04:06,448 - backend.middleware.legacy_middleware - INFO - Legacy middleware initialized\n2025-08-23 08:04:06,448 - backend.middleware.legacy_middleware - INFO - Legacy endpoint accessed: GET /api/health (count: 6)\n{"timestamp": "2025-08-23T13:04:06.448356", "level": "INFO", "logger": "a1betting", "message": "Request started", "module": "structured_logging_middleware", "function": "log_request_start", "line": 109, "request_id": "aa4ac9b1-6e95-4d82-83cc-7d9c532915c6", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro", "event_type": "request_start", "method": "GET", "url": "http://testserver/api/health", "path": "/api/health", "query_params": {}, "client_ip": "testclient", "user_agent": "testclient", "content_type": null}\n2025-08-23 08:04:06,448 - backend.middleware.request_id_middleware - INFO - Request started: GET /api/health\n2025-08-23 08:04:06,448 - backend.core.app - INFO - [API] /api/health called (DEPRECATED)\n2025-08-23 08:04:06,449 - backend.middleware.request_id_middleware - INFO - Request completed: GET /api/health - 200\n2025-08-23 08:04:06,449 - backend.middleware.distributed_trace_middleware - INFO - Trace completed: d504ea77-808b-409c-bbb6-659b7af450ec\n{"timestamp": "2025-08-23T13:04:06.449234", "level": "INFO", "logger": "a1betting", "message": "Request completed", "module": "structured_logging_middleware", "function": "log_request_success", "line": 124, "request_id": "aa4ac9b1-6e95-4d82-83cc-7d9c532915c6", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro", "event_type": "request_success", "method": "GET", "url": "http://testserver/api/health", "path": "/api/health", "status_code": 200, "duration_ms": 0.9, "response_size": "277", "performance_category": "fast"}
------------------------------ Captured log call ------------------------------
INFO     backend.middleware.rate_limit:rate_limit.py:90 Rate limiting disabled\nINFO     backend.middleware.security_headers:security_headers.py:71 \u2705 Security headers middleware enabled: CSP=report-only, HSTS=True, strict_mode=False\nINFO     backend.middleware.legacy_middleware:legacy_middleware.py:68 Registered known legacy endpoints with forwarding paths\nINFO     backend.middleware.legacy_middleware:legacy_middleware.py:44 Legacy middleware initialized\nINFO     backend.middleware.legacy_middleware:legacy_middleware.py:177 Legacy endpoint accessed: GET /api/health (count: 6)\nINFO     backend.middleware.request_id_middleware:request_id_middleware.py:67 Request started: GET /api/health\nINFO     backend.core.app:app.py:350 [API] /api/health called (DEPRECATED)\nINFO     backend.middleware.request_id_middleware:request_id_middleware.py:92 Request completed: GET /api/health - 200\nINFO     backend.middleware.distributed_trace_middleware:distributed_trace_middleware.py:224 Trace completed: d504ea77-808b-409c-bbb6-659b7af450ec
_________________________ test_rate_limit_consumption _________________________
tests\rate_limit\test_rate_limit_basic.py:64: in test_rate_limit_consumption
    remaining1 = int(response1.headers["x-ratelimit-remaining"])
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
..\..\AppData\Roaming\Python\Python313\site-packages\httpx\_models.py:302: in __getitem__
    raise KeyError(key)
E   KeyError: 'x-ratelimit-remaining'
---------------------------- Captured stderr setup ----------------------------
2025-08-23 08:04:06,454 - backend.core.app - INFO - \U0001f680 Creating A1Betting canonical app...\n2025-08-23 08:04:06,454 - backend.core.app - INFO - \u2705 Request ID correlation middleware added\n2025-08-23 08:04:06,454 - backend.core.app - INFO - \u2705 Distributed trace correlation middleware added\n2025-08-23 08:04:06,454 - backend.core.app - INFO - \u2705 Structured logging middleware added\n2025-08-23 08:04:06,454 - backend.core.app - INFO - \u2705 Prometheus metrics middleware added\n2025-08-23 08:04:06,454 - backend.core.app - INFO - \u2705 Payload guard middleware added: max_size=262144 bytes, enforce_json=True, enabled=True\n2025-08-23 08:04:06,454 - backend.middleware.rate_limit - INFO - Rate limiting disabled\n2025-08-23 08:04:06,454 - backend.core.app - INFO - \u2705 Rate limiting middleware added: 100/min, burst=200, enabled=False\n2025-08-23 08:04:06,454 - backend.core.app - INFO - \u2705 Security headers middleware added: [HSTS, CSP(report-only), COOP, COEP], x_frame_options=DENY\n2025-08-23 08:04:06,454 - backend.core.app - INFO - \u2705 Legacy endpoint middleware added for usage telemetry and deprecation controls\n2025-08-23 08:04:06,454 - backend.exceptions.handlers - INFO - \u2705 PayloadRejectionError handler registered\n2025-08-23 08:04:06,454 - backend.exceptions.handlers - INFO - \u2705 All exception handlers registered with structured error taxonomy\n2025-08-23 08:04:06,454 - backend.core.app - INFO - \u2705 Centralized exception handlers registered\n2025-08-23 08:04:06,456 - backend.core.app - INFO - \u2705 PR11 Enhanced WebSocket client route included (/ws/client)\n2025-08-23 08:04:06,459 - backend.core.app - INFO - \u2705 Auth routes also exposed at root (/auth/*) for compatibility\n2025-08-23 08:04:06,459 - backend.core.app - INFO - \u2705 Auth and users routes included (auth with /api prefix)\n2025-08-23 08:04:06,460 - backend.core.app - INFO - \u2705 Diagnostics routes included (/api/v2/diagnostics/health, /api/v2/diagnostics/system)\n2025-08-23 08:04:06,461 - backend.core.app - INFO - \u2705 Meta cache routes included (/api/v2/meta/cache-stats, /api/v2/meta/cache-health)\n2025-08-23 08:04:06,462 - backend.core.app - INFO - \u2705 Legacy meta routes included (/api/v2/meta/legacy-usage, /api/v2/meta/migration-readiness)\n2025-08-23 08:04:06,464 - backend.core.app - ERROR - \u274c Failed to register CSP report routes: Invalid args for response field! Hint: check that <class 'logging.Logger'> is a valid Pydantic field type. If you are using a return type annotation that is not a valid Pydantic field (e.g. Union[Response, dict, None]) you can disable generating the response model from the type annotation with the path operation decorator parameter response_model=None. Read more: https://fastapi.tiangolo.com/tutorial/response-model/\n2025-08-23 08:04:06,464 - backend.core.app - INFO - \u2705 Trace test routes included (/api/trace/* endpoints)\n2025-08-23 08:04:06,466 - backend.core.app - INFO - \u2705 Model inference routes included (/api/v2/models/* endpoints)\n2025-08-23 08:04:06,467 - backend.core.app - INFO - \u2705 Observability events routes included (/api/v2/observability/* endpoints)\n2025-08-23 08:04:06,468 - backend.core.app - INFO - \u2705 Admin control routes included (/api/v2/models/shadow/* and /api/v2/models/admin/* endpoints)\n2025-08-23 08:04:06,471 - backend.core.app - INFO - \u2705 Enhanced WebSocket routes included (/ws/v2/* endpoints)\n2025-08-23 08:04:06,472 - backend.core.app - INFO - \u2705 WebSocket logging routes included (/api/websocket/* endpoints)\n2025-08-23 08:04:06,473 - backend.core.app - INFO - \u2705 Version routes included (/api/version/* endpoints)\n2025-08-23 08:04:06,473 - backend.core.app - INFO - \u2705 WebVitals pipeline routes included (/api/metrics/v1/* endpoints)\n2025-08-23 08:04:06,477 - backend.core.app - INFO - \u2705 Enhanced ML routes included (/api/enhanced-ml/* endpoints)\n2025-08-23 08:04:06,478 - backend.core.app - INFO - \u2705 Fallback enhanced-ml compatibility router mounted at /api/enhanced-ml\n2025-08-23 08:04:06,482 - backend.core.app - INFO - \u2705 Consolidated PrizePicks routes included (/api/v2/prizepicks/* endpoints)\n2025-08-23 08:04:06,486 - backend.core.app - INFO - \u2705 Consolidated ML routes included (/api/v2/ml/* endpoints)\n2025-08-23 08:04:06,488 - backend.core.app - ERROR - \u274c Failed to register consolidated Admin routes: parameter without a default follows parameter with a default (consolidated_admin.py, line 165)\n2025-08-23 08:04:06,491 - backend.core.app - INFO - \u2705 Odds & Line Movement routes included (/v1/odds/* endpoints)\n2025-08-23 08:04:06,493 - backend.core.app - INFO - \u2705 Advanced-Kelly compatibility router mounted at /api/advanced-kelly\n2025-08-23 08:04:06,495 - backend.core.app - ERROR - \u274c Failed to register Risk Management & Personalization routes: 'NoneType' object has no attribute 'alert_evaluation_interval_seconds'\n2025-08-23 08:04:06,497 - backend.core.app - INFO - \u2705 Dependencies Health routes included (/api/dependencies/* endpoints)\n2025-08-23 08:04:06,499 - backend.core.app - INFO - \u2705 Provider Resilience routes included (/api/provider-resilience/* endpoints)\n2025-08-23 08:04:06,500 - backend.core.app - INFO - \u2705 System capabilities routes included (/api/system/* endpoints)\n2025-08-23 08:04:06,502 - backend.core.app - INFO - \u2705 Real-time market streaming routes included (/streaming/* endpoints)\n2025-08-23 08:04:06,502 - backend.core.app - INFO - \u2705 Security HEAD endpoints included (/api/* HEAD endpoints)\n2025-08-23 08:04:06,504 - backend.core.app - INFO - \u2705 ML Model Registry routes included (/api/models/* endpoints)\n2025-08-23 08:04:06,505 - backend.core.app - INFO - \u2705 Data ingestion routes included (/api/v1/ingestion/* endpoints)\n2025-08-23 08:04:06,511 - backend.core.app - INFO - \u2705 Enterprise model registry routes included (/api/models/enterprise/* endpoints)\n2025-08-23 08:04:06,515 - backend.core.app - INFO - \u2705 Alert engine routes included (/api/alert-engine/* endpoints)\n2025-08-23 08:04:06,518 - backend.core.app - INFO - \u2705 PropFinder routes included (/api/propfinder/* endpoints)\n2025-08-23 08:04:06,519 - backend.core.app - WARNING - \u26a0\ufe0f Could not import multiple_sportsbook_routes: cannot import name 'RateLimiter' from 'backend.middleware.rate_limit' (C:\\Users\\bcmad\\Downloads\\A1Betting7-13.2\\backend\\middleware\\rate_limit.py)\n2025-08-23 08:04:06,522 - backend.core.app - INFO - \u2705 Sportsbook compatibility router mounted at /api/sportsbook\n2025-08-23 08:04:06,522 - backend.core.app - INFO - \U0001f50d Bootstrap validation scheduled on startup\n2025-08-23 08:04:06,522 - backend.core.app - INFO - \U0001f3e5 Health endpoints normalized: /api/health, /health, /api/v2/health -> identical envelope format\n2025-08-23 08:04:06,522 - backend.core.app - INFO - \u2705 A1Betting canonical app created successfully
----------------------------- Captured log setup ------------------------------
INFO     backend.core.app:app.py:65 \U0001f680 Creating A1Betting canonical app...\nINFO     backend.core.app:app.py:104 \u2705 Request ID correlation middleware added\nINFO     backend.core.app:app.py:114 \u2705 Distributed trace correlation middleware added\nINFO     backend.core.app:app.py:126 \u2705 Structured logging middleware added\nINFO     backend.core.app:app.py:146 \u2705 Prometheus metrics middleware added\nINFO     backend.core.app:app.py:167 \u2705 Payload guard middleware added: max_size=262144 bytes, enforce_json=True, enabled=True\nINFO     backend.middleware.rate_limit:rate_limit.py:90 Rate limiting disabled\nINFO     backend.core.app:app.py:202 \u2705 Rate limiting middleware added: 100/min, burst=200, enabled=False\nINFO     backend.core.app:app.py:244 \u2705 Security headers middleware added: [HSTS, CSP(report-only), COOP, COEP], x_frame_options=DENY\nINFO     backend.core.app:app.py:259 \u2705 Legacy endpoint middleware added for usage telemetry and deprecation controls\nINFO     backend.exceptions.handlers:handlers.py:235 \u2705 PayloadRejectionError handler registered\nINFO     backend.exceptions.handlers:handlers.py:250 \u2705 All exception handlers registered with structured error taxonomy\nINFO     backend.core.app:app.py:269 \u2705 Centralized exception handlers registered\nINFO     backend.core.app:app.py:332 \u2705 PR11 Enhanced WebSocket client route included (/ws/client)\nINFO     backend.core.app:app.py:702 \u2705 Auth routes also exposed at root (/auth/*) for compatibility\nINFO     backend.core.app:app.py:706 \u2705 Auth and users routes included (auth with /api prefix)\nINFO     backend.core.app:app.py:714 \u2705 Diagnostics routes included (/api/v2/diagnostics/health, /api/v2/diagnostics/system)\nINFO     backend.core.app:app.py:763 \u2705 Meta cache routes included (/api/v2/meta/cache-stats, /api/v2/meta/cache-health)\nINFO     backend.core.app:app.py:773 \u2705 Legacy meta routes included (/api/v2/meta/legacy-usage, /api/v2/meta/migration-readiness)\nERROR    backend.core.app:app.py:788 \u274c Failed to register CSP report routes: Invalid args for response field! Hint: check that <class 'logging.Logger'> is a valid Pydantic field type. If you are using a return type annotation that is not a valid Pydantic field (e.g. Union[Response, dict, None]) you can disable generating the response model from the type annotation with the path operation decorator parameter response_model=None. Read more: https://fastapi.tiangolo.com/tutorial/response-model/\nINFO     backend.core.app:app.py:794 \u2705 Trace test routes included (/api/trace/* endpoints)\nINFO     backend.core.app:app.py:804 \u2705 Model inference routes included (/api/v2/models/* endpoints)\nINFO     backend.core.app:app.py:814 \u2705 Observability events routes included (/api/v2/observability/* endpoints)\nINFO     backend.core.app:app.py:824 \u2705 Admin control routes included (/api/v2/models/shadow/* and /api/v2/models/admin/* endpoints)\nINFO     backend.core.app:app.py:834 \u2705 Enhanced WebSocket routes included (/ws/v2/* endpoints)\nINFO     backend.core.app:app.py:844 \u2705 WebSocket logging routes included (/api/websocket/* endpoints)\nINFO     backend.core.app:app.py:854 \u2705 Version routes included (/api/version/* endpoints)\nINFO     backend.core.app:app.py:864 \u2705 WebVitals pipeline routes included (/api/metrics/v1/* endpoints)\nINFO     backend.core.app:app.py:874 \u2705 Enhanced ML routes included (/api/enhanced-ml/* endpoints)\nINFO     backend.core.app:app.py:986 \u2705 Fallback enhanced-ml compatibility router mounted at /api/enhanced-ml\nINFO     backend.core.app:app.py:995 \u2705 Consolidated PrizePicks routes included (/api/v2/prizepicks/* endpoints)\nINFO     backend.core.app:app.py:1005 \u2705 Consolidated ML routes included (/api/v2/ml/* endpoints)\nERROR    backend.core.app:app.py:1019 \u274c Failed to register consolidated Admin routes: parameter without a default follows parameter with a default (consolidated_admin.py, line 165)\nINFO     backend.core.app:app.py:1025 \u2705 Odds & Line Movement routes included (/v1/odds/* endpoints)\nINFO     backend.core.app:app.py:1066 \u2705 Advanced-Kelly compatibility router mounted at /api/advanced-kelly\nERROR    backend.core.app:app.py:1078 \u274c Failed to register Risk Management & Personalization routes: 'NoneType' object has no attribute 'alert_evaluation_interval_seconds'\nINFO     backend.core.app:app.py:1084 \u2705 Dependencies Health routes included (/api/dependencies/* endpoints)\nINFO     backend.core.app:app.py:1094 \u2705 Provider Resilience routes included (/api/provider-resilience/* endpoints)\nINFO     backend.core.app:app.py:1104 \u2705 System capabilities routes included (/api/system/* endpoints)\nINFO     backend.core.app:app.py:1114 \u2705 Real-time market streaming routes included (/streaming/* endpoints)\nINFO     backend.core.app:app.py:1124 \u2705 Security HEAD endpoints included (/api/* HEAD endpoints)\nINFO     backend.core.app:app.py:1134 \u2705 ML Model Registry routes included (/api/models/* endpoints)\nINFO     backend.core.app:app.py:1144 \u2705 Data ingestion routes included (/api/v1/ingestion/* endpoints)\nINFO     backend.core.app:app.py:1154 \u2705 Enterprise model registry routes included (/api/models/enterprise/* endpoints)\nINFO     backend.core.app:app.py:1199 \u2705 Alert engine routes included (/api/alert-engine/* endpoints)\nINFO     backend.core.app:app.py:1209 \u2705 PropFinder routes included (/api/propfinder/* endpoints)\nWARNING  backend.core.app:app.py:1221 \u26a0\ufe0f Could not import multiple_sportsbook_routes: cannot import name 'RateLimiter' from 'backend.middleware.rate_limit' (C:\\Users\\bcmad\\Downloads\\A1Betting7-13.2\\backend\\middleware\\rate_limit.py)\nINFO     backend.core.app:app.py:1495 \u2705 Sportsbook compatibility router mounted at /api/sportsbook\nINFO     backend.core.app:app.py:1527 \U0001f50d Bootstrap validation scheduled on startup\nINFO     backend.core.app:app.py:1535 \U0001f3e5 Health endpoints normalized: /api/health, /health, /api/v2/health -> identical envelope format\nINFO     backend.core.app:app.py:1536 \u2705 A1Betting canonical app created successfully
---------------------------- Captured stderr call -----------------------------
2025-08-23 08:04:06,525 - backend.middleware.rate_limit - INFO - Rate limiting disabled\n2025-08-23 08:04:06,525 - backend.middleware.security_headers - INFO - \u2705 Security headers middleware enabled: CSP=report-only, HSTS=True, strict_mode=False\n2025-08-23 08:04:06,525 - backend.middleware.legacy_middleware - INFO - Registered known legacy endpoints with forwarding paths\n2025-08-23 08:04:06,525 - backend.middleware.legacy_middleware - INFO - Legacy middleware initialized\n2025-08-23 08:04:06,526 - backend.middleware.legacy_middleware - INFO - Legacy endpoint accessed: GET /api/health (count: 7)\n{"timestamp": "2025-08-23T13:04:06.526250", "level": "INFO", "logger": "a1betting", "message": "Request started", "module": "structured_logging_middleware", "function": "log_request_start", "line": 109, "request_id": "e3ee1cae-dfb5-4f2e-b55e-7568bfae3829", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro", "event_type": "request_start", "method": "GET", "url": "http://testserver/api/health", "path": "/api/health", "query_params": {}, "client_ip": "testclient", "user_agent": "testclient", "content_type": null}\n2025-08-23 08:04:06,526 - backend.middleware.request_id_middleware - INFO - Request started: GET /api/health\n2025-08-23 08:04:06,526 - backend.core.app - INFO - [API] /api/health called (DEPRECATED)\n2025-08-23 08:04:06,526 - backend.middleware.request_id_middleware - INFO - Request completed: GET /api/health - 200\n2025-08-23 08:04:06,526 - backend.middleware.distributed_trace_middleware - INFO - Trace completed: ea5bfc9f-8154-4497-a9f4-aaed07381541\n{"timestamp": "2025-08-23T13:04:06.527062", "level": "INFO", "logger": "a1betting", "message": "Request completed", "module": "structured_logging_middleware", "function": "log_request_success", "line": 124, "request_id": "e3ee1cae-dfb5-4f2e-b55e-7568bfae3829", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro", "event_type": "request_success", "method": "GET", "url": "http://testserver/api/health", "path": "/api/health", "status_code": 200, "duration_ms": 0.83, "response_size": "277", "performance_category": "fast"}
------------------------------ Captured log call ------------------------------
INFO     backend.middleware.rate_limit:rate_limit.py:90 Rate limiting disabled\nINFO     backend.middleware.security_headers:security_headers.py:71 \u2705 Security headers middleware enabled: CSP=report-only, HSTS=True, strict_mode=False\nINFO     backend.middleware.legacy_middleware:legacy_middleware.py:68 Registered known legacy endpoints with forwarding paths\nINFO     backend.middleware.legacy_middleware:legacy_middleware.py:44 Legacy middleware initialized\nINFO     backend.middleware.legacy_middleware:legacy_middleware.py:177 Legacy endpoint accessed: GET /api/health (count: 7)\nINFO     backend.middleware.request_id_middleware:request_id_middleware.py:67 Request started: GET /api/health\nINFO     backend.core.app:app.py:350 [API] /api/health called (DEPRECATED)\nINFO     backend.middleware.request_id_middleware:request_id_middleware.py:92 Request completed: GET /api/health - 200\nINFO     backend.middleware.distributed_trace_middleware:distributed_trace_middleware.py:224 Trace completed: ea5bfc9f-8154-4497-a9f4-aaed07381541
_____________________ test_rate_limit_middleware_dispatch _____________________
tests\rate_limit\test_rate_limit_basic.py:262: in test_rate_limit_middleware_dispatch
    result = await middleware.dispatch(mock_request, call_next)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
backend\middleware\rate_limit.py:207: in dispatch
    client_id = self._get_client_identifier(request)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
backend\middleware\rate_limit.py:155: in _get_client_identifier
    return ip_header.split(",")[0].strip()
           ^^^^^^^^^^^^^^^^^^^^^^^
E   TypeError: 'Mock' object is not subscriptable
---------------------------- Captured stderr call -----------------------------
2025-08-23 08:04:07,007 - backend.middleware.rate_limit - INFO - Rate limit metrics integration enabled
2025-08-23 08:04:07,008 - backend.middleware.rate_limit - INFO - Rate limiting enabled: 60/min, burst=100, cleanup_interval=300s
------------------------------ Captured log call ------------------------------
INFO     backend.middleware.rate_limit:rate_limit.py:120 Rate limit metrics integration enabled
INFO     backend.middleware.rate_limit:rate_limit.py:106 Rate limiting enabled: 60/min, burst=100, cleanup_interval=300s
_____________ TestBasicSecurityHeaders.test_hsts_header_disabled ______________
tests\security\test_security_headers.py:81: in test_hsts_header_disabled
    middleware._apply_static_headers(response)
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'SecurityHeadersMiddleware' object has no attribute '_apply_static_headers'. Did you mean: '_build_static_headers'?
---------------------------- Captured stderr call -----------------------------
2025-08-23 08:04:07,079 - backend.middleware.security_headers - INFO - \u2705 Security headers middleware enabled: CSP=report-only, HSTS=False, strict_mode=False
------------------------------ Captured log call ------------------------------
INFO     backend.middleware.security_headers:security_headers.py:71 \u2705 Security headers middleware enabled: CSP=report-only, HSTS=False, strict_mode=False
_____________ TestBasicSecurityHeaders.test_x_frame_options_deny ______________
tests\security\test_security_headers.py:98: in test_x_frame_options_deny
    middleware._apply_static_headers(response)
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'SecurityHeadersMiddleware' object has no attribute '_apply_static_headers'. Did you mean: '_build_static_headers'?
---------------------------- Captured stderr call -----------------------------
2025-08-23 08:04:07,084 - backend.middleware.security_headers - INFO - \u2705 Security headers middleware enabled: CSP=report-only, HSTS=True, strict_mode=False
------------------------------ Captured log call ------------------------------
INFO     backend.middleware.security_headers:security_headers.py:71 \u2705 Security headers middleware enabled: CSP=report-only, HSTS=True, strict_mode=False
__________ TestBasicSecurityHeaders.test_x_frame_options_sameorigin ___________
tests\security\test_security_headers.py:115: in test_x_frame_options_sameorigin
    middleware._apply_static_headers(response)
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'SecurityHeadersMiddleware' object has no attribute '_apply_static_headers'. Did you mean: '_build_static_headers'?
---------------------------- Captured stderr call -----------------------------
2025-08-23 08:04:07,089 - backend.middleware.security_headers - INFO - \u2705 Security headers middleware enabled: CSP=report-only, HSTS=True, strict_mode=False
------------------------------ Captured log call ------------------------------
INFO     backend.middleware.security_headers:security_headers.py:71 \u2705 Security headers middleware enabled: CSP=report-only, HSTS=True, strict_mode=False
____________ TestBasicSecurityHeaders.test_x_content_type_options _____________
tests\security\test_security_headers.py:131: in test_x_content_type_options
    middleware._apply_static_headers(response)
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'SecurityHeadersMiddleware' object has no attribute '_apply_static_headers'. Did you mean: '_build_static_headers'?
---------------------------- Captured stderr call -----------------------------
2025-08-23 08:04:07,094 - backend.middleware.security_headers - INFO - \u2705 Security headers middleware enabled: CSP=report-only, HSTS=True, strict_mode=False
------------------------------ Captured log call ------------------------------
INFO     backend.middleware.security_headers:security_headers.py:71 \u2705 Security headers middleware enabled: CSP=report-only, HSTS=True, strict_mode=False
__________ TestBasicSecurityHeaders.test_all_basic_headers_disabled ___________
tests\security\test_security_headers.py:149: in test_all_basic_headers_disabled
    middleware._apply_static_headers(response)
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'SecurityHeadersMiddleware' object has no attribute '_apply_static_headers'. Did you mean: '_build_static_headers'?
---------------------------- Captured stderr call -----------------------------
2025-08-23 08:04:07,099 - backend.middleware.security_headers - WARNING - \u26a0\ufe0f Security headers middleware DISABLED
------------------------------ Captured log call ------------------------------
WARNING  backend.middleware.security_headers:security_headers.py:76 \u26a0\ufe0f Security headers middleware DISABLED
_________________ TestCSPFunctionality.test_csp_basic_policy __________________
tests\security\test_security_headers.py:167: in test_csp_basic_policy
    settings = SecuritySettings(
..\..\AppData\Roaming\Python\Python313\site-packages\pydantic_settings\main.py:188: in __init__
    super().__init__(
E   pydantic_core._pydantic_core.ValidationError: 1 validation error for SecuritySettings
E   csp_extra_connect_src
E     Input should be a valid string [type=string_type, input_value=[], input_type=list]
E       For further information visit https://errors.pydantic.dev/2.11/v/string_type
____________ TestCSPFunctionality.test_csp_with_extra_connect_src _____________
tests\security\test_security_headers.py:186: in test_csp_with_extra_connect_src
    settings = SecuritySettings(
..\..\AppData\Roaming\Python\Python313\site-packages\pydantic_settings\main.py:188: in __init__
    super().__init__(
E   pydantic_core._pydantic_core.ValidationError: 1 validation error for SecuritySettings
E   csp_extra_connect_src
E     Input should be a valid string [type=string_type, input_value=['https://api.example.com...ttps://cdn.example.com'], input_type=list]
E       For further information visit https://errors.pydantic.dev/2.11/v/string_type
__________________ TestCSPFunctionality.test_csp_report_uri ___________________
tests\security\test_security_headers.py:215: in test_csp_report_uri
    assert "report-uri /api/security/csp-report" in csp_value
E   assert 'report-uri /api/security/csp-report' in "default-src 'self'; script-src 'self'; style-src 'self' 'unsafe-inline'; img-src 'self' data:; font-src 'self'; objec...ors 'none'; base-uri 'self'; form-action 'self'; connect-src 'self'; upgrade-insecure-requests; report-uri /csp/report"
_________________ TestCSPFunctionality.test_csp_enforce_mode __________________
tests\security\test_security_headers.py:229: in test_csp_enforce_mode
    assert middleware._csp_header_name == 'Content-Security-Policy'
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'SecurityHeadersMiddleware' object has no attribute '_csp_header_name'
---------------------------- Captured stderr call -----------------------------
2025-08-23 08:04:07,126 - backend.middleware.security_headers - INFO - \u2705 Security headers middleware enabled: CSP=enforced, HSTS=True, strict_mode=False
------------------------------ Captured log call ------------------------------
INFO     backend.middleware.security_headers:security_headers.py:71 \u2705 Security headers middleware enabled: CSP=enforced, HSTS=True, strict_mode=False
_______________ TestCSPFunctionality.test_csp_report_only_mode ________________
tests\security\test_security_headers.py:243: in test_csp_report_only_mode
    assert middleware._csp_header_name == 'Content-Security-Policy-Report-Only'
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'SecurityHeadersMiddleware' object has no attribute '_csp_header_name'
---------------------------- Captured stderr call -----------------------------
2025-08-23 08:04:07,131 - backend.middleware.security_headers - INFO - \u2705 Security headers middleware enabled: CSP=report-only, HSTS=True, strict_mode=False
------------------------------ Captured log call ------------------------------
INFO     backend.middleware.security_headers:security_headers.py:71 \u2705 Security headers middleware enabled: CSP=report-only, HSTS=True, strict_mode=False
___________________ TestCSPFunctionality.test_csp_disabled ____________________
tests\security\test_security_headers.py:256: in test_csp_disabled
    assert middleware._csp_header_name is None
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'SecurityHeadersMiddleware' object has no attribute '_csp_header_name'
---------------------------- Captured stderr call -----------------------------
2025-08-23 08:04:07,136 - backend.middleware.security_headers - INFO - \u2705 Security headers middleware enabled: CSP=report-only, HSTS=True, strict_mode=False
------------------------------ Captured log call ------------------------------
INFO     backend.middleware.security_headers:security_headers.py:71 \u2705 Security headers middleware enabled: CSP=report-only, HSTS=True, strict_mode=False
_________ TestCrossOriginPolicies.test_coop_same_origin_allow_popups __________
tests\security\test_security_headers.py:265: in test_coop_same_origin_allow_popups
    settings = SecuritySettings(
..\..\AppData\Roaming\Python\Python313\site-packages\pydantic_settings\main.py:188: in __init__
    super().__init__(
E   pydantic_core._pydantic_core.ValidationError: 1 validation error for SecuritySettings
E   coop_policy
E     Extra inputs are not permitted [type=extra_forbidden, input_value='same-origin-allow-popups', input_type=str]
E       For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
_________________ TestCrossOriginPolicies.test_coop_disabled __________________
tests\security\test_security_headers.py:294: in test_coop_disabled
    middleware._apply_static_headers(response)
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'SecurityHeadersMiddleware' object has no attribute '_apply_static_headers'. Did you mean: '_build_static_headers'?
---------------------------- Captured stderr call -----------------------------
2025-08-23 08:04:07,148 - backend.middleware.security_headers - INFO - \u2705 Security headers middleware enabled: CSP=report-only, HSTS=True, strict_mode=False
------------------------------ Captured log call ------------------------------
INFO     backend.middleware.security_headers:security_headers.py:71 \u2705 Security headers middleware enabled: CSP=report-only, HSTS=True, strict_mode=False
_______________ TestCrossOriginPolicies.test_coep_require_corp ________________
tests\security\test_security_headers.py:300: in test_coep_require_corp
    settings = SecuritySettings(
..\..\AppData\Roaming\Python\Python313\site-packages\pydantic_settings\main.py:188: in __init__
    super().__init__(
E   pydantic_core._pydantic_core.ValidationError: 1 validation error for SecuritySettings
E   coep_policy
E     Extra inputs are not permitted [type=extra_forbidden, input_value='require-corp', input_type=str]
E       For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
_________________ TestCrossOriginPolicies.test_coep_disabled __________________
tests\security\test_security_headers.py:329: in test_coep_disabled
    middleware._apply_static_headers(response)
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'SecurityHeadersMiddleware' object has no attribute '_apply_static_headers'. Did you mean: '_build_static_headers'?
---------------------------- Captured stderr call -----------------------------
2025-08-23 08:04:07,161 - backend.middleware.security_headers - INFO - \u2705 Security headers middleware enabled: CSP=report-only, HSTS=True, strict_mode=False
------------------------------ Captured log call ------------------------------
INFO     backend.middleware.security_headers:security_headers.py:71 \u2705 Security headers middleware enabled: CSP=report-only, HSTS=True, strict_mode=False
_________________ TestCrossOriginPolicies.test_corp_same_site _________________
tests\security\test_security_headers.py:335: in test_corp_same_site
    settings = SecuritySettings(
..\..\AppData\Roaming\Python\Python313\site-packages\pydantic_settings\main.py:188: in __init__
    super().__init__(
E   pydantic_core._pydantic_core.ValidationError: 2 validation errors for SecuritySettings
E   enable_corp
E     Extra inputs are not permitted [type=extra_forbidden, input_value=True, input_type=bool]
E       For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
E   corp_policy
E     Extra inputs are not permitted [type=extra_forbidden, input_value='same-site', input_type=str]
E       For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
_________________ TestCrossOriginPolicies.test_corp_disabled __________________
tests\security\test_security_headers.py:353: in test_corp_disabled
    settings = SecuritySettings(
..\..\AppData\Roaming\Python\Python313\site-packages\pydantic_settings\main.py:188: in __init__
    super().__init__(
E   pydantic_core._pydantic_core.ValidationError: 1 validation error for SecuritySettings
E   enable_corp
E     Extra inputs are not permitted [type=extra_forbidden, input_value=False, input_type=bool]
E       For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
_____________ TestPermissionsPolicy.test_permissions_policy_basic _____________
tests\security\test_security_headers.py:385: in test_permissions_policy_basic
    middleware._apply_static_headers(response)
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'SecurityHeadersMiddleware' object has no attribute '_apply_static_headers'. Did you mean: '_build_static_headers'?
---------------------------- Captured stderr call -----------------------------
2025-08-23 08:04:07,181 - backend.middleware.security_headers - INFO - \u2705 Security headers middleware enabled: CSP=report-only, HSTS=True, strict_mode=False
------------------------------ Captured log call ------------------------------
INFO     backend.middleware.security_headers:security_headers.py:71 \u2705 Security headers middleware enabled: CSP=report-only, HSTS=True, strict_mode=False
__________ TestPermissionsPolicy.test_permissions_policy_with_append __________
tests\security\test_security_headers.py:410: in test_permissions_policy_with_append
    middleware._apply_static_headers(response)
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'SecurityHeadersMiddleware' object has no attribute '_apply_static_headers'. Did you mean: '_build_static_headers'?
---------------------------- Captured stderr call -----------------------------
2025-08-23 08:04:07,186 - backend.middleware.security_headers - INFO - \u2705 Security headers middleware enabled: CSP=report-only, HSTS=True, strict_mode=False
------------------------------ Captured log call ------------------------------
INFO     backend.middleware.security_headers:security_headers.py:71 \u2705 Security headers middleware enabled: CSP=report-only, HSTS=True, strict_mode=False
____________ TestMetricsIntegration.test_metrics_tracking_enabled _____________
tests\security\test_security_headers.py:441: in test_metrics_tracking_enabled
    middleware._apply_static_headers(response)
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'SecurityHeadersMiddleware' object has no attribute '_apply_static_headers'. Did you mean: '_build_static_headers'?
---------------------------- Captured stderr call -----------------------------
2025-08-23 08:04:07,192 - backend.middleware.security_headers - INFO - \u2705 Security headers middleware enabled: CSP=report-only, HSTS=True, strict_mode=False
------------------------------ Captured log call ------------------------------
INFO     backend.middleware.security_headers:security_headers.py:71 \u2705 Security headers middleware enabled: CSP=report-only, HSTS=True, strict_mode=False
____________ TestMetricsIntegration.test_metrics_tracking_disabled ____________
tests\security\test_security_headers.py:461: in test_metrics_tracking_disabled
    middleware._apply_static_headers(response)
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'SecurityHeadersMiddleware' object has no attribute '_apply_static_headers'. Did you mean: '_build_static_headers'?
---------------------------- Captured stderr call -----------------------------
2025-08-23 08:04:07,197 - backend.middleware.security_headers - INFO - \u2705 Security headers middleware enabled: CSP=report-only, HSTS=True, strict_mode=False
------------------------------ Captured log call ------------------------------
INFO     backend.middleware.security_headers:security_headers.py:71 \u2705 Security headers middleware enabled: CSP=report-only, HSTS=True, strict_mode=False
____________ TestConfiguration.test_security_strict_mode_override _____________
tests\security\test_security_headers.py:499: in test_security_strict_mode_override
    assert middleware._csp_header_name == 'Content-Security-Policy'
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'SecurityHeadersMiddleware' object has no attribute '_csp_header_name'
---------------------------- Captured stderr call -----------------------------
2025-08-23 08:04:07,204 - backend.config.settings - INFO - SECURITY_STRICT_MODE enabled: forcing CSP_REPORT_ONLY=False for enforcement\n2025-08-23 08:04:07,204 - backend.middleware.security_headers - INFO - \u2705 Security headers middleware enabled: CSP=enforced, HSTS=True, strict_mode=True
------------------------------ Captured log call ------------------------------
INFO     backend.config.settings:settings.py:196 SECURITY_STRICT_MODE enabled: forcing CSP_REPORT_ONLY=False for enforcement\nINFO     backend.middleware.security_headers:security_headers.py:71 \u2705 Security headers middleware enabled: CSP=enforced, HSTS=True, strict_mode=True
______________ TestConfiguration.test_csp_extra_connect_src_list ______________
tests\security\test_security_headers.py:522: in test_csp_extra_connect_src_list
    settings = SecuritySettings(
..\..\AppData\Roaming\Python\Python313\site-packages\pydantic_settings\main.py:188: in __init__
    super().__init__(
E   pydantic_core._pydantic_core.ValidationError: 1 validation error for SecuritySettings
E   csp_extra_connect_src
E     Input should be a valid string [type=string_type, input_value=['https://api.example.com.../websocket.example.com'], input_type=list]
E       For further information visit https://errors.pydantic.dev/2.11/v/string_type
_____________ TestConfiguration.test_csp_extra_connect_src_empty ______________
tests\security\test_security_headers.py:532: in test_csp_extra_connect_src_empty
    settings = SecuritySettings(
..\..\AppData\Roaming\Python\Python313\site-packages\pydantic_settings\main.py:188: in __init__
    super().__init__(
E   pydantic_core._pydantic_core.ValidationError: 1 validation error for SecuritySettings
E   csp_extra_connect_src
E     Input should be a valid string [type=string_type, input_value=[], input_type=list]
E       For further information visit https://errors.pydantic.dev/2.11/v/string_type
___________ TestPerformanceAndOrdering.test_debug_logging_sampling ____________
tests\security\test_security_headers.py:641: in test_debug_logging_sampling
    middleware._apply_static_headers(response)
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'SecurityHeadersMiddleware' object has no attribute '_apply_static_headers'. Did you mean: '_build_static_headers'?
---------------------------- Captured stderr call -----------------------------
2025-08-23 08:04:07,236 - backend.middleware.security_headers - INFO - \u2705 Security headers middleware enabled: CSP=report-only, HSTS=True, strict_mode=False
------------------------------ Captured log call ------------------------------
INFO     backend.middleware.security_headers:security_headers.py:71 \u2705 Security headers middleware enabled: CSP=report-only, HSTS=True, strict_mode=False
______________ TestCSPHeaderGeneration.test_basic_csp_generation ______________
tests\security\test_security_headers_basic.py:41: in test_basic_csp_generation
    assert "report-uri /api/security/csp-report" in csp_value
E   assert 'report-uri /api/security/csp-report' in "default-src 'self'; script-src 'self'; style-src 'self' 'unsafe-inline'; img-src 'self' data:; font-src 'self'; objec...ors 'none'; base-uri 'self'; form-action 'self'; connect-src 'self'; upgrade-insecure-requests; report-uri /csp/report"
_____________ TestSecurityHeadersMiddleware.test_csp_header_names _____________
tests\security\test_security_headers_basic.py:152: in test_csp_header_names
    assert middleware_enforce._csp_header_name == 'Content-Security-Policy'
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'SecurityHeadersMiddleware' object has no attribute '_csp_header_name'
---------------------------- Captured stderr call -----------------------------
2025-08-23 08:04:07,255 - backend.middleware.security_headers - INFO - \u2705 Security headers middleware enabled: CSP=enforced, HSTS=True, strict_mode=False
------------------------------ Captured log call ------------------------------
INFO     backend.middleware.security_headers:security_headers.py:71 \u2705 Security headers middleware enabled: CSP=enforced, HSTS=True, strict_mode=False
______________ TestBasicSecurityHeaders.test_hsts_header_enabled ______________
tests\security\test_security_headers_core.py:51: in test_hsts_header_enabled
    middleware._apply_static_headers(response)
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'SecurityHeadersMiddleware' object has no attribute '_apply_static_headers'. Did you mean: '_build_static_headers'?
---------------------------- Captured stderr call -----------------------------
2025-08-23 08:04:07,287 - backend.middleware.security_headers - INFO - \u2705 Security headers middleware enabled: CSP=report-only, HSTS=True, strict_mode=False
------------------------------ Captured log call ------------------------------
INFO     backend.middleware.security_headers:security_headers.py:71 \u2705 Security headers middleware enabled: CSP=report-only, HSTS=True, strict_mode=False
_____________ TestBasicSecurityHeaders.test_hsts_header_disabled ______________
tests\security\test_security_headers_core.py:72: in test_hsts_header_disabled
    middleware._apply_static_headers(response)
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'SecurityHeadersMiddleware' object has no attribute '_apply_static_headers'. Did you mean: '_build_static_headers'?
---------------------------- Captured stderr call -----------------------------
2025-08-23 08:04:07,291 - backend.middleware.security_headers - INFO - \u2705 Security headers middleware enabled: CSP=report-only, HSTS=False, strict_mode=False
------------------------------ Captured log call ------------------------------
INFO     backend.middleware.security_headers:security_headers.py:71 \u2705 Security headers middleware enabled: CSP=report-only, HSTS=False, strict_mode=False
_____________ TestBasicSecurityHeaders.test_x_frame_options_deny ______________
tests\security\test_security_headers_core.py:89: in test_x_frame_options_deny
    middleware._apply_static_headers(response)
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'SecurityHeadersMiddleware' object has no attribute '_apply_static_headers'. Did you mean: '_build_static_headers'?
---------------------------- Captured stderr call -----------------------------
2025-08-23 08:04:07,295 - backend.middleware.security_headers - INFO - \u2705 Security headers middleware enabled: CSP=report-only, HSTS=True, strict_mode=False
------------------------------ Captured log call ------------------------------
INFO     backend.middleware.security_headers:security_headers.py:71 \u2705 Security headers middleware enabled: CSP=report-only, HSTS=True, strict_mode=False
__________ TestBasicSecurityHeaders.test_x_frame_options_sameorigin ___________
tests\security\test_security_headers_core.py:106: in test_x_frame_options_sameorigin
    middleware._apply_static_headers(response)
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'SecurityHeadersMiddleware' object has no attribute '_apply_static_headers'. Did you mean: '_build_static_headers'?
---------------------------- Captured stderr call -----------------------------
2025-08-23 08:04:07,299 - backend.middleware.security_headers - INFO - \u2705 Security headers middleware enabled: CSP=report-only, HSTS=True, strict_mode=False
------------------------------ Captured log call ------------------------------
INFO     backend.middleware.security_headers:security_headers.py:71 \u2705 Security headers middleware enabled: CSP=report-only, HSTS=True, strict_mode=False
____________ TestBasicSecurityHeaders.test_x_content_type_options _____________
tests\security\test_security_headers_core.py:122: in test_x_content_type_options
    middleware._apply_static_headers(response)
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'SecurityHeadersMiddleware' object has no attribute '_apply_static_headers'. Did you mean: '_build_static_headers'?
---------------------------- Captured stderr call -----------------------------
2025-08-23 08:04:07,303 - backend.middleware.security_headers - INFO - \u2705 Security headers middleware enabled: CSP=report-only, HSTS=True, strict_mode=False
------------------------------ Captured log call ------------------------------
INFO     backend.middleware.security_headers:security_headers.py:71 \u2705 Security headers middleware enabled: CSP=report-only, HSTS=True, strict_mode=False
__________ TestBasicSecurityHeaders.test_all_basic_headers_disabled ___________
tests\security\test_security_headers_core.py:140: in test_all_basic_headers_disabled
    middleware._apply_static_headers(response)
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'SecurityHeadersMiddleware' object has no attribute '_apply_static_headers'. Did you mean: '_build_static_headers'?
---------------------------- Captured stderr call -----------------------------
2025-08-23 08:04:07,307 - backend.middleware.security_headers - WARNING - \u26a0\ufe0f Security headers middleware DISABLED
------------------------------ Captured log call ------------------------------
WARNING  backend.middleware.security_headers:security_headers.py:76 \u26a0\ufe0f Security headers middleware DISABLED
___________ TestCSPFunctionality.test_csp_upgrade_insecure_requests ___________
tests\security\test_security_headers_core.py:188: in test_csp_upgrade_insecure_requests
    settings = SecuritySettings(
..\..\AppData\Roaming\Python\Python313\site-packages\pydantic_settings\main.py:188: in __init__
    super().__init__(
E   pydantic_core._pydantic_core.ValidationError: 1 validation error for SecuritySettings
E   csp_upgrade_insecure_requests
E     Extra inputs are not permitted [type=extra_forbidden, input_value=True, input_type=bool]
E       For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
__________________ TestCSPFunctionality.test_csp_report_uri ___________________
tests\security\test_security_headers_core.py:198: in test_csp_report_uri
    settings = SecuritySettings(
..\..\AppData\Roaming\Python\Python313\site-packages\pydantic_settings\main.py:188: in __init__
    super().__init__(
E   pydantic_core._pydantic_core.ValidationError: 1 validation error for SecuritySettings
E   csp_report_uri
E     Extra inputs are not permitted [type=extra_forbidden, input_value='/csp/report', input_type=str]
E       For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
_________________ TestCSPFunctionality.test_csp_enforce_mode __________________
tests\security\test_security_headers_core.py:219: in test_csp_enforce_mode
    assert middleware._csp_header_name == 'Content-Security-Policy'
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'SecurityHeadersMiddleware' object has no attribute '_csp_header_name'
---------------------------- Captured stderr call -----------------------------
2025-08-23 08:04:07,328 - backend.middleware.security_headers - INFO - \u2705 Security headers middleware enabled: CSP=enforced, HSTS=True, strict_mode=False
------------------------------ Captured log call ------------------------------
INFO     backend.middleware.security_headers:security_headers.py:71 \u2705 Security headers middleware enabled: CSP=enforced, HSTS=True, strict_mode=False
_______________ TestCSPFunctionality.test_csp_report_only_mode ________________
tests\security\test_security_headers_core.py:234: in test_csp_report_only_mode
    assert middleware._csp_header_name == 'Content-Security-Policy-Report-Only'
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'SecurityHeadersMiddleware' object has no attribute '_csp_header_name'
---------------------------- Captured stderr call -----------------------------
2025-08-23 08:04:07,332 - backend.middleware.security_headers - INFO - \u2705 Security headers middleware enabled: CSP=report-only, HSTS=True, strict_mode=False
------------------------------ Captured log call ------------------------------
INFO     backend.middleware.security_headers:security_headers.py:71 \u2705 Security headers middleware enabled: CSP=report-only, HSTS=True, strict_mode=False
_________ TestCrossOriginPolicies.test_coop_same_origin_allow_popups __________
tests\security\test_security_headers_core.py:268: in test_coop_same_origin_allow_popups
    middleware._apply_static_headers(response)
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'SecurityHeadersMiddleware' object has no attribute '_apply_static_headers'. Did you mean: '_build_static_headers'?
---------------------------- Captured stderr call -----------------------------
2025-08-23 08:04:07,338 - backend.middleware.security_headers - INFO - \u2705 Security headers middleware enabled: CSP=report-only, HSTS=True, strict_mode=False
------------------------------ Captured log call ------------------------------
INFO     backend.middleware.security_headers:security_headers.py:71 \u2705 Security headers middleware enabled: CSP=report-only, HSTS=True, strict_mode=False
_________________ TestCrossOriginPolicies.test_coop_disabled __________________
tests\security\test_security_headers_core.py:285: in test_coop_disabled
    middleware._apply_static_headers(response)
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'SecurityHeadersMiddleware' object has no attribute '_apply_static_headers'. Did you mean: '_build_static_headers'?
---------------------------- Captured stderr call -----------------------------
2025-08-23 08:04:07,341 - backend.middleware.security_headers - INFO - \u2705 Security headers middleware enabled: CSP=report-only, HSTS=True, strict_mode=False
------------------------------ Captured log call ------------------------------
INFO     backend.middleware.security_headers:security_headers.py:71 \u2705 Security headers middleware enabled: CSP=report-only, HSTS=True, strict_mode=False
_______________ TestCrossOriginPolicies.test_coep_require_corp ________________
tests\security\test_security_headers_core.py:302: in test_coep_require_corp
    middleware._apply_static_headers(response)
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'SecurityHeadersMiddleware' object has no attribute '_apply_static_headers'. Did you mean: '_build_static_headers'?
---------------------------- Captured stderr call -----------------------------
2025-08-23 08:04:07,345 - backend.middleware.security_headers - INFO - \u2705 Security headers middleware enabled: CSP=report-only, HSTS=True, strict_mode=False
------------------------------ Captured log call ------------------------------
INFO     backend.middleware.security_headers:security_headers.py:71 \u2705 Security headers middleware enabled: CSP=report-only, HSTS=True, strict_mode=False
_________________ TestCrossOriginPolicies.test_coep_disabled __________________
tests\security\test_security_headers_core.py:319: in test_coep_disabled
    middleware._apply_static_headers(response)
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'SecurityHeadersMiddleware' object has no attribute '_apply_static_headers'. Did you mean: '_build_static_headers'?
---------------------------- Captured stderr call -----------------------------
2025-08-23 08:04:07,349 - backend.middleware.security_headers - INFO - \u2705 Security headers middleware enabled: CSP=report-only, HSTS=True, strict_mode=False
------------------------------ Captured log call ------------------------------
INFO     backend.middleware.security_headers:security_headers.py:71 \u2705 Security headers middleware enabled: CSP=report-only, HSTS=True, strict_mode=False
_________________ TestCrossOriginPolicies.test_corp_same_site _________________
tests\security\test_security_headers_core.py:325: in test_corp_same_site
    settings = SecuritySettings(
..\..\AppData\Roaming\Python\Python313\site-packages\pydantic_settings\main.py:188: in __init__
    super().__init__(
E   pydantic_core._pydantic_core.ValidationError: 1 validation error for SecuritySettings
E   enable_corp
E     Extra inputs are not permitted [type=extra_forbidden, input_value=True, input_type=bool]
E       For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
_________________ TestCrossOriginPolicies.test_corp_disabled __________________
tests\security\test_security_headers_core.py:342: in test_corp_disabled
    settings = SecuritySettings(
..\..\AppData\Roaming\Python\Python313\site-packages\pydantic_settings\main.py:188: in __init__
    super().__init__(
E   pydantic_core._pydantic_core.ValidationError: 1 validation error for SecuritySettings
E   enable_corp
E     Extra inputs are not permitted [type=extra_forbidden, input_value=False, input_type=bool]
E       For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
_____________ TestPermissionsPolicy.test_permissions_policy_basic _____________
tests\security\test_security_headers_core.py:363: in test_permissions_policy_basic
    settings = SecuritySettings(
..\..\AppData\Roaming\Python\Python313\site-packages\pydantic_settings\main.py:188: in __init__
    super().__init__(
E   pydantic_core._pydantic_core.ValidationError: 1 validation error for SecuritySettings
E   permissions_policy_enabled
E     Extra inputs are not permitted [type=extra_forbidden, input_value=True, input_type=bool]
E       For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
__________ TestPermissionsPolicy.test_permissions_policy_with_append __________
tests\security\test_security_headers_core.py:386: in test_permissions_policy_with_append
    settings = SecuritySettings(
..\..\AppData\Roaming\Python\Python313\site-packages\pydantic_settings\main.py:188: in __init__
    super().__init__(
E   pydantic_core._pydantic_core.ValidationError: 1 validation error for SecuritySettings
E   permissions_policy_enabled
E     Extra inputs are not permitted [type=extra_forbidden, input_value=True, input_type=bool]
E       For further information visit https://errors.pydantic.dev/2.11/v/extra_forbidden
___________________ TestHealthAliases.test_health_alias_get ___________________
tests\stabilization\test_health_aliases.py:78: in test_health_alias_get
    validate_health_response_schema(response.json())
tests\stabilization\test_health_aliases.py:33: in validate_health_response_schema
    assert "success" in response_json
E   AssertionError: assert 'success' in {'services': {}, 'status': 'healthy', 'uptime': 0}
---------------------------- Captured stderr setup ----------------------------
2025-08-23 08:04:08,075 - backend.core.app - INFO - \U0001f680 Creating A1Betting canonical app...\n2025-08-23 08:04:08,076 - backend.core.app - INFO - \u2705 Request ID correlation middleware added\n2025-08-23 08:04:08,076 - backend.core.app - INFO - \u2705 Distributed trace correlation middleware added\n2025-08-23 08:04:08,076 - backend.core.app - INFO - \u2705 Structured logging middleware added\n2025-08-23 08:04:08,076 - backend.core.app - INFO - \u2705 Prometheus metrics middleware added\n2025-08-23 08:04:08,076 - backend.core.app - INFO - \u2705 Payload guard middleware added: max_size=262144 bytes, enforce_json=True, enabled=True\n2025-08-23 08:04:08,076 - backend.middleware.rate_limit - INFO - Rate limiting disabled\n2025-08-23 08:04:08,076 - backend.core.app - INFO - \u2705 Rate limiting middleware added: 100/min, burst=200, enabled=False\n2025-08-23 08:04:08,076 - backend.core.app - INFO - \u2705 Security headers middleware added: [HSTS, CSP(report-only), COOP, COEP], x_frame_options=DENY\n2025-08-23 08:04:08,076 - backend.core.app - INFO - \u2705 Legacy endpoint middleware added for usage telemetry and deprecation controls\n2025-08-23 08:04:08,076 - backend.exceptions.handlers - INFO - \u2705 PayloadRejectionError handler registered\n2025-08-23 08:04:08,076 - backend.exceptions.handlers - INFO - \u2705 All exception handlers registered with structured error taxonomy\n2025-08-23 08:04:08,076 - backend.core.app - INFO - \u2705 Centralized exception handlers registered\n2025-08-23 08:04:08,077 - backend.core.app - INFO - \u2705 PR11 Enhanced WebSocket client route included (/ws/client)\n2025-08-23 08:04:08,081 - backend.core.app - INFO - \u2705 Auth routes also exposed at root (/auth/*) for compatibility\n2025-08-23 08:04:08,081 - backend.core.app - INFO - \u2705 Auth and users routes included (auth with /api prefix)\n2025-08-23 08:04:08,083 - backend.core.app - INFO - \u2705 Diagnostics routes included (/api/v2/diagnostics/health, /api/v2/diagnostics/system)\n2025-08-23 08:04:08,084 - backend.core.app - INFO - \u2705 Meta cache routes included (/api/v2/meta/cache-stats, /api/v2/meta/cache-health)\n2025-08-23 08:04:08,084 - backend.core.app - INFO - \u2705 Legacy meta routes included (/api/v2/meta/legacy-usage, /api/v2/meta/migration-readiness)\n2025-08-23 08:04:08,086 - backend.core.app - ERROR - \u274c Failed to register CSP report routes: Invalid args for response field! Hint: check that <class 'logging.Logger'> is a valid Pydantic field type. If you are using a return type annotation that is not a valid Pydantic field (e.g. Union[Response, dict, None]) you can disable generating the response model from the type annotation with the path operation decorator parameter response_model=None. Read more: https://fastapi.tiangolo.com/tutorial/response-model/\n2025-08-23 08:04:08,087 - backend.core.app - INFO - \u2705 Trace test routes included (/api/trace/* endpoints)\n2025-08-23 08:04:08,088 - backend.core.app - INFO - \u2705 Model inference routes included (/api/v2/models/* endpoints)\n2025-08-23 08:04:08,090 - backend.core.app - INFO - \u2705 Observability events routes included (/api/v2/observability/* endpoints)\n2025-08-23 08:04:08,091 - backend.core.app - INFO - \u2705 Admin control routes included (/api/v2/models/shadow/* and /api/v2/models/admin/* endpoints)\n2025-08-23 08:04:08,093 - backend.core.app - INFO - \u2705 Enhanced WebSocket routes included (/ws/v2/* endpoints)\n2025-08-23 08:04:08,094 - backend.core.app - INFO - \u2705 WebSocket logging routes included (/api/websocket/* endpoints)\n2025-08-23 08:04:08,095 - backend.core.app - INFO - \u2705 Version routes included (/api/version/* endpoints)\n2025-08-23 08:04:08,095 - backend.core.app - INFO - \u2705 WebVitals pipeline routes included (/api/metrics/v1/* endpoints)\n2025-08-23 08:04:08,099 - backend.core.app - INFO - \u2705 Enhanced ML routes included (/api/enhanced-ml/* endpoints)\n2025-08-23 08:04:08,100 - backend.core.app - INFO - \u2705 Fallback enhanced-ml compatibility router mounted at /api/enhanced-ml\n2025-08-23 08:04:08,105 - backend.core.app - INFO - \u2705 Consolidated PrizePicks routes included (/api/v2/prizepicks/* endpoints)\n2025-08-23 08:04:08,108 - backend.core.app - INFO - \u2705 Consolidated ML routes included (/api/v2/ml/* endpoints)\n2025-08-23 08:04:08,110 - backend.core.app - ERROR - \u274c Failed to register consolidated Admin routes: parameter without a default follows parameter with a default (consolidated_admin.py, line 165)\n2025-08-23 08:04:08,113 - backend.core.app - INFO - \u2705 Odds & Line Movement routes included (/v1/odds/* endpoints)\n2025-08-23 08:04:08,115 - backend.core.app - INFO - \u2705 Advanced-Kelly compatibility router mounted at /api/advanced-kelly\n2025-08-23 08:04:08,117 - backend.core.app - ERROR - \u274c Failed to register Risk Management & Personalization routes: 'NoneType' object has no attribute 'alert_evaluation_interval_seconds'\n2025-08-23 08:04:08,119 - backend.core.app - INFO - \u2705 Dependencies Health routes included (/api/dependencies/* endpoints)\n2025-08-23 08:04:08,121 - backend.core.app - INFO - \u2705 Provider Resilience routes included (/api/provider-resilience/* endpoints)\n2025-08-23 08:04:08,122 - backend.core.app - INFO - \u2705 System capabilities routes included (/api/system/* endpoints)\n2025-08-23 08:04:08,124 - backend.core.app - INFO - \u2705 Real-time market streaming routes included (/streaming/* endpoints)\n2025-08-23 08:04:08,124 - backend.core.app - INFO - \u2705 Security HEAD endpoints included (/api/* HEAD endpoints)\n2025-08-23 08:04:08,126 - backend.core.app - INFO - \u2705 ML Model Registry routes included (/api/models/* endpoints)\n2025-08-23 08:04:08,127 - backend.core.app - INFO - \u2705 Data ingestion routes included (/api/v1/ingestion/* endpoints)\n2025-08-23 08:04:08,130 - backend.core.app - INFO - \u2705 Enterprise model registry routes included (/api/models/enterprise/* endpoints)\n2025-08-23 08:04:08,134 - backend.core.app - INFO - \u2705 Alert engine routes included (/api/alert-engine/* endpoints)\n2025-08-23 08:04:08,139 - backend.core.app - INFO - \u2705 PropFinder routes included (/api/propfinder/* endpoints)\n2025-08-23 08:04:08,140 - backend.core.app - WARNING - \u26a0\ufe0f Could not import multiple_sportsbook_routes: cannot import name 'RateLimiter' from 'backend.middleware.rate_limit' (C:\\Users\\bcmad\\Downloads\\A1Betting7-13.2\\backend\\middleware\\rate_limit.py)\n2025-08-23 08:04:08,142 - backend.core.app - INFO - \u2705 Sportsbook compatibility router mounted at /api/sportsbook\n2025-08-23 08:04:08,142 - backend.core.app - INFO - \U0001f50d Bootstrap validation scheduled on startup\n2025-08-23 08:04:08,142 - backend.core.app - INFO - \U0001f3e5 Health endpoints normalized: /api/health, /health, /api/v2/health -> identical envelope format\n2025-08-23 08:04:08,142 - backend.core.app - INFO - \u2705 A1Betting canonical app created successfully
----------------------------- Captured log setup ------------------------------
INFO     backend.core.app:app.py:65 \U0001f680 Creating A1Betting canonical app...\nINFO     backend.core.app:app.py:104 \u2705 Request ID correlation middleware added\nINFO     backend.core.app:app.py:114 \u2705 Distributed trace correlation middleware added\nINFO     backend.core.app:app.py:126 \u2705 Structured logging middleware added\nINFO     backend.core.app:app.py:146 \u2705 Prometheus metrics middleware added\nINFO     backend.core.app:app.py:167 \u2705 Payload guard middleware added: max_size=262144 bytes, enforce_json=True, enabled=True\nINFO     backend.middleware.rate_limit:rate_limit.py:90 Rate limiting disabled\nINFO     backend.core.app:app.py:202 \u2705 Rate limiting middleware added: 100/min, burst=200, enabled=False\nINFO     backend.core.app:app.py:244 \u2705 Security headers middleware added: [HSTS, CSP(report-only), COOP, COEP], x_frame_options=DENY\nINFO     backend.core.app:app.py:259 \u2705 Legacy endpoint middleware added for usage telemetry and deprecation controls\nINFO     backend.exceptions.handlers:handlers.py:235 \u2705 PayloadRejectionError handler registered\nINFO     backend.exceptions.handlers:handlers.py:250 \u2705 All exception handlers registered with structured error taxonomy\nINFO     backend.core.app:app.py:269 \u2705 Centralized exception handlers registered\nINFO     backend.core.app:app.py:332 \u2705 PR11 Enhanced WebSocket client route included (/ws/client)\nINFO     backend.core.app:app.py:702 \u2705 Auth routes also exposed at root (/auth/*) for compatibility\nINFO     backend.core.app:app.py:706 \u2705 Auth and users routes included (auth with /api prefix)\nINFO     backend.core.app:app.py:714 \u2705 Diagnostics routes included (/api/v2/diagnostics/health, /api/v2/diagnostics/system)\nINFO     backend.core.app:app.py:763 \u2705 Meta cache routes included (/api/v2/meta/cache-stats, /api/v2/meta/cache-health)\nINFO     backend.core.app:app.py:773 \u2705 Legacy meta routes included (/api/v2/meta/legacy-usage, /api/v2/meta/migration-readiness)\nERROR    backend.core.app:app.py:788 \u274c Failed to register CSP report routes: Invalid args for response field! Hint: check that <class 'logging.Logger'> is a valid Pydantic field type. If you are using a return type annotation that is not a valid Pydantic field (e.g. Union[Response, dict, None]) you can disable generating the response model from the type annotation with the path operation decorator parameter response_model=None. Read more: https://fastapi.tiangolo.com/tutorial/response-model/\nINFO     backend.core.app:app.py:794 \u2705 Trace test routes included (/api/trace/* endpoints)\nINFO     backend.core.app:app.py:804 \u2705 Model inference routes included (/api/v2/models/* endpoints)\nINFO     backend.core.app:app.py:814 \u2705 Observability events routes included (/api/v2/observability/* endpoints)\nINFO     backend.core.app:app.py:824 \u2705 Admin control routes included (/api/v2/models/shadow/* and /api/v2/models/admin/* endpoints)\nINFO     backend.core.app:app.py:834 \u2705 Enhanced WebSocket routes included (/ws/v2/* endpoints)\nINFO     backend.core.app:app.py:844 \u2705 WebSocket logging routes included (/api/websocket/* endpoints)\nINFO     backend.core.app:app.py:854 \u2705 Version routes included (/api/version/* endpoints)\nINFO     backend.core.app:app.py:864 \u2705 WebVitals pipeline routes included (/api/metrics/v1/* endpoints)\nINFO     backend.core.app:app.py:874 \u2705 Enhanced ML routes included (/api/enhanced-ml/* endpoints)\nINFO     backend.core.app:app.py:986 \u2705 Fallback enhanced-ml compatibility router mounted at /api/enhanced-ml\nINFO     backend.core.app:app.py:995 \u2705 Consolidated PrizePicks routes included (/api/v2/prizepicks/* endpoints)\nINFO     backend.core.app:app.py:1005 \u2705 Consolidated ML routes included (/api/v2/ml/* endpoints)\nERROR    backend.core.app:app.py:1019 \u274c Failed to register consolidated Admin routes: parameter without a default follows parameter with a default (consolidated_admin.py, line 165)\nINFO     backend.core.app:app.py:1025 \u2705 Odds & Line Movement routes included (/v1/odds/* endpoints)\nINFO     backend.core.app:app.py:1066 \u2705 Advanced-Kelly compatibility router mounted at /api/advanced-kelly\nERROR    backend.core.app:app.py:1078 \u274c Failed to register Risk Management & Personalization routes: 'NoneType' object has no attribute 'alert_evaluation_interval_seconds'\nINFO     backend.core.app:app.py:1084 \u2705 Dependencies Health routes included (/api/dependencies/* endpoints)\nINFO     backend.core.app:app.py:1094 \u2705 Provider Resilience routes included (/api/provider-resilience/* endpoints)\nINFO     backend.core.app:app.py:1104 \u2705 System capabilities routes included (/api/system/* endpoints)\nINFO     backend.core.app:app.py:1114 \u2705 Real-time market streaming routes included (/streaming/* endpoints)\nINFO     backend.core.app:app.py:1124 \u2705 Security HEAD endpoints included (/api/* HEAD endpoints)\nINFO     backend.core.app:app.py:1134 \u2705 ML Model Registry routes included (/api/models/* endpoints)\nINFO     backend.core.app:app.py:1144 \u2705 Data ingestion routes included (/api/v1/ingestion/* endpoints)\nINFO     backend.core.app:app.py:1154 \u2705 Enterprise model registry routes included (/api/models/enterprise/* endpoints)\nINFO     backend.core.app:app.py:1199 \u2705 Alert engine routes included (/api/alert-engine/* endpoints)\nINFO     backend.core.app:app.py:1209 \u2705 PropFinder routes included (/api/propfinder/* endpoints)\nWARNING  backend.core.app:app.py:1221 \u26a0\ufe0f Could not import multiple_sportsbook_routes: cannot import name 'RateLimiter' from 'backend.middleware.rate_limit' (C:\\Users\\bcmad\\Downloads\\A1Betting7-13.2\\backend\\middleware\\rate_limit.py)\nINFO     backend.core.app:app.py:1495 \u2705 Sportsbook compatibility router mounted at /api/sportsbook\nINFO     backend.core.app:app.py:1527 \U0001f50d Bootstrap validation scheduled on startup\nINFO     backend.core.app:app.py:1535 \U0001f3e5 Health endpoints normalized: /api/health, /health, /api/v2/health -> identical envelope format\nINFO     backend.core.app:app.py:1536 \u2705 A1Betting canonical app created successfully
---------------------------- Captured stderr call -----------------------------
2025-08-23 08:04:08,145 - backend.middleware.rate_limit - INFO - Rate limiting disabled\n2025-08-23 08:04:08,145 - backend.middleware.security_headers - INFO - \u2705 Security headers middleware enabled: CSP=report-only, HSTS=True, strict_mode=False\n2025-08-23 08:04:08,145 - backend.middleware.legacy_middleware - INFO - Registered known legacy endpoints with forwarding paths\n2025-08-23 08:04:08,145 - backend.middleware.legacy_middleware - INFO - Legacy middleware initialized\n2025-08-23 08:04:08,145 - backend.middleware.legacy_middleware - INFO - Legacy endpoint accessed: GET /health (count: 3)\n{"timestamp": "2025-08-23T13:04:08.146032", "level": "INFO", "logger": "a1betting", "message": "Request started", "module": "structured_logging_middleware", "function": "log_request_start", "line": 109, "request_id": "d49e40ac-1025-4915-8786-5a39ae0121b9", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro", "event_type": "request_start", "method": "GET", "url": "http://testserver/health", "path": "/health", "query_params": {}, "client_ip": "testclient", "user_agent": "testclient", "content_type": null}\n2025-08-23 08:04:08,146 - backend.middleware.request_id_middleware - INFO - Request started: GET /health\n2025-08-23 08:04:08,146 - backend.middleware.request_id_middleware - INFO - Request completed: GET /health - 200\n2025-08-23 08:04:08,146 - backend.middleware.distributed_trace_middleware - INFO - Trace completed: 2e4ed802-b348-4538-873d-a356b2a7e1cd\n{"timestamp": "2025-08-23T13:04:08.146671", "level": "INFO", "logger": "a1betting", "message": "Request completed", "module": "structured_logging_middleware", "function": "log_request_success", "line": 124, "request_id": "d49e40ac-1025-4915-8786-5a39ae0121b9", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro", "event_type": "request_success", "method": "GET", "url": "http://testserver/health", "path": "/health", "status_code": 200, "duration_ms": 0.66, "response_size": "45", "performance_category": "fast"}
------------------------------ Captured log call ------------------------------
INFO     backend.middleware.rate_limit:rate_limit.py:90 Rate limiting disabled\nINFO     backend.middleware.security_headers:security_headers.py:71 \u2705 Security headers middleware enabled: CSP=report-only, HSTS=True, strict_mode=False\nINFO     backend.middleware.legacy_middleware:legacy_middleware.py:68 Registered known legacy endpoints with forwarding paths\nINFO     backend.middleware.legacy_middleware:legacy_middleware.py:44 Legacy middleware initialized\nINFO     backend.middleware.legacy_middleware:legacy_middleware.py:177 Legacy endpoint accessed: GET /health (count: 3)\nINFO     backend.middleware.request_id_middleware:request_id_middleware.py:67 Request started: GET /health\nINFO     backend.middleware.request_id_middleware:request_id_middleware.py:92 Request completed: GET /health - 200\nINFO     backend.middleware.distributed_trace_middleware:distributed_trace_middleware.py:224 Trace completed: 2e4ed802-b348-4538-873d-a356b2a7e1cd
________ TestHealthAliases.test_all_health_endpoints_identical_schema _________
tests\stabilization\test_health_aliases.py:105: in test_all_health_endpoints_identical_schema
    validate_health_response_schema(response_json)
tests\stabilization\test_health_aliases.py:33: in validate_health_response_schema
    assert "success" in response_json
E   AssertionError: assert 'success' in {'services': {}, 'status': 'healthy', 'uptime': 0}
---------------------------- Captured stderr setup ----------------------------
2025-08-23 08:04:08,731 - backend.core.app - INFO - \U0001f680 Creating A1Betting canonical app...\n2025-08-23 08:04:08,731 - backend.core.app - INFO - \u2705 Request ID correlation middleware added\n2025-08-23 08:04:08,731 - backend.core.app - INFO - \u2705 Distributed trace correlation middleware added\n2025-08-23 08:04:08,731 - backend.core.app - INFO - \u2705 Structured logging middleware added\n2025-08-23 08:04:08,731 - backend.core.app - INFO - \u2705 Prometheus metrics middleware added\n2025-08-23 08:04:08,731 - backend.core.app - INFO - \u2705 Payload guard middleware added: max_size=262144 bytes, enforce_json=True, enabled=True\n2025-08-23 08:04:08,731 - backend.middleware.rate_limit - INFO - Rate limiting disabled\n2025-08-23 08:04:08,731 - backend.core.app - INFO - \u2705 Rate limiting middleware added: 100/min, burst=200, enabled=False\n2025-08-23 08:04:08,731 - backend.core.app - INFO - \u2705 Security headers middleware added: [HSTS, CSP(report-only), COOP, COEP], x_frame_options=DENY\n2025-08-23 08:04:08,731 - backend.core.app - INFO - \u2705 Legacy endpoint middleware added for usage telemetry and deprecation controls\n2025-08-23 08:04:08,731 - backend.exceptions.handlers - INFO - \u2705 PayloadRejectionError handler registered\n2025-08-23 08:04:08,731 - backend.exceptions.handlers - INFO - \u2705 All exception handlers registered with structured error taxonomy\n2025-08-23 08:04:08,732 - backend.core.app - INFO - \u2705 Centralized exception handlers registered\n2025-08-23 08:04:08,733 - backend.core.app - INFO - \u2705 PR11 Enhanced WebSocket client route included (/ws/client)\n2025-08-23 08:04:08,737 - backend.core.app - INFO - \u2705 Auth routes also exposed at root (/auth/*) for compatibility\n2025-08-23 08:04:08,737 - backend.core.app - INFO - \u2705 Auth and users routes included (auth with /api prefix)\n2025-08-23 08:04:08,738 - backend.core.app - INFO - \u2705 Diagnostics routes included (/api/v2/diagnostics/health, /api/v2/diagnostics/system)\n2025-08-23 08:04:08,739 - backend.core.app - INFO - \u2705 Meta cache routes included (/api/v2/meta/cache-stats, /api/v2/meta/cache-health)\n2025-08-23 08:04:08,739 - backend.core.app - INFO - \u2705 Legacy meta routes included (/api/v2/meta/legacy-usage, /api/v2/meta/migration-readiness)\n2025-08-23 08:04:08,742 - backend.core.app - ERROR - \u274c Failed to register CSP report routes: Invalid args for response field! Hint: check that <class 'logging.Logger'> is a valid Pydantic field type. If you are using a return type annotation that is not a valid Pydantic field (e.g. Union[Response, dict, None]) you can disable generating the response model from the type annotation with the path operation decorator parameter response_model=None. Read more: https://fastapi.tiangolo.com/tutorial/response-model/\n2025-08-23 08:04:08,742 - backend.core.app - INFO - \u2705 Trace test routes included (/api/trace/* endpoints)\n2025-08-23 08:04:08,744 - backend.core.app - INFO - \u2705 Model inference routes included (/api/v2/models/* endpoints)\n2025-08-23 08:04:08,745 - backend.core.app - INFO - \u2705 Observability events routes included (/api/v2/observability/* endpoints)\n2025-08-23 08:04:08,746 - backend.core.app - INFO - \u2705 Admin control routes included (/api/v2/models/shadow/* and /api/v2/models/admin/* endpoints)\n2025-08-23 08:04:08,748 - backend.core.app - INFO - \u2705 Enhanced WebSocket routes included (/ws/v2/* endpoints)\n2025-08-23 08:04:08,749 - backend.core.app - INFO - \u2705 WebSocket logging routes included (/api/websocket/* endpoints)\n2025-08-23 08:04:08,750 - backend.core.app - INFO - \u2705 Version routes included (/api/version/* endpoints)\n2025-08-23 08:04:08,750 - backend.core.app - INFO - \u2705 WebVitals pipeline routes included (/api/metrics/v1/* endpoints)\n2025-08-23 08:04:08,754 - backend.core.app - INFO - \u2705 Enhanced ML routes included (/api/enhanced-ml/* endpoints)\n2025-08-23 08:04:08,755 - backend.core.app - INFO - \u2705 Fallback enhanced-ml compatibility router mounted at /api/enhanced-ml\n2025-08-23 08:04:08,759 - backend.core.app - INFO - \u2705 Consolidated PrizePicks routes included (/api/v2/prizepicks/* endpoints)\n2025-08-23 08:04:08,762 - backend.core.app - INFO - \u2705 Consolidated ML routes included (/api/v2/ml/* endpoints)\n2025-08-23 08:04:08,764 - backend.core.app - ERROR - \u274c Failed to register consolidated Admin routes: parameter without a default follows parameter with a default (consolidated_admin.py, line 165)\n2025-08-23 08:04:08,768 - backend.core.app - INFO - \u2705 Odds & Line Movement routes included (/v1/odds/* endpoints)\n2025-08-23 08:04:08,770 - backend.core.app - INFO - \u2705 Advanced-Kelly compatibility router mounted at /api/advanced-kelly\n2025-08-23 08:04:08,772 - backend.core.app - ERROR - \u274c Failed to register Risk Management & Personalization routes: 'NoneType' object has no attribute 'alert_evaluation_interval_seconds'\n2025-08-23 08:04:08,774 - backend.core.app - INFO - \u2705 Dependencies Health routes included (/api/dependencies/* endpoints)\n2025-08-23 08:04:08,776 - backend.core.app - INFO - \u2705 Provider Resilience routes included (/api/provider-resilience/* endpoints)\n2025-08-23 08:04:08,777 - backend.core.app - INFO - \u2705 System capabilities routes included (/api/system/* endpoints)\n2025-08-23 08:04:08,779 - backend.core.app - INFO - \u2705 Real-time market streaming routes included (/streaming/* endpoints)\n2025-08-23 08:04:08,779 - backend.core.app - INFO - \u2705 Security HEAD endpoints included (/api/* HEAD endpoints)\n2025-08-23 08:04:08,781 - backend.core.app - INFO - \u2705 ML Model Registry routes included (/api/models/* endpoints)\n2025-08-23 08:04:08,782 - backend.core.app - INFO - \u2705 Data ingestion routes included (/api/v1/ingestion/* endpoints)\n2025-08-23 08:04:08,786 - backend.core.app - INFO - \u2705 Enterprise model registry routes included (/api/models/enterprise/* endpoints)\n2025-08-23 08:04:08,790 - backend.core.app - INFO - \u2705 Alert engine routes included (/api/alert-engine/* endpoints)\n2025-08-23 08:04:08,793 - backend.core.app - INFO - \u2705 PropFinder routes included (/api/propfinder/* endpoints)\n2025-08-23 08:04:08,794 - backend.core.app - WARNING - \u26a0\ufe0f Could not import multiple_sportsbook_routes: cannot import name 'RateLimiter' from 'backend.middleware.rate_limit' (C:\\Users\\bcmad\\Downloads\\A1Betting7-13.2\\backend\\middleware\\rate_limit.py)\n2025-08-23 08:04:08,797 - backend.core.app - INFO - \u2705 Sportsbook compatibility router mounted at /api/sportsbook\n2025-08-23 08:04:08,797 - backend.core.app - INFO - \U0001f50d Bootstrap validation scheduled on startup\n2025-08-23 08:04:08,797 - backend.core.app - INFO - \U0001f3e5 Health endpoints normalized: /api/health, /health, /api/v2/health -> identical envelope format\n2025-08-23 08:04:08,797 - backend.core.app - INFO - \u2705 A1Betting canonical app created successfully
----------------------------- Captured log setup ------------------------------
INFO     backend.core.app:app.py:65 \U0001f680 Creating A1Betting canonical app...\nINFO     backend.core.app:app.py:104 \u2705 Request ID correlation middleware added\nINFO     backend.core.app:app.py:114 \u2705 Distributed trace correlation middleware added\nINFO     backend.core.app:app.py:126 \u2705 Structured logging middleware added\nINFO     backend.core.app:app.py:146 \u2705 Prometheus metrics middleware added\nINFO     backend.core.app:app.py:167 \u2705 Payload guard middleware added: max_size=262144 bytes, enforce_json=True, enabled=True\nINFO     backend.middleware.rate_limit:rate_limit.py:90 Rate limiting disabled\nINFO     backend.core.app:app.py:202 \u2705 Rate limiting middleware added: 100/min, burst=200, enabled=False\nINFO     backend.core.app:app.py:244 \u2705 Security headers middleware added: [HSTS, CSP(report-only), COOP, COEP], x_frame_options=DENY\nINFO     backend.core.app:app.py:259 \u2705 Legacy endpoint middleware added for usage telemetry and deprecation controls\nINFO     backend.exceptions.handlers:handlers.py:235 \u2705 PayloadRejectionError handler registered\nINFO     backend.exceptions.handlers:handlers.py:250 \u2705 All exception handlers registered with structured error taxonomy\nINFO     backend.core.app:app.py:269 \u2705 Centralized exception handlers registered\nINFO     backend.core.app:app.py:332 \u2705 PR11 Enhanced WebSocket client route included (/ws/client)\nINFO     backend.core.app:app.py:702 \u2705 Auth routes also exposed at root (/auth/*) for compatibility\nINFO     backend.core.app:app.py:706 \u2705 Auth and users routes included (auth with /api prefix)\nINFO     backend.core.app:app.py:714 \u2705 Diagnostics routes included (/api/v2/diagnostics/health, /api/v2/diagnostics/system)\nINFO     backend.core.app:app.py:763 \u2705 Meta cache routes included (/api/v2/meta/cache-stats, /api/v2/meta/cache-health)\nINFO     backend.core.app:app.py:773 \u2705 Legacy meta routes included (/api/v2/meta/legacy-usage, /api/v2/meta/migration-readiness)\nERROR    backend.core.app:app.py:788 \u274c Failed to register CSP report routes: Invalid args for response field! Hint: check that <class 'logging.Logger'> is a valid Pydantic field type. If you are using a return type annotation that is not a valid Pydantic field (e.g. Union[Response, dict, None]) you can disable generating the response model from the type annotation with the path operation decorator parameter response_model=None. Read more: https://fastapi.tiangolo.com/tutorial/response-model/\nINFO     backend.core.app:app.py:794 \u2705 Trace test routes included (/api/trace/* endpoints)\nINFO     backend.core.app:app.py:804 \u2705 Model inference routes included (/api/v2/models/* endpoints)\nINFO     backend.core.app:app.py:814 \u2705 Observability events routes included (/api/v2/observability/* endpoints)\nINFO     backend.core.app:app.py:824 \u2705 Admin control routes included (/api/v2/models/shadow/* and /api/v2/models/admin/* endpoints)\nINFO     backend.core.app:app.py:834 \u2705 Enhanced WebSocket routes included (/ws/v2/* endpoints)\nINFO     backend.core.app:app.py:844 \u2705 WebSocket logging routes included (/api/websocket/* endpoints)\nINFO     backend.core.app:app.py:854 \u2705 Version routes included (/api/version/* endpoints)\nINFO     backend.core.app:app.py:864 \u2705 WebVitals pipeline routes included (/api/metrics/v1/* endpoints)\nINFO     backend.core.app:app.py:874 \u2705 Enhanced ML routes included (/api/enhanced-ml/* endpoints)\nINFO     backend.core.app:app.py:986 \u2705 Fallback enhanced-ml compatibility router mounted at /api/enhanced-ml\nINFO     backend.core.app:app.py:995 \u2705 Consolidated PrizePicks routes included (/api/v2/prizepicks/* endpoints)\nINFO     backend.core.app:app.py:1005 \u2705 Consolidated ML routes included (/api/v2/ml/* endpoints)\nERROR    backend.core.app:app.py:1019 \u274c Failed to register consolidated Admin routes: parameter without a default follows parameter with a default (consolidated_admin.py, line 165)\nINFO     backend.core.app:app.py:1025 \u2705 Odds & Line Movement routes included (/v1/odds/* endpoints)\nINFO     backend.core.app:app.py:1066 \u2705 Advanced-Kelly compatibility router mounted at /api/advanced-kelly\nERROR    backend.core.app:app.py:1078 \u274c Failed to register Risk Management & Personalization routes: 'NoneType' object has no attribute 'alert_evaluation_interval_seconds'\nINFO     backend.core.app:app.py:1084 \u2705 Dependencies Health routes included (/api/dependencies/* endpoints)\nINFO     backend.core.app:app.py:1094 \u2705 Provider Resilience routes included (/api/provider-resilience/* endpoints)\nINFO     backend.core.app:app.py:1104 \u2705 System capabilities routes included (/api/system/* endpoints)\nINFO     backend.core.app:app.py:1114 \u2705 Real-time market streaming routes included (/streaming/* endpoints)\nINFO     backend.core.app:app.py:1124 \u2705 Security HEAD endpoints included (/api/* HEAD endpoints)\nINFO     backend.core.app:app.py:1134 \u2705 ML Model Registry routes included (/api/models/* endpoints)\nINFO     backend.core.app:app.py:1144 \u2705 Data ingestion routes included (/api/v1/ingestion/* endpoints)\nINFO     backend.core.app:app.py:1154 \u2705 Enterprise model registry routes included (/api/models/enterprise/* endpoints)\nINFO     backend.core.app:app.py:1199 \u2705 Alert engine routes included (/api/alert-engine/* endpoints)\nINFO     backend.core.app:app.py:1209 \u2705 PropFinder routes included (/api/propfinder/* endpoints)\nWARNING  backend.core.app:app.py:1221 \u26a0\ufe0f Could not import multiple_sportsbook_routes: cannot import name 'RateLimiter' from 'backend.middleware.rate_limit' (C:\\Users\\bcmad\\Downloads\\A1Betting7-13.2\\backend\\middleware\\rate_limit.py)\nINFO     backend.core.app:app.py:1495 \u2705 Sportsbook compatibility router mounted at /api/sportsbook\nINFO     backend.core.app:app.py:1527 \U0001f50d Bootstrap validation scheduled on startup\nINFO     backend.core.app:app.py:1535 \U0001f3e5 Health endpoints normalized: /api/health, /health, /api/v2/health -> identical envelope format\nINFO     backend.core.app:app.py:1536 \u2705 A1Betting canonical app created successfully
---------------------------- Captured stderr call -----------------------------
2025-08-23 08:04:08,822 - backend.middleware.rate_limit - INFO - Rate limiting disabled\n2025-08-23 08:04:08,822 - backend.middleware.security_headers - INFO - \u2705 Security headers middleware enabled: CSP=report-only, HSTS=True, strict_mode=False\n2025-08-23 08:04:08,822 - backend.middleware.legacy_middleware - INFO - Registered known legacy endpoints with forwarding paths\n2025-08-23 08:04:08,822 - backend.middleware.legacy_middleware - INFO - Legacy middleware initialized\n2025-08-23 08:04:08,822 - backend.middleware.legacy_middleware - INFO - Legacy endpoint accessed: GET /api/health (count: 27)\n{"timestamp": "2025-08-23T13:04:08.822881", "level": "INFO", "logger": "a1betting", "message": "Request started", "module": "structured_logging_middleware", "function": "log_request_start", "line": 109, "request_id": "a24b464a-2e81-4ebd-b8ac-119ca94158b8", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro", "event_type": "request_start", "method": "GET", "url": "http://testserver/api/health", "path": "/api/health", "query_params": {}, "client_ip": "testclient", "user_agent": "testclient", "content_type": null}\n2025-08-23 08:04:08,823 - backend.middleware.request_id_middleware - INFO - Request started: GET /api/health\n2025-08-23 08:04:08,823 - backend.core.app - INFO - [API] /api/health called (DEPRECATED)\n2025-08-23 08:04:08,823 - backend.middleware.request_id_middleware - INFO - Request completed: GET /api/health - 200\n2025-08-23 08:04:08,823 - backend.middleware.distributed_trace_middleware - INFO - Trace completed: 16922065-87cb-4234-9834-f3d96f600e9a\n{"timestamp": "2025-08-23T13:04:08.823824", "level": "INFO", "logger": "a1betting", "message": "Request completed", "module": "structured_logging_middleware", "function": "log_request_success", "line": 124, "request_id": "a24b464a-2e81-4ebd-b8ac-119ca94158b8", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro", "event_type": "request_success", "method": "GET", "url": "http://testserver/api/health", "path": "/api/health", "status_code": 200, "duration_ms": 0.97, "response_size": "277", "performance_category": "fast"}\n2025-08-23 08:04:08,827 - backend.middleware.legacy_middleware - INFO - Legacy endpoint accessed: GET /health (count: 5)\n{"timestamp": "2025-08-23T13:04:08.827382", "level": "INFO", "logger": "a1betting", "message": "Request started", "module": "structured_logging_middleware", "function": "log_request_start", "line": 109, "request_id": "5ac1b4cd-5bc6-4e2f-8311-2dda4505338d", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro", "event_type": "request_start", "method": "GET", "url": "http://testserver/health", "path": "/health", "query_params": {}, "client_ip": "testclient", "user_agent": "testclient", "content_type": null}\n2025-08-23 08:04:08,829 - backend.middleware.request_id_middleware - INFO - Request started: GET /health\n2025-08-23 08:04:08,829 - backend.middleware.request_id_middleware - INFO - Request completed: GET /health - 200\n2025-08-23 08:04:08,830 - backend.middleware.distributed_trace_middleware - INFO - Trace completed: f0b82533-f851-43ee-ae53-18d5f4f25331\n{"timestamp": "2025-08-23T13:04:08.830116", "level": "INFO", "logger": "a1betting", "message": "Request completed", "module": "structured_logging_middleware", "function": "log_request_success", "line": 124, "request_id": "5ac1b4cd-5bc6-4e2f-8311-2dda4505338d", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro", "event_type": "request_success", "method": "GET", "url": "http://testserver/health", "path": "/health", "status_code": 200, "duration_ms": 2.75, "response_size": "45", "performance_category": "fast"}
------------------------------ Captured log call ------------------------------
INFO     backend.middleware.rate_limit:rate_limit.py:90 Rate limiting disabled\nINFO     backend.middleware.security_headers:security_headers.py:71 \u2705 Security headers middleware enabled: CSP=report-only, HSTS=True, strict_mode=False\nINFO     backend.middleware.legacy_middleware:legacy_middleware.py:68 Registered known legacy endpoints with forwarding paths\nINFO     backend.middleware.legacy_middleware:legacy_middleware.py:44 Legacy middleware initialized\nINFO     backend.middleware.legacy_middleware:legacy_middleware.py:177 Legacy endpoint accessed: GET /api/health (count: 27)\nINFO     backend.middleware.request_id_middleware:request_id_middleware.py:67 Request started: GET /api/health\nINFO     backend.core.app:app.py:350 [API] /api/health called (DEPRECATED)\nINFO     backend.middleware.request_id_middleware:request_id_middleware.py:92 Request completed: GET /api/health - 200\nINFO     backend.middleware.distributed_trace_middleware:distributed_trace_middleware.py:224 Trace completed: 16922065-87cb-4234-9834-f3d96f600e9a\nINFO     backend.middleware.legacy_middleware:legacy_middleware.py:177 Legacy endpoint accessed: GET /health (count: 5)\nINFO     backend.middleware.request_id_middleware:request_id_middleware.py:67 Request started: GET /health\nINFO     backend.middleware.request_id_middleware:request_id_middleware.py:92 Request completed: GET /health - 200\nINFO     backend.middleware.distributed_trace_middleware:distributed_trace_middleware.py:224 Trace completed: f0b82533-f851-43ee-ae53-18d5f4f25331
_______________ TestHealthAliasMatrix.test_health_alias_matrix ________________
tests\stabilization\test_stabilization_matrix.py:45: in test_health_alias_matrix
    assert data["success"] is True, f"Endpoint {endpoint} success field not True"
           ^^^^^^^^^^^^^^^
E   KeyError: 'success'
---------------------------- Captured stderr setup ----------------------------
2025-08-23 08:04:08,907 - backend.core.app - INFO - \U0001f680 Creating A1Betting canonical app...\n2025-08-23 08:04:08,907 - backend.core.app - INFO - \u2705 Request ID correlation middleware added\n2025-08-23 08:04:08,907 - backend.core.app - INFO - \u2705 Distributed trace correlation middleware added\n2025-08-23 08:04:08,907 - backend.core.app - INFO - \u2705 Structured logging middleware added\n2025-08-23 08:04:08,907 - backend.core.app - INFO - \u2705 Prometheus metrics middleware added\n2025-08-23 08:04:08,907 - backend.core.app - INFO - \u2705 Payload guard middleware added: max_size=262144 bytes, enforce_json=True, enabled=True\n2025-08-23 08:04:08,908 - backend.middleware.rate_limit - INFO - Rate limiting disabled\n2025-08-23 08:04:08,908 - backend.core.app - INFO - \u2705 Rate limiting middleware added: 100/min, burst=200, enabled=False\n2025-08-23 08:04:08,908 - backend.core.app - INFO - \u2705 Security headers middleware added: [HSTS, CSP(report-only), COOP, COEP], x_frame_options=DENY\n2025-08-23 08:04:08,908 - backend.core.app - INFO - \u2705 Legacy endpoint middleware added for usage telemetry and deprecation controls\n2025-08-23 08:04:08,908 - backend.exceptions.handlers - INFO - \u2705 PayloadRejectionError handler registered\n2025-08-23 08:04:08,908 - backend.exceptions.handlers - INFO - \u2705 All exception handlers registered with structured error taxonomy\n2025-08-23 08:04:08,908 - backend.core.app - INFO - \u2705 Centralized exception handlers registered\n2025-08-23 08:04:08,909 - backend.core.app - INFO - \u2705 PR11 Enhanced WebSocket client route included (/ws/client)\n2025-08-23 08:04:08,912 - backend.core.app - INFO - \u2705 Auth routes also exposed at root (/auth/*) for compatibility\n2025-08-23 08:04:08,913 - backend.core.app - INFO - \u2705 Auth and users routes included (auth with /api prefix)\n2025-08-23 08:04:08,914 - backend.core.app - INFO - \u2705 Diagnostics routes included (/api/v2/diagnostics/health, /api/v2/diagnostics/system)\n2025-08-23 08:04:08,915 - backend.core.app - INFO - \u2705 Meta cache routes included (/api/v2/meta/cache-stats, /api/v2/meta/cache-health)\n2025-08-23 08:04:08,916 - backend.core.app - INFO - \u2705 Legacy meta routes included (/api/v2/meta/legacy-usage, /api/v2/meta/migration-readiness)\n2025-08-23 08:04:08,918 - backend.core.app - ERROR - \u274c Failed to register CSP report routes: Invalid args for response field! Hint: check that <class 'logging.Logger'> is a valid Pydantic field type. If you are using a return type annotation that is not a valid Pydantic field (e.g. Union[Response, dict, None]) you can disable generating the response model from the type annotation with the path operation decorator parameter response_model=None. Read more: https://fastapi.tiangolo.com/tutorial/response-model/\n2025-08-23 08:04:08,918 - backend.core.app - INFO - \u2705 Trace test routes included (/api/trace/* endpoints)\n2025-08-23 08:04:08,920 - backend.core.app - INFO - \u2705 Model inference routes included (/api/v2/models/* endpoints)\n2025-08-23 08:04:08,925 - backend.core.app - INFO - \u2705 Observability events routes included (/api/v2/observability/* endpoints)\n2025-08-23 08:04:08,926 - backend.core.app - INFO - \u2705 Admin control routes included (/api/v2/models/shadow/* and /api/v2/models/admin/* endpoints)\n2025-08-23 08:04:08,928 - backend.core.app - INFO - \u2705 Enhanced WebSocket routes included (/ws/v2/* endpoints)\n2025-08-23 08:04:08,929 - backend.core.app - INFO - \u2705 WebSocket logging routes included (/api/websocket/* endpoints)\n2025-08-23 08:04:08,930 - backend.core.app - INFO - \u2705 Version routes included (/api/version/* endpoints)\n2025-08-23 08:04:08,930 - backend.core.app - INFO - \u2705 WebVitals pipeline routes included (/api/metrics/v1/* endpoints)\n2025-08-23 08:04:08,935 - backend.core.app - INFO - \u2705 Enhanced ML routes included (/api/enhanced-ml/* endpoints)\n2025-08-23 08:04:08,936 - backend.core.app - INFO - \u2705 Fallback enhanced-ml compatibility router mounted at /api/enhanced-ml\n2025-08-23 08:04:08,940 - backend.core.app - INFO - \u2705 Consolidated PrizePicks routes included (/api/v2/prizepicks/* endpoints)\n2025-08-23 08:04:08,944 - backend.core.app - INFO - \u2705 Consolidated ML routes included (/api/v2/ml/* endpoints)\n2025-08-23 08:04:08,946 - backend.core.app - ERROR - \u274c Failed to register consolidated Admin routes: parameter without a default follows parameter with a default (consolidated_admin.py, line 165)\n2025-08-23 08:04:08,949 - backend.core.app - INFO - \u2705 Odds & Line Movement routes included (/v1/odds/* endpoints)\n2025-08-23 08:04:08,950 - backend.core.app - INFO - \u2705 Advanced-Kelly compatibility router mounted at /api/advanced-kelly\n2025-08-23 08:04:08,952 - backend.core.app - ERROR - \u274c Failed to register Risk Management & Personalization routes: 'NoneType' object has no attribute 'alert_evaluation_interval_seconds'\n2025-08-23 08:04:08,954 - backend.core.app - INFO - \u2705 Dependencies Health routes included (/api/dependencies/* endpoints)\n2025-08-23 08:04:08,956 - backend.core.app - INFO - \u2705 Provider Resilience routes included (/api/provider-resilience/* endpoints)\n2025-08-23 08:04:08,957 - backend.core.app - INFO - \u2705 System capabilities routes included (/api/system/* endpoints)\n2025-08-23 08:04:08,958 - backend.core.app - INFO - \u2705 Real-time market streaming routes included (/streaming/* endpoints)\n2025-08-23 08:04:08,959 - backend.core.app - INFO - \u2705 Security HEAD endpoints included (/api/* HEAD endpoints)\n2025-08-23 08:04:08,961 - backend.core.app - INFO - \u2705 ML Model Registry routes included (/api/models/* endpoints)\n2025-08-23 08:04:08,962 - backend.core.app - INFO - \u2705 Data ingestion routes included (/api/v1/ingestion/* endpoints)\n2025-08-23 08:04:08,966 - backend.core.app - INFO - \u2705 Enterprise model registry routes included (/api/models/enterprise/* endpoints)\n2025-08-23 08:04:08,970 - backend.core.app - INFO - \u2705 Alert engine routes included (/api/alert-engine/* endpoints)\n2025-08-23 08:04:08,973 - backend.core.app - INFO - \u2705 PropFinder routes included (/api/propfinder/* endpoints)\n2025-08-23 08:04:08,974 - backend.core.app - WARNING - \u26a0\ufe0f Could not import multiple_sportsbook_routes: cannot import name 'RateLimiter' from 'backend.middleware.rate_limit' (C:\\Users\\bcmad\\Downloads\\A1Betting7-13.2\\backend\\middleware\\rate_limit.py)\n2025-08-23 08:04:08,977 - backend.core.app - INFO - \u2705 Sportsbook compatibility router mounted at /api/sportsbook\n2025-08-23 08:04:08,978 - backend.core.app - INFO - \U0001f50d Bootstrap validation scheduled on startup\n2025-08-23 08:04:08,978 - backend.core.app - INFO - \U0001f3e5 Health endpoints normalized: /api/health, /health, /api/v2/health -> identical envelope format\n2025-08-23 08:04:08,978 - backend.core.app - INFO - \u2705 A1Betting canonical app created successfully
----------------------------- Captured log setup ------------------------------
INFO     backend.core.app:app.py:65 \U0001f680 Creating A1Betting canonical app...\nINFO     backend.core.app:app.py:104 \u2705 Request ID correlation middleware added\nINFO     backend.core.app:app.py:114 \u2705 Distributed trace correlation middleware added\nINFO     backend.core.app:app.py:126 \u2705 Structured logging middleware added\nINFO     backend.core.app:app.py:146 \u2705 Prometheus metrics middleware added\nINFO     backend.core.app:app.py:167 \u2705 Payload guard middleware added: max_size=262144 bytes, enforce_json=True, enabled=True\nINFO     backend.middleware.rate_limit:rate_limit.py:90 Rate limiting disabled\nINFO     backend.core.app:app.py:202 \u2705 Rate limiting middleware added: 100/min, burst=200, enabled=False\nINFO     backend.core.app:app.py:244 \u2705 Security headers middleware added: [HSTS, CSP(report-only), COOP, COEP], x_frame_options=DENY\nINFO     backend.core.app:app.py:259 \u2705 Legacy endpoint middleware added for usage telemetry and deprecation controls\nINFO     backend.exceptions.handlers:handlers.py:235 \u2705 PayloadRejectionError handler registered\nINFO     backend.exceptions.handlers:handlers.py:250 \u2705 All exception handlers registered with structured error taxonomy\nINFO     backend.core.app:app.py:269 \u2705 Centralized exception handlers registered\nINFO     backend.core.app:app.py:332 \u2705 PR11 Enhanced WebSocket client route included (/ws/client)\nINFO     backend.core.app:app.py:702 \u2705 Auth routes also exposed at root (/auth/*) for compatibility\nINFO     backend.core.app:app.py:706 \u2705 Auth and users routes included (auth with /api prefix)\nINFO     backend.core.app:app.py:714 \u2705 Diagnostics routes included (/api/v2/diagnostics/health, /api/v2/diagnostics/system)\nINFO     backend.core.app:app.py:763 \u2705 Meta cache routes included (/api/v2/meta/cache-stats, /api/v2/meta/cache-health)\nINFO     backend.core.app:app.py:773 \u2705 Legacy meta routes included (/api/v2/meta/legacy-usage, /api/v2/meta/migration-readiness)\nERROR    backend.core.app:app.py:788 \u274c Failed to register CSP report routes: Invalid args for response field! Hint: check that <class 'logging.Logger'> is a valid Pydantic field type. If you are using a return type annotation that is not a valid Pydantic field (e.g. Union[Response, dict, None]) you can disable generating the response model from the type annotation with the path operation decorator parameter response_model=None. Read more: https://fastapi.tiangolo.com/tutorial/response-model/\nINFO     backend.core.app:app.py:794 \u2705 Trace test routes included (/api/trace/* endpoints)\nINFO     backend.core.app:app.py:804 \u2705 Model inference routes included (/api/v2/models/* endpoints)\nINFO     backend.core.app:app.py:814 \u2705 Observability events routes included (/api/v2/observability/* endpoints)\nINFO     backend.core.app:app.py:824 \u2705 Admin control routes included (/api/v2/models/shadow/* and /api/v2/models/admin/* endpoints)\nINFO     backend.core.app:app.py:834 \u2705 Enhanced WebSocket routes included (/ws/v2/* endpoints)\nINFO     backend.core.app:app.py:844 \u2705 WebSocket logging routes included (/api/websocket/* endpoints)\nINFO     backend.core.app:app.py:854 \u2705 Version routes included (/api/version/* endpoints)\nINFO     backend.core.app:app.py:864 \u2705 WebVitals pipeline routes included (/api/metrics/v1/* endpoints)\nINFO     backend.core.app:app.py:874 \u2705 Enhanced ML routes included (/api/enhanced-ml/* endpoints)\nINFO     backend.core.app:app.py:986 \u2705 Fallback enhanced-ml compatibility router mounted at /api/enhanced-ml\nINFO     backend.core.app:app.py:995 \u2705 Consolidated PrizePicks routes included (/api/v2/prizepicks/* endpoints)\nINFO     backend.core.app:app.py:1005 \u2705 Consolidated ML routes included (/api/v2/ml/* endpoints)\nERROR    backend.core.app:app.py:1019 \u274c Failed to register consolidated Admin routes: parameter without a default follows parameter with a default (consolidated_admin.py, line 165)\nINFO     backend.core.app:app.py:1025 \u2705 Odds & Line Movement routes included (/v1/odds/* endpoints)\nINFO     backend.core.app:app.py:1066 \u2705 Advanced-Kelly compatibility router mounted at /api/advanced-kelly\nERROR    backend.core.app:app.py:1078 \u274c Failed to register Risk Management & Personalization routes: 'NoneType' object has no attribute 'alert_evaluation_interval_seconds'\nINFO     backend.core.app:app.py:1084 \u2705 Dependencies Health routes included (/api/dependencies/* endpoints)\nINFO     backend.core.app:app.py:1094 \u2705 Provider Resilience routes included (/api/provider-resilience/* endpoints)\nINFO     backend.core.app:app.py:1104 \u2705 System capabilities routes included (/api/system/* endpoints)\nINFO     backend.core.app:app.py:1114 \u2705 Real-time market streaming routes included (/streaming/* endpoints)\nINFO     backend.core.app:app.py:1124 \u2705 Security HEAD endpoints included (/api/* HEAD endpoints)\nINFO     backend.core.app:app.py:1134 \u2705 ML Model Registry routes included (/api/models/* endpoints)\nINFO     backend.core.app:app.py:1144 \u2705 Data ingestion routes included (/api/v1/ingestion/* endpoints)\nINFO     backend.core.app:app.py:1154 \u2705 Enterprise model registry routes included (/api/models/enterprise/* endpoints)\nINFO     backend.core.app:app.py:1199 \u2705 Alert engine routes included (/api/alert-engine/* endpoints)\nINFO     backend.core.app:app.py:1209 \u2705 PropFinder routes included (/api/propfinder/* endpoints)\nWARNING  backend.core.app:app.py:1221 \u26a0\ufe0f Could not import multiple_sportsbook_routes: cannot import name 'RateLimiter' from 'backend.middleware.rate_limit' (C:\\Users\\bcmad\\Downloads\\A1Betting7-13.2\\backend\\middleware\\rate_limit.py)\nINFO     backend.core.app:app.py:1495 \u2705 Sportsbook compatibility router mounted at /api/sportsbook\nINFO     backend.core.app:app.py:1527 \U0001f50d Bootstrap validation scheduled on startup\nINFO     backend.core.app:app.py:1535 \U0001f3e5 Health endpoints normalized: /api/health, /health, /api/v2/health -> identical envelope format\nINFO     backend.core.app:app.py:1536 \u2705 A1Betting canonical app created successfully
---------------------------- Captured stdout call -----------------------------
2025-08-23 08:04:08,981 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-23 08:04:08,982 INFO sqlalchemy.engine.Engine SELECT bookmakers.id, bookmakers.name, bookmakers.display_name, bookmakers.short_name, bookmakers.website_url, bookmakers.api_endpoint, bookmakers.country_code, bookmakers.status, bookmakers.is_trusted, bookmakers.reliability_score, bookmakers.api_key_required, bookmakers.rate_limit_per_minute, bookmakers.last_successful_fetch, bookmakers.consecutive_failures, bookmakers.priority_weight, bookmakers.include_in_consensus, bookmakers.created_at, bookmakers.updated_at 
FROM bookmakers 
WHERE bookmakers.name IN (?, ?, ?, ?, ?)
2025-08-23 08:04:08,982 INFO sqlalchemy.engine.Engine [generated in 0.00016s] ('draftkings', 'fanduel', 'betmgm', 'caesars', 'barstool')
2025-08-23 08:04:08,983 INFO sqlalchemy.engine.Engine ROLLBACK
---------------------------- Captured stderr call -----------------------------
2025-08-23 08:04:08,980 - backend.middleware.rate_limit - INFO - Rate limiting disabled\n2025-08-23 08:04:08,980 - backend.middleware.security_headers - INFO - \u2705 Security headers middleware enabled: CSP=report-only, HSTS=True, strict_mode=False\n2025-08-23 08:04:08,980 - backend.middleware.legacy_middleware - INFO - Registered known legacy endpoints with forwarding paths\n2025-08-23 08:04:08,980 - backend.middleware.legacy_middleware - INFO - Legacy middleware initialized\n2025-08-23 08:04:08,981 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)\n2025-08-23 08:04:08,982 - sqlalchemy.engine.Engine - INFO - SELECT bookmakers.id, bookmakers.name, bookmakers.display_name, bookmakers.short_name, bookmakers.website_url, bookmakers.api_endpoint, bookmakers.country_code, bookmakers.status, bookmakers.is_trusted, bookmakers.reliability_score, bookmakers.api_key_required, bookmakers.rate_limit_per_minute, bookmakers.last_successful_fetch, bookmakers.consecutive_failures, bookmakers.priority_weight, bookmakers.include_in_consensus, bookmakers.created_at, bookmakers.updated_at \nFROM bookmakers \nWHERE bookmakers.name IN (?, ?, ?, ?, ?)\n2025-08-23 08:04:08,982 - sqlalchemy.engine.Engine - INFO - [generated in 0.00016s] ('draftkings', 'fanduel', 'betmgm', 'caesars', 'barstool')\n2025-08-23 08:04:08,983 - backend.core.app - INFO - \u2705 Bookmaker registry initialized on startup\n2025-08-23 08:04:08,983 - sqlalchemy.engine.Engine - INFO - ROLLBACK\n{"timestamp": "2025-08-23T08:04:08.984072", "level": "INFO", "logger": "a1betting.enhanced_websocket_routes", "message": "Skipping automatic enhanced_websocket_service.initialize() during test lifecycle", "module": "enhanced_logging", "function": "_log_with_context", "line": 227, "taskName": "anyio.from_thread.BlockingPortal._call_func"}\n2025-08-23 08:04:08,985 - model_selection - INFO - \u2705 Registered canary testing feature flag\n2025-08-23 08:04:08,985 - model_selection - INFO - \u2705 Registered performance-based selection feature flag\n2025-08-23 08:04:08,985 - model_selection - INFO - \u2705 Registered model fallback feature flag\n2025-08-23 08:04:08,985 - backend.core.app - INFO - \u2705 Enterprise model registry services initialized on startup\n--- Logging error ---\nTraceback (most recent call last):\n  File "C:\\Python313\\Lib\\logging\\__init__.py", line 1154, in emit\n    stream.write(msg + self.terminator)\n    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^\n  File "C:\\Python313\\Lib\\encodings\\cp1252.py", line 19, in encode\n    return codecs.charmap_encode(input,self.errors,encoding_table)[0]\n           ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nUnicodeEncodeError: 'charmap' codec can't encode character '\\U0001f50d' in position 96: character maps to <undefined>\nCall stack:\n  File "C:\\Python313\\Lib\\threading.py", line 1014, in _bootstrap\n    self._bootstrap_inner()\n  File "C:\\Python313\\Lib\\threading.py", line 1043, in _bootstrap_inner\n    self.run()\n  File "C:\\Python313\\Lib\\threading.py", line 994, in run\n    self._target(*self._args, **self._kwargs)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\anyio\\from_thread.py", line 481, in run_blocking_portal\n    _eventloop.run(\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\anyio\\_core\\_eventloop.py", line 74, in run\n    return async_backend.run(func, args, {}, backend_options)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\anyio\\_backends\\_asyncio.py", line 2310, in run\n    return runner.run(wrapper())\n  File "C:\\Python313\\Lib\\asyncio\\runners.py", line 118, in run\n    return self._loop.run_until_complete(task)\n  File "C:\\Python313\\Lib\\asyncio\\base_events.py", line 712, in run_until_complete\n    self.run_forever()\n  File "C:\\Python313\\Lib\\asyncio\\base_events.py", line 683, in run_forever\n    self._run_once()\n  File "C:\\Python313\\Lib\\asyncio\\base_events.py", line 2042, in _run_once\n    handle._run()\n  File "C:\\Python313\\Lib\\asyncio\\events.py", line 89, in _run\n    self._context.run(self._callback, *self._args)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\anyio\\from_thread.py", line 221, in _call_func\n    retval = await retval_or_awaitable\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\starlette\\testclient.py", line 710, in lifespan\n    await self.app(scope, self.stream_receive.receive, self.stream_send.send)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\applications.py", line 1054, in __call__\n    await super().__call__(scope, receive, send)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\starlette\\applications.py", line 113, in __call__\n    await self.middleware_stack(scope, receive, send)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\starlette\\middleware\\errors.py", line 151, in __call__\n    await self.app(scope, receive, send)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\starlette\\middleware\\base.py", line 103, in __call__\n    await self.app(scope, receive, send)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\starlette\\middleware\\base.py", line 103, in __call__\n    await self.app(scope, receive, send)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\starlette\\middleware\\base.py", line 103, in __call__\n    await self.app(scope, receive, send)\n  File "C:\\Users\\bcmad\\Downloads\\A1Betting7-13.2\\backend\\middleware\\payload_guard.py", line 151, in __call__\n    await self.app(scope, receive, send)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\starlette\\middleware\\base.py", line 103, in __call__\n    await self.app(scope, receive, send)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\starlette\\middleware\\base.py", line 103, in __call__\n    await self.app(scope, receive, send)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\starlette\\middleware\\base.py", line 103, in __call__\n    await self.app(scope, receive, send)\n  [Previous line repeated 1 more time]\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\starlette\\middleware\\cors.py", line 77, in __call__\n    await self.app(scope, receive, send)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\starlette\\middleware\\exceptions.py", line 49, in __call__\n    await self.app(scope, receive, send)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\starlette\\routing.py", line 716, in __call__\n    await self.middleware_stack(scope, receive, send)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\starlette\\routing.py", line 725, in app\n    await self.lifespan(scope, receive, send)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\starlette\\routing.py", line 694, in lifespan\n    async with self.lifespan_context(app) as maybe_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\starlette\\routing.py", line 571, in __aenter__\n    await self._router.startup()\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\starlette\\routing.py", line 671, in startup\n    await handler()\n  File "C:\\Users\\bcmad\\Downloads\\A1Betting7-13.2\\backend\\core\\app.py", line 1511, in _run_bootstrap_validation\n    summary = await validate_app_bootstrap(_app)\n  File "C:\\Users\\bcmad\\Downloads\\A1Betting7-13.2\\backend\\services\\bootstrap_validator.py", line 724, in validate_app_bootstrap\n    return await validator.validate_bootstrap()\n  File "C:\\Users\\bcmad\\Downloads\\A1Betting7-13.2\\backend\\services\\bootstrap_validator.py", line 501, in validate_bootstrap\n    unified_logger.info(f"\U0001f50d Starting bootstrap validation [correlation_id: {self.correlation_id}]", context)\n  File "C:\\Users\\bcmad\\Downloads\\A1Betting7-13.2\\backend\\services\\unified_logging.py", line 229, in info\n    self.logger.handle(record)\nMessage: '\U0001f50d Starting bootstrap validation [correlation_id: 4fa2729f-2577-417a-a973-070919233866]'\nArguments: ()\n{"timestamp": "2025-08-23T08:04:08.987354", "level": "INFO", "logger": "a1betting", "message": "\U0001f50d Starting bootstrap validation [correlation_id: 4fa2729f-2577-417a-a973-070919233866]", "module": "", "function": "", "line": 0, "taskName": "anyio.from_thread.BlockingPortal._call_func", "context": "LogContext(user_id=None, session_id=None, request_id=None, component=<LogComponent.SYSTEM: 'system'>, operation='bootstrap_validation', duration_ms=None, additional_data={'correlation_id': '4fa2729f-2577-417a-a973-070919233866'})"}\n--- Logging error ---\nTraceback (most recent call last):\n  File "C:\\Python313\\Lib\\logging\\__init__.py", line 1154, in emit\n    stream.write(msg + self.terminator)\n    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^\n  File "C:\\Python313\\Lib\\encodings\\cp1252.py", line 19, in encode\n    return codecs.charmap_encode(input,self.errors,encoding_table)[0]\n           ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nUnicodeEncodeError: 'charmap' codec can't encode character '\\U0001f680' in position 99: character maps to <undefined>\nCall stack:\n  File "C:\\Python313\\Lib\\threading.py", line 1014, in _bootstrap\n    self._bootstrap_inner()\n  File "C:\\Python313\\Lib\\threading.py", line 1043, in _bootstrap_inner\n    self.run()\n  File "C:\\Python313\\Lib\\threading.py", line 994, in run\n    self._target(*self._args, **self._kwargs)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\anyio\\from_thread.py", line 481, in run_blocking_portal\n    _eventloop.run(\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\anyio\\_core\\_eventloop.py", line 74, in run\n    return async_backend.run(func, args, {}, backend_options)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\anyio\\_backends\\_asyncio.py", line 2310, in run\n    return runner.run(wrapper())\n  File "C:\\Python313\\Lib\\asyncio\\runners.py", line 118, in run\n    return self._loop.run_until_complete(task)\n  File "C:\\Python313\\Lib\\asyncio\\base_events.py", line 712, in run_until_complete\n    self.run_forever()\n  File "C:\\Python313\\Lib\\asyncio\\base_events.py", line 683, in run_forever\n    self._run_once()\n  File "C:\\Python313\\Lib\\asyncio\\base_events.py", line 2042, in _run_once\n    handle._run()\n  File "C:\\Python313\\Lib\\asyncio\\events.py", line 89, in _run\n    self._context.run(self._callback, *self._args)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\anyio\\from_thread.py", line 221, in _call_func\n    retval = await retval_or_awaitable\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\starlette\\testclient.py", line 710, in lifespan\n    await self.app(scope, self.stream_receive.receive, self.stream_send.send)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\applications.py", line 1054, in __call__\n    await super().__call__(scope, receive, send)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\starlette\\applications.py", line 113, in __call__\n    await self.middleware_stack(scope, receive, send)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\starlette\\middleware\\errors.py", line 151, in __call__\n    await self.app(scope, receive, send)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\starlette\\middleware\\base.py", line 103, in __call__\n    await self.app(scope, receive, send)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\starlette\\middleware\\base.py", line 103, in __call__\n    await self.app(scope, receive, send)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\starlette\\middleware\\base.py", line 103, in __call__\n    await self.app(scope, receive, send)\n  File "C:\\Users\\bcmad\\Downloads\\A1Betting7-13.2\\backend\\middleware\\payload_guard.py", line 151, in __call__\n    await self.app(scope, receive, send)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\starlette\\middleware\\base.py", line 103, in __call__\n    await self.app(scope, receive, send)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\starlette\\middleware\\base.py", line 103, in __call__\n    await self.app(scope, receive, send)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\starlette\\middleware\\base.py", line 103, in __call__\n    await self.app(scope, receive, send)\n  [Previous line repeated 1 more time]\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\starlette\\middleware\\cors.py", line 77, in __call__\n    await self.app(scope, receive, send)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\starlette\\middleware\\exceptions.py", line 49, in __call__\n    await self.app(scope, receive, send)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\starlette\\routing.py", line 716, in __call__\n    await self.middleware_stack(scope, receive, send)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\starlette\\routing.py", line 725, in app\n    await self.lifespan(scope, receive, send)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\starlette\\routing.py", line 694, in lifespan\n    async with self.lifespan_context(app) as maybe_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\starlette\\routing.py", line 571, in __aenter__\n    await self._router.startup()\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\starlette\\routing.py", line 671, in startup\n    await handler()\n  File "C:\\Users\\bcmad\\Downloads\\A1Betting7-13.2\\backend\\core\\app.py", line 1511, in _run_bootstrap_validation\n    summary = await validate_app_bootstrap(_app)\n  File "C:\\Users\\bcmad\\Downloads\\A1Betting7-13.2\\backend\\services\\bootstrap_validator.py", line 724, in validate_app_bootstrap\n    return await validator.validate_bootstrap()\n  File "C:\\Users\\bcmad\\Downloads\\A1Betting7-13.2\\backend\\services\\bootstrap_validator.py", line 597, in validate_bootstrap\n    self._log_bootstrap_summary(summary)\n  File "C:\\Users\\bcmad\\Downloads\\A1Betting7-13.2\\backend\\services\\bootstrap_validator.py", line 713, in _log_bootstrap_summary\n    unified_logger.warning(summary_message, context)\n  File "C:\\Users\\bcmad\\Downloads\\A1Betting7-13.2\\backend\\services\\unified_logging.py", line 234, in warning\n    self.logger.handle(record)\nMessage: "\U0001f680 BOOTSTRAP VALIDATION SUMMARY\\nCorrelation ID: 4fa2729f-2577-417a-a973-070919233866\\nValidation Duration: 0.00s\\nTotal Validations: 14\\n\u2705 Passed: 11\\n\u26a0\ufe0f Warnings: 3\\n\u274c Errors: 0\\n\U0001f525 Critical: 0\\n\\n\U0001f4cb ENDPOINT VALIDATION DETAILS:\\n  HEALTH:\\n    \u26a0\ufe0f \u26a0\ufe0f Endpoint /api/health found but missing methods. Expected: ['GET', 'HEAD'], Found: ['GET']\\n    \u26a0\ufe0f \u26a0\ufe0f Endpoint /health found but missing methods. Expected: ['GET', 'HEAD'], Found: ['GET']\\n    \u2705 \u2705 Endpoint /api/v2/diagnostics/health found with methods ['GET']\\n  SPORTS:\\n    \u26a0\ufe0f \u26a0\ufe0f Endpoint /api/v2/sports/activate found but missing methods. Expected: ['POST', 'OPTIONS'], Found: ['POST']\\n  WEBSOCKET:\\n    \u2705 \u2705 Endpoint /ws/client found with methods ['WEBSOCKET']\\n    \u2705 \u2705 Endpoint /ws/legacy/{client_id} found with methods ['WEBSOCKET']\\n    \u2705 Found both new (/ws/client) and legacy WebSocket patterns\\n    \u2705 \u2705 WebSocket correlation ID support available\\n  METRICS:\\n    \u2705 \u2705 Endpoint /metrics found with methods ['GET']\\n    \u2705 \u2705 Endpoint /api/metrics/summary found with methods ['GET']\\n  AUTH:\\n    \u2705 \u2705 Endpoint /api/auth/login found with methods ['POST']\\n  API_V2:\\n    \u2705 \u2705 Endpoint /api/props found with methods ['GET']\\n    \u2705 CORS origins configured: ['http://localhost:3000', 'http://localhost:5173']\\n  SYSTEM:\\n    \u2705 \u2705 Correlation system available with 1 active contexts\\n\\n\U0001f50c WEBSOCKET PATHS:\\n  \u2022 /ws/legacy/{client_id}\\n  \u2022 /ws/client\\n  \u2022 /ws/v2/connect\\n  \u2022 /ws/v2/odds\\n  \u2022 /ws/v2/arbitrage\\n  \u2022 /ws/v2/sport/{sport_name}\\n  \u2022 /ws/v2/portfolio\\n\\n\U0001f310 CORS ORIGINS:\\n  \u2022 http://localhost:3000\\n  \u2022 http://localhost:5173\\n\\n\u2699\ufe0f CONFIGURATION SUMMARY:\\n  Environment: development\\n  Debug Mode: True\\n  API Host: 0.0.0.0:8000\\n  Database: sqlite+aiosqlite:///a1betting.db\\n  Cache Enabled: True\\n  ML Enabled: True\\n  Modern ML: True\\n\\n\u26a0\ufe0f Warnings detected - Review configuration for optimal performance"\nArguments: ()\n{"timestamp": "2025-08-23T08:04:08.991881", "level": "WARNING", "logger": "a1betting", "message": "\U0001f680 BOOTSTRAP VALIDATION SUMMARY\\nCorrelation ID: 4fa2729f-2577-417a-a973-070919233866\\nValidation Duration: 0.00s\\nTotal Validations: 14\\n\u2705 Passed: 11\\n\u26a0\ufe0f Warnings: 3\\n\u274c Errors: 0\\n\U0001f525 Critical: 0\\n\\n\U0001f4cb ENDPOINT VALIDATION DETAILS:\\n  HEALTH:\\n    \u26a0\ufe0f \u26a0\ufe0f Endpoint /api/health found but missing methods. Expected: ['GET', 'HEAD'], Found: ['GET']\\n    \u26a0\ufe0f \u26a0\ufe0f Endpoint /health found but missing methods. Expected: ['GET', 'HEAD'], Found: ['GET']\\n    \u2705 \u2705 Endpoint /api/v2/diagnostics/health found with methods ['GET']\\n  SPORTS:\\n    \u26a0\ufe0f \u26a0\ufe0f Endpoint /api/v2/sports/activate found but missing methods. Expected: ['POST', 'OPTIONS'], Found: ['POST']\\n  WEBSOCKET:\\n    \u2705 \u2705 Endpoint /ws/client found with methods ['WEBSOCKET']\\n    \u2705 \u2705 Endpoint /ws/legacy/{client_id} found with methods ['WEBSOCKET']\\n    \u2705 Found both new (/ws/client) and legacy WebSocket patterns\\n    \u2705 \u2705 WebSocket correlation ID support available\\n  METRICS:\\n    \u2705 \u2705 Endpoint /metrics found with methods ['GET']\\n    \u2705 \u2705 Endpoint /api/metrics/summary found with methods ['GET']\\n  AUTH:\\n    \u2705 \u2705 Endpoint /api/auth/login found with methods ['POST']\\n  API_V2:\\n    \u2705 \u2705 Endpoint /api/props found with methods ['GET']\\n    \u2705 CORS origins configured: ['http://localhost:3000', 'http://localhost:5173']\\n  SYSTEM:\\n    \u2705 \u2705 Correlation system available with 1 active contexts\\n\\n\U0001f50c WEBSOCKET PATHS:\\n  \u2022 /ws/legacy/{client_id}\\n  \u2022 /ws/client\\n  \u2022 /ws/v2/connect\\n  \u2022 /ws/v2/odds\\n  \u2022 /ws/v2/arbitrage\\n  \u2022 /ws/v2/sport/{sport_name}\\n  \u2022 /ws/v2/portfolio\\n\\n\U0001f310 CORS ORIGINS:\\n  \u2022 http://localhost:3000\\n  \u2022 http://localhost:5173\\n\\n\u2699\ufe0f CONFIGURATION SUMMARY:\\n  Environment: development\\n  Debug Mode: True\\n  API Host: 0.0.0.0:8000\\n  Database: sqlite+aiosqlite:///a1betting.db\\n  Cache Enabled: True\\n  ML Enabled: True\\n  Modern ML: True\\n\\n\u26a0\ufe0f Warnings detected - Review configuration for optimal performance", "module": "", "function": "", "line": 0, "taskName": "anyio.from_thread.BlockingPortal._call_func", "context": "LogContext(user_id=None, session_id=None, request_id=None, component=<LogComponent.SYSTEM: 'system'>, operation='bootstrap_validation_summary', duration_ms=None, additional_data={'correlation_id': '4fa2729f-2577-417a-a973-070919233866', 'duration_seconds': 0.004502, 'validation_stats': {'total': 14, 'passed': 11, 'warnings': 3, 'errors': 0, 'critical': 0}})"}\n2025-08-23 08:04:08,993 - backend.core.app - WARNING - \u26a0\ufe0f 3 warnings found during bootstrap validation\n{"timestamp": "2025-08-23T08:04:08.993649", "level": "INFO", "logger": "a1betting.enhanced_websocket_routes", "message": "Skipping automatic enhanced_websocket_service.initialize() during test lifecycle", "module": "enhanced_logging", "function": "_log_with_context", "line": 227, "taskName": "anyio.from_thread.BlockingPortal._call_func"}\n2025-08-23 08:04:08,994 - backend.middleware.legacy_middleware - INFO - Legacy endpoint accessed: GET /health (count: 6)\n{"timestamp": "2025-08-23T13:04:08.994649", "level": "INFO", "logger": "a1betting", "message": "Request started", "module": "structured_logging_middleware", "function": "log_request_start", "line": 109, "request_id": "eeda4927-a325-4704-915b-7f6f831c3446", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro", "event_type": "request_start", "method": "GET", "url": "http://testserver/health", "path": "/health", "query_params": {}, "client_ip": "testclient", "user_agent": "testclient", "content_type": null}\n2025-08-23 08:04:08,994 - backend.middleware.request_id_middleware - INFO - Request started: GET /health\n2025-08-23 08:04:08,995 - backend.middleware.request_id_middleware - INFO - Request completed: GET /health - 200\n2025-08-23 08:04:08,995 - backend.middleware.distributed_trace_middleware - INFO - Trace completed: 2b33f808-4ce2-49ce-9003-4b876db90f6c\n{"timestamp": "2025-08-23T13:04:08.995355", "level": "INFO", "logger": "a1betting", "message": "Request completed", "module": "structured_logging_middleware", "function": "log_request_success", "line": 124, "request_id": "eeda4927-a325-4704-915b-7f6f831c3446", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro", "event_type": "request_success", "method": "GET", "url": "http://testserver/health", "path": "/health", "status_code": 200, "duration_ms": 0.72, "response_size": "45", "performance_category": "fast"}\n{"timestamp": "2025-08-23T08:04:08.996188", "level": "INFO", "logger": "a1betting.enhanced_websocket_routes", "message": "Skipping automatic enhanced_websocket_service.shutdown() during test lifecycle", "module": "enhanced_logging", "function": "_log_with_context", "line": 227, "taskName": "anyio.from_thread.BlockingPortal._call_func"}\n{"timestamp": "2025-08-23T08:04:08.996281", "level": "INFO", "logger": "a1betting.enhanced_websocket_routes", "message": "Skipping automatic enhanced_websocket_service.shutdown() during test lifecycle", "module": "enhanced_logging", "function": "_log_with_context", "line": 227, "taskName": "anyio.from_thread.BlockingPortal._call_func"}
------------------------------ Captured log call ------------------------------
INFO     backend.middleware.rate_limit:rate_limit.py:90 Rate limiting disabled\nINFO     backend.middleware.security_headers:security_headers.py:71 \u2705 Security headers middleware enabled: CSP=report-only, HSTS=True, strict_mode=False\nINFO     backend.middleware.legacy_middleware:legacy_middleware.py:68 Registered known legacy endpoints with forwarding paths\nINFO     backend.middleware.legacy_middleware:legacy_middleware.py:44 Legacy middleware initialized\nINFO     sqlalchemy.engine.Engine:base.py:2698 BEGIN (implicit)\nINFO     sqlalchemy.engine.Engine:base.py:1842 SELECT bookmakers.id, bookmakers.name, bookmakers.display_name, bookmakers.short_name, bookmakers.website_url, bookmakers.api_endpoint, bookmakers.country_code, bookmakers.status, bookmakers.is_trusted, bookmakers.reliability_score, bookmakers.api_key_required, bookmakers.rate_limit_per_minute, bookmakers.last_successful_fetch, bookmakers.consecutive_failures, bookmakers.priority_weight, bookmakers.include_in_consensus, bookmakers.created_at, bookmakers.updated_at \nFROM bookmakers \nWHERE bookmakers.name IN (?, ?, ?, ?, ?)\nINFO     sqlalchemy.engine.Engine:base.py:1842 [generated in 0.00016s] ('draftkings', 'fanduel', 'betmgm', 'caesars', 'barstool')\nINFO     backend.core.app:app.py:395 \u2705 Bookmaker registry initialized on startup\nINFO     sqlalchemy.engine.Engine:base.py:2701 ROLLBACK\nINFO     model_selection:model_selection_service.py:115 \u2705 Registered canary testing feature flag\nINFO     model_selection:model_selection_service.py:121 \u2705 Registered performance-based selection feature flag\nINFO     model_selection:model_selection_service.py:127 \u2705 Registered model fallback feature flag\nINFO     backend.core.app:app.py:1179 \u2705 Enterprise model registry services initialized on startup\nWARNING  backend.core.app:app.py:1520 \u26a0\ufe0f 3 warnings found during bootstrap validation\nINFO     backend.middleware.legacy_middleware:legacy_middleware.py:177 Legacy endpoint accessed: GET /health (count: 6)\nINFO     backend.middleware.request_id_middleware:request_id_middleware.py:67 Request started: GET /health\nINFO     backend.middleware.request_id_middleware:request_id_middleware.py:92 Request completed: GET /health - 200\nINFO     backend.middleware.distributed_trace_middleware:distributed_trace_middleware.py:224 Trace completed: 2b33f808-4ce2-49ce-9003-4b876db90f6c
____________ TestOptionsPreflight.test_options_preflight_activate _____________
tests\stabilization\test_stabilization_matrix.py:103: in test_options_preflight_activate
    assert response.status_code in [200, 204], f"OPTIONS {endpoint} status {response.status_code} not 200/204"
E   AssertionError: OPTIONS /api/sports/activate/MLB status 400 not 200/204
E   assert 400 in [200, 204]
E    +  where 400 = <Response [400 Bad Request]>.status_code
---------------------------- Captured stderr setup ----------------------------
2025-08-23 08:04:09,105 - backend.core.app - INFO - \U0001f680 Creating A1Betting canonical app...\n2025-08-23 08:04:09,105 - backend.core.app - INFO - \u2705 Request ID correlation middleware added\n2025-08-23 08:04:09,105 - backend.core.app - INFO - \u2705 Distributed trace correlation middleware added\n2025-08-23 08:04:09,105 - backend.core.app - INFO - \u2705 Structured logging middleware added\n2025-08-23 08:04:09,105 - backend.core.app - INFO - \u2705 Prometheus metrics middleware added\n2025-08-23 08:04:09,106 - backend.core.app - INFO - \u2705 Payload guard middleware added: max_size=262144 bytes, enforce_json=True, enabled=True\n2025-08-23 08:04:09,106 - backend.middleware.rate_limit - INFO - Rate limiting disabled\n2025-08-23 08:04:09,106 - backend.core.app - INFO - \u2705 Rate limiting middleware added: 100/min, burst=200, enabled=False\n2025-08-23 08:04:09,106 - backend.core.app - INFO - \u2705 Security headers middleware added: [HSTS, CSP(report-only), COOP, COEP], x_frame_options=DENY\n2025-08-23 08:04:09,106 - backend.core.app - INFO - \u2705 Legacy endpoint middleware added for usage telemetry and deprecation controls\n2025-08-23 08:04:09,106 - backend.exceptions.handlers - INFO - \u2705 PayloadRejectionError handler registered\n2025-08-23 08:04:09,106 - backend.exceptions.handlers - INFO - \u2705 All exception handlers registered with structured error taxonomy\n2025-08-23 08:04:09,106 - backend.core.app - INFO - \u2705 Centralized exception handlers registered\n2025-08-23 08:04:09,107 - backend.core.app - INFO - \u2705 PR11 Enhanced WebSocket client route included (/ws/client)\n2025-08-23 08:04:09,111 - backend.core.app - INFO - \u2705 Auth routes also exposed at root (/auth/*) for compatibility\n2025-08-23 08:04:09,111 - backend.core.app - INFO - \u2705 Auth and users routes included (auth with /api prefix)\n2025-08-23 08:04:09,112 - backend.core.app - INFO - \u2705 Diagnostics routes included (/api/v2/diagnostics/health, /api/v2/diagnostics/system)\n2025-08-23 08:04:09,113 - backend.core.app - INFO - \u2705 Meta cache routes included (/api/v2/meta/cache-stats, /api/v2/meta/cache-health)\n2025-08-23 08:04:09,113 - backend.core.app - INFO - \u2705 Legacy meta routes included (/api/v2/meta/legacy-usage, /api/v2/meta/migration-readiness)\n2025-08-23 08:04:09,117 - backend.core.app - ERROR - \u274c Failed to register CSP report routes: Invalid args for response field! Hint: check that <class 'logging.Logger'> is a valid Pydantic field type. If you are using a return type annotation that is not a valid Pydantic field (e.g. Union[Response, dict, None]) you can disable generating the response model from the type annotation with the path operation decorator parameter response_model=None. Read more: https://fastapi.tiangolo.com/tutorial/response-model/\n2025-08-23 08:04:09,117 - backend.core.app - INFO - \u2705 Trace test routes included (/api/trace/* endpoints)\n2025-08-23 08:04:09,118 - backend.core.app - INFO - \u2705 Model inference routes included (/api/v2/models/* endpoints)\n2025-08-23 08:04:09,120 - backend.core.app - INFO - \u2705 Observability events routes included (/api/v2/observability/* endpoints)\n2025-08-23 08:04:09,121 - backend.core.app - INFO - \u2705 Admin control routes included (/api/v2/models/shadow/* and /api/v2/models/admin/* endpoints)\n2025-08-23 08:04:09,123 - backend.core.app - INFO - \u2705 Enhanced WebSocket routes included (/ws/v2/* endpoints)\n2025-08-23 08:04:09,124 - backend.core.app - INFO - \u2705 WebSocket logging routes included (/api/websocket/* endpoints)\n2025-08-23 08:04:09,125 - backend.core.app - INFO - \u2705 Version routes included (/api/version/* endpoints)\n2025-08-23 08:04:09,125 - backend.core.app - INFO - \u2705 WebVitals pipeline routes included (/api/metrics/v1/* endpoints)\n2025-08-23 08:04:09,129 - backend.core.app - INFO - \u2705 Enhanced ML routes included (/api/enhanced-ml/* endpoints)\n2025-08-23 08:04:09,130 - backend.core.app - INFO - \u2705 Fallback enhanced-ml compatibility router mounted at /api/enhanced-ml\n2025-08-23 08:04:09,135 - backend.core.app - INFO - \u2705 Consolidated PrizePicks routes included (/api/v2/prizepicks/* endpoints)\n2025-08-23 08:04:09,138 - backend.core.app - INFO - \u2705 Consolidated ML routes included (/api/v2/ml/* endpoints)\n2025-08-23 08:04:09,140 - backend.core.app - ERROR - \u274c Failed to register consolidated Admin routes: parameter without a default follows parameter with a default (consolidated_admin.py, line 165)\n2025-08-23 08:04:09,143 - backend.core.app - INFO - \u2705 Odds & Line Movement routes included (/v1/odds/* endpoints)\n2025-08-23 08:04:09,145 - backend.core.app - INFO - \u2705 Advanced-Kelly compatibility router mounted at /api/advanced-kelly\n2025-08-23 08:04:09,148 - backend.core.app - ERROR - \u274c Failed to register Risk Management & Personalization routes: 'NoneType' object has no attribute 'alert_evaluation_interval_seconds'\n2025-08-23 08:04:09,150 - backend.core.app - INFO - \u2705 Dependencies Health routes included (/api/dependencies/* endpoints)\n2025-08-23 08:04:09,152 - backend.core.app - INFO - \u2705 Provider Resilience routes included (/api/provider-resilience/* endpoints)\n2025-08-23 08:04:09,153 - backend.core.app - INFO - \u2705 System capabilities routes included (/api/system/* endpoints)\n2025-08-23 08:04:09,155 - backend.core.app - INFO - \u2705 Real-time market streaming routes included (/streaming/* endpoints)\n2025-08-23 08:04:09,156 - backend.core.app - INFO - \u2705 Security HEAD endpoints included (/api/* HEAD endpoints)\n2025-08-23 08:04:09,157 - backend.core.app - INFO - \u2705 ML Model Registry routes included (/api/models/* endpoints)\n2025-08-23 08:04:09,158 - backend.core.app - INFO - \u2705 Data ingestion routes included (/api/v1/ingestion/* endpoints)\n2025-08-23 08:04:09,162 - backend.core.app - INFO - \u2705 Enterprise model registry routes included (/api/models/enterprise/* endpoints)\n2025-08-23 08:04:09,166 - backend.core.app - INFO - \u2705 Alert engine routes included (/api/alert-engine/* endpoints)\n2025-08-23 08:04:09,169 - backend.core.app - INFO - \u2705 PropFinder routes included (/api/propfinder/* endpoints)\n2025-08-23 08:04:09,170 - backend.core.app - WARNING - \u26a0\ufe0f Could not import multiple_sportsbook_routes: cannot import name 'RateLimiter' from 'backend.middleware.rate_limit' (C:\\Users\\bcmad\\Downloads\\A1Betting7-13.2\\backend\\middleware\\rate_limit.py)\n2025-08-23 08:04:09,172 - backend.core.app - INFO - \u2705 Sportsbook compatibility router mounted at /api/sportsbook\n2025-08-23 08:04:09,173 - backend.core.app - INFO - \U0001f50d Bootstrap validation scheduled on startup\n2025-08-23 08:04:09,173 - backend.core.app - INFO - \U0001f3e5 Health endpoints normalized: /api/health, /health, /api/v2/health -> identical envelope format\n2025-08-23 08:04:09,173 - backend.core.app - INFO - \u2705 A1Betting canonical app created successfully
----------------------------- Captured log setup ------------------------------
INFO     backend.core.app:app.py:65 \U0001f680 Creating A1Betting canonical app...\nINFO     backend.core.app:app.py:104 \u2705 Request ID correlation middleware added\nINFO     backend.core.app:app.py:114 \u2705 Distributed trace correlation middleware added\nINFO     backend.core.app:app.py:126 \u2705 Structured logging middleware added\nINFO     backend.core.app:app.py:146 \u2705 Prometheus metrics middleware added\nINFO     backend.core.app:app.py:167 \u2705 Payload guard middleware added: max_size=262144 bytes, enforce_json=True, enabled=True\nINFO     backend.middleware.rate_limit:rate_limit.py:90 Rate limiting disabled\nINFO     backend.core.app:app.py:202 \u2705 Rate limiting middleware added: 100/min, burst=200, enabled=False\nINFO     backend.core.app:app.py:244 \u2705 Security headers middleware added: [HSTS, CSP(report-only), COOP, COEP], x_frame_options=DENY\nINFO     backend.core.app:app.py:259 \u2705 Legacy endpoint middleware added for usage telemetry and deprecation controls\nINFO     backend.exceptions.handlers:handlers.py:235 \u2705 PayloadRejectionError handler registered\nINFO     backend.exceptions.handlers:handlers.py:250 \u2705 All exception handlers registered with structured error taxonomy\nINFO     backend.core.app:app.py:269 \u2705 Centralized exception handlers registered\nINFO     backend.core.app:app.py:332 \u2705 PR11 Enhanced WebSocket client route included (/ws/client)\nINFO     backend.core.app:app.py:702 \u2705 Auth routes also exposed at root (/auth/*) for compatibility\nINFO     backend.core.app:app.py:706 \u2705 Auth and users routes included (auth with /api prefix)\nINFO     backend.core.app:app.py:714 \u2705 Diagnostics routes included (/api/v2/diagnostics/health, /api/v2/diagnostics/system)\nINFO     backend.core.app:app.py:763 \u2705 Meta cache routes included (/api/v2/meta/cache-stats, /api/v2/meta/cache-health)\nINFO     backend.core.app:app.py:773 \u2705 Legacy meta routes included (/api/v2/meta/legacy-usage, /api/v2/meta/migration-readiness)\nERROR    backend.core.app:app.py:788 \u274c Failed to register CSP report routes: Invalid args for response field! Hint: check that <class 'logging.Logger'> is a valid Pydantic field type. If you are using a return type annotation that is not a valid Pydantic field (e.g. Union[Response, dict, None]) you can disable generating the response model from the type annotation with the path operation decorator parameter response_model=None. Read more: https://fastapi.tiangolo.com/tutorial/response-model/\nINFO     backend.core.app:app.py:794 \u2705 Trace test routes included (/api/trace/* endpoints)\nINFO     backend.core.app:app.py:804 \u2705 Model inference routes included (/api/v2/models/* endpoints)\nINFO     backend.core.app:app.py:814 \u2705 Observability events routes included (/api/v2/observability/* endpoints)\nINFO     backend.core.app:app.py:824 \u2705 Admin control routes included (/api/v2/models/shadow/* and /api/v2/models/admin/* endpoints)\nINFO     backend.core.app:app.py:834 \u2705 Enhanced WebSocket routes included (/ws/v2/* endpoints)\nINFO     backend.core.app:app.py:844 \u2705 WebSocket logging routes included (/api/websocket/* endpoints)\nINFO     backend.core.app:app.py:854 \u2705 Version routes included (/api/version/* endpoints)\nINFO     backend.core.app:app.py:864 \u2705 WebVitals pipeline routes included (/api/metrics/v1/* endpoints)\nINFO     backend.core.app:app.py:874 \u2705 Enhanced ML routes included (/api/enhanced-ml/* endpoints)\nINFO     backend.core.app:app.py:986 \u2705 Fallback enhanced-ml compatibility router mounted at /api/enhanced-ml\nINFO     backend.core.app:app.py:995 \u2705 Consolidated PrizePicks routes included (/api/v2/prizepicks/* endpoints)\nINFO     backend.core.app:app.py:1005 \u2705 Consolidated ML routes included (/api/v2/ml/* endpoints)\nERROR    backend.core.app:app.py:1019 \u274c Failed to register consolidated Admin routes: parameter without a default follows parameter with a default (consolidated_admin.py, line 165)\nINFO     backend.core.app:app.py:1025 \u2705 Odds & Line Movement routes included (/v1/odds/* endpoints)\nINFO     backend.core.app:app.py:1066 \u2705 Advanced-Kelly compatibility router mounted at /api/advanced-kelly\nERROR    backend.core.app:app.py:1078 \u274c Failed to register Risk Management & Personalization routes: 'NoneType' object has no attribute 'alert_evaluation_interval_seconds'\nINFO     backend.core.app:app.py:1084 \u2705 Dependencies Health routes included (/api/dependencies/* endpoints)\nINFO     backend.core.app:app.py:1094 \u2705 Provider Resilience routes included (/api/provider-resilience/* endpoints)\nINFO     backend.core.app:app.py:1104 \u2705 System capabilities routes included (/api/system/* endpoints)\nINFO     backend.core.app:app.py:1114 \u2705 Real-time market streaming routes included (/streaming/* endpoints)\nINFO     backend.core.app:app.py:1124 \u2705 Security HEAD endpoints included (/api/* HEAD endpoints)\nINFO     backend.core.app:app.py:1134 \u2705 ML Model Registry routes included (/api/models/* endpoints)\nINFO     backend.core.app:app.py:1144 \u2705 Data ingestion routes included (/api/v1/ingestion/* endpoints)\nINFO     backend.core.app:app.py:1154 \u2705 Enterprise model registry routes included (/api/models/enterprise/* endpoints)\nINFO     backend.core.app:app.py:1199 \u2705 Alert engine routes included (/api/alert-engine/* endpoints)\nINFO     backend.core.app:app.py:1209 \u2705 PropFinder routes included (/api/propfinder/* endpoints)\nWARNING  backend.core.app:app.py:1221 \u26a0\ufe0f Could not import multiple_sportsbook_routes: cannot import name 'RateLimiter' from 'backend.middleware.rate_limit' (C:\\Users\\bcmad\\Downloads\\A1Betting7-13.2\\backend\\middleware\\rate_limit.py)\nINFO     backend.core.app:app.py:1495 \u2705 Sportsbook compatibility router mounted at /api/sportsbook\nINFO     backend.core.app:app.py:1527 \U0001f50d Bootstrap validation scheduled on startup\nINFO     backend.core.app:app.py:1535 \U0001f3e5 Health endpoints normalized: /api/health, /health, /api/v2/health -> identical envelope format\nINFO     backend.core.app:app.py:1536 \u2705 A1Betting canonical app created successfully
---------------------------- Captured stdout call -----------------------------
2025-08-23 08:04:09,176 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-23 08:04:09,176 INFO sqlalchemy.engine.Engine SELECT bookmakers.id, bookmakers.name, bookmakers.display_name, bookmakers.short_name, bookmakers.website_url, bookmakers.api_endpoint, bookmakers.country_code, bookmakers.status, bookmakers.is_trusted, bookmakers.reliability_score, bookmakers.api_key_required, bookmakers.rate_limit_per_minute, bookmakers.last_successful_fetch, bookmakers.consecutive_failures, bookmakers.priority_weight, bookmakers.include_in_consensus, bookmakers.created_at, bookmakers.updated_at 
FROM bookmakers 
WHERE bookmakers.name IN (?, ?, ?, ?, ?)
2025-08-23 08:04:09,176 INFO sqlalchemy.engine.Engine [cached since 0.1944s ago] ('draftkings', 'fanduel', 'betmgm', 'caesars', 'barstool')
2025-08-23 08:04:09,178 INFO sqlalchemy.engine.Engine ROLLBACK
---------------------------- Captured stderr call -----------------------------
2025-08-23 08:04:09,175 - backend.middleware.rate_limit - INFO - Rate limiting disabled\n2025-08-23 08:04:09,176 - backend.middleware.security_headers - INFO - \u2705 Security headers middleware enabled: CSP=report-only, HSTS=True, strict_mode=False\n2025-08-23 08:04:09,176 - backend.middleware.legacy_middleware - INFO - Registered known legacy endpoints with forwarding paths\n2025-08-23 08:04:09,176 - backend.middleware.legacy_middleware - INFO - Legacy middleware initialized\n2025-08-23 08:04:09,176 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)\n2025-08-23 08:04:09,176 - sqlalchemy.engine.Engine - INFO - SELECT bookmakers.id, bookmakers.name, bookmakers.display_name, bookmakers.short_name, bookmakers.website_url, bookmakers.api_endpoint, bookmakers.country_code, bookmakers.status, bookmakers.is_trusted, bookmakers.reliability_score, bookmakers.api_key_required, bookmakers.rate_limit_per_minute, bookmakers.last_successful_fetch, bookmakers.consecutive_failures, bookmakers.priority_weight, bookmakers.include_in_consensus, bookmakers.created_at, bookmakers.updated_at \nFROM bookmakers \nWHERE bookmakers.name IN (?, ?, ?, ?, ?)\n2025-08-23 08:04:09,176 - sqlalchemy.engine.Engine - INFO - [cached since 0.1944s ago] ('draftkings', 'fanduel', 'betmgm', 'caesars', 'barstool')\n2025-08-23 08:04:09,178 - backend.core.app - INFO - \u2705 Bookmaker registry initialized on startup\n2025-08-23 08:04:09,178 - sqlalchemy.engine.Engine - INFO - ROLLBACK\n{"timestamp": "2025-08-23T08:04:09.178405", "level": "INFO", "logger": "a1betting.enhanced_websocket_routes", "message": "Skipping automatic enhanced_websocket_service.initialize() during test lifecycle", "module": "enhanced_logging", "function": "_log_with_context", "line": 227, "taskName": "anyio.from_thread.BlockingPortal._call_func"}\n2025-08-23 08:04:09,178 - backend.core.app - INFO - \u2705 Enterprise model registry services initialized on startup\n--- Logging error ---\nTraceback (most recent call last):\n  File "C:\\Python313\\Lib\\logging\\__init__.py", line 1154, in emit\n    stream.write(msg + self.terminator)\n    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^\n  File "C:\\Python313\\Lib\\encodings\\cp1252.py", line 19, in encode\n    return codecs.charmap_encode(input,self.errors,encoding_table)[0]\n           ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nUnicodeEncodeError: 'charmap' codec can't encode character '\\U0001f50d' in position 96: character maps to <undefined>\nCall stack:\n  File "C:\\Python313\\Lib\\threading.py", line 1014, in _bootstrap\n    self._bootstrap_inner()\n  File "C:\\Python313\\Lib\\threading.py", line 1043, in _bootstrap_inner\n    self.run()\n  File "C:\\Python313\\Lib\\threading.py", line 994, in run\n    self._target(*self._args, **self._kwargs)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\anyio\\from_thread.py", line 481, in run_blocking_portal\n    _eventloop.run(\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\anyio\\_core\\_eventloop.py", line 74, in run\n    return async_backend.run(func, args, {}, backend_options)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\anyio\\_backends\\_asyncio.py", line 2310, in run\n    return runner.run(wrapper())\n  File "C:\\Python313\\Lib\\asyncio\\runners.py", line 118, in run\n    return self._loop.run_until_complete(task)\n  File "C:\\Python313\\Lib\\asyncio\\base_events.py", line 712, in run_until_complete\n    self.run_forever()\n  File "C:\\Python313\\Lib\\asyncio\\base_events.py", line 683, in run_forever\n    self._run_once()\n  File "C:\\Python313\\Lib\\asyncio\\base_events.py", line 2042, in _run_once\n    handle._run()\n  File "C:\\Python313\\Lib\\asyncio\\events.py", line 89, in _run\n    self._context.run(self._callback, *self._args)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\anyio\\from_thread.py", line 221, in _call_func\n    retval = await retval_or_awaitable\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\starlette\\testclient.py", line 710, in lifespan\n    await self.app(scope, self.stream_receive.receive, self.stream_send.send)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\applications.py", line 1054, in __call__\n    await super().__call__(scope, receive, send)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\starlette\\applications.py", line 113, in __call__\n    await self.middleware_stack(scope, receive, send)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\starlette\\middleware\\errors.py", line 151, in __call__\n    await self.app(scope, receive, send)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\starlette\\middleware\\base.py", line 103, in __call__\n    await self.app(scope, receive, send)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\starlette\\middleware\\base.py", line 103, in __call__\n    await self.app(scope, receive, send)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\starlette\\middleware\\base.py", line 103, in __call__\n    await self.app(scope, receive, send)\n  File "C:\\Users\\bcmad\\Downloads\\A1Betting7-13.2\\backend\\middleware\\payload_guard.py", line 151, in __call__\n    await self.app(scope, receive, send)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\starlette\\middleware\\base.py", line 103, in __call__\n    await self.app(scope, receive, send)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\starlette\\middleware\\base.py", line 103, in __call__\n    await self.app(scope, receive, send)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\starlette\\middleware\\base.py", line 103, in __call__\n    await self.app(scope, receive, send)\n  [Previous line repeated 1 more time]\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\starlette\\middleware\\cors.py", line 77, in __call__\n    await self.app(scope, receive, send)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\starlette\\middleware\\exceptions.py", line 49, in __call__\n    await self.app(scope, receive, send)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\starlette\\routing.py", line 716, in __call__\n    await self.middleware_stack(scope, receive, send)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\starlette\\routing.py", line 725, in app\n    await self.lifespan(scope, receive, send)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\starlette\\routing.py", line 694, in lifespan\n    async with self.lifespan_context(app) as maybe_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\starlette\\routing.py", line 571, in __aenter__\n    await self._router.startup()\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\starlette\\routing.py", line 671, in startup\n    await handler()\n  File "C:\\Users\\bcmad\\Downloads\\A1Betting7-13.2\\backend\\core\\app.py", line 1511, in _run_bootstrap_validation\n    summary = await validate_app_bootstrap(_app)\n  File "C:\\Users\\bcmad\\Downloads\\A1Betting7-13.2\\backend\\services\\bootstrap_validator.py", line 724, in validate_app_bootstrap\n    return await validator.validate_bootstrap()\n  File "C:\\Users\\bcmad\\Downloads\\A1Betting7-13.2\\backend\\services\\bootstrap_validator.py", line 501, in validate_bootstrap\n    unified_logger.info(f"\U0001f50d Starting bootstrap validation [correlation_id: {self.correlation_id}]", context)\n  File "C:\\Users\\bcmad\\Downloads\\A1Betting7-13.2\\backend\\services\\unified_logging.py", line 229, in info\n    self.logger.handle(record)\nMessage: '\U0001f50d Starting bootstrap validation [correlation_id: 13d6b4e0-ed6c-48c6-a79f-deb4942ed7a7]'\nArguments: ()\n{"timestamp": "2025-08-23T08:04:09.178616", "level": "INFO", "logger": "a1betting", "message": "\U0001f50d Starting bootstrap validation [correlation_id: 13d6b4e0-ed6c-48c6-a79f-deb4942ed7a7]", "module": "", "function": "", "line": 0, "taskName": "anyio.from_thread.BlockingPortal._call_func", "context": "LogContext(user_id=None, session_id=None, request_id=None, component=<LogComponent.SYSTEM: 'system'>, operation='bootstrap_validation', duration_ms=None, additional_data={'correlation_id': '13d6b4e0-ed6c-48c6-a79f-deb4942ed7a7'})"}\n--- Logging error ---\nTraceback (most recent call last):\n  File "C:\\Python313\\Lib\\logging\\__init__.py", line 1154, in emit\n    stream.write(msg + self.terminator)\n    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^\n  File "C:\\Python313\\Lib\\encodings\\cp1252.py", line 19, in encode\n    return codecs.charmap_encode(input,self.errors,encoding_table)[0]\n           ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nUnicodeEncodeError: 'charmap' codec can't encode character '\\U0001f680' in position 99: character maps to <undefined>\nCall stack:\n  File "C:\\Python313\\Lib\\threading.py", line 1014, in _bootstrap\n    self._bootstrap_inner()\n  File "C:\\Python313\\Lib\\threading.py", line 1043, in _bootstrap_inner\n    self.run()\n  File "C:\\Python313\\Lib\\threading.py", line 994, in run\n    self._target(*self._args, **self._kwargs)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\anyio\\from_thread.py", line 481, in run_blocking_portal\n    _eventloop.run(\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\anyio\\_core\\_eventloop.py", line 74, in run\n    return async_backend.run(func, args, {}, backend_options)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\anyio\\_backends\\_asyncio.py", line 2310, in run\n    return runner.run(wrapper())\n  File "C:\\Python313\\Lib\\asyncio\\runners.py", line 118, in run\n    return self._loop.run_until_complete(task)\n  File "C:\\Python313\\Lib\\asyncio\\base_events.py", line 712, in run_until_complete\n    self.run_forever()\n  File "C:\\Python313\\Lib\\asyncio\\base_events.py", line 683, in run_forever\n    self._run_once()\n  File "C:\\Python313\\Lib\\asyncio\\base_events.py", line 2042, in _run_once\n    handle._run()\n  File "C:\\Python313\\Lib\\asyncio\\events.py", line 89, in _run\n    self._context.run(self._callback, *self._args)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\anyio\\from_thread.py", line 221, in _call_func\n    retval = await retval_or_awaitable\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\starlette\\testclient.py", line 710, in lifespan\n    await self.app(scope, self.stream_receive.receive, self.stream_send.send)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\applications.py", line 1054, in __call__\n    await super().__call__(scope, receive, send)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\starlette\\applications.py", line 113, in __call__\n    await self.middleware_stack(scope, receive, send)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\starlette\\middleware\\errors.py", line 151, in __call__\n    await self.app(scope, receive, send)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\starlette\\middleware\\base.py", line 103, in __call__\n    await self.app(scope, receive, send)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\starlette\\middleware\\base.py", line 103, in __call__\n    await self.app(scope, receive, send)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\starlette\\middleware\\base.py", line 103, in __call__\n    await self.app(scope, receive, send)\n  File "C:\\Users\\bcmad\\Downloads\\A1Betting7-13.2\\backend\\middleware\\payload_guard.py", line 151, in __call__\n    await self.app(scope, receive, send)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\starlette\\middleware\\base.py", line 103, in __call__\n    await self.app(scope, receive, send)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\starlette\\middleware\\base.py", line 103, in __call__\n    await self.app(scope, receive, send)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\starlette\\middleware\\base.py", line 103, in __call__\n    await self.app(scope, receive, send)\n  [Previous line repeated 1 more time]\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\starlette\\middleware\\cors.py", line 77, in __call__\n    await self.app(scope, receive, send)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\starlette\\middleware\\exceptions.py", line 49, in __call__\n    await self.app(scope, receive, send)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\starlette\\routing.py", line 716, in __call__\n    await self.middleware_stack(scope, receive, send)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\starlette\\routing.py", line 725, in app\n    await self.lifespan(scope, receive, send)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\starlette\\routing.py", line 694, in lifespan\n    async with self.lifespan_context(app) as maybe_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\starlette\\routing.py", line 571, in __aenter__\n    await self._router.startup()\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\starlette\\routing.py", line 671, in startup\n    await handler()\n  File "C:\\Users\\bcmad\\Downloads\\A1Betting7-13.2\\backend\\core\\app.py", line 1511, in _run_bootstrap_validation\n    summary = await validate_app_bootstrap(_app)\n  File "C:\\Users\\bcmad\\Downloads\\A1Betting7-13.2\\backend\\services\\bootstrap_validator.py", line 724, in validate_app_bootstrap\n    return await validator.validate_bootstrap()\n  File "C:\\Users\\bcmad\\Downloads\\A1Betting7-13.2\\backend\\services\\bootstrap_validator.py", line 597, in validate_bootstrap\n    self._log_bootstrap_summary(summary)\n  File "C:\\Users\\bcmad\\Downloads\\A1Betting7-13.2\\backend\\services\\bootstrap_validator.py", line 713, in _log_bootstrap_summary\n    unified_logger.warning(summary_message, context)\n  File "C:\\Users\\bcmad\\Downloads\\A1Betting7-13.2\\backend\\services\\unified_logging.py", line 234, in warning\n    self.logger.handle(record)\nMessage: "\U0001f680 BOOTSTRAP VALIDATION SUMMARY\\nCorrelation ID: 13d6b4e0-ed6c-48c6-a79f-deb4942ed7a7\\nValidation Duration: 0.00s\\nTotal Validations: 14\\n\u2705 Passed: 11\\n\u26a0\ufe0f Warnings: 3\\n\u274c Errors: 0\\n\U0001f525 Critical: 0\\n\\n\U0001f4cb ENDPOINT VALIDATION DETAILS:\\n  HEALTH:\\n    \u26a0\ufe0f \u26a0\ufe0f Endpoint /api/health found but missing methods. Expected: ['GET', 'HEAD'], Found: ['GET']\\n    \u26a0\ufe0f \u26a0\ufe0f Endpoint /health found but missing methods. Expected: ['GET', 'HEAD'], Found: ['GET']\\n    \u2705 \u2705 Endpoint /api/v2/diagnostics/health found with methods ['GET']\\n  SPORTS:\\n    \u26a0\ufe0f \u26a0\ufe0f Endpoint /api/v2/sports/activate found but missing methods. Expected: ['POST', 'OPTIONS'], Found: ['POST']\\n  WEBSOCKET:\\n    \u2705 \u2705 Endpoint /ws/client found with methods ['WEBSOCKET']\\n    \u2705 \u2705 Endpoint /ws/legacy/{client_id} found with methods ['WEBSOCKET']\\n    \u2705 Found both new (/ws/client) and legacy WebSocket patterns\\n    \u2705 \u2705 WebSocket correlation ID support available\\n  METRICS:\\n    \u2705 \u2705 Endpoint /metrics found with methods ['GET']\\n    \u2705 \u2705 Endpoint /api/metrics/summary found with methods ['GET']\\n  AUTH:\\n    \u2705 \u2705 Endpoint /api/auth/login found with methods ['POST']\\n  API_V2:\\n    \u2705 \u2705 Endpoint /api/props found with methods ['GET']\\n    \u2705 CORS origins configured: ['http://localhost:3000', 'http://localhost:5173']\\n  SYSTEM:\\n    \u2705 \u2705 Correlation system available with 5 active contexts\\n\\n\U0001f50c WEBSOCKET PATHS:\\n  \u2022 /ws/legacy/{client_id}\\n  \u2022 /ws/client\\n  \u2022 /ws/v2/connect\\n  \u2022 /ws/v2/odds\\n  \u2022 /ws/v2/arbitrage\\n  \u2022 /ws/v2/sport/{sport_name}\\n  \u2022 /ws/v2/portfolio\\n\\n\U0001f310 CORS ORIGINS:\\n  \u2022 http://localhost:3000\\n  \u2022 http://localhost:5173\\n\\n\u2699\ufe0f CONFIGURATION SUMMARY:\\n  Environment: development\\n  Debug Mode: True\\n  API Host: 0.0.0.0:8000\\n  Database: sqlite+aiosqlite:///a1betting.db\\n  Cache Enabled: True\\n  ML Enabled: True\\n  Modern ML: True\\n\\n\u26a0\ufe0f Warnings detected - Review configuration for optimal performance"\nArguments: ()\n{"timestamp": "2025-08-23T08:04:09.180733", "level": "WARNING", "logger": "a1betting", "message": "\U0001f680 BOOTSTRAP VALIDATION SUMMARY\\nCorrelation ID: 13d6b4e0-ed6c-48c6-a79f-deb4942ed7a7\\nValidation Duration: 0.00s\\nTotal Validations: 14\\n\u2705 Passed: 11\\n\u26a0\ufe0f Warnings: 3\\n\u274c Errors: 0\\n\U0001f525 Critical: 0\\n\\n\U0001f4cb ENDPOINT VALIDATION DETAILS:\\n  HEALTH:\\n    \u26a0\ufe0f \u26a0\ufe0f Endpoint /api/health found but missing methods. Expected: ['GET', 'HEAD'], Found: ['GET']\\n    \u26a0\ufe0f \u26a0\ufe0f Endpoint /health found but missing methods. Expected: ['GET', 'HEAD'], Found: ['GET']\\n    \u2705 \u2705 Endpoint /api/v2/diagnostics/health found with methods ['GET']\\n  SPORTS:\\n    \u26a0\ufe0f \u26a0\ufe0f Endpoint /api/v2/sports/activate found but missing methods. Expected: ['POST', 'OPTIONS'], Found: ['POST']\\n  WEBSOCKET:\\n    \u2705 \u2705 Endpoint /ws/client found with methods ['WEBSOCKET']\\n    \u2705 \u2705 Endpoint /ws/legacy/{client_id} found with methods ['WEBSOCKET']\\n    \u2705 Found both new (/ws/client) and legacy WebSocket patterns\\n    \u2705 \u2705 WebSocket correlation ID support available\\n  METRICS:\\n    \u2705 \u2705 Endpoint /metrics found with methods ['GET']\\n    \u2705 \u2705 Endpoint /api/metrics/summary found with methods ['GET']\\n  AUTH:\\n    \u2705 \u2705 Endpoint /api/auth/login found with methods ['POST']\\n  API_V2:\\n    \u2705 \u2705 Endpoint /api/props found with methods ['GET']\\n    \u2705 CORS origins configured: ['http://localhost:3000', 'http://localhost:5173']\\n  SYSTEM:\\n    \u2705 \u2705 Correlation system available with 5 active contexts\\n\\n\U0001f50c WEBSOCKET PATHS:\\n  \u2022 /ws/legacy/{client_id}\\n  \u2022 /ws/client\\n  \u2022 /ws/v2/connect\\n  \u2022 /ws/v2/odds\\n  \u2022 /ws/v2/arbitrage\\n  \u2022 /ws/v2/sport/{sport_name}\\n  \u2022 /ws/v2/portfolio\\n\\n\U0001f310 CORS ORIGINS:\\n  \u2022 http://localhost:3000\\n  \u2022 http://localhost:5173\\n\\n\u2699\ufe0f CONFIGURATION SUMMARY:\\n  Environment: development\\n  Debug Mode: True\\n  API Host: 0.0.0.0:8000\\n  Database: sqlite+aiosqlite:///a1betting.db\\n  Cache Enabled: True\\n  ML Enabled: True\\n  Modern ML: True\\n\\n\u26a0\ufe0f Warnings detected - Review configuration for optimal performance", "module": "", "function": "", "line": 0, "taskName": "anyio.from_thread.BlockingPortal._call_func", "context": "LogContext(user_id=None, session_id=None, request_id=None, component=<LogComponent.SYSTEM: 'system'>, operation='bootstrap_validation_summary', duration_ms=None, additional_data={'correlation_id': '13d6b4e0-ed6c-48c6-a79f-deb4942ed7a7', 'duration_seconds': 0.00211, 'validation_stats': {'total': 14, 'passed': 11, 'warnings': 3, 'errors': 0, 'critical': 0}})"}\n2025-08-23 08:04:09,182 - backend.core.app - WARNING - \u26a0\ufe0f 3 warnings found during bootstrap validation\n{"timestamp": "2025-08-23T08:04:09.182472", "level": "INFO", "logger": "a1betting.enhanced_websocket_routes", "message": "Skipping automatic enhanced_websocket_service.initialize() during test lifecycle", "module": "enhanced_logging", "function": "_log_with_context", "line": 227, "taskName": "anyio.from_thread.BlockingPortal._call_func"}\n{"timestamp": "2025-08-23T13:04:09.183184", "level": "INFO", "logger": "a1betting", "message": "Request started", "module": "structured_logging_middleware", "function": "log_request_start", "line": 109, "request_id": "192aa3ed-82b9-43d8-b26e-9215f5f0bf39", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro", "event_type": "request_start", "method": "OPTIONS", "url": "http://testserver/api/sports/activate/MLB", "path": "/api/sports/activate/MLB", "query_params": {}, "client_ip": "testclient", "user_agent": "testclient", "content_type": null}\n2025-08-23 08:04:09,183 - backend.middleware.request_id_middleware - INFO - Request started: OPTIONS /api/sports/activate/MLB\n2025-08-23 08:04:09,183 - backend.middleware.request_id_middleware - INFO - Request completed: OPTIONS /api/sports/activate/MLB - 400\n2025-08-23 08:04:09,183 - backend.middleware.distributed_trace_middleware - INFO - Trace completed: 7eb5a954-3b39-4953-8a9c-5269704b8343\n{"timestamp": "2025-08-23T13:04:09.183811", "level": "INFO", "logger": "a1betting", "message": "Request completed", "module": "structured_logging_middleware", "function": "log_request_success", "line": 124, "request_id": "192aa3ed-82b9-43d8-b26e-9215f5f0bf39", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro", "event_type": "request_success", "method": "OPTIONS", "url": "http://testserver/api/sports/activate/MLB", "path": "/api/sports/activate/MLB", "status_code": 400, "duration_ms": 0.64, "response_size": "22", "performance_category": "fast"}\n{"timestamp": "2025-08-23T08:04:09.184790", "level": "INFO", "logger": "a1betting.enhanced_websocket_routes", "message": "Skipping automatic enhanced_websocket_service.shutdown() during test lifecycle", "module": "enhanced_logging", "function": "_log_with_context", "line": 227, "taskName": "anyio.from_thread.BlockingPortal._call_func"}\n{"timestamp": "2025-08-23T08:04:09.184875", "level": "INFO", "logger": "a1betting.enhanced_websocket_routes", "message": "Skipping automatic enhanced_websocket_service.shutdown() during test lifecycle", "module": "enhanced_logging", "function": "_log_with_context", "line": 227, "taskName": "anyio.from_thread.BlockingPortal._call_func"}
------------------------------ Captured log call ------------------------------
INFO     backend.middleware.rate_limit:rate_limit.py:90 Rate limiting disabled\nINFO     backend.middleware.security_headers:security_headers.py:71 \u2705 Security headers middleware enabled: CSP=report-only, HSTS=True, strict_mode=False\nINFO     backend.middleware.legacy_middleware:legacy_middleware.py:68 Registered known legacy endpoints with forwarding paths\nINFO     backend.middleware.legacy_middleware:legacy_middleware.py:44 Legacy middleware initialized\nINFO     sqlalchemy.engine.Engine:base.py:2698 BEGIN (implicit)\nINFO     sqlalchemy.engine.Engine:base.py:1842 SELECT bookmakers.id, bookmakers.name, bookmakers.display_name, bookmakers.short_name, bookmakers.website_url, bookmakers.api_endpoint, bookmakers.country_code, bookmakers.status, bookmakers.is_trusted, bookmakers.reliability_score, bookmakers.api_key_required, bookmakers.rate_limit_per_minute, bookmakers.last_successful_fetch, bookmakers.consecutive_failures, bookmakers.priority_weight, bookmakers.include_in_consensus, bookmakers.created_at, bookmakers.updated_at \nFROM bookmakers \nWHERE bookmakers.name IN (?, ?, ?, ?, ?)\nINFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 0.1944s ago] ('draftkings', 'fanduel', 'betmgm', 'caesars', 'barstool')\nINFO     backend.core.app:app.py:395 \u2705 Bookmaker registry initialized on startup\nINFO     sqlalchemy.engine.Engine:base.py:2701 ROLLBACK\nINFO     backend.core.app:app.py:1179 \u2705 Enterprise model registry services initialized on startup\nWARNING  backend.core.app:app.py:1520 \u26a0\ufe0f 3 warnings found during bootstrap validation\nINFO     backend.middleware.request_id_middleware:request_id_middleware.py:67 Request started: OPTIONS /api/sports/activate/MLB\nINFO     backend.middleware.request_id_middleware:request_id_middleware.py:92 Request completed: OPTIONS /api/sports/activate/MLB - 400\nINFO     backend.middleware.distributed_trace_middleware:distributed_trace_middleware.py:224 Trace completed: 7eb5a954-3b39-4953-8a9c-5269704b8343
______________ TestOptionsPreflight.test_preflight_cors_headers _______________
tests\stabilization\test_stabilization_matrix.py:140: in test_preflight_cors_headers
    assert header in headers or header.title().replace("-", "-") in headers, \
E   AssertionError: Missing CORS header: access-control-allow-origin
E   assert ('access-control-allow-origin' in Headers({'vary': 'Origin', 'access-control-allow-methods': 'DELETE, GET, HEAD, OPTIONS, PATCH, POST, PUT', 'access-con...s 'none'; base-uri 'self'; form-action 'self'; connect-src 'self'; upgrade-insecure-requests; report-uri /csp/report"}) or 'Access-Control-Allow-Origin' in Headers({'vary': 'Origin', 'access-control-allow-methods': 'DELETE, GET, HEAD, OPTIONS, PATCH, POST, PUT', 'access-con...s 'none'; base-uri 'self'; form-action 'self'; connect-src 'self'; upgrade-insecure-requests; report-uri /csp/report"}))
E    +  where 'Access-Control-Allow-Origin' = <built-in method replace of str object at 0x00000171C6F9FC80>('-', '-')
E    +    where <built-in method replace of str object at 0x00000171C6F9FC80> = 'Access-Control-Allow-Origin'.replace
E    +      where 'Access-Control-Allow-Origin' = <built-in method title of str object at 0x00000171C05D90C0>()
E    +        where <built-in method title of str object at 0x00000171C05D90C0> = 'access-control-allow-origin'.title
---------------------------- Captured stderr setup ----------------------------
2025-08-23 08:04:09,190 - backend.core.app - INFO - \U0001f680 Creating A1Betting canonical app...\n2025-08-23 08:04:09,190 - backend.core.app - INFO - \u2705 Request ID correlation middleware added\n2025-08-23 08:04:09,190 - backend.core.app - INFO - \u2705 Distributed trace correlation middleware added\n2025-08-23 08:04:09,190 - backend.core.app - INFO - \u2705 Structured logging middleware added\n2025-08-23 08:04:09,191 - backend.core.app - INFO - \u2705 Prometheus metrics middleware added\n2025-08-23 08:04:09,191 - backend.core.app - INFO - \u2705 Payload guard middleware added: max_size=262144 bytes, enforce_json=True, enabled=True\n2025-08-23 08:04:09,191 - backend.middleware.rate_limit - INFO - Rate limiting disabled\n2025-08-23 08:04:09,191 - backend.core.app - INFO - \u2705 Rate limiting middleware added: 100/min, burst=200, enabled=False\n2025-08-23 08:04:09,191 - backend.core.app - INFO - \u2705 Security headers middleware added: [HSTS, CSP(report-only), COOP, COEP], x_frame_options=DENY\n2025-08-23 08:04:09,191 - backend.core.app - INFO - \u2705 Legacy endpoint middleware added for usage telemetry and deprecation controls\n2025-08-23 08:04:09,191 - backend.exceptions.handlers - INFO - \u2705 PayloadRejectionError handler registered\n2025-08-23 08:04:09,191 - backend.exceptions.handlers - INFO - \u2705 All exception handlers registered with structured error taxonomy\n2025-08-23 08:04:09,191 - backend.core.app - INFO - \u2705 Centralized exception handlers registered\n2025-08-23 08:04:09,192 - backend.core.app - INFO - \u2705 PR11 Enhanced WebSocket client route included (/ws/client)\n2025-08-23 08:04:09,196 - backend.core.app - INFO - \u2705 Auth routes also exposed at root (/auth/*) for compatibility\n2025-08-23 08:04:09,196 - backend.core.app - INFO - \u2705 Auth and users routes included (auth with /api prefix)\n2025-08-23 08:04:09,197 - backend.core.app - INFO - \u2705 Diagnostics routes included (/api/v2/diagnostics/health, /api/v2/diagnostics/system)\n2025-08-23 08:04:09,198 - backend.core.app - INFO - \u2705 Meta cache routes included (/api/v2/meta/cache-stats, /api/v2/meta/cache-health)\n2025-08-23 08:04:09,199 - backend.core.app - INFO - \u2705 Legacy meta routes included (/api/v2/meta/legacy-usage, /api/v2/meta/migration-readiness)\n2025-08-23 08:04:09,201 - backend.core.app - ERROR - \u274c Failed to register CSP report routes: Invalid args for response field! Hint: check that <class 'logging.Logger'> is a valid Pydantic field type. If you are using a return type annotation that is not a valid Pydantic field (e.g. Union[Response, dict, None]) you can disable generating the response model from the type annotation with the path operation decorator parameter response_model=None. Read more: https://fastapi.tiangolo.com/tutorial/response-model/\n2025-08-23 08:04:09,202 - backend.core.app - INFO - \u2705 Trace test routes included (/api/trace/* endpoints)\n2025-08-23 08:04:09,203 - backend.core.app - INFO - \u2705 Model inference routes included (/api/v2/models/* endpoints)\n2025-08-23 08:04:09,204 - backend.core.app - INFO - \u2705 Observability events routes included (/api/v2/observability/* endpoints)\n2025-08-23 08:04:09,206 - backend.core.app - INFO - \u2705 Admin control routes included (/api/v2/models/shadow/* and /api/v2/models/admin/* endpoints)\n2025-08-23 08:04:09,208 - backend.core.app - INFO - \u2705 Enhanced WebSocket routes included (/ws/v2/* endpoints)\n2025-08-23 08:04:09,209 - backend.core.app - INFO - \u2705 WebSocket logging routes included (/api/websocket/* endpoints)\n2025-08-23 08:04:09,210 - backend.core.app - INFO - \u2705 Version routes included (/api/version/* endpoints)\n2025-08-23 08:04:09,210 - backend.core.app - INFO - \u2705 WebVitals pipeline routes included (/api/metrics/v1/* endpoints)\n2025-08-23 08:04:09,214 - backend.core.app - INFO - \u2705 Enhanced ML routes included (/api/enhanced-ml/* endpoints)\n2025-08-23 08:04:09,215 - backend.core.app - INFO - \u2705 Fallback enhanced-ml compatibility router mounted at /api/enhanced-ml\n2025-08-23 08:04:09,220 - backend.core.app - INFO - \u2705 Consolidated PrizePicks routes included (/api/v2/prizepicks/* endpoints)\n2025-08-23 08:04:09,223 - backend.core.app - INFO - \u2705 Consolidated ML routes included (/api/v2/ml/* endpoints)\n2025-08-23 08:04:09,225 - backend.core.app - ERROR - \u274c Failed to register consolidated Admin routes: parameter without a default follows parameter with a default (consolidated_admin.py, line 165)\n2025-08-23 08:04:09,229 - backend.core.app - INFO - \u2705 Odds & Line Movement routes included (/v1/odds/* endpoints)\n2025-08-23 08:04:09,230 - backend.core.app - INFO - \u2705 Advanced-Kelly compatibility router mounted at /api/advanced-kelly\n2025-08-23 08:04:09,233 - backend.core.app - ERROR - \u274c Failed to register Risk Management & Personalization routes: 'NoneType' object has no attribute 'alert_evaluation_interval_seconds'\n2025-08-23 08:04:09,234 - backend.core.app - INFO - \u2705 Dependencies Health routes included (/api/dependencies/* endpoints)\n2025-08-23 08:04:09,236 - backend.core.app - INFO - \u2705 Provider Resilience routes included (/api/provider-resilience/* endpoints)\n2025-08-23 08:04:09,237 - backend.core.app - INFO - \u2705 System capabilities routes included (/api/system/* endpoints)\n2025-08-23 08:04:09,241 - backend.core.app - INFO - \u2705 Real-time market streaming routes included (/streaming/* endpoints)\n2025-08-23 08:04:09,241 - backend.core.app - INFO - \u2705 Security HEAD endpoints included (/api/* HEAD endpoints)\n2025-08-23 08:04:09,243 - backend.core.app - INFO - \u2705 ML Model Registry routes included (/api/models/* endpoints)\n2025-08-23 08:04:09,244 - backend.core.app - INFO - \u2705 Data ingestion routes included (/api/v1/ingestion/* endpoints)\n2025-08-23 08:04:09,248 - backend.core.app - INFO - \u2705 Enterprise model registry routes included (/api/models/enterprise/* endpoints)\n2025-08-23 08:04:09,251 - backend.core.app - INFO - \u2705 Alert engine routes included (/api/alert-engine/* endpoints)\n2025-08-23 08:04:09,255 - backend.core.app - INFO - \u2705 PropFinder routes included (/api/propfinder/* endpoints)\n2025-08-23 08:04:09,256 - backend.core.app - WARNING - \u26a0\ufe0f Could not import multiple_sportsbook_routes: cannot import name 'RateLimiter' from 'backend.middleware.rate_limit' (C:\\Users\\bcmad\\Downloads\\A1Betting7-13.2\\backend\\middleware\\rate_limit.py)\n2025-08-23 08:04:09,259 - backend.core.app - INFO - \u2705 Sportsbook compatibility router mounted at /api/sportsbook\n2025-08-23 08:04:09,259 - backend.core.app - INFO - \U0001f50d Bootstrap validation scheduled on startup\n2025-08-23 08:04:09,259 - backend.core.app - INFO - \U0001f3e5 Health endpoints normalized: /api/health, /health, /api/v2/health -> identical envelope format\n2025-08-23 08:04:09,259 - backend.core.app - INFO - \u2705 A1Betting canonical app created successfully
----------------------------- Captured log setup ------------------------------
INFO     backend.core.app:app.py:65 \U0001f680 Creating A1Betting canonical app...\nINFO     backend.core.app:app.py:104 \u2705 Request ID correlation middleware added\nINFO     backend.core.app:app.py:114 \u2705 Distributed trace correlation middleware added\nINFO     backend.core.app:app.py:126 \u2705 Structured logging middleware added\nINFO     backend.core.app:app.py:146 \u2705 Prometheus metrics middleware added\nINFO     backend.core.app:app.py:167 \u2705 Payload guard middleware added: max_size=262144 bytes, enforce_json=True, enabled=True\nINFO     backend.middleware.rate_limit:rate_limit.py:90 Rate limiting disabled\nINFO     backend.core.app:app.py:202 \u2705 Rate limiting middleware added: 100/min, burst=200, enabled=False\nINFO     backend.core.app:app.py:244 \u2705 Security headers middleware added: [HSTS, CSP(report-only), COOP, COEP], x_frame_options=DENY\nINFO     backend.core.app:app.py:259 \u2705 Legacy endpoint middleware added for usage telemetry and deprecation controls\nINFO     backend.exceptions.handlers:handlers.py:235 \u2705 PayloadRejectionError handler registered\nINFO     backend.exceptions.handlers:handlers.py:250 \u2705 All exception handlers registered with structured error taxonomy\nINFO     backend.core.app:app.py:269 \u2705 Centralized exception handlers registered\nINFO     backend.core.app:app.py:332 \u2705 PR11 Enhanced WebSocket client route included (/ws/client)\nINFO     backend.core.app:app.py:702 \u2705 Auth routes also exposed at root (/auth/*) for compatibility\nINFO     backend.core.app:app.py:706 \u2705 Auth and users routes included (auth with /api prefix)\nINFO     backend.core.app:app.py:714 \u2705 Diagnostics routes included (/api/v2/diagnostics/health, /api/v2/diagnostics/system)\nINFO     backend.core.app:app.py:763 \u2705 Meta cache routes included (/api/v2/meta/cache-stats, /api/v2/meta/cache-health)\nINFO     backend.core.app:app.py:773 \u2705 Legacy meta routes included (/api/v2/meta/legacy-usage, /api/v2/meta/migration-readiness)\nERROR    backend.core.app:app.py:788 \u274c Failed to register CSP report routes: Invalid args for response field! Hint: check that <class 'logging.Logger'> is a valid Pydantic field type. If you are using a return type annotation that is not a valid Pydantic field (e.g. Union[Response, dict, None]) you can disable generating the response model from the type annotation with the path operation decorator parameter response_model=None. Read more: https://fastapi.tiangolo.com/tutorial/response-model/\nINFO     backend.core.app:app.py:794 \u2705 Trace test routes included (/api/trace/* endpoints)\nINFO     backend.core.app:app.py:804 \u2705 Model inference routes included (/api/v2/models/* endpoints)\nINFO     backend.core.app:app.py:814 \u2705 Observability events routes included (/api/v2/observability/* endpoints)\nINFO     backend.core.app:app.py:824 \u2705 Admin control routes included (/api/v2/models/shadow/* and /api/v2/models/admin/* endpoints)\nINFO     backend.core.app:app.py:834 \u2705 Enhanced WebSocket routes included (/ws/v2/* endpoints)\nINFO     backend.core.app:app.py:844 \u2705 WebSocket logging routes included (/api/websocket/* endpoints)\nINFO     backend.core.app:app.py:854 \u2705 Version routes included (/api/version/* endpoints)\nINFO     backend.core.app:app.py:864 \u2705 WebVitals pipeline routes included (/api/metrics/v1/* endpoints)\nINFO     backend.core.app:app.py:874 \u2705 Enhanced ML routes included (/api/enhanced-ml/* endpoints)\nINFO     backend.core.app:app.py:986 \u2705 Fallback enhanced-ml compatibility router mounted at /api/enhanced-ml\nINFO     backend.core.app:app.py:995 \u2705 Consolidated PrizePicks routes included (/api/v2/prizepicks/* endpoints)\nINFO     backend.core.app:app.py:1005 \u2705 Consolidated ML routes included (/api/v2/ml/* endpoints)\nERROR    backend.core.app:app.py:1019 \u274c Failed to register consolidated Admin routes: parameter without a default follows parameter with a default (consolidated_admin.py, line 165)\nINFO     backend.core.app:app.py:1025 \u2705 Odds & Line Movement routes included (/v1/odds/* endpoints)\nINFO     backend.core.app:app.py:1066 \u2705 Advanced-Kelly compatibility router mounted at /api/advanced-kelly\nERROR    backend.core.app:app.py:1078 \u274c Failed to register Risk Management & Personalization routes: 'NoneType' object has no attribute 'alert_evaluation_interval_seconds'\nINFO     backend.core.app:app.py:1084 \u2705 Dependencies Health routes included (/api/dependencies/* endpoints)\nINFO     backend.core.app:app.py:1094 \u2705 Provider Resilience routes included (/api/provider-resilience/* endpoints)\nINFO     backend.core.app:app.py:1104 \u2705 System capabilities routes included (/api/system/* endpoints)\nINFO     backend.core.app:app.py:1114 \u2705 Real-time market streaming routes included (/streaming/* endpoints)\nINFO     backend.core.app:app.py:1124 \u2705 Security HEAD endpoints included (/api/* HEAD endpoints)\nINFO     backend.core.app:app.py:1134 \u2705 ML Model Registry routes included (/api/models/* endpoints)\nINFO     backend.core.app:app.py:1144 \u2705 Data ingestion routes included (/api/v1/ingestion/* endpoints)\nINFO     backend.core.app:app.py:1154 \u2705 Enterprise model registry routes included (/api/models/enterprise/* endpoints)\nINFO     backend.core.app:app.py:1199 \u2705 Alert engine routes included (/api/alert-engine/* endpoints)\nINFO     backend.core.app:app.py:1209 \u2705 PropFinder routes included (/api/propfinder/* endpoints)\nWARNING  backend.core.app:app.py:1221 \u26a0\ufe0f Could not import multiple_sportsbook_routes: cannot import name 'RateLimiter' from 'backend.middleware.rate_limit' (C:\\Users\\bcmad\\Downloads\\A1Betting7-13.2\\backend\\middleware\\rate_limit.py)\nINFO     backend.core.app:app.py:1495 \u2705 Sportsbook compatibility router mounted at /api/sportsbook\nINFO     backend.core.app:app.py:1527 \U0001f50d Bootstrap validation scheduled on startup\nINFO     backend.core.app:app.py:1535 \U0001f3e5 Health endpoints normalized: /api/health, /health, /api/v2/health -> identical envelope format\nINFO     backend.core.app:app.py:1536 \u2705 A1Betting canonical app created successfully
---------------------------- Captured stdout call -----------------------------
2025-08-23 08:04:09,262 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-23 08:04:09,263 INFO sqlalchemy.engine.Engine SELECT bookmakers.id, bookmakers.name, bookmakers.display_name, bookmakers.short_name, bookmakers.website_url, bookmakers.api_endpoint, bookmakers.country_code, bookmakers.status, bookmakers.is_trusted, bookmakers.reliability_score, bookmakers.api_key_required, bookmakers.rate_limit_per_minute, bookmakers.last_successful_fetch, bookmakers.consecutive_failures, bookmakers.priority_weight, bookmakers.include_in_consensus, bookmakers.created_at, bookmakers.updated_at 
FROM bookmakers 
WHERE bookmakers.name IN (?, ?, ?, ?, ?)
2025-08-23 08:04:09,263 INFO sqlalchemy.engine.Engine [cached since 0.2807s ago] ('draftkings', 'fanduel', 'betmgm', 'caesars', 'barstool')
2025-08-23 08:04:09,263 INFO sqlalchemy.engine.Engine ROLLBACK
---------------------------- Captured stderr call -----------------------------
2025-08-23 08:04:09,262 - backend.middleware.rate_limit - INFO - Rate limiting disabled\n2025-08-23 08:04:09,262 - backend.middleware.security_headers - INFO - \u2705 Security headers middleware enabled: CSP=report-only, HSTS=True, strict_mode=False\n2025-08-23 08:04:09,262 - backend.middleware.legacy_middleware - INFO - Registered known legacy endpoints with forwarding paths\n2025-08-23 08:04:09,262 - backend.middleware.legacy_middleware - INFO - Legacy middleware initialized\n2025-08-23 08:04:09,262 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)\n2025-08-23 08:04:09,263 - sqlalchemy.engine.Engine - INFO - SELECT bookmakers.id, bookmakers.name, bookmakers.display_name, bookmakers.short_name, bookmakers.website_url, bookmakers.api_endpoint, bookmakers.country_code, bookmakers.status, bookmakers.is_trusted, bookmakers.reliability_score, bookmakers.api_key_required, bookmakers.rate_limit_per_minute, bookmakers.last_successful_fetch, bookmakers.consecutive_failures, bookmakers.priority_weight, bookmakers.include_in_consensus, bookmakers.created_at, bookmakers.updated_at \nFROM bookmakers \nWHERE bookmakers.name IN (?, ?, ?, ?, ?)\n2025-08-23 08:04:09,263 - sqlalchemy.engine.Engine - INFO - [cached since 0.2807s ago] ('draftkings', 'fanduel', 'betmgm', 'caesars', 'barstool')\n2025-08-23 08:04:09,263 - backend.core.app - INFO - \u2705 Bookmaker registry initialized on startup\n2025-08-23 08:04:09,263 - sqlalchemy.engine.Engine - INFO - ROLLBACK\n{"timestamp": "2025-08-23T08:04:09.264212", "level": "INFO", "logger": "a1betting.enhanced_websocket_routes", "message": "Skipping automatic enhanced_websocket_service.initialize() during test lifecycle", "module": "enhanced_logging", "function": "_log_with_context", "line": 227, "taskName": "anyio.from_thread.BlockingPortal._call_func"}\n2025-08-23 08:04:09,264 - backend.core.app - INFO - \u2705 Enterprise model registry services initialized on startup\n--- Logging error ---\nTraceback (most recent call last):\n  File "C:\\Python313\\Lib\\logging\\__init__.py", line 1154, in emit\n    stream.write(msg + self.terminator)\n    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^\n  File "C:\\Python313\\Lib\\encodings\\cp1252.py", line 19, in encode\n    return codecs.charmap_encode(input,self.errors,encoding_table)[0]\n           ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nUnicodeEncodeError: 'charmap' codec can't encode character '\\U0001f50d' in position 96: character maps to <undefined>\nCall stack:\n  File "C:\\Python313\\Lib\\threading.py", line 1014, in _bootstrap\n    self._bootstrap_inner()\n  File "C:\\Python313\\Lib\\threading.py", line 1043, in _bootstrap_inner\n    self.run()\n  File "C:\\Python313\\Lib\\threading.py", line 994, in run\n    self._target(*self._args, **self._kwargs)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\anyio\\from_thread.py", line 481, in run_blocking_portal\n    _eventloop.run(\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\anyio\\_core\\_eventloop.py", line 74, in run\n    return async_backend.run(func, args, {}, backend_options)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\anyio\\_backends\\_asyncio.py", line 2310, in run\n    return runner.run(wrapper())\n  File "C:\\Python313\\Lib\\asyncio\\runners.py", line 118, in run\n    return self._loop.run_until_complete(task)\n  File "C:\\Python313\\Lib\\asyncio\\base_events.py", line 712, in run_until_complete\n    self.run_forever()\n  File "C:\\Python313\\Lib\\asyncio\\base_events.py", line 683, in run_forever\n    self._run_once()\n  File "C:\\Python313\\Lib\\asyncio\\base_events.py", line 2042, in _run_once\n    handle._run()\n  File "C:\\Python313\\Lib\\asyncio\\events.py", line 89, in _run\n    self._context.run(self._callback, *self._args)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\anyio\\from_thread.py", line 221, in _call_func\n    retval = await retval_or_awaitable\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\starlette\\testclient.py", line 710, in lifespan\n    await self.app(scope, self.stream_receive.receive, self.stream_send.send)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\applications.py", line 1054, in __call__\n    await super().__call__(scope, receive, send)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\starlette\\applications.py", line 113, in __call__\n    await self.middleware_stack(scope, receive, send)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\starlette\\middleware\\errors.py", line 151, in __call__\n    await self.app(scope, receive, send)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\starlette\\middleware\\base.py", line 103, in __call__\n    await self.app(scope, receive, send)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\starlette\\middleware\\base.py", line 103, in __call__\n    await self.app(scope, receive, send)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\starlette\\middleware\\base.py", line 103, in __call__\n    await self.app(scope, receive, send)\n  File "C:\\Users\\bcmad\\Downloads\\A1Betting7-13.2\\backend\\middleware\\payload_guard.py", line 151, in __call__\n    await self.app(scope, receive, send)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\starlette\\middleware\\base.py", line 103, in __call__\n    await self.app(scope, receive, send)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\starlette\\middleware\\base.py", line 103, in __call__\n    await self.app(scope, receive, send)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\starlette\\middleware\\base.py", line 103, in __call__\n    await self.app(scope, receive, send)\n  [Previous line repeated 1 more time]\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\starlette\\middleware\\cors.py", line 77, in __call__\n    await self.app(scope, receive, send)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\starlette\\middleware\\exceptions.py", line 49, in __call__\n    await self.app(scope, receive, send)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\starlette\\routing.py", line 716, in __call__\n    await self.middleware_stack(scope, receive, send)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\starlette\\routing.py", line 725, in app\n    await self.lifespan(scope, receive, send)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\starlette\\routing.py", line 694, in lifespan\n    async with self.lifespan_context(app) as maybe_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\starlette\\routing.py", line 571, in __aenter__\n    await self._router.startup()\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\starlette\\routing.py", line 671, in startup\n    await handler()\n  File "C:\\Users\\bcmad\\Downloads\\A1Betting7-13.2\\backend\\core\\app.py", line 1511, in _run_bootstrap_validation\n    summary = await validate_app_bootstrap(_app)\n  File "C:\\Users\\bcmad\\Downloads\\A1Betting7-13.2\\backend\\services\\bootstrap_validator.py", line 724, in validate_app_bootstrap\n    return await validator.validate_bootstrap()\n  File "C:\\Users\\bcmad\\Downloads\\A1Betting7-13.2\\backend\\services\\bootstrap_validator.py", line 501, in validate_bootstrap\n    unified_logger.info(f"\U0001f50d Starting bootstrap validation [correlation_id: {self.correlation_id}]", context)\n  File "C:\\Users\\bcmad\\Downloads\\A1Betting7-13.2\\backend\\services\\unified_logging.py", line 229, in info\n    self.logger.handle(record)\nMessage: '\U0001f50d Starting bootstrap validation [correlation_id: f2966163-2b70-4a96-8963-162dfea7d96a]'\nArguments: ()\n{"timestamp": "2025-08-23T08:04:09.264423", "level": "INFO", "logger": "a1betting", "message": "\U0001f50d Starting bootstrap validation [correlation_id: f2966163-2b70-4a96-8963-162dfea7d96a]", "module": "", "function": "", "line": 0, "taskName": "anyio.from_thread.BlockingPortal._call_func", "context": "LogContext(user_id=None, session_id=None, request_id=None, component=<LogComponent.SYSTEM: 'system'>, operation='bootstrap_validation', duration_ms=None, additional_data={'correlation_id': 'f2966163-2b70-4a96-8963-162dfea7d96a'})"}\n--- Logging error ---\nTraceback (most recent call last):\n  File "C:\\Python313\\Lib\\logging\\__init__.py", line 1154, in emit\n    stream.write(msg + self.terminator)\n    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^\n  File "C:\\Python313\\Lib\\encodings\\cp1252.py", line 19, in encode\n    return codecs.charmap_encode(input,self.errors,encoding_table)[0]\n           ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nUnicodeEncodeError: 'charmap' codec can't encode character '\\U0001f680' in position 99: character maps to <undefined>\nCall stack:\n  File "C:\\Python313\\Lib\\threading.py", line 1014, in _bootstrap\n    self._bootstrap_inner()\n  File "C:\\Python313\\Lib\\threading.py", line 1043, in _bootstrap_inner\n    self.run()\n  File "C:\\Python313\\Lib\\threading.py", line 994, in run\n    self._target(*self._args, **self._kwargs)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\anyio\\from_thread.py", line 481, in run_blocking_portal\n    _eventloop.run(\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\anyio\\_core\\_eventloop.py", line 74, in run\n    return async_backend.run(func, args, {}, backend_options)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\anyio\\_backends\\_asyncio.py", line 2310, in run\n    return runner.run(wrapper())\n  File "C:\\Python313\\Lib\\asyncio\\runners.py", line 118, in run\n    return self._loop.run_until_complete(task)\n  File "C:\\Python313\\Lib\\asyncio\\base_events.py", line 712, in run_until_complete\n    self.run_forever()\n  File "C:\\Python313\\Lib\\asyncio\\base_events.py", line 683, in run_forever\n    self._run_once()\n  File "C:\\Python313\\Lib\\asyncio\\base_events.py", line 2042, in _run_once\n    handle._run()\n  File "C:\\Python313\\Lib\\asyncio\\events.py", line 89, in _run\n    self._context.run(self._callback, *self._args)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\anyio\\from_thread.py", line 221, in _call_func\n    retval = await retval_or_awaitable\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\starlette\\testclient.py", line 710, in lifespan\n    await self.app(scope, self.stream_receive.receive, self.stream_send.send)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\applications.py", line 1054, in __call__\n    await super().__call__(scope, receive, send)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\starlette\\applications.py", line 113, in __call__\n    await self.middleware_stack(scope, receive, send)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\starlette\\middleware\\errors.py", line 151, in __call__\n    await self.app(scope, receive, send)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\starlette\\middleware\\base.py", line 103, in __call__\n    await self.app(scope, receive, send)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\starlette\\middleware\\base.py", line 103, in __call__\n    await self.app(scope, receive, send)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\starlette\\middleware\\base.py", line 103, in __call__\n    await self.app(scope, receive, send)\n  File "C:\\Users\\bcmad\\Downloads\\A1Betting7-13.2\\backend\\middleware\\payload_guard.py", line 151, in __call__\n    await self.app(scope, receive, send)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\starlette\\middleware\\base.py", line 103, in __call__\n    await self.app(scope, receive, send)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\starlette\\middleware\\base.py", line 103, in __call__\n    await self.app(scope, receive, send)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\starlette\\middleware\\base.py", line 103, in __call__\n    await self.app(scope, receive, send)\n  [Previous line repeated 1 more time]\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\starlette\\middleware\\cors.py", line 77, in __call__\n    await self.app(scope, receive, send)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\starlette\\middleware\\exceptions.py", line 49, in __call__\n    await self.app(scope, receive, send)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\starlette\\routing.py", line 716, in __call__\n    await self.middleware_stack(scope, receive, send)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\starlette\\routing.py", line 725, in app\n    await self.lifespan(scope, receive, send)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\starlette\\routing.py", line 694, in lifespan\n    async with self.lifespan_context(app) as maybe_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\starlette\\routing.py", line 571, in __aenter__\n    await self._router.startup()\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\starlette\\routing.py", line 671, in startup\n    await handler()\n  File "C:\\Users\\bcmad\\Downloads\\A1Betting7-13.2\\backend\\core\\app.py", line 1511, in _run_bootstrap_validation\n    summary = await validate_app_bootstrap(_app)\n  File "C:\\Users\\bcmad\\Downloads\\A1Betting7-13.2\\backend\\services\\bootstrap_validator.py", line 724, in validate_app_bootstrap\n    return await validator.validate_bootstrap()\n  File "C:\\Users\\bcmad\\Downloads\\A1Betting7-13.2\\backend\\services\\bootstrap_validator.py", line 597, in validate_bootstrap\n    self._log_bootstrap_summary(summary)\n  File "C:\\Users\\bcmad\\Downloads\\A1Betting7-13.2\\backend\\services\\bootstrap_validator.py", line 713, in _log_bootstrap_summary\n    unified_logger.warning(summary_message, context)\n  File "C:\\Users\\bcmad\\Downloads\\A1Betting7-13.2\\backend\\services\\unified_logging.py", line 234, in warning\n    self.logger.handle(record)\nMessage: "\U0001f680 BOOTSTRAP VALIDATION SUMMARY\\nCorrelation ID: f2966163-2b70-4a96-8963-162dfea7d96a\\nValidation Duration: 0.00s\\nTotal Validations: 14\\n\u2705 Passed: 11\\n\u26a0\ufe0f Warnings: 3\\n\u274c Errors: 0\\n\U0001f525 Critical: 0\\n\\n\U0001f4cb ENDPOINT VALIDATION DETAILS:\\n  HEALTH:\\n    \u26a0\ufe0f \u26a0\ufe0f Endpoint /api/health found but missing methods. Expected: ['GET', 'HEAD'], Found: ['GET']\\n    \u26a0\ufe0f \u26a0\ufe0f Endpoint /health found but missing methods. Expected: ['GET', 'HEAD'], Found: ['GET']\\n    \u2705 \u2705 Endpoint /api/v2/diagnostics/health found with methods ['GET']\\n  SPORTS:\\n    \u26a0\ufe0f \u26a0\ufe0f Endpoint /api/v2/sports/activate found but missing methods. Expected: ['POST', 'OPTIONS'], Found: ['POST']\\n  WEBSOCKET:\\n    \u2705 \u2705 Endpoint /ws/client found with methods ['WEBSOCKET']\\n    \u2705 \u2705 Endpoint /ws/legacy/{client_id} found with methods ['WEBSOCKET']\\n    \u2705 Found both new (/ws/client) and legacy WebSocket patterns\\n    \u2705 \u2705 WebSocket correlation ID support available\\n  METRICS:\\n    \u2705 \u2705 Endpoint /metrics found with methods ['GET']\\n    \u2705 \u2705 Endpoint /api/metrics/summary found with methods ['GET']\\n  AUTH:\\n    \u2705 \u2705 Endpoint /api/auth/login found with methods ['POST']\\n  API_V2:\\n    \u2705 \u2705 Endpoint /api/props found with methods ['GET']\\n    \u2705 CORS origins configured: ['http://localhost:3000', 'http://localhost:5173']\\n  SYSTEM:\\n    \u2705 \u2705 Correlation system available with 6 active contexts\\n\\n\U0001f50c WEBSOCKET PATHS:\\n  \u2022 /ws/legacy/{client_id}\\n  \u2022 /ws/client\\n  \u2022 /ws/v2/connect\\n  \u2022 /ws/v2/odds\\n  \u2022 /ws/v2/arbitrage\\n  \u2022 /ws/v2/sport/{sport_name}\\n  \u2022 /ws/v2/portfolio\\n\\n\U0001f310 CORS ORIGINS:\\n  \u2022 http://localhost:3000\\n  \u2022 http://localhost:5173\\n\\n\u2699\ufe0f CONFIGURATION SUMMARY:\\n  Environment: development\\n  Debug Mode: True\\n  API Host: 0.0.0.0:8000\\n  Database: sqlite+aiosqlite:///a1betting.db\\n  Cache Enabled: True\\n  ML Enabled: True\\n  Modern ML: True\\n\\n\u26a0\ufe0f Warnings detected - Review configuration for optimal performance"\nArguments: ()\n{"timestamp": "2025-08-23T08:04:09.266792", "level": "WARNING", "logger": "a1betting", "message": "\U0001f680 BOOTSTRAP VALIDATION SUMMARY\\nCorrelation ID: f2966163-2b70-4a96-8963-162dfea7d96a\\nValidation Duration: 0.00s\\nTotal Validations: 14\\n\u2705 Passed: 11\\n\u26a0\ufe0f Warnings: 3\\n\u274c Errors: 0\\n\U0001f525 Critical: 0\\n\\n\U0001f4cb ENDPOINT VALIDATION DETAILS:\\n  HEALTH:\\n    \u26a0\ufe0f \u26a0\ufe0f Endpoint /api/health found but missing methods. Expected: ['GET', 'HEAD'], Found: ['GET']\\n    \u26a0\ufe0f \u26a0\ufe0f Endpoint /health found but missing methods. Expected: ['GET', 'HEAD'], Found: ['GET']\\n    \u2705 \u2705 Endpoint /api/v2/diagnostics/health found with methods ['GET']\\n  SPORTS:\\n    \u26a0\ufe0f \u26a0\ufe0f Endpoint /api/v2/sports/activate found but missing methods. Expected: ['POST', 'OPTIONS'], Found: ['POST']\\n  WEBSOCKET:\\n    \u2705 \u2705 Endpoint /ws/client found with methods ['WEBSOCKET']\\n    \u2705 \u2705 Endpoint /ws/legacy/{client_id} found with methods ['WEBSOCKET']\\n    \u2705 Found both new (/ws/client) and legacy WebSocket patterns\\n    \u2705 \u2705 WebSocket correlation ID support available\\n  METRICS:\\n    \u2705 \u2705 Endpoint /metrics found with methods ['GET']\\n    \u2705 \u2705 Endpoint /api/metrics/summary found with methods ['GET']\\n  AUTH:\\n    \u2705 \u2705 Endpoint /api/auth/login found with methods ['POST']\\n  API_V2:\\n    \u2705 \u2705 Endpoint /api/props found with methods ['GET']\\n    \u2705 CORS origins configured: ['http://localhost:3000', 'http://localhost:5173']\\n  SYSTEM:\\n    \u2705 \u2705 Correlation system available with 6 active contexts\\n\\n\U0001f50c WEBSOCKET PATHS:\\n  \u2022 /ws/legacy/{client_id}\\n  \u2022 /ws/client\\n  \u2022 /ws/v2/connect\\n  \u2022 /ws/v2/odds\\n  \u2022 /ws/v2/arbitrage\\n  \u2022 /ws/v2/sport/{sport_name}\\n  \u2022 /ws/v2/portfolio\\n\\n\U0001f310 CORS ORIGINS:\\n  \u2022 http://localhost:3000\\n  \u2022 http://localhost:5173\\n\\n\u2699\ufe0f CONFIGURATION SUMMARY:\\n  Environment: development\\n  Debug Mode: True\\n  API Host: 0.0.0.0:8000\\n  Database: sqlite+aiosqlite:///a1betting.db\\n  Cache Enabled: True\\n  ML Enabled: True\\n  Modern ML: True\\n\\n\u26a0\ufe0f Warnings detected - Review configuration for optimal performance", "module": "", "function": "", "line": 0, "taskName": "anyio.from_thread.BlockingPortal._call_func", "context": "LogContext(user_id=None, session_id=None, request_id=None, component=<LogComponent.SYSTEM: 'system'>, operation='bootstrap_validation_summary', duration_ms=None, additional_data={'correlation_id': 'f2966163-2b70-4a96-8963-162dfea7d96a', 'duration_seconds': 0.002217, 'validation_stats': {'total': 14, 'passed': 11, 'warnings': 3, 'errors': 0, 'critical': 0}})"}\n2025-08-23 08:04:09,268 - backend.core.app - WARNING - \u26a0\ufe0f 3 warnings found during bootstrap validation\n{"timestamp": "2025-08-23T08:04:09.268532", "level": "INFO", "logger": "a1betting.enhanced_websocket_routes", "message": "Skipping automatic enhanced_websocket_service.initialize() during test lifecycle", "module": "enhanced_logging", "function": "_log_with_context", "line": 227, "taskName": "anyio.from_thread.BlockingPortal._call_func"}\n{"timestamp": "2025-08-23T13:04:09.269305", "level": "INFO", "logger": "a1betting", "message": "Request started", "module": "structured_logging_middleware", "function": "log_request_start", "line": 109, "request_id": "071a12ca-4281-49b9-8428-affe83633024", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro", "event_type": "request_start", "method": "OPTIONS", "url": "http://testserver/api/health", "path": "/api/health", "query_params": {}, "client_ip": "testclient", "user_agent": "testclient", "content_type": null}\n2025-08-23 08:04:09,269 - backend.middleware.request_id_middleware - INFO - Request started: OPTIONS /api/health\n2025-08-23 08:04:09,269 - backend.middleware.request_id_middleware - INFO - Request completed: OPTIONS /api/health - 400\n2025-08-23 08:04:09,269 - backend.middleware.distributed_trace_middleware - INFO - Trace completed: f3a4b862-89d8-4c13-96e1-a69dfc446d4a\n{"timestamp": "2025-08-23T13:04:09.269908", "level": "INFO", "logger": "a1betting", "message": "Request completed", "module": "structured_logging_middleware", "function": "log_request_success", "line": 124, "request_id": "071a12ca-4281-49b9-8428-affe83633024", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro", "event_type": "request_success", "method": "OPTIONS", "url": "http://testserver/api/health", "path": "/api/health", "status_code": 400, "duration_ms": 0.62, "response_size": "22", "performance_category": "fast"}\n{"timestamp": "2025-08-23T08:04:09.271112", "level": "INFO", "logger": "a1betting.enhanced_websocket_routes", "message": "Skipping automatic enhanced_websocket_service.shutdown() during test lifecycle", "module": "enhanced_logging", "function": "_log_with_context", "line": 227, "taskName": "anyio.from_thread.BlockingPortal._call_func"}\n{"timestamp": "2025-08-23T08:04:09.271223", "level": "INFO", "logger": "a1betting.enhanced_websocket_routes", "message": "Skipping automatic enhanced_websocket_service.shutdown() during test lifecycle", "module": "enhanced_logging", "function": "_log_with_context", "line": 227, "taskName": "anyio.from_thread.BlockingPortal._call_func"}
------------------------------ Captured log call ------------------------------
INFO     backend.middleware.rate_limit:rate_limit.py:90 Rate limiting disabled\nINFO     backend.middleware.security_headers:security_headers.py:71 \u2705 Security headers middleware enabled: CSP=report-only, HSTS=True, strict_mode=False\nINFO     backend.middleware.legacy_middleware:legacy_middleware.py:68 Registered known legacy endpoints with forwarding paths\nINFO     backend.middleware.legacy_middleware:legacy_middleware.py:44 Legacy middleware initialized\nINFO     sqlalchemy.engine.Engine:base.py:2698 BEGIN (implicit)\nINFO     sqlalchemy.engine.Engine:base.py:1842 SELECT bookmakers.id, bookmakers.name, bookmakers.display_name, bookmakers.short_name, bookmakers.website_url, bookmakers.api_endpoint, bookmakers.country_code, bookmakers.status, bookmakers.is_trusted, bookmakers.reliability_score, bookmakers.api_key_required, bookmakers.rate_limit_per_minute, bookmakers.last_successful_fetch, bookmakers.consecutive_failures, bookmakers.priority_weight, bookmakers.include_in_consensus, bookmakers.created_at, bookmakers.updated_at \nFROM bookmakers \nWHERE bookmakers.name IN (?, ?, ?, ?, ?)\nINFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 0.2807s ago] ('draftkings', 'fanduel', 'betmgm', 'caesars', 'barstool')\nINFO     backend.core.app:app.py:395 \u2705 Bookmaker registry initialized on startup\nINFO     sqlalchemy.engine.Engine:base.py:2701 ROLLBACK\nINFO     backend.core.app:app.py:1179 \u2705 Enterprise model registry services initialized on startup\nWARNING  backend.core.app:app.py:1520 \u26a0\ufe0f 3 warnings found during bootstrap validation\nINFO     backend.middleware.request_id_middleware:request_id_middleware.py:67 Request started: OPTIONS /api/health\nINFO     backend.middleware.request_id_middleware:request_id_middleware.py:92 Request completed: OPTIONS /api/health - 400\nINFO     backend.middleware.distributed_trace_middleware:distributed_trace_middleware.py:224 Trace completed: f3a4b862-89d8-4c13-96e1-a69dfc446d4a
_ TestLeanModeDisablesMonitors.test_lean_mode_middleware_conditional_loading __
tests\stabilization\test_stabilization_matrix.py:291: in test_lean_mode_middleware_conditional_loading
    with patch('backend.middleware.prometheus_middleware.PrometheusMetricsMiddleware') as mock_prometheus, \
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
C:\Python313\Lib\unittest\mock.py:1481: in __enter__
    self.target = self.getter()
                  ^^^^^^^^^^^^^
C:\Python313\Lib\pkgutil.py:528: in resolve_name
    result = getattr(result, p)
             ^^^^^^^^^^^^^^^^^^
E   AttributeError: module 'backend.middleware' has no attribute 'prometheus_middleware'. Did you mean: 'get_metrics_middleware'?
___ TestStabilizationIntegration.test_stabilization_feature_matrix_complete ___
tests\stabilization\test_stabilization_matrix.py:381: in test_stabilization_feature_matrix_complete
    assert options_response.status_code in [200, 204]
E   assert 400 in [200, 204]
E    +  where 400 = <Response [400 Bad Request]>.status_code
---------------------------- Captured stderr setup ----------------------------
2025-08-23 08:04:09,446 - backend.core.app - INFO - \U0001f680 Creating A1Betting canonical app...\n2025-08-23 08:04:09,446 - backend.core.app - INFO - \u2705 Request ID correlation middleware added\n2025-08-23 08:04:09,446 - backend.core.app - INFO - \u2705 Distributed trace correlation middleware added\n2025-08-23 08:04:09,446 - backend.core.app - INFO - \u2705 Structured logging middleware added\n2025-08-23 08:04:09,446 - backend.core.app - INFO - \u2705 Prometheus metrics middleware added\n2025-08-23 08:04:09,446 - backend.core.app - INFO - \u2705 Payload guard middleware added: max_size=262144 bytes, enforce_json=True, enabled=True\n2025-08-23 08:04:09,446 - backend.middleware.rate_limit - INFO - Rate limiting disabled\n2025-08-23 08:04:09,446 - backend.core.app - INFO - \u2705 Rate limiting middleware added: 100/min, burst=200, enabled=False\n2025-08-23 08:04:09,447 - backend.core.app - INFO - \u2705 Security headers middleware added: [HSTS, CSP(report-only), COOP, COEP], x_frame_options=DENY\n2025-08-23 08:04:09,447 - backend.core.app - INFO - \u2705 Legacy endpoint middleware added for usage telemetry and deprecation controls\n2025-08-23 08:04:09,447 - backend.exceptions.handlers - INFO - \u2705 PayloadRejectionError handler registered\n2025-08-23 08:04:09,447 - backend.exceptions.handlers - INFO - \u2705 All exception handlers registered with structured error taxonomy\n2025-08-23 08:04:09,447 - backend.core.app - INFO - \u2705 Centralized exception handlers registered\n2025-08-23 08:04:09,448 - backend.core.app - INFO - \u2705 PR11 Enhanced WebSocket client route included (/ws/client)\n2025-08-23 08:04:09,452 - backend.core.app - INFO - \u2705 Auth routes also exposed at root (/auth/*) for compatibility\n2025-08-23 08:04:09,452 - backend.core.app - INFO - \u2705 Auth and users routes included (auth with /api prefix)\n2025-08-23 08:04:09,453 - backend.core.app - INFO - \u2705 Diagnostics routes included (/api/v2/diagnostics/health, /api/v2/diagnostics/system)\n2025-08-23 08:04:09,454 - backend.core.app - INFO - \u2705 Meta cache routes included (/api/v2/meta/cache-stats, /api/v2/meta/cache-health)\n2025-08-23 08:04:09,454 - backend.core.app - INFO - \u2705 Legacy meta routes included (/api/v2/meta/legacy-usage, /api/v2/meta/migration-readiness)\n2025-08-23 08:04:09,457 - backend.core.app - ERROR - \u274c Failed to register CSP report routes: Invalid args for response field! Hint: check that <class 'logging.Logger'> is a valid Pydantic field type. If you are using a return type annotation that is not a valid Pydantic field (e.g. Union[Response, dict, None]) you can disable generating the response model from the type annotation with the path operation decorator parameter response_model=None. Read more: https://fastapi.tiangolo.com/tutorial/response-model/\n2025-08-23 08:04:09,457 - backend.core.app - INFO - \u2705 Trace test routes included (/api/trace/* endpoints)\n2025-08-23 08:04:09,459 - backend.core.app - INFO - \u2705 Model inference routes included (/api/v2/models/* endpoints)\n2025-08-23 08:04:09,460 - backend.core.app - INFO - \u2705 Observability events routes included (/api/v2/observability/* endpoints)\n2025-08-23 08:04:09,461 - backend.core.app - INFO - \u2705 Admin control routes included (/api/v2/models/shadow/* and /api/v2/models/admin/* endpoints)\n2025-08-23 08:04:09,465 - backend.core.app - INFO - \u2705 Enhanced WebSocket routes included (/ws/v2/* endpoints)\n2025-08-23 08:04:09,466 - backend.core.app - INFO - \u2705 WebSocket logging routes included (/api/websocket/* endpoints)\n2025-08-23 08:04:09,467 - backend.core.app - INFO - \u2705 Version routes included (/api/version/* endpoints)\n2025-08-23 08:04:09,467 - backend.core.app - INFO - \u2705 WebVitals pipeline routes included (/api/metrics/v1/* endpoints)\n2025-08-23 08:04:09,471 - backend.core.app - INFO - \u2705 Enhanced ML routes included (/api/enhanced-ml/* endpoints)\n2025-08-23 08:04:09,472 - backend.core.app - INFO - \u2705 Fallback enhanced-ml compatibility router mounted at /api/enhanced-ml\n2025-08-23 08:04:09,476 - backend.core.app - INFO - \u2705 Consolidated PrizePicks routes included (/api/v2/prizepicks/* endpoints)\n2025-08-23 08:04:09,480 - backend.core.app - INFO - \u2705 Consolidated ML routes included (/api/v2/ml/* endpoints)\n2025-08-23 08:04:09,482 - backend.core.app - ERROR - \u274c Failed to register consolidated Admin routes: parameter without a default follows parameter with a default (consolidated_admin.py, line 165)\n2025-08-23 08:04:09,485 - backend.core.app - INFO - \u2705 Odds & Line Movement routes included (/v1/odds/* endpoints)\n2025-08-23 08:04:09,486 - backend.core.app - INFO - \u2705 Advanced-Kelly compatibility router mounted at /api/advanced-kelly\n2025-08-23 08:04:09,489 - backend.core.app - ERROR - \u274c Failed to register Risk Management & Personalization routes: 'NoneType' object has no attribute 'alert_evaluation_interval_seconds'\n2025-08-23 08:04:09,491 - backend.core.app - INFO - \u2705 Dependencies Health routes included (/api/dependencies/* endpoints)\n2025-08-23 08:04:09,493 - backend.core.app - INFO - \u2705 Provider Resilience routes included (/api/provider-resilience/* endpoints)\n2025-08-23 08:04:09,494 - backend.core.app - INFO - \u2705 System capabilities routes included (/api/system/* endpoints)\n2025-08-23 08:04:09,495 - backend.core.app - INFO - \u2705 Real-time market streaming routes included (/streaming/* endpoints)\n2025-08-23 08:04:09,496 - backend.core.app - INFO - \u2705 Security HEAD endpoints included (/api/* HEAD endpoints)\n2025-08-23 08:04:09,498 - backend.core.app - INFO - \u2705 ML Model Registry routes included (/api/models/* endpoints)\n2025-08-23 08:04:09,499 - backend.core.app - INFO - \u2705 Data ingestion routes included (/api/v1/ingestion/* endpoints)\n2025-08-23 08:04:09,502 - backend.core.app - INFO - \u2705 Enterprise model registry routes included (/api/models/enterprise/* endpoints)\n2025-08-23 08:04:09,506 - backend.core.app - INFO - \u2705 Alert engine routes included (/api/alert-engine/* endpoints)\n2025-08-23 08:04:09,510 - backend.core.app - INFO - \u2705 PropFinder routes included (/api/propfinder/* endpoints)\n2025-08-23 08:04:09,511 - backend.core.app - WARNING - \u26a0\ufe0f Could not import multiple_sportsbook_routes: cannot import name 'RateLimiter' from 'backend.middleware.rate_limit' (C:\\Users\\bcmad\\Downloads\\A1Betting7-13.2\\backend\\middleware\\rate_limit.py)\n2025-08-23 08:04:09,514 - backend.core.app - INFO - \u2705 Sportsbook compatibility router mounted at /api/sportsbook\n2025-08-23 08:04:09,514 - backend.core.app - INFO - \U0001f50d Bootstrap validation scheduled on startup\n2025-08-23 08:04:09,514 - backend.core.app - INFO - \U0001f3e5 Health endpoints normalized: /api/health, /health, /api/v2/health -> identical envelope format\n2025-08-23 08:04:09,514 - backend.core.app - INFO - \u2705 A1Betting canonical app created successfully
----------------------------- Captured log setup ------------------------------
INFO     backend.core.app:app.py:65 \U0001f680 Creating A1Betting canonical app...\nINFO     backend.core.app:app.py:104 \u2705 Request ID correlation middleware added\nINFO     backend.core.app:app.py:114 \u2705 Distributed trace correlation middleware added\nINFO     backend.core.app:app.py:126 \u2705 Structured logging middleware added\nINFO     backend.core.app:app.py:146 \u2705 Prometheus metrics middleware added\nINFO     backend.core.app:app.py:167 \u2705 Payload guard middleware added: max_size=262144 bytes, enforce_json=True, enabled=True\nINFO     backend.middleware.rate_limit:rate_limit.py:90 Rate limiting disabled\nINFO     backend.core.app:app.py:202 \u2705 Rate limiting middleware added: 100/min, burst=200, enabled=False\nINFO     backend.core.app:app.py:244 \u2705 Security headers middleware added: [HSTS, CSP(report-only), COOP, COEP], x_frame_options=DENY\nINFO     backend.core.app:app.py:259 \u2705 Legacy endpoint middleware added for usage telemetry and deprecation controls\nINFO     backend.exceptions.handlers:handlers.py:235 \u2705 PayloadRejectionError handler registered\nINFO     backend.exceptions.handlers:handlers.py:250 \u2705 All exception handlers registered with structured error taxonomy\nINFO     backend.core.app:app.py:269 \u2705 Centralized exception handlers registered\nINFO     backend.core.app:app.py:332 \u2705 PR11 Enhanced WebSocket client route included (/ws/client)\nINFO     backend.core.app:app.py:702 \u2705 Auth routes also exposed at root (/auth/*) for compatibility\nINFO     backend.core.app:app.py:706 \u2705 Auth and users routes included (auth with /api prefix)\nINFO     backend.core.app:app.py:714 \u2705 Diagnostics routes included (/api/v2/diagnostics/health, /api/v2/diagnostics/system)\nINFO     backend.core.app:app.py:763 \u2705 Meta cache routes included (/api/v2/meta/cache-stats, /api/v2/meta/cache-health)\nINFO     backend.core.app:app.py:773 \u2705 Legacy meta routes included (/api/v2/meta/legacy-usage, /api/v2/meta/migration-readiness)\nERROR    backend.core.app:app.py:788 \u274c Failed to register CSP report routes: Invalid args for response field! Hint: check that <class 'logging.Logger'> is a valid Pydantic field type. If you are using a return type annotation that is not a valid Pydantic field (e.g. Union[Response, dict, None]) you can disable generating the response model from the type annotation with the path operation decorator parameter response_model=None. Read more: https://fastapi.tiangolo.com/tutorial/response-model/\nINFO     backend.core.app:app.py:794 \u2705 Trace test routes included (/api/trace/* endpoints)\nINFO     backend.core.app:app.py:804 \u2705 Model inference routes included (/api/v2/models/* endpoints)\nINFO     backend.core.app:app.py:814 \u2705 Observability events routes included (/api/v2/observability/* endpoints)\nINFO     backend.core.app:app.py:824 \u2705 Admin control routes included (/api/v2/models/shadow/* and /api/v2/models/admin/* endpoints)\nINFO     backend.core.app:app.py:834 \u2705 Enhanced WebSocket routes included (/ws/v2/* endpoints)\nINFO     backend.core.app:app.py:844 \u2705 WebSocket logging routes included (/api/websocket/* endpoints)\nINFO     backend.core.app:app.py:854 \u2705 Version routes included (/api/version/* endpoints)\nINFO     backend.core.app:app.py:864 \u2705 WebVitals pipeline routes included (/api/metrics/v1/* endpoints)\nINFO     backend.core.app:app.py:874 \u2705 Enhanced ML routes included (/api/enhanced-ml/* endpoints)\nINFO     backend.core.app:app.py:986 \u2705 Fallback enhanced-ml compatibility router mounted at /api/enhanced-ml\nINFO     backend.core.app:app.py:995 \u2705 Consolidated PrizePicks routes included (/api/v2/prizepicks/* endpoints)\nINFO     backend.core.app:app.py:1005 \u2705 Consolidated ML routes included (/api/v2/ml/* endpoints)\nERROR    backend.core.app:app.py:1019 \u274c Failed to register consolidated Admin routes: parameter without a default follows parameter with a default (consolidated_admin.py, line 165)\nINFO     backend.core.app:app.py:1025 \u2705 Odds & Line Movement routes included (/v1/odds/* endpoints)\nINFO     backend.core.app:app.py:1066 \u2705 Advanced-Kelly compatibility router mounted at /api/advanced-kelly\nERROR    backend.core.app:app.py:1078 \u274c Failed to register Risk Management & Personalization routes: 'NoneType' object has no attribute 'alert_evaluation_interval_seconds'\nINFO     backend.core.app:app.py:1084 \u2705 Dependencies Health routes included (/api/dependencies/* endpoints)\nINFO     backend.core.app:app.py:1094 \u2705 Provider Resilience routes included (/api/provider-resilience/* endpoints)\nINFO     backend.core.app:app.py:1104 \u2705 System capabilities routes included (/api/system/* endpoints)\nINFO     backend.core.app:app.py:1114 \u2705 Real-time market streaming routes included (/streaming/* endpoints)\nINFO     backend.core.app:app.py:1124 \u2705 Security HEAD endpoints included (/api/* HEAD endpoints)\nINFO     backend.core.app:app.py:1134 \u2705 ML Model Registry routes included (/api/models/* endpoints)\nINFO     backend.core.app:app.py:1144 \u2705 Data ingestion routes included (/api/v1/ingestion/* endpoints)\nINFO     backend.core.app:app.py:1154 \u2705 Enterprise model registry routes included (/api/models/enterprise/* endpoints)\nINFO     backend.core.app:app.py:1199 \u2705 Alert engine routes included (/api/alert-engine/* endpoints)\nINFO     backend.core.app:app.py:1209 \u2705 PropFinder routes included (/api/propfinder/* endpoints)\nWARNING  backend.core.app:app.py:1221 \u26a0\ufe0f Could not import multiple_sportsbook_routes: cannot import name 'RateLimiter' from 'backend.middleware.rate_limit' (C:\\Users\\bcmad\\Downloads\\A1Betting7-13.2\\backend\\middleware\\rate_limit.py)\nINFO     backend.core.app:app.py:1495 \u2705 Sportsbook compatibility router mounted at /api/sportsbook\nINFO     backend.core.app:app.py:1527 \U0001f50d Bootstrap validation scheduled on startup\nINFO     backend.core.app:app.py:1535 \U0001f3e5 Health endpoints normalized: /api/health, /health, /api/v2/health -> identical envelope format\nINFO     backend.core.app:app.py:1536 \u2705 A1Betting canonical app created successfully
---------------------------- Captured stdout call -----------------------------
2025-08-23 08:04:09,518 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-08-23 08:04:09,518 INFO sqlalchemy.engine.Engine SELECT bookmakers.id, bookmakers.name, bookmakers.display_name, bookmakers.short_name, bookmakers.website_url, bookmakers.api_endpoint, bookmakers.country_code, bookmakers.status, bookmakers.is_trusted, bookmakers.reliability_score, bookmakers.api_key_required, bookmakers.rate_limit_per_minute, bookmakers.last_successful_fetch, bookmakers.consecutive_failures, bookmakers.priority_weight, bookmakers.include_in_consensus, bookmakers.created_at, bookmakers.updated_at 
FROM bookmakers 
WHERE bookmakers.name IN (?, ?, ?, ?, ?)
2025-08-23 08:04:09,518 INFO sqlalchemy.engine.Engine [cached since 0.5358s ago] ('draftkings', 'fanduel', 'betmgm', 'caesars', 'barstool')
2025-08-23 08:04:09,519 INFO sqlalchemy.engine.Engine ROLLBACK
---------------------------- Captured stderr call -----------------------------
2025-08-23 08:04:09,517 - backend.middleware.rate_limit - INFO - Rate limiting disabled\n2025-08-23 08:04:09,517 - backend.middleware.security_headers - INFO - \u2705 Security headers middleware enabled: CSP=report-only, HSTS=True, strict_mode=False\n2025-08-23 08:04:09,517 - backend.middleware.legacy_middleware - INFO - Registered known legacy endpoints with forwarding paths\n2025-08-23 08:04:09,517 - backend.middleware.legacy_middleware - INFO - Legacy middleware initialized\n2025-08-23 08:04:09,518 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)\n2025-08-23 08:04:09,518 - sqlalchemy.engine.Engine - INFO - SELECT bookmakers.id, bookmakers.name, bookmakers.display_name, bookmakers.short_name, bookmakers.website_url, bookmakers.api_endpoint, bookmakers.country_code, bookmakers.status, bookmakers.is_trusted, bookmakers.reliability_score, bookmakers.api_key_required, bookmakers.rate_limit_per_minute, bookmakers.last_successful_fetch, bookmakers.consecutive_failures, bookmakers.priority_weight, bookmakers.include_in_consensus, bookmakers.created_at, bookmakers.updated_at \nFROM bookmakers \nWHERE bookmakers.name IN (?, ?, ?, ?, ?)\n2025-08-23 08:04:09,518 - sqlalchemy.engine.Engine - INFO - [cached since 0.5358s ago] ('draftkings', 'fanduel', 'betmgm', 'caesars', 'barstool')\n2025-08-23 08:04:09,519 - backend.core.app - INFO - \u2705 Bookmaker registry initialized on startup\n2025-08-23 08:04:09,519 - sqlalchemy.engine.Engine - INFO - ROLLBACK\n{"timestamp": "2025-08-23T08:04:09.519520", "level": "INFO", "logger": "a1betting.enhanced_websocket_routes", "message": "Skipping automatic enhanced_websocket_service.initialize() during test lifecycle", "module": "enhanced_logging", "function": "_log_with_context", "line": 227, "taskName": "anyio.from_thread.BlockingPortal._call_func"}\n2025-08-23 08:04:09,519 - backend.core.app - INFO - \u2705 Enterprise model registry services initialized on startup\n--- Logging error ---\nTraceback (most recent call last):\n  File "C:\\Python313\\Lib\\logging\\__init__.py", line 1154, in emit\n    stream.write(msg + self.terminator)\n    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^\n  File "C:\\Python313\\Lib\\encodings\\cp1252.py", line 19, in encode\n    return codecs.charmap_encode(input,self.errors,encoding_table)[0]\n           ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nUnicodeEncodeError: 'charmap' codec can't encode character '\\U0001f50d' in position 96: character maps to <undefined>\nCall stack:\n  File "C:\\Python313\\Lib\\threading.py", line 1014, in _bootstrap\n    self._bootstrap_inner()\n  File "C:\\Python313\\Lib\\threading.py", line 1043, in _bootstrap_inner\n    self.run()\n  File "C:\\Python313\\Lib\\threading.py", line 994, in run\n    self._target(*self._args, **self._kwargs)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\anyio\\from_thread.py", line 481, in run_blocking_portal\n    _eventloop.run(\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\anyio\\_core\\_eventloop.py", line 74, in run\n    return async_backend.run(func, args, {}, backend_options)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\anyio\\_backends\\_asyncio.py", line 2310, in run\n    return runner.run(wrapper())\n  File "C:\\Python313\\Lib\\asyncio\\runners.py", line 118, in run\n    return self._loop.run_until_complete(task)\n  File "C:\\Python313\\Lib\\asyncio\\base_events.py", line 712, in run_until_complete\n    self.run_forever()\n  File "C:\\Python313\\Lib\\asyncio\\base_events.py", line 683, in run_forever\n    self._run_once()\n  File "C:\\Python313\\Lib\\asyncio\\base_events.py", line 2042, in _run_once\n    handle._run()\n  File "C:\\Python313\\Lib\\asyncio\\events.py", line 89, in _run\n    self._context.run(self._callback, *self._args)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\anyio\\from_thread.py", line 221, in _call_func\n    retval = await retval_or_awaitable\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\starlette\\testclient.py", line 710, in lifespan\n    await self.app(scope, self.stream_receive.receive, self.stream_send.send)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\applications.py", line 1054, in __call__\n    await super().__call__(scope, receive, send)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\starlette\\applications.py", line 113, in __call__\n    await self.middleware_stack(scope, receive, send)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\starlette\\middleware\\errors.py", line 151, in __call__\n    await self.app(scope, receive, send)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\starlette\\middleware\\base.py", line 103, in __call__\n    await self.app(scope, receive, send)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\starlette\\middleware\\base.py", line 103, in __call__\n    await self.app(scope, receive, send)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\starlette\\middleware\\base.py", line 103, in __call__\n    await self.app(scope, receive, send)\n  File "C:\\Users\\bcmad\\Downloads\\A1Betting7-13.2\\backend\\middleware\\payload_guard.py", line 151, in __call__\n    await self.app(scope, receive, send)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\starlette\\middleware\\base.py", line 103, in __call__\n    await self.app(scope, receive, send)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\starlette\\middleware\\base.py", line 103, in __call__\n    await self.app(scope, receive, send)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\starlette\\middleware\\base.py", line 103, in __call__\n    await self.app(scope, receive, send)\n  [Previous line repeated 1 more time]\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\starlette\\middleware\\cors.py", line 77, in __call__\n    await self.app(scope, receive, send)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\starlette\\middleware\\exceptions.py", line 49, in __call__\n    await self.app(scope, receive, send)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\starlette\\routing.py", line 716, in __call__\n    await self.middleware_stack(scope, receive, send)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\starlette\\routing.py", line 725, in app\n    await self.lifespan(scope, receive, send)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\starlette\\routing.py", line 694, in lifespan\n    async with self.lifespan_context(app) as maybe_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\starlette\\routing.py", line 571, in __aenter__\n    await self._router.startup()\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\starlette\\routing.py", line 671, in startup\n    await handler()\n  File "C:\\Users\\bcmad\\Downloads\\A1Betting7-13.2\\backend\\core\\app.py", line 1511, in _run_bootstrap_validation\n    summary = await validate_app_bootstrap(_app)\n  File "C:\\Users\\bcmad\\Downloads\\A1Betting7-13.2\\backend\\services\\bootstrap_validator.py", line 724, in validate_app_bootstrap\n    return await validator.validate_bootstrap()\n  File "C:\\Users\\bcmad\\Downloads\\A1Betting7-13.2\\backend\\services\\bootstrap_validator.py", line 501, in validate_bootstrap\n    unified_logger.info(f"\U0001f50d Starting bootstrap validation [correlation_id: {self.correlation_id}]", context)\n  File "C:\\Users\\bcmad\\Downloads\\A1Betting7-13.2\\backend\\services\\unified_logging.py", line 229, in info\n    self.logger.handle(record)\nMessage: '\U0001f50d Starting bootstrap validation [correlation_id: c356a80a-114e-4ea2-9493-e087acd66f70]'\nArguments: ()\n{"timestamp": "2025-08-23T08:04:09.519731", "level": "INFO", "logger": "a1betting", "message": "\U0001f50d Starting bootstrap validation [correlation_id: c356a80a-114e-4ea2-9493-e087acd66f70]", "module": "", "function": "", "line": 0, "taskName": "anyio.from_thread.BlockingPortal._call_func", "context": "LogContext(user_id=None, session_id=None, request_id=None, component=<LogComponent.SYSTEM: 'system'>, operation='bootstrap_validation', duration_ms=None, additional_data={'correlation_id': 'c356a80a-114e-4ea2-9493-e087acd66f70'})"}\n--- Logging error ---\nTraceback (most recent call last):\n  File "C:\\Python313\\Lib\\logging\\__init__.py", line 1154, in emit\n    stream.write(msg + self.terminator)\n    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^\n  File "C:\\Python313\\Lib\\encodings\\cp1252.py", line 19, in encode\n    return codecs.charmap_encode(input,self.errors,encoding_table)[0]\n           ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nUnicodeEncodeError: 'charmap' codec can't encode character '\\U0001f680' in position 99: character maps to <undefined>\nCall stack:\n  File "C:\\Python313\\Lib\\threading.py", line 1014, in _bootstrap\n    self._bootstrap_inner()\n  File "C:\\Python313\\Lib\\threading.py", line 1043, in _bootstrap_inner\n    self.run()\n  File "C:\\Python313\\Lib\\threading.py", line 994, in run\n    self._target(*self._args, **self._kwargs)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\anyio\\from_thread.py", line 481, in run_blocking_portal\n    _eventloop.run(\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\anyio\\_core\\_eventloop.py", line 74, in run\n    return async_backend.run(func, args, {}, backend_options)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\anyio\\_backends\\_asyncio.py", line 2310, in run\n    return runner.run(wrapper())\n  File "C:\\Python313\\Lib\\asyncio\\runners.py", line 118, in run\n    return self._loop.run_until_complete(task)\n  File "C:\\Python313\\Lib\\asyncio\\base_events.py", line 712, in run_until_complete\n    self.run_forever()\n  File "C:\\Python313\\Lib\\asyncio\\base_events.py", line 683, in run_forever\n    self._run_once()\n  File "C:\\Python313\\Lib\\asyncio\\base_events.py", line 2042, in _run_once\n    handle._run()\n  File "C:\\Python313\\Lib\\asyncio\\events.py", line 89, in _run\n    self._context.run(self._callback, *self._args)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\anyio\\from_thread.py", line 221, in _call_func\n    retval = await retval_or_awaitable\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\starlette\\testclient.py", line 710, in lifespan\n    await self.app(scope, self.stream_receive.receive, self.stream_send.send)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\applications.py", line 1054, in __call__\n    await super().__call__(scope, receive, send)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\starlette\\applications.py", line 113, in __call__\n    await self.middleware_stack(scope, receive, send)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\starlette\\middleware\\errors.py", line 151, in __call__\n    await self.app(scope, receive, send)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\starlette\\middleware\\base.py", line 103, in __call__\n    await self.app(scope, receive, send)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\starlette\\middleware\\base.py", line 103, in __call__\n    await self.app(scope, receive, send)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\starlette\\middleware\\base.py", line 103, in __call__\n    await self.app(scope, receive, send)\n  File "C:\\Users\\bcmad\\Downloads\\A1Betting7-13.2\\backend\\middleware\\payload_guard.py", line 151, in __call__\n    await self.app(scope, receive, send)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\starlette\\middleware\\base.py", line 103, in __call__\n    await self.app(scope, receive, send)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\starlette\\middleware\\base.py", line 103, in __call__\n    await self.app(scope, receive, send)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\starlette\\middleware\\base.py", line 103, in __call__\n    await self.app(scope, receive, send)\n  [Previous line repeated 1 more time]\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\starlette\\middleware\\cors.py", line 77, in __call__\n    await self.app(scope, receive, send)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\starlette\\middleware\\exceptions.py", line 49, in __call__\n    await self.app(scope, receive, send)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\starlette\\routing.py", line 716, in __call__\n    await self.middleware_stack(scope, receive, send)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\starlette\\routing.py", line 725, in app\n    await self.lifespan(scope, receive, send)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\starlette\\routing.py", line 694, in lifespan\n    async with self.lifespan_context(app) as maybe_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Python313\\Lib\\contextlib.py", line 214, in __aenter__\n    return await anext(self.gen)\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\fastapi\\routing.py", line 134, in merged_lifespan\n    async with original_context(app) as maybe_original_state:\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\starlette\\routing.py", line 571, in __aenter__\n    await self._router.startup()\n  File "C:\\Users\\bcmad\\AppData\\Roaming\\Python\\Python313\\site-packages\\starlette\\routing.py", line 671, in startup\n    await handler()\n  File "C:\\Users\\bcmad\\Downloads\\A1Betting7-13.2\\backend\\core\\app.py", line 1511, in _run_bootstrap_validation\n    summary = await validate_app_bootstrap(_app)\n  File "C:\\Users\\bcmad\\Downloads\\A1Betting7-13.2\\backend\\services\\bootstrap_validator.py", line 724, in validate_app_bootstrap\n    return await validator.validate_bootstrap()\n  File "C:\\Users\\bcmad\\Downloads\\A1Betting7-13.2\\backend\\services\\bootstrap_validator.py", line 597, in validate_bootstrap\n    self._log_bootstrap_summary(summary)\n  File "C:\\Users\\bcmad\\Downloads\\A1Betting7-13.2\\backend\\services\\bootstrap_validator.py", line 713, in _log_bootstrap_summary\n    unified_logger.warning(summary_message, context)\n  File "C:\\Users\\bcmad\\Downloads\\A1Betting7-13.2\\backend\\services\\unified_logging.py", line 234, in warning\n    self.logger.handle(record)\nMessage: "\U0001f680 BOOTSTRAP VALIDATION SUMMARY\\nCorrelation ID: c356a80a-114e-4ea2-9493-e087acd66f70\\nValidation Duration: 0.00s\\nTotal Validations: 14\\n\u2705 Passed: 11\\n\u26a0\ufe0f Warnings: 3\\n\u274c Errors: 0\\n\U0001f525 Critical: 0\\n\\n\U0001f4cb ENDPOINT VALIDATION DETAILS:\\n  HEALTH:\\n    \u26a0\ufe0f \u26a0\ufe0f Endpoint /api/health found but missing methods. Expected: ['GET', 'HEAD'], Found: ['GET']\\n    \u26a0\ufe0f \u26a0\ufe0f Endpoint /health found but missing methods. Expected: ['GET', 'HEAD'], Found: ['GET']\\n    \u2705 \u2705 Endpoint /api/v2/diagnostics/health found with methods ['GET']\\n  SPORTS:\\n    \u26a0\ufe0f \u26a0\ufe0f Endpoint /api/v2/sports/activate found but missing methods. Expected: ['POST', 'OPTIONS'], Found: ['POST']\\n  WEBSOCKET:\\n    \u2705 \u2705 Endpoint /ws/client found with methods ['WEBSOCKET']\\n    \u2705 \u2705 Endpoint /ws/legacy/{client_id} found with methods ['WEBSOCKET']\\n    \u2705 Found both new (/ws/client) and legacy WebSocket patterns\\n    \u2705 \u2705 WebSocket correlation ID support available\\n  METRICS:\\n    \u2705 \u2705 Endpoint /metrics found with methods ['GET']\\n    \u2705 \u2705 Endpoint /api/metrics/summary found with methods ['GET']\\n  AUTH:\\n    \u2705 \u2705 Endpoint /api/auth/login found with methods ['POST']\\n  API_V2:\\n    \u2705 \u2705 Endpoint /api/props found with methods ['GET']\\n    \u2705 CORS origins configured: ['http://localhost:3000', 'http://localhost:5173']\\n  SYSTEM:\\n    \u2705 \u2705 Correlation system available with 8 active contexts\\n\\n\U0001f50c WEBSOCKET PATHS:\\n  \u2022 /ws/legacy/{client_id}\\n  \u2022 /ws/client\\n  \u2022 /ws/v2/connect\\n  \u2022 /ws/v2/odds\\n  \u2022 /ws/v2/arbitrage\\n  \u2022 /ws/v2/sport/{sport_name}\\n  \u2022 /ws/v2/portfolio\\n\\n\U0001f310 CORS ORIGINS:\\n  \u2022 http://localhost:3000\\n  \u2022 http://localhost:5173\\n\\n\u2699\ufe0f CONFIGURATION SUMMARY:\\n  Environment: development\\n  Debug Mode: True\\n  API Host: 0.0.0.0:8000\\n  Database: sqlite+aiosqlite:///a1betting.db\\n  Cache Enabled: True\\n  ML Enabled: True\\n  Modern ML: True\\n\\n\u26a0\ufe0f Warnings detected - Review configuration for optimal performance"\nArguments: ()\n{"timestamp": "2025-08-23T08:04:09.521869", "level": "WARNING", "logger": "a1betting", "message": "\U0001f680 BOOTSTRAP VALIDATION SUMMARY\\nCorrelation ID: c356a80a-114e-4ea2-9493-e087acd66f70\\nValidation Duration: 0.00s\\nTotal Validations: 14\\n\u2705 Passed: 11\\n\u26a0\ufe0f Warnings: 3\\n\u274c Errors: 0\\n\U0001f525 Critical: 0\\n\\n\U0001f4cb ENDPOINT VALIDATION DETAILS:\\n  HEALTH:\\n    \u26a0\ufe0f \u26a0\ufe0f Endpoint /api/health found but missing methods. Expected: ['GET', 'HEAD'], Found: ['GET']\\n    \u26a0\ufe0f \u26a0\ufe0f Endpoint /health found but missing methods. Expected: ['GET', 'HEAD'], Found: ['GET']\\n    \u2705 \u2705 Endpoint /api/v2/diagnostics/health found with methods ['GET']\\n  SPORTS:\\n    \u26a0\ufe0f \u26a0\ufe0f Endpoint /api/v2/sports/activate found but missing methods. Expected: ['POST', 'OPTIONS'], Found: ['POST']\\n  WEBSOCKET:\\n    \u2705 \u2705 Endpoint /ws/client found with methods ['WEBSOCKET']\\n    \u2705 \u2705 Endpoint /ws/legacy/{client_id} found with methods ['WEBSOCKET']\\n    \u2705 Found both new (/ws/client) and legacy WebSocket patterns\\n    \u2705 \u2705 WebSocket correlation ID support available\\n  METRICS:\\n    \u2705 \u2705 Endpoint /metrics found with methods ['GET']\\n    \u2705 \u2705 Endpoint /api/metrics/summary found with methods ['GET']\\n  AUTH:\\n    \u2705 \u2705 Endpoint /api/auth/login found with methods ['POST']\\n  API_V2:\\n    \u2705 \u2705 Endpoint /api/props found with methods ['GET']\\n    \u2705 CORS origins configured: ['http://localhost:3000', 'http://localhost:5173']\\n  SYSTEM:\\n    \u2705 \u2705 Correlation system available with 8 active contexts\\n\\n\U0001f50c WEBSOCKET PATHS:\\n  \u2022 /ws/legacy/{client_id}\\n  \u2022 /ws/client\\n  \u2022 /ws/v2/connect\\n  \u2022 /ws/v2/odds\\n  \u2022 /ws/v2/arbitrage\\n  \u2022 /ws/v2/sport/{sport_name}\\n  \u2022 /ws/v2/portfolio\\n\\n\U0001f310 CORS ORIGINS:\\n  \u2022 http://localhost:3000\\n  \u2022 http://localhost:5173\\n\\n\u2699\ufe0f CONFIGURATION SUMMARY:\\n  Environment: development\\n  Debug Mode: True\\n  API Host: 0.0.0.0:8000\\n  Database: sqlite+aiosqlite:///a1betting.db\\n  Cache Enabled: True\\n  ML Enabled: True\\n  Modern ML: True\\n\\n\u26a0\ufe0f Warnings detected - Review configuration for optimal performance", "module": "", "function": "", "line": 0, "taskName": "anyio.from_thread.BlockingPortal._call_func", "context": "LogContext(user_id=None, session_id=None, request_id=None, component=<LogComponent.SYSTEM: 'system'>, operation='bootstrap_validation_summary', duration_ms=None, additional_data={'correlation_id': 'c356a80a-114e-4ea2-9493-e087acd66f70', 'duration_seconds': 0.00213, 'validation_stats': {'total': 14, 'passed': 11, 'warnings': 3, 'errors': 0, 'critical': 0}})"}\n2025-08-23 08:04:09,524 - backend.core.app - WARNING - \u26a0\ufe0f 3 warnings found during bootstrap validation\n{"timestamp": "2025-08-23T08:04:09.524384", "level": "INFO", "logger": "a1betting.enhanced_websocket_routes", "message": "Skipping automatic enhanced_websocket_service.initialize() during test lifecycle", "module": "enhanced_logging", "function": "_log_with_context", "line": 227, "taskName": "anyio.from_thread.BlockingPortal._call_func"}\n2025-08-23 08:04:09,524 - backend.middleware.legacy_middleware - INFO - Legacy endpoint accessed: GET /health (count: 8)\n{"timestamp": "2025-08-23T13:04:09.525224", "level": "INFO", "logger": "a1betting", "message": "Request started", "module": "structured_logging_middleware", "function": "log_request_start", "line": 109, "request_id": "9fa5f8d5-1521-49bf-b378-415ac66bab45", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro", "event_type": "request_start", "method": "GET", "url": "http://testserver/health", "path": "/health", "query_params": {}, "client_ip": "testclient", "user_agent": "testclient", "content_type": null}\n2025-08-23 08:04:09,525 - backend.middleware.request_id_middleware - INFO - Request started: GET /health\n2025-08-23 08:04:09,525 - backend.middleware.request_id_middleware - INFO - Request completed: GET /health - 200\n2025-08-23 08:04:09,525 - backend.middleware.distributed_trace_middleware - INFO - Trace completed: 9dc5cfa7-1abb-4bd4-8472-f3872ca18b03\n{"timestamp": "2025-08-23T13:04:09.525794", "level": "INFO", "logger": "a1betting", "message": "Request completed", "module": "structured_logging_middleware", "function": "log_request_success", "line": 124, "request_id": "9fa5f8d5-1521-49bf-b378-415ac66bab45", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro", "event_type": "request_success", "method": "GET", "url": "http://testserver/health", "path": "/health", "status_code": 200, "duration_ms": 0.59, "response_size": "45", "performance_category": "fast"}\n{"timestamp": "2025-08-23T13:04:09.526840", "level": "INFO", "logger": "a1betting", "message": "Request started", "module": "structured_logging_middleware", "function": "log_request_start", "line": 109, "request_id": "9f2a6d84-8afb-4697-a3df-2c49fa1f0ec0", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro", "event_type": "request_start", "method": "OPTIONS", "url": "http://testserver/api/health", "path": "/api/health", "query_params": {}, "client_ip": "testclient", "user_agent": "testclient", "content_type": null}\n2025-08-23 08:04:09,527 - backend.middleware.request_id_middleware - INFO - Request started: OPTIONS /api/health\n2025-08-23 08:04:09,527 - backend.middleware.request_id_middleware - INFO - Request completed: OPTIONS /api/health - 400\n2025-08-23 08:04:09,527 - backend.middleware.distributed_trace_middleware - INFO - Trace completed: 92dd07e0-4724-4094-91bc-49c9c10bfbd3\n{"timestamp": "2025-08-23T13:04:09.527300", "level": "INFO", "logger": "a1betting", "message": "Request completed", "module": "structured_logging_middleware", "function": "log_request_success", "line": 124, "request_id": "9f2a6d84-8afb-4697-a3df-2c49fa1f0ec0", "taskName": "starlette.middleware.base.BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.coro", "event_type": "request_success", "method": "OPTIONS", "url": "http://testserver/api/health", "path": "/api/health", "status_code": 400, "duration_ms": 0.47, "response_size": "22", "performance_category": "fast"}\n{"timestamp": "2025-08-23T08:04:09.528082", "level": "INFO", "logger": "a1betting.enhanced_websocket_routes", "message": "Skipping automatic enhanced_websocket_service.shutdown() during test lifecycle", "module": "enhanced_logging", "function": "_log_with_context", "line": 227, "taskName": "anyio.from_thread.BlockingPortal._call_func"}\n{"timestamp": "2025-08-23T08:04:09.528169", "level": "INFO", "logger": "a1betting.enhanced_websocket_routes", "message": "Skipping automatic enhanced_websocket_service.shutdown() during test lifecycle", "module": "enhanced_logging", "function": "_log_with_context", "line": 227, "taskName": "anyio.from_thread.BlockingPortal._call_func"}
------------------------------ Captured log call ------------------------------
INFO     backend.middleware.rate_limit:rate_limit.py:90 Rate limiting disabled\nINFO     backend.middleware.security_headers:security_headers.py:71 \u2705 Security headers middleware enabled: CSP=report-only, HSTS=True, strict_mode=False\nINFO     backend.middleware.legacy_middleware:legacy_middleware.py:68 Registered known legacy endpoints with forwarding paths\nINFO     backend.middleware.legacy_middleware:legacy_middleware.py:44 Legacy middleware initialized\nINFO     sqlalchemy.engine.Engine:base.py:2698 BEGIN (implicit)\nINFO     sqlalchemy.engine.Engine:base.py:1842 SELECT bookmakers.id, bookmakers.name, bookmakers.display_name, bookmakers.short_name, bookmakers.website_url, bookmakers.api_endpoint, bookmakers.country_code, bookmakers.status, bookmakers.is_trusted, bookmakers.reliability_score, bookmakers.api_key_required, bookmakers.rate_limit_per_minute, bookmakers.last_successful_fetch, bookmakers.consecutive_failures, bookmakers.priority_weight, bookmakers.include_in_consensus, bookmakers.created_at, bookmakers.updated_at \nFROM bookmakers \nWHERE bookmakers.name IN (?, ?, ?, ?, ?)\nINFO     sqlalchemy.engine.Engine:base.py:1842 [cached since 0.5358s ago] ('draftkings', 'fanduel', 'betmgm', 'caesars', 'barstool')\nINFO     backend.core.app:app.py:395 \u2705 Bookmaker registry initialized on startup\nINFO     sqlalchemy.engine.Engine:base.py:2701 ROLLBACK\nINFO     backend.core.app:app.py:1179 \u2705 Enterprise model registry services initialized on startup\nWARNING  backend.core.app:app.py:1520 \u26a0\ufe0f 3 warnings found during bootstrap validation\nINFO     backend.middleware.legacy_middleware:legacy_middleware.py:177 Legacy endpoint accessed: GET /health (count: 8)\nINFO     backend.middleware.request_id_middleware:request_id_middleware.py:67 Request started: GET /health\nINFO     backend.middleware.request_id_middleware:request_id_middleware.py:92 Request completed: GET /health - 200\nINFO     backend.middleware.distributed_trace_middleware:distributed_trace_middleware.py:224 Trace completed: 9dc5cfa7-1abb-4bd4-8472-f3872ca18b03\nINFO     backend.middleware.request_id_middleware:request_id_middleware.py:67 Request started: OPTIONS /api/health\nINFO     backend.middleware.request_id_middleware:request_id_middleware.py:92 Request completed: OPTIONS /api/health - 400\nINFO     backend.middleware.distributed_trace_middleware:distributed_trace_middleware.py:224 Trace completed: 92dd07e0-4724-4094-91bc-49c9c10bfbd3
______ TestIntentionalDriftInjection.test_inject_eigenvalue_degradation _______
tests\statistical\test_drift_injection.py:136: in test_inject_eigenvalue_degradation
    assert not result.passed or not result.additional_metrics['eigenvalue_valid'], \
E   AssertionError: Intentional eigenvalue degradation should be detected
E   assert (not np.True_ or not np.True_)
E    +  where np.True_ = StatisticalTestResult(test_name='correlation_psd_validation_intentional_eigenvalue_degradation', timestamp=datetime.da....5270585799977017, 1.438073303733267, 1.2401241290194684, 1.0386489317023346, 0.7560950555472261]}, error_message=None).passed
---------------------------- Captured stdout call -----------------------------
\n\U0001f50d Testing eigenvalue degradation injection...
---------------------------- Captured stderr call -----------------------------
2025-08-23 08:04:09,539 - statistical.test_monte_carlo_deterministic - INFO - Correlation matrix validation passed for intentional_eigenvalue_degradation: min_eig=5.27e-01, cond=2.73e+00
------------------------------ Captured log call ------------------------------
INFO     statistical.test_monte_carlo_deterministic:test_monte_carlo_deterministic.py:371 Correlation matrix validation passed for intentional_eigenvalue_degradation: min_eig=5.27e-01, cond=2.73e+00
______ TestAlertSystemValidation.test_consecutive_failure_alert_trigger _______
tests\statistical\test_drift_injection.py:304: in test_consecutive_failure_alert_trigger
    assert len(consecutive_alerts) > 0, "Should trigger consecutive failure alert"
E   AssertionError: Should trigger consecutive failure alert
E   assert 0 > 0
E    +  where 0 = len([])
---------------------------- Captured stdout call -----------------------------
\n\U0001f50d Testing consecutive failure alert mechanism...
---------------------------- Captured stderr call -----------------------------
2025-08-23 08:04:09,556 - statistical.test_monte_carlo_deterministic - WARNING - KS test FAILED for consecutive_failure_0: D=0.112501, p=0.000000, critical_divergence=True
2025-08-23 08:04:09,557 - statistical.test_monte_carlo_deterministic - WARNING - KS test FAILED for consecutive_failure_1: D=0.102254, p=0.000000, critical_divergence=True
2025-08-23 08:04:09,558 - statistical.test_monte_carlo_deterministic - WARNING - KS test FAILED for consecutive_failure_2: D=0.103640, p=0.000000, critical_divergence=True
------------------------------ Captured log call ------------------------------
WARNING  statistical.test_monte_carlo_deterministic:test_monte_carlo_deterministic.py:250 KS test FAILED for consecutive_failure_0: D=0.112501, p=0.000000, critical_divergence=True
WARNING  statistical.test_monte_carlo_deterministic:test_monte_carlo_deterministic.py:250 KS test FAILED for consecutive_failure_1: D=0.102254, p=0.000000, critical_divergence=True
WARNING  statistical.test_monte_carlo_deterministic:test_monte_carlo_deterministic.py:250 KS test FAILED for consecutive_failure_2: D=0.103640, p=0.000000, critical_divergence=True
______ TestAlertSystemValidation.test_critical_divergence_alert_trigger _______
tests\statistical\test_drift_injection.py:337: in test_critical_divergence_alert_trigger
    assert len(divergence_alerts) > 0, "Should trigger critical divergence alert"
E   AssertionError: Should trigger critical divergence alert
E   assert 0 > 0
E    +  where 0 = len([])
---------------------------- Captured stdout call -----------------------------
\n\U0001f50d Testing critical divergence alert mechanism...
---------------------------- Captured stderr call -----------------------------
2025-08-23 08:04:09,565 - statistical.test_monte_carlo_deterministic - WARNING - KS test FAILED for critical_divergence_alert_test: D=0.794855, p=0.000000, critical_divergence=True
------------------------------ Captured log call ------------------------------
WARNING  statistical.test_monte_carlo_deterministic:test_monte_carlo_deterministic.py:250 KS test FAILED for critical_divergence_alert_test: D=0.794855, p=0.000000, critical_divergence=True
___________ TestAlertSystemValidation.test_regression_alert_trigger ___________
tests\statistical\test_drift_injection.py:370: in test_regression_alert_trigger
    assert len(regression_alerts) > 0, "Should trigger regression alert"
E   AssertionError: Should trigger regression alert
E   assert 0 > 0
E    +  where 0 = len([])
---------------------------- Captured stdout call -----------------------------
\n\U0001f50d Testing regression alert mechanism...
---------------------------- Captured stderr call -----------------------------
2025-08-23 08:04:09,571 - statistical.test_monte_carlo_deterministic - INFO - Established baseline CI width for regression_alert_test: 0.808383 at 95.0% confidence
2025-08-23 08:04:09,572 - statistical.test_monte_carlo_deterministic - ERROR - CI width REGRESSION detected for regression_alert_test: relative_change=0.1750 > 0.05
------------------------------ Captured log call ------------------------------
INFO     statistical.test_monte_carlo_deterministic:test_monte_carlo_deterministic.py:526 Established baseline CI width for regression_alert_test: 0.808383 at 95.0% confidence
ERROR    statistical.test_monte_carlo_deterministic:test_monte_carlo_deterministic.py:607 CI width REGRESSION detected for regression_alert_test: relative_change=0.1750 > 0.05
__________________ test_comprehensive_drift_injection_suite ___________________
tests\statistical\test_drift_injection.py:436: in test_comprehensive_drift_injection_suite
    assert not summary['success'], "Suite should fail when drift is detected"
E   AssertionError: Suite should fail when drift is detected
E   assert not True
---------------------------- Captured stdout call -----------------------------
\n\U0001f680 Running comprehensive drift injection validation...
---------------------------- Captured stderr call -----------------------------
2025-08-23 08:04:09,580 - statistical.test_monte_carlo_deterministic - WARNING - KS test FAILED for comprehensive_ks_drift: D=0.362688, p=0.000000, critical_divergence=True
2025-08-23 08:04:09,580 - statistical.test_monte_carlo_deterministic - WARNING - Correlation drift DETECTED: normalized_drift=0.227562 > 0.1
2025-08-23 08:04:09,580 - statistical.test_monte_carlo_deterministic - INFO - Established baseline CI width for comprehensive_ci: 0.197735 at 95.0% confidence
2025-08-23 08:04:09,581 - statistical.test_monte_carlo_deterministic - ERROR - CI width REGRESSION detected for comprehensive_ci: relative_change=3.8061 > 0.05
------------------------------ Captured log call ------------------------------
WARNING  statistical.test_monte_carlo_deterministic:test_monte_carlo_deterministic.py:250 KS test FAILED for comprehensive_ks_drift: D=0.362688, p=0.000000, critical_divergence=True
WARNING  statistical.test_monte_carlo_deterministic:test_monte_carlo_deterministic.py:451 Correlation drift DETECTED: normalized_drift=0.227562 > 0.1
INFO     statistical.test_monte_carlo_deterministic:test_monte_carlo_deterministic.py:526 Established baseline CI width for comprehensive_ci: 0.197735 at 95.0% confidence
ERROR    statistical.test_monte_carlo_deterministic:test_monte_carlo_deterministic.py:607 CI width REGRESSION detected for comprehensive_ci: relative_change=3.8061 > 0.05
__________________ test_statistical_verification_ci_critical __________________
tests\statistical\test_statistical_verification_suite.py:488: in test_statistical_verification_ci_critical
    pytest.fail(
E   Failed: Statistical verification FAILED - Build should fail!
E   Failed tests: 2/9
E   Pass rate: 77.78%
E   Alert triggers: ['critical_divergence_betting_probability_distribution']
E   Details saved to: ci_statistical_results.json
---------------------------- Captured stderr call -----------------------------
2025-08-23 08:04:09,605 - statistical.test_monte_carlo_deterministic - INFO - Starting comprehensive statistical verification suite
2025-08-23 08:04:09,605 - statistical.test_monte_carlo_deterministic - INFO - Initialized deterministic seed pipeline with seed: 42
2025-08-23 08:04:09,605 - statistical.test_monte_carlo_deterministic - INFO - Running Monte Carlo deterministic tests...
2025-08-23 08:04:09,607 - statistical.test_monte_carlo_deterministic - INFO - KS test passed for normal_distribution_mc_vs_analytic: D=0.003674, p=0.999207
2025-08-23 08:04:09,608 - statistical.test_monte_carlo_deterministic - INFO - KS test passed for exponential_distribution_mc_vs_analytic: D=0.013848, p=0.042789
2025-08-23 08:04:09,610 - statistical.test_monte_carlo_deterministic - INFO - KS test passed for beta_distribution_mc_vs_analytic: D=0.009229, p=0.359674
2025-08-23 08:04:09,610 - statistical.test_monte_carlo_deterministic - INFO - Completed 3 Monte Carlo deterministic tests
2025-08-23 08:04:09,610 - statistical.test_monte_carlo_deterministic - INFO - Running KS comparison tests...
2025-08-23 08:04:09,623 - statistical.test_monte_carlo_deterministic - WARNING - KS test FAILED for betting_probability_distribution: D=0.116346, p=0.000000, critical_divergence=True
2025-08-23 08:04:09,624 - statistical.test_monte_carlo_deterministic - INFO - Completed KS comparison tests
2025-08-23 08:04:09,624 - statistical.test_monte_carlo_deterministic - INFO - Running correlation matrix tests...
2025-08-23 08:04:09,624 - statistical.test_monte_carlo_deterministic - WARNING - Correlation matrix validation FAILED for valid_test_matrix: min_eig=7.43e-17, cond=2.82e+15
2025-08-23 08:04:09,624 - statistical.test_monte_carlo_deterministic - INFO - Correlation drift check passed: normalized_drift=0.005629
2025-08-23 08:04:09,624 - statistical.test_monte_carlo_deterministic - INFO - Correlation matrix validation passed for drift_test_matrix: min_eig=5.11e-03, cond=5.51e+02
2025-08-23 08:04:09,624 - statistical.test_monte_carlo_deterministic - INFO - Completed correlation matrix tests
2025-08-23 08:04:09,624 - statistical.test_monte_carlo_deterministic - INFO - Running CI width regression tests...
2025-08-23 08:04:09,625 - statistical.test_monte_carlo_deterministic - INFO - Established baseline CI width for betting_probabilities: 0.734950 at 95.0% confidence
2025-08-23 08:04:09,626 - statistical.test_monte_carlo_deterministic - INFO - CI width check passed for betting_probabilities: relative_change=0.0042
2025-08-23 08:04:09,627 - statistical.test_monte_carlo_deterministic - INFO - Established baseline CI width for dispersed_probabilities: 0.948836 at 95.0% confidence
2025-08-23 08:04:09,627 - statistical.test_monte_carlo_deterministic - INFO - CI width check passed for dispersed_probabilities: relative_change=0.0000
2025-08-23 08:04:09,627 - statistical.test_monte_carlo_deterministic - INFO - Completed CI width regression tests
2025-08-23 08:04:09,627 - statistical.test_monte_carlo_deterministic - INFO - Statistical verification suite completed in 0.02s
2025-08-23 08:04:09,628 - statistical.test_monte_carlo_deterministic - INFO - Statistical test results saved to: ci_statistical_results.json
------------------------------ Captured log call ------------------------------
INFO     statistical.test_monte_carlo_deterministic:test_monte_carlo_deterministic.py:666 Starting comprehensive statistical verification suite
INFO     statistical.test_monte_carlo_deterministic:test_monte_carlo_deterministic.py:132 Initialized deterministic seed pipeline with seed: 42
INFO     statistical.test_monte_carlo_deterministic:test_monte_carlo_deterministic.py:703 Running Monte Carlo deterministic tests...
INFO     statistical.test_monte_carlo_deterministic:test_monte_carlo_deterministic.py:256 KS test passed for normal_distribution_mc_vs_analytic: D=0.003674, p=0.999207
INFO     statistical.test_monte_carlo_deterministic:test_monte_carlo_deterministic.py:256 KS test passed for exponential_distribution_mc_vs_analytic: D=0.013848, p=0.042789
INFO     statistical.test_monte_carlo_deterministic:test_monte_carlo_deterministic.py:256 KS test passed for beta_distribution_mc_vs_analytic: D=0.009229, p=0.359674
INFO     statistical.test_monte_carlo_deterministic:test_monte_carlo_deterministic.py:738 Completed 3 Monte Carlo deterministic tests
INFO     statistical.test_monte_carlo_deterministic:test_monte_carlo_deterministic.py:743 Running KS comparison tests...
WARNING  statistical.test_monte_carlo_deterministic:test_monte_carlo_deterministic.py:250 KS test FAILED for betting_probability_distribution: D=0.116346, p=0.000000, critical_divergence=True
INFO     statistical.test_monte_carlo_deterministic:test_monte_carlo_deterministic.py:762 Completed KS comparison tests
INFO     statistical.test_monte_carlo_deterministic:test_monte_carlo_deterministic.py:767 Running correlation matrix tests...
WARNING  statistical.test_monte_carlo_deterministic:test_monte_carlo_deterministic.py:366 Correlation matrix validation FAILED for valid_test_matrix: min_eig=7.43e-17, cond=2.82e+15
INFO     statistical.test_monte_carlo_deterministic:test_monte_carlo_deterministic.py:456 Correlation drift check passed: normalized_drift=0.005629
INFO     statistical.test_monte_carlo_deterministic:test_monte_carlo_deterministic.py:371 Correlation matrix validation passed for drift_test_matrix: min_eig=5.11e-03, cond=5.51e+02
INFO     statistical.test_monte_carlo_deterministic:test_monte_carlo_deterministic.py:795 Completed correlation matrix tests
INFO     statistical.test_monte_carlo_deterministic:test_monte_carlo_deterministic.py:800 Running CI width regression tests...
INFO     statistical.test_monte_carlo_deterministic:test_monte_carlo_deterministic.py:526 Established baseline CI width for betting_probabilities: 0.734950 at 95.0% confidence
INFO     statistical.test_monte_carlo_deterministic:test_monte_carlo_deterministic.py:612 CI width check passed for betting_probabilities: relative_change=0.0042
INFO     statistical.test_monte_carlo_deterministic:test_monte_carlo_deterministic.py:526 Established baseline CI width for dispersed_probabilities: 0.948836 at 95.0% confidence
INFO     statistical.test_monte_carlo_deterministic:test_monte_carlo_deterministic.py:612 CI width check passed for dispersed_probabilities: relative_change=0.0000
INFO     statistical.test_monte_carlo_deterministic:test_monte_carlo_deterministic.py:822 Completed CI width regression tests
INFO     statistical.test_monte_carlo_deterministic:test_monte_carlo_deterministic.py:683 Statistical verification suite completed in 0.02s
INFO     statistical.test_monte_carlo_deterministic:test_monte_carlo_deterministic.py:943 Statistical test results saved to: ci_statistical_results.json
_______________________ test_unified_metrics_collector ________________________
tests\test_health_endpoint.py:97: in test_unified_metrics_collector
    collector.record_request_latency(50.0)
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'UnifiedMetricsCollector' object has no attribute 'record_request_latency'
___________________ test_health_endpoint_response_structure ___________________
tests\test_health_endpoint.py:211: in test_health_endpoint_response_structure
    assert response.headers.get("Cache-Control") == "no-store"
E   AssertionError: assert None == 'no-store'
E    +  where None = get('Cache-Control')
E    +    where get = Headers({'content-length': '658', 'content-type': 'application/json'}).get
E    +      where Headers({'content-length': '658', 'content-type': 'application/json'}) = <Response [200 OK]>.headers
___________________ test_health_endpoint_status_validation ____________________
tests\test_health_endpoint.py:273: in test_health_endpoint_status_validation
    for service in data["services"]:
                   ^^^^^^^^^^^^^^^^
E   KeyError: 'services'
______________ TestEnhancedCaching.test_cache_get_set_operations ______________
tests\test_phase2_performance_optimization.py:47: in test_cache_get_set_operations
    with patch.object(cache_service_instance, "get_redis") as mock_get_redis:
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
C:\Python313\Lib\unittest\mock.py:1497: in __enter__
    original, local = self.get_original()
                      ^^^^^^^^^^^^^^^^^^^
C:\Python313\Lib\unittest\mock.py:1467: in get_original
    raise AttributeError(
E   AttributeError: <backend.services.enhanced_caching_service.CacheService object at 0x00000171C95E5450> does not have the attribute 'get_redis'
________________ TestEnhancedCaching.test_cache_serialization _________________
tests\test_phase2_performance_optimization.py:72: in test_cache_serialization
    with patch.object(cache_service_instance, "get_redis") as mock_get_redis:
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
C:\Python313\Lib\unittest\mock.py:1497: in __enter__
    original, local = self.get_original()
                      ^^^^^^^^^^^^^^^^^^^
C:\Python313\Lib\unittest\mock.py:1467: in get_original
    raise AttributeError(
E   AttributeError: <backend.services.enhanced_caching_service.CacheService object at 0x00000171C95A0640> does not have the attribute 'get_redis'
_______________ TestEnhancedCaching.test_cache_pattern_deletion _______________
tests\test_phase2_performance_optimization.py:90: in test_cache_pattern_deletion
    with patch.object(cache_service_instance, "get_redis") as mock_get_redis:
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
C:\Python313\Lib\unittest\mock.py:1497: in __enter__
    original, local = self.get_original()
                      ^^^^^^^^^^^^^^^^^^^
C:\Python313\Lib\unittest\mock.py:1467: in get_original
    raise AttributeError(
E   AttributeError: <backend.services.enhanced_caching_service.CacheService object at 0x00000171C95A09D0> does not have the attribute 'get_redis'
_________________ TestEnhancedCaching.test_cache_health_check _________________
tests\test_phase2_performance_optimization.py:107: in test_cache_health_check
    with patch.object(cache_service_instance, "get_redis") as mock_get_redis:
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
C:\Python313\Lib\unittest\mock.py:1497: in __enter__
    original, local = self.get_original()
                      ^^^^^^^^^^^^^^^^^^^
C:\Python313\Lib\unittest\mock.py:1467: in get_original
    raise AttributeError(
E   AttributeError: <backend.services.enhanced_caching_service.CacheService object at 0x00000171C955DD90> does not have the attribute 'get_redis'
_______________ TestEnhancedCaching.test_cache_stats_collection _______________
tests\test_phase2_performance_optimization.py:125: in test_cache_stats_collection
    with patch.object(cache_service_instance, "get_redis") as mock_get_redis:
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
C:\Python313\Lib\unittest\mock.py:1497: in __enter__
    original, local = self.get_original()
                      ^^^^^^^^^^^^^^^^^^^
C:\Python313\Lib\unittest\mock.py:1467: in get_original
    raise AttributeError(
E   AttributeError: <backend.services.enhanced_caching_service.CacheService object at 0x00000171C6C3AAD0> does not have the attribute 'get_redis'
_____________ TestEnhancedCaching.test_cached_function_decorator ______________
tests\test_phase2_performance_optimization.py:152: in test_cached_function_decorator
    @cache_service_instance.cached_function("test:{args[0]}", ttl_seconds=300)
     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'CacheService' object has no attribute 'cached_function'
_ TestProductionIntegrationWithCache.test_production_app_with_cache_endpoints _
tests\test_phase2_performance_optimization.py:187: in test_production_app_with_cache_endpoints
    app = create_production_app()
          ^^^^^^^^^^^^^^^^^^^^^^^
backend\production_integration.py:1030: in create_production_app
    app = production_app.create_app()
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^
backend\production_integration.py:221: in create_app
    self._add_routes()
backend\production_integration.py:328: in _add_routes
    self.app.include_router(nba_routes.router)
                            ^^^^^^^^^^^^^^^^^
E   AttributeError: module 'backend.routes.nba_routes' has no attribute 'router'
---------------------------- Captured stderr call -----------------------------
{"timestamp": "2025-08-23T08:04:13.463541", "level": "INFO", "logger": "a1betting.production_app", "message": "Configuring CORS with origins: ['http://localhost:8173', 'http://localhost:3000', 'http://localhost:5173', 'http://127.0.0.1:8173', '*']", "module": "enhanced_logging", "function": "_log_with_context", "line": 227, "taskName": "Task-2922"}
{"timestamp": "2025-08-23T08:04:13.463781", "level": "INFO", "logger": "a1betting.production_app", "message": "MLB extras module imported successfully, router has 6 routes", "module": "enhanced_logging", "function": "_log_with_context", "line": 227, "taskName": "Task-2922"}
{"timestamp": "2025-08-23T08:04:13.464164", "level": "INFO", "logger": "a1betting.production_app", "message": "MLB extras routes included successfully", "module": "enhanced_logging", "function": "_log_with_context", "line": 227, "taskName": "Task-2922"}
2025-08-23 08:04:13,465 - backend.routes - WARNING - Failed to import backend.routes.nba_routes, creating test placeholder
____ TestProductionIntegrationWithCache.test_cache_endpoints_functionality ____
tests\test_phase2_performance_optimization.py:201: in test_cache_endpoints_functionality
    ) as mock_init, patch(
C:\Python313\Lib\unittest\mock.py:1497: in __enter__
    original, local = self.get_original()
                      ^^^^^^^^^^^^^^^^^^^
C:\Python313\Lib\unittest\mock.py:1467: in get_original
    raise AttributeError(
E   AttributeError: <backend.services.enhanced_caching_service.CacheService object at 0x00000171C0773A10> does not have the attribute 'health_check'
_____ TestProductionIntegrationWithCache.test_metrics_include_cache_data ______
tests\test_phase2_performance_optimization.py:233: in test_metrics_include_cache_data
    ) as mock_init, patch(
C:\Python313\Lib\unittest\mock.py:1497: in __enter__
    original, local = self.get_original()
                      ^^^^^^^^^^^^^^^^^^^
C:\Python313\Lib\unittest\mock.py:1467: in get_original
    raise AttributeError(
E   AttributeError: <backend.services.enhanced_caching_service.CacheService object at 0x00000171C0773A10> does not have the attribute 'get_stats'
________ TestPerformanceOptimizations.test_cache_convenience_functions ________
tests\test_phase2_performance_optimization.py:269: in test_cache_convenience_functions
    from backend.services.enhanced_caching_service import (
E   ImportError: cannot import name 'cache_api_response' from 'backend.services.enhanced_caching_service' (C:\Users\bcmad\Downloads\A1Betting7-13.2\backend\services\enhanced_caching_service.py)
___________ TestPerformanceOptimizations.test_cache_error_handling ____________
tests\test_phase2_performance_optimization.py:288: in test_cache_error_handling
    result = await service.get("test_key", "default")
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   TypeError: CacheService.get() takes 2 positional arguments but 3 were given
___________ TestPerformanceOptimizations.test_cache_service_cleanup ___________
tests\test_phase2_performance_optimization.py:301: in test_cache_service_cleanup
    service._warming_tasks["test_key"] = mock_task
    ^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'CacheService' object has no attribute '_warming_tasks'
__________ TestFullPhase2Integration.test_complete_performance_stack __________
tests\test_phase2_performance_optimization.py:336: in test_complete_performance_stack
    app = create_production_app()
          ^^^^^^^^^^^^^^^^^^^^^^^
backend\production_integration.py:1030: in create_production_app
    app = production_app.create_app()
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^
backend\production_integration.py:221: in create_app
    self._add_routes()
backend\production_integration.py:328: in _add_routes
    self.app.include_router(nba_routes.router)
                            ^^^^^^^^^^^^^^^^^
E   AttributeError: module 'backend.routes.nba_routes' has no attribute 'router'
---------------------------- Captured stderr call -----------------------------
{"timestamp": "2025-08-23T08:04:13.574486", "level": "INFO", "logger": "a1betting.production_app", "message": "Configuring CORS with origins: ['http://localhost:8173', 'http://localhost:3000', 'http://localhost:5173', 'http://127.0.0.1:8173', '*']", "module": "enhanced_logging", "function": "_log_with_context", "line": 227, "taskName": "Task-2934"}
{"timestamp": "2025-08-23T08:04:13.574681", "level": "INFO", "logger": "a1betting.production_app", "message": "MLB extras module imported successfully, router has 6 routes", "module": "enhanced_logging", "function": "_log_with_context", "line": 227, "taskName": "Task-2934"}
{"timestamp": "2025-08-23T08:04:13.574957", "level": "INFO", "logger": "a1betting.production_app", "message": "MLB extras routes included successfully", "module": "enhanced_logging", "function": "_log_with_context", "line": 227, "taskName": "Task-2934"}
______ TestReliabilityEndpoint.test_reliability_endpoint_error_handling _______
tests\test_reliability_endpoint.py:107: in test_reliability_endpoint_error_handling
    assert response.status_code == 500
E   assert 200 == 500
E    +  where 200 = <Response [200 OK]>.status_code
---------------------------- Captured stdout call -----------------------------
2025-08-23 08:04:20,101 - diagnostics - INFO - Reliability report requested
---------------------------- Captured stderr call -----------------------------
2025-08-23 08:04:20,101 - reliability_orchestrator - DEBUG - Returning cached reliability report
2025-08-23 08:04:20,101 - diagnostics - INFO - Reliability report requested
------------------------------ Captured log call ------------------------------
DEBUG    reliability_orchestrator::0 Returning cached reliability report
INFO     diagnostics::0 Reliability report requested
_____ TestReliabilityOrchestrator.test_orchestrator_with_high_cpu_anomaly _____
tests\test_reliability_endpoint.py:189: in test_orchestrator_with_high_cpu_anomaly
    assert "HIGH_CPU" in anomaly_codes
E   AssertionError: assert 'HIGH_CPU' in []
---------------------------- Captured stdout call -----------------------------
2025-08-23 08:04:22,260 - reliability_orchestrator - INFO - Generating comprehensive reliability report
2025-08-23 08:04:24,402 - reliability_orchestrator - INFO - Reliability report generated
2025-08-23 08:04:24,403 - reliability_orchestrator - INFO - Reliability report generated in 2141.81ms
---------------------------- Captured stderr call -----------------------------
2025-08-23 08:04:22,260 - reliability_orchestrator - INFO - Generating comprehensive reliability report
2025-08-23 08:04:22,261 - streaming_stats_provider - DEBUG - Returning cached streaming stats
2025-08-23 08:04:22,261 - optimization_stats_provider - DEBUG - Returning cached optimization stats
2025-08-23 08:04:22,261 - rationale_stats_provider - DEBUG - Returning cached rationale stats
2025-08-23 08:04:24,402 - reliability_orchestrator - INFO - Reliability report generated
2025-08-23 08:04:24,403 - reliability_orchestrator - INFO - Reliability report generated in 2141.81ms
------------------------------ Captured log call ------------------------------
INFO     reliability_orchestrator::0 Generating comprehensive reliability report
DEBUG    streaming_stats_provider::0 Returning cached streaming stats
DEBUG    optimization_stats_provider::0 Returning cached optimization stats
DEBUG    rationale_stats_provider::0 Returning cached rationale stats
INFO     reliability_orchestrator::0 Reliability report generated
INFO     reliability_orchestrator::0 Reliability report generated in 2141.81ms
_ TestReliabilityOrchestrator.test_orchestrator_with_high_p95_latency_anomaly _
tests\test_reliability_endpoint.py:275: in test_orchestrator_with_high_p95_latency_anomaly
    assert "HIGH_P95_LATENCY" in anomaly_codes
E   AssertionError: assert 'HIGH_P95_LATENCY' in []
---------------------------- Captured stderr call -----------------------------
2025-08-23 08:04:24,415 - reliability_orchestrator - DEBUG - Returning cached reliability report
------------------------------ Captured log call ------------------------------
DEBUG    reliability_orchestrator::0 Returning cached reliability report
__________________ TestProviderEndpoints.test_list_providers __________________
tests\test_streaming_integration.py:113: in test_list_providers
    assert response.status_code == 200
E   assert 500 == 200
E    +  where 500 = <Response [500 Internal Server Error]>.status_code
______________ TestProviderEndpoints.test_get_specific_provider _______________
tests\test_streaming_integration.py:127: in test_get_specific_provider
    assert response.status_code == 200
E   assert 500 == 200
E    +  where 500 = <Response [500 Internal Server Error]>.status_code
_____________ TestProviderEndpoints.test_get_nonexistent_provider _____________
tests\test_streaming_integration.py:141: in test_get_nonexistent_provider
    assert response.status_code == 404
E   assert 500 == 404
E    +  where 500 = <Response [500 Internal Server Error]>.status_code
_____________ TestStreamingControlEndpoints.test_start_streaming ______________
tests\test_streaming_integration.py:155: in test_start_streaming
    assert response.status_code == 200
E   assert 500 == 200
E    +  where 500 = <Response [500 Internal Server Error]>.status_code
______________ TestStreamingControlEndpoints.test_stop_streaming ______________
tests\test_streaming_integration.py:170: in test_stop_streaming
    assert response.status_code == 200
E   assert 500 == 200
E    +  where 500 = <Response [500 Internal Server Error]>.status_code
______________ TestStreamingControlEndpoints.test_invalid_action ______________
tests\test_streaming_integration.py:185: in test_invalid_action
    assert response.status_code == 400
E   assert 500 == 400
E    +  where 500 = <Response [500 Internal Server Error]>.status_code
______________ TestSystemStatusEndpoints.test_get_system_status _______________
tests\test_streaming_integration.py:198: in test_get_system_status
    assert response.status_code == 200
E   assert 500 == 200
E    +  where 500 = <Response [500 Internal Server Error]>.status_code
_______________ TestRationaleEndpoints.test_generate_rationale ________________
tests\test_streaming_integration.py:257: in test_generate_rationale
    assert response.status_code == 200
E   assert 500 == 200
E    +  where 500 = <Response [500 Internal Server Error]>.status_code
_________ TestRationaleEndpoints.test_generate_rationale_invalid_type _________
tests\test_streaming_integration.py:273: in test_generate_rationale_invalid_type
    assert response.status_code == 400
E   assert 500 == 400
E    +  where 500 = <Response [500 Internal Server Error]>.status_code
___________ TestStreamingWorkflow.test_provider_lifecycle_workflow ____________
tests\test_streaming_integration.py:290: in test_provider_lifecycle_workflow
    assert list_response.status_code == 200
E   assert 500 == 200
E    +  where 500 = <Response [500 Internal Server Error]>.status_code
____________ TestStreamingWorkflow.test_streaming_control_workflow ____________
tests\test_streaming_integration.py:322: in test_streaming_control_workflow
    assert start_response.status_code == 200
E   assert 500 == 200
E    +  where 500 = <Response [500 Internal Server Error]>.status_code
__________ TestStreamingWorkflow.test_rationale_generation_workflow ___________
tests\test_streaming_integration.py:354: in test_rationale_generation_workflow
    assert response.status_code == 200
E   assert 500 == 200
E    +  where 500 = <Response [500 Internal Server Error]>.status_code
______________ TestAPIPerformance.test_provider_list_performance ______________
tests\test_streaming_performance.py:125: in test_provider_list_performance
    assert all(r.status_code == 200 for r in responses)
E   assert False
E    +  where False = all(<generator object TestAPIPerformance.test_provider_list_performance.<locals>.<genexpr> at 0x00000171C966C790>)
_____________ TestAPIPerformance.test_concurrent_status_requests ______________
tests\test_streaming_performance.py:153: in test_concurrent_status_requests
    assert all(r.status_code == 200 for r in responses)
E   assert False
E    +  where False = all(<generator object TestAPIPerformance.test_concurrent_status_requests.<locals>.<genexpr> at 0x00000171C7619F20>)
________ TestStreamingControlPerformance.test_rapid_start_stop_cycles _________
tests\test_streaming_performance.py:189: in test_rapid_start_stop_cycles
    assert start_response.status_code == 200
E   assert 500 == 200
E    +  where 500 = <Response [500 Internal Server Error]>.status_code
______________ TestAsyncPerformance.test_rationale_service_load _______________
tests\test_streaming_performance.py:304: in test_rationale_service_load
    with patch.object(service, '_call_llm_service', new_callable=AsyncMock) as mock_llm:
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
C:\Python313\Lib\unittest\mock.py:1497: in __enter__
    original, local = self.get_original()
                      ^^^^^^^^^^^^^^^^^^^
C:\Python313\Lib\unittest\mock.py:1467: in get_original
    raise AttributeError(
E   AttributeError: <backend.services.rationale.portfolio_rationale_service.PortfolioRationaleService object at 0x00000171C9D99D10> does not have the attribute '_call_llm_service'
_______________ TestStressScenarios.test_large_response_payload _______________
tests\test_streaming_performance.py:397: in test_large_response_payload
    assert response.status_code == 200
E   assert 500 == 200
E    +  where 500 = <Response [500 Internal Server Error]>.status_code
_________________ TestEventBus.test_event_bus_initialization __________________
tests\test_streaming_system.py:100: in test_event_bus_initialization
    assert hasattr(event_bus, 'subscribers')
E   AssertionError: assert False
E    +  where False = hasattr(<backend.services.streaming.event_bus.EventBus object at 0x00000171C9D98550>, 'subscribers')
____________________ TestEventBus.test_subscribe_to_events ____________________
tests\test_streaming_system.py:108: in test_subscribe_to_events
    assert "test_event" in event_bus.subscribers
                           ^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'EventBus' object has no attribute 'subscribers'. Did you mean: 'subscribe'?
__________________ TestEventBus.test_unsubscribe_from_events __________________
tests\test_streaming_system.py:116: in test_unsubscribe_from_events
    assert handler not in event_bus.subscribers.get("test_event", [])
                          ^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'EventBus' object has no attribute 'subscribers'. Did you mean: 'subscribe'?
______________________ TestEventBus.test_publish_events _______________________
tests\test_streaming_system.py:125: in test_publish_events
    await event_bus.publish("test_event", test_data)
E   TypeError: object int can't be used in 'await' expression
_________________ TestProviderRegistry.test_get_all_providers _________________
tests\test_streaming_system.py:167: in test_get_all_providers
    all_providers = provider_registry.get_all_providers()
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'ProviderRegistry' object has no attribute 'get_all_providers'. Did you mean: 'get_active_providers'?
---------------------------- Captured stdout call -----------------------------
2025-08-23 08:04:27,284 - provider_registry - INFO - Registered provider: test_provider for sport NBA
---------------------------- Captured stderr call -----------------------------
2025-08-23 08:04:27,284 - provider_registry - INFO - Registered provider: test_provider for sport NBA
------------------------------ Captured log call ------------------------------
INFO     provider_registry::0 Registered provider: test_provider for sport NBA
____________ TestPortfolioRationaleService.test_generate_rationale ____________
tests\test_streaming_system.py:206: in test_generate_rationale
    with patch.object(rationale_service, '_call_llm_service', new_callable=AsyncMock) as mock_llm:
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
C:\Python313\Lib\unittest\mock.py:1497: in __enter__
    original, local = self.get_original()
                      ^^^^^^^^^^^^^^^^^^^
C:\Python313\Lib\unittest\mock.py:1467: in get_original
    raise AttributeError(
E   AttributeError: <backend.services.rationale.portfolio_rationale_service.PortfolioRationaleService object at 0x00000171C95A0510> does not have the attribute '_call_llm_service'
________________ TestPortfolioRationaleService.test_get_status ________________
tests\test_streaming_system.py:224: in test_get_status
    assert "is_available" in status
E   AssertionError: assert 'is_available' in {'cache_hit_target_met': False, 'configuration': {'cache_hit_target': 0.7, 'cache_ttl_seconds': 300, 'composition_chan..._rate_target': '>= 70%', 'current_cache_hit_rate': '0.0%', 'safety_filter_active': True, ...}, 'is_healthy': True, ...}
_______________ TestPortfolioRationaleService.test_health_check _______________
tests\test_streaming_system.py:231: in test_health_check
    is_healthy = rationale_service.health_check()
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'PortfolioRationaleService' object has no attribute 'health_check'
_______ TestStreamingIntegration.test_provider_to_streamer_integration ________
tests\test_streaming_system.py:311: in test_provider_to_streamer_integration
    await streamer._process_provider_data("integration_provider")
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   TypeError: MarketStreamer._process_provider_data() missing 1 required positional argument: 'props'
---------------------------- Captured stdout setup ----------------------------
2025-08-23 08:04:27,342 - provider_registry - INFO - Registered provider: integration_provider for sport NBA
---------------------------- Captured stderr setup ----------------------------
2025-08-23 08:04:27,342 - provider_registry - INFO - Registered provider: integration_provider for sport NBA
----------------------------- Captured log setup ------------------------------
INFO     provider_registry::0 Registered provider: integration_provider for sport NBA
_____________ TestStreamingIntegration.test_event_bus_integration _____________
tests\test_streaming_system.py:328: in test_event_bus_integration
    await event_bus.publish("test_integration", test_data)
E   TypeError: object int can't be used in 'await' expression
---------------------------- Captured stdout setup ----------------------------
2025-08-23 08:04:27,350 - provider_registry - INFO - Registered provider: integration_provider for sport NBA
---------------------------- Captured stderr setup ----------------------------
2025-08-23 08:04:27,350 - provider_registry - INFO - Registered provider: integration_provider for sport NBA
----------------------------- Captured log setup ------------------------------
INFO     provider_registry::0 Registered provider: integration_provider for sport NBA
____________ TestStreamingIntegration.test_full_streaming_workflow ____________
tests\test_streaming_system.py:352: in test_full_streaming_workflow
    with patch('backend.services.streaming.market_streamer.event_bus', event_bus):
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
C:\Python313\Lib\unittest\mock.py:1497: in __enter__
    original, local = self.get_original()
                      ^^^^^^^^^^^^^^^^^^^
C:\Python313\Lib\unittest\mock.py:1467: in get_original
    raise AttributeError(
E   AttributeError: <module 'backend.services.streaming.market_streamer' from 'C:\\Users\\bcmad\\Downloads\\A1Betting7-13.2\\backend\\services\\streaming\\market_streamer.py'> does not have the attribute 'event_bus'
---------------------------- Captured stdout setup ----------------------------
2025-08-23 08:04:27,368 - provider_registry - INFO - Registered provider: integration_provider for sport NBA
---------------------------- Captured stderr setup ----------------------------
2025-08-23 08:04:27,368 - provider_registry - INFO - Registered provider: integration_provider for sport NBA
----------------------------- Captured log setup ------------------------------
INFO     provider_registry::0 Registered provider: integration_provider for sport NBA
_________ TestStreamingPerformance.test_high_volume_event_processing __________
tests\test_streaming_system.py:384: in test_high_volume_event_processing
    await asyncio.gather(*tasks)
          ^^^^^^^^^^^^^^^^^^^^^^
C:\Python313\Lib\asyncio\tasks.py:884: in gather
    fut = ensure_future(arg, loop=loop)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
C:\Python313\Lib\asyncio\tasks.py:742: in ensure_future
    raise TypeError('An asyncio.Future, a coroutine or an awaitable '
E   TypeError: An asyncio.Future, a coroutine or an awaitable is required
_________ TestStreamingPerformance.test_rationale_service_performance _________
tests\test_streaming_system.py:433: in test_rationale_service_performance
    with patch.object(service, '_call_llm_service', new_callable=AsyncMock) as mock_llm:
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
C:\Python313\Lib\unittest\mock.py:1497: in __enter__
    original, local = self.get_original()
                      ^^^^^^^^^^^^^^^^^^^
C:\Python313\Lib\unittest\mock.py:1467: in get_original
    raise AttributeError(
E   AttributeError: <backend.services.rationale.portfolio_rationale_service.PortfolioRationaleService object at 0x00000171C95A2780> does not have the attribute '_call_llm_service'
=========================== short test summary info ===========================
FAILED tests/backend/routes/test_auth_routes.py::TestAuthenticationRoutes::test_register_endpoint_structure
FAILED tests/backend/routes/test_auth_routes.py::TestAuthenticationRoutes::test_register_validation
FAILED tests/backend/routes/test_auth_routes.py::TestAuthenticationRoutes::test_login_endpoint_structure
FAILED tests/backend/routes/test_auth_routes.py::TestAuthenticationRoutes::test_login_validation
FAILED tests/backend/routes/test_auth_routes.py::TestAuthenticationRoutes::test_refresh_token_endpoint_structure
FAILED tests/backend/routes/test_auth_routes.py::TestAuthenticationRoutes::test_me_endpoint_structure
FAILED tests/backend/routes/test_mlb_extras.py::TestMLBExtrasRoutes::test_mlb_test_props_endpoint
FAILED tests/backend/routes/test_mlb_extras.py::TestMLBExtrasRoutes::test_get_todays_games_success
FAILED tests/backend/routes/test_mlb_extras.py::TestMLBExtrasRoutes::test_get_todays_games_empty
FAILED tests/backend/routes/test_mlb_extras.py::TestMLBExtrasRoutes::test_get_todays_games_service_error
FAILED tests/backend/routes/test_mlb_extras.py::TestMLBExtrasRoutes::test_get_prizepicks_props_success
FAILED tests/backend/routes/test_mlb_extras.py::TestMLBExtrasRoutes::test_get_prizepicks_props_fallback_to_empty
FAILED tests/backend/routes/test_mlb_extras.py::TestMLBExtrasRoutes::test_get_comprehensive_props_success
FAILED tests/backend/routes/test_mlb_extras.py::TestMLBExtrasRoutes::test_get_comprehensive_props_without_optimization
FAILED tests/backend/routes/test_mlb_extras.py::TestMLBExtrasRoutes::test_get_comprehensive_props_service_error
FAILED tests/backend/routes/test_mlb_extras.py::TestMLBExtrasRoutes::test_get_live_game_stats_success
FAILED tests/backend/routes/test_mlb_extras.py::TestMLBExtrasRoutes::test_get_live_game_stats_not_found
FAILED tests/backend/routes/test_mlb_extras.py::TestMLBExtrasRoutes::test_get_live_game_stats_scheduled_game
FAILED tests/backend/routes/test_mlb_extras.py::TestMLBExtrasRoutes::test_get_play_by_play_success
FAILED tests/backend/routes/test_mlb_extras.py::TestMLBExtrasRoutes::test_get_play_by_play_empty_events
FAILED tests/backend/routes/test_mlb_extras.py::TestMLBExtrasRoutes::test_get_play_by_play_game_not_found
FAILED tests/backend/routes/test_mlb_extras.py::TestMLBExtrasRoutes::test_service_timeout_handling
FAILED tests/backend/routes/test_mlb_extras.py::TestMLBExtrasRoutes::test_mlb_data_flow_integration
FAILED tests/backend/routes/test_mlb_extras.py::TestMLBExtrasRoutes::test_comprehensive_props_performance
FAILED tests/backend/routes/test_mlb_extras.py::TestMLBExtrasRoutes::test_multiple_concurrent_requests
FAILED tests/backend/routes/test_multiple_sportsbook_routes.py::TestMultipleSportsbookRoutes::test_get_player_props_success
FAILED tests/backend/routes/test_multiple_sportsbook_routes.py::TestMultipleSportsbookRoutes::test_get_player_props_with_filters
FAILED tests/backend/routes/test_multiple_sportsbook_routes.py::TestMultipleSportsbookRoutes::test_get_player_props_missing_sport
FAILED tests/backend/routes/test_multiple_sportsbook_routes.py::TestMultipleSportsbookRoutes::test_get_player_props_service_error
FAILED tests/backend/routes/test_multiple_sportsbook_routes.py::TestMultipleSportsbookRoutes::test_get_best_odds_success
FAILED tests/backend/routes/test_multiple_sportsbook_routes.py::TestMultipleSportsbookRoutes::test_get_best_odds_with_filters
FAILED tests/backend/routes/test_multiple_sportsbook_routes.py::TestMultipleSportsbookRoutes::test_get_performance_metrics
FAILED tests/backend/routes/test_multiple_sportsbook_routes.py::TestMultipleSportsbookRoutes::test_get_available_sports
FAILED tests/backend/routes/test_multiple_sportsbook_routes.py::TestMultipleSportsbookRoutes::test_search_player_props
FAILED tests/backend/routes/test_multiple_sportsbook_routes.py::TestMultipleSportsbookRoutes::test_search_player_props_missing_params
FAILED tests/backend/routes/test_multiple_sportsbook_routes.py::TestMultipleSportsbookRoutes::test_websocket_connection
FAILED tests/backend/routes/test_multiple_sportsbook_routes.py::TestMultipleSportsbookRoutes::test_websocket_multiple_subscriptions
FAILED tests/backend/routes/test_multiple_sportsbook_routes.py::TestMultipleSportsbookRoutes::test_websocket_disconnect_handling
FAILED tests/backend/routes/test_multiple_sportsbook_routes.py::TestMultipleSportsbookRoutes::test_service_timeout_handling
FAILED tests/backend/routes/test_portfolio_optimization_routes.py::TestPortfolioOptimizationRoutes::test_kelly_calculation_validation
FAILED tests/backend/routes/test_portfolio_optimization_routes.py::TestPortfolioOptimizationRoutes::test_portfolio_optimization_validation
FAILED tests/backend/routes/test_portfolio_optimization_routes.py::TestPortfolioOptimizationRoutes::test_portfolio_metrics_endpoint
FAILED tests/backend/routes/test_portfolio_optimization_routes.py::TestPortfolioOptimizationRoutes::test_risk_management_endpoint
FAILED tests/backend/routes/test_portfolio_optimization_routes.py::TestPortfolioOptimizationRoutes::test_historical_performance_endpoint
FAILED tests/backend/routes/test_prediction_engine_routes.py::TestPredictionEngineRoutes::test_single_prediction_validation
FAILED tests/backend/routes/test_prediction_engine_routes.py::TestPredictionEngineRoutes::test_batch_prediction_validation
FAILED tests/backend/routes/test_prediction_engine_routes.py::TestPredictionEngineRoutes::test_model_registration_endpoint_structure
FAILED tests/backend/routes/test_prediction_engine_routes.py::TestPredictionEngineRoutes::test_registered_models_endpoint
FAILED tests/backend/routes/test_prediction_engine_routes.py::TestPredictionEngineRoutes::test_performance_query_endpoint_structure
FAILED tests/backend/routes/test_prediction_engine_routes.py::TestPredictionEngineRoutes::test_health_endpoint
FAILED tests/backend/routes/test_prediction_engine_routes.py::TestPredictionEngineRoutes::test_performance_alerts_endpoint
FAILED tests/backend/routes/test_prediction_engine_routes.py::TestPredictionEngineRoutes::test_batch_stats_endpoint
FAILED tests/backend/routes/test_prediction_engine_routes.py::TestPredictionEngineRoutes::test_shap_stats_endpoint
FAILED tests/backend/routes/test_prediction_engine_routes.py::TestPredictionEngineRoutes::test_initialize_endpoint
FAILED tests/backend/routes/test_prediction_engine_routes.py::TestPredictionEngineRoutes::test_shutdown_endpoint
FAILED tests/backend/routes/test_prediction_engine_routes.py::TestPredictionEngineRoutes::test_prediction_flow_integration
FAILED tests/backend/routes/test_prediction_engine_routes.py::TestPredictionEngineRoutes::test_error_handling_consistency
FAILED tests/errors/test_error_taxonomy.py::test_validation_error_response - ...
FAILED tests/errors/test_error_taxonomy.py::test_internal_error_simulation - ...
FAILED tests/ingestion/test_ingestion_endpoints.py::TestIngestionEndpoints::test_run_nba_ingestion_success
FAILED tests/ingestion/test_ingestion_endpoints.py::TestIngestionEndpoints::test_run_nba_ingestion_partial_success
FAILED tests/ingestion/test_ingestion_endpoints.py::TestIngestionEndpoints::test_run_nba_ingestion_pipeline_exception
FAILED tests/ingestion/test_ingestion_endpoints.py::TestIngestionEndpoints::test_run_nba_ingestion_response_serialization
FAILED tests/ingestion/test_nba_ingestion_pipeline.py::TestNBAIngestionPipeline::test_successful_run_with_small_dataset
FAILED tests/ingestion/test_nba_ingestion_pipeline.py::TestNBAIngestionPipeline::test_line_change_detection
FAILED tests/ingestion/test_nba_ingestion_pipeline.py::TestNBAIngestionPipeline::test_taxonomy_failure_path
FAILED tests/ingestion/test_nba_ingestion_pipeline.py::TestNBAIngestionPipeline::test_player_upsert_matching_by_external_id
FAILED tests/ingestion/test_nba_ingestion_pipeline.py::TestNBAIngestionPipeline::test_ingest_run_persisted_with_correct_status
FAILED tests/ingestion/test_prop_mapper.py::TestPropMapper::test_map_raw_to_normalized_team_normalization
FAILED tests/ingestion/test_prop_mapper.py::TestPropMapper::test_map_raw_to_normalized_taxonomy_error_propagation
FAILED tests/ingestion/test_prop_mapper.py::TestPropMapper::test_compute_line_hash_deterministic
FAILED tests/ingestion/test_prop_mapper.py::TestPropMapper::test_compute_line_hash_with_different_payouts
FAILED tests/ingestion/test_prop_mapper.py::TestPropMapper::test_compute_line_hash_with_none_odds
FAILED tests/ingestion/test_prop_mapper.py::TestPropMapper::test_validate_normalized_prop_invalid_cases
FAILED tests/ingestion/test_taxonomy_service.py::TestTaxonomyService::test_normalize_prop_category_partial_matches
FAILED tests/ingestion/test_taxonomy_service.py::TestTaxonomyService::test_normalize_prop_category_unknown_raises_error
FAILED tests/rate_limit/test_rate_limit_basic.py::test_rate_limit_headers_present
FAILED tests/rate_limit/test_rate_limit_basic.py::test_rate_limit_consumption
FAILED tests/rate_limit/test_rate_limit_basic.py::test_rate_limit_middleware_dispatch
FAILED tests/security/test_security_headers.py::TestBasicSecurityHeaders::test_hsts_header_disabled
FAILED tests/security/test_security_headers.py::TestBasicSecurityHeaders::test_x_frame_options_deny
FAILED tests/security/test_security_headers.py::TestBasicSecurityHeaders::test_x_frame_options_sameorigin
FAILED tests/security/test_security_headers.py::TestBasicSecurityHeaders::test_x_content_type_options
FAILED tests/security/test_security_headers.py::TestBasicSecurityHeaders::test_all_basic_headers_disabled
FAILED tests/security/test_security_headers.py::TestCSPFunctionality::test_csp_basic_policy
FAILED tests/security/test_security_headers.py::TestCSPFunctionality::test_csp_with_extra_connect_src
FAILED tests/security/test_security_headers.py::TestCSPFunctionality::test_csp_report_uri
FAILED tests/security/test_security_headers.py::TestCSPFunctionality::test_csp_enforce_mode
FAILED tests/security/test_security_headers.py::TestCSPFunctionality::test_csp_report_only_mode
FAILED tests/security/test_security_headers.py::TestCSPFunctionality::test_csp_disabled
FAILED tests/security/test_security_headers.py::TestCrossOriginPolicies::test_coop_same_origin_allow_popups
FAILED tests/security/test_security_headers.py::TestCrossOriginPolicies::test_coop_disabled
FAILED tests/security/test_security_headers.py::TestCrossOriginPolicies::test_coep_require_corp
FAILED tests/security/test_security_headers.py::TestCrossOriginPolicies::test_coep_disabled
FAILED tests/security/test_security_headers.py::TestCrossOriginPolicies::test_corp_same_site
FAILED tests/security/test_security_headers.py::TestCrossOriginPolicies::test_corp_disabled
FAILED tests/security/test_security_headers.py::TestPermissionsPolicy::test_permissions_policy_basic
FAILED tests/security/test_security_headers.py::TestPermissionsPolicy::test_permissions_policy_with_append
FAILED tests/security/test_security_headers.py::TestMetricsIntegration::test_metrics_tracking_enabled
FAILED tests/security/test_security_headers.py::TestMetricsIntegration::test_metrics_tracking_disabled
FAILED tests/security/test_security_headers.py::TestConfiguration::test_security_strict_mode_override
FAILED tests/security/test_security_headers.py::TestConfiguration::test_csp_extra_connect_src_list
FAILED tests/security/test_security_headers.py::TestConfiguration::test_csp_extra_connect_src_empty
FAILED tests/security/test_security_headers.py::TestPerformanceAndOrdering::test_debug_logging_sampling
FAILED tests/security/test_security_headers_basic.py::TestCSPHeaderGeneration::test_basic_csp_generation
FAILED tests/security/test_security_headers_basic.py::TestSecurityHeadersMiddleware::test_csp_header_names
FAILED tests/security/test_security_headers_core.py::TestBasicSecurityHeaders::test_hsts_header_enabled
FAILED tests/security/test_security_headers_core.py::TestBasicSecurityHeaders::test_hsts_header_disabled
FAILED tests/security/test_security_headers_core.py::TestBasicSecurityHeaders::test_x_frame_options_deny
FAILED tests/security/test_security_headers_core.py::TestBasicSecurityHeaders::test_x_frame_options_sameorigin
FAILED tests/security/test_security_headers_core.py::TestBasicSecurityHeaders::test_x_content_type_options
FAILED tests/security/test_security_headers_core.py::TestBasicSecurityHeaders::test_all_basic_headers_disabled
FAILED tests/security/test_security_headers_core.py::TestCSPFunctionality::test_csp_upgrade_insecure_requests
FAILED tests/security/test_security_headers_core.py::TestCSPFunctionality::test_csp_report_uri
FAILED tests/security/test_security_headers_core.py::TestCSPFunctionality::test_csp_enforce_mode
FAILED tests/security/test_security_headers_core.py::TestCSPFunctionality::test_csp_report_only_mode
FAILED tests/security/test_security_headers_core.py::TestCrossOriginPolicies::test_coop_same_origin_allow_popups
FAILED tests/security/test_security_headers_core.py::TestCrossOriginPolicies::test_coop_disabled
FAILED tests/security/test_security_headers_core.py::TestCrossOriginPolicies::test_coep_require_corp
FAILED tests/security/test_security_headers_core.py::TestCrossOriginPolicies::test_coep_disabled
FAILED tests/security/test_security_headers_core.py::TestCrossOriginPolicies::test_corp_same_site
FAILED tests/security/test_security_headers_core.py::TestCrossOriginPolicies::test_corp_disabled
FAILED tests/security/test_security_headers_core.py::TestPermissionsPolicy::test_permissions_policy_basic
FAILED tests/security/test_security_headers_core.py::TestPermissionsPolicy::test_permissions_policy_with_append
FAILED tests/stabilization/test_health_aliases.py::TestHealthAliases::test_health_alias_get
FAILED tests/stabilization/test_health_aliases.py::TestHealthAliases::test_all_health_endpoints_identical_schema
FAILED tests/stabilization/test_stabilization_matrix.py::TestHealthAliasMatrix::test_health_alias_matrix
FAILED tests/stabilization/test_stabilization_matrix.py::TestOptionsPreflight::test_options_preflight_activate
FAILED tests/stabilization/test_stabilization_matrix.py::TestOptionsPreflight::test_preflight_cors_headers
FAILED tests/stabilization/test_stabilization_matrix.py::TestLeanModeDisablesMonitors::test_lean_mode_middleware_conditional_loading
FAILED tests/stabilization/test_stabilization_matrix.py::TestStabilizationIntegration::test_stabilization_feature_matrix_complete
FAILED tests/statistical/test_drift_injection.py::TestIntentionalDriftInjection::test_inject_eigenvalue_degradation
FAILED tests/statistical/test_drift_injection.py::TestAlertSystemValidation::test_consecutive_failure_alert_trigger
FAILED tests/statistical/test_drift_injection.py::TestAlertSystemValidation::test_critical_divergence_alert_trigger
FAILED tests/statistical/test_drift_injection.py::TestAlertSystemValidation::test_regression_alert_trigger
FAILED tests/statistical/test_drift_injection.py::test_comprehensive_drift_injection_suite
FAILED tests/statistical/test_statistical_verification_suite.py::test_statistical_verification_ci_critical
FAILED tests/test_health_endpoint.py::test_unified_metrics_collector - Attrib...
FAILED tests/test_health_endpoint.py::test_health_endpoint_response_structure
FAILED tests/test_health_endpoint.py::test_health_endpoint_status_validation
FAILED tests/test_phase2_performance_optimization.py::TestEnhancedCaching::test_cache_get_set_operations
FAILED tests/test_phase2_performance_optimization.py::TestEnhancedCaching::test_cache_serialization
FAILED tests/test_phase2_performance_optimization.py::TestEnhancedCaching::test_cache_pattern_deletion
FAILED tests/test_phase2_performance_optimization.py::TestEnhancedCaching::test_cache_health_check
FAILED tests/test_phase2_performance_optimization.py::TestEnhancedCaching::test_cache_stats_collection
FAILED tests/test_phase2_performance_optimization.py::TestEnhancedCaching::test_cached_function_decorator
FAILED tests/test_phase2_performance_optimization.py::TestProductionIntegrationWithCache::test_production_app_with_cache_endpoints
FAILED tests/test_phase2_performance_optimization.py::TestProductionIntegrationWithCache::test_cache_endpoints_functionality
FAILED tests/test_phase2_performance_optimization.py::TestProductionIntegrationWithCache::test_metrics_include_cache_data
FAILED tests/test_phase2_performance_optimization.py::TestPerformanceOptimizations::test_cache_convenience_functions
FAILED tests/test_phase2_performance_optimization.py::TestPerformanceOptimizations::test_cache_error_handling
FAILED tests/test_phase2_performance_optimization.py::TestPerformanceOptimizations::test_cache_service_cleanup
FAILED tests/test_phase2_performance_optimization.py::TestFullPhase2Integration::test_complete_performance_stack
FAILED tests/test_reliability_endpoint.py::TestReliabilityEndpoint::test_reliability_endpoint_error_handling
FAILED tests/test_reliability_endpoint.py::TestReliabilityOrchestrator::test_orchestrator_with_high_cpu_anomaly
FAILED tests/test_reliability_endpoint.py::TestReliabilityOrchestrator::test_orchestrator_with_high_p95_latency_anomaly
FAILED tests/test_streaming_integration.py::TestProviderEndpoints::test_list_providers
FAILED tests/test_streaming_integration.py::TestProviderEndpoints::test_get_specific_provider
FAILED tests/test_streaming_integration.py::TestProviderEndpoints::test_get_nonexistent_provider
FAILED tests/test_streaming_integration.py::TestStreamingControlEndpoints::test_start_streaming
FAILED tests/test_streaming_integration.py::TestStreamingControlEndpoints::test_stop_streaming
FAILED tests/test_streaming_integration.py::TestStreamingControlEndpoints::test_invalid_action
FAILED tests/test_streaming_integration.py::TestSystemStatusEndpoints::test_get_system_status
FAILED tests/test_streaming_integration.py::TestRationaleEndpoints::test_generate_rationale
FAILED tests/test_streaming_integration.py::TestRationaleEndpoints::test_generate_rationale_invalid_type
FAILED tests/test_streaming_integration.py::TestStreamingWorkflow::test_provider_lifecycle_workflow
FAILED tests/test_streaming_integration.py::TestStreamingWorkflow::test_streaming_control_workflow
FAILED tests/test_streaming_integration.py::TestStreamingWorkflow::test_rationale_generation_workflow
FAILED tests/test_streaming_performance.py::TestAPIPerformance::test_provider_list_performance
FAILED tests/test_streaming_performance.py::TestAPIPerformance::test_concurrent_status_requests
FAILED tests/test_streaming_performance.py::TestStreamingControlPerformance::test_rapid_start_stop_cycles
FAILED tests/test_streaming_performance.py::TestAsyncPerformance::test_rationale_service_load
FAILED tests/test_streaming_performance.py::TestStressScenarios::test_large_response_payload
FAILED tests/test_streaming_system.py::TestEventBus::test_event_bus_initialization
FAILED tests/test_streaming_system.py::TestEventBus::test_subscribe_to_events
FAILED tests/test_streaming_system.py::TestEventBus::test_unsubscribe_from_events
FAILED tests/test_streaming_system.py::TestEventBus::test_publish_events - Ty...
FAILED tests/test_streaming_system.py::TestProviderRegistry::test_get_all_providers
FAILED tests/test_streaming_system.py::TestPortfolioRationaleService::test_generate_rationale
FAILED tests/test_streaming_system.py::TestPortfolioRationaleService::test_get_status
FAILED tests/test_streaming_system.py::TestPortfolioRationaleService::test_health_check
FAILED tests/test_streaming_system.py::TestStreamingIntegration::test_provider_to_streamer_integration
FAILED tests/test_streaming_system.py::TestStreamingIntegration::test_event_bus_integration
FAILED tests/test_streaming_system.py::TestStreamingIntegration::test_full_streaming_workflow
FAILED tests/test_streaming_system.py::TestStreamingPerformance::test_high_volume_event_processing
FAILED tests/test_streaming_system.py::TestStreamingPerformance::test_rationale_service_performance
ERROR tests/backend/routes/test_enhanced_ml_routes.py::TestEnhancedMLRoutes::test_predict_single_success
ERROR tests/backend/routes/test_enhanced_ml_routes.py::TestEnhancedMLRoutes::test_predict_single_missing_fields
ERROR tests/backend/routes/test_enhanced_ml_routes.py::TestEnhancedMLRoutes::test_predict_single_invalid_priority
ERROR tests/backend/routes/test_enhanced_ml_routes.py::TestEnhancedMLRoutes::test_batch_predict_success
ERROR tests/backend/routes/test_enhanced_ml_routes.py::TestEnhancedMLRoutes::test_batch_predict_empty_requests
ERROR tests/backend/routes/test_enhanced_ml_routes.py::TestEnhancedMLRoutes::test_batch_predict_large_batch
ERROR tests/backend/routes/test_enhanced_ml_routes.py::TestEnhancedMLRoutes::test_register_model_success
ERROR tests/backend/routes/test_enhanced_ml_routes.py::TestEnhancedMLRoutes::test_list_models_success
ERROR tests/backend/routes/test_enhanced_ml_routes.py::TestEnhancedMLRoutes::test_get_model_info
ERROR tests/backend/routes/test_enhanced_ml_routes.py::TestEnhancedMLRoutes::test_get_performance_metrics
ERROR tests/backend/routes/test_enhanced_ml_routes.py::TestEnhancedMLRoutes::test_update_prediction_outcome
ERROR tests/backend/routes/test_enhanced_ml_routes.py::TestEnhancedMLRoutes::test_compare_models
ERROR tests/backend/routes/test_enhanced_ml_routes.py::TestEnhancedMLRoutes::test_health_check
ERROR tests/backend/routes/test_enhanced_ml_routes.py::TestEnhancedMLRoutes::test_get_system_status
ERROR tests/backend/routes/test_enhanced_ml_routes.py::TestEnhancedMLRoutes::test_predict_single_service_error
ERROR tests/backend/routes/test_enhanced_ml_routes.py::TestEnhancedMLRoutes::test_invalid_endpoint_404
ERROR tests/backend/routes/test_enhanced_ml_routes.py::TestEnhancedMLRoutes::test_predict_single_response_time
ERROR tests/stabilization/test_stabilization_matrix.py::TestLeanModeDisablesMonitors::test_lean_mode_disables_monitors
ERROR tests/statistical/test_statistical_verification_suite.py::TestDeterministicMonteCarlo::test_seed_reproducibility
ERROR tests/statistical/test_statistical_verification_suite.py::TestDeterministicMonteCarlo::test_deterministic_seed_generation
ERROR tests/statistical/test_statistical_verification_suite.py::TestDeterministicMonteCarlo::test_monte_carlo_convergence
ERROR tests/statistical/test_statistical_verification_suite.py::TestKSTestRunner::test_ks_normal_distribution
ERROR tests/statistical/test_statistical_verification_suite.py::TestKSTestRunner::test_ks_distribution_mismatch_detection
ERROR tests/statistical/test_statistical_verification_suite.py::TestKSTestRunner::test_ks_critical_divergence_threshold
ERROR tests/statistical/test_statistical_verification_suite.py::TestCorrelationPSDMonitor::test_valid_correlation_matrix_validation
ERROR tests/statistical/test_statistical_verification_suite.py::TestCorrelationPSDMonitor::test_invalid_correlation_matrix_detection
ERROR tests/statistical/test_statistical_verification_suite.py::TestCorrelationPSDMonitor::test_correlation_drift_detection
ERROR tests/statistical/test_statistical_verification_suite.py::TestCorrelationPSDMonitor::test_eigenvalue_threshold_monitoring
ERROR tests/statistical/test_statistical_verification_suite.py::TestCIWidthGuard::test_baseline_ci_establishment
ERROR tests/statistical/test_statistical_verification_suite.py::TestCIWidthGuard::test_ci_width_regression_detection
ERROR tests/statistical/test_statistical_verification_suite.py::TestCIWidthGuard::test_ci_width_stable_distribution
ERROR tests/statistical/test_statistical_verification_suite.py::TestFullStatisticalSuite::test_complete_suite_execution
ERROR tests/statistical/test_statistical_verification_suite.py::TestFullStatisticalSuite::test_suite_deterministic_behavior
ERROR tests/statistical/test_statistical_verification_suite.py::TestFullStatisticalSuite::test_build_failure_mechanism
ERROR tests/statistical/test_statistical_verification_suite.py::TestFullStatisticalSuite::test_alert_trigger_conditions
ERROR tests/statistical/test_statistical_verification_suite.py::TestFullStatisticalSuite::test_ci_cd_integration_ready
ERROR tests/statistical/test_statistical_verification_suite.py::TestIntentionalDriftInjection::test_intentional_ks_divergence_injection
ERROR tests/statistical/test_statistical_verification_suite.py::TestIntentionalDriftInjection::test_intentional_correlation_drift_injection
ERROR tests/statistical/test_statistical_verification_suite.py::TestIntentionalDriftInjection::test_intentional_ci_regression_injection
ERROR tests/test_streaming_system.py::TestMarketStreamer::test_streamer_initialization
ERROR tests/test_streaming_system.py::TestMarketStreamer::test_start_streaming
ERROR tests/test_streaming_system.py::TestMarketStreamer::test_stop_streaming
ERROR tests/test_streaming_system.py::TestMarketStreamer::test_get_status - A...
==== 186 failed, 351 passed, 9 skipped, 3041 warnings, 43 errors in 40.25s ====
