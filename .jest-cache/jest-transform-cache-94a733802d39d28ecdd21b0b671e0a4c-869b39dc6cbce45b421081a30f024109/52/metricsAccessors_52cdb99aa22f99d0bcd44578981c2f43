53de6ab6f04ff19691ad33938e59edea
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.getApiErrorRate = getApiErrorRate;
exports.getApiTotalRequests = getApiTotalRequests;
exports.getAverageLatencyMs = getAverageLatencyMs;
exports.getCacheErrors = getCacheErrors;
Object.defineProperty(exports, "getCacheHitRate", {
  enumerable: true,
  get: function () {
    return _healthAccessors.getCacheHitRate;
  }
});
exports.getCacheHits = getCacheHits;
exports.getCacheMisses = getCacheMisses;
exports.getErrorRequests = getErrorRequests;
exports.getSuccessRequests = getSuccessRequests;
exports.getTotalRequests = getTotalRequests;
var _healthAccessors = require("./healthAccessors");
/**
 * Metrics accessors to prevent runtime errors from total_requests variations
 * Handles legacy field mappings and provides safe defaults with fallback paths
 * 
 * @module metricsAccessors
 */

// Metrics-like object types for better type safety  

// Module-scoped warning flags to prevent spam
let hasWarnedLegacyCacheRequests = false;
let hasWarnedLegacyApiRequests = false;
let hasWarnedLegacyCacheHits = false;
let hasWarnedLegacyCacheErrors = false;

/**
 * Safe helper for nested property traversal (reserved for future use)
 */
const _getNestedValue = (obj, path) => {
  let current = obj;
  for (const key of path) {
    if (current && typeof current === 'object' && key in current) {
      current = current[key];
    } else {
      return undefined;
    }
  }
  return current;
};

/**
 * Safely extract total requests from various metrics object structures
 * 
 * Priority order:
 * 1. obj?.cache?.total_requests (canonical)
 * 2. obj?.cache_performance?.total_requests (legacy mapping)
 * 3. obj?.total_requests (flat legacy)
 * 4. Default: 0
 */
function getTotalRequests(obj) {
  if (!obj || typeof obj !== 'object') {
    return 0;
  }
  const metricsObj = obj;

  // Priority 1: Canonical cache.total_requests
  if (typeof metricsObj?.cache?.total_requests === 'number') {
    return metricsObj.cache.total_requests;
  }

  // Priority 2: Legacy cache_performance.total_requests
  if (typeof metricsObj?.cache_performance?.total_requests === 'number') {
    if (!hasWarnedLegacyCacheRequests && process.env.NODE_ENV === 'development') {
      hasWarnedLegacyCacheRequests = true;
      // eslint-disable-next-line no-console
      console.debug('[MetricsCompat] Using legacy cache_performance.total_requests, consider migrating to cache.total_requests');
    }
    return metricsObj.cache_performance.total_requests;
  }

  // Priority 3: Flat legacy structure
  if (typeof metricsObj?.total_requests === 'number') {
    if (!hasWarnedLegacyCacheRequests && process.env.NODE_ENV === 'development') {
      hasWarnedLegacyCacheRequests = true;
      // eslint-disable-next-line no-console
      console.debug('[MetricsCompat] Using flat total_requests, consider migrating to cache.total_requests');
    }
    return metricsObj.total_requests;
  }

  // Default: 0
  return 0;
}

/**
 * Safely extract success requests from API metrics
 */
function getSuccessRequests(obj) {
  if (!obj || typeof obj !== 'object') {
    return 0;
  }
  const metricsObj = obj;

  // Priority 1: Canonical api.success_requests
  if (typeof metricsObj?.api?.success_requests === 'number') {
    return metricsObj.api.success_requests;
  }

  // Priority 2: Calculate from total - errors
  const totalRequests = metricsObj?.api?.total_requests || 0;
  const errorRequests = metricsObj?.api?.error_requests || 0;
  if (totalRequests > 0) {
    return Math.max(0, totalRequests - errorRequests);
  }
  return 0;
}

/**
 * Safely extract error requests from API metrics
 */
function getErrorRequests(obj) {
  if (!obj || typeof obj !== 'object') {
    return 0;
  }
  const metricsObj = obj;

  // Priority 1: Canonical api.error_requests
  if (typeof metricsObj?.api?.error_requests === 'number') {
    return metricsObj.api.error_requests;
  }

  // Priority 2: Aggregate from legacy api_performance
  if (metricsObj?.api_performance && typeof metricsObj.api_performance === 'object') {
    let totalErrors = 0;
    Object.values(metricsObj.api_performance).forEach(stats => {
      if (stats && typeof stats === 'object') {
        const statsObj = stats;
        totalErrors += typeof statsObj.errors === 'number' ? statsObj.errors : 0;
      }
    });
    if (totalErrors > 0 && !hasWarnedLegacyApiRequests && process.env.NODE_ENV === 'development') {
      hasWarnedLegacyApiRequests = true;
      // eslint-disable-next-line no-console
      console.debug('[MetricsCompat] Aggregating legacy api_performance errors, consider canonical api.error_requests');
    }
    return totalErrors;
  }
  return 0;
}

/**
 * Safely calculate API error rate with safe division
 */
function getApiErrorRate(obj) {
  const totalRequests = getApiTotalRequests(obj);
  const errorRequests = getErrorRequests(obj);
  if (totalRequests === 0) {
    return 0; // No requests = no error rate
  }
  return errorRequests / totalRequests * 100; // Return as percentage
}

/**
 * Get total API requests (different from cache total_requests)
 */
function getApiTotalRequests(obj) {
  if (!obj || typeof obj !== 'object') {
    return 0;
  }
  const metricsObj = obj;

  // Priority 1: Canonical api.total_requests
  if (typeof metricsObj?.api?.total_requests === 'number') {
    return metricsObj.api.total_requests;
  }

  // Priority 2: Aggregate from legacy api_performance
  if (metricsObj?.api_performance && typeof metricsObj.api_performance === 'object') {
    let totalRequests = 0;
    Object.values(metricsObj.api_performance).forEach(stats => {
      if (stats && typeof stats === 'object') {
        const statsObj = stats;
        totalRequests += typeof statsObj.total_calls === 'number' ? statsObj.total_calls : typeof statsObj.total_requests === 'number' ? statsObj.total_requests : 0;
      }
    });
    if (totalRequests > 0 && !hasWarnedLegacyApiRequests && process.env.NODE_ENV === 'development') {
      hasWarnedLegacyApiRequests = true;
      // eslint-disable-next-line no-console
      console.debug('[MetricsCompat] Aggregating legacy api_performance total_calls, consider canonical api.total_requests');
    }
    return totalRequests;
  }
  return 0;
}

/**
 * Safely extract average latency from API metrics
 */
function getAverageLatencyMs(obj) {
  if (!obj || typeof obj !== 'object') {
    return 0;
  }
  const metricsObj = obj;

  // Priority 1: Canonical api.avg_latency_ms
  if (typeof metricsObj?.api?.avg_latency_ms === 'number') {
    return metricsObj.api.avg_latency_ms;
  }

  // Priority 2: Average from legacy api_performance
  if (metricsObj?.api_performance && typeof metricsObj.api_performance === 'object') {
    let totalLatency = 0;
    let endpointCount = 0;
    Object.values(metricsObj.api_performance).forEach(stats => {
      if (stats && typeof stats === 'object') {
        const statsObj = stats;
        const avgTime = typeof statsObj.avg_time_ms === 'number' ? statsObj.avg_time_ms : typeof statsObj.avg_latency_ms === 'number' ? statsObj.avg_latency_ms : 0;
        if (avgTime > 0) {
          totalLatency += avgTime;
          endpointCount++;
        }
      }
    });
    return endpointCount > 0 ? totalLatency / endpointCount : 0;
  }
  return 0;
}

/**
 * Safely extract cache hits
 */
function getCacheHits(obj) {
  if (!obj || typeof obj !== 'object') {
    return 0;
  }
  const metricsObj = obj;

  // Priority 1: Canonical cache.hits
  if (typeof metricsObj?.cache?.hits === 'number') {
    return metricsObj.cache.hits;
  }

  // Priority 2: Legacy cache_performance.hits
  if (typeof metricsObj?.cache_performance?.hits === 'number') {
    if (!hasWarnedLegacyCacheHits && process.env.NODE_ENV === 'development') {
      hasWarnedLegacyCacheHits = true;
      // eslint-disable-next-line no-console
      console.debug('[MetricsCompat] Using legacy cache_performance.hits, consider migrating to cache.hits');
    }
    return metricsObj.cache_performance.hits;
  }
  return 0;
}

/**
 * Safely extract cache misses
 */
function getCacheMisses(obj) {
  if (!obj || typeof obj !== 'object') {
    return 0;
  }
  const metricsObj = obj;

  // Priority 1: Canonical cache.misses
  if (typeof metricsObj?.cache?.misses === 'number') {
    return metricsObj.cache.misses;
  }

  // Priority 2: Legacy cache_performance.misses
  if (typeof metricsObj?.cache_performance?.misses === 'number') {
    return metricsObj.cache_performance.misses;
  }
  return 0;
}

/**
 * Safely extract cache errors
 */
function getCacheErrors(obj) {
  if (!obj || typeof obj !== 'object') {
    return 0;
  }
  const metricsObj = obj;

  // Priority 1: Canonical cache.errors
  if (typeof metricsObj?.cache?.errors === 'number') {
    return metricsObj.cache.errors;
  }

  // Priority 2: Legacy cache_performance.errors
  if (typeof metricsObj?.cache_performance?.errors === 'number') {
    if (!hasWarnedLegacyCacheErrors && process.env.NODE_ENV === 'development') {
      hasWarnedLegacyCacheErrors = true;
      // eslint-disable-next-line no-console
      console.debug('[MetricsCompat] Using legacy cache_performance.errors, consider migrating to cache.errors');
    }
    return metricsObj.cache_performance.errors;
  }
  return 0;
}

/**
 * Re-export getCacheHitRate from healthAccessors for consistency
 * (Cache hit rate can come from either health or metrics contexts)
 */
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfaGVhbHRoQWNjZXNzb3JzIiwicmVxdWlyZSIsImhhc1dhcm5lZExlZ2FjeUNhY2hlUmVxdWVzdHMiLCJoYXNXYXJuZWRMZWdhY3lBcGlSZXF1ZXN0cyIsImhhc1dhcm5lZExlZ2FjeUNhY2hlSGl0cyIsImhhc1dhcm5lZExlZ2FjeUNhY2hlRXJyb3JzIiwiX2dldE5lc3RlZFZhbHVlIiwib2JqIiwicGF0aCIsImN1cnJlbnQiLCJrZXkiLCJ1bmRlZmluZWQiLCJnZXRUb3RhbFJlcXVlc3RzIiwibWV0cmljc09iaiIsImNhY2hlIiwidG90YWxfcmVxdWVzdHMiLCJjYWNoZV9wZXJmb3JtYW5jZSIsInByb2Nlc3MiLCJlbnYiLCJOT0RFX0VOViIsImNvbnNvbGUiLCJkZWJ1ZyIsImdldFN1Y2Nlc3NSZXF1ZXN0cyIsImFwaSIsInN1Y2Nlc3NfcmVxdWVzdHMiLCJ0b3RhbFJlcXVlc3RzIiwiZXJyb3JSZXF1ZXN0cyIsImVycm9yX3JlcXVlc3RzIiwiTWF0aCIsIm1heCIsImdldEVycm9yUmVxdWVzdHMiLCJhcGlfcGVyZm9ybWFuY2UiLCJ0b3RhbEVycm9ycyIsIk9iamVjdCIsInZhbHVlcyIsImZvckVhY2giLCJzdGF0cyIsInN0YXRzT2JqIiwiZXJyb3JzIiwiZ2V0QXBpRXJyb3JSYXRlIiwiZ2V0QXBpVG90YWxSZXF1ZXN0cyIsInRvdGFsX2NhbGxzIiwiZ2V0QXZlcmFnZUxhdGVuY3lNcyIsImF2Z19sYXRlbmN5X21zIiwidG90YWxMYXRlbmN5IiwiZW5kcG9pbnRDb3VudCIsImF2Z1RpbWUiLCJhdmdfdGltZV9tcyIsImdldENhY2hlSGl0cyIsImhpdHMiLCJnZXRDYWNoZU1pc3NlcyIsIm1pc3NlcyIsImdldENhY2hlRXJyb3JzIl0sInNvdXJjZXMiOlsibWV0cmljc0FjY2Vzc29ycy50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcclxuICogTWV0cmljcyBhY2Nlc3NvcnMgdG8gcHJldmVudCBydW50aW1lIGVycm9ycyBmcm9tIHRvdGFsX3JlcXVlc3RzIHZhcmlhdGlvbnNcclxuICogSGFuZGxlcyBsZWdhY3kgZmllbGQgbWFwcGluZ3MgYW5kIHByb3ZpZGVzIHNhZmUgZGVmYXVsdHMgd2l0aCBmYWxsYmFjayBwYXRoc1xyXG4gKiBcclxuICogQG1vZHVsZSBtZXRyaWNzQWNjZXNzb3JzXHJcbiAqL1xyXG5cclxuLy8gTWV0cmljcy1saWtlIG9iamVjdCB0eXBlcyBmb3IgYmV0dGVyIHR5cGUgc2FmZXR5ICBcclxuaW50ZXJmYWNlIE1ldHJpY3NMaWtlT2JqZWN0IHtcclxuICBhcGk/OiB7XHJcbiAgICB0b3RhbF9yZXF1ZXN0cz86IG51bWJlcjtcclxuICAgIHN1Y2Nlc3NfcmVxdWVzdHM/OiBudW1iZXI7XHJcbiAgICBlcnJvcl9yZXF1ZXN0cz86IG51bWJlcjtcclxuICAgIGF2Z19sYXRlbmN5X21zPzogbnVtYmVyO1xyXG4gIH07XHJcbiAgY2FjaGU/OiB7XHJcbiAgICBoaXRzPzogbnVtYmVyO1xyXG4gICAgbWlzc2VzPzogbnVtYmVyO1xyXG4gICAgdG90YWxfcmVxdWVzdHM/OiBudW1iZXI7XHJcbiAgICBoaXRfcmF0ZT86IG51bWJlcjtcclxuICAgIGVycm9ycz86IG51bWJlcjtcclxuICB9O1xyXG4gIC8vIExlZ2FjeSBzdHJ1Y3R1cmVzXHJcbiAgYXBpX3BlcmZvcm1hbmNlPzogUmVjb3JkPHN0cmluZywgdW5rbm93bj47XHJcbiAgY2FjaGVfcGVyZm9ybWFuY2U/OiB7XHJcbiAgICBoaXRzPzogbnVtYmVyO1xyXG4gICAgbWlzc2VzPzogbnVtYmVyO1xyXG4gICAgdG90YWxfcmVxdWVzdHM/OiBudW1iZXI7XHJcbiAgICBoaXRfcmF0ZT86IG51bWJlcjtcclxuICAgIGVycm9ycz86IG51bWJlcjtcclxuICB9O1xyXG4gIC8vIEV2ZW4gZmxhdHRlciBsZWdhY3lcclxuICB0b3RhbF9yZXF1ZXN0cz86IG51bWJlcjtcclxufVxyXG5cclxuLy8gTW9kdWxlLXNjb3BlZCB3YXJuaW5nIGZsYWdzIHRvIHByZXZlbnQgc3BhbVxyXG5sZXQgaGFzV2FybmVkTGVnYWN5Q2FjaGVSZXF1ZXN0cyA9IGZhbHNlO1xyXG5sZXQgaGFzV2FybmVkTGVnYWN5QXBpUmVxdWVzdHMgPSBmYWxzZTtcclxubGV0IGhhc1dhcm5lZExlZ2FjeUNhY2hlSGl0cyA9IGZhbHNlO1xyXG5sZXQgaGFzV2FybmVkTGVnYWN5Q2FjaGVFcnJvcnMgPSBmYWxzZTtcclxuXHJcbi8qKlxyXG4gKiBTYWZlIGhlbHBlciBmb3IgbmVzdGVkIHByb3BlcnR5IHRyYXZlcnNhbCAocmVzZXJ2ZWQgZm9yIGZ1dHVyZSB1c2UpXHJcbiAqL1xyXG5jb25zdCBfZ2V0TmVzdGVkVmFsdWUgPSAob2JqOiB1bmtub3duLCBwYXRoOiBzdHJpbmdbXSk6IHVua25vd24gPT4ge1xyXG4gIGxldCBjdXJyZW50ID0gb2JqO1xyXG4gIGZvciAoY29uc3Qga2V5IG9mIHBhdGgpIHtcclxuICAgIGlmIChjdXJyZW50ICYmIHR5cGVvZiBjdXJyZW50ID09PSAnb2JqZWN0JyAmJiBrZXkgaW4gY3VycmVudCkge1xyXG4gICAgICBjdXJyZW50ID0gKGN1cnJlbnQgYXMgUmVjb3JkPHN0cmluZywgdW5rbm93bj4pW2tleV07XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICByZXR1cm4gdW5kZWZpbmVkO1xyXG4gICAgfVxyXG4gIH1cclxuICByZXR1cm4gY3VycmVudDtcclxufTtcclxuXHJcbi8qKlxyXG4gKiBTYWZlbHkgZXh0cmFjdCB0b3RhbCByZXF1ZXN0cyBmcm9tIHZhcmlvdXMgbWV0cmljcyBvYmplY3Qgc3RydWN0dXJlc1xyXG4gKiBcclxuICogUHJpb3JpdHkgb3JkZXI6XHJcbiAqIDEuIG9iaj8uY2FjaGU/LnRvdGFsX3JlcXVlc3RzIChjYW5vbmljYWwpXHJcbiAqIDIuIG9iaj8uY2FjaGVfcGVyZm9ybWFuY2U/LnRvdGFsX3JlcXVlc3RzIChsZWdhY3kgbWFwcGluZylcclxuICogMy4gb2JqPy50b3RhbF9yZXF1ZXN0cyAoZmxhdCBsZWdhY3kpXHJcbiAqIDQuIERlZmF1bHQ6IDBcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRUb3RhbFJlcXVlc3RzKG9iajogdW5rbm93bik6IG51bWJlciB7XHJcbiAgaWYgKCFvYmogfHwgdHlwZW9mIG9iaiAhPT0gJ29iamVjdCcpIHtcclxuICAgIHJldHVybiAwO1xyXG4gIH1cclxuXHJcbiAgY29uc3QgbWV0cmljc09iaiA9IG9iaiBhcyBNZXRyaWNzTGlrZU9iamVjdDtcclxuXHJcbiAgLy8gUHJpb3JpdHkgMTogQ2Fub25pY2FsIGNhY2hlLnRvdGFsX3JlcXVlc3RzXHJcbiAgaWYgKHR5cGVvZiBtZXRyaWNzT2JqPy5jYWNoZT8udG90YWxfcmVxdWVzdHMgPT09ICdudW1iZXInKSB7XHJcbiAgICByZXR1cm4gbWV0cmljc09iai5jYWNoZS50b3RhbF9yZXF1ZXN0cztcclxuICB9XHJcblxyXG4gIC8vIFByaW9yaXR5IDI6IExlZ2FjeSBjYWNoZV9wZXJmb3JtYW5jZS50b3RhbF9yZXF1ZXN0c1xyXG4gIGlmICh0eXBlb2YgbWV0cmljc09iaj8uY2FjaGVfcGVyZm9ybWFuY2U/LnRvdGFsX3JlcXVlc3RzID09PSAnbnVtYmVyJykge1xyXG4gICAgaWYgKCFoYXNXYXJuZWRMZWdhY3lDYWNoZVJlcXVlc3RzICYmIHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAnZGV2ZWxvcG1lbnQnKSB7XHJcbiAgICAgIGhhc1dhcm5lZExlZ2FjeUNhY2hlUmVxdWVzdHMgPSB0cnVlO1xyXG4gICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY29uc29sZVxyXG4gICAgICBjb25zb2xlLmRlYnVnKCdbTWV0cmljc0NvbXBhdF0gVXNpbmcgbGVnYWN5IGNhY2hlX3BlcmZvcm1hbmNlLnRvdGFsX3JlcXVlc3RzLCBjb25zaWRlciBtaWdyYXRpbmcgdG8gY2FjaGUudG90YWxfcmVxdWVzdHMnKTtcclxuICAgIH1cclxuICAgIHJldHVybiBtZXRyaWNzT2JqLmNhY2hlX3BlcmZvcm1hbmNlLnRvdGFsX3JlcXVlc3RzO1xyXG4gIH1cclxuXHJcbiAgLy8gUHJpb3JpdHkgMzogRmxhdCBsZWdhY3kgc3RydWN0dXJlXHJcbiAgaWYgKHR5cGVvZiBtZXRyaWNzT2JqPy50b3RhbF9yZXF1ZXN0cyA9PT0gJ251bWJlcicpIHtcclxuICAgIGlmICghaGFzV2FybmVkTGVnYWN5Q2FjaGVSZXF1ZXN0cyAmJiBwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ2RldmVsb3BtZW50Jykge1xyXG4gICAgICBoYXNXYXJuZWRMZWdhY3lDYWNoZVJlcXVlc3RzID0gdHJ1ZTtcclxuICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbnNvbGVcclxuICAgICAgY29uc29sZS5kZWJ1ZygnW01ldHJpY3NDb21wYXRdIFVzaW5nIGZsYXQgdG90YWxfcmVxdWVzdHMsIGNvbnNpZGVyIG1pZ3JhdGluZyB0byBjYWNoZS50b3RhbF9yZXF1ZXN0cycpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIG1ldHJpY3NPYmoudG90YWxfcmVxdWVzdHM7XHJcbiAgfVxyXG5cclxuICAvLyBEZWZhdWx0OiAwXHJcbiAgcmV0dXJuIDA7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBTYWZlbHkgZXh0cmFjdCBzdWNjZXNzIHJlcXVlc3RzIGZyb20gQVBJIG1ldHJpY3NcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRTdWNjZXNzUmVxdWVzdHMob2JqOiB1bmtub3duKTogbnVtYmVyIHtcclxuICBpZiAoIW9iaiB8fCB0eXBlb2Ygb2JqICE9PSAnb2JqZWN0Jykge1xyXG4gICAgcmV0dXJuIDA7XHJcbiAgfVxyXG5cclxuICBjb25zdCBtZXRyaWNzT2JqID0gb2JqIGFzIE1ldHJpY3NMaWtlT2JqZWN0O1xyXG5cclxuICAvLyBQcmlvcml0eSAxOiBDYW5vbmljYWwgYXBpLnN1Y2Nlc3NfcmVxdWVzdHNcclxuICBpZiAodHlwZW9mIG1ldHJpY3NPYmo/LmFwaT8uc3VjY2Vzc19yZXF1ZXN0cyA9PT0gJ251bWJlcicpIHtcclxuICAgIHJldHVybiBtZXRyaWNzT2JqLmFwaS5zdWNjZXNzX3JlcXVlc3RzO1xyXG4gIH1cclxuXHJcbiAgLy8gUHJpb3JpdHkgMjogQ2FsY3VsYXRlIGZyb20gdG90YWwgLSBlcnJvcnNcclxuICBjb25zdCB0b3RhbFJlcXVlc3RzID0gbWV0cmljc09iaj8uYXBpPy50b3RhbF9yZXF1ZXN0cyB8fCAwO1xyXG4gIGNvbnN0IGVycm9yUmVxdWVzdHMgPSBtZXRyaWNzT2JqPy5hcGk/LmVycm9yX3JlcXVlc3RzIHx8IDA7XHJcbiAgaWYgKHRvdGFsUmVxdWVzdHMgPiAwKSB7XHJcbiAgICByZXR1cm4gTWF0aC5tYXgoMCwgdG90YWxSZXF1ZXN0cyAtIGVycm9yUmVxdWVzdHMpO1xyXG4gIH1cclxuXHJcbiAgcmV0dXJuIDA7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBTYWZlbHkgZXh0cmFjdCBlcnJvciByZXF1ZXN0cyBmcm9tIEFQSSBtZXRyaWNzXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gZ2V0RXJyb3JSZXF1ZXN0cyhvYmo6IHVua25vd24pOiBudW1iZXIge1xyXG4gIGlmICghb2JqIHx8IHR5cGVvZiBvYmogIT09ICdvYmplY3QnKSB7XHJcbiAgICByZXR1cm4gMDtcclxuICB9XHJcblxyXG4gIGNvbnN0IG1ldHJpY3NPYmogPSBvYmogYXMgTWV0cmljc0xpa2VPYmplY3Q7XHJcblxyXG4gIC8vIFByaW9yaXR5IDE6IENhbm9uaWNhbCBhcGkuZXJyb3JfcmVxdWVzdHNcclxuICBpZiAodHlwZW9mIG1ldHJpY3NPYmo/LmFwaT8uZXJyb3JfcmVxdWVzdHMgPT09ICdudW1iZXInKSB7XHJcbiAgICByZXR1cm4gbWV0cmljc09iai5hcGkuZXJyb3JfcmVxdWVzdHM7XHJcbiAgfVxyXG5cclxuICAvLyBQcmlvcml0eSAyOiBBZ2dyZWdhdGUgZnJvbSBsZWdhY3kgYXBpX3BlcmZvcm1hbmNlXHJcbiAgaWYgKG1ldHJpY3NPYmo/LmFwaV9wZXJmb3JtYW5jZSAmJiB0eXBlb2YgbWV0cmljc09iai5hcGlfcGVyZm9ybWFuY2UgPT09ICdvYmplY3QnKSB7XHJcbiAgICBsZXQgdG90YWxFcnJvcnMgPSAwO1xyXG4gICAgT2JqZWN0LnZhbHVlcyhtZXRyaWNzT2JqLmFwaV9wZXJmb3JtYW5jZSkuZm9yRWFjaChzdGF0cyA9PiB7XHJcbiAgICAgIGlmIChzdGF0cyAmJiB0eXBlb2Ygc3RhdHMgPT09ICdvYmplY3QnKSB7XHJcbiAgICAgICAgY29uc3Qgc3RhdHNPYmogPSBzdGF0cyBhcyBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPjtcclxuICAgICAgICB0b3RhbEVycm9ycyArPSB0eXBlb2Ygc3RhdHNPYmouZXJyb3JzID09PSAnbnVtYmVyJyA/IHN0YXRzT2JqLmVycm9ycyA6IDA7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gICAgXHJcbiAgICBpZiAodG90YWxFcnJvcnMgPiAwICYmICFoYXNXYXJuZWRMZWdhY3lBcGlSZXF1ZXN0cyAmJiBwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ2RldmVsb3BtZW50Jykge1xyXG4gICAgICBoYXNXYXJuZWRMZWdhY3lBcGlSZXF1ZXN0cyA9IHRydWU7XHJcbiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jb25zb2xlXHJcbiAgICAgIGNvbnNvbGUuZGVidWcoJ1tNZXRyaWNzQ29tcGF0XSBBZ2dyZWdhdGluZyBsZWdhY3kgYXBpX3BlcmZvcm1hbmNlIGVycm9ycywgY29uc2lkZXIgY2Fub25pY2FsIGFwaS5lcnJvcl9yZXF1ZXN0cycpO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICByZXR1cm4gdG90YWxFcnJvcnM7XHJcbiAgfVxyXG5cclxuICByZXR1cm4gMDtcclxufVxyXG5cclxuLyoqXHJcbiAqIFNhZmVseSBjYWxjdWxhdGUgQVBJIGVycm9yIHJhdGUgd2l0aCBzYWZlIGRpdmlzaW9uXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gZ2V0QXBpRXJyb3JSYXRlKG9iajogdW5rbm93bik6IG51bWJlciB7XHJcbiAgY29uc3QgdG90YWxSZXF1ZXN0cyA9IGdldEFwaVRvdGFsUmVxdWVzdHMob2JqKTtcclxuICBjb25zdCBlcnJvclJlcXVlc3RzID0gZ2V0RXJyb3JSZXF1ZXN0cyhvYmopO1xyXG4gIFxyXG4gIGlmICh0b3RhbFJlcXVlc3RzID09PSAwKSB7XHJcbiAgICByZXR1cm4gMDsgLy8gTm8gcmVxdWVzdHMgPSBubyBlcnJvciByYXRlXHJcbiAgfVxyXG4gIFxyXG4gIHJldHVybiAoZXJyb3JSZXF1ZXN0cyAvIHRvdGFsUmVxdWVzdHMpICogMTAwOyAvLyBSZXR1cm4gYXMgcGVyY2VudGFnZVxyXG59XHJcblxyXG4vKipcclxuICogR2V0IHRvdGFsIEFQSSByZXF1ZXN0cyAoZGlmZmVyZW50IGZyb20gY2FjaGUgdG90YWxfcmVxdWVzdHMpXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gZ2V0QXBpVG90YWxSZXF1ZXN0cyhvYmo6IHVua25vd24pOiBudW1iZXIge1xyXG4gIGlmICghb2JqIHx8IHR5cGVvZiBvYmogIT09ICdvYmplY3QnKSB7XHJcbiAgICByZXR1cm4gMDtcclxuICB9XHJcblxyXG4gIGNvbnN0IG1ldHJpY3NPYmogPSBvYmogYXMgTWV0cmljc0xpa2VPYmplY3Q7XHJcblxyXG4gIC8vIFByaW9yaXR5IDE6IENhbm9uaWNhbCBhcGkudG90YWxfcmVxdWVzdHNcclxuICBpZiAodHlwZW9mIG1ldHJpY3NPYmo/LmFwaT8udG90YWxfcmVxdWVzdHMgPT09ICdudW1iZXInKSB7XHJcbiAgICByZXR1cm4gbWV0cmljc09iai5hcGkudG90YWxfcmVxdWVzdHM7XHJcbiAgfVxyXG5cclxuICAvLyBQcmlvcml0eSAyOiBBZ2dyZWdhdGUgZnJvbSBsZWdhY3kgYXBpX3BlcmZvcm1hbmNlXHJcbiAgaWYgKG1ldHJpY3NPYmo/LmFwaV9wZXJmb3JtYW5jZSAmJiB0eXBlb2YgbWV0cmljc09iai5hcGlfcGVyZm9ybWFuY2UgPT09ICdvYmplY3QnKSB7XHJcbiAgICBsZXQgdG90YWxSZXF1ZXN0cyA9IDA7XHJcbiAgICBPYmplY3QudmFsdWVzKG1ldHJpY3NPYmouYXBpX3BlcmZvcm1hbmNlKS5mb3JFYWNoKHN0YXRzID0+IHtcclxuICAgICAgaWYgKHN0YXRzICYmIHR5cGVvZiBzdGF0cyA9PT0gJ29iamVjdCcpIHtcclxuICAgICAgICBjb25zdCBzdGF0c09iaiA9IHN0YXRzIGFzIFJlY29yZDxzdHJpbmcsIHVua25vd24+O1xyXG4gICAgICAgIHRvdGFsUmVxdWVzdHMgKz0gdHlwZW9mIHN0YXRzT2JqLnRvdGFsX2NhbGxzID09PSAnbnVtYmVyJyA/IHN0YXRzT2JqLnRvdGFsX2NhbGxzIDogXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlb2Ygc3RhdHNPYmoudG90YWxfcmVxdWVzdHMgPT09ICdudW1iZXInID8gc3RhdHNPYmoudG90YWxfcmVxdWVzdHMgOiAwO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICAgIFxyXG4gICAgaWYgKHRvdGFsUmVxdWVzdHMgPiAwICYmICFoYXNXYXJuZWRMZWdhY3lBcGlSZXF1ZXN0cyAmJiBwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ2RldmVsb3BtZW50Jykge1xyXG4gICAgICBoYXNXYXJuZWRMZWdhY3lBcGlSZXF1ZXN0cyA9IHRydWU7XHJcbiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jb25zb2xlXHJcbiAgICAgIGNvbnNvbGUuZGVidWcoJ1tNZXRyaWNzQ29tcGF0XSBBZ2dyZWdhdGluZyBsZWdhY3kgYXBpX3BlcmZvcm1hbmNlIHRvdGFsX2NhbGxzLCBjb25zaWRlciBjYW5vbmljYWwgYXBpLnRvdGFsX3JlcXVlc3RzJyk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIHJldHVybiB0b3RhbFJlcXVlc3RzO1xyXG4gIH1cclxuXHJcbiAgcmV0dXJuIDA7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBTYWZlbHkgZXh0cmFjdCBhdmVyYWdlIGxhdGVuY3kgZnJvbSBBUEkgbWV0cmljc1xyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGdldEF2ZXJhZ2VMYXRlbmN5TXMob2JqOiB1bmtub3duKTogbnVtYmVyIHtcclxuICBpZiAoIW9iaiB8fCB0eXBlb2Ygb2JqICE9PSAnb2JqZWN0Jykge1xyXG4gICAgcmV0dXJuIDA7XHJcbiAgfVxyXG5cclxuICBjb25zdCBtZXRyaWNzT2JqID0gb2JqIGFzIE1ldHJpY3NMaWtlT2JqZWN0O1xyXG5cclxuICAvLyBQcmlvcml0eSAxOiBDYW5vbmljYWwgYXBpLmF2Z19sYXRlbmN5X21zXHJcbiAgaWYgKHR5cGVvZiBtZXRyaWNzT2JqPy5hcGk/LmF2Z19sYXRlbmN5X21zID09PSAnbnVtYmVyJykge1xyXG4gICAgcmV0dXJuIG1ldHJpY3NPYmouYXBpLmF2Z19sYXRlbmN5X21zO1xyXG4gIH1cclxuXHJcbiAgLy8gUHJpb3JpdHkgMjogQXZlcmFnZSBmcm9tIGxlZ2FjeSBhcGlfcGVyZm9ybWFuY2VcclxuICBpZiAobWV0cmljc09iaj8uYXBpX3BlcmZvcm1hbmNlICYmIHR5cGVvZiBtZXRyaWNzT2JqLmFwaV9wZXJmb3JtYW5jZSA9PT0gJ29iamVjdCcpIHtcclxuICAgIGxldCB0b3RhbExhdGVuY3kgPSAwO1xyXG4gICAgbGV0IGVuZHBvaW50Q291bnQgPSAwO1xyXG4gICAgXHJcbiAgICBPYmplY3QudmFsdWVzKG1ldHJpY3NPYmouYXBpX3BlcmZvcm1hbmNlKS5mb3JFYWNoKHN0YXRzID0+IHtcclxuICAgICAgaWYgKHN0YXRzICYmIHR5cGVvZiBzdGF0cyA9PT0gJ29iamVjdCcpIHtcclxuICAgICAgICBjb25zdCBzdGF0c09iaiA9IHN0YXRzIGFzIFJlY29yZDxzdHJpbmcsIHVua25vd24+O1xyXG4gICAgICAgIGNvbnN0IGF2Z1RpbWUgPSB0eXBlb2Ygc3RhdHNPYmouYXZnX3RpbWVfbXMgPT09ICdudW1iZXInID8gc3RhdHNPYmouYXZnX3RpbWVfbXMgOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlb2Ygc3RhdHNPYmouYXZnX2xhdGVuY3lfbXMgPT09ICdudW1iZXInID8gc3RhdHNPYmouYXZnX2xhdGVuY3lfbXMgOiAwO1xyXG4gICAgICAgIGlmIChhdmdUaW1lID4gMCkge1xyXG4gICAgICAgICAgdG90YWxMYXRlbmN5ICs9IGF2Z1RpbWU7XHJcbiAgICAgICAgICBlbmRwb2ludENvdW50Kys7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICAgIFxyXG4gICAgcmV0dXJuIGVuZHBvaW50Q291bnQgPiAwID8gdG90YWxMYXRlbmN5IC8gZW5kcG9pbnRDb3VudCA6IDA7XHJcbiAgfVxyXG5cclxuICByZXR1cm4gMDtcclxufVxyXG5cclxuLyoqXHJcbiAqIFNhZmVseSBleHRyYWN0IGNhY2hlIGhpdHNcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRDYWNoZUhpdHMob2JqOiB1bmtub3duKTogbnVtYmVyIHtcclxuICBpZiAoIW9iaiB8fCB0eXBlb2Ygb2JqICE9PSAnb2JqZWN0Jykge1xyXG4gICAgcmV0dXJuIDA7XHJcbiAgfVxyXG5cclxuICBjb25zdCBtZXRyaWNzT2JqID0gb2JqIGFzIE1ldHJpY3NMaWtlT2JqZWN0O1xyXG5cclxuICAvLyBQcmlvcml0eSAxOiBDYW5vbmljYWwgY2FjaGUuaGl0c1xyXG4gIGlmICh0eXBlb2YgbWV0cmljc09iaj8uY2FjaGU/LmhpdHMgPT09ICdudW1iZXInKSB7XHJcbiAgICByZXR1cm4gbWV0cmljc09iai5jYWNoZS5oaXRzO1xyXG4gIH1cclxuXHJcbiAgLy8gUHJpb3JpdHkgMjogTGVnYWN5IGNhY2hlX3BlcmZvcm1hbmNlLmhpdHNcclxuICBpZiAodHlwZW9mIG1ldHJpY3NPYmo/LmNhY2hlX3BlcmZvcm1hbmNlPy5oaXRzID09PSAnbnVtYmVyJykge1xyXG4gICAgaWYgKCFoYXNXYXJuZWRMZWdhY3lDYWNoZUhpdHMgJiYgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdkZXZlbG9wbWVudCcpIHtcclxuICAgICAgaGFzV2FybmVkTGVnYWN5Q2FjaGVIaXRzID0gdHJ1ZTtcclxuICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbnNvbGVcclxuICAgICAgY29uc29sZS5kZWJ1ZygnW01ldHJpY3NDb21wYXRdIFVzaW5nIGxlZ2FjeSBjYWNoZV9wZXJmb3JtYW5jZS5oaXRzLCBjb25zaWRlciBtaWdyYXRpbmcgdG8gY2FjaGUuaGl0cycpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIG1ldHJpY3NPYmouY2FjaGVfcGVyZm9ybWFuY2UuaGl0cztcclxuICB9XHJcblxyXG4gIHJldHVybiAwO1xyXG59XHJcblxyXG4vKipcclxuICogU2FmZWx5IGV4dHJhY3QgY2FjaGUgbWlzc2VzXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gZ2V0Q2FjaGVNaXNzZXMob2JqOiB1bmtub3duKTogbnVtYmVyIHtcclxuICBpZiAoIW9iaiB8fCB0eXBlb2Ygb2JqICE9PSAnb2JqZWN0Jykge1xyXG4gICAgcmV0dXJuIDA7XHJcbiAgfVxyXG5cclxuICBjb25zdCBtZXRyaWNzT2JqID0gb2JqIGFzIE1ldHJpY3NMaWtlT2JqZWN0O1xyXG5cclxuICAvLyBQcmlvcml0eSAxOiBDYW5vbmljYWwgY2FjaGUubWlzc2VzXHJcbiAgaWYgKHR5cGVvZiBtZXRyaWNzT2JqPy5jYWNoZT8ubWlzc2VzID09PSAnbnVtYmVyJykge1xyXG4gICAgcmV0dXJuIG1ldHJpY3NPYmouY2FjaGUubWlzc2VzO1xyXG4gIH1cclxuXHJcbiAgLy8gUHJpb3JpdHkgMjogTGVnYWN5IGNhY2hlX3BlcmZvcm1hbmNlLm1pc3Nlc1xyXG4gIGlmICh0eXBlb2YgbWV0cmljc09iaj8uY2FjaGVfcGVyZm9ybWFuY2U/Lm1pc3NlcyA9PT0gJ251bWJlcicpIHtcclxuICAgIHJldHVybiBtZXRyaWNzT2JqLmNhY2hlX3BlcmZvcm1hbmNlLm1pc3NlcztcclxuICB9XHJcblxyXG4gIHJldHVybiAwO1xyXG59XHJcblxyXG4vKipcclxuICogU2FmZWx5IGV4dHJhY3QgY2FjaGUgZXJyb3JzXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gZ2V0Q2FjaGVFcnJvcnMob2JqOiB1bmtub3duKTogbnVtYmVyIHtcclxuICBpZiAoIW9iaiB8fCB0eXBlb2Ygb2JqICE9PSAnb2JqZWN0Jykge1xyXG4gICAgcmV0dXJuIDA7XHJcbiAgfVxyXG5cclxuICBjb25zdCBtZXRyaWNzT2JqID0gb2JqIGFzIE1ldHJpY3NMaWtlT2JqZWN0O1xyXG5cclxuICAvLyBQcmlvcml0eSAxOiBDYW5vbmljYWwgY2FjaGUuZXJyb3JzXHJcbiAgaWYgKHR5cGVvZiBtZXRyaWNzT2JqPy5jYWNoZT8uZXJyb3JzID09PSAnbnVtYmVyJykge1xyXG4gICAgcmV0dXJuIG1ldHJpY3NPYmouY2FjaGUuZXJyb3JzO1xyXG4gIH1cclxuXHJcbiAgLy8gUHJpb3JpdHkgMjogTGVnYWN5IGNhY2hlX3BlcmZvcm1hbmNlLmVycm9yc1xyXG4gIGlmICh0eXBlb2YgbWV0cmljc09iaj8uY2FjaGVfcGVyZm9ybWFuY2U/LmVycm9ycyA9PT0gJ251bWJlcicpIHtcclxuICAgIGlmICghaGFzV2FybmVkTGVnYWN5Q2FjaGVFcnJvcnMgJiYgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdkZXZlbG9wbWVudCcpIHtcclxuICAgICAgaGFzV2FybmVkTGVnYWN5Q2FjaGVFcnJvcnMgPSB0cnVlO1xyXG4gICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY29uc29sZVxyXG4gICAgICBjb25zb2xlLmRlYnVnKCdbTWV0cmljc0NvbXBhdF0gVXNpbmcgbGVnYWN5IGNhY2hlX3BlcmZvcm1hbmNlLmVycm9ycywgY29uc2lkZXIgbWlncmF0aW5nIHRvIGNhY2hlLmVycm9ycycpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIG1ldHJpY3NPYmouY2FjaGVfcGVyZm9ybWFuY2UuZXJyb3JzO1xyXG4gIH1cclxuXHJcbiAgcmV0dXJuIDA7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBSZS1leHBvcnQgZ2V0Q2FjaGVIaXRSYXRlIGZyb20gaGVhbHRoQWNjZXNzb3JzIGZvciBjb25zaXN0ZW5jeVxyXG4gKiAoQ2FjaGUgaGl0IHJhdGUgY2FuIGNvbWUgZnJvbSBlaXRoZXIgaGVhbHRoIG9yIG1ldHJpY3MgY29udGV4dHMpXHJcbiAqL1xyXG5leHBvcnQgeyBnZXRDYWNoZUhpdFJhdGUgfSBmcm9tICcuL2hlYWx0aEFjY2Vzc29ycyc7Il0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQWdWQSxJQUFBQSxnQkFBQSxHQUFBQyxPQUFBO0FBaFZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUE0QkE7QUFDQSxJQUFJQyw0QkFBNEIsR0FBRyxLQUFLO0FBQ3hDLElBQUlDLDBCQUEwQixHQUFHLEtBQUs7QUFDdEMsSUFBSUMsd0JBQXdCLEdBQUcsS0FBSztBQUNwQyxJQUFJQywwQkFBMEIsR0FBRyxLQUFLOztBQUV0QztBQUNBO0FBQ0E7QUFDQSxNQUFNQyxlQUFlLEdBQUdBLENBQUNDLEdBQVksRUFBRUMsSUFBYyxLQUFjO0VBQ2pFLElBQUlDLE9BQU8sR0FBR0YsR0FBRztFQUNqQixLQUFLLE1BQU1HLEdBQUcsSUFBSUYsSUFBSSxFQUFFO0lBQ3RCLElBQUlDLE9BQU8sSUFBSSxPQUFPQSxPQUFPLEtBQUssUUFBUSxJQUFJQyxHQUFHLElBQUlELE9BQU8sRUFBRTtNQUM1REEsT0FBTyxHQUFJQSxPQUFPLENBQTZCQyxHQUFHLENBQUM7SUFDckQsQ0FBQyxNQUFNO01BQ0wsT0FBT0MsU0FBUztJQUNsQjtFQUNGO0VBQ0EsT0FBT0YsT0FBTztBQUNoQixDQUFDOztBQUVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPLFNBQVNHLGdCQUFnQkEsQ0FBQ0wsR0FBWSxFQUFVO0VBQ3JELElBQUksQ0FBQ0EsR0FBRyxJQUFJLE9BQU9BLEdBQUcsS0FBSyxRQUFRLEVBQUU7SUFDbkMsT0FBTyxDQUFDO0VBQ1Y7RUFFQSxNQUFNTSxVQUFVLEdBQUdOLEdBQXdCOztFQUUzQztFQUNBLElBQUksT0FBT00sVUFBVSxFQUFFQyxLQUFLLEVBQUVDLGNBQWMsS0FBSyxRQUFRLEVBQUU7SUFDekQsT0FBT0YsVUFBVSxDQUFDQyxLQUFLLENB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