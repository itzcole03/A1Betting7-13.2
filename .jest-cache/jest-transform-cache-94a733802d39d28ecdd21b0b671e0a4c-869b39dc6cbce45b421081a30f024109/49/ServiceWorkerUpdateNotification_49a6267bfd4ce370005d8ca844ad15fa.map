{"file":"C:\\Users\\bcmad\\Downloads\\A1Betting7-13.2\\frontend\\src\\components\\core\\ServiceWorkerUpdateNotification.tsx","mappings":"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","names":[],"sources":["C:\\Users\\bcmad\\Downloads\\A1Betting7-13.2\\frontend\\src\\components\\core\\ServiceWorkerUpdateNotification.tsx"],"sourcesContent":["/**\r\n * Service Worker Update Component - React 19 Best Practices\r\n *\r\n * Features:\r\n * - useOptimistic for instant UI updates\r\n * - Modern notification patterns\r\n * - Smooth animations with Framer Motion\r\n */\r\n\r\nimport { AnimatePresence, motion } from 'framer-motion';\r\nimport React, { useActionState, useState } from 'react';\r\nimport { useServiceWorkerUpdate } from '../../services/serviceWorkerManager';\r\n\r\ninterface ServiceWorkerUpdateProps {\r\n  className?: string;\r\n}\r\n\r\n// Action for applying service worker updates\r\nasync function applyUpdateAction(\r\n  previousState: { updating: boolean; error: string | null },\r\n  formData: FormData\r\n) {\r\n  try {\r\n    const { serviceWorkerManager } = await import('../../services/serviceWorkerManager');\r\n    serviceWorkerManager.applyUpdate();\r\n\r\n    return {\r\n      updating: true,\r\n      error: null,\r\n    };\r\n  } catch (error) {\r\n    return {\r\n      updating: false,\r\n      error: error instanceof Error ? error.message : 'Update failed',\r\n    };\r\n  }\r\n}\r\n\r\nexport const ServiceWorkerUpdateNotification: React.FC<ServiceWorkerUpdateProps> = ({\r\n  className = '',\r\n}) => {\r\n  const { hasUpdate, isInstalling, error } = useServiceWorkerUpdate();\r\n\r\n  // Standard optimistic UI state\r\n  const [optimisticState, setOptimisticState] = useState<{\r\n    updating: boolean;\r\n    error: string | null;\r\n  }>({ updating: false, error: null });\r\n\r\n  // React 19: useActionState for form actions\r\n  const [actionState, submitAction, isPending] = useActionState(applyUpdateAction, {\r\n    updating: false,\r\n    error: null,\r\n  });\r\n\r\n  const handleUpdate = () => {\r\n    // Optimistically update UI\r\n    setOptimisticState({ updating: true, error: null });\r\n\r\n    // Submit the actual action\r\n    const formData = new FormData();\r\n    submitAction(formData);\r\n  };\r\n\r\n  if (!hasUpdate && !isInstalling && !error) {\r\n    return null;\r\n  }\r\n\r\n  return (\r\n    <AnimatePresence>\r\n      {(hasUpdate || isInstalling || error) && (\r\n        <motion.div\r\n          initial={{ opacity: 0, y: -50 }}\r\n          animate={{ opacity: 1, y: 0 }}\r\n          exit={{ opacity: 0, y: -50 }}\r\n          transition={{ duration: 0.3, ease: 'easeInOut' }}\r\n          className={`fixed top-4 right-4 z-50 max-w-sm ${className}`}\r\n        >\r\n          <div className='bg-gradient-to-br from-blue-600 to-purple-700 text-white rounded-lg shadow-lg border border-blue-500/20 backdrop-blur-sm'>\r\n            <div className='p-4'>\r\n              {error && (\r\n                <motion.div\r\n                  initial={{ scale: 0.95 }}\r\n                  animate={{ scale: 1 }}\r\n                  className='flex items-start space-x-3'\r\n                >\r\n                  <div className='flex-shrink-0'>\r\n                    <svg className='w-5 h-5 text-red-400' fill='currentColor' viewBox='0 0 20 20'>\r\n                      <path\r\n                        fillRule='evenodd'\r\n                        d='M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z'\r\n                        clipRule='evenodd'\r\n                      />\r\n                    </svg>\r\n                  </div>\r\n                  <div className='flex-1'>\r\n                    <h3 className='text-sm font-medium'>Service Worker Error</h3>\r\n                    <p className='mt-1 text-xs text-white/80'>{error}</p>\r\n                  </div>\r\n                </motion.div>\r\n              )}\r\n\r\n              {isInstalling && (\r\n                <motion.div\r\n                  initial={{ scale: 0.95 }}\r\n                  animate={{ scale: 1 }}\r\n                  className='flex items-start space-x-3'\r\n                >\r\n                  <div className='flex-shrink-0'>\r\n                    <motion.div\r\n                      animate={{ rotate: 360 }}\r\n                      transition={{ duration: 2, repeat: Infinity, ease: 'linear' }}\r\n                    >\r\n                      <svg\r\n                        className='w-5 h-5 text-blue-400'\r\n                        fill='none'\r\n                        stroke='currentColor'\r\n                        viewBox='0 0 24 24'\r\n                      >\r\n                        <path\r\n                          strokeLinecap='round'\r\n                          strokeLinejoin='round'\r\n                          strokeWidth={2}\r\n                          d='M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15'\r\n                        />\r\n                      </svg>\r\n                    </motion.div>\r\n                  </div>\r\n                  <div className='flex-1'>\r\n                    <h3 className='text-sm font-medium'>Installing Update</h3>\r\n                    <p className='mt-1 text-xs text-white/80'>\r\n                      {optimisticState.updating\r\n                        ? 'Applying update...'\r\n                        : 'A new version is being installed.'}\r\n                    </p>\r\n                  </div>\r\n                </motion.div>\r\n              )}\r\n\r\n              {hasUpdate && !isInstalling && (\r\n                <motion.div\r\n                  initial={{ scale: 0.95 }}\r\n                  animate={{ scale: 1 }}\r\n                  className='flex items-start space-x-3'\r\n                >\r\n                  <div className='flex-shrink-0'>\r\n                    <svg className='w-5 h-5 text-green-400' fill='currentColor' viewBox='0 0 20 20'>\r\n                      <path\r\n                        fillRule='evenodd'\r\n                        d='M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z'\r\n                        clipRule='evenodd'\r\n                      />\r\n                    </svg>\r\n                  </div>\r\n                  <div className='flex-1'>\r\n                    <h3 className='text-sm font-medium'>Update Available</h3>\r\n                    <p className='mt-1 text-xs text-white/80'>\r\n                      A new version with improvements is ready.\r\n                    </p>\r\n                    <div className='mt-3 flex space-x-2'>\r\n                      <motion.button\r\n                        whileHover={{ scale: 1.02 }}\r\n                        whileTap={{ scale: 0.98 }}\r\n                        onClick={handleUpdate}\r\n                        disabled={isPending || optimisticState.updating}\r\n                        className='px-3 py-1.5 bg-white/20 hover:bg-white/30 rounded-md text-xs font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed'\r\n                      >\r\n                        {isPending || optimisticState.updating ? (\r\n                          <span className='flex items-center space-x-1'>\r\n                            <motion.div\r\n                              animate={{ rotate: 360 }}\r\n                              transition={{ duration: 1, repeat: Infinity, ease: 'linear' }}\r\n                              className='w-3 h-3'\r\n                            >\r\n                              <svg fill='currentColor' viewBox='0 0 20 20'>\r\n                                <path\r\n                                  fillRule='evenodd'\r\n                                  d='M4 2a1 1 0 011 1v2.101a7.002 7.002 0 0111.601 2.566 1 1 0 11-1.885.666A5.002 5.002 0 005.999 7H9a1 1 0 010 2H4a1 1 0 01-1-1V3a1 1 0 011-1zm.008 9.057a1 1 0 011.276.61A5.002 5.002 0 0014.001 13H11a1 1 0 110-2h5a1 1 0 011 1v5a1 1 0 11-2 0v-2.101a7.002 7.002 0 01-11.601-2.566 1 1 0 01.61-1.276z'\r\n                                  clipRule='evenodd'\r\n                                />\r\n                              </svg>\r\n                            </motion.div>\r\n                            <span>Updating...</span>\r\n                          </span>\r\n                        ) : (\r\n                          'Update Now'\r\n                        )}\r\n                      </motion.button>\r\n                      <motion.button\r\n                        whileHover={{ scale: 1.02 }}\r\n                        whileTap={{ scale: 0.98 }}\r\n                        className='px-3 py-1.5 bg-white/10 hover:bg-white/20 rounded-md text-xs font-medium transition-colors'\r\n                      >\r\n                        Later\r\n                      </motion.button>\r\n                    </div>\r\n                  </div>\r\n                </motion.div>\r\n              )}\r\n            </div>\r\n          </div>\r\n        </motion.div>\r\n      )}\r\n    </AnimatePresence>\r\n  );\r\n};\r\n\r\nexport default ServiceWorkerUpdateNotification;\r\n"],"version":3}