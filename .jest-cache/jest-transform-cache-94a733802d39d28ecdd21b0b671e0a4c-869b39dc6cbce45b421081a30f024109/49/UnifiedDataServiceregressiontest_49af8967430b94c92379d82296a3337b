beb3b2e148ba6c92746dfc455df2a733
"use strict";

var _UnifiedDataService = require("../UnifiedDataService");
/**
 * Test UnifiedDataService cacheData/getCachedData functionality
 * Prevents "cacheData is not a function" regression
 */

describe('UnifiedDataService Cache Methods', () => {
  let service;
  beforeEach(() => {
    // Get singleton instance
    service = _UnifiedDataService.UnifiedDataService.getInstance();
  });
  describe('cacheData method', () => {
    test('should be defined as a function', () => {
      expect(typeof service.cacheData).toBe('function');
    });
    test('should cache data successfully', async () => {
      const testData = {
        id: 'test-1',
        value: 42,
        timestamp: Date.now()
      };

      // Should not throw
      await expect(service.cacheData('test-key', testData)).resolves.toBeUndefined();
    });
  });
  describe('getCachedData method', () => {
    test('should be defined as a function', () => {
      expect(typeof service.getCachedData).toBe('function');
    });
    test('should return cached data', async () => {
      const testData = {
        id: 'test-2',
        value: 123,
        timestamp: Date.now()
      };

      // Cache the data
      await service.cacheData('test-key-2', testData);

      // Retrieve the data
      const retrieved = await service.getCachedData('test-key-2');
      expect(retrieved).toBeDefined();
      expect(retrieved).toEqual(testData);
      expect(retrieved?.id).toBe('test-2');
      expect(retrieved?.value).toBe(123);
    });
    test('should return undefined for unknown keys', async () => {
      const result = await service.getCachedData('non-existent-key');
      expect(result).toBeUndefined();
    });
  });
  describe('round-trip caching', () => {
    test('should preserve data integrity through cache cycle', async () => {
      const complexData = {
        user: 'test-user',
        preferences: {
          theme: 'dark',
          notifications: true,
          settings: {
            autoSave: false,
            syncEnabled: true
          }
        },
        metadata: {
          created: new Date().toISOString(),
          version: '1.2.3'
        }
      };

      // Cache complex object
      await service.cacheData('complex-data', complexData);

      // Retrieve and verify
      const retrieved = await service.getCachedData('complex-data');
      expect(retrieved).toEqual(complexData);
    });
    test('should handle different data types', async () => {
      // Test string
      await service.cacheData('string-test', 'hello world');
      const stringResult = await service.getCachedData('string-test');
      expect(stringResult).toBe('hello world');

      // Test number
      await service.cacheData('number-test', 42);
      const numberResult = await service.getCachedData('number-test');
      expect(numberResult).toBe(42);

      // Test boolean
      await service.cacheData('boolean-test', true);
      const booleanResult = await service.getCachedData('boolean-test');
      expect(booleanResult).toBe(true);

      // Test array
      const arrayData = [1, 2, 3, 'test'];
      await service.cacheData('array-test', arrayData);
      const arrayResult = await service.getCachedData('array-test');
      expect(arrayResult).toEqual(arrayData);
    });
  });
  describe('regression prevention', () => {
    test('should not throw "cacheData is not a function" error', async () => {
      // This test specifically targets the reported regression
      const testKey = 'regression-test';
      const testValue = {
        regression: false,
        fixed: true
      };

      // These calls should not throw "is not a function" errors
      await expect(service.cacheData(testKey, testValue)).resolves.not.toThrow();
      await expect(service.getCachedData(testKey)).resolves.toEqual(testValue);
    });
    test('should maintain method availability after multiple instantiations', () => {
      // Test that singleton pattern maintains method availability
      const service1 = _UnifiedDataService.UnifiedDataService.getInstance();
      const service2 = _UnifiedDataService.UnifiedDataService.getInstance();
      expect(service1).toBe(service2); // Same instance
      expect(typeof service1.cacheData).toBe('function');
      expect(typeof service2.cacheData).toBe('function');
      expect(typeof service1.getCachedData).toBe('function');
      expect(typeof service2.getCachedData).toBe('function');
    });
  });
  describe('error handling', () => {
    test('should handle null and undefined values gracefully', async () => {
      // Cache null value
      await service.cacheData('null-test', null);
      const nullResult = await service.getCachedData('null-test');
      expect(nullResult).toBeNull();

      // Cache undefined value
      await service.cacheData('undefined-test', undefined);
      const undefinedResult = await service.getCachedData('undefined-test');
      expect(undefinedResult).toBeUndefined();
    });
    test('should handle empty strings and objects', async () => {
      // Empty string
      await service.cacheData('empty-string', '');
      const emptyStringResult = await service.getCachedData('empty-string');
      expect(emptyStringResult).toBe('');

      // Empty object
      await service.cacheData('empty-object', {});
      const emptyObjectResult = await service.getCachedData('empty-object');
      expect(emptyObjectResult).toEqual({});

      // Empty array
      await service.cacheData('empty-array', []);
      const emptyArrayResult = await service.getCachedData('empty-array');
      expect(emptyArrayResult).toEqual([]);
    });
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfVW5pZmllZERhdGFTZXJ2aWNlIiwicmVxdWlyZSIsImRlc2NyaWJlIiwic2VydmljZSIsImJlZm9yZUVhY2giLCJVbmlmaWVkRGF0YVNlcnZpY2UiLCJnZXRJbnN0YW5jZSIsInRlc3QiLCJleHBlY3QiLCJjYWNoZURhdGEiLCJ0b0JlIiwidGVzdERhdGEiLCJpZCIsInZhbHVlIiwidGltZXN0YW1wIiwiRGF0ZSIsIm5vdyIsInJlc29sdmVzIiwidG9CZVVuZGVmaW5lZCIsImdldENhY2hlZERhdGEiLCJyZXRyaWV2ZWQiLCJ0b0JlRGVmaW5lZCIsInRvRXF1YWwiLCJyZXN1bHQiLCJjb21wbGV4RGF0YSIsInVzZXIiLCJwcmVmZXJlbmNlcyIsInRoZW1lIiwibm90aWZpY2F0aW9ucyIsInNldHRpbmdzIiwiYXV0b1NhdmUiLCJzeW5jRW5hYmxlZCIsIm1ldGFkYXRhIiwiY3JlYXRlZCIsInRvSVNPU3RyaW5nIiwidmVyc2lvbiIsInN0cmluZ1Jlc3VsdCIsIm51bWJlclJlc3VsdCIsImJvb2xlYW5SZXN1bHQiLCJhcnJheURhdGEiLCJhcnJheVJlc3VsdCIsInRlc3RLZXkiLCJ0ZXN0VmFsdWUiLCJyZWdyZXNzaW9uIiwiZml4ZWQiLCJub3QiLCJ0b1Rocm93Iiwic2VydmljZTEiLCJzZXJ2aWNlMiIsIm51bGxSZXN1bHQiLCJ0b0JlTnVsbCIsInVuZGVmaW5lZCIsInVuZGVmaW5lZFJlc3VsdCIsImVtcHR5U3RyaW5nUmVzdWx0IiwiZW1wdHlPYmplY3RSZXN1bHQiLCJlbXB0eUFycmF5UmVzdWx0Il0sInNvdXJjZXMiOlsiVW5pZmllZERhdGFTZXJ2aWNlLnJlZ3Jlc3Npb24udGVzdC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcclxuICogVGVzdCBVbmlmaWVkRGF0YVNlcnZpY2UgY2FjaGVEYXRhL2dldENhY2hlZERhdGEgZnVuY3Rpb25hbGl0eVxyXG4gKiBQcmV2ZW50cyBcImNhY2hlRGF0YSBpcyBub3QgYSBmdW5jdGlvblwiIHJlZ3Jlc3Npb25cclxuICovXHJcblxyXG5pbXBvcnQgeyBVbmlmaWVkRGF0YVNlcnZpY2UgfSBmcm9tICcuLi9VbmlmaWVkRGF0YVNlcnZpY2UnO1xyXG5cclxuaW50ZXJmYWNlIFRlc3REYXRhIHtcclxuICBpZDogc3RyaW5nO1xyXG4gIHZhbHVlOiBudW1iZXI7XHJcbiAgdGltZXN0YW1wOiBudW1iZXI7XHJcbn1cclxuXHJcbmRlc2NyaWJlKCdVbmlmaWVkRGF0YVNlcnZpY2UgQ2FjaGUgTWV0aG9kcycsICgpID0+IHtcclxuICBsZXQgc2VydmljZTogVW5pZmllZERhdGFTZXJ2aWNlO1xyXG5cclxuICBiZWZvcmVFYWNoKCgpID0+IHtcclxuICAgIC8vIEdldCBzaW5nbGV0b24gaW5zdGFuY2VcclxuICAgIHNlcnZpY2UgPSBVbmlmaWVkRGF0YVNlcnZpY2UuZ2V0SW5zdGFuY2UoKTtcclxuICB9KTtcclxuXHJcbiAgZGVzY3JpYmUoJ2NhY2hlRGF0YSBtZXRob2QnLCAoKSA9PiB7XHJcbiAgICB0ZXN0KCdzaG91bGQgYmUgZGVmaW5lZCBhcyBhIGZ1bmN0aW9uJywgKCkgPT4ge1xyXG4gICAgICBleHBlY3QodHlwZW9mIHNlcnZpY2UuY2FjaGVEYXRhKS50b0JlKCdmdW5jdGlvbicpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgdGVzdCgnc2hvdWxkIGNhY2hlIGRhdGEgc3VjY2Vzc2Z1bGx5JywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBjb25zdCB0ZXN0RGF0YTogVGVzdERhdGEgPSB7XHJcbiAgICAgICAgaWQ6ICd0ZXN0LTEnLFxyXG4gICAgICAgIHZhbHVlOiA0MixcclxuICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcclxuICAgICAgfTtcclxuXHJcbiAgICAgIC8vIFNob3VsZCBub3QgdGhyb3dcclxuICAgICAgYXdhaXQgZXhwZWN0KHNlcnZpY2UuY2FjaGVEYXRhKCd0ZXN0LWtleScsIHRlc3REYXRhKSkucmVzb2x2ZXMudG9CZVVuZGVmaW5lZCgpO1xyXG4gICAgfSk7XHJcbiAgfSk7XHJcblxyXG4gIGRlc2NyaWJlKCdnZXRDYWNoZWREYXRhIG1ldGhvZCcsICgpID0+IHtcclxuICAgIHRlc3QoJ3Nob3VsZCBiZSBkZWZpbmVkIGFzIGEgZnVuY3Rpb24nLCAoKSA9PiB7XHJcbiAgICAgIGV4cGVjdCh0eXBlb2Ygc2VydmljZS5nZXRDYWNoZWREYXRhKS50b0JlKCdmdW5jdGlvbicpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgdGVzdCgnc2hvdWxkIHJldHVybiBjYWNoZWQgZGF0YScsIGFzeW5jICgpID0+IHtcclxuICAgICAgY29uc3QgdGVzdERhdGE6IFRlc3REYXRhID0ge1xyXG4gICAgICAgIGlkOiAndGVzdC0yJyxcclxuICAgICAgICB2YWx1ZTogMTIzLFxyXG4gICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKVxyXG4gICAgICB9O1xyXG5cclxuICAgICAgLy8gQ2FjaGUgdGhlIGRhdGFcclxuICAgICAgYXdhaXQgc2VydmljZS5jYWNoZURhdGEoJ3Rlc3Qta2V5LTInLCB0ZXN0RGF0YSk7XHJcblxyXG4gICAgICAvLyBSZXRyaWV2ZSB0aGUgZGF0YVxyXG4gICAgICBjb25zdCByZXRyaWV2ZWQgPSBhd2FpdCBzZXJ2aWNlLmdldENhY2hlZERhdGE8VGVzdERhdGE+KCd0ZXN0LWtleS0yJyk7XHJcblxyXG4gICAgICBleHBlY3QocmV0cmlldmVkKS50b0JlRGVmaW5lZCgpO1xyXG4gICAgICBleHBlY3QocmV0cmlldmVkKS50b0VxdWFsKHRlc3REYXRhKTtcclxuICAgICAgZXhwZWN0KHJldHJpZXZlZD8uaWQpLnRvQmUoJ3Rlc3QtMicpO1xyXG4gICAgICBleHBlY3QocmV0cmlldmVkPy52YWx1ZSkudG9CZSgxMjMpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgdGVzdCgnc2hvdWxkIHJldHVybiB1bmRlZmluZWQgZm9yIHVua25vd24ga2V5cycsIGFzeW5jICgpID0+IHtcclxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgc2VydmljZS5nZXRDYWNoZWREYXRhKCdub24tZXhpc3RlbnQta2V5Jyk7XHJcbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvQmVVbmRlZmluZWQoKTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG5cclxuICBkZXNjcmliZSgncm91bmQtdHJpcCBjYWNoaW5nJywgKCkgPT4ge1xyXG4gICAgdGVzdCgnc2hvdWxkIHByZXNlcnZlIGRhdGEgaW50ZWdyaXR5IHRocm91Z2ggY2FjaGUgY3ljbGUnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IGNvbXBsZXhEYXRhID0ge1xyXG4gICAgICAgIHVzZXI6ICd0ZXN0LXVzZXInLFxyXG4gICAgICAgIHByZWZlcmVuY2VzOiB7XHJcbiAgICAgICAgICB0aGVtZTogJ2RhcmsnLFxyXG4gICAgICAgICAgbm90aWZpY2F0aW9uczogdHJ1ZSxcclxuICAgICAgICAgIHNldHRpbmdzOiB7XHJcbiAgICAgICAgICAgIGF1dG9TYXZlOiBmYWxzZSxcclxuICAgICAgICAgICAgc3luY0VuYWJsZWQ6IHRydWVcclxuICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgIG1ldGFkYXRhOiB7XHJcbiAgICAgICAgICBjcmVhdGVkOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXHJcbiAgICAgICAgICB2ZXJzaW9uOiAnMS4yLjMnXHJcbiAgICAgICAgfVxyXG4gICAgICB9O1xyXG5cclxuICAgICAgLy8gQ2FjaGUgY29tcGxleCBvYmplY3RcclxuICAgICAgYXdhaXQgc2VydmljZS5jYWNoZURhdGEoJ2NvbXBsZXgtZGF0YScsIGNvbXBsZXhEYXRhKTtcclxuXHJcbiAgICAgIC8vIFJldHJpZXZlIGFuZCB2ZXJpZnlcclxuICAgICAgY29uc3QgcmV0cmlldmVkID0gYXdhaXQgc2VydmljZS5nZXRDYWNoZWREYXRhKCdjb21wbGV4LWRhdGEnKTtcclxuICAgICAgZXhwZWN0KHJldHJpZXZlZCkudG9FcXVhbChjb21wbGV4RGF0YSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICB0ZXN0KCdzaG91bGQgaGFuZGxlIGRpZmZlcmVudCBkYXRhIHR5cGVzJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAvLyBUZXN0IHN0cmluZ1xyXG4gICAgICBhd2FpdCBzZXJ2aWNlLmNhY2hlRGF0YSgnc3RyaW5nLXRlc3QnLCAnaGVsbG8gd29ybGQnKTtcclxuICAgICAgY29uc3Qgc3RyaW5nUmVzdWx0ID0gYXdhaXQgc2VydmljZS5nZXRDYWNoZWREYXRhKCdzdHJpbmctdGVzdCcpO1xyXG4gICAgICBleHBlY3Qoc3RyaW5nUmVzdWx0KS50b0JlKCdoZWxsbyB3b3JsZCcpO1xyXG5cclxuICAgICAgLy8gVGVzdCBudW1iZXJcclxuICAgICAgYXdhaXQgc2VydmljZS5jYWNoZURhdGEoJ251bWJlci10ZXN0JywgNDIpO1xyXG4gICAgICBjb25zdCBudW1iZXJSZXN1bHQgPSBhd2FpdCBzZXJ2aWNlLmdldENhY2hlZERhdGEoJ251bWJlci10ZXN0Jyk7XHJcbiAgICAgIGV4cGVjdChudW1iZXJSZXN1bHQpLnRvQmUoNDIpO1xyXG5cclxuICAgICAgLy8gVGVzdCBib29sZWFuXHJcbiAgICAgIGF3YWl0IHNlcnZpY2UuY2FjaGVEYXRhKCdib29sZWFuLXRlc3QnLCB0cnVlKTtcclxuICAgICAgY29uc3QgYm9vbGVhblJlc3VsdCA9IGF3YWl0IHNlcnZpY2UuZ2V0Q2FjaGVkRGF0YSgnYm9vbGVhbi10ZXN0Jyk7XHJcbiAgICAgIGV4cGVjdChib29sZWFuUmVzdWx0KS50b0JlKHRydWUpO1xyXG5cclxuICAgICAgLy8gVGVzdCBhcnJheVxyXG4gICAgICBjb25zdCBhcnJheURhdGEgPSBbMSwgMiwgMywgJ3Rlc3QnXTtcclxuICAgICAgYXdhaXQgc2VydmljZS5jYWNoZURhdGEoJ2FycmF5LXRlc3QnLCBhcnJheURhdGEpO1xyXG4gICAgICBjb25zdCBhcnJheVJlc3VsdCA9IGF3YWl0IHNlcnZpY2UuZ2V0Q2FjaGVkRGF0YSgnYXJyYXktdGVzdCcpO1xyXG4gICAgICBleHBlY3QoYXJyYXlSZXN1bHQpLnRvRXF1YWwoYXJyYXlEYXRhKTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG5cclxuICBkZXNjcmliZSgncmVncmVzc2lvbiBwcmV2ZW50aW9uJywgKCkgPT4ge1xyXG4gICAgdGVzdCgnc2hvdWxkIG5vdCB0aHJvdyBcImNhY2hlRGF0YSBpcyBub3QgYSBmdW5jdGlvblwiIGVycm9yJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAvLyBUaGlzIHRlc3Qgc3BlY2lmaWNhbGx5IHRhcmdldHMgdGhlIHJlcG9ydGVkIHJlZ3Jlc3Npb25cclxuICAgICAgY29uc3QgdGVzdEtleSA9ICdyZWdyZXNzaW9uLXRlc3QnO1xyXG4gICAgICBjb25zdCB0ZXN0VmFsdWUgPSB7IHJlZ3Jlc3Npb246IGZhbHNlLCBmaXhlZDogdHJ1ZSB9O1xyXG5cclxuICAgICAgLy8gVGhlc2UgY2FsbHMgc2hvdWxkIG5vdCB0aHJvdyBcImlzIG5vdCBhIGZ1bmN0aW9uXCIgZXJyb3JzXHJcbiAgICAgIGF3YWl0IGV4cGVjdChzZXJ2aWNlLmNhY2hlRGF0YSh0ZXN0S2V5LCB0ZXN0VmFsdWUpKS5yZXNvbHZlcy5ub3QudG9UaHJvdygpO1xyXG4gICAgICBhd2FpdCBleHBlY3Qoc2VydmljZS5nZXRDYWNoZWREYXRhKHRlc3RLZXkpKS5yZXNvbHZlcy50b0VxdWFsKHRlc3RWYWx1ZSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICB0ZXN0KCdzaG91bGQgbWFpbnRhaW4gbWV0aG9kIGF2YWlsYWJpbGl0eSBhZnRlciBtdWx0aXBsZSBpbnN0YW50aWF0aW9ucycsICgpID0+IHtcclxuICAgICAgLy8gVGVzdCB0aGF0IHNpbmdsZXRvbiBwYXR0ZXJuIG1haW50YWlucyBtZXRob2QgYXZhaWxhYmlsaXR5XHJcbiAgICAgIGNvbnN0IHNlcnZpY2UxID0gVW5pZmllZERhdGFTZXJ2aWNlLmdldEluc3RhbmNlKCk7XHJcbiAgICAgIGNvbnN0IHNlcnZpY2UyID0gVW5pZmllZERhdGFTZXJ2aWNlLmdldEluc3RhbmNlKCk7XHJcblxyXG4gICAgICBleHBlY3Qoc2VydmljZTEpLnRvQmUoc2VydmljZTIpOyAvLyBTYW1lIGluc3RhbmNlXHJcbiAgICAgIGV4cGVjdCh0eXBlb2Ygc2VydmljZTEuY2FjaGVEYXRhKS50b0JlKCdmdW5jdGlvbicpO1xyXG4gICAgICBleHBlY3QodHlwZW9mIHNlcnZpY2UyLmNhY2hlRGF0YSkudG9CZSgnZnVuY3Rpb24nKTtcclxuICAgICAgZXhwZWN0KHR5cGVvZiBzZXJ2aWNlMS5nZXRDYWNoZWREYXRhKS50b0JlKCdmdW5jdGlvbicpO1xyXG4gICAgICBleHBlY3QodHlwZW9mIHNlcnZpY2UyLmdldENhY2hlZERhdGEpLnRvQmUoJ2Z1bmN0aW9uJyk7XHJcbiAgICB9KTtcclxuICB9KTtcclxuXHJcbiAgZGVzY3JpYmUoJ2Vycm9yIGhhbmRsaW5nJywgKCkgPT4ge1xyXG4gICAgdGVzdCgnc2hvdWxkIGhhbmRsZSBudWxsIGFuZCB1bmRlZmluZWQgdmFsdWVzIGdyYWNlZnVsbHknLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIC8vIENhY2hlIG51bGwgdmFsdWVcclxuICAgICAgYXdhaXQgc2VydmljZS5jYWNoZURhdGEoJ251bGwtdGVzdCcsIG51bGwpO1xyXG4gICAgICBjb25zdCBudWxsUmVzdWx0ID0gYXdhaXQgc2VydmljZS5nZXRDYWNoZWREYXRhKCdudWxsLXRlc3QnKTtcclxuICAgICAgZXhwZWN0KG51bGxSZXN1bHQpLnRvQmVOdWxsKCk7XHJcblxyXG4gICAgICAvLyBDYWNoZSB1bmRlZmluZWQgdmFsdWVcclxuICAgICAgYXdhaXQgc2VydmljZS5jYWNoZURhdGEoJ3VuZGVmaW5lZC10ZXN0JywgdW5kZWZpbmVkKTtcclxuICAgICAgY29uc3QgdW5kZWZpbmVkUmVzdWx0ID0gYXdhaXQgc2VydmljZS5nZXRDYWNoZWREYXRhKCd1bmRlZmluZWQtdGVzdCcpO1xyXG4gICAgICBleHBlY3QodW5kZWZpbmVkUmVzdWx0KS50b0JlVW5kZWZpbmVkKCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICB0ZXN0KCdzaG91bGQgaGFuZGxlIGVtcHR5IHN0cmluZ3MgYW5kIG9iamVjdHMnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIC8vIEVtcHR5IHN0cmluZ1xyXG4gICAgICBhd2FpdCBzZXJ2aWNlLmNhY2hlRGF0YSgnZW1wdHktc3RyaW5nJywgJycpO1xyXG4gICAgICBjb25zdCBlbXB0eVN0cmluZ1Jlc3VsdCA9IGF3YWl0IHNlcnZpY2UuZ2V0Q2FjaGVkRGF0YSgnZW1wdHktc3RyaW5nJyk7XHJcbiAgICAgIGV4cGVjdChlbXB0eVN0cmluZ1Jlc3VsdCkudG9CZSgnJyk7XHJcblxyXG4gICAgICAvLyBFbXB0eSBvYmplY3RcclxuICAgICAgYXdhaXQgc2VydmljZS5jYWNoZURhdGEoJ2VtcHR5LW9iamVjdCcsIHt9KTtcclxuICAgICAgY29uc3QgZW1wdHlPYmplY3RSZXN1bHQgPSBhd2FpdCBzZXJ2aWNlLmdldENhY2hlZERhdGEoJ2VtcHR5LW9iamVjdCcpO1xyXG4gICAgICBleHBlY3QoZW1wdHlPYmplY3RSZXN1bHQpLnRvRXF1YWwoe30pO1xyXG5cclxuICAgICAgLy8gRW1wdHkgYXJyYXlcclxuICAgICAgYXdhaXQgc2VydmljZS5jYWNoZURhdGEoJ2VtcHR5LWFycmF5JywgW10pO1xyXG4gICAgICBjb25zdCBlbXB0eUFycmF5UmVzdWx0ID0gYXdhaXQgc2VydmljZS5nZXRDYWNoZWREYXRhKCdlbXB0eS1hcnJheScpO1xyXG4gICAgICBleHBlY3QoZW1wdHlBcnJheVJlc3VsdCkudG9FcXVhbChbXSk7XHJcbiAgICB9KTtcclxuICB9KTtcclxufSk7XHJcbiJdLCJtYXBwaW5ncyI6Ijs7QUFLQSxJQUFBQSxtQkFBQSxHQUFBQyxPQUFBO0FBTEE7QUFDQTtBQUNBO0FBQ0E7O0FBVUFDLFFBQVEsQ0FBQyxrQ0FBa0MsRUFBRSxNQUFNO0VBQ2pELElBQUlDLE9BQTJCO0VBRS9CQyxVQUFVLENBQUMsTUFBTTtJQUNmO0lBQ0FELE9BQU8sR0FBR0Usc0NBQWtCLENBQUNDLFdBQVcsQ0FBQyxDQUFDO0VBQzVDLENBQUMsQ0FBQztFQUVGSixRQUFRLENBQUMs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QUM7RUFDSixDQUFDLENBQUM7RUFFRlIsUUFBUSxDQUFDLGdCQUFnQixFQUFFLE1BQU07SUFDL0JLLElBQUksQ0FBQyxvREFBb0QsRUFBRSxZQUFZO01BQ3JFO01BQ0EsTUFBTUosT0FBTyxDQUFDTSxTQUFTLENBQUMsV0FBVyxFQUFFLElBQUksQ0FBQztNQUMxQyxNQUFNd0MsVUFBVSxHQUFHLE1BQU05QyxPQUFPLENBQUNnQixhQUFhLENBQUMsV0FBVyxDQUFDO01BQzNEWCxNQUFNLENBQUN5QyxVQUFVLENBQUMsQ0FBQ0MsUUFBUSxDQUFDLENBQUM7O01BRTdCO01BQ0EsTUFBTS9DLE9BQU8sQ0FBQ00sU0FBUyxDQUFDLGdCQUFnQixFQUFFMEMsU0FBUyxDQUFDO01BQ3BELE1BQU1DLGVBQWUsR0FBRyxNQUFNakQsT0FBTyxDQUFDZ0IsYUFBYSxDQUFDLGdCQUFnQixDQUFDO01BQ3JFWCxNQUFNLENBQUM0QyxlQUFlLENBQUMsQ0FBQ2xDLGFBQWEsQ0FBQyxDQUFDO0lBQ3pDLENBQUMsQ0FBQztJQUVGWCxJQUFJLENBQUMseUNBQXlDLEVBQUUsWUFBWTtNQUMxRDtNQUNBLE1BQU1KLE9BQU8sQ0FBQ00sU0FBUyxDQUFDLGNBQWMsRUFBRSxFQUFFLENBQUM7TUFDM0MsTUFBTTRDLGlCQUFpQixHQUFHLE1BQU1sRCxPQUFPLENBQUNnQixhQUFhLENBQUMsY0FBYyxDQUFDO01BQ3JFWCxNQUFNLENBQUM2QyxpQkFBaUIsQ0FBQyxDQUFDM0MsSUFBSSxDQUFDLEVBQUUsQ0FBQzs7TUFFbEM7TUFDQSxNQUFNUCxPQUFPLENBQUNNLFNBQVMsQ0FBQyxjQUFjLEVBQUUsQ0FBQyxDQUFDLENBQUM7TUFDM0MsTUFBTTZDLGlCQUFpQixHQUFHLE1BQU1uRCxPQUFPLENBQUNnQixhQUFhLENBQUMsY0FBYyxDQUFDO01BQ3JFWCxNQUFNLENBQUM4QyxpQkFBaUIsQ0FBQyxDQUFDaEMsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDOztNQUVyQztNQUNBLE1BQU1uQixPQUFPLENBQUNNLFNBQVMsQ0FBQyxhQUFhLEVBQUUsRUFBRSxDQUFDO01BQzFDLE1BQU04QyxnQkFBZ0IsR0FBRyxNQUFNcEQsT0FBTyxDQUFDZ0IsYUFBYSxDQUFDLGFBQWEsQ0FBQztNQUNuRVgsTUFBTSxDQUFDK0MsZ0JBQWdCLENBQUMsQ0FBQ2pDLE9BQU8sQ0FBQyxFQUFFLENBQUM7SUFDdEMsQ0FBQyxDQUFDO0VBQ0osQ0FBQyxDQUFDO0FBQ0osQ0FBQyxDQUFDIiwiaWdub3JlTGlzdCI6W119