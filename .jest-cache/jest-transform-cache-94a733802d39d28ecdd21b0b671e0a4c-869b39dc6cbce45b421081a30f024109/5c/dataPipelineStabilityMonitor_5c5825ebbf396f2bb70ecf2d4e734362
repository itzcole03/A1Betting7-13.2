3626d23f849b23da38bbb8685fd12412
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;
var _UnifiedDataService = require("./unified/UnifiedDataService");
var _enhancedLogger = require("../utils/enhancedLogger");
var _DataPipelineStabilityMonitor;
class DataPipelineStabilityMonitor {
  constructor() {
    this.metrics = new Map();
    this.isMonitoring = false;
    this.monitoringInterval = null;
    this.DEFAULT_THRESHOLDS = {
      maxResponseTime: 5000,
      // 5 seconds
      maxErrorRate: 0.1,
      // 10%
      minSuccessRate: 0.9,
      // 90%
      minCacheHitRate: 0.7 // 70%
    };
  }
  static getInstance() {
    if (!DataPipelineStabilityMonitor.instance) {
      DataPipelineStabilityMonitor.instance = new DataPipelineStabilityMonitor();
    }
    return DataPipelineStabilityMonitor.instance;
  }
  async startMonitoring(intervalMs = 60000) {
    if (this.isMonitoring) {
      _enhancedLogger.enhancedLogger.warn('DataPipelineStabilityMonitor', 'startMonitoring', 'Data pipeline monitoring is already running');
      return;
    }
    this.isMonitoring = true;
    _enhancedLogger.enhancedLogger.info('DataPipelineStabilityMonitor', 'startMonitoring', 'Starting data pipeline stability monitoring...');

    // Initial health check
    await this.performHealthChecks();

    // Set up periodic monitoring
    this.monitoringInterval = setInterval(async () => {
      try {
        await this.performHealthChecks();
      } catch (error) {
        _enhancedLogger.enhancedLogger.error('DataPipelineStabilityMonitor', 'monitorInterval', 'Error during health check', undefined, error);
      }
    }, intervalMs);
  }
  stopMonitoring() {
    if (this.monitoringInterval) {
      clearInterval(this.monitoringInterval);
      this.monitoringInterval = null;
    }
    this.isMonitoring = false;
    _enhancedLogger.enhancedLogger.info('DataPipelineStabilityMonitor', 'stopMonitoring', 'Data pipeline monitoring stopped');
  }
  async performHealthChecks() {
    const services = [{
      name: 'UnifiedDataService',
      service: _UnifiedDataService.UnifiedDataService.getInstance()
    }];
    const healthCheckPromises = services.map(({
      name,
      service
    }) => this.checkServiceHealth(name, service));
    await Promise.allSettled(healthCheckPromises);
    this.analyzeAndAlert();
  }
  async checkServiceHealth(serviceName, service) {
    const startTime = Date.now();
    let result;
    try {
      // Perform a lightweight health check based on service type
      if (serviceName === 'UnifiedDataService') {
        result = await this.healthCheckUnifiedDataService(service);
      } else {
        result = {
          success: false,
          responseTime: 0,
          error: 'Unknown service'
        };
      }
    } catch (error) {
      result = {
        success: false,
        responseTime: Date.now() - startTime,
        error: error instanceof Error ? error.message : 'Unknown error'
      };
    }
    this.updateMetrics(serviceName, result);
  }
  async healthCheckUnifiedDataService(service) {
    const startTime = Date.now();
    try {
      // Test basic functionality that was fixed in the constructor
      const testCacheKey = 'health-check-test';
      const testData = {
        test: true,
        timestamp: Date.now()
      };

      // Test cache operations (this validates the constructor fix)
      const svc = service;
      if (typeof svc.cacheData !== 'function' || typeof svc.getCachedData !== 'function') {
        throw new Error('UnifiedDataService does not expose required cache methods');
      }
      await svc.cacheData(testCacheKey, testData, 1000);
      const cachedData = await svc.getCachedData(testCacheKey);
      const cachedObj = cachedData;
      if (!cachedObj || cachedObj['test'] !== true) {
        throw new Error('Cache operations failed');
      }
      return {
        success: true,
        responseTime: Date.now() - startTime
      };
    } catch (error) {
      return {
        success: false,
        responseTime: Date.now() - startTime,
        error: error instanceof Error ? error.message : 'Health check failed'
      };
    }
  }
  updateMetrics(serviceName, result) {
    const existing = this.metrics.get(serviceName);
    const now = new Date();
    if (!existing) {
      this.metrics.set(serviceName, {
        serviceName,
        responseTime: result.responseTime,
        errorRate: result.success ? 0 : 1,
        successRate: result.success ? 1 : 0,
        cacheHitRate: 0.8,
        // Default assumption
        lastHealthCheck: now,
        status: this.determineHealthStatus(result.responseTime, result.success ? 0 : 1, result.success ? 1 : 0),
        errors: result.error ? [result.error] : []
      });
      return;
    }

    // Calculate rolling averages (simple weighted average)
    const weight = 0.2; // 20% weight for new data
    existing.responseTime = existing.responseTime * (1 - weight) + result.responseTime * weight;
    existing.errorRate = existing.errorRate * (1 - weight) + (result.success ? 0 : 1) * weight;
    existing.successRate = existing.successRate * (1 - weight) + (result.success ? 1 : 0) * weight;
    existing.lastHealthCheck = now;
    existing.status = this.determineHealthStatus(existing.responseTime, existing.errorRate, existing.successRate);
    if (result.error) {
      existing.errors.push(result.error);
      // Keep only last 10 errors
      if (existing.errors.length > 10) {
        existing.errors = existing.errors.slice(-10);
      }
    }
  }
  determineHealthStatus(responseTime, errorRate, successRate) {
    const thresholds = this.DEFAULT_THRESHOLDS;
    if (errorRate > thresholds.maxErrorRate || successRate < thresholds.minSuccessRate) {
      return 'unhealthy';
    }
    if (responseTime > thresholds.maxResponseTime) {
      return 'degraded';
    }
    return 'healthy';
  }
  analyzeAndAlert() {
    const unhealthyServices = [];
    const degradedServices = [];
    this.metrics.forEach((metrics, serviceName) => {
      if (metrics.status === 'unhealthy') {
        unhealthyServices.push(serviceName);
      } else if (metrics.status === 'degraded') {
        degradedServices.push(serviceName);
      }
    });
    if (unhealthyServices.length > 0) {
      _enhancedLogger.enhancedLogger.error('DataPipelineStabilityMonitor', 'analyzeAndAlert', `🚨 CRITICAL: Unhealthy services detected: ${unhealthyServices.join(', ')}`);
      this.sendAlert('critical', `Unhealthy services: ${unhealthyServices.join(', ')}`);
    }
    if (degradedServices.length > 0) {
      _enhancedLogger.enhancedLogger.warn('DataPipelineStabilityMonitor', 'analyzeAndAlert', `⚠️ WARNING: Degraded services detected: ${degradedServices.join(', ')}`);
      this.sendAlert('warning', `Degraded services: ${degradedServices.join(', ')}`);
    }
    if (unhealthyServices.length === 0 && degradedServices.length === 0) {
      _enhancedLogger.enhancedLogger.info('DataPipelineStabilityMonitor', 'analyzeAndAlert', '✅ All data pipeline services are healthy');
    }
  }
  sendAlert(level, message) {
    // In a real implementation, this would integrate with alerting systems
    const timestamp = new Date().toISOString();
    const alertMessage = `[${level.toUpperCase()}] ${timestamp}: ${message}`;
    if (level === 'critical') {
      _enhancedLogger.enhancedLogger.error('DataPipelineStabilityMonitor', 'sendAlert', alertMessage);
    } else {
      _enhancedLogger.enhancedLogger.warn('DataPipelineStabilityMonitor', 'sendAlert', alertMessage);
    }

    // Store alert for dashboard display
    if (typeof window !== 'undefined' && window.localStorage) {
      const alerts = JSON.parse(localStorage.getItem('pipeline-alerts') || '[]');
      alerts.push({
        level,
        message,
        timestamp
      });

      // Keep only last 50 alerts
      if (alerts.length > 50) {
        alerts.splice(0, alerts.length - 50);
      }
      localStorage.setItem('pipeline-alerts', JSON.stringify(alerts));
    }
  }
  getHealthReport() {
    const report = {};
    this.metrics.forEach((metrics, serviceName) => {
      report[serviceName] = {
        ...metrics
      };
    });
    return report;
  }
  getOverallHealthStatus() {
    const statuses = Array.from(this.metrics.values()).map(m => m.status);
    if (statuses.includes('unhealthy')) {
      return 'unhealthy';
    }
    if (statuses.includes('degraded')) {
      return 'degraded';
    }
    return 'healthy';
  }
  isMonitoringActive() {
    return this.isMonitoring;
  }

  // Method to validate UnifiedDataService constructor fix specifically
  async validateUnifiedDataServiceFix() {
    try {
      const service = _UnifiedDataService.UnifiedDataService.getInstance();

      // Test that the service was properly initialized with the registry
      if (!service) {
        _enhancedLogger.enhancedLogger.error('DataPipelineStabilityMonitor', 'validateUnifiedDataServiceFix', 'UnifiedDataService instance not available');
        return false;
      }

      // Test cache operations that previously failed due to constructor issues
      const testKey = 'constructor-fix-validation';
      const testData = {
        validated: true,
        timestamp: Date.now()
      };
      await service.cacheData(testKey, testData, 5000);
      const retrieved = await service.getCachedData(testKey);
      if (!retrieved || retrieved['validated'] !== true) {
        _enhancedLogger.enhancedLogger.error('DataPipelineStabilityMonitor', 'validateUnifiedDataServiceFix', 'UnifiedDataService cache operations failed - constructor fix may not be working');
        return false;
      }
      _enhancedLogger.enhancedLogger.info('DataPipelineStabilityMonitor', 'validateUnifiedDataServiceFix', '✅ UnifiedDataService constructor fix validated successfully');
      return true;
    } catch (error) {
      _enhancedLogger.enhancedLogger.error('DataPipelineStabilityMonitor', 'validateUnifiedDataServiceFix', '❌ UnifiedDataService constructor fix validation failed', undefined, error);
      return false;
    }
  }
}
_DataPipelineStabilityMonitor = DataPipelineStabilityMonitor;
DataPipelineStabilityMonitor.instance = void 0;
var _default = exports.default = DataPipelineStabilityMonitor;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfVW5pZmllZERhdGFTZXJ2aWNlIiwicmVxdWlyZSIsIl9lbmhhbmNlZExvZ2dlciIsIl9EYXRhUGlwZWxpbmVTdGFiaWxpdHlNb25pdG9yIiwiRGF0YVBpcGVsaW5lU3RhYmlsaXR5TW9uaXRvciIsImNvbnN0cnVjdG9yIiwibWV0cmljcyIsIk1hcCIsImlzTW9uaXRvcmluZyIsIm1vbml0b3JpbmdJbnRlcnZhbCIsIkRFRkFVTFRfVEhSRVNIT0xEUyIsIm1heFJlc3BvbnNlVGltZSIsIm1heEVycm9yUmF0ZSIsIm1pblN1Y2Nlc3NSYXRlIiwibWluQ2FjaGVIaXRSYXRlIiwiZ2V0SW5zdGFuY2UiLCJpbnN0YW5jZSIsInN0YXJ0TW9uaXRvcmluZyIsImludGVydmFsTXMiLCJlbmhhbmNlZExvZ2dlciIsIndhcm4iLCJpbmZvIiwicGVyZm9ybUhlYWx0aENoZWNrcyIsInNldEludGVydmFsIiwiZXJyb3IiLCJ1bmRlZmluZWQiLCJzdG9wTW9uaXRvcmluZyIsImNsZWFySW50ZXJ2YWwiLCJzZXJ2aWNlcyIsIm5hbWUiLCJzZXJ2aWNlIiwiVW5pZmllZERhdGFTZXJ2aWNlIiwiaGVhbHRoQ2hlY2tQcm9taXNlcyIsIm1hcCIsImNoZWNrU2VydmljZUhlYWx0aCIsIlByb21pc2UiLCJhbGxTZXR0bGVkIiwiYW5hbHl6ZUFuZEFsZXJ0Iiwic2VydmljZU5hbWUiLCJzdGFydFRpbWUiLCJEYXRlIiwibm93IiwicmVzdWx0IiwiaGVhbHRoQ2hlY2tVbmlmaWVkRGF0YVNlcnZpY2UiLCJzdWNjZXNzIiwicmVzcG9uc2VUaW1lIiwiRXJyb3IiLCJtZXNzYWdlIiwidXBkYXRlTWV0cmljcyIsInRlc3RDYWNoZUtleSIsInRlc3REYXRhIiwidGVzdCIsInRpbWVzdGFtcCIsInN2YyIsImNhY2hlRGF0YSIsImdldENhY2hlZERhdGEiLCJjYWNoZWREYXRhIiwiY2FjaGVkT2JqIiwiZXhpc3RpbmciLCJnZXQiLCJzZXQiLCJlcnJvclJhdGUiLCJzdWNjZXNzUmF0ZSIsImNhY2hlSGl0UmF0ZSIsImxhc3RIZWFsdGhDaGVjayIsInN0YXR1cyIsImRldGVybWluZUhlYWx0aFN0YXR1cyIsImVycm9ycyIsIndlaWdodCIsInB1c2giLCJsZW5ndGgiLCJzbGljZSIsInRocmVzaG9sZHMiLCJ1bmhlYWx0aHlTZXJ2aWNlcyIsImRlZ3JhZGVkU2VydmljZXMiLCJmb3JFYWNoIiwiam9pbiIsInNlbmRBbGVydCIsImxldmVsIiwidG9JU09TdHJpbmciLCJhbGVydE1lc3NhZ2UiLCJ0b1VwcGVyQ2FzZSIsIndpbmRvdyIsImxvY2FsU3RvcmFnZSIsImFsZXJ0cyIsIkpTT04iLCJwYXJzZSIsImdldEl0ZW0iLCJzcGxpY2UiLCJzZXRJdGVtIiwic3RyaW5naWZ5IiwiZ2V0SGVhbHRoUmVwb3J0IiwicmVwb3J0IiwiZ2V0T3ZlcmFsbEhlYWx0aFN0YXR1cyIsInN0YXR1c2VzIiwiQXJyYXkiLCJmcm9tIiwidmFsdWVzIiwibSIsImluY2x1ZGVzIiwiaXNNb25pdG9yaW5nQWN0aXZlIiwidmFsaWRhdGVVbmlmaWVkRGF0YVNlcnZpY2VGaXgiLCJ0ZXN0S2V5IiwidmFsaWRhdGVkIiwicmV0cmlldmVkIiwiX2RlZmF1bHQiLCJleHBvcnRzIiwiZGVmYXVsdCJdLCJzb3VyY2VzIjpbImRhdGFQaXBlbGluZVN0YWJpbGl0eU1vbml0b3IudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgVW5pZmllZERhdGFTZXJ2aWNlIH0gZnJvbSAnLi91bmlmaWVkL1VuaWZpZWREYXRhU2VydmljZSc7XHJcbmltcG9ydCB7IGVuaGFuY2VkTG9nZ2VyIH0gZnJvbSAnLi4vdXRpbHMvZW5oYW5jZWRMb2dnZXInO1xyXG5cclxuaW50ZXJmYWNlIFNlcnZpY2VIZWFsdGhNZXRyaWNzIHtcclxuICBzZXJ2aWNlTmFtZTogc3RyaW5nO1xyXG4gIHJlc3BvbnNlVGltZTogbnVtYmVyO1xyXG4gIGVycm9yUmF0ZTogbnVtYmVyO1xyXG4gIHN1Y2Nlc3NSYXRlOiBudW1iZXI7XHJcbiAgY2FjaGVIaXRSYXRlOiBudW1iZXI7XHJcbiAgbGFzdEhlYWx0aENoZWNrOiBEYXRlO1xyXG4gIHN0YXR1czogJ2hlYWx0aHknIHwgJ2RlZ3JhZGVkJyB8ICd1bmhlYWx0aHknO1xyXG4gIGVycm9yczogc3RyaW5nW107XHJcbn1cclxuXHJcbmludGVyZmFjZSBIZWFsdGhDaGVja1Jlc3VsdCB7XHJcbiAgc3VjY2VzczogYm9vbGVhbjtcclxuICByZXNwb25zZVRpbWU6IG51bWJlcjtcclxuICBlcnJvcj86IHN0cmluZztcclxufVxyXG5cclxuaW50ZXJmYWNlIEFsZXJ0VGhyZXNob2xkcyB7XHJcbiAgbWF4UmVzcG9uc2VUaW1lOiBudW1iZXI7XHJcbiAgbWF4RXJyb3JSYXRlOiBudW1iZXI7XHJcbiAgbWluU3VjY2Vzc1JhdGU6IG51bWJlcjtcclxuICBtaW5DYWNoZUhpdFJhdGU6IG51bWJlcjtcclxufVxyXG5cclxuY2xhc3MgRGF0YVBpcGVsaW5lU3RhYmlsaXR5TW9uaXRvciB7XHJcbiAgcHJpdmF0ZSBzdGF0aWMgaW5zdGFuY2U6IERhdGFQaXBlbGluZVN0YWJpbGl0eU1vbml0b3I7XHJcbiAgcHJpdmF0ZSBtZXRyaWNzOiBNYXA8c3RyaW5nLCBTZXJ2aWNlSGVhbHRoTWV0cmljcz4gPSBuZXcgTWFwKCk7XHJcbiAgcHJpdmF0ZSBpc01vbml0b3JpbmcgPSBmYWxzZTtcclxuICBwcml2YXRlIG1vbml0b3JpbmdJbnRlcnZhbDogTm9kZUpTLlRpbWVvdXQgfCBudWxsID0gbnVsbDtcclxuICBcclxuICBwcml2YXRlIHJlYWRvbmx5IERFRkFVTFRfVEhSRVNIT0xEUzogQWxlcnRUaHJlc2hvbGRzID0ge1xyXG4gICAgbWF4UmVzcG9uc2VUaW1lOiA1MDAwLCAvLyA1IHNlY29uZHNcclxuICAgIG1heEVycm9yUmF0ZTogMC4xLCAgICAgLy8gMTAlXHJcbiAgICBtaW5TdWNjZXNzUmF0ZTogMC45LCAgIC8vIDkwJVxyXG4gICAgbWluQ2FjaGVIaXRSYXRlOiAwLjcgICAvLyA3MCVcclxuICB9O1xyXG5cclxuICBwcml2YXRlIGNvbnN0cnVjdG9yKCkge31cclxuXHJcbiAgc3RhdGljIGdldEluc3RhbmNlKCk6IERhdGFQaXBlbGluZVN0YWJpbGl0eU1vbml0b3Ige1xyXG4gICAgaWYgKCFEYXRhUGlwZWxpbmVTdGFiaWxpdHlNb25pdG9yLmluc3RhbmNlKSB7XHJcbiAgICAgIERhdGFQaXBlbGluZVN0YWJpbGl0eU1vbml0b3IuaW5zdGFuY2UgPSBuZXcgRGF0YVBpcGVsaW5lU3RhYmlsaXR5TW9uaXRvcigpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIERhdGFQaXBlbGluZVN0YWJpbGl0eU1vbml0b3IuaW5zdGFuY2U7XHJcbiAgfVxyXG5cclxuICBhc3luYyBzdGFydE1vbml0b3JpbmcoaW50ZXJ2YWxNczogbnVtYmVyID0gNjAwMDApOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgIGlmICh0aGlzLmlzTW9uaXRvcmluZykge1xyXG4gICAgICBlbmhhbmNlZExvZ2dlci53YXJuKCdEYXRhUGlwZWxpbmVTdGFiaWxpdHlNb25pdG9yJywgJ3N0YXJ0TW9uaXRvcmluZycsICdEYXRhIHBpcGVsaW5lIG1vbml0b3JpbmcgaXMgYWxyZWFkeSBydW5uaW5nJyk7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLmlzTW9uaXRvcmluZyA9IHRydWU7XHJcbiAgICBlbmhhbmNlZExvZ2dlci5pbmZvKCdEYXRhUGlwZWxpbmVTdGFiaWxpdHlNb25pdG9yJywgJ3N0YXJ0TW9uaXRvcmluZycsICdTdGFydGluZyBkYXRhIHBpcGVsaW5lIHN0YWJpbGl0eSBtb25pdG9yaW5nLi4uJyk7XHJcblxyXG4gICAgLy8gSW5pdGlhbCBoZWFsdGggY2hlY2tcclxuICAgIGF3YWl0IHRoaXMucGVyZm9ybUhlYWx0aENoZWNrcygpO1xyXG5cclxuICAgIC8vIFNldCB1cCBwZXJpb2RpYyBtb25pdG9yaW5nXHJcbiAgICB0aGlzLm1vbml0b3JpbmdJbnRlcnZhbCA9IHNldEludGVydmFsKGFzeW5jICgpID0+IHtcclxuICAgICAgdHJ5IHtcclxuICAgICAgICBhd2FpdCB0aGlzLnBlcmZvcm1IZWFsdGhDaGVja3MoKTtcclxuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICBlbmhhbmNlZExvZ2dlci5lcnJvcignRGF0YVBpcGVsaW5lU3RhYmlsaXR5TW9uaXRvcicsICdtb25pdG9ySW50ZXJ2YWwnLCAnRXJyb3IgZHVyaW5nIGhlYWx0aCBjaGVjaycsIHVuZGVmaW5lZCwgZXJyb3IgYXMgdW5rbm93biBhcyBFcnJvcik7XHJcbiAgICAgIH1cclxuICAgIH0sIGludGVydmFsTXMpO1xyXG4gIH1cclxuXHJcbiAgc3RvcE1vbml0b3JpbmcoKTogdm9pZCB7XHJcbiAgICBpZiAodGhpcy5tb25pdG9yaW5nSW50ZXJ2YWwpIHtcclxuICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLm1vbml0b3JpbmdJbnRlcnZhbCk7XHJcbiAgICAgIHRoaXMubW9uaXRvcmluZ0ludGVydmFsID0gbnVsbDtcclxuICAgIH1cclxuICB0aGlzLmlzTW9uaXRvcmluZyA9IGZhbHNlO1xyXG4gIGVuaGFuY2VkTG9nZ2VyLmluZm8oJ0RhdGFQaXBlbGluZVN0YWJpbGl0eU1vbml0b3InLCAnc3RvcE1vbml0b3JpbmcnLCAnRGF0YSBwaXBlbGluZSBtb25pdG9yaW5nIHN0b3BwZWQnKTtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgYXN5bmMgcGVyZm9ybUhlYWx0aENoZWNrcygpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgIGNvbnN0IHNlcnZpY2VzID0gW1xyXG4gICAgICB7IG5hbWU6ICdVbmlmaWVkRGF0YVNlcnZpY2UnLCBzZXJ2aWNlOiBVbmlmaWVkRGF0YVNlcnZpY2UuZ2V0SW5zdGFuY2UoKSB9XHJcbiAgICBdO1xyXG5cclxuICAgIGNvbnN0IGhlYWx0aENoZWNrUHJvbWlzZXMgPSBzZXJ2aWNlcy5tYXAoKHsgbmFtZSwgc2VydmljZSB9KSA9PlxyXG4gICAgICB0aGlzLmNoZWNrU2VydmljZUhlYWx0aChuYW1lLCBzZXJ2aWNlKVxyXG4gICAgKTtcclxuXHJcbiAgICBhd2FpdCBQcm9taXNlLmFsbFNldHRsZWQoaGVhbHRoQ2hlY2tQcm9taXNlcyk7XHJcbiAgICB0aGlzLmFuYWx5emVBbmRBbGVydCgpO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBhc3luYyBjaGVja1NlcnZpY2VIZWFsdGgoc2VydmljZU5hbWU6IHN0cmluZywgc2VydmljZTogdW5rbm93bik6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgY29uc3Qgc3RhcnRUaW1lID0gRGF0ZS5ub3coKTtcclxuICAgIGxldCByZXN1bHQ6IEhlYWx0aENoZWNrUmVzdWx0O1xyXG5cclxuICAgIHRyeSB7XHJcbiAgICAgIC8vIFBlcmZvcm0gYSBsaWdodHdlaWdodCBoZWFsdGggY2hlY2sgYmFzZWQgb24gc2VydmljZSB0eXBlXHJcbiAgICAgIGlmIChzZXJ2aWNlTmFtZSA9PT0gJ1VuaWZpZWREYXRhU2VydmljZScpIHtcclxuICAgICAgICByZXN1bHQgPSBhd2FpdCB0aGlzLmhlYWx0aENoZWNrVW5pZmllZERhdGFTZXJ2aWNlKHNlcnZpY2UpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHJlc3VsdCA9IHsgc3VjY2VzczogZmFsc2UsIHJlc3BvbnNlVGltZTogMCwgZXJyb3I6ICdVbmtub3duIHNlcnZpY2UnIH07XHJcbiAgICAgIH1cclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIHJlc3VsdCA9IHtcclxuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgICByZXNwb25zZVRpbWU6IERhdGUubm93KCkgLSBzdGFydFRpbWUsXHJcbiAgICAgICAgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InXHJcbiAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy51cGRhdGVNZXRyaWNzKHNlcnZpY2VOYW1lLCByZXN1bHQpO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBhc3luYyBoZWFsdGhDaGVja1VuaWZpZWREYXRhU2VydmljZShzZXJ2aWNlOiB1bmtub3duKTogUHJvbWlzZTxIZWFsdGhDaGVja1Jlc3VsdD4ge1xyXG4gICAgY29uc3Qgc3RhcnRUaW1lID0gRGF0ZS5ub3coKTtcclxuICAgIHRyeSB7XHJcbiAgICAgIC8vIFRlc3QgYmFzaWMgZnVuY3Rpb25hbGl0eSB0aGF0IHdhcyBmaXhlZCBpbiB0aGUgY29uc3RydWN0b3JcclxuICAgICAgY29uc3QgdGVzdENhY2hlS2V5ID0gJ2hlYWx0aC1jaGVjay10ZXN0JztcclxuICAgICAgY29uc3QgdGVzdERhdGEgPSB7IHRlc3Q6IHRydWUsIHRpbWVzdGFtcDogRGF0ZS5ub3coKSB9O1xyXG4gICAgICBcclxuICAgICAgLy8gVGVzdCBjYWNoZSBvcGVyYXRpb25zICh0aGlzIHZhbGlkYXRlcyB0aGUgY29uc3RydWN0b3IgZml4KVxyXG4gICAgICBjb25zdCBzdmMgPSBzZXJ2aWNlIGFzIHsgY2FjaGVEYXRhPzogKGs6IHN0cmluZywgdjogdW5rbm93biwgdHRsPzogbnVtYmVyKSA9PiBQcm9taXNlPHZvaWQ+OyBnZXRDYWNoZWREYXRhPzogKGs6IHN0cmluZykgPT4gUHJvbWlzZTx1bmtub3duPiB9O1xyXG4gICAgICBpZiAodHlwZW9mIHN2Yy5jYWNoZURhdGEgIT09ICdmdW5jdGlvbicgfHwgdHlwZW9mIHN2Yy5nZXRDYWNoZWREYXRhICE9PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdVbmlmaWVkRGF0YVNlcnZpY2UgZG9lcyBub3QgZXhwb3NlIHJlcXVpcmVkIGNhY2hlIG1ldGhvZHMnKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgYXdhaXQgc3ZjLmNhY2hlRGF0YSh0ZXN0Q2FjaGVLZXksIHRlc3REYXRhLCAxMDAwKTtcclxuICAgICAgY29uc3QgY2FjaGVkRGF0YSA9IGF3YWl0IHN2Yy5nZXRDYWNoZWREYXRhKHRlc3RDYWNoZUtleSk7XHJcbiAgICAgIFxyXG4gICAgICBjb25zdCBjYWNoZWRPYmogPSBjYWNoZWREYXRhIGFzIFJlY29yZDxzdHJpbmcsIHVua25vd24+IHwgdW5kZWZpbmVkO1xyXG4gICAgICBpZiAoIWNhY2hlZE9iaiB8fCBjYWNoZWRPYmpbJ3Rlc3QnXSAhPT0gdHJ1ZSkge1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcignQ2FjaGUgb3BlcmF0aW9ucyBmYWlsZWQnKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgcmV0dXJuIHtcclxuICAgICAgICBzdWNjZXNzOiB0cnVlLFxyXG4gICAgICAgIHJlc3BvbnNlVGltZTogRGF0ZS5ub3coKSAtIHN0YXJ0VGltZVxyXG4gICAgICB9O1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgcmV0dXJuIHtcclxuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgICByZXNwb25zZVRpbWU6IERhdGUubm93KCkgLSBzdGFydFRpbWUsXHJcbiAgICAgICAgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ0hlYWx0aCBjaGVjayBmYWlsZWQnXHJcbiAgICAgIH07XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuXHJcbiAgcHJpdmF0ZSB1cGRhdGVNZXRyaWNzKHNlcnZpY2VOYW1lOiBzdHJpbmcsIHJlc3VsdDogSGVhbHRoQ2hlY2tSZXN1bHQpOiB2b2lkIHtcclxuICAgIGNvbnN0IGV4aXN0aW5nID0gdGhpcy5tZXRyaWNzLmdldChzZXJ2aWNlTmFtZSk7XHJcbiAgICBjb25zdCBub3cgPSBuZXcgRGF0ZSgpO1xyXG5cclxuICAgIGlmICghZXhpc3RpbmcpIHtcclxuICAgICAgdGhpcy5tZXRyaWNzLnNldChzZXJ2aWNlTmFtZSwge1xyXG4gICAgICAgIHNlcnZpY2VOYW1lLFxyXG4gICAgICAgIHJlc3BvbnNlVGltZTogcmVzdWx0LnJlc3BvbnNlVGltZSxcclxuICAgICAgICBlcnJvclJhdGU6IHJlc3VsdC5zdWNjZXNzID8gMCA6IDEsXHJcbiAgICAgICAgc3VjY2Vzc1JhdGU6IHJlc3VsdC5zdWNjZXNzID8gMSA6IDAsXHJcbiAgICAgICAgY2FjaGVIaXRSYXRlOiAwLjgsIC8vIERlZmF1bHQgYXNzdW1wdGlvblxyXG4gICAgICAgIGxhc3RIZWFsdGhDaGVjazogbm93LFxyXG4gICAgICAgIHN0YXR1czogdGhpcy5kZXRlcm1pbmVIZWFsdGhTdGF0dXMocmVzdWx0LnJlc3BvbnNlVGltZSwgcmVzdWx0LnN1Y2Nlc3MgPyAwIDogMSwgcmVzdWx0LnN1Y2Nlc3MgPyAxIDogMCksXHJcbiAgICAgICAgZXJyb3JzOiByZXN1bHQuZXJyb3IgPyBbcmVzdWx0LmVycm9yXSA6IFtdXHJcbiAgICAgIH0pO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgLy8gQ2FsY3VsYXRlIHJvbGxpbmcgYXZlcmFnZXMgKHNpbXBsZSB3ZWlnaHRlZCBhdmVyYWdlKVxyXG4gICAgY29uc3Qgd2VpZ2h0ID0gMC4yOyAvLyAyMCUgd2VpZ2h0IGZvciBuZXcgZGF0YVxyXG4gICAgZXhpc3RpbmcucmVzcG9uc2VUaW1lID0gZXhpc3RpbmcucmVzcG9uc2VUaW1lICogKDEgLSB3ZWlnaHQpICsgcmVzdWx0LnJlc3BvbnNlVGltZSAqIHdlaWdodDtcclxuICAgIGV4aXN0aW5nLmVycm9yUmF0ZSA9IGV4aXN0aW5nLmVycm9yUmF0ZSAqICgxIC0gd2VpZ2h0KSArIChyZXN1bHQuc3VjY2VzcyA/IDAgOiAxKSAqIHdlaWdodDtcclxuICAgIGV4aXN0aW5nLnN1Y2Nlc3NSYXRlID0gZXhpc3Rpbmcuc3VjY2Vzc1JhdGUgKiAoMSAtIHdlaWdodCkgKyAocmVzdWx0LnN1Y2Nlc3MgPyAxIDogMCkgKiB3ZWlnaHQ7XHJcbiAgICBleGlzdGluZy5sYXN0SGVhbHRoQ2hlY2sgPSBub3c7XHJcbiAgICBleGlzdGluZy5zdGF0dXMgPSB0aGlzLmRldGVybWluZUhlYWx0aFN0YXR1cyhleGlzdGluZy5yZXNwb25zZVRpbWUsIGV4aXN0aW5nLmVycm9yUmF0ZSwgZXhpc3Rpbmcuc3VjY2Vzc1JhdGUpO1xyXG5cclxuICAgIGlmIChyZXN1bHQuZXJyb3IpIHtcclxuICAgICAgZXhpc3RpbmcuZXJyb3JzLnB1c2gocmVzdWx0LmVycm9yKTtcclxuICAgICAgLy8gS2VlcCBvbmx5IGxhc3QgMTAgZXJyb3JzXHJcbiAgICAgIGlmIChleGlzdGluZy5lcnJvcnMubGVuZ3RoID4gMTApIHtcclxuICAgICAgICBleGlzdGluZy5lcnJvcnMgPSBleGlzdGluZy5lcnJvcnMuc2xpY2UoLTEwKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBkZXRlcm1pbmVIZWFsdGhTdGF0dXMocmVzcG9uc2VUaW1lOiBudW1iZXIsIGVycm9yUmF0ZTogbnVtYmVyLCBzdWNjZXNzUmF0ZTogbnVtYmVyKTogJ2hlYWx0aHknIHwgJ2RlZ3JhZGVkJyB8ICd1bmhlYWx0aHknIHtcclxuICAgIGNvbnN0IHRocmVzaG9sZHMgPSB0aGlzLkRFRkFVTFRfVEhSRVNIT0xEUztcclxuXHJcbiAgICBpZiAoZXJyb3JSYXRlID4gdGhyZXNob2xkcy5tYXhFcnJvclJhdGUgfHwgc3VjY2Vzc1JhdGUgPCB0aHJlc2hvbGRzLm1pblN1Y2Nlc3NSYXRlKSB7XHJcbiAgICAgIHJldHVybiAndW5oZWFsdGh5JztcclxuICAgIH1cclxuXHJcbiAgICBpZiAocmVzcG9uc2VUaW1lID4gdGhyZXNob2xkcy5tYXhSZXNwb25zZVRpbWUpIHtcclxuICAgICAgcmV0dXJuICdkZWdyYWRlZCc7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuICdoZWFsdGh5JztcclxuICB9XHJcblxyXG4gIHByaXZhdGUgYW5hbHl6ZUFuZEFsZXJ0KCk6IHZvaWQge1xyXG4gICAgY29uc3QgdW5oZWFsdGh5U2VydmljZXM6IHN0cmluZ1tdID0gW107XHJcbiAgICBjb25zdCBkZWdyYWRlZFNlcnZpY2VzOiBzdHJpbmdbXSA9IFtdO1xyXG5cclxuICAgIHRoaXMubWV0cmljcy5mb3JFYWNoKChtZXRyaWNzLCBzZXJ2aWNlTmFtZSkgPT4ge1xyXG4gICAgICBpZiAobWV0cmljcy5zdGF0dXMgPT09ICd1bmhlYWx0aHknKSB7XHJcbiAgICAgICAgdW5oZWFsdGh5U2VydmljZXMucHVzaChzZXJ2aWNlTmFtZSk7XHJcbiAgICAgIH0gZWxzZSBpZiAobWV0cmljcy5zdGF0dXMgPT09ICdkZWdyYWRlZCcpIHtcclxuICAgICAgICBkZWdyYWRlZFNlcnZpY2VzLnB1c2goc2VydmljZU5hbWUpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICBpZiAodW5oZWFsdGh5U2VydmljZXMubGVuZ3RoID4gMCkge1xyXG4gICAgICBlbmhhbmNlZExvZ2dlci5lcnJvcignRGF0YVBpcGVsaW5lU3RhYmlsaXR5TW9uaXRvcicsICdhbmFseXplQW5kQWxlcnQnLCBg8J+aqCBDUklUSUNBTDogVW5oZWFsdGh5IHNlcnZpY2VzIGRldGVjdGVkOiAke3VuaGVhbHRoeVNlcnZpY2VzLmpvaW4oJywgJyl9YCk7XHJcbiAgICAgIHRoaXMuc2VuZEFsZXJ0KCdjcml0aWNhbCcsIGBVbmhlYWx0aHkgc2VydmljZXM6ICR7dW5oZWFsdGh5U2VydmljZXMuam9pbignLCAnKX1gKTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoZGVncmFkZWRTZXJ2aWNlcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgIGVuaGFuY2VkTG9nZ2VyLndhcm4oJ0RhdGFQaXBlbGluZVN0YWJpbGl0eU1vbml0b3InLCAnYW5hbHl6ZUFuZEFsZXJ0JywgYOKaoO+4jyBXQVJOSU5HOiBEZWdyYWRlZCBzZXJ2aWNlcyBkZXRlY3RlZDogJHtkZWdyYWRlZFNlcnZpY2VzLmpvaW4oJywgJyl9YCk7XHJcbiAgICAgIHRoaXMuc2VuZEFsZXJ0KCd3YXJuaW5nJywgYERlZ3JhZGVkIHNlcnZpY2VzOiAke2RlZ3JhZGVkU2VydmljZXMuam9pbignLCAnKX1gKTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAodW5oZWFsdGh5U2VydmljZXMubGVuZ3RoID09PSAwICYmIGRlZ3JhZGVkU2VydmljZXMubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgIGVuaGFuY2VkTG9nZ2VyLmluZm8oJ0RhdGFQaXBlbGluZVN0YWJpbGl0eU1vbml0b3InLCAnYW5hbHl6ZUFuZEFsZXJ0JywgJ+KchSBBbGwgZGF0YSBwaXBlbGluZSBzZXJ2aWNlcyBhcmUgaGVhbHRoeScpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBzZW5kQWxlcnQobGV2ZWw6ICdjcml0aWNhbCcgfCAnd2FybmluZycsIG1lc3NhZ2U6IHN0cmluZyk6IHZvaWQge1xyXG4gICAgLy8gSW4gYSByZWFsIGltcGxlbWVudGF0aW9uLCB0aGlzIHdvdWxkIGludGVncmF0ZSB3aXRoIGFsZXJ0aW5nIHN5c3RlbXNcclxuICAgIGNvbnN0IHRpbWVzdGFtcCA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKTtcclxuICAgIGNvbnN0IGFsZXJ0TWVzc2FnZSA9IGBbJHtsZXZlbC50b1VwcGVyQ2FzZSgpfV0gJHt0aW1lc3RhbXB9OiAke21lc3NhZ2V9YDtcclxuICAgIFxyXG4gICAgaWYgKGxldmVsID09PSAnY3JpdGljYWwnKSB7XHJcbiAgICAgIGVuaGFuY2VkTG9nZ2VyLmVycm9yKCdEYXRhUGlwZWxpbmVTdGFiaWxpdHlNb25pdG9yJywgJ3NlbmRBbGVydCcsIGFsZXJ0TWVzc2FnZSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBlbmhhbmNlZExvZ2dlci53YXJuKCdEYXRhUGlwZWxpbmVTdGFiaWxpdHlNb25pdG9yJywgJ3NlbmRBbGVydCcsIGFsZXJ0TWVzc2FnZSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gU3RvcmUgYWxlcnQgZm9yIGRhc2hib2FyZCBkaXNwbGF5XHJcbiAgICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiYgd2luZG93LmxvY2FsU3RvcmFnZSkge1xyXG4gICAgICBjb25zdCBhbGVydHMgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdwaXBlbGluZS1hbGVydHMnKSB8fCAnW10nKTtcclxuICAgICAgYWxlcnRzLnB1c2goeyBsZXZlbCwgbWVzc2FnZSwgdGltZXN0YW1wIH0pO1xyXG4gICAgICBcclxuICAgICAgLy8gS2VlcCBvbmx5IGxhc3QgNTAgYWxlcnRzXHJcbiAgICAgIGlmIChhbGVydHMubGVuZ3RoID4gNTApIHtcclxuICAgICAgICBhbGVydHMuc3BsaWNlKDAsIGFsZXJ0cy5sZW5ndGggLSA1MCk7XHJcbiAgICAgIH1cclxuICAgICAgXHJcbiAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdwaXBlbGluZS1hbGVydHMnLCBKU09OLnN0cmluZ2lmeShhbGVydHMpKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGdldEhlYWx0aFJlcG9ydCgpOiBSZWNvcmQ8c3RyaW5nLCBTZXJ2aWNlSGVhbHRoTWV0cmljcz4ge1xyXG4gICAgY29uc3QgcmVwb3J0OiBSZWNvcmQ8c3RyaW5nLCBTZXJ2aWNlSGVhbHRoTWV0cmljcz4gPSB7fTtcclxuICAgIHRoaXMubWV0cmljcy5mb3JFYWNoKChtZXRyaWNzLCBzZXJ2aWNlTmFtZSkgPT4ge1xyXG4gICAgICByZXBvcnRbc2VydmljZU5hbWVdID0geyAuLi5tZXRyaWNzIH07XHJcbiAgICB9KTtcclxuICAgIHJldHVybiByZXBvcnQ7XHJcbiAgfVxyXG5cclxuICBnZXRPdmVyYWxsSGVhbHRoU3RhdHVzKCk6ICdoZWFsdGh5JyB8ICdkZWdyYWRlZCcgfCAndW5oZWFsdGh5JyB7XHJcbiAgICBjb25zdCBzdGF0dXNlcyA9IEFycmF5LmZyb20odGhpcy5tZXRyaWNzLnZhbHVlcygpKS5tYXAobSA9PiBtLnN0YXR1cyk7XHJcbiAgICBcclxuICAgIGlmIChzdGF0dXNlcy5pbmNsdWRlcygndW5oZWFsdGh5JykpIHtcclxuICAgICAgcmV0dXJuICd1bmhlYWx0aHknO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBpZiAoc3RhdHVzZXMuaW5jbHVkZXMoJ2RlZ3JhZGVkJykpIHtcclxuICAgICAgcmV0dXJuICdkZWdyYWRlZCc7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIHJldHVybiAnaGVhbHRoeSc7XHJcbiAgfVxyXG5cclxuICBpc01vbml0b3JpbmdBY3RpdmUoKTogYm9vbGVhbiB7XHJcbiAgICByZXR1cm4gdGhpcy5pc01vbml0b3Jpbmc7XHJcbiAgfVxyXG5cclxuICAvLyBNZXRob2QgdG8gdmFsaWRhdGUgVW5pZmllZERhdGFTZXJ2aWNlIGNvbnN0cnVjdG9yIGZpeCBzcGVjaWZpY2FsbHlcclxuICBhc3luYyB2YWxpZGF0ZVVuaWZpZWREYXRhU2VydmljZUZpeCgpOiBQcm9taXNlPGJvb2xlYW4+IHtcclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IHNlcnZpY2UgPSBVbmlmaWVkRGF0YVNlcnZpY2UuZ2V0SW5zdGFuY2UoKTtcclxuICAgICAgXHJcbiAgICAgIC8vIFRlc3QgdGhhdCB0aGUgc2VydmljZSB3YXMgcHJvcGVybHkgaW5pdGlhbGl6ZWQgd2l0aCB0aGUgcmVnaXN0cnlcclxuICAgICAgaWYgKCFzZXJ2aWNlKSB7XHJcbiAgICAgICAgZW5oYW5jZWRMb2dnZXIuZXJyb3IoJ0RhdGFQaXBlbGluZVN0YWJpbGl0eU1vbml0b3InLCAndmFsaWRhdGVVbmlmaWVkRGF0YVNlcnZpY2VGaXgnLCAnVW5pZmllZERhdGFTZXJ2aWNlIGluc3RhbmNlIG5vdCBhdmFpbGFibGUnKTtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIFRlc3QgY2FjaGUgb3BlcmF0aW9ucyB0aGF0IHByZXZpb3VzbHkgZmFpbGVkIGR1ZSB0byBjb25zdHJ1Y3RvciBpc3N1ZXNcclxuICAgICAgY29uc3QgdGVzdEtleSA9ICdjb25zdHJ1Y3Rvci1maXgtdmFsaWRhdGlvbic7XHJcbiAgICAgIGNvbnN0IHRlc3REYXRhID0geyB2YWxpZGF0ZWQ6IHRydWUsIHRpbWVzdGFtcDogRGF0ZS5ub3coKSB9O1xyXG4gICAgICBcclxuICAgICAgYXdhaXQgc2VydmljZS5jYWNoZURhdGEodGVzdEtleSwgdGVzdERhdGEsIDUwMDApO1xyXG4gICAgICBjb25zdCByZXRyaWV2ZWQgPSBhd2FpdCBzZXJ2aWNlLmdldENhY2hlZERhdGEodGVzdEtleSk7XHJcbiAgICAgIFxyXG4gICAgaWYgKCFyZXRyaWV2ZWQgfHwgKHJldHJpZXZlZCBhcyB1bmtub3duIGFzIFJlY29yZDxzdHJpbmcsIHVua25vd24+KVsndmFsaWRhdGVkJ10gIT09IHRydWUpIHtcclxuICAgICAgICBlbmhhbmNlZExvZ2dlci5lcnJvcignRGF0YVBpcGVsaW5lU3RhYmlsaXR5TW9uaXRvcicsICd2YWxpZGF0ZVVuaWZpZWREYXRhU2VydmljZUZpeCcsICdVbmlmaWVkRGF0YVNlcnZpY2UgY2FjaGUgb3BlcmF0aW9ucyBmYWlsZWQgLSBjb25zdHJ1Y3RvciBmaXggbWF5IG5vdCBiZSB3b3JraW5nJyk7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBlbmhhbmNlZExvZ2dlci5pbmZvKCdEYXRhUGlwZWxpbmVTdGFiaWxpdHlNb25pdG9yJywgJ3ZhbGlkYXRlVW5pZmllZERhdGFTZXJ2aWNlRml4JywgJ+KchSBVbmlmaWVkRGF0YVNlcnZpY2UgY29uc3RydWN0b3IgZml4IHZhbGlkYXRlZCBzdWNjZXNzZnVsbHknKTtcclxuICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBlbmhhbmNlZExvZ2dlci5lcnJvcignRGF0YVBpcGVsaW5lU3RhYmlsaXR5TW9uaXRvcicsICd2YWxpZGF0ZVVuaWZpZWREYXRhU2VydmljZUZpeCcsICfinYwgVW5pZmllZERhdGFTZXJ2aWNlIGNvbnN0cnVjdG9yIGZpeCB2YWxpZGF0aW9uIGZhaWxlZCcsIHVuZGVmaW5lZCwgZXJyb3IgYXMgdW5rbm93biBhcyBFcnJvcik7XHJcbiAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IERhdGFQaXBlbGluZVN0YWJpbGl0eU1vbml0b3I7XHJc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