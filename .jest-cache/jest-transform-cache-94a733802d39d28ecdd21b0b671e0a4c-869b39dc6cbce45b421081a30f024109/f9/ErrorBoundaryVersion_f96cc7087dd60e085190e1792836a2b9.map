{"version":3,"names":["_react","_interopRequireDefault","require","_runtimeEventBuffer","_jsxRuntime","errorCorrelationCounter","ErrorBoundaryVersion","React","Component","constructor","props","state","hasError","error","correlationId","getDerivedStateFromError","componentDidCatch","info","firstStackLine","stack","split","trim","errorTrace","id","message","name","componentStackPresent","componentStack","timeISO","Date","toISOString","console","JSON","stringify","includes","nullAccessEvents","getRecent","length","render","jsxs","style","padding","color","background","borderRadius","children","jsx","marginTop","fontSize","opacity","overflow","exports"],"sources":["ErrorBoundaryVersion.tsx"],"sourcesContent":["import React from 'react';\r\nimport { getRecent } from '../debug/runtimeEventBuffer';\r\n\r\ninterface ErrorBoundaryVersionProps {\r\n  children: React.ReactNode;\r\n}\r\n\r\ninterface ErrorBoundaryVersionState {\r\n  hasError: boolean;\r\n  error: Error | null;\r\n  correlationId: number;\r\n}\r\n\r\n// Global correlation ID counter\r\nlet errorCorrelationCounter = 0;\r\n\r\n/**\r\n * Enhanced Error boundary for API version-related failures and runtime errors.\r\n * Displays a user-friendly message and logs the error with correlation to diagnostic events.\r\n */\r\nexport class ErrorBoundaryVersion extends React.Component<\r\n  ErrorBoundaryVersionProps,\r\n  ErrorBoundaryVersionState\r\n> {\r\n  constructor(props: ErrorBoundaryVersionProps) {\r\n    super(props);\r\n    this.state = { \r\n      hasError: false, \r\n      error: null,\r\n      correlationId: 0 \r\n    };\r\n  }\r\n\r\n  static getDerivedStateFromError(error: Error) {\r\n    errorCorrelationCounter++;\r\n    return { \r\n      hasError: true, \r\n      error,\r\n      correlationId: errorCorrelationCounter\r\n    };\r\n  }\r\n\r\n  componentDidCatch(error: Error, info: React.ErrorInfo) {\r\n    const { correlationId } = this.state;\r\n    const firstStackLine = error.stack?.split('\\n')[1]?.trim() || 'No stack';\r\n    \r\n    const errorTrace = {\r\n      id: correlationId,\r\n      message: error.message,\r\n      name: error.name,\r\n      firstStackLine,\r\n      componentStackPresent: !!info.componentStack,\r\n      timeISO: new Date().toISOString()\r\n    };\r\n\r\n    // eslint-disable-next-line no-console\r\n    console.error(`[RuntimeErrorTrace] ${JSON.stringify(errorTrace)}`);\r\n\r\n    // Check for the specific \"Cannot convert undefined or null to object\" error\r\n    if (error.message.includes('Cannot convert undefined or null to object')) {\r\n      const nullAccessEvents = getRecent('NullObjectAccess', 5);\r\n      if (nullAccessEvents.length > 0) {\r\n        // eslint-disable-next-line no-console\r\n        console.error('[NullObjectCorrelation] Recent null access events:', nullAccessEvents);\r\n      }\r\n    }\r\n\r\n    // eslint-disable-next-line no-console\r\n    console.error('[ErrorBoundaryVersion] Version-related error:', error, info);\r\n  }\r\n\r\n  render() {\r\n    if (this.state.hasError) {\r\n      return (\r\n        <div style={{ padding: 24, color: '#b91c1c', background: '#fef2f2', borderRadius: 8 }}>\r\n          <h2>Runtime Error Detected (ID: {this.state.correlationId})</h2>\r\n          <p>\r\n            {this.state.error?.message ||\r\n              'A runtime error occurred. Please refresh or contact support.'}\r\n          </p>\r\n          <details style={{ marginTop: 16, fontSize: '0.9em', opacity: 0.8 }}>\r\n            <summary>Technical Details</summary>\r\n            <pre style={{ marginTop: 8, fontSize: '0.8em', overflow: 'auto' }}>\r\n              {this.state.error?.stack || 'No stack trace available'}\r\n            </pre>\r\n          </details>\r\n        </div>\r\n      );\r\n    }\r\n    return this.props.children;\r\n  }\r\n}\r\n"],"mappings":"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","ignoreList":[]}