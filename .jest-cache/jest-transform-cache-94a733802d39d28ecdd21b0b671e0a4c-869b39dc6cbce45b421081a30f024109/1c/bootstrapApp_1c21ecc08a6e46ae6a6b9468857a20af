0956e08db7cfc75ce40f003b7ae36764
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.__resetBootstrapForTesting = __resetBootstrapForTesting;
exports.bootstrapApp = bootstrapApp;
exports.isBootstrapped = isBootstrapped;
var _env = require("./env");
function _interopRequireWildcard(e, t) { if ("function" == typeof WeakMap) var r = new WeakMap(), n = new WeakMap(); return (_interopRequireWildcard = function (e, t) { if (!t && e && e.__esModule) return e; var o, i, f = { __proto__: null, default: e }; if (null === e || "object" != typeof e && "function" != typeof e) return f; if (o = t ? n : r) { if (o.has(e)) return o.get(e); o.set(e, f); } for (const t in e) "default" !== t && {}.hasOwnProperty.call(e, t) && ((i = (o = Object.defineProperty) && Object.getOwnPropertyDescriptor(e, t)) && (i.get || i.set) ? o(f, t, i) : f[t] = e[t]); return f; })(e, t); } /**
 * Bootstrap App Module - Idempotent Application Initialization
 * 
 * Provides centralized, idempotent initialization of core A1Betting platform
 * services to eliminate duplicate bootstrap executions.
 * 
 * Features:
 * - Global symbol guard prevents duplicate initialization
 * - Accurate environment detection and logging
 * - Single initialization of auth restoration, ReliabilityOrchestrator
 * - Performance timing instrumentation
 * - Force option for development/testing scenarios
 * 
 * @module bootstrap/bootstrapApp
 */
// Lazily populated logger. Tests mock the logger module and may rely on dynamic
// imports; to ensure the test mocks are used we load the logger at runtime with
// a safe console fallback. This avoids TypeErrors when a mock isn't wired up.
let logger = {
  info: console.info.bind(console),
  debug: console.debug.bind(console),
  error: console.error.bind(console),
  warn: console.warn.bind(console)
};
async function ensureLoggerLoaded() {
  try {
    // dynamic import so jest module mocks are respected
    const mod = await Promise.resolve().then(() => _interopRequireWildcard(require('../utils/logger')));
    // Some modules export a named `logger`, others export a default with `logger`.

    const modTyped = mod;
    if (modTyped.logger) {
      logger = modTyped.logger;
    } else if (modTyped.default && modTyped.default.logger) {
      logger = modTyped.default.logger;
    }
  } catch {
    // keep console fallback
  }
}

// Global symbol to prevent accidental name collisions
const BOOTSTRAP_FLAG = Symbol.for('a1.bet.platform.bootstrapped');

/**
 * Type-safe global property access for bootstrap state
 */

// Helper functions for type-safe global access
const getGlobal = () => globalThis;

/**
 * Bootstrap result information
 */

/**
 * Bootstrap options for controlling initialization behavior
 */

/**
 * Check if the application has already been bootstrapped
 * @returns {boolean} True if already bootstrapped
 */
function isBootstrapped() {
  return !!getGlobal()[BOOTSTRAP_FLAG];
}

/**
 * Mark the application as bootstrapped
 * @private
 */
function markBootstrapped() {
  getGlobal()[BOOTSTRAP_FLAG] = {
    timestamp: new Date().toISOString(),
    symbol: BOOTSTRAP_FLAG
  };
}

/**
 * Main bootstrap function with idempotency guarantee
 * 
 * Initializes core platform services in proper order:
 * 1. Environment detection & logging setup
 * 2. Error handlers registration
 * 3. Auth session restoration  
 * 4. ReliabilityOrchestrator initialization
 * 5. Web Vitals service initialization
 * 
 * @param {BootstrapOptions} options - Bootstrap configuration options
 * @returns {Promise<BootstrapResult>} Bootstrap result with timing and status
 */
async function bootstrapApp(options = {}) {
  const startTime = performance.now();
  const environment = (0, _env.getRuntimeEnv)();
  const timestamp = new Date().toISOString();

  // Ensure test-time mocks for logger are applied before any logger usage
  await ensureLoggerLoaded();

  // Initialize result structure
  const result = {
    alreadyBootstrapped: false,
    environment,
    durationMs: 0,
    timestamp,
    services: {
      authRestored: false,
      reliabilityStarted: false,
      webVitalsInitialized: false,
      errorHandlersRegistered: false
    }
  };

  // Check if already bootstrapped (unless force option is used)
  if (!options.force && isBootstrapped()) {
    result.alreadyBootstrapped = true;
    result.durationMs = performance.now() - startTime;
    logger.debug('Bootstrap skipped - already initialized', {
      environment: environment.mode,
      timestamp,
      durationMs: result.durationMs
    }, 'Bootstrap');
    return result;
  }

  // Start bootstrap process
  logger.info(`A1Betting Platform Loading - ${environment.mode === 'production' ? 'Production' : environment.mode === 'development' ? 'Development' : 'Test'} Mode`, {
    environment: environment.mode,
    source: environment.source,
    timestamp,
    userAgent: typeof navigator !== 'undefined' ? navigator.userAgent : 'N/A',
    force: options.force || false
  }, 'Bootstrap');
  try {
    // 1. Initialize error handlers
    await initializeErrorHandlers(environment);
    result.services.errorHandlersRegistered = true;

    // 2. Initialize auth session restoration (unless skipped)
    if (!options.skipAuth) {
      await initializeAuthRestoration();
      result.services.authRestored = true;
    }

    // 3. Initialize ReliabilityOrchestrator (unless skipped or in lean mode)
    if (!options.skipReliability && !isLeanMode()) {
      await initializeReliabilityOrchestrator();
      result.services.reliabilityStarted = true;
    }

    // 4. Initialize Web Vitals service (unless skipped)
    if (!options.skipWebVitals) {
      await initializeWebVitals();
      result.services.webVitalsInitialized = true;
    }

    // Mark as successfully bootstrapped
    markBootstrapped();
    const durationMs = performance.now() - startTime;
    result.durationMs = durationMs;
    logger.info(`Bootstrap ✅ Completed in ${durationMs.toFixed(1)}ms`, {
      environment: environment.mode,
      services: result.services,
      durationMs,
      timestamp
    }, 'Bootstrap');
    return result;
  } catch (error) {
    const durationMs = performance.now() - startTime;
    result.durationMs = durationMs;
    logger.error('Bootstrap failed', {
      error: error instanceof Error ? error.message : String(error),
      stack: error instanceof Error ? error.stack : undefined,
      environment: environment.mode,
      durationMs,
      services: result.services
    }, 'Bootstrap');
    throw error;
  }
}

/**
 * Initialize global error handlers
 * @private
 */
async function initializeErrorHandlers(_environment) {
  // Only register if not already done
  if (!getGlobal().__A1_ERROR_HANDLERS_REGISTERED) {
    // Global error handler
    window.addEventListener('error', event => {
      // Suppress known Vite development issues in production
      if (event.error?.message?.includes("Cannot read properties of undefined (reading 'frame')")) {
        logger.warn('Vite error overlay issue suppressed', event.error, 'Bootstrap');
        event.preventDefault();
        return;
      }

      // Suppress WebSocket connection errors that don't impact core functionality
      if (event.error?.message?.includes('WebSocket closed without opened') || event.error?.message?.includes('WebSocket connection failed') || event.error?.message?.includes('Connection refused')) {
        logger.warn('WebSocket connectivity issue (non-critical)', event.error, 'Bootstrap');
        event.preventDefault();
        return;
      }

      // Suppress fetch errors from API services (expected in development)
      if (event.error?.message?.includes('Failed to fetch') || event.error?.message?.includes('TypeError: fetch') || event.error?.message?.includes('API_UNAVAILABLE')) {
        logger.debug('API connectivity issue (non-critical)', event.error, 'Bootstrap');
        event.preventDefault();
        return;
      }

      // Log all other errors for production monitoring
      logger.error('Global error caught', {
        message: event.error?.message,
        filename: event.filename,
        lineno: event.lineno,
        colno: event.colno,
        stack: event.error?.stack
      }, 'Global');
    });

    // Unhandled promise rejection handler
    window.addEventListener('unhandledrejection', event => {
      // Suppress known Vite WebSocket errors
      if (event.reason?.message?.includes('WebSocket closed without opened') || event.reason?.message?.includes('WebSocket connection') || event.reason instanceof Error && event.reason.message.includes('WebSocket')) {
        logger.warn('Vite WebSocket error suppressed', {
          message: event.reason?.message
        }, 'Bootstrap');
        event.preventDefault();
        return;
      }

      // Suppress fetch errors from API services (expected in development)
      if (event.reason?.message?.includes('Failed to fetch') || event.reason?.message?.includes('TypeError: fetch') || event.reason?.message?.includes('API_UNAVAILABLE') || event.reason instanceof TypeError && event.reason.message.includes('fetch')) {
        logger.debug('API connectivity issue (non-critical)', {
          message: event.reason?.message
        }, 'Bootstrap');
        event.preventDefault();
        return;
      }

      // Properly serialize the error reason
      const errorDetails = {
        reasonType: typeof event.reason,
        reasonString: String(event.reason),
        message: event.reason?.message || 'No message',
        stack: event.reason?.stack || 'No stack trace',
        name: event.reason?.name || 'Unknown error',
        code: event.reason?.code,
        cause: event.reason?.cause
      };

      // Try to extract more details if it's an Error object
      if (event.reason instanceof Error) {
        errorDetails.message = event.reason.message;
        errorDetails.stack = event.reason.stack || 'No stack trace';
        errorDetails.name = event.reason.name;
      }
      logger.error('Unhandled promise rejection detected', errorDetails, 'Global');

      // Prevent the default browser handling to avoid "Uncaught (in promise)" errors
      event.preventDefault();
    });
    getGlobal().__A1_ERROR_HANDLERS_REGISTERED = true;
  }
}

/**
 * Initialize authentication session restoration 
 * @private
 */
async function initializeAuthRestoration() {
  // Lazy import to avoid circular dependencies
  const {
    _authService
  } = await Promise.resolve().then(() => _interopRequireWildcard(require('../services/authService')));

  // Only restore if authenticated (prevents duplicate restoration logs)
  if (_authService.isAuthenticated()) {
    const user = _authService.getUser();
    if (user) {
      // Mark as restored to coordinate with AuthContext
      const globalState = window;
      globalState.__A1_AUTH_RESTORED = true;

      // Log structured auth restoration (only once per bootstrap)
      logger.info('🔐 Authentication restored', {
        email: user.email,
        role: user.role,
        userId: user.id,
        timestamp: new Date().toISOString()
      }, 'Auth');
    }
  }
}

/**
 * Initialize ReliabilityOrchestrator with singleton pattern
 * @private  
 */
async function initializeReliabilityOrchestrator() {
  // Lazy import to avoid circular dependencies
  const {
    reliabilityMonitoringOrchestrator
  } = await Promise.resolve().then(() => _interopRequireWildcard(require('../services/reliabilityMonitoringOrchestrator')));

  // The orchestrator already has built-in singleton and isActive checks
  // This ensures idempotent initialization
  await reliabilityMonitoringOrchestrator.startMonitoring();
}

/**
 * Initialize Web Vitals service with idempotency
 * @private
 */
async function initializeWebVitals() {
  // Lazy import to avoid circular dependencies  
  const {
    webVitalsService
  } = await Promise.resolve().then(() => _interopRequireWildcard(require('../services/webVitalsService')));

  // The webVitalsService.init() method already handles idempotency
  webVitalsService.init();
}

/**
 * Check if lean mode is enabled (prevents heavy monitoring in development)
 * @private
 */
function isLeanMode() {
  return localStorage.getItem('DEV_LEAN_MODE') === 'true' || new URLSearchParams(window.location.search).get('lean') === 'true';
}

/**
 * Reset bootstrap state (for testing scenarios)
 * @internal Used only for testing - not part of public API
 */
function __resetBootstrapForTesting() {
  if (process.env.NODE_ENV === 'test') {
    delete getGlobal()[BOOTSTRAP_FLAG];
    delete getGlobal().__A1_ERROR_HANDLERS_REGISTERED;
  }
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfZW52IiwicmVxdWlyZSIsIl9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkIiwiZSIsInQiLCJXZWFrTWFwIiwiciIsIm4iLCJfX2VzTW9kdWxlIiwibyIsImkiLCJmIiwiX19wcm90b19fIiwiZGVmYXVsdCIsImhhcyIsImdldCIsInNldCIsImhhc093blByb3BlcnR5IiwiY2FsbCIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yIiwibG9nZ2VyIiwiaW5mbyIsImNvbnNvbGUiLCJiaW5kIiwiZGVidWciLCJlcnJvciIsIndhcm4iLCJlbnN1cmVMb2dnZXJMb2FkZWQiLCJtb2QiLCJQcm9taXNlIiwicmVzb2x2ZSIsInRoZW4iLCJtb2RUeXBlZCIsIkJPT1RTVFJBUF9GTEFHIiwiU3ltYm9sIiwiZm9yIiwiZ2V0R2xvYmFsIiwiZ2xvYmFsVGhpcyIsImlzQm9vdHN0cmFwcGVkIiwibWFya0Jvb3RzdHJhcHBlZCIsInRpbWVzdGFtcCIsIkRhdGUiLCJ0b0lTT1N0cmluZyIsInN5bWJvbCIsImJvb3RzdHJhcEFwcCIsIm9wdGlvbnMiLCJzdGFydFRpbWUiLCJwZXJmb3JtYW5jZSIsIm5vdyIsImVudmlyb25tZW50IiwiZ2V0UnVudGltZUVudiIsInJlc3VsdCIsImFscmVhZHlCb290c3RyYXBwZWQiLCJkdXJhdGlvbk1zIiwic2VydmljZXMiLCJhdXRoUmVzdG9yZWQiLCJyZWxpYWJpbGl0eVN0YXJ0ZWQiLCJ3ZWJWaXRhbHNJbml0aWFsaXplZCIsImVycm9ySGFuZGxlcnNSZWdpc3RlcmVkIiwiZm9yY2UiLCJtb2RlIiwic291cmNlIiwidXNlckFnZW50IiwibmF2aWdhdG9yIiwiaW5pdGlhbGl6ZUVycm9ySGFuZGxlcnMiLCJza2lwQXV0aCIsImluaXRpYWxpemVBdXRoUmVzdG9yYXRpb24iLCJza2lwUmVsaWFiaWxpdHkiLCJpc0xlYW5Nb2RlIiwiaW5pdGlhbGl6ZVJlbGlhYmlsaXR5T3JjaGVzdHJhdG9yIiwic2tpcFdlYlZpdGFscyIsImluaXRpYWxpemVXZWJWaXRhbHMiLCJ0b0ZpeGVkIiwiRXJyb3IiLCJtZXNzYWdlIiwiU3RyaW5nIiwic3RhY2siLCJ1bmRlZmluZWQiLCJfZW52aXJvbm1lbnQiLCJfX0ExX0VSUk9SX0hBTkRMRVJTX1JFR0lTVEVSRUQiLCJ3aW5kb3ciLCJhZGRFdmVudExpc3RlbmVyIiwiZXZlbnQiLCJpbmNsdWRlcyIsInByZXZlbnREZWZhdWx0IiwiZmlsZW5hbWUiLCJsaW5lbm8iLCJjb2xubyIsInJlYXNvbiIsIlR5cGVFcnJvciIsImVycm9yRGV0YWlscyIsInJlYXNvblR5cGUiLCJyZWFzb25TdHJpbmciLCJuYW1lIiwiY29kZSIsImNhdXNlIiwiX2F1dGhTZXJ2aWNlIiwiaXNBdXRoZW50aWNhdGVkIiwidXNlciIsImdldFVzZXIiLCJnbG9iYWxTdGF0ZSIsIl9fQTFfQVVUSF9SRVNUT1JFRCIsImVtYWlsIiwicm9sZSIsInVzZXJJZCIsImlkIiwicmVsaWFiaWxpdHlNb25pdG9yaW5nT3JjaGVzdHJhdG9yIiwic3RhcnRNb25pdG9yaW5nIiwid2ViVml0YWxzU2VydmljZSIsImluaXQiLCJsb2NhbFN0b3JhZ2UiLCJnZXRJdGVtIiwiVVJMU2VhcmNoUGFyYW1zIiwibG9jYXRpb24iLCJzZWFyY2giLCJfX3Jlc2V0Qm9vdHN0cmFwRm9yVGVzdGluZyIsInByb2Nlc3MiLCJlbnYiLCJOT0RFX0VOViJdLCJzb3VyY2VzIjpbImJvb3RzdHJhcEFwcC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcclxuICogQm9vdHN0cmFwIEFwcCBNb2R1bGUgLSBJZGVtcG90ZW50IEFwcGxpY2F0aW9uIEluaXRpYWxpemF0aW9uXHJcbiAqIFxyXG4gKiBQcm92aWRlcyBjZW50cmFsaXplZCwgaWRlbXBvdGVudCBpbml0aWFsaXphdGlvbiBvZiBjb3JlIEExQmV0dGluZyBwbGF0Zm9ybVxyXG4gKiBzZXJ2aWNlcyB0byBlbGltaW5hdGUgZHVwbGljYXRlIGJvb3RzdHJhcCBleGVjdXRpb25zLlxyXG4gKiBcclxuICogRmVhdHVyZXM6XHJcbiAqIC0gR2xvYmFsIHN5bWJvbCBndWFyZCBwcmV2ZW50cyBkdXBsaWNhdGUgaW5pdGlhbGl6YXRpb25cclxuICogLSBBY2N1cmF0ZSBlbnZpcm9ubWVudCBkZXRlY3Rpb24gYW5kIGxvZ2dpbmdcclxuICogLSBTaW5nbGUgaW5pdGlhbGl6YXRpb24gb2YgYXV0aCByZXN0b3JhdGlvbiwgUmVsaWFiaWxpdHlPcmNoZXN0cmF0b3JcclxuICogLSBQZXJmb3JtYW5jZSB0aW1pbmcgaW5zdHJ1bWVudGF0aW9uXHJcbiAqIC0gRm9yY2Ugb3B0aW9uIGZvciBkZXZlbG9wbWVudC90ZXN0aW5nIHNjZW5hcmlvc1xyXG4gKiBcclxuICogQG1vZHVsZSBib290c3RyYXAvYm9vdHN0cmFwQXBwXHJcbiAqL1xyXG5cclxuaW1wb3J0IHsgZ2V0UnVudGltZUVudiwgdHlwZSBSdW50aW1lRW52IH0gZnJvbSAnLi9lbnYnO1xyXG5cclxuLy8gTGF6aWx5IHBvcHVsYXRlZCBsb2dnZXIuIFRlc3RzIG1vY2sgdGhlIGxvZ2dlciBtb2R1bGUgYW5kIG1heSByZWx5IG9uIGR5bmFtaWNcclxuLy8gaW1wb3J0czsgdG8gZW5zdXJlIHRoZSB0ZXN0IG1vY2tzIGFyZSB1c2VkIHdlIGxvYWQgdGhlIGxvZ2dlciBhdCBydW50aW1lIHdpdGhcclxuLy8gYSBzYWZlIGNvbnNvbGUgZmFsbGJhY2suIFRoaXMgYXZvaWRzIFR5cGVFcnJvcnMgd2hlbiBhIG1vY2sgaXNuJ3Qgd2lyZWQgdXAuXHJcbmxldCBsb2dnZXI6IHtcclxuICBpbmZvOiAoLi4uYXJnczogdW5rbm93bltdKSA9PiB2b2lkO1xyXG4gIGRlYnVnOiAoLi4uYXJnczogdW5rbm93bltdKSA9PiB2b2lkO1xyXG4gIGVycm9yOiAoLi4uYXJnczogdW5rbm93bltdKSA9PiB2b2lkO1xyXG4gIHdhcm46ICguLi5hcmdzOiB1bmtub3duW10pID0+IHZvaWQ7XHJcbn0gPSB7XHJcbiAgaW5mbzogY29uc29sZS5pbmZvLmJpbmQoY29uc29sZSksXHJcbiAgZGVidWc6IGNvbnNvbGUuZGVidWcuYmluZChjb25zb2xlKSxcclxuICBlcnJvcjogY29uc29sZS5lcnJvci5iaW5kKGNvbnNvbGUpLFxyXG4gIHdhcm46IGNvbnNvbGUud2Fybi5iaW5kKGNvbnNvbGUpLFxyXG59O1xyXG5cclxuYXN5bmMgZnVuY3Rpb24gZW5zdXJlTG9nZ2VyTG9hZGVkKCk6IFByb21pc2U8dm9pZD4ge1xyXG4gIHRyeSB7XHJcbiAgICAvLyBkeW5hbWljIGltcG9ydCBzbyBqZXN0IG1vZHVsZSBtb2NrcyBhcmUgcmVzcGVjdGVkXHJcbiAgICBjb25zdCBtb2QgPSBhd2FpdCBpbXBvcnQoJy4uL3V0aWxzL2xvZ2dlcicpO1xyXG4gICAgLy8gU29tZSBtb2R1bGVzIGV4cG9ydCBhIG5hbWVkIGBsb2dnZXJgLCBvdGhlcnMgZXhwb3J0IGEgZGVmYXVsdCB3aXRoIGBsb2dnZXJgLlxyXG4gICAgdHlwZSBMb2dnZXJNb2R1bGVTaGFwZSA9IHtcclxuICAgICAgbG9nZ2VyPzogdHlwZW9mIGxvZ2dlcjtcclxuICAgICAgZGVmYXVsdD86IHsgbG9nZ2VyPzogdHlwZW9mIGxvZ2dlciB9O1xyXG4gICAgfTtcclxuXHJcbiAgICBjb25zdCBtb2RUeXBlZCA9IG1vZCBhcyB1bmtub3duIGFzIExvZ2dlck1vZHVsZVNoYXBlO1xyXG4gICAgaWYgKG1vZFR5cGVkLmxvZ2dlcikge1xyXG4gICAgICBsb2dnZXIgPSBtb2RUeXBlZC5sb2dnZXI7XHJcbiAgICB9IGVsc2UgaWYgKG1vZFR5cGVkLmRlZmF1bHQgJiYgbW9kVHlwZWQuZGVmYXVsdC5sb2dnZXIpIHtcclxuICAgICAgbG9nZ2VyID0gbW9kVHlwZWQuZGVmYXVsdC5sb2dnZXI7XHJcbiAgICB9XHJcbiAgfSBjYXRjaCB7XHJcbiAgICAvLyBrZWVwIGNvbnNvbGUgZmFsbGJhY2tcclxuICB9XHJcbn1cclxuXHJcbi8vIEdsb2JhbCBzeW1ib2wgdG8gcHJldmVudCBhY2NpZGVudGFsIG5hbWUgY29sbGlzaW9uc1xyXG5jb25zdCBCT09UU1RSQVBfRkxBRyA9IFN5bWJvbC5mb3IoJ2ExLmJldC5wbGF0Zm9ybS5ib290c3RyYXBwZWQnKTtcclxuXHJcbi8qKlxyXG4gKiBUeXBlLXNhZmUgZ2xvYmFsIHByb3BlcnR5IGFjY2VzcyBmb3IgYm9vdHN0cmFwIHN0YXRlXHJcbiAqL1xyXG50eXBlIEJvb3RzdHJhcEdsb2JhbFN0YXRlID0gUmVjb3JkPHN5bWJvbCwgdW5rbm93bj4gJiB7XHJcbiAgX19BMV9FUlJPUl9IQU5ETEVSU19SRUdJU1RFUkVEPzogYm9vbGVhbjtcclxufTtcclxuXHJcbi8vIEhlbHBlciBmdW5jdGlvbnMgZm9yIHR5cGUtc2FmZSBnbG9iYWwgYWNjZXNzXHJcbmNvbnN0IGdldEdsb2JhbCA9ICgpOiBCb290c3RyYXBHbG9iYWxTdGF0ZSA9PiBnbG9iYWxUaGlzIGFzIHVua25vd24gYXMgQm9vdHN0cmFwR2xvYmFsU3RhdGU7XHJcblxyXG4vKipcclxuICogQm9vdHN0cmFwIHJlc3VsdCBpbmZvcm1hdGlvblxyXG4gKi9cclxuZXhwb3J0IGludGVyZmFjZSBCb290c3RyYXBSZXN1bHQge1xyXG4gIGFscmVhZHlCb290c3RyYXBwZWQ6IGJvb2xlYW47XHJcbiAgZW52aXJvbm1lbnQ6IFJ1bnRpbWVFbnY7XHJcbiAgZHVyYXRpb25NczogbnVtYmVyO1xyXG4gIHRpbWVzdGFtcDogc3RyaW5nO1xyXG4gIHNlcnZpY2VzOiB7XHJcbiAgICBhdXRoUmVzdG9yZWQ6IGJvb2xlYW47XHJcbiAgICByZWxpYWJpbGl0eVN0YXJ0ZWQ6IGJvb2xlYW47XHJcbiAgICB3ZWJWaXRhbHNJbml0aWFsaXplZDogYm9vbGVhbjtcclxuICAgIGVycm9ySGFuZGxlcnNSZWdpc3RlcmVkOiBib29sZWFuO1xyXG4gIH07XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBCb290c3RyYXAgb3B0aW9ucyBmb3IgY29udHJvbGxpbmcgaW5pdGlhbGl6YXRpb24gYmVoYXZpb3JcclxuICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgQm9vdHN0cmFwT3B0aW9ucyB7XHJcbiAgLyoqIEZvcmNlIHJlLWluaXRpYWxpemF0aW9uIGV2ZW4gaWYgYWxyZWFkeSBib290c3RyYXBwZWQgKi9cclxuICBmb3JjZT86IGJvb2xlYW47XHJcbiAgLyoqIFNraXAgYXV0aGVudGljYXRpb24gcmVzdG9yYXRpb24gKGZvciB0ZXN0aW5nIHNjZW5hcmlvcykgKi9cclxuICBza2lwQXV0aD86IGJvb2xlYW47XHJcbiAgLyoqIFNraXAgcmVsaWFiaWxpdHkgbW9uaXRvcmluZyAoZm9yIGxlYW4gbW9kZSkgKi9cclxuICBza2lwUmVsaWFiaWxpdHk/OiBib29sZWFuO1xyXG4gIC8qKiBTa2lwIFdlYiBWaXRhbHMgaW5pdGlhbGl6YXRpb24gKGZvciBwZXJmb3JtYW5jZSB0ZXN0aW5nKSAqL1xyXG4gIHNraXBXZWJWaXRhbHM/OiBib29sZWFuO1xyXG59XHJcblxyXG4vKipcclxuICogQ2hlY2sgaWYgdGhlIGFwcGxpY2F0aW9uIGhhcyBhbHJlYWR5IGJlZW4gYm9vdHN0cmFwcGVkXHJcbiAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIGFscmVhZHkgYm9vdHN0cmFwcGVkXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gaXNCb290c3RyYXBwZWQoKTogYm9vbGVhbiB7XHJcbiAgcmV0dXJuICEhZ2V0R2xvYmFsKClbQk9PVFNUUkFQX0ZMQUddO1xyXG59XHJcblxyXG4vKipcclxuICogTWFyayB0aGUgYXBwbGljYXRpb24gYXMgYm9vdHN0cmFwcGVkXHJcbiAqIEBwcml2YXRlXHJcbiAqL1xyXG5mdW5jdGlvbiBtYXJrQm9vdHN0cmFwcGVkKCk6IHZvaWQge1xyXG4gIGdldEdsb2JhbCgpW0JPT1RTVFJBUF9GTEFHXSA9IHtcclxuICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxyXG4gICAgc3ltYm9sOiBCT09UU1RSQVBfRkxBRyxcclxuICB9O1xyXG59XHJcblxyXG4vKipcclxuICogTWFpbiBib290c3RyYXAgZnVuY3Rpb24gd2l0aCBpZGVtcG90ZW5jeSBndWFyYW50ZWVcclxuICogXHJcbiAqIEluaXRpYWxpemVzIGNvcmUgcGxhdGZvcm0gc2VydmljZXMgaW4gcHJvcGVyIG9yZGVyOlxyXG4gKiAxLiBFbnZpcm9ubWVudCBkZXRlY3Rpb24gJiBsb2dnaW5nIHNldHVwXHJcbiAqIDIuIEVycm9yIGhhbmRsZXJzIHJlZ2lzdHJhdGlvblxyXG4gKiAzLiBBdXRoIHNlc3Npb24gcmVzdG9yYXRpb24gIFxyXG4gKiA0LiBSZWxpYWJpbGl0eU9yY2hlc3RyYXRvciBpbml0aWFsaXphdGlvblxyXG4gKiA1LiBXZWIgVml0YWxzIHNlcnZpY2UgaW5pdGlhbGl6YXRpb25cclxuICogXHJcbiAqIEBwYXJhbSB7Qm9vdHN0cmFwT3B0aW9uc30gb3B0aW9ucyAtIEJvb3RzdHJhcCBjb25maWd1cmF0aW9uIG9wdGlvbnNcclxuICogQHJldHVybnMge1Byb21pc2U8Qm9vdHN0cmFwUmVzdWx0Pn0gQm9vdHN0cmFwIHJlc3VsdCB3aXRoIHRpbWluZyBhbmQgc3RhdHVzXHJcbiAqL1xyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gYm9vdHN0cmFwQXBwKG9wdGlvbnM6IEJvb3RzdHJhcE9wdGlvbnMgPSB7fSk6IFByb21pc2U8Qm9vdHN0cmFwUmVzdWx0PiB7XHJcbiAgY29uc3Qgc3RhcnRUaW1lID0gcGVyZm9ybWFuY2Uubm93KCk7XHJcbiAgY29uc3QgZW52aXJvbm1lbnQgPSBnZXRSdW50aW1lRW52KCk7XHJcbiAgY29uc3QgdGltZXN0YW1wID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpO1xyXG5cclxuICAvLyBFbnN1cmUgdGVzdC10aW1lIG1vY2tzIGZvciBsb2dnZXIgYXJlIGFwcGxpZWQgYmVmb3JlIGFueSBsb2dnZXIgdXNhZ2VcclxuICBhd2FpdCBlbnN1cmVMb2dnZXJMb2FkZWQoKTtcclxuXHJcbiAgLy8gSW5pdGlhbGl6ZSByZXN1bHQgc3RydWN0dXJlXHJcbiAgY29uc3QgcmVzdWx0OiBCb290c3RyYXBSZXN1bHQgPSB7XHJcbiAgICBhbHJlYWR5Qm9vdHN0cmFwcGVkOiBmYWxzZSxcclxuICAgIGVudmlyb25tZW50LFxyXG4gICAgZHVyYXRpb25NczogMCxcclxuICAgIHRpbWVzdGFtcCxcclxuICAgIHNlcnZpY2VzOiB7XHJcbiAgICAgIGF1dGhSZXN0b3JlZDogZmFsc2UsXHJcbiAgICAgIHJlbGlhYmlsaXR5U3RhcnRlZDogZmFsc2UsICBcclxuICAgICAgd2ViVml0YWxzSW5pdGlhbGl6ZWQ6IGZhbHNlLFxyXG4gICAgICBlcnJvckhhbmRsZXJzUmVnaXN0ZXJlZDogZmFsc2UsXHJcbiAgICB9LFxyXG4gIH07XHJcblxyXG4gIC8vIENoZWNrIGlmIGFscmVhZHkgYm9vdHN0cmFwcGVkICh1bmxlc3MgZm9yY2Ugb3B0aW9uIGlzIHVzZWQpXHJcbiAgaWYgKCFvcHRpb25zLmZvcmNlICYmIGlzQm9vdHN0cmFwcGVkKCkpIHtcclxuICAgIHJlc3VsdC5hbHJlYWR5Qm9vdHN0cmFwcGVkID0gdHJ1ZTtcclxuICAgIHJlc3VsdC5kdXJhdGlvbk1zID0gcGVyZm9ybWFuY2Uubm93KCkgLSBzdGFydFRpbWU7XHJcbiAgICBcclxuICAgIGxvZ2dlci5kZWJ1ZyhcclxuICAgICAgJ0Jvb3RzdHJhcCBza2lwcGVkIC0gYWxyZWFkeSBpbml0aWFsaXplZCcsXHJcbiAgICAgIHsgXHJcbiAgICAgICAgZW52aXJvbm1lbnQ6IGVudmlyb25tZW50Lm1vZGUsXHJcbiAgICAgICAgdGltZXN0YW1wLFxyXG4gICAgICAgIGR1cmF0aW9uTXM6IHJlc3VsdC5kdXJhdGlvbk1zLFxyXG4gICAgICB9LFxyXG4gICAgICAnQm9vdHN0cmFwJ1xyXG4gICAgKTtcclxuICAgIFxyXG4gICAgcmV0dXJuIHJlc3VsdDtcclxuICB9XHJcblxyXG4gIC8vIFN0YXJ0IGJvb3RzdHJhcCBwcm9jZXNzXHJcbiAgbG9nZ2VyLmluZm8oXHJcbiAgICBgQTFCZXR0aW5nIFBsYXRmb3JtIExvYWRpbmcgLSAke2Vudmlyb25tZW50Lm1vZGUgPT09ICdwcm9kdWN0aW9uJyA/ICdQcm9kdWN0aW9uJyA6IGVudmlyb25tZW50Lm1vZGUgPT09ICdkZXZlbG9wbWVudCcgPyAnRGV2ZWxvcG1lbnQnIDogJ1Rlc3QnfSBNb2RlYCxcclxuICAgIHtcclxuICAgICAgZW52aXJvbm1lbnQ6IGVudmlyb25tZW50Lm1vZGUsXHJcbiAgICAgIHNvdXJjZTogZW52aXJvbm1lbnQuc291cmNlLFxyXG4gICAgICB0aW1lc3RhbXAsXHJcbiAgICAgIHVzZXJBZ2VudDogdHlwZW9mIG5hdmlnYXRvciAhPT0gJ3VuZGVmaW5lZCcgPyBuYXZpZ2F0b3IudXNlckFnZW50IDogJ04vQScsXHJcbiAgICAgIGZvcmNlOiBvcHRpb25zLmZvcmNlIHx8IGZhbHNlLFxyXG4gICAgfSxcclxuICAgICdCb290c3RyYXAnXHJcbiAgKTtcclxuXHJcbiAgdHJ5IHtcclxuICAgIC8vIDEuIEluaXRpYWxpemUgZXJyb3IgaGFuZGxlcnNcclxuICAgIGF3YWl0IGluaXRpYWxpemVFcnJvckhhbmRsZXJzKGVudmlyb25tZW50KTtcclxuICAgIHJlc3VsdC5zZXJ2aWNlcy5lcnJvckhhbmRsZXJzUmVnaXN0ZXJlZCA9IHRydWU7XHJcblxyXG4gICAgLy8gMi4gSW5pdGlhbGl6ZSBhdXRoIHNlc3Npb24gcmVzdG9yYXRpb24gKHVubGVzcyBza2lwcGVkKVxyXG4gICAgaWYgKCFvcHRpb25zLnNraXBBdXRoKSB7XHJcbiAgICAgIGF3YWl0IGluaXRpYWxpemVBdXRoUmVzdG9yYXRpb24oKTtcclxuICAgICAgcmVzdWx0LnNlcnZpY2VzLmF1dGhSZXN0b3JlZCA9IHRydWU7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gMy4gSW5pdGlhbGl6ZSBSZWxpYWJpbGl0eU9yY2hlc3RyYXRvciAodW5sZXNzIHNraXBwZWQgb3IgaW4gbGVhbiBtb2RlKVxyXG4gICAgaWYgKCFvcHRpb25zLnNraXBSZWxpYWJpbGl0eSAmJiAhaXNMZWFuTW9kZSgpKSB7XHJcbiAgICAgIGF3YWl0IGluaXRpYWxpemVSZWxpYWJpbGl0eU9yY2hlc3RyYXRvcigpO1xyXG4gICAgICByZXN1bHQuc2VydmljZXMucmVsaWFiaWxpdHlTdGFydGVkID0gdHJ1ZTtcclxuICAgIH1cclxuXHJcbiAgICAvLyA0LiBJbml0aWFsaXplIFdlYiBWaXRhbHMgc2VydmljZSAodW5sZXNzIHNraXBwZWQpXHJcbiAgICBpZiAoIW9wdGlvbnMuc2tpcFdlYlZpdGFscykge1xyXG4gICAgICBhd2FpdCBpbml0aWFsaXplV2ViVml0YWxzKCk7XHJcbiAgICAgIHJlc3VsdC5zZXJ2aWNlcy53ZWJWaXRhbHNJbml0aWFsaXplZCA9IHRydWU7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gTWFyayBhcyBzdWNjZXNzZnVsbHkgYm9vdHN0cmFwcGVkXHJcbiAgICBtYXJrQm9vdHN0cmFwcGVkKCk7XHJcbiAgICBcclxuICAgIGNvbnN0IGR1cmF0aW9uTXMgPSBwZXJmb3JtYW5jZS5ub3coKSAtIHN0YXJ0VGltZTtcclxuICAgIHJlc3VsdC5kdXJhdGlvbk1zID0gZHVyYXRpb25NcztcclxuXHJcbiAgICBsb2dnZXIuaW5mbyhcclxuICAgICAgYEJvb3RzdHJhcCDinIUgQ29tcGxldGVkIGluICR7ZHVyYXRpb25Ncy50b0ZpeGVkKDEpfW1zYCxcclxuICAgICAge1xyXG4gICAgICAgIGVudmlyb25tZW50OiBlbnZpcm9ubWVudC5tb2RlLFxyXG4gICAgICAgIHNlcnZpY2VzOiByZXN1bHQuc2VydmljZXMsXHJcbiAgICAgICAgZHVyYXRpb25NcyxcclxuICAgICAgICB0aW1lc3RhbXAsXHJcbiAgICAgIH0sXHJcbiAgICAgICdCb290c3RyYXAnXHJcbiAgICApO1xyXG5cclxuICAgIHJldHVybiByZXN1bHQ7XHJcblxyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zdCBkdXJhdGlvbk1zID0gcGVyZm9ybWFuY2Uubm93KCkgLSBzdGFydFRpbWU7XHJcbiAgICByZXN1bHQuZHVyYXRpb25NcyA9IGR1cmF0aW9uTXM7XHJcblxyXG4gICAgbG9nZ2VyLmVycm9yKFxyXG4gICAgICAnQm9vdHN0cmFwIGZhaWxlZCcsXHJcbiAgICAgIHtcclxuICAgICAgICBlcnJvcjogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiBTdHJpbmcoZXJyb3IpLFxyXG4gICAgICAgIHN0YWNrOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3Iuc3RhY2sgOiB1bmRlZmluZWQsXHJcbiAgICAgICAgZW52aXJvbm1lbnQ6IGVudmlyb25tZW50Lm1vZGUsXHJcbiAgICAgICAgZHVyYXRpb25NcyxcclxuICAgICAgICBzZXJ2aWNlczogcmVzdWx0LnNlcnZpY2VzLFxyXG4gICAgICB9LFxyXG4gICAgICAnQm9vdHN0cmFwJ1xyXG4gICAgKTtcclxuXHJcbiAgICB0aHJvdyBlcnJvcjtcclxuICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBJbml0aWFsaXplIGdsb2JhbCBlcnJvciBoYW5kbGVyc1xyXG4gKiBAcHJpdmF0ZVxyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gaW5pdGlhbGl6ZUVycm9ySGFuZGxlcnMoX2Vudmlyb25tZW50OiBSdW50aW1lRW52KTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgLy8gT25seSByZWdpc3RlciBpZiBub3QgYWxyZWFkeSBkb25lXHJcbiAgaWYgKCFnZXRHbG9iYWwoKS5fX0ExX0VSUk9SX0hBTkRMRVJTX1JFR0lTVEVSRUQpIHtcclxuICAgIC8vIEdsb2JhbCBlcnJvciBoYW5kbGVyXHJcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignZXJyb3InLCAoZXZlbnQpID0+IHtcclxuICAgICAgLy8gU3VwcHJlc3Mga25vd24gVml0ZSBkZXZlbG9wbWVudCBpc3N1ZXMgaW4gcHJvZHVjdGlvblxyXG4gICAgICBpZiAoZXZlbnQuZXJyb3I/Lm1lc3NhZ2U/LmluY2x1ZGVzKFwiQ2Fubm90IHJlYWQgcHJvcGVydGllcyBvZiB1bmRlZmluZWQgKHJlYWRpbmcgJ2ZyYW1lJylcIikpIHtcclxuICAgICAgICBsb2dnZXIud2FybignVml0ZSBlcnJvciBvdmVybGF5IGlzc3VlIHN1cHByZXNzZWQnLCBldmVudC5lcnJvciwgJ0Jvb3RzdHJhcCcpO1xyXG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyBTdXBwcmVzcyBXZWJTb2NrZXQgY29ubmVjdGlvbiBlcnJvcnMgdGhhdCBkb24ndCBpbXBhY3QgY29yZSBmdW5jdGlvbmFsaXR5XHJcbiAgICAgIGlmIChcclxuICAgICAgICBldmVudC5lcnJvcj8ubWVzc2FnZT8uaW5jbHVkZXMoJ1dlYlNvY2tldCBjbG9zZWQgd2l0aG91dCBvcGVuZWQnKSB8fFxyXG4gICAgICAgIGV2ZW50LmVycm9yPy5tZXNzYWdlPy5pbmNsdWRlcygnV2ViU29ja2V0IGNvbm5lY3Rpb24gZmFpbGVkJykgfHxcclxuICAgICAgICBldmVudC5lcnJvcj8ubWVzc2FnZT8uaW5jbHVkZXMoJ0Nvbm5lY3Rpb24gcmVmdXNlZCcpXHJcbiAgICAgICkge1xyXG4gICAgICAgIGxvZ2dlci53YXJuKCdXZWJTb2NrZXQgY29ubmVjdGl2aXR5IGlzc3VlIChub24tY3JpdGljYWwpJywgZXZlbnQuZXJyb3IsICdCb290c3RyYXAnKTtcclxuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG5cclxuICAgICAgLy8gU3VwcHJlc3MgZmV0Y2ggZXJyb3JzIGZyb20gQVBJIHNlcnZpY2VzIChleHBlY3RlZCBpbiBkZXZlbG9wbWVudClcclxuICAgICAgaWYgKFxyXG4gICAgICAgIGV2ZW50LmVycm9yPy5tZXNzYWdlPy5pbmNsdWRlcygnRmFpbGVkIHRvIGZldGNoJykgfHxcclxuICAgICAgICBldmVudC5lcnJvcj8ubWVzc2FnZT8uaW5jbHVkZXMoJ1R5cGVFcnJvcjogZmV0Y2gnKSB8fFxyXG4gICAgICAgIGV2ZW50LmVycm9yPy5tZXNzYWdlPy5pbmNsdWRlcygnQVBJX1VOQVZBSUxBQkxFJylcclxuICAgICAgKSB7XHJcbiAgICAgICAgbG9nZ2VyLmRlYnVnKCdBUEkgY29ubmVjdGl2aXR5IGlzc3VlIChub24tY3JpdGljYWwpJywgZXZlbnQuZXJyb3IsICdCb290c3RyYXAnKTtcclxuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG5cclxuICAgICAgLy8gTG9nIGFsbCBvdGhlciBlcnJvcnMgZm9yIHByb2R1Y3Rpb24gbW9uaXRvcmluZ1xyXG4gICAgICBsb2dnZXIuZXJyb3IoXHJcbiAgICAgICAgJ0dsb2JhbCBlcnJvciBjYXVnaHQnLFxyXG4gICAgICAgIHtcclxuICAgICAgICAgIG1lc3NhZ2U6IGV2ZW50LmVycm9yPy5tZXNzYWdlLFxyXG4gICAgICAgICAgZmlsZW5hbWU6IGV2ZW50LmZpbGVuYW1lLFxyXG4gICAgICAgICAgbGluZW5vOiBldmVudC5saW5lbm8sXHJcbiAgICAgICAgICBjb2xubzogZXZlbnQuY29sbm8sXHJcbiAgICAgICAgICBzdGFjazogZXZlbnQuZXJyb3I/LnN0YWNrLFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgJ0dsb2JhbCdcclxuICAgICAgKTtcclxuICAgIH0pO1xyXG5cclxuICAgIC8vIFVuaGFuZGxlZCBwcm9taXNlIHJlamVjdGlvbiBoYW5kbGVyXHJcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigndW5oYW5kbGVkcmVqZWN0aW9uJywgKGV2ZW50KSA9PiB7XHJcbiAgICAgIC8vIFN1cHByZXNzIGtub3duIFZpdGUgV2ViU29ja2V0IGVycm9yc1xyXG4gICAgICBpZiAoXHJcbiAgICAgICAgZXZlbnQucmVhc29uPy5tZXNzYWdlPy5pbmNsdWRlcygnV2ViU29ja2V0IGNsb3NlZCB3aXRob3V0IG9wZW5lZCcpIHx8XHJcbiAgICAgICAgZXZlbnQucmVhc29uPy5tZXNzYWdlPy5pbmNsdWRlcygnV2ViU29ja2V0IGNvbm5lY3Rpb24nKSB8fFxyXG4gICAgICAgIChldmVudC5yZWFzb24gaW5zdGFuY2VvZiBFcnJvciAmJiBldmVudC5yZWFzb24ubWVzc2FnZS5pbmNsdWRlcygnV2ViU29ja2V0JykpXHJcbiAgICAgICkge1xyXG4gICAgICAgIGxvZ2dlci53YXJuKCdWaXRlIFdlYlNvY2tldCBlcnJvciBzdXBwcmVzc2VkJywgeyBtZXNzYWdlOiBldmVudC5yZWFzb24/Lm1lc3NhZ2UgfSwgJ0Jvb3RzdHJhcCcpO1xyXG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyBTdXBwcmVzcyBmZXRjaCBlcnJvcnMgZnJvbSBBUEkgc2VydmljZXMgKGV4cGVjdGVkIGluIGRldmVsb3BtZW50KVxyXG4gICAgICBpZiAoXHJcbiAgICAgICAgZXZlbnQucmVhc29uPy5tZXNzYWdlPy5pbmNsdWRlcygnRmFpbGVkIHRvIGZldGNoJykgfHxcclxuICAgICAgICBldmVudC5yZWFzb24/Lm1lc3NhZ2U/LmluY2x1ZGVzKCdUeXBlRXJyb3I6IGZldGNoJykgfHxcclxuICAgICAgICBldmVudC5yZWFzb24/Lm1lc3NhZ2U/LmluY2x1ZGVzKCdBUElfVU5BVkFJTEFCTEUnKSB8fFxyXG4gICAgICAgIChldmVudC5yZWFzb24gaW5zdGFuY2VvZiBUeXBlRXJyb3IgJiYgZXZlbnQucmVhc29uLm1lc3NhZ2UuaW5jbHVkZXMoJ2ZldGNoJykpXHJcbiAgICAgICkge1xyXG4gICAgICAgIGxvZ2dlci5kZWJ1ZyhcclxuICAgICAgICAgICdBUEkgY29ubmVjdGl2aXR5IGlzc3VlIChub24tY3JpdGljYWwpJyxcclxuICAgICAgICAgIHsgbWVzc2FnZTogZXZlbnQucmVhc29uPy5tZXNzYWdlIH0sXHJcbiAgICAgICAgICAnQm9vdHN0cmFwJ1xyXG4gICAgICAgICk7XHJcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIFByb3Blcmx5IHNlcmlhbGl6ZSB0aGUgZXJyb3IgcmVhc29uXHJcbiAgICAgIGNvbnN0IGVycm9yRGV0YWlscyA9IHtcclxuICAgICAgICByZWFzb25UeXBlOiB0eXBlb2YgZXZlbnQucmVhc29uLFxyXG4gICAgICAgIHJlYXNvblN0cmluZzogU3RyaW5nKGV2ZW50LnJlYXNvbiksXHJcbiAgICAgICAgbWVzc2FnZTogZXZlbnQucmVhc29uPy5tZXNzYWdlIHx8ICdObyBtZXNzYWdlJyxcclxuICAgICAgICBzdGFjazogZXZlbnQucmVhc29uPy5zdGFjayB8fCAnTm8gc3RhY2sgdHJhY2UnLFxyXG4gICAgICAgIG5hbWU6IGV2ZW50LnJlYXNvbj8ubmFtZSB8fCAnVW5rbm93biBlcnJvcicsXHJcbiAgICAgICAgY29kZTogZXZlbnQucmVhc29uPy5jb2RlLFxyXG4gICAgICAgIGNhdXNlOiBldmVudC5yZWFzb24/LmNhdXNlLFxyXG4gICAgICB9O1xyXG5cclxuICAgICAgLy8gVHJ5IHRvIGV4dHJhY3QgbW9yZSBkZXRhaWxzIGlmIGl0J3MgYW4gRXJyb3Igb2JqZWN0XHJcbiAgICAgIGlmIChldmVudC5yZWFzb24gaW5zdGFuY2VvZiBFcnJvcikge1xyXG4gICAgICAgIGVycm9yRGV0YWlscy5tZXNzYWdlID0gZXZlbnQucmVhc29uLm1lc3NhZ2U7XHJcbiAgICAgICAgZXJyb3JEZXRhaWxzLnN0YWNrID0gZXZlbnQucmVhc29uLnN0YWNrIHx8ICdObyBzdGFjayB0cmFjZSc7XHJcbiAgICAgICAgZXJyb3JEZXRhaWxzLm5hbWUgPSBldmVudC5yZWFzb24ubmFtZTtcclxuICAgICAgfVxyXG5cclxuICAgICAgbG9nZ2VyLmVycm9yKCdVbmhhbmRsZWQgcHJvbWlzZSByZWplY3Rpb24gZGV0ZWN0ZWQnLCBlcnJvckRldGFpbHMsICdHbG9iYWwnKTtcclxuXHJcbiAgICAgIC8vIFByZXZlbnQgdGhlIGRlZmF1bHQgYnJvd3NlciBoYW5kbGluZyB0byBhdm9pZCBcIlVuY2F1Z2h0IChpbiBwcm9taXNlKVwiIGVycm9yc1xyXG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgZ2V0R2xvYmFsKCkuX19BMV9FUlJPUl9IQU5ETEVSU19SRUdJU1RFUkVEID0gdHJ1ZTtcclxuICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBJbml0aWFsaXplIGF1dGhlbnRpY2F0aW9uIHNlc3Npb24gcmVzdG9yYXRpb24gXHJcbiAqIEBwcml2YXRlXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiBpbml0aWFsaXplQXV0aFJlc3RvcmF0aW9uKCk6IFByb21pc2U8dm9pZD4ge1xyXG4gIC8vIExhenkgaW1wb3J0IHRvIGF2b2lkIGNpcmN1bGFyIGRlcGVuZGVuY2llc1xyXG4gIGNvbnN0IHsgX2F1dGhTZXJ2aWNlIH0gPSBhd2FpdCBpbXBvcnQoJy4uL3NlcnZpY2VzL2F1dGhTZXJ2aWNlJyk7XHJcbiAgXHJcbiAgLy8gT25seSByZXN0b3JlIGlmIGF1dGhlbnRpY2F0ZWQgKHByZXZlbnRzIGR1cGxpY2F0ZSByZXN0b3JhdGlvbiBsb2dzKVxyXG4gIGlmIChfYXV0aFNlcnZpY2UuaXNBdXRoZW50aWNhdGVkKCkpIHtcclxuICAgIGNvbnN0IHVzZXIgPSBfYXV0aFNlcnZpY2UuZ2V0VXNlcigpO1xyXG4gICAgaWYgKHVzZXIpIHtcclxuICAgICAgLy8gTWFyayBhcyByZXN0b3JlZCB0byBjb29yZGluYXRlIHdpdGggQXV0aENvbnRleHRcclxuICAgICAgY29uc3QgZ2xvYmFsU3RhdGUgPSB3aW5kb3cgYXMgdHlwZW9mIHdpbmRvdyAmIHsgX19BMV9BVVRIX1JFU1RPUkVEPzogYm9vbGVhbiB9O1xyXG4gICAgICBnbG9iYWxTdGF0ZS5fX0ExX0FVVEhfUkVTVE9SRUQgPSB0cnVlO1xyXG4gICAgICBcclxuICAgICAgLy8gTG9nIHN0cnVjdHVyZWQgYXV0aCByZXN0b3JhdGlvbiAob25seSBvbmNlIHBlciBib290c3RyYXApXHJcbiAgICAgIGxvZ2dlci5pbmZvKFxyXG4gICAgICAgICfwn5SQIEF1dGhlbnRpY2F0aW9uIHJlc3RvcmVkJyxcclxuICAgICAgICB7XHJcbiAgICAgICAgICBlbWFpbDogdXNlci5lbWFpbCxcclxuICAgICAgICAgIHJvbGU6IHVzZXIucm9sZSxcclxuICAgICAgICAgIHVzZXJJZDogdXNlci5pZCxcclxuICAgICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgJ0F1dGgnXHJcbiAgICAgICk7XHJcbiAgICB9XHJcbiAgfVxyXG59XHJcblxyXG4vKipcclxuICogSW5pdGlhbGl6ZSBSZWxpYWJpbGl0eU9yY2hlc3RyYXRvciB3aXRoIHNpbmdsZXRvbiBwYXR0ZXJuXHJcbiAqIEBwcml2YXRlICBcclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIGluaXRpYWxpemVSZWxpYWJpbGl0eU9yY2hlc3RyYXRvcigpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAvLyBMYXp5IGltcG9ydCB0byBhdm9pZCBjaXJjdWxhciBkZXBlbmRlbmNpZXNcclxuICBjb25zdCB7IHJlbGlhYmlsaXR5TW9uaXRvcmluZ09yY2hlc3RyYXRvciB9ID0gYXdhaXQgaW1wb3J0KCcuLi9zZXJ2aWNlcy9yZWxpYWJpbGl0eU1vbml0b3JpbmdPcmNoZXN0cmF0b3InKTtcclxuICBcclxuICAvLyBUaGUgb3JjaGVzdHJhdG9yIGFscmVhZHkgaGFzIGJ1aWx0LWluIHNpbmdsZXRvbiBhbmQgaXNBY3RpdmUgY2hlY2tzXHJcbiAgLy8gVGhpcyBlbnN1cmVzIGlkZW1wb3RlbnQgaW5pdGlhbGl6YXRpb25cclxuICBhd2FpdCByZWxpYWJpbGl0eU1vbml0b3JpbmdPcmNoZXN0cmF0b3Iuc3RhcnRNb25pdG9yaW5nKCk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBJbml0aWFsaXplIFdlYiBWaXRhbHMgc2VydmljZSB3aXRoIGlkZW1wb3RlbmN5XHJcbiAqIEBwcml2YXRlXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiBpbml0aWFsaXplV2ViVml0YWxzKCk6IFByb21pc2U8dm9pZD4ge1xyXG4gIC8vIExhenkgaW1wb3J0IHRvIGF2b2lkIGNpcmN1bGFyIGRlcGVuZGVuY2llcyAgXHJcbiAgY29uc3QgeyB3ZWJWaXRhbHNTZXJ2aWNlIH0gPSBhd2FpdCBpbXBvcnQoJy4uL3NlcnZpY2VzL3dlYlZpdGFsc1NlcnZpY2UnKTtcclxuICBcclxuICAvLyBUaGUgd2ViVml0YWxzU2VydmljZS5pbml0KCkgbWV0aG9kIGFscmVhZHkgaGFuZGxlcyBpZGVtcG90ZW5jeVxyXG4gIHdlYlZpdGFsc1NlcnZpY2UuaW5pdCgpO1xyXG59XHJcblxyXG4vKipcclxuICogQ2hlY2sgaWYgbGVhbiBtb2RlIGlzIGVuYWJsZWQgKHByZXZlbnRzIGhlYXZ5IG1vbml0b3JpbmcgaW4gZGV2ZWxvcG1lbnQpXHJcbiAqIEBwcml2YXRlXHJcbiAqL1xyXG5mdW5jdGlvbiBpc0xlYW5Nb2RlKCk6IGJvb2xlYW4ge1xyXG4gIHJldHVybiAoXHJcbiAgICBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnREVWX0xFQU5fTU9ERScpID09PSAndHJ1ZScgfHxcclxuICAgIG5ldyBVUkxTZWFyY2hQYXJhbXMod2luZG93LmxvY2F0aW9uLnNlYXJjaCkuZ2V0KCdsZWFuJykgPT09ICd0cnVlJ1xyXG4gICk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBSZXNldCBib290c3RyYXAgc3RhdGUgKGZvciB0ZXN0aW5nIHNjZW5hcmlvcylcclxuICogQGludGVybmFsIFVzZWQgb25seSBmb3IgdGVzdGluZyAtIG5vdCBwYXJ0IG9mIHB1YmxpYyBBUElcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3Jlc2V0Qm9vdHN0cmFwRm9yVGVzdGluZygpOiB2b2lkIHtcclxuICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICd0ZXN0Jykge1xyXG4gICAgZGVsZXRlIGdldEdsb2JhbCgpW0JPT1RTVFJBUF9GTEFHXTtcclxuICAgIGRlbGV0ZSBnZXRHbG9iYWwoKS5fX0ExX0VSUk9SX0hBTkRMRVJTX1JFR0lTVEVS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