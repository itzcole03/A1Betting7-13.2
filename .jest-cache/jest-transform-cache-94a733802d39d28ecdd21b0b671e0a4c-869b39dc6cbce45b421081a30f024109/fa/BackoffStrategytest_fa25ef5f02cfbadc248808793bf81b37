9c991ffbf7e717f23e5e300ef8fc4aae
"use strict";

var _BackoffStrategy = require("../BackoffStrategy");
/**
 * BackoffStrategy Tests
 * 
 * Tests for the adaptive backoff strategy including:
 * - Deterministic jitter with seeded RNG
 * - Capped backoff sequence
 * - Reset functionality
 * - Edge cases and configuration validation
 */

describe('BackoffStrategy', () => {
  describe('Basic backoff sequence', () => {
    it('generates correct base delay sequence', () => {
      const strategy = new _BackoffStrategy.BackoffStrategy({
        baseDelaysMs: [1000, 2000, 4000],
        jitterRatio: 0,
        maxAttempts: 5
      });
      expect(strategy.nextDelay()).toBe(1000);
      expect(strategy.nextDelay()).toBe(2000);
      expect(strategy.nextDelay()).toBe(4000);
      expect(strategy.nextDelay()).toBe(4000); // Repeats last delay
      expect(strategy.nextDelay()).toBe(4000);
    });
    it('respects delay cap', () => {
      const strategy = new _BackoffStrategy.BackoffStrategy({
        baseDelaysMs: [1000, 5000, 10000],
        capDelayMs: 6000,
        jitterRatio: 0,
        maxAttempts: 5
      });
      expect(strategy.nextDelay()).toBe(1000);
      expect(strategy.nextDelay()).toBe(5000);
      expect(strategy.nextDelay()).toBe(6000); // Capped at 6000
    });
    it('returns null when max attempts exceeded', () => {
      const strategy = new _BackoffStrategy.BackoffStrategy({
        baseDelaysMs: [1000],
        maxAttempts: 2
      });
      expect(strategy.nextDelay()).toBe(1000);
      expect(strategy.nextDelay()).toBe(1000);
      expect(strategy.nextDelay()).toBeNull();
      expect(strategy.hasExceededMaxAttempts()).toBe(true);
    });
  });
  describe('Jitter functionality', () => {
    it('applies deterministic jitter with seeded RNG', () => {
      const strategy = new _BackoffStrategy.BackoffStrategy({
        baseDelaysMs: [1000],
        jitterRatio: 0.2,
        seed: 12345,
        maxAttempts: 3
      });
      const delay1 = strategy.nextDelay();
      const delay2 = strategy.nextDelay();
      const delay3 = strategy.nextDelay();

      // With same seed, should get same sequence
      const strategy2 = new _BackoffStrategy.BackoffStrategy({
        baseDelaysMs: [1000],
        jitterRatio: 0.2,
        seed: 12345,
        maxAttempts: 3
      });
      expect(strategy2.nextDelay()).toBe(delay1);
      expect(strategy2.nextDelay()).toBe(delay2);
      expect(strategy2.nextDelay()).toBe(delay3);
    });
    it('keeps jittered values within expected bounds', () => {
      const baseDelay = 2000;
      const jitterRatio = 0.3;
      const strategy = new _BackoffStrategy.BackoffStrategy({
        baseDelaysMs: [baseDelay],
        jitterRatio,
        seed: 42,
        maxAttempts: 100
      });
      const {
        min,
        max
      } = _BackoffStrategy.BackoffStrategy.calculateJitterBounds(baseDelay, jitterRatio);

      // Test multiple values to ensure they're all within bounds
      for (let i = 0; i < 50; i++) {
        const delay = strategy.nextDelay();
        expect(delay).not.toBeNull();
        expect(delay).toBeGreaterThanOrEqual(min);
        expect(delay).toBeLessThanOrEqual(max);
      }
    });
    it('enforces minimum delay of 100ms', () => {
      const strategy = new _BackoffStrategy.BackoffStrategy({
        baseDelaysMs: [200],
        jitterRatio: 0.9,
        // High jitter could theoretically go below 100ms
        seed: 999,
        maxAttempts: 10
      });
      for (let i = 0; i < 5; i++) {
        const delay = strategy.nextDelay();
        expect(delay).toBeGreaterThanOrEqual(100);
      }
    });
  });
  describe('Reset functionality', () => {
    it('resets attempt counter and allows new sequence', () => {
      const strategy = new _BackoffStrategy.BackoffStrategy({
        baseDelaysMs: [1000, 2000],
        jitterRatio: 0,
        maxAttempts: 3
      });

      // Use up attempts
      expect(strategy.nextDelay()).toBe(1000);
      expect(strategy.nextDelay()).toBe(2000);
      expect(strategy.nextDelay()).toBe(2000);
      expect(strategy.nextDelay()).toBeNull(); // Max exceeded

      // Reset and try again
      strategy.reset();
      expect(strategy.getCurrentAttempt()).toBe(0);
      expect(strategy.hasExceededMaxAttempts()).toBe(false);
      expect(strategy.nextDelay()).toBe(1000);
    });
  });
  describe('Preview functionality', () => {
    it('peeks at next delay without consuming attempt', () => {
      const strategy = new _BackoffStrategy.BackoffStrategy({
        baseDelaysMs: [1000, 2000, 4000],
        jitterRatio: 0,
        maxAttempts: 5
      });
      expect(strategy.peekNextDelay()).toBe(1000);
      expect(strategy.getCurrentAttempt()).toBe(0); // No attempt consumed

      expect(strategy.nextDelay()).toBe(1000);
      expect(strategy.getCurrentAttempt()).toBe(1);
      expect(strategy.peekNextDelay()).toBe(2000);
      expect(strategy.getCurrentAttempt()).toBe(1); // Still 1
    });
  });
  describe('Configuration validation', () => {
    it('uses default configuration when no options provided', () => {
      const strategy = new _BackoffStrategy.BackoffStrategy();
      const config = strategy.getConfig();
      expect(config.baseDelays).toEqual([1000, 2000, 4000, 8000, 12000]);
      expect(config.capDelay).toBe(12000);
      expect(config.jitterRatio).toBe(0.2);
      expect(config.maxAttempts).toBe(8);
    });
    it('clamps jitter ratio to valid range', () => {
      const strategy1 = new _BackoffStrategy.BackoffStrategy({
        jitterRatio: -0.5
      });
      expect(strategy1.getConfig().jitterRatio).toBe(0);
      const strategy2 = new _BackoffStrategy.BackoffStrategy({
        jitterRatio: 1.5
      });
      expect(strategy2.getConfig().jitterRatio).toBe(1);
    });
    it('provides configuration summary', () => {
      const options = {
        baseDelaysMs: [500, 1000],
        capDelayMs: 5000,
        jitterRatio: 0.1,
        maxAttempts: 3
      };
      const strategy = new _BackoffStrategy.BackoffStrategy(options);
      const config = strategy.getConfig();
      expect(config.baseDelays).toEqual(options.baseDelaysMs);
      expect(config.capDelay).toBe(options.capDelayMs);
      expect(config.jitterRatio).toBe(options.jitterRatio);
      expect(config.maxAttempts).toBe(options.maxAttempts);
      expect(config.currentAttempt).toBe(0);
    });
  });
  describe('Static factory methods', () => {
    it('creates immediate strategy for testing', () => {
      const strategy = _BackoffStrategy.BackoffStrategy.createImmediateStrategy();
      const config = strategy.getConfig();
      expect(config.baseDelays).toEqual([100, 100, 100]);
      expect(config.capDelay).toBe(100);
      expect(config.jitterRatio).toBe(0);
      expect(config.maxAttempts).toBe(3);
    });
    it('creates aggressive strategy', () => {
      const strategy = _BackoffStrategy.BackoffStrategy.createAggressiveStrategy();
      const config = strategy.getConfig();
      expect(config.baseDelays).toEqual([500, 1000, 2000, 4000]);
      expect(config.capDelay).toBe(4000);
      expect(config.jitterRatio).toBe(0.1);
      expect(config.maxAttempts).toBe(10);
    });
    it('creates production strategy', () => {
      const strategy = _BackoffStrategy.BackoffStrategy.createProductionStrategy();
      const config = strategy.getConfig();
      expect(config.baseDelays).toEqual([1000, 2000, 4000, 8000, 12000]);
      expect(config.capDelay).toBe(12000);
      expect(config.jitterRatio).toBe(0.2);
      expect(config.maxAttempts).toBe(8);
    });
  });
  describe('Jitter bounds calculation', () => {
    it('calculates correct jitter bounds', () => {
      const bounds1 = _BackoffStrategy.BackoffStrategy.calculateJitterBounds(1000, 0.2);
      expect(bounds1.min).toBe(800); // 1000 - (1000 * 0.2)
      expect(bounds1.max).toBe(1200); // 1000 + (1000 * 0.2)

      const bounds2 = _BackoffStrategy.BackoffStrategy.calculateJitterBounds(500, 0.5);
      expect(bounds2.min).toBe(250); // 500 - (500 * 0.5)
      expect(bounds2.max).toBe(750); // 500 + (500 * 0.5)
    });
    it('enforces minimum delay in bounds calculation', () => {
      const bounds = _BackoffStrategy.BackoffStrategy.calculateJitterBounds(150, 0.8);
      expect(bounds.min).toBe(100); // Should be clamped to minimum
      expect(bounds.max).toBe(270); // 150 + (150 * 0.8)
    });
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfQmFja29mZlN0cmF0ZWd5IiwicmVxdWlyZSIsImRlc2NyaWJlIiwiaXQiLCJzdHJhdGVneSIsIkJhY2tvZmZTdHJhdGVneSIsImJhc2VEZWxheXNNcyIsImppdHRlclJhdGlvIiwibWF4QXR0ZW1wdHMiLCJleHBlY3QiLCJuZXh0RGVsYXkiLCJ0b0JlIiwiY2FwRGVsYXlNcyIsInRvQmVOdWxsIiwiaGFzRXhjZWVkZWRNYXhBdHRlbXB0cyIsInNlZWQiLCJkZWxheTEiLCJkZWxheTIiLCJkZWxheTMiLCJzdHJhdGVneTIiLCJiYXNlRGVsYXkiLCJtaW4iLCJtYXgiLCJjYWxjdWxhdGVKaXR0ZXJCb3VuZHMiLCJpIiwiZGVsYXkiLCJub3QiLCJ0b0JlR3JlYXRlclRoYW5PckVxdWFsIiwidG9CZUxlc3NUaGFuT3JFcXVhbCIsInJlc2V0IiwiZ2V0Q3VycmVudEF0dGVtcHQiLCJwZWVrTmV4dERlbGF5IiwiY29uZmlnIiwiZ2V0Q29uZmlnIiwiYmFzZURlbGF5cyIsInRvRXF1YWwiLCJjYXBEZWxheSIsInN0cmF0ZWd5MSIsIm9wdGlvbnMiLCJjdXJyZW50QXR0ZW1wdCIsImNyZWF0ZUltbWVkaWF0ZVN0cmF0ZWd5IiwiY3JlYXRlQWdncmVzc2l2ZVN0cmF0ZWd5IiwiY3JlYXRlUHJvZHVjdGlvblN0cmF0ZWd5IiwiYm91bmRzMSIsImJvdW5kczIiLCJib3VuZHMiXSwic291cmNlcyI6WyJCYWNrb2ZmU3RyYXRlZ3kudGVzdC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcclxuICogQmFja29mZlN0cmF0ZWd5IFRlc3RzXHJcbiAqIFxyXG4gKiBUZXN0cyBmb3IgdGhlIGFkYXB0aXZlIGJhY2tvZmYgc3RyYXRlZ3kgaW5jbHVkaW5nOlxyXG4gKiAtIERldGVybWluaXN0aWMgaml0dGVyIHdpdGggc2VlZGVkIFJOR1xyXG4gKiAtIENhcHBlZCBiYWNrb2ZmIHNlcXVlbmNlXHJcbiAqIC0gUmVzZXQgZnVuY3Rpb25hbGl0eVxyXG4gKiAtIEVkZ2UgY2FzZXMgYW5kIGNvbmZpZ3VyYXRpb24gdmFsaWRhdGlvblxyXG4gKi9cclxuXHJcbmltcG9ydCB7IEJhY2tvZmZTdHJhdGVneSB9IGZyb20gJy4uL0JhY2tvZmZTdHJhdGVneSc7XHJcblxyXG5kZXNjcmliZSgnQmFja29mZlN0cmF0ZWd5JywgKCkgPT4ge1xyXG4gIGRlc2NyaWJlKCdCYXNpYyBiYWNrb2ZmIHNlcXVlbmNlJywgKCkgPT4ge1xyXG4gICAgaXQoJ2dlbmVyYXRlcyBjb3JyZWN0IGJhc2UgZGVsYXkgc2VxdWVuY2UnLCAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IHN0cmF0ZWd5ID0gbmV3IEJhY2tvZmZTdHJhdGVneSh7XHJcbiAgICAgICAgYmFzZURlbGF5c01zOiBbMTAwMCwgMjAwMCwgNDAwMF0sXHJcbiAgICAgICAgaml0dGVyUmF0aW86IDAsXHJcbiAgICAgICAgbWF4QXR0ZW1wdHM6IDVcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBleHBlY3Qoc3RyYXRlZ3kubmV4dERlbGF5KCkpLnRvQmUoMTAwMCk7XHJcbiAgICAgIGV4cGVjdChzdHJhdGVneS5uZXh0RGVsYXkoKSkudG9CZSgyMDAwKTtcclxuICAgICAgZXhwZWN0KHN0cmF0ZWd5Lm5leHREZWxheSgpKS50b0JlKDQwMDApO1xyXG4gICAgICBleHBlY3Qoc3RyYXRlZ3kubmV4dERlbGF5KCkpLnRvQmUoNDAwMCk7IC8vIFJlcGVhdHMgbGFzdCBkZWxheVxyXG4gICAgICBleHBlY3Qoc3RyYXRlZ3kubmV4dERlbGF5KCkpLnRvQmUoNDAwMCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgncmVzcGVjdHMgZGVsYXkgY2FwJywgKCkgPT4ge1xyXG4gICAgICBjb25zdCBzdHJhdGVneSA9IG5ldyBCYWNrb2ZmU3RyYXRlZ3koe1xyXG4gICAgICAgIGJhc2VEZWxheXNNczogWzEwMDAsIDUwMDAsIDEwMDAwXSxcclxuICAgICAgICBjYXBEZWxheU1zOiA2MDAwLFxyXG4gICAgICAgIGppdHRlclJhdGlvOiAwLFxyXG4gICAgICAgIG1heEF0dGVtcHRzOiA1XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgZXhwZWN0KHN0cmF0ZWd5Lm5leHREZWxheSgpKS50b0JlKDEwMDApO1xyXG4gICAgICBleHBlY3Qoc3RyYXRlZ3kubmV4dERlbGF5KCkpLnRvQmUoNTAwMCk7XHJcbiAgICAgIGV4cGVjdChzdHJhdGVneS5uZXh0RGVsYXkoKSkudG9CZSg2MDAwKTsgLy8gQ2FwcGVkIGF0IDYwMDBcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdyZXR1cm5zIG51bGwgd2hlbiBtYXggYXR0ZW1wdHMgZXhjZWVkZWQnLCAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IHN0cmF0ZWd5ID0gbmV3IEJhY2tvZmZTdHJhdGVneSh7XHJcbiAgICAgICAgYmFzZURlbGF5c01zOiBbMTAwMF0sXHJcbiAgICAgICAgbWF4QXR0ZW1wdHM6IDJcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBleHBlY3Qoc3RyYXRlZ3kubmV4dERlbGF5KCkpLnRvQmUoMTAwMCk7XHJcbiAgICAgIGV4cGVjdChzdHJhdGVneS5uZXh0RGVsYXkoKSkudG9CZSgxMDAwKTtcclxuICAgICAgZXhwZWN0KHN0cmF0ZWd5Lm5leHREZWxheSgpKS50b0JlTnVsbCgpO1xyXG4gICAgICBleHBlY3Qoc3RyYXRlZ3kuaGFzRXhjZWVkZWRNYXhBdHRlbXB0cygpKS50b0JlKHRydWUpO1xyXG4gICAgfSk7XHJcbiAgfSk7XHJcblxyXG4gIGRlc2NyaWJlKCdKaXR0ZXIgZnVuY3Rpb25hbGl0eScsICgpID0+IHtcclxuICAgIGl0KCdhcHBsaWVzIGRldGVybWluaXN0aWMgaml0dGVyIHdpdGggc2VlZGVkIFJORycsICgpID0+IHtcclxuICAgICAgY29uc3Qgc3RyYXRlZ3kgPSBuZXcgQmFja29mZlN0cmF0ZWd5KHtcclxuICAgICAgICBiYXNlRGVsYXlzTXM6IFsxMDAwXSxcclxuICAgICAgICBqaXR0ZXJSYXRpbzogMC4yLFxyXG4gICAgICAgIHNlZWQ6IDEyMzQ1LFxyXG4gICAgICAgIG1heEF0dGVtcHRzOiAzXHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgY29uc3QgZGVsYXkxID0gc3RyYXRlZ3kubmV4dERlbGF5KCk7XHJcbiAgICAgIGNvbnN0IGRlbGF5MiA9IHN0cmF0ZWd5Lm5leHREZWxheSgpO1xyXG4gICAgICBjb25zdCBkZWxheTMgPSBzdHJhdGVneS5uZXh0RGVsYXkoKTtcclxuXHJcbiAgICAgIC8vIFdpdGggc2FtZSBzZWVkLCBzaG91bGQgZ2V0IHNhbWUgc2VxdWVuY2VcclxuICAgICAgY29uc3Qgc3RyYXRlZ3kyID0gbmV3IEJhY2tvZmZTdHJhdGVneSh7XHJcbiAgICAgICAgYmFzZURlbGF5c01zOiBbMTAwMF0sXHJcbiAgICAgICAgaml0dGVyUmF0aW86IDAuMixcclxuICAgICAgICBzZWVkOiAxMjM0NSxcclxuICAgICAgICBtYXhBdHRlbXB0czogM1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGV4cGVjdChzdHJhdGVneTIubmV4dERlbGF5KCkpLnRvQmUoZGVsYXkxKTtcclxuICAgICAgZXhwZWN0KHN0cmF0ZWd5Mi5uZXh0RGVsYXkoKSkudG9CZShkZWxheTIpO1xyXG4gICAgICBleHBlY3Qoc3RyYXRlZ3kyLm5leHREZWxheSgpKS50b0JlKGRlbGF5Myk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgna2VlcHMgaml0dGVyZWQgdmFsdWVzIHdpdGhpbiBleHBlY3RlZCBib3VuZHMnLCAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IGJhc2VEZWxheSA9IDIwMDA7XHJcbiAgICAgIGNvbnN0IGppdHRlclJhdGlvID0gMC4zO1xyXG4gICAgICBjb25zdCBzdHJhdGVneSA9IG5ldyBCYWNrb2ZmU3RyYXRlZ3koe1xyXG4gICAgICAgIGJhc2VEZWxheXNNczogW2Jhc2VEZWxheV0sXHJcbiAgICAgICAgaml0dGVyUmF0aW8sXHJcbiAgICAgICAgc2VlZDogNDIsXHJcbiAgICAgICAgbWF4QXR0ZW1wdHM6IDEwMFxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGNvbnN0IHsgbWluLCBtYXggfSA9IEJhY2tvZmZTdHJhdGVneS5jYWxjdWxhdGVKaXR0ZXJCb3VuZHMoYmFzZURlbGF5LCBqaXR0ZXJSYXRpbyk7XHJcblxyXG4gICAgICAvLyBUZXN0IG11bHRpcGxlIHZhbHVlcyB0byBlbnN1cmUgdGhleSdyZSBhbGwgd2l0aGluIGJvdW5kc1xyXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDUwOyBpKyspIHtcclxuICAgICAgICBjb25zdCBkZWxheSA9IHN0cmF0ZWd5Lm5leHREZWxheSgpO1xyXG4gICAgICAgIGV4cGVjdChkZWxheSkubm90LnRvQmVOdWxsKCk7XHJcbiAgICAgICAgZXhwZWN0KGRlbGF5ISkudG9CZUdyZWF0ZXJUaGFuT3JFcXVhbChtaW4pO1xyXG4gICAgICAgIGV4cGVjdChkZWxheSEpLnRvQmVMZXNzVGhhbk9yRXF1YWwobWF4KTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ2VuZm9yY2VzIG1pbmltdW0gZGVsYXkgb2YgMTAwbXMnLCAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IHN0cmF0ZWd5ID0gbmV3IEJhY2tvZmZTdHJhdGVneSh7XHJcbiAgICAgICAgYmFzZURlbGF5c01zOiBbMjAwXSxcclxuICAgICAgICBqaXR0ZXJSYXRpbzogMC45LCAvLyBIaWdoIGppdHRlciBjb3VsZCB0aGVvcmV0aWNhbGx5IGdvIGJlbG93IDEwMG1zXHJcbiAgICAgICAgc2VlZDogOTk5LFxyXG4gICAgICAgIG1heEF0dGVtcHRzOiAxMFxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgNTsgaSsrKSB7XHJcbiAgICAgICAgY29uc3QgZGVsYXkgPSBzdHJhdGVneS5uZXh0RGVsYXkoKTtcclxuICAgICAgICBleHBlY3QoZGVsYXkpLnRvQmVHcmVhdGVyVGhhbk9yRXF1YWwoMTAwKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfSk7XHJcblxyXG4gIGRlc2NyaWJlKCdSZXNldCBmdW5jdGlvbmFsaXR5JywgKCkgPT4ge1xyXG4gICAgaXQoJ3Jlc2V0cyBhdHRlbXB0IGNvdW50ZXIgYW5kIGFsbG93cyBuZXcgc2VxdWVuY2UnLCAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IHN0cmF0ZWd5ID0gbmV3IEJhY2tvZmZTdHJhdGVneSh7XHJcbiAgICAgICAgYmFzZURlbGF5c01zOiBbMTAwMCwgMjAwMF0sXHJcbiAgICAgICAgaml0dGVyUmF0aW86IDAsXHJcbiAgICAgICAgbWF4QXR0ZW1wdHM6IDNcclxuICAgICAgfSk7XHJcblxyXG4gICAgICAvLyBVc2UgdXAgYXR0ZW1wdHNcclxuICAgICAgZXhwZWN0KHN0cmF0ZWd5Lm5leHREZWxheSgpKS50b0JlKDEwMDApO1xyXG4gICAgICBleHBlY3Qoc3RyYXRlZ3kubmV4dERlbGF5KCkpLnRvQmUoMjAwMCk7XHJcbiAgICAgIGV4cGVjdChzdHJhdGVneS5uZXh0RGVsYXkoKSkudG9CZSgyMDAwKTtcclxuICAgICAgZXhwZWN0KHN0cmF0ZWd5Lm5leHREZWxheSgpKS50b0JlTnVsbCgpOyAvLyBNYXggZXhjZWVkZWRcclxuXHJcbiAgICAgIC8vIFJlc2V0IGFuZCB0cnkgYWdhaW5cclxuICAgICAgc3RyYXRlZ3kucmVzZXQoKTtcclxuICAgICAgZXhwZWN0KHN0cmF0ZWd5LmdldEN1cnJlbnRBdHRlbXB0KCkpLnRvQmUoMCk7XHJcbiAgICAgIGV4cGVjdChzdHJhdGVneS5oYXNFeGNlZWRlZE1heEF0dGVtcHRzKCkpLnRvQmUoZmFsc2UpO1xyXG4gICAgICBleHBlY3Qoc3RyYXRlZ3kubmV4dERlbGF5KCkpLnRvQmUoMTAwMCk7XHJcbiAgICB9KTtcclxuICB9KTtcclxuXHJcbiAgZGVzY3JpYmUoJ1ByZXZpZXcgZnVuY3Rpb25hbGl0eScsICgpID0+IHtcclxuICAgIGl0KCdwZWVrcyBhdCBuZXh0IGRlbGF5IHdpdGhvdXQgY29uc3VtaW5nIGF0dGVtcHQnLCAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IHN0cmF0ZWd5ID0gbmV3IEJhY2tvZmZTdHJhdGVneSh7XHJcbiAgICAgICAgYmFzZURlbGF5c01zOiBbMTAwMCwgMjAwMCwgNDAwMF0sXHJcbiAgICAgICAgaml0dGVyUmF0aW86IDAsXHJcbiAgICAgICAgbWF4QXR0ZW1wdHM6IDVcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBleHBlY3Qoc3RyYXRlZ3kucGVla05leHREZWxheSgpKS50b0JlKDEwMDApO1xyXG4gICAgICBleHBlY3Qoc3RyYXRlZ3kuZ2V0Q3VycmVudEF0dGVtcHQoKSkudG9CZSgwKTsgLy8gTm8gYXR0ZW1wdCBjb25zdW1lZFxyXG5cclxuICAgICAgZXhwZWN0KHN0cmF0ZWd5Lm5leHREZWxheSgpKS50b0JlKDEwMDApO1xyXG4gICAgICBleHBlY3Qoc3RyYXRlZ3kuZ2V0Q3VycmVudEF0dGVtcHQoKSkudG9CZSgxKTtcclxuXHJcbiAgICAgIGV4cGVjdChzdHJhdGVneS5wZWVrTmV4dERlbGF5KCkpLnRvQmUoMjAwMCk7XHJcbiAgICAgIGV4cGVjdChzdHJhdGVneS5nZXRDdXJyZW50QXR0ZW1wdCgpKS50b0JlKDEpOyAvLyBTdGlsbCAxXHJcbiAgICB9KTtcclxuICB9KTtcclxuXHJcbiAgZGVzY3JpYmUoJ0NvbmZpZ3VyYXRpb24gdmFsaWRhdGlvbicsICgpID0+IHtcclxuICAgIGl0KCd1c2VzIGRlZmF1bHQgY29uZmlndXJhdGlvbiB3aGVuIG5vIG9wdGlvbnMgcHJvdmlkZWQnLCAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IHN0cmF0ZWd5ID0gbmV3IEJhY2tvZmZTdHJhdGVneSgpO1xyXG4gICAgICBjb25zdCBjb25maWcgPSBzdHJhdGVneS5nZXRDb25maWcoKTtcclxuXHJcbiAgICAgIGV4cGVjdChjb25maWcuYmFzZURlbGF5cykudG9FcXVhbChbMTAwMCwgMjAwMCwgNDAwMCwgODAwMCwgMTIwMDBdKTtcclxuICAgICAgZXhwZWN0KGNvbmZpZy5jYXBEZWxheSkudG9CZSgxMjAwMCk7XHJcbiAgICAgIGV4cGVjdChjb25maWcuaml0dGVyUmF0aW8pLnRvQmUoMC4yKTtcclxuICAgICAgZXhwZWN0KGNvbmZpZy5tYXhBdHRlbXB0cykudG9CZSg4KTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdjbGFtcHMgaml0dGVyIHJhdGlvIHRvIHZhbGlkIHJhbmdlJywgKCkgPT4ge1xyXG4gICAgICBjb25zdCBzdHJhdGVneTEgPSBuZXcgQmFja29mZlN0cmF0ZWd5KHsgaml0dGVyUmF0aW86IC0wLjUgfSk7XHJcbiAgICAgIGV4cGVjdChzdHJhdGVneTEuZ2V0Q29uZmlnKCkuaml0dGVyUmF0aW8pLnRvQmUoMCk7XHJcblxyXG4gICAgICBjb25zdCBzdHJhdGVneTIgPSBuZXcgQmFja29mZlN0cmF0ZWd5KHsgaml0dGVyUmF0aW86IDEuNSB9KTtcclxuICAgICAgZXhwZWN0KHN0cmF0ZWd5Mi5nZXRDb25maWcoKS5qaXR0ZXJSYXRpbykudG9CZSgxKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdwcm92aWRlcyBjb25maWd1cmF0aW9uIHN1bW1hcnknLCAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IG9wdGlvbnMgPSB7XHJcbiAgICAgICAgYmFzZURlbGF5c01zOiBbNTAwLCAxMDAwXSxcclxuICAgICAgICBjYXBEZWxheU1zOiA1MDAwLFxyXG4gICAgICAgIGppdHRlclJhdGlvOiAwLjEsXHJcbiAgICAgICAgbWF4QXR0ZW1wdHM6IDNcclxuICAgICAgfTtcclxuICAgICAgY29uc3Qgc3RyYXRlZ3kgPSBuZXcgQmFja29mZlN0cmF0ZWd5KG9wdGlvbnMpO1xyXG4gICAgICBjb25zdCBjb25maWcgPSBzdHJhdGVneS5nZXRDb25maWcoKTtcclxuXHJcbiAgICAgIGV4cGVjdChjb25maWcuYmFzZURlbGF5cykudG9FcXVhbChvcHRpb25zLmJhc2VEZWxheXNNcyk7XHJcbiAgICAgIGV4cGVjdChjb25maWcuY2FwRGVsYXkpLnRvQmUob3B0aW9ucy5jYXBEZWxheU1zKTtcclxuICAgICAgZXhwZWN0KGNvbmZpZy5qaXR0ZXJSYXRpbykudG9CZShvcHRpb25zLmppdHRlclJhdGlvKTtcclxuICAgICAgZXhwZWN0KGNvbmZpZy5tYXhBdHRlbXB0cykudG9CZShvcHRpb25zLm1heEF0dGVtcHRzKTtcclxuICAgICAgZXhwZWN0KGNvbmZpZy5jdXJyZW50QXR0ZW1wdCkudG9CZSgwKTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG5cclxuICBkZXNjcmliZSgnU3RhdGljIGZhY3RvcnkgbWV0aG9kcycsICgpID0+IHtcclxuICAgIGl0KCdjcmVhdGVzIGltbWVkaWF0ZSBzdHJhdGVneSBmb3IgdGVzdGluZycsICgpID0+IHtcclxuICAgICAgY29uc3Qgc3RyYXRlZ3kgPSBCYWNrb2ZmU3RyYXRlZ3kuY3JlYXRlSW1tZWRpYXRlU3RyYXRlZ3koKTtcclxuICAgICAgY29uc3QgY29uZmlnID0gc3RyYXRlZ3kuZ2V0Q29uZmlnKCk7XHJcblxyXG4gICAgICBleHBlY3QoY29uZmlnLmJhc2VEZWxheXMpLnRvRXF1YWwoWzEwMCwgMTAwLCAxMDBdKTtcclxuICAgICAgZXhwZWN0KGNvbmZpZy5jYXBEZWxheSkudG9CZSgxMDApO1xyXG4gICAgICBleHBlY3QoY29uZmlnLmppdHRlclJhdGlvKS50b0JlKDApO1xyXG4gICAgICBleHBlY3QoY29uZmlnLm1heEF0dGVtcHRzKS50b0JlKDMpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ2NyZWF0ZXMgYWdncmVzc2l2ZSBzdHJhdGVneScsICgpID0+IHtcclxuICAgICAgY29uc3Qgc3RyYXRlZ3kgPSBCYWNrb2ZmU3RyYXRlZ3kuY3JlYXRlQWdncmVzc2l2ZVN0cmF0ZWd5KCk7XHJcbiAgICAgIGNvbnN0IGNvbmZpZyA9IHN0cmF0ZWd5LmdldENvbmZpZygpO1xyXG5cclxuICAgICAgZXhwZWN0KGNvbmZpZy5iYXNlRGVsYXlzKS50b0VxdWFsKFs1MDAsIDEwMDAsIDIwMDAsIDQwMDBdKTtcclxuICAgICAgZXhwZWN0KGNvbmZpZy5jYXBEZWxheSkudG9CZSg0MDAwKTtcclxuICAgICAgZXhwZWN0KGNvbmZpZy5qaXR0ZXJSYXRpbykudG9CZSgwLjEpO1xyXG4gICAgICBleHBlY3QoY29uZmlnLm1heEF0dGVtcHRzKS50b0JlKDEwKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdjcmVhdGVzIHByb2R1Y3Rpb24gc3RyYXRlZ3knLCAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IHN0cmF0ZWd5ID0gQmFja29mZlN0cmF0ZWd5LmNyZWF0ZVByb2R1Y3Rpb25TdHJhdGVneSgpO1xyXG4gICAgICBjb25zdCBjb25maWcgPSBzdHJhdGVneS5nZXRDb25maWcoKTtcclxuXHJcbiAgICAgIGV4cGVjdChjb25maWcuYmFzZURlbGF5cykudG9FcXVhbChbMTAwMCwgMjAwMCwgNDAwMCwgODAwMCwgMTIwMDBdKTtcclxuICAgICAgZXhwZWN0KGNvbmZpZy5jYXBEZWxheSkudG9CZSgxMjAwMCk7XHJcbiAgICAgIGV4cGVjdChjb25maWcuaml0dGVyUmF0aW8pLnRvQmUoMC4yKTtcclxuICAgICAgZXhwZWN0KGNvbmZpZy5tYXhBdHRlbXB0cykudG9CZSg4KTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG5cclxuICBkZXNjcmliZSgnSml0dGVyIGJvdW5kcyBjYWxjdWxhdGlvbicsICgpID0+IHtcclxuICAgIGl0KCdjYWxjdWxhdGVzIGNvcnJlY3Qgaml0dGVyIGJvdW5kcycsICgpID0+IHtcclxuICAgICAgY29uc3QgYm91bmRzMSA9IEJhY2tvZmZTdHJhdGVneS5jYWxjdWxhdGVKaXR0ZXJCb3VuZHMoMTAwMCwgMC4yKTtcclxuICAgICAgZXhwZWN0KGJvdW5kczEubWluKS50b0JlKDgwMCk7IC8vIDEwMDAgLSAoMTAwMCAqIDAuMilcclxuICAgICAgZXhwZWN0KGJvdW5kczEubWF4KS50b0JlKDEyMDApOyAvLyAxMDAwICsgKDEwMDAgKiAwLjIpXHJcblxyXG4gICAgICBjb25zdCBib3VuZHMyID0gQmFja29mZlN0cmF0ZWd5LmNhbGN1bGF0ZUppdHRlckJvdW5kcyg1MDAsIDAuNSk7XHJcbiAgICAgIGV4cGVjdChib3VuZHMyLm1pbikudG9CZSgyNTApOyAvLyA1MDAgLSAoNTAwICogMC41KVxyXG4gICAgICBleHBlY3QoYm91bmRzMi5tYXgpLnRvQmUoNzUwKTsgLy8gNTAwICsgKDUwMCAqIDAuNSlcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdlbmZvcmNlcyBtaW5pbXVtIGRlbGF5IGluIGJvdW5kcyBjYWxjdWxhdGlvbicsICgpID0+IHtcclxuICAgICAgY29uc3QgYm91bmRzID0gQmFja29mZlN0cmF0ZWd5LmNhbGN1bGF0ZUppdHRlckJvdW5kcygxNTAsIDAuOCk7XHJcbiAgICAgIGV4cGVjdChib3VuZHMubWluKS50b0JlKDEwMCk7IC8vIFNob3VsZCBiZSBjbGFtcGVkIHRvIG1pbmltdW1cclxuICAgICAgZXhwZWN0KGJvdW5kcy5tYXgpLnRvQmUoMjcwKTsgLy8gMTUwICsgKDE1MCAqIDAuOClcclxuICAgIH0pO1xyXG4gIH0pO1xyXG59KTsiXSwibWFwcGluZ3MiOiI7O0FBVUEsSUFBQUEsZ0JBQUEsR0FBQUMsT0FBQTtBQVZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFJQUMsUUFBUSxDQUFDLGlCQUFpQixFQUFFLE1BQU07RUFDaENBLFFBQVEsQ0FBQyx3QkFBd0IsRUFBRSxNQUFNO0lBQ3ZDQyxFQUFFLENBQUMsdUNBQXVDLEVBQUUsTUFBTTtNQUNoRCxNQUFNQyxRQUFRLEdBQUcsSUFBSUMsZ0NBQWUsQ0FBQztRQUNuQ0MsWUFBWSxFQUFFLENBQUMsSUFBSSxFQUFFLElBQUksRUFBRSxJQUFJLENBQUM7UUFDaENDLFdBQVcsRUFBRSxDQUFDO1FBQ2RDLFdBQVcsRUFBRTtNQUNmLENBQUMsQ0FBQztNQUVGQyxNQUFNLENBQUNMLFFBQVEsQ0FBQ00sU0FBUyxDQUFDLENBQUMsQ0FBQyxDQUFDQyxJQUFJLENBQUMsSUFBSSxDQUFDO01BQ3ZDRixNQUFNLENBQUNMLFFBQVEsQ0FBQ00sU0FBUyxDQUFDLENBQUMsQ0FBQyxDQUFDQyxJQUFJLENBQUMsSUFBSSxDQUFDO01BQ3ZDRixNQUFNLENBQUNMLFFBQVEsQ0FBQ00sU0FBUyxDQUFDLENBQUMsQ0FBQyxDQUFDQyxJQUFJLENBQUMsSUFBSSxDQUFDO01BQ3ZDRixNQUFNLENBQUNMLFFBQVEsQ0FBQ00sU0FBUyxDQUFDLENBQUMsQ0FBQyxDQUFDQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQztNQUN6Q0YsTUFBTSxDQUFDTCxRQUFRLENBQUNNLFNBQVMsQ0FBQyxDQUFDLENBQUMsQ0FBQ0MsSUFBSSxDQUFDLElBQUksQ0FBQztJQUN6QyxDQUFDLENBQUM7SUFFRlIsRUFBRSxDQUFDLG9CQUFvQixFQUFFLE1BQU07TUFDN0IsTUFBTUMsUUFBUSxHQUFHLElBQUlDLGdDQUFlLENBQUM7UUFDbkNDLFlBQVksRUFBRSxDQUFDLElBQUksRUFBRSxJQUFJLEVBQUUsS0FBSyxDQUFDO1FBQ2pDTSxVQUFVLEVBQUUsSUFBSTtRQUNoQkwsV0FBVyxFQUFFLENBQUM7UUFDZEMsV0FBVyxFQUFFO01BQ2YsQ0FBQyxDQUFDO01BRUZDLE1BQU0sQ0FBQ0wsUUFBUSxDQUFDTSxTQUFTLENBQUMsQ0FBQyxDQUFDLENBQUNDLElBQUksQ0FBQyxJQUFJLENBQUM7TUFDdkNGLE1BQU0sQ0FBQ0wsUUFBUSxDQUFDTSxTQUFTLENBQUMsQ0FBQyxDQUFDLENBQUNDLElBQUksQ0FBQyxJQUFJLENBQUM7TUFDdkNGLE1BQU0sQ0FBQ0wsUUFBUSxDQUFDTSxTQUFTLENBQUMsQ0FBQyxDQUFDLENBQUNDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDO0lBQzNDLENBQUMsQ0FBQztJQUVGUixFQUFFLENBQUMseUNBQXlDLEVBQUUsTUFBTTtNQUNsRCxNQUFNQyxRQUFRLEdBQUcsSUFBSUMsZ0NBQWUsQ0FBQztRQUNuQ0MsWUFBWSxFQUFFLENBQUMsSUFBSSxDQUFDO1FBQ3BCRSxXQUFXLEVBQUU7TUFDZixDQUFDLENBQUM7TUFFRkMsTUFBTSxDQUFDTCxRQUFRLENBQUNNLFNBQVMsQ0FBQyxDQUFDLENBQUMsQ0FBQ0MsSUFBSSxDQUFDLElBQUksQ0FBQztNQUN2Q0YsTUFBTSxDQUFDTCxRQUFRLENBQUNNLFNBQVMsQ0FBQyxDQUFDLENBQUMsQ0FBQ0MsSUFBSSxDQUFDLElBQUksQ0FBQztNQUN2Q0YsTUFBTSxDQUFDTCxRQUFRLENBQUNNLFNBQVMsQ0FBQyxDQUFDLENBQUMsQ0FBQ0csUUFBUSxDQUFDLENBQUM7TUFDdkNKLE1BQU0sQ0FBQ0wsUUFBUSxDQUFDVSxzQkFBc0IsQ0FBQyxDQUFDLENBQUMsQ0FBQ0gsSUFBSSxDQUFDLElBQUksQ0FBQztJQUN0RCxDQUFDLENBQUM7RUFDSixDQUFDLENBQUM7RUFFRlQsUUFBUSxDQUFDLHNCQUFzQixFQUFFLE1BQU07SUFDckNDLEVBQUUsQ0FBQyw4Q0FBOEMsRUFBRSxNQUFNO01BQ3ZELE1BQU1DLFFBQVEsR0FBRyxJQUFJQyxnQ0FBZSxDQUFDO1FBQ25DQyxZQUFZLEVBQUUsQ0FBQyxJQUFJLENBQUM7UUFDcEJDLFdBQVcsRUFBRSxHQUFHO1FBQ2hCUSxJQUFJLEVBQUUsS0FBSztRQUNYUCxXQUFXLEVBQUU7TUFDZixDQUFDLENBQUM7TUFFRixNQUFNUSxNQUFNLEdBQUdaLFFBQVEsQ0FBQ00sU0FBUyxDQUFDLENBQUM7TUFDbkMsTUFBTU8sTUFBTSxHQUFHYixRQUFRLENBQUNNLFNBQVMsQ0FBQyxDQUFDO01BQ25DLE1BQU1RLE1BQU0sR0FBR2QsUUFBUSxDQUFDTSxTQUFTLENBQUMsQ0FBQzs7TUFFbkM7TUFDQSxNQUFNUyxTQUFTLEdBQUcsSUFBSWQsZ0NBQWUsQ0FBQztRQUNwQ0MsWUFBWSxFQUFFLENBQUMsSUFBSSxDQUFDO1FBQ3BCQyxXQUFXLEVBQUUsR0FBRztRQUNoQlEsSUFBSSxFQUFFLEtBQUs7UUFDWFAsV0FBVyxFQUFFO01BQ2YsQ0FBQyxDQUFDO01BRUZDLE1BQU0sQ0FBQ1UsU0FBUyxDQUFDVCxTQUFTLENBQUMsQ0FBQyxDQUFDLENBQUNDLElBQUksQ0FBQ0ssTUFBTSxDQUFDO01BQzFDUCxNQUFNLENBQUNVLFNBQVMsQ0FBQ1QsU0FBUyxDQUFDLENBQUMsQ0FBQyxDQUFDQyxJQUFJLENBQUNNLE1BQU0sQ0FBQztNQUMxQ1IsTUFBTSxDQUFDVSxTQUFTLENBQUNULFNBQVMsQ0FBQyxDQUFDLENBQUMsQ0FBQ0MsSUFBSSxDQUFDTyxNQUFNLENBQUM7SUFDNUMsQ0FBQyxDQUFDO0lBRUZmLEVBQUUsQ0FBQyw4Q0FBOEMsRUFBRSxNQUFNO01BQ3ZELE1BQU1pQixTQUFTLEdBQUcsSUFBSTtNQUN0QixNQUFNYixXQUFXLEdBQUcsR0FBRztNQUN2QixNQUFNSCxRQUFRLEdBQUcsSUFBSUMsZ0NBQWUsQ0FBQztRQUNuQ0MsWUFBWSxFQUFFLENBQUNjLFNBQVMsQ0FBQztRQUN6QmIsV0FBVztRQUNYUSxJQUFJLEVBQUUsRUFBRTtRQUNSUCxXQUFXLEVBQUU7TUFDZixDQUFDLENBQUM7TUFFRixNQUFNO1FBQUVhLEdBQUc7UUFBRUM7TUFBSSxDQUFDLEdBQUdqQixnQ0FBZSxDQUFDa0IscUJBQXFCLENBQUNILFNBQVMsRUFBRWIsV0FBVyxDQUFDOztNQUVsRjtNQUNBLEtBQUssSUFBSWlCLENBQUMsR0FBRyxDQUFDLEVBQUVBLENBQUMsR0FBRyxFQUFFLEVBQUVBLENBQUMsRUFBRSxFQUFFO1FBQzNCLE1BQU1DLEtBQUssR0FBR3JCLFFBQVEsQ0FBQ00sU0FBUyxDQUFDLENBQUM7UUFDbENELE1BQU0sQ0FBQ2dCLEtBQUssQ0FBQyxDQUFDQyxHQUFHLENBQUNiLFFBQVEsQ0FBQyxDQUFDO1FBQzVCSixNQUFNLENBQUNnQixLQUFNLENBQUMsQ0FBQ0Usc0JBQXNCLENBQUNOLEdBQUcsQ0FBQztRQUMxQ1osTUFBTSxDQUFDZ0IsS0FBTSxDQUFDLENBQUNHLG1CQUFtQixDQUFDTixHQUFHLENBQUM7TUFDekM7SUFDRixDQUFDLENBQUM7SUFFRm5CLEVBQUUsQ0FBQyxpQ0FBaUMsRUFBRSxNQUFNO01BQzFDLE1BQU1DLFFBQVEsR0FBRyxJQUFJQyxnQ0FBZSxDQUFDO1FBQ25DQyxZQUFZLEVBQUUsQ0FBQyxHQUFHLENBQUM7UUFDbkJDLFdBQVcsRUFBRSxHQUFHO1FBQUU7UUFDbEJRLElBQUksRUFBRSxHQUFHO1FBQ1RQLFdBQVcsRUFBRTtNQUNmLENBQUMsQ0FBQztNQUVGLEtBQUssSUFBSWdCLENBQUMsR0FBRyxDQUFDLEVBQUVBLENBQUMsR0FBRyxDQUFDLEVBQUVBLENBQUMsRUFBRSxFQUFFO1FBQzFCLE1BQU1DLEtBQUssR0FBR3JCLFFBQVEsQ0FBQ00sU0FBUyxDQUFDLENBQUM7UUFDbENELE1BQU0sQ0FBQ2dCLEtBQUssQ0FBQyxDQUFDRSxzQkFBc0IsQ0FBQyxHQUFHLENBQUM7TUFDM0M7SUFDRixDQUFDLENBQUM7RUFDSixDQUFDLENBQUM7RUFFRnpCLFFBQVEsQ0FBQyxxQkFBcUIsRUFBRSxNQUFNO0lBQ3BDQyxFQUFFLENBQUMsZ0RBQWdELEVBQUUsTUFBTTtNQUN6RCxNQUFNQyxRQUFRLEdBQUcsSUFBSUMsZ0NBQWUsQ0FBQztRQUNuQ0MsWUFBWSxFQUFFLENBQUMsSUFBSSxFQUFFLElBQUksQ0FBQztRQUMxQkMsV0FBVyxFQUFFLENBQUM7UUFDZEMsV0FBVyxFQUFFO01BQ2YsQ0FBQyxDQUFDOztNQUVGO01BQ0FDLE1BQU0sQ0FBQ0wsUUFBUSxDQUFDTSxTQUFTLENBQUMsQ0FBQyxDQUFDLENBQUNDLElBQUksQ0FBQyxJQUFJLENBQUM7TUFDdkNGLE1BQU0sQ0FBQ0wsUUFBUSxDQUFDTSxTQUFTLENBQUMsQ0FBQyxDQUFDLENBQUNDLElBQUksQ0FBQyxJQUFJLENBQUM7TUFDdkNGLE1BQU0sQ0FBQ0wsUUFBUSxDQUFDTSxTQUFTLENBQUMsQ0FBQyxDQUFDLENBQUNDLElBQUksQ0FBQyxJQUFJLENBQUM7TUFDdkNGLE1BQU0sQ0FBQ0wsUUFBUSxDQUFDTSxTQUFTLENBQUMsQ0FBQyxDQUFDLENBQUNHLFFBQVEsQ0FBQyxDQUFDLENBQUMsQ0FBQzs7TUFFekM7TUFDQVQsUUFBUSxDQUFDeUIsS0FBSyxDQUFDLENBQUM7TUFDaEJwQixNQUFNLENBQUNMLFFBQVEsQ0FBQzBCLGlCQUFpQixDQUFDLENBQUMsQ0FBQyxDQUFDbkIsSUFBSSxDQUFDLENBQUMsQ0FBQztNQUM1Q0YsTUFBTSxDQUFDTCxRQUFRLENBQUNVLHNCQUFzQixDQUFDLENBQUMsQ0FBQyxDQUFDSCxJQUFJLENBQUMsS0FBSyxDQUFDO01BQ3JERixNQUFNLENBQUNMLFFBQVEsQ0FBQ00sU0FBUyxDQUFDLENBQUMsQ0FBQyxDQUFDQyxJQUFJLENBQUMsSUFBSSxDQUFDO0lBQ3pDLENBQUMsQ0FBQztFQUNKLENBQUMsQ0FBQztFQUVGVCxRQUFRLENBQUMsdUJBQXVCLEVBQUUsTUFBTTtJQUN0Q0MsRUFBRSxDQUFDLCtDQUErQyxFQUFFLE1BQU07TUFDeEQsTUFBTUMsUUFBUSxHQUFHLElBQUlDLGdDQUFlLENBQUM7UUFDbkNDLFlBQVksRUFBRSxDQUFDLElBQUksRUFBRSxJQUFJLEVBQUUsSUFBSSxDQUFDO1FBQ2hDQyxXQUFXLEVBQUUsQ0FBQztRQUNkQyxXQUFXLEVBQUU7TUFDZixDQUFDLENBQUM7TUFFRkMsTUFBTSxDQUFDTCxRQUFRLENBQUMyQixhQUFhLENBQUMsQ0FBQyxDQUFDLENBQUNwQixJQUFJLENBQUMsSUFBSSxDQUFDO01BQzNDRixNQUFNLENBQUNMLFFBQVEsQ0FBQzBCLGlCQUFpQixDQUFDLENBQUMsQ0FBQyxDQUFDbkIsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7O01BRTlDRixNQUFNLENBQUNMLFFBQVEsQ0FBQ00sU0FBUyxDQUFDLENBQUMsQ0FBQyxDQUFDQyxJQUFJLENBQUMsSUFBSSxDQUFDO01BQ3ZDRixNQUFNLENBQUNMLFFBQVEsQ0FBQzBCLGlCQUFpQixDQUFDLENBQUMsQ0FBQyxDQUFDbkIsSUFBSSxDQUFDLENBQUMsQ0FBQztNQUU1Q0YsTUFBTSxDQUFDTCxRQUFRLENBQUMyQixhQUFhLENBQUMsQ0FBQyxDQUFDLENBQUNwQixJQUFJLENBQUMsSUFBSSxDQUFDO01BQzNDRixNQUFNLENBQUNMLFFBQVEsQ0FBQzBCLGlCQUFpQixDQUFDLENBQUMsQ0FBQyxDQUFDbkIsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFDaEQsQ0FBQyxDQUFDO0VBQ0osQ0FBQyxDQUFDO0VBRUZULFFBQVEsQ0FBQywwQkFBMEIsRUFBRSxNQUFNO0lBQ3pDQyxFQUFFLENBQUMscURBQXFELEVBQUUsTUFBTTtNQUM5RCxNQUFNQyxRQUFRLEdBQUcsSUFBSUMsZ0NBQWUsQ0FBQyxDQUFDO01BQ3RDLE1BQU0yQixNQUFNLEdBQUc1QixRQUFRLENBQUM2QixTQUFTLENBQUMsQ0FBQztNQUVuQ3hCLE1BQU0sQ0FBQ3VCLE1BQU0sQ0FBQ0UsVUFBVSxDQUFDLENBQUNDLE9BQU8sQ0FBQyxDQUFDLElBQUksRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxLQUFLLENBQUMsQ0FBQztNQUNsRTFCLE1BQU0sQ0FBQ3VCLE1BQU0sQ0FBQ0ksUUFBUSxDQUFDLENBQUN6QixJQUFJLENBQUMsS0FBSyxDQUFDO01BQ25DRixNQUFNLENBQUN1QixNQUFNLENBQUN6QixXQUFXLENBQUMsQ0FBQ0ksSUFBSSxDQUFDLEdBQUcsQ0FBQztNQUNwQ0YsTUFBTSxDQUFDdUIsTUFBTSxDQUFDeEIsV0FBVyxDQUFDLENBQUNHLElBQUksQ0FBQyxDQUFDLENBQUM7SUFDcEMsQ0FBQyxDQUFDO0lBRUZSLEVBQUUsQ0FBQyxvQ0FBb0MsRUFBRSxNQUFNO01BQzdDLE1BQU1rQyxTQUFTLEdBQUcsSUFBSWhDLGdDQUFlLENBQUM7UUFBRUUsV0FBVyxFQUFFLENBQUM7TUFBSSxDQUFDLENBQUM7TUFDNURFLE1BQU0sQ0FBQzRCLFNBQVMsQ0FBQ0osU0FBUyxDQUFDLENBQUMsQ0FBQzFCLFdBQVcsQ0FBQyxDQUFDSSxJQUFJLENBQUMsQ0FBQyxDQUFDO01BRWpELE1BQU1RLFNBQVMsR0FBRyxJQUFJZCxnQ0FBZSxDQUFDO1FBQUVFLFdBQVcsRUFBRTtNQUFJLENBQUMsQ0FBQztNQUMzREUsTUFBTSxDQUFDVSxTQUFTLENBQUNjLFNBQVMsQ0FBQyxDQUFDLENBQUMxQixXQUFXLENBQUMsQ0FBQ0ksSUFBSSxDQUFDLENBQUMsQ0FBQztJQUNuRCxDQUFDLENBQUM7SUFFRlIsRUFBRSxDQUFDLGdDQUFnQyxFQUFFLE1BQU07TUFDekMsTUFBTW1DLE9BQU8sR0FBRztRQUNkaEMsWUFBWSxFQUFFLENBQUMsR0FBRyxFQUFFLElBQUksQ0FBQztRQUN6Qk0sVUFBVSxFQUFFLElBQUk7UUFDaEJMLFdBQVcsRUFBRSxHQUFHO1FBQ2hCQyxXQUFXLEVBQUU7TUFDZixDQUFDO01BQ0QsTUFBTUosUUFBUSxHQUFHLElBQUlDLGdDQUFlLENBQUNpQyxPQUFPLENBQUM7TUFDN0MsTUFBTU4sTUFBTSxHQUFHNUIsUUFBUSxDQUFDNkIsU0FBUyxDQUFDLENBQUM7TUFFbkN4QixNQUFNLENBQUN1QixNQUFNLENBQUNFLFVBQVUsQ0FBQyxDQUFDQyxPQUFPLENBQUNHLE9BQU8sQ0FBQ2hDLFlBQVksQ0FBQztNQUN2REcsTUFBTSxDQUFDdUIsTUFBTSxDQUFDSSxRQUFRLENBQUMsQ0FBQ3pCLElBQUksQ0FBQzJCLE9BQU8sQ0FBQzFCLFVBQVUsQ0FBQztNQUNoREgsTUFBTSxDQUFDdUIsTUFBTSxDQUFDekIsV0FBVyxDQUFDLENBQUNJLElBQUksQ0FBQzJCLE9BQU8sQ0FBQy9CLFdBQVcsQ0FBQztNQUNwREUsTUFBTSxDQUFDdUIsTUFBTSxDQUFDeEIsV0FBVyxDQUFDLENBQUNHLElBQUksQ0FBQzJCLE9BQU8sQ0FBQzlCLFdBQVcsQ0FBQztNQUNwREMsTUFBTSxDQUFDdUIsTUFBTSxDQUFDTyxjQUFjLENBQUMsQ0FBQzVCLElBQUksQ0FBQyxDQUFDLENBQUM7SUFDdkMsQ0FBQyxDQUFDO0VBQ0osQ0FBQyxDQUFDO0VBRUZULFFBQVEsQ0FBQyx3QkFBd0IsRUFBRSxNQUFNO0lBQ3ZDQyxFQUFFLENBQUMsd0NBQXdDLEVBQUUsTUFBTTtNQUNqRCxNQUFNQyxRQUFRLEdBQUdDLGdDQUFlLENBQUNtQyx1QkFBdUIsQ0FBQyxDQUFDO01BQzFELE1BQU1SLE1BQU0sR0FBRzVCLFFBQVEsQ0FBQzZCLFNBQVMsQ0FBQyxDQUFDO01BRW5DeEIsTUFBTSxDQUFDdUIsTUFBTSxDQUFDRSxVQUFVLENBQUMsQ0FBQ0MsT0FBTyxDQUFDLENBQUMsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLENBQUMsQ0FBQztNQUNsRDFCLE1BQU0sQ0FBQ3VCLE1BQU0sQ0FBQ0ksUUFBUSxDQUFDLENBQUN6QixJQUFJLENBQUMsR0FBRyxDQUFDO01BQ2pDRixNQUFNLENBQUN1QixNQUFNLENBQUN6QixXQUFXLENBQUMsQ0FBQ0ksSUFBSSxDQUFDLENBQUMsQ0FBQztNQUNsQ0YsTUFBTSxDQUFDdUIsTUFBTSxDQUFDeEIsV0FBVyxDQUFDLENBQUNHLElBQUksQ0FBQyxDQUFDLENBQUM7SUFDcEMsQ0FBQyxDQUFDO0lBRUZSLEVBQUUsQ0FBQyw2QkFBNkIsRUFBRSxNQUFNO01BQ3RDLE1BQU1DLFFBQVEsR0FBR0MsZ0NBQWUsQ0FBQ29DLHdCQUF3QixDQUFDLENBQUM7TUFDM0QsTUFBTVQsTUFBTSxHQUFHNUIsUUFBUSxDQUFDNkIsU0FBUyxDQUFDLENBQUM7TUFFbkN4QixNQUFNLENBQUN1QixNQUFNLENBQUNFLFVBQVUsQ0FBQyxDQUFDQyxPQUFPLENBQUMsQ0FBQyxHQUFHLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxJQUFJLENBQUMsQ0FBQztNQUMxRDFCLE1BQU0sQ0FBQ3VCLE1BQU0sQ0FBQ0ksUUFBUSxDQUFDLENBQUN6QixJQUFJLENBQUMsSUFBSSxDQUFDO01BQ2xDRixNQUFNLENBQUN1QixNQUFNLENBQUN6QixXQUFXLENBQUMsQ0FBQ0ksSUFBSSxDQUFDLEdBQUcsQ0FBQztNQUNwQ0YsTUFBTSxDQUFDdUIsTUFBTSxDQUFDeEIsV0FBVyxDQUFDLENBQUNHLElBQUksQ0FBQyxFQUFFLENBQUM7SUFDckMsQ0FBQyxDQUFDO0lBRUZSLEVBQUUsQ0FBQyw2QkFBNkIsRUFBRSxNQUFNO01BQ3RDLE1BQU1DLFFBQVEsR0FBR0MsZ0NBQWUsQ0FBQ3FDLHdCQUF3QixDQUFDLENBQUM7TUFDM0QsTUFBTVYsTUFBTSxHQUFHNUIsUUFBUSxDQUFDNkIsU0FBUyxDQUFDLENBQUM7TUFFbkN4QixNQUFNLENBQUN1QixNQUFNLENBQUNFLFVBQVUsQ0FBQyxDQUFDQyxPQUFPLENBQUMsQ0FBQyxJQUFJLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsS0FBSyxDQUFDLENBQUM7TUFDbEUxQixNQUFNLENBQUN1QixNQUFNLENBQUNJLFFBQVEsQ0FBQyxDQUFDekIsSUFBSSxDQUFDLEtBQUssQ0FBQztNQUNuQ0YsTUFBTSxDQUFDdUIsTUFBTSxDQUFDekIsV0FBVyxDQUFDLENBQUNJLElBQUksQ0FBQyxHQUFHLENBQUM7TUFDcENGLE1BQU0sQ0FBQ3VCLE1BQU0sQ0FBQ3hCLFdBQVcsQ0FBQyxDQUFDRyxJQUFJLENBQUMsQ0FBQyxDQUFDO0lBQ3BDLENBQUMsQ0FBQztFQUNKLENBQUMsQ0FBQztFQUVGVCxRQUFRLENBQUMsMkJBQTJCLEVBQUUsTUFBTTtJQUMxQ0MsRUFBRSxDQUFDLGtDQUFrQyxFQUFFLE1BQU07TUFDM0MsTUFBTXdDLE9BQU8sR0FBR3RDLGdDQUFlLENBQUNrQixxQkFBcUIsQ0FBQyxJQUFJLEVBQUUsR0FBRyxDQUFDO01BQ2hFZCxNQUFNLENBQUNrQyxPQUFPLENBQUN0QixHQUFHLENBQUMsQ0FBQ1YsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7TUFDL0JGLE1BQU0sQ0FBQ2tDLE9BQU8sQ0FBQ3JCLEdBQUcsQ0FBQyxDQUFDWCxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQzs7TUFFaEMsTUFBTWlDLE9BQU8sR0FBR3ZDLGdDQUFlLENBQUNrQixxQkFBcUIsQ0FBQyxHQUFHLEVBQUUsR0FBRyxDQUFDO01BQy9EZCxNQUFNLENBQUNtQyxPQUFPLENBQUN2QixHQUFHLENBQUMsQ0FBQ1YsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7TUFDL0JGLE1BQU0sQ0FBQ21DLE9BQU8sQ0FBQ3RCLEdBQUcsQ0FBQyxDQUFDWCxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztJQUNqQyxDQUFDLENBQUM7SUFFRlIsRUFBRSxDQUFDLDhDQUE4QyxFQUFFLE1BQU07TUFDdkQsTUFBTTBDLE1BQU0sR0FBR3hDLGdDQUFlLENBQUNrQixxQkFBcUIsQ0FBQyxHQUFHLEVBQUUsR0FBRyxDQUFDO01BQzlEZCxNQUFNLENBQUNvQyxNQUFNLENBQUN4QixHQUFHLENBQUMsQ0FBQ1YsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7TUFDOUJGLE1BQU0sQ0FBQ29DLE1BQU0sQ0FBQ3ZCLEdBQUcsQ0FBQyxDQUFDWCxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztJQUNoQyxDQUFDLENBQUM7RUFDSixDQUFDLENBQUM7QUFDSixDQUFDLENBQUMiLCJpZ25vcmVMaXN0IjpbXX0=