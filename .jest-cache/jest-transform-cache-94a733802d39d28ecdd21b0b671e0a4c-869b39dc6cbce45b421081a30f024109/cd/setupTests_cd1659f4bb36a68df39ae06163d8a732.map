{"version":3,"names":["require","HTMLCanvasElement","prototype","getContext","type","fillRect","clearRect","getImageData","x","y","w","h","data","Array","putImageData","createImageData","setTransform","drawImage","save","fillText","restore","beginPath","moveTo","lineTo","closePath","stroke","translate","scale","rotate","arc","URL","createObjectURL","blob","revokeObjectURL","url","_consoleWarn","console","warn","args","msg","String","includes","originalCreateElement","document","createElement","tagName","options","el","call","originalSetAttribute","setAttribute","bind","name","value","e","window","location","assign","reload","__resetLocationMocks","mockReset","_","exports"],"sources":["setupTests.ts"],"sourcesContent":["// Lightweight test setup for Jest + jsdom\r\n// Provide jest-dom matchers (toBeInTheDocument, etc.)\r\nimport '@testing-library/jest-dom/extend-expect';\r\n// - Provide a minimal getContext implementation to avoid jsdom \"Not implemented: getContext\" errors\r\n// - Stub URL.createObjectURL to avoid errors in export CSV tests\r\n\r\n// Provide a basic 2D context mock\r\nif (typeof HTMLCanvasElement !== 'undefined' && !HTMLCanvasElement.prototype.getContext) {\r\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n  (HTMLCanvasElement.prototype as any).getContext = function (type: string) {\r\n    if (type === '2d') {\r\n      return {\r\n        fillRect: () => {},\r\n        clearRect: () => {},\r\n        getImageData: (x: number, y: number, w: number, h: number) => ({ data: new Array(w * h * 4) }),\r\n        putImageData: () => {},\r\n        createImageData: () => [],\r\n        setTransform: () => {},\r\n        drawImage: () => {},\r\n        save: () => {},\r\n        fillText: () => {},\r\n        restore: () => {},\r\n        beginPath: () => {},\r\n        moveTo: () => {},\r\n        lineTo: () => {},\r\n        closePath: () => {},\r\n        stroke: () => {},\r\n        translate: () => {},\r\n        scale: () => {},\r\n        rotate: () => {},\r\n        arc: () => {},\r\n      };\r\n    }\r\n    return null;\r\n  };\r\n}\r\n\r\n// Stub createObjectURL and revoke for tests\r\nif (typeof URL !== 'undefined' && !URL.createObjectURL) {\r\n  // @ts-ignore\r\n  URL.createObjectURL = (blob: Blob) => 'blob://test';\r\n  // @ts-ignore\r\n  URL.revokeObjectURL = (url: string) => {};\r\n}\r\n\r\n// Silence console warnings from navigation/getContext in some jest environments\r\nconst _consoleWarn = console.warn;\r\nconsole.warn = (...args: unknown[]) => {\r\n  const msg = String(args[0] ?? '');\r\n  if (msg.includes('Not implemented: navigation') || msg.includes('Not implemented: HTMLCanvasElement.prototype.getContext')) {\r\n    return;\r\n  }\r\n  _consoleWarn(...args);\r\n};\r\n\r\n// Suppress framer-motion DOM prop warnings in tests by filtering props\r\ntry {\r\n  // @ts-ignore\r\n  const originalCreateElement = document.createElement;\r\n  // Wrap createElement to remove whileHover/whileTap attributes when added to DOM\r\n  // This is a lightweight compatibility shim for framer-motion in jsdom tests\r\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n  (document as any).createElement = function (tagName: string, options?: any) {\r\n    const el = originalCreateElement.call(document, tagName, options);\r\n    const originalSetAttribute = el.setAttribute.bind(el);\r\n    el.setAttribute = function (name: string, value: string) {\r\n      if (name === 'whilehover' || name === 'whiletap' || name === 'whileHover' || name === 'whileTap') {\r\n        return;\r\n      }\r\n      return originalSetAttribute(name, value);\r\n    };\r\n    return el;\r\n  };\r\n} catch (e) {\r\n  // ignore in environments we cannot patch\r\n}\r\n\r\n// Jest environment: mock navigation functions that jsdom doesn't implement\r\nif (typeof window !== 'undefined' && typeof window.location !== 'undefined') {\r\n  // Preserve original descriptors if present\r\n  try {\r\n    // Replace assign and reload with jest.fn() so tests can assert calls without throwing\r\n    // @ts-ignore\r\n    if (!window.location.assign || typeof window.location.assign !== 'function') {\r\n      // @ts-ignore\r\n      window.location.assign = (url: string) => {\r\n        // mimic behavior: no-op in test\r\n      };\r\n    }\r\n    // @ts-ignore\r\n    if (!window.location.reload || typeof window.location.reload !== 'function') {\r\n      // @ts-ignore\r\n      window.location.reload = () => {\r\n        // no-op in tests\r\n      };\r\n    }\r\n  } catch (e) {\r\n    // ignore modification errors in some environments\r\n  }\r\n}\r\n\r\n// Helper to reset window.location mocks between tests (call from tests if needed)\r\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\r\nexport const __resetLocationMocks = () => {\r\n  try {\r\n    // @ts-ignore\r\n    if (window?.location?.assign && (window.location.assign as any).mockReset) (window.location.assign as any).mockReset();\r\n    // @ts-ignore\r\n    if (window?.location?.reload && (window.location.reload as any).mockReset) (window.location.reload as any).mockReset();\r\n  } catch (_) {}\r\n};\r\n\r\nexport {};\r\n"],"mappings":"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","ignoreList":[]}