54ee02fb52e6e1a1ea8a6080ddfc5d42
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.ensureHealthShape = ensureHealthShape;
var _validateHealthResponse = require("./validateHealthResponse");
var _oneTimeLog = require("./oneTimeLog");
/**
 * Clean, single implementation of ensureHealthShape.
 * Normalizes health responses and avoids direct property access on unknown.
 */

const isRecord = x => typeof x === 'object' && x !== null;
const mapStatus = s => {
  if (s === 'ok' || s === 'healthy') return 'healthy';
  if (s === 'degraded') return 'degraded';
  if (s === 'down' || s === 'unhealthy' || s === 'error') return 'unhealthy';
  return 'unknown';
};
const toSafeNumber = v => {
  if (typeof v === 'boolean') return v ? 1 : 0;
  const n = Number(v);
  if (!Number.isFinite(n)) return 0;
  return n;
};
function ensureHealthShape(raw, options) {
  (0, _oneTimeLog.oneTimeLog)('ensureHealthShape-deprecated', () => console.info('[DEPRECATED] ensureHealthShape is deprecated.'));
  try {
    const validated = (0, _validateHealthResponse.validateHealthResponse)(raw);
    const vRec = isRecord(validated) ? validated : {};
    const perf = isRecord(vRec.performance) ? vRec.performance : undefined;
    const cache = isRecord(vRec.cache) ? vRec.cache : undefined;
    const infra = isRecord(vRec.infrastructure) ? vRec.infrastructure : undefined;
    const perfHitMain = perf ? perf.cache_hit_rate : undefined;
    const perfHitLegacy = perf ? perf.hit_rate : undefined;
    const cacheHitAlt = cache ? cache.hit_rate : undefined;
    const infraHit = infra && isRecord(infra.cache) ? infra.cache.hit_rate_percent : undefined;
    const computedRaw = perfHitMain ?? perfHitLegacy ?? cacheHitAlt ?? infraHit ?? 0;
    const computedHitRate = toSafeNumber(computedRaw);

    // mappedHitRate heuristics using original raw when possible
    let rawMappedHitRate = false;
    try {
      if (isRecord(raw)) {
        const rawRec = raw;
        const rPerf = isRecord(rawRec.performance) ? rawRec.performance : undefined;
        const rCache = isRecord(rawRec.cache) ? rawRec.cache : undefined;
        const rInfraCache = isRecord(rawRec.infrastructure) && isRecord(rawRec.infrastructure.cache) ? rawRec.infrastructure.cache : undefined;
        const hasPerfCache = !!(rPerf && rPerf.cache_hit_rate !== undefined);
        const hasPerfHit = !!(rPerf && rPerf.hit_rate !== undefined);
        const hasCacheHit = !!(rCache && rCache.hit_rate !== undefined);
        const hasInfraHit = !!(rInfraCache && rInfraCache.hit_rate_percent !== undefined);
        rawMappedHitRate = !hasPerfCache && (hasPerfHit || hasCacheHit || hasInfraHit);
      }
    } catch {
      // ignore
    }
    const overallStatus = vRec.overall_status;
    const servicesList = vRec.services;
    const findServiceStatus = name => {
      if (Array.isArray(servicesList)) {
        const arr = servicesList;
        const found = arr.find(s => s && typeof s === 'object' && 'name' in s && s.name === name);
        return found ? found.status : undefined;
      }
      return undefined;
    };
    return {
      status: mapStatus(overallStatus),
      services: {
        api: mapStatus(findServiceStatus('api')) || 'unknown',
        cache: mapStatus(infra && isRecord(infra.cache) ? infra.cache.status : undefined) || 'unknown',
        database: mapStatus(infra && isRecord(infra.database) ? infra.database.status : undefined) || 'unknown'
      },
      performance: {
        cache_hit_rate: computedHitRate,
        cache_type: isRecord(vRec.cache) ? 'unified' : 'unknown'
      },
      uptime_seconds: toSafeNumber(vRec.uptime_seconds),
      originFlags: {
        hadCacheHitRate: !!(perfHitMain !== undefined && perfHitMain !== null) || !!(perfHitLegacy !== undefined && perfHitLegacy !== null) || !!(cacheHitAlt !== undefined && cacheHitAlt !== null) || !!(infraHit !== undefined && infraHit !== null),
        mappedHitRate: rawMappedHitRate,
        usedMock: options?.usedMock || false
      }
    };
  } catch (error) {
    // Fallback: tolerant parsing for legacy shapes
    (0, _oneTimeLog.oneTimeLog)('ensureHealthShape-fallback', () => console.warn('[ensureHealthShape] Validation failed, using fallback data:', error));
    if (raw && typeof raw === 'object') {
      const rawObj = raw;
      const mapLegacyStatus = val => {
        if (val === true || val === 1 || String(val).toLowerCase() === '1' || String(val).toLowerCase() === 'true') return 'healthy';
        if (val === false || val === 0 || String(val).toLowerCase() === '0' || String(val).toLowerCase() === 'false') return 'unhealthy';
        if (typeof val === 'string') {
          const s = val.toLowerCase();
          if (s === 'healthy' || s === 'ok') return 'healthy';
          if (s === 'unhealthy' || s === 'down' || s === 'error') return 'unhealthy';
          if (s === 'degraded' || s === 'warning') return 'degraded';
          return s;
        }
        return 'unknown';
      };
      const status = rawObj.status !== undefined ? mapLegacyStatus(rawObj.status) : 'unknown';
      const servicesRaw = rawObj.services ?? {};
      const servicesRec = isRecord(servicesRaw) ? servicesRaw : {};
      const servicesOut = {
        api: servicesRec['api'] !== undefined ? mapLegacyStatus(servicesRec['api']) : 'unknown',
        cache: servicesRec['cache'] !== undefined ? mapLegacyStatus(servicesRec['cache']) : 'unknown',
        database: servicesRec['database'] !== undefined ? mapLegacyStatus(servicesRec['database']) : 'unknown'
      };
      const perfRec = isRecord(rawObj.performance) ? rawObj.performance : undefined;
      const infraRec = isRecord(rawObj.infrastructure) ? rawObj.infrastructure : undefined;
      const infraCacheRec = infraRec && isRecord(infraRec.cache) ? infraRec.cache : undefined;
      let hitRate = undefined;
      if (perfRec && perfRec.cache_hit_rate !== undefined) hitRate = perfRec.cache_hit_rate;else if (perfRec && perfRec.hit_rate !== undefined) hitRate = perfRec.hit_rate;else if (infraCacheRec && infraCacheRec.hit_rate_percent !== undefined) hitRate = infraCacheRec.hit_rate_percent;
      const cacheHit = (() => {
        if (typeof hitRate === 'boolean') return hitRate ? 1 : 0;
        const n = Number(hitRate);
        if (!Number.isFinite(n)) return 0;
        return n;
      })();
      return {
        status,
        services: servicesOut,
        performance: {
          cache_hit_rate: cacheHit,
          cache_type: rawObj.cache ? 'unified' : 'unknown'
        },
        uptime_seconds: (() => {
          const n = Number(rawObj.uptime_seconds || 0);
          return Number.isFinite(n) ? n : 0;
        })(),
        originFlags: {
          hadCacheHitRate: !!hitRate,
          mappedHitRate: !!(perfRec && perfRec.hit_rate !== undefined) || !!(infraCacheRec && infraCacheRec.hit_rate_percent !== undefined) && !(perfRec && perfRec.cache_hit_rate !== undefined),
          usedMock: options?.usedMock || true
        }
      };
    }
    return {
      status: 'unknown',
      services: {
        api: 'unknown',
        cache: 'unknown',
        database: 'unknown'
      },
      performance: {
        cache_hit_rate: 0,
        cache_type: 'unknown'
      },
      uptime_seconds: 0,
      originFlags: {
        hadCacheHitRate: false,
        mappedHitRate: false,
        usedMock: options?.usedMock || true
      }
    };
  }
}
// Trimmed: keep only the single clean implementation above.
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfdmFsaWRhdGVIZWFsdGhSZXNwb25zZSIsInJlcXVpcmUiLCJfb25lVGltZUxvZyIsImlzUmVjb3JkIiwieCIsIm1hcFN0YXR1cyIsInMiLCJ0b1NhZmVOdW1iZXIiLCJ2IiwibiIsIk51bWJlciIsImlzRmluaXRlIiwiZW5zdXJlSGVhbHRoU2hhcGUiLCJyYXciLCJvcHRpb25zIiwib25lVGltZUxvZyIsImNvbnNvbGUiLCJpbmZvIiwidmFsaWRhdGVkIiwidmFsaWRhdGVIZWFsdGhSZXNwb25zZSIsInZSZWMiLCJwZXJmIiwicGVyZm9ybWFuY2UiLCJ1bmRlZmluZWQiLCJjYWNoZSIsImluZnJhIiwiaW5mcmFzdHJ1Y3R1cmUiLCJwZXJmSGl0TWFpbiIsImNhY2hlX2hpdF9yYXRlIiwicGVyZkhpdExlZ2FjeSIsImhpdF9yYXRlIiwiY2FjaGVIaXRBbHQiLCJpbmZyYUhpdCIsImhpdF9yYXRlX3BlcmNlbnQiLCJjb21wdXRlZFJhdyIsImNvbXB1dGVkSGl0UmF0ZSIsInJhd01hcHBlZEhpdFJhdGUiLCJyYXdSZWMiLCJyUGVyZiIsInJDYWNoZSIsInJJbmZyYUNhY2hlIiwiaGFzUGVyZkNhY2hlIiwiaGFzUGVyZkhpdCIsImhhc0NhY2hlSGl0IiwiaGFzSW5mcmFIaXQiLCJvdmVyYWxsU3RhdHVzIiwib3ZlcmFsbF9zdGF0dXMiLCJzZXJ2aWNlc0xpc3QiLCJzZXJ2aWNlcyIsImZpbmRTZXJ2aWNlU3RhdHVzIiwibmFtZSIsIkFycmF5IiwiaXNBcnJheSIsImFyciIsImZvdW5kIiwiZmluZCIsInN0YXR1cyIsImFwaSIsImRhdGFiYXNlIiwiY2FjaGVfdHlwZSIsInVwdGltZV9zZWNvbmRzIiwib3JpZ2luRmxhZ3MiLCJoYWRDYWNoZUhpdFJhdGUiLCJtYXBwZWRIaXRSYXRlIiwidXNlZE1vY2siLCJlcnJvciIsIndhcm4iLCJyYXdPYmoiLCJtYXBMZWdhY3lTdGF0dXMiLCJ2YWwiLCJTdHJpbmciLCJ0b0xvd2VyQ2FzZSIsInNlcnZpY2VzUmF3Iiwic2VydmljZXNSZWMiLCJzZXJ2aWNlc091dCIsInBlcmZSZWMiLCJpbmZyYVJlYyIsImluZnJhQ2FjaGVSZWMiLCJoaXRSYXRlIiwiY2FjaGVIaXQiXSwic291cmNlcyI6WyJlbnN1cmVIZWFsdGhTaGFwZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcclxuICogQ2xlYW4sIHNpbmdsZSBpbXBsZW1lbnRhdGlvbiBvZiBlbnN1cmVIZWFsdGhTaGFwZS5cclxuICogTm9ybWFsaXplcyBoZWFsdGggcmVzcG9uc2VzIGFuZCBhdm9pZHMgZGlyZWN0IHByb3BlcnR5IGFjY2VzcyBvbiB1bmtub3duLlxyXG4gKi9cclxuaW1wb3J0IHsgdmFsaWRhdGVIZWFsdGhSZXNwb25zZSB9IGZyb20gJy4vdmFsaWRhdGVIZWFsdGhSZXNwb25zZSc7XHJcbmltcG9ydCB7IG9uZVRpbWVMb2cgfSBmcm9tICcuL29uZVRpbWVMb2cnO1xyXG5cclxuZXhwb3J0IGludGVyZmFjZSBTeXN0ZW1IZWFsdGgge1xyXG4gIHN0YXR1czogc3RyaW5nO1xyXG4gIHNlcnZpY2VzOiB7XHJcbiAgICBhcGk6IHN0cmluZztcclxuICAgIGNhY2hlOiBzdHJpbmc7XHJcbiAgICBkYXRhYmFzZTogc3RyaW5nO1xyXG4gIH07XHJcbiAgcGVyZm9ybWFuY2U6IHtcclxuICAgIGNhY2hlX2hpdF9yYXRlOiBudW1iZXI7XHJcbiAgICBjYWNoZV90eXBlOiBzdHJpbmc7XHJcbiAgfTtcclxuICB1cHRpbWVfc2Vjb25kczogbnVtYmVyO1xyXG4gIG9yaWdpbkZsYWdzPzoge1xyXG4gICAgaGFkQ2FjaGVIaXRSYXRlPzogYm9vbGVhbjtcclxuICAgIG1hcHBlZEhpdFJhdGU/OiBib29sZWFuO1xyXG4gICAgdXNlZE1vY2s/OiBib29sZWFuO1xyXG4gIH07XHJcbn1cclxuXHJcbmNvbnN0IGlzUmVjb3JkID0gKHg6IHVua25vd24pOiB4IGlzIFJlY29yZDxzdHJpbmcsIHVua25vd24+ID0+IHR5cGVvZiB4ID09PSAnb2JqZWN0JyAmJiB4ICE9PSBudWxsO1xyXG5cclxuY29uc3QgbWFwU3RhdHVzID0gKHM6IHVua25vd24pID0+IHtcclxuICBpZiAocyA9PT0gJ29rJyB8fCBzID09PSAnaGVhbHRoeScpIHJldHVybiAnaGVhbHRoeSc7XHJcbiAgaWYgKHMgPT09ICdkZWdyYWRlZCcpIHJldHVybiAnZGVncmFkZWQnO1xyXG4gIGlmIChzID09PSAnZG93bicgfHwgcyA9PT0gJ3VuaGVhbHRoeScgfHwgcyA9PT0gJ2Vycm9yJykgcmV0dXJuICd1bmhlYWx0aHknO1xyXG4gIHJldHVybiAndW5rbm93bic7XHJcbn07XHJcblxyXG5jb25zdCB0b1NhZmVOdW1iZXIgPSAodjogdW5rbm93bik6IG51bWJlciA9PiB7XHJcbiAgaWYgKHR5cGVvZiB2ID09PSAnYm9vbGVhbicpIHJldHVybiB2ID8gMSA6IDA7XHJcbiAgY29uc3QgbiA9IE51bWJlcih2KTtcclxuICBpZiAoIU51bWJlci5pc0Zpbml0ZShuKSkgcmV0dXJuIDA7XHJcbiAgcmV0dXJuIG47XHJcbn07XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZW5zdXJlSGVhbHRoU2hhcGUocmF3OiB1bmtub3duLCBvcHRpb25zPzogeyB1c2VkTW9jaz86IGJvb2xlYW4gfSk6IFN5c3RlbUhlYWx0aCB7XHJcbiAgb25lVGltZUxvZygnZW5zdXJlSGVhbHRoU2hhcGUtZGVwcmVjYXRlZCcsICgpID0+IGNvbnNvbGUuaW5mbygnW0RFUFJFQ0FURURdIGVuc3VyZUhlYWx0aFNoYXBlIGlzIGRlcHJlY2F0ZWQuJykpO1xyXG5cclxuICB0cnkge1xyXG4gICAgY29uc3QgdmFsaWRhdGVkID0gdmFsaWRhdGVIZWFsdGhSZXNwb25zZShyYXcpO1xyXG4gICAgY29uc3QgdlJlYzogUmVjb3JkPHN0cmluZywgdW5rbm93bj4gPSBpc1JlY29yZCh2YWxpZGF0ZWQpID8gdmFsaWRhdGVkIGFzIFJlY29yZDxzdHJpbmcsIHVua25vd24+IDoge307XHJcblxyXG4gICAgY29uc3QgcGVyZiA9IGlzUmVjb3JkKHZSZWMucGVyZm9ybWFuY2UpID8gKHZSZWMucGVyZm9ybWFuY2UgYXMgUmVjb3JkPHN0cmluZywgdW5rbm93bj4pIDogdW5kZWZpbmVkO1xyXG4gICAgY29uc3QgY2FjaGUgPSBpc1JlY29yZCh2UmVjLmNhY2hlKSA/ICh2UmVjLmNhY2hlIGFzIFJlY29yZDxzdHJpbmcsIHVua25vd24+KSA6IHVuZGVmaW5lZDtcclxuICAgIGNvbnN0IGluZnJhID0gaXNSZWNvcmQodlJlYy5pbmZyYXN0cnVjdHVyZSkgPyAodlJlYy5pbmZyYXN0cnVjdHVyZSBhcyBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPikgOiB1bmRlZmluZWQ7XHJcblxyXG4gICAgY29uc3QgcGVyZkhpdE1haW4gPSBwZXJmID8gcGVyZi5jYWNoZV9oaXRfcmF0ZSA6IHVuZGVmaW5lZDtcclxuICAgIGNvbnN0IHBlcmZIaXRMZWdhY3kgPSBwZXJmID8gcGVyZi5oaXRfcmF0ZSA6IHVuZGVmaW5lZDtcclxuICAgIGNvbnN0IGNhY2hlSGl0QWx0ID0gY2FjaGUgPyBjYWNoZS5oaXRfcmF0ZSA6IHVuZGVmaW5lZDtcclxuICAgIGNvbnN0IGluZnJhSGl0ID0gaW5mcmEgJiYgaXNSZWNvcmQoaW5mcmEuY2FjaGUpID8gKChpbmZyYS5jYWNoZSBhcyBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPikuaGl0X3JhdGVfcGVyY2VudCkgOiB1bmRlZmluZWQ7XHJcblxyXG4gICAgY29uc3QgY29tcHV0ZWRSYXcgPSAoXHJcbiAgICAgIHBlcmZIaXRNYWluID8/IHBlcmZIaXRMZWdhY3kgPz8gY2FjaGVIaXRBbHQgPz8gaW5mcmFIaXQgPz8gMFxyXG4gICAgKTtcclxuXHJcbiAgICBjb25zdCBjb21wdXRlZEhpdFJhdGUgPSB0b1NhZmVOdW1iZXIoY29tcHV0ZWRSYXcpO1xyXG5cclxuICAgIC8vIG1hcHBlZEhpdFJhdGUgaGV1cmlzdGljcyB1c2luZyBvcmlnaW5hbCByYXcgd2hlbiBwb3NzaWJsZVxyXG4gICAgbGV0IHJhd01hcHBlZEhpdFJhdGUgPSBmYWxzZTtcclxuICAgIHRyeSB7XHJcbiAgICAgIGlmIChpc1JlY29yZChyYXcpKSB7XHJcbiAgICAgICAgY29uc3QgcmF3UmVjID0gcmF3IGFzIFJlY29yZDxzdHJpbmcsIHVua25vd24+O1xyXG4gICAgICAgIGNvbnN0IHJQZXJmID0gaXNSZWNvcmQocmF3UmVjLnBlcmZvcm1hbmNlKSA/IHJhd1JlYy5wZXJmb3JtYW5jZSBhcyBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPiA6IHVuZGVmaW5lZDtcclxuICAgICAgICBjb25zdCByQ2FjaGUgPSBpc1JlY29yZChyYXdSZWMuY2FjaGUpID8gcmF3UmVjLmNhY2hlIGFzIFJlY29yZDxzdHJpbmcsIHVua25vd24+IDogdW5kZWZpbmVkO1xyXG4gICAgICAgIGNvbnN0IHJJbmZyYUNhY2hlID0gaXNSZWNvcmQocmF3UmVjLmluZnJhc3RydWN0dXJlKSAmJiBpc1JlY29yZCgocmF3UmVjLmluZnJhc3RydWN0dXJlIGFzIFJlY29yZDxzdHJpbmcsIHVua25vd24+KS5jYWNoZSlcclxuICAgICAgICAgID8gKChyYXdSZWMuaW5mcmFzdHJ1Y3R1cmUgYXMgUmVjb3JkPHN0cmluZywgdW5rbm93bj4pLmNhY2hlIGFzIFJlY29yZDxzdHJpbmcsIHVua25vd24+KVxyXG4gICAgICAgICAgOiB1bmRlZmluZWQ7XHJcblxyXG4gICAgICAgIGNvbnN0IGhhc1BlcmZDYWNoZSA9ICEhKHJQZXJmICYmIHJQZXJmLmNhY2hlX2hpdF9yYXRlICE9PSB1bmRlZmluZWQpO1xyXG4gICAgICAgIGNvbnN0IGhhc1BlcmZIaXQgPSAhIShyUGVyZiAmJiByUGVyZi5oaXRfcmF0ZSAhPT0gdW5kZWZpbmVkKTtcclxuICAgICAgICBjb25zdCBoYXNDYWNoZUhpdCA9ICEhKHJDYWNoZSAmJiByQ2FjaGUuaGl0X3JhdGUgIT09IHVuZGVmaW5lZCk7XHJcbiAgICAgICAgY29uc3QgaGFzSW5mcmFIaXQgPSAhIShySW5mcmFDYWNoZSAmJiBySW5mcmFDYWNoZS5oaXRfcmF0ZV9wZXJjZW50ICE9PSB1bmRlZmluZWQpO1xyXG5cclxuICAgICAgICByYXdNYXBwZWRIaXRSYXRlID0gIWhhc1BlcmZDYWNoZSAmJiAoaGFzUGVyZkhpdCB8fCBoYXNDYWNoZUhpdCB8fCBoYXNJbmZyYUhpdCk7XHJcbiAgICAgIH1cclxuICAgIH0gY2F0Y2gge1xyXG4gICAgICAvLyBpZ25vcmVcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBvdmVyYWxsU3RhdHVzID0gdlJlYy5vdmVyYWxsX3N0YXR1cyBhcyB1bmtub3duO1xyXG4gICAgY29uc3Qgc2VydmljZXNMaXN0ID0gdlJlYy5zZXJ2aWNlcyBhcyB1bmtub3duO1xyXG4gICAgY29uc3QgZmluZFNlcnZpY2VTdGF0dXMgPSAobmFtZTogc3RyaW5nKTogdW5rbm93biA9PiB7XHJcbiAgICAgIGlmIChBcnJheS5pc0FycmF5KHNlcnZpY2VzTGlzdCkpIHtcclxuICAgICAgICBjb25zdCBhcnIgPSBzZXJ2aWNlc0xpc3QgYXMgQXJyYXk8UmVjb3JkPHN0cmluZywgdW5rbm93bj4+O1xyXG4gICAgICAgIGNvbnN0IGZvdW5kID0gYXJyLmZpbmQoKHMpID0+IHMgJiYgdHlwZW9mIHMgPT09ICdvYmplY3QnICYmICduYW1lJyBpbiBzICYmIChzIGFzIFJlY29yZDxzdHJpbmcsIHVua25vd24+KS5uYW1lID09PSBuYW1lKTtcclxuICAgICAgICByZXR1cm4gZm91bmQgPyAoZm91bmQgYXMgUmVjb3JkPHN0cmluZywgdW5rbm93bj4pLnN0YXR1cyA6IHVuZGVmaW5lZDtcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gdW5kZWZpbmVkO1xyXG4gICAgfTtcclxuXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBzdGF0dXM6IG1hcFN0YXR1cyhvdmVyYWxsU3RhdHVzKSxcclxuICAgICAgc2VydmljZXM6IHtcclxuICAgICAgICBhcGk6IG1hcFN0YXR1cyhmaW5kU2VydmljZVN0YXR1cygnYXBpJykpIHx8ICd1bmtub3duJyxcclxuICAgICAgICBjYWNoZTogbWFwU3RhdHVzKGluZnJhICYmIGlzUmVjb3JkKGluZnJhLmNhY2hlKSA/IChpbmZyYS5jYWNoZSBhcyBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPikuc3RhdHVzIDogdW5kZWZpbmVkKSB8fCAndW5rbm93bicsXHJcbiAgICAgICAgZGF0YWJhc2U6IG1hcFN0YXR1cyhpbmZyYSAmJiBpc1JlY29yZChpbmZyYS5kYXRhYmFzZSkgPyAoaW5mcmEuZGF0YWJhc2UgYXMgUmVjb3JkPHN0cmluZywgdW5rbm93bj4pLnN0YXR1cyA6IHVuZGVmaW5lZCkgfHwgJ3Vua25vd24nLFxyXG4gICAgICB9LFxyXG4gICAgICBwZXJmb3JtYW5jZToge1xyXG4gICAgICAgIGNhY2hlX2hpdF9yYXRlOiBjb21wdXRlZEhpdFJhdGUsXHJcbiAgICAgICAgY2FjaGVfdHlwZTogaXNSZWNvcmQodlJlYy5jYWNoZSkgPyAndW5pZmllZCcgOiAndW5rbm93bicsXHJcbiAgICAgIH0sXHJcbiAgICAgIHVwdGltZV9zZWNvbmRzOiB0b1NhZmVOdW1iZXIodlJlYy51cHRpbWVfc2Vjb25kcyksXHJcbiAgICAgIG9yaWdpbkZsYWdzOiB7XHJcbiAgICAgICAgaGFkQ2FjaGVIaXRSYXRlOiAhIShwZXJmSGl0TWFpbiAhPT0gdW5kZWZpbmVkICYmIHBlcmZIaXRNYWluICE9PSBudWxsKSB8fCAhIShwZXJmSGl0TGVnYWN5ICE9PSB1bmRlZmluZWQgJiYgcGVyZkhpdExlZ2FjeSAhPT0gbnVsbCkgfHwgISEoY2FjaGVIaXRBbHQgIT09IHVuZGVmaW5lZCAmJiBjYWNoZUhpdEFsdCAhPT0gbnVsbCkgfHwgISEoaW5mcmFIaXQgIT09IHVuZGVmaW5lZCAmJiBpbmZyYUhpdCAhPT0gbnVsbCksXHJcbiAgICAgICAgbWFwcGVkSGl0UmF0ZTogcmF3TWFwcGVkSGl0UmF0ZSxcclxuICAgICAgICB1c2VkTW9jazogb3B0aW9ucz8udXNlZE1vY2sgfHwgZmFsc2UsXHJcbiAgICAgIH0sXHJcbiAgICB9O1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAvLyBGYWxsYmFjazogdG9sZXJhbnQgcGFyc2luZyBmb3IgbGVnYWN5IHNoYXBlc1xyXG4gICAgb25lVGltZUxvZygnZW5zdXJlSGVhbHRoU2hhcGUtZmFsbGJhY2snLCAoKSA9PiBjb25zb2xlLndhcm4oJ1tlbnN1cmVIZWFsdGhTaGFwZV0gVmFsaWRhdGlvbiBmYWlsZWQsIHVzaW5nIGZhbGxiYWNrIGRhdGE6JywgZXJyb3IpKTtcclxuXHJcbiAgICBpZiAocmF3ICYmIHR5cGVvZiByYXcgPT09ICdvYmplY3QnKSB7XHJcbiAgICAgIGNvbnN0IHJhd09iaiA9IHJhdyBhcyBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPjtcclxuICAgICAgY29uc3QgbWFwTGVnYWN5U3RhdHVzID0gKHZhbDogdW5rbm93bikgPT4ge1xyXG4gICAgICAgIGlmICh2YWwgPT09IHRydWUgfHwgdmFsID09PSAxIHx8IFN0cmluZyh2YWwpLnRvTG93ZXJDYXNlKCkgPT09ICcxJyB8fCBTdHJpbmcodmFsKS50b0xvd2VyQ2FzZSgpID09PSAndHJ1ZScpIHJldHVybiAnaGVhbHRoeSc7XHJcbiAgICAgICAgaWYgKHZhbCA9PT0gZmFsc2UgfHwgdmFsID09PSAwIHx8IFN0cmluZyh2YWwpLnRvTG93ZXJDYXNlKCkgPT09ICcwJyB8fCBTdHJpbmcodmFsKS50b0xvd2VyQ2FzZSgpID09PSAnZmFsc2UnKSByZXR1cm4gJ3VuaGVhbHRoeSc7XHJcbiAgICAgICAgaWYgKHR5cGVvZiB2YWwgPT09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgICBjb25zdCBzID0gdmFsLnRvTG93ZXJDYXNlKCk7XHJcbiAgICAgICAgICBpZiAocyA9PT0gJ2hlYWx0aHknIHx8IHMgPT09ICdvaycpIHJldHVybiAnaGVhbHRoeSc7XHJcbiAgICAgICAgICBpZiAocyA9PT0gJ3VuaGVhbHRoeScgfHwgcyA9PT0gJ2Rvd24nIHx8IHMgPT09ICdlcnJvcicpIHJldHVybiAndW5oZWFsdGh5JztcclxuICAgICAgICAgIGlmIChzID09PSAnZGVncmFkZWQnIHx8IHMgPT09ICd3YXJuaW5nJykgcmV0dXJuICdkZWdyYWRlZCc7XHJcbiAgICAgICAgICByZXR1cm4gcztcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuICd1bmtub3duJztcclxuICAgICAgfTtcclxuXHJcbiAgICAgIGNvbnN0IHN0YXR1cyA9IHJhd09iai5zdGF0dXMgIT09IHVuZGVmaW5lZCA/IG1hcExlZ2FjeVN0YXR1cyhyYXdPYmouc3RhdHVzKSA6ICd1bmtub3duJztcclxuICAgICAgY29uc3Qgc2VydmljZXNSYXc6IHVua25vd24gPSByYXdPYmouc2VydmljZXMgPz8ge307XHJcbiAgICAgIGNvbnN0IHNlcnZpY2VzUmVjOiBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPiA9IGlzUmVjb3JkKHNlcnZpY2VzUmF3KSA/IHNlcnZpY2VzUmF3IGFzIFJlY29yZDxzdHJpbmcsIHVua25vd24+IDoge30gYXMgUmVjb3JkPHN0cmluZywgdW5rbm93bj47XHJcbiAgICAgIGNvbnN0IHNlcnZpY2VzT3V0ID0ge1xyXG4gICAgICAgIGFwaTogc2VydmljZXNSZWNbJ2FwaSddICE9PSB1bmRlZmluZWQgPyBtYXBMZWdhY3lTdGF0dXMoc2VydmljZXNSZWNbJ2FwaSddKSA6ICd1bmtub3duJyxcclxuICAgICAgICBjYWNoZTogc2VydmljZXNSZWNbJ2NhY2hlJ10gIT09IHVuZGVmaW5lZCA/IG1hcExlZ2FjeVN0YXR1cyhzZXJ2aWNlc1JlY1snY2FjaGUnXSkgOiAndW5rbm93bicsXHJcbiAgICAgICAgZGF0YWJhc2U6IHNlcnZpY2VzUmVjWydkYXRhYmFzZSddICE9PSB1bmRlZmluZWQgPyBtYXBMZWdhY3lTdGF0dXMoc2VydmljZXNSZWNbJ2RhdGFiYXNlJ10pIDogJ3Vua25vd24nLFxyXG4gICAgICB9O1xyXG5cclxuICAgICAgY29uc3QgcGVyZlJlYyA9IGlzUmVjb3JkKHJhd09iai5wZXJmb3JtYW5jZSkgPyAocmF3T2JqLnBlcmZvcm1hbmNlIGFzIFJlY29yZDxzdHJpbmcsIHVua25vd24+KSA6IHVuZGVmaW5lZDtcclxuICAgICAgY29uc3QgaW5mcmFSZWMgPSBpc1JlY29yZChyYXdPYmouaW5mcmFzdHJ1Y3R1cmUpID8gKHJhd09iai5pbmZyYXN0cnVjdHVyZSBhcyBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPikgOiB1bmRlZmluZWQ7XHJcbiAgICAgIGNvbnN0IGluZnJhQ2FjaGVSZWMgPSBpbmZyYVJlYyAmJiBpc1JlY29yZChpbmZyYVJlYy5jYWNoZSkgPyAoaW5mcmFSZWMuY2FjaGUgYXMgUmVjb3JkPHN0cmluZywgdW5rbm93bj4pIDogdW5kZWZpbmVkO1xyXG5cclxuICAgICAgbGV0IGhpdFJhdGU6IHVua25vd24gPSB1bmRlZmluZWQ7XHJcbiAgICAgIGlmIChwZXJmUmVjICYmIHBlcmZSZWMuY2FjaGVfaGl0X3JhdGUgIT09IHVuZGVmaW5lZCkgaGl0UmF0ZSA9IHBlcmZSZWMuY2FjaGVfaGl0X3JhdGU7XHJcbiAgICAgIGVsc2UgaWYgKHBlcmZSZWMgJiYgcGVyZlJlYy5oaXRfcmF0ZSAhPT0gdW5kZWZpbmVkKSBoaXRSYXRlID0gcGVyZlJlYy5oaXRfcmF0ZTtcclxuICAgICAgZWxzZSBpZiAoaW5mcmFDYWNoZVJlYyAmJiBpbmZyYUNhY2hlUmVjLmhpdF9yYXRlX3BlcmNlbnQgIT09IHVuZGVmaW5lZCkgaGl0UmF0ZSA9IGluZnJhQ2FjaGVSZWMuaGl0X3JhdGVfcGVyY2VudDtcclxuXHJcbiAgICAgIGNvbnN0IGNhY2hlSGl0ID0gKCgpOiBudW1iZXIgPT4ge1xyXG4gICAgICAgIGlmICh0eXBlb2YgaGl0UmF0ZSA9PT0gJ2Jvb2xlYW4nKSByZXR1cm4gaGl0UmF0ZSA/IDEgOiAwO1xyXG4gICAgICAgIGNvbnN0IG4gPSBOdW1iZXIoaGl0UmF0ZSk7XHJcbiAgICAgICAgaWYgKCFOdW1iZXIuaXNGaW5pdGUobikpIHJldHVybiAwO1xyXG4gICAgICAgIHJldHVybiBuO1xyXG4gICAgICB9KSgpO1xyXG5cclxuICAgICAgcmV0dXJuIHtcclxuICAgICAgICBzdGF0dXMsXHJcbiAgICAgICAgc2VydmljZXM6IHNlcnZpY2VzT3V0LFxyXG4gICAgICAgIHBlcmZvcm1hbmNlOiB7XHJcbiAgICAgICAgICBjYWNoZV9oaXRfcmF0ZTogY2FjaGVIaXQsXHJcbiAgICAgICAgICBjYWNoZV90eXBlOiByYXdPYmouY2FjaGUgPyAndW5pZmllZCcgOiAndW5rbm93bicsXHJcbiAgICAgICAgfSxcclxuICAgICAgICB1cHRpbWVfc2Vjb25kczogKCgpOiBudW1iZXIgPT4geyBjb25zdCBuID0gTnVtYmVyKChyYXdPYmoudXB0aW1lX3NlY29uZHMgYXMgdW5rbm93bikgfHwgMCk7IHJldHVybiBOdW1iZXIuaXNGaW5pdGUobikgPyBuIDogMDsgfSkoKSxcclxuICAgICAgICBvcmlnaW5GbGFnczoge1xyXG4gICAgICAgICAgaGFkQ2FjaGVIaXRSYXRlOiAhIWhpdFJhdGUsXHJcbiAgICAgICAgICBtYXBwZWRIaXRSYXRlOiAhIShwZXJmUmVjICYmIHBlcmZSZWMuaGl0X3JhdGUgIT09IHVuZGVmaW5lZCkgfHwgKCEhKGluZnJhQ2FjaGVSZWMgJiYgaW5mcmFDYWNoZVJlYy5oaXRfcmF0ZV9wZXJjZW50ICE9PSB1bmRlZmluZWQpICYmICEocGVyZlJlYyAmJiBwZXJmUmVjLmNhY2hlX2hpdF9yYXRlICE9PSB1bmRlZmluZWQpKSxcclxuICAgICAgICAgIHVzZWRNb2NrOiBvcHRpb25zPy51c2VkTW9jayB8fCB0cnVlLFxyXG4gICAgICAgIH0sXHJcbiAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgc3RhdHVzOiAndW5rbm93bicsXHJcbiAgICAgIHNlcnZpY2VzOiB7IGFwaTogJ3Vua25vd24nLCBjYWNoZTogJ3Vua25vd24nLCBkYXRhYmFzZTogJ3Vua25vd24nIH0sXHJcbiAgICAgIHBlcmZvcm1hbmNlOiB7IGNhY2hlX2hpdF9yYXRlOiAwLCBjYWNoZV90eXBlOiAndW5rbm93bicgfSxcclxuICAgICAgdXB0aW1lX3NlY29uZHM6IDAsXHJcbiAgICAgIG9yaWdpbkZsYWdzOiB7IGhhZENhY2hlSGl0UmF0ZTogZmFsc2UsIG1hcHBlZEhpdFJhdGU6IGZhbHNlLCB1c2VkTW9jazogb3B0aW9ucz8udXNlZE1vY2sgfHwgdHJ1ZSB9LFxyXG4gICAgfTtcclxuICB9XHJcbn1cclxuLy8gVHJpbW1lZDoga2VlcCBvbmx5IHRoZSBzaW5nbGUgY2xlYW4gaW1wbGVtZW50YXRpb24gYWJvdmUuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFJQSxJQUFBQSx1QkFBQSxHQUFBQyxPQUFBO0FBQ0EsSUFBQUMsV0FBQSxHQUFBRCxPQUFBO0FBTEE7QUFDQTtBQUNBO0FBQ0E7O0FBdUJBLE1BQU1FLFFBQVEsR0FBSUMsQ0FBVSxJQUFtQyxPQUFPQSxDQUFDLEtBQUssUUFBUSxJQUFJQSxDQUFDLEtBQUssSUFBSTtBQUVsRyxNQUFNQyxTQUFTLEdBQUlDLENBQVUsSUFBSztFQUNoQyxJQUFJQSxDQUFDLEtBQUssSUFBSSxJQUFJQSxDQUFDLEtBQUssU0FBUyxFQUFFLE9BQU8sU0FBUztFQUNuRCxJQUFJQSxDQUFDLEtBQUssVUFBVSxFQUFFLE9BQU8sVUFBVTtFQUN2QyxJQUFJQSxDQUFDLEtBQUssTUFBTSxJQUFJQSxDQUFDLEtBQUssV0FBVyxJQUFJQSxDQUFDLEtBQUssT0FBTyxFQUFFLE9BQU8sV0FBVztFQUMxRSxPQUFPLFNBQVM7QUFDbEIsQ0FBQztBQUVELE1BQU1DLFlBQVksR0FBSUMsQ0FBVSxJQUFhO0VBQzNDLElBQUksT0FBT0EsQ0FBQyxLQUFLLFNBQVMsRUFBRSxPQUFPQSxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUM7RUFDNUMsTUFBTUMsQ0FBQyxHQUFHQyxNQUFNLENBQUNGLENBQUMsQ0FBQztFQUNuQixJQUFJLENBQUNFLE1BQU0sQ0FBQ0MsUUFBUSxDQUFDRixDQUFDLENBQUMsRUFBRSxPQUFPLENBQUM7RUFDakMsT0FBT0EsQ0FBQztBQUNWLENBQUM7QUFFTSxTQUFTRyxpQkFBaUJBLENBQUNDLEdBQVksRUFBRUMsT0FBZ0MsRUFBZ0I7RUFDOUYsSUFBQUMsc0JBQVUsRUFBQyw4QkFBOEIsRUFBRSxN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