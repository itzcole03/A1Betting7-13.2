53caeaccca99e18787cabbe35becb891
"use strict";

// Jest setup for enhanced config â€” plain JS to avoid TypeScript parsing issues
/* eslint-disable no-undef */
// Provide import.meta.env shim for components that read it
if (typeof global.importMeta === 'undefined') {
  global.importMeta = {
    env: {}
  };
}
if (typeof global.import === 'undefined') {
  global.import = global.import || function () {};
}
// Ensure modules can read import.meta.env
if (typeof global.import !== 'undefined' && typeof global.import.meta === 'undefined') {
  global.import.meta = {
    env: {
      MODE: 'test',
      DEV: false,
      PROD: false,
      VITE_API_URL: 'http://localhost:8000'
    }
  };
}
// Also set window.import.meta for browser code
if (typeof window !== 'undefined' && typeof window.import === 'undefined') {
  window.import = window.import || {};
  window.import.meta = window.import.meta || {
    env: {
      MODE: 'test',
      DEV: false,
      PROD: false
    }
  };
}

// Stub URL.createObjectURL used by components
if (typeof window !== 'undefined' && !window.URL.createObjectURL) {
  window.URL.createObjectURL = function () {
    return 'blob:mock';
  };
}

// No-op for navigation methods that jsdom doesn't implement
if (typeof window !== 'undefined') {
  try {
    const loc = window.location || {};
    if (loc && typeof loc.assign !== 'function') {
      Object.defineProperty(window.location, 'assign', {
        configurable: true,
        writable: true,
        value: () => {}
      });
    }
    if (loc && typeof loc.reload !== 'function') {
      Object.defineProperty(window.location, 'reload', {
        configurable: true,
        writable: true,
        value: () => {}
      });
    }
  } catch (e) {
    // Some environments lock window.location; ignore if we cannot redefine
  }

  // Polyfill BroadcastChannel for msw/node or other libraries that expect it
  if (typeof global.BroadcastChannel === 'undefined') {
    class MockBroadcastChannel {
      constructor(name) {
        this.name = name;
        this.onmessage = null;
      }
      postMessage(msg) {
        // no-op
      }
      close() {
        // no-op
      }
      addEventListener() {
        // no-op
      }
      removeEventListener() {
        // no-op
      }
    }
    global.BroadcastChannel = MockBroadcastChannel;
  }

  // Hoist manual mocks so modules see them before being imported in tests
  try {
    // Mock unifiedApiService so components that import it get the manual mock
    // NOTE: Do not hoist module mocks for `unifiedApiService` or `axios` here.
    // Tests and MSW handlers should register these mocks explicitly so test
    // scenarios (empty-state, error-state, etc.) can control responses.
  } catch (err) {
    // If jest isn't available in this environment, ignore
  }

  // Minimal TransformStream polyfill for environments that don't provide it (nodejs test env)
  if (typeof TransformStream === 'undefined') {
    // eslint-disable-next-line no-global-assign
    global.TransformStream = class {
      constructor() {
        this.readable = new class {
          getReader() {
            return {
              read: () => Promise.resolve({
                done: true,
                value: undefined
              })
            };
          }
        }();
        this.writable = new class {
          getWriter() {
            return {
              write: () => Promise.resolve(),
              close: () => Promise.resolve()
            };
          }
        }();
      }
    };
  }
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJnbG9iYWwiLCJpbXBvcnRNZXRhIiwiZW52IiwiaW1wb3J0IiwibWV0YSIsIk1PREUiLCJERVYiLCJQUk9EIiwiVklURV9BUElfVVJMIiwid2luZG93IiwiVVJMIiwiY3JlYXRlT2JqZWN0VVJMIiwibG9jIiwibG9jYXRpb24iLCJhc3NpZ24iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImNvbmZpZ3VyYWJsZSIsIndyaXRhYmxlIiwidmFsdWUiLCJyZWxvYWQiLCJlIiwiQnJvYWRjYXN0Q2hhbm5lbCIsIk1vY2tCcm9hZGNhc3RDaGFubmVsIiwiY29uc3RydWN0b3IiLCJuYW1lIiwib25tZXNzYWdlIiwicG9zdE1lc3NhZ2UiLCJtc2ciLCJjbG9zZSIsImFkZEV2ZW50TGlzdGVuZXIiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiZXJyIiwiVHJhbnNmb3JtU3RyZWFtIiwicmVhZGFibGUiLCJnZXRSZWFkZXIiLCJyZWFkIiwiUHJvbWlzZSIsInJlc29sdmUiLCJkb25lIiwidW5kZWZpbmVkIiwiZ2V0V3JpdGVyIiwid3JpdGUiXSwic291cmNlcyI6WyJqZXN0LnNldHVwLmVuaGFuY2VkLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIEplc3Qgc2V0dXAgZm9yIGVuaGFuY2VkIGNvbmZpZyDigJQgcGxhaW4gSlMgdG8gYXZvaWQgVHlwZVNjcmlwdCBwYXJzaW5nIGlzc3Vlc1xyXG4vKiBlc2xpbnQtZGlzYWJsZSBuby11bmRlZiAqL1xyXG4vLyBQcm92aWRlIGltcG9ydC5tZXRhLmVudiBzaGltIGZvciBjb21wb25lbnRzIHRoYXQgcmVhZCBpdFxyXG5pZiAodHlwZW9mIGdsb2JhbC5pbXBvcnRNZXRhID09PSAndW5kZWZpbmVkJykge1xyXG4gIGdsb2JhbC5pbXBvcnRNZXRhID0geyBlbnY6IHt9IH07XHJcbn1cclxuaWYgKHR5cGVvZiBnbG9iYWwuaW1wb3J0ID09PSAndW5kZWZpbmVkJykge1xyXG4gIGdsb2JhbC5pbXBvcnQgPSBnbG9iYWwuaW1wb3J0IHx8IGZ1bmN0aW9uICgpIHt9O1xyXG59XHJcbi8vIEVuc3VyZSBtb2R1bGVzIGNhbiByZWFkIGltcG9ydC5tZXRhLmVudlxyXG5pZiAodHlwZW9mIGdsb2JhbC5pbXBvcnQgIT09ICd1bmRlZmluZWQnICYmIHR5cGVvZiBnbG9iYWwuaW1wb3J0Lm1ldGEgPT09ICd1bmRlZmluZWQnKSB7XHJcbiAgZ2xvYmFsLmltcG9ydC5tZXRhID0geyBlbnY6IHsgTU9ERTogJ3Rlc3QnLCBERVY6IGZhbHNlLCBQUk9EOiBmYWxzZSwgVklURV9BUElfVVJMOiAnaHR0cDovL2xvY2FsaG9zdDo4MDAwJyB9IH07XHJcbn1cclxuLy8gQWxzbyBzZXQgd2luZG93LmltcG9ydC5tZXRhIGZvciBicm93c2VyIGNvZGVcclxuaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmIHR5cGVvZiB3aW5kb3cuaW1wb3J0ID09PSAndW5kZWZpbmVkJykge1xyXG4gIHdpbmRvdy5pbXBvcnQgPSB3aW5kb3cuaW1wb3J0IHx8IHt9O1xyXG4gIHdpbmRvdy5pbXBvcnQubWV0YSA9IHdpbmRvdy5pbXBvcnQubWV0YSB8fCB7IGVudjogeyBNT0RFOiAndGVzdCcsIERFVjogZmFsc2UsIFBST0Q6IGZhbHNlIH0gfTtcclxufVxyXG5cclxuLy8gU3R1YiBVUkwuY3JlYXRlT2JqZWN0VVJMIHVzZWQgYnkgY29tcG9uZW50c1xyXG5pZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiYgIXdpbmRvdy5VUkwuY3JlYXRlT2JqZWN0VVJMKSB7XHJcbiAgd2luZG93LlVSTC5jcmVhdGVPYmplY3RVUkwgPSBmdW5jdGlvbiAoKSB7IHJldHVybiAnYmxvYjptb2NrJzsgfTtcclxufVxyXG5cclxuLy8gTm8tb3AgZm9yIG5hdmlnYXRpb24gbWV0aG9kcyB0aGF0IGpzZG9tIGRvZXNuJ3QgaW1wbGVtZW50XHJcbmlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJykge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCBsb2MgPSB3aW5kb3cubG9jYXRpb24gfHwge307XHJcbiAgICBpZiAobG9jICYmIHR5cGVvZiBsb2MuYXNzaWduICE9PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh3aW5kb3cubG9jYXRpb24sICdhc3NpZ24nLCB7XHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxyXG4gICAgICAgIHdyaXRhYmxlOiB0cnVlLFxyXG4gICAgICAgIHZhbHVlOiAoKSA9PiB7fSxcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBpZiAobG9jICYmIHR5cGVvZiBsb2MucmVsb2FkICE9PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh3aW5kb3cubG9jYXRpb24sICdyZWxvYWQnLCB7XHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxyXG4gICAgICAgIHdyaXRhYmxlOiB0cnVlLFxyXG4gICAgICAgIHZhbHVlOiAoKSA9PiB7fSxcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgfSBjYXRjaCAoZSkge1xyXG4gICAgLy8gU29tZSBlbnZpcm9ubWVudHMgbG9jayB3aW5kb3cubG9jYXRpb247IGlnbm9yZSBpZiB3ZSBjYW5ub3QgcmVkZWZpbmVcclxuICB9XHJcblxyXG4gIC8vIFBvbHlmaWxsIEJyb2FkY2FzdENoYW5uZWwgZm9yIG1zdy9ub2RlIG9yIG90aGVyIGxpYnJhcmllcyB0aGF0IGV4cGVjdCBpdFxyXG4gIGlmICh0eXBlb2YgZ2xvYmFsLkJyb2FkY2FzdENoYW5uZWwgPT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICBjbGFzcyBNb2NrQnJvYWRjYXN0Q2hhbm5lbCB7XHJcbiAgICAgIGNvbnN0cnVjdG9yKG5hbWUpIHtcclxuICAgICAgICB0aGlzLm5hbWUgPSBuYW1lO1xyXG4gICAgICAgIHRoaXMub25tZXNzYWdlID0gbnVsbDtcclxuICAgICAgfVxyXG4gICAgICBwb3N0TWVzc2FnZShtc2cpIHtcclxuICAgICAgICAvLyBuby1vcFxyXG4gICAgICB9XHJcbiAgICAgIGNsb3NlKCkge1xyXG4gICAgICAgIC8vIG5vLW9wXHJcbiAgICAgIH1cclxuICAgICAgYWRkRXZlbnRMaXN0ZW5lcigpIHtcclxuICAgICAgICAvLyBuby1vcFxyXG4gICAgICB9XHJcbiAgICAgIHJlbW92ZUV2ZW50TGlzdGVuZXIoKSB7XHJcbiAgICAgICAgLy8gbm8tb3BcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgZ2xvYmFsLkJyb2FkY2FzdENoYW5uZWwgPSBNb2NrQnJvYWRjYXN0Q2hhbm5lbDtcclxuICB9XHJcblxyXG4gIC8vIEhvaXN0IG1hbnVhbCBtb2NrcyBzbyBtb2R1bGVzIHNlZSB0aGVtIGJlZm9yZSBiZWluZyBpbXBvcnRlZCBpbiB0ZXN0c1xyXG4gIHRyeSB7XHJcbiAgICAvLyBNb2NrIHVuaWZpZWRBcGlTZXJ2aWNlIHNvIGNvbXBvbmVudHMgdGhhdCBpbXBvcnQgaXQgZ2V0IHRoZSBtYW51YWwgbW9ja1xyXG4gICAgLy8gTk9URTogRG8gbm90IGhvaXN0IG1vZHVsZSBtb2NrcyBmb3IgYHVuaWZpZWRBcGlTZXJ2aWNlYCBvciBgYXhpb3NgIGhlcmUuXHJcbiAgICAvLyBUZXN0cyBhbmQgTVNXIGhhbmRsZXJzIHNob3VsZCByZWdpc3RlciB0aGVzZSBtb2NrcyBleHBsaWNpdGx5IHNvIHRlc3RcclxuICAgIC8vIHNjZW5hcmlvcyAoZW1wdHktc3RhdGUsIGVycm9yLXN0YXRlLCBldGMuKSBjYW4gY29udHJvbCByZXNwb25zZXMuXHJcbiAgfSBjYXRjaCAoZXJyKSB7XHJcbiAgICAvLyBJZiBqZXN0IGlzbid0IGF2YWlsYWJsZSBpbiB0aGlzIGVudmlyb25tZW50LCBpZ25vcmVcclxuICB9XHJcblxyXG4gIC8vIE1pbmltYWwgVHJhbnNmb3JtU3RyZWFtIHBvbHlmaWxsIGZvciBlbnZpcm9ubWVudHMgdGhhdCBkb24ndCBwcm92aWRlIGl0IChub2RlanMgdGVzdCBlbnYpXHJcbiAgaWYgKHR5cGVvZiBUcmFuc2Zvcm1TdHJlYW0gPT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tZ2xvYmFsLWFzc2lnblxyXG4gICAgZ2xvYmFsLlRyYW5zZm9ybVN0cmVhbSA9IGNsYXNzIHtcclxuICAgICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgdGhpcy5yZWFkYWJsZSA9IG5ldyAoY2xhc3Mge1xyXG4gICAgICAgICAgZ2V0UmVhZGVyKCkge1xyXG4gICAgICAgICAgICByZXR1cm4geyByZWFkOiAoKSA9PiBQcm9taXNlLnJlc29sdmUoeyBkb25lOiB0cnVlLCB2YWx1ZTogdW5kZWZpbmVkIH0pIH07XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSkoKTtcclxuICAgICAgICB0aGlzLndyaXRhYmxlID0gbmV3IChjbGFzcyB7XHJcbiAgICAgICAgICBnZXRXcml0ZXIoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB7IHdyaXRlOiAoKSA9PiBQcm9taXNlLnJlc29sdmUoKSwgY2xvc2U6ICgpID0+IFByb21pc2UucmVzb2x2ZSgpIH07XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSkoKTtcclxuICAgICAgfVxyXG4gICAgfTtcclxuICB9XHJcbn1cclxuIl0sIm1hcHBpbmdzIjoiOztBQUFBO0FBQ0E7QUFDQTtBQUNBLElBQUksT0FBT0EsTUFBTSxDQUFDQyxVQUFVLEtBQUssV0FBVyxFQUFFO0VBQzVDRCxNQUFNLENBQUNDLFVBQVUsR0FBRztJQUFFQyxHQUFHLEVBQUUsQ0FBQztFQUFFLENBQUM7QUFDakM7QUFDQSxJQUFJLE9BQU9GLE1BQU0sQ0FBQ0csTUFBTSxLQUFLLFdBQVcsRUFBRTtFQUN4Q0gsTUFBTSxDQUFDRyxNQUFNLEdBQUdILE1BQU0sQ0FBQ0csTUFBTSxJQUFJLFlBQVksQ0FBQyxDQUFDO0FBQ2pEO0FBQ0E7QUFDQSxJQUFJLE9BQU9ILE1BQU0sQ0FBQ0csTUFBTSxLQUFLLFdBQVcsSUFBSSxPQUFPSCxNQUFNLENBQUNHLE1BQU0sQ0FBQ0MsSUFBSSxLQUFL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