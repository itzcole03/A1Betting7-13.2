40f97ecdab8cfac51d057b65eae25e15
"use strict";

// Mock dependencies
_getJestObj().mock('../UnifiedServiceRegistry');
_getJestObj().mock('../UnifiedCache');
var _UnifiedDataService = require("../UnifiedDataService");
var _UnifiedServiceRegistry = require("../UnifiedServiceRegistry");
var _UnifiedCache = require("../UnifiedCache");
function _getJestObj() {
  const {
    jest
  } = require("@jest/globals");
  _getJestObj = () => jest;
  return jest;
}
/**
 * UnifiedDataService Validation Tests
 * Tests the fixes applied to UnifiedDataService constructor and variable naming issues
 * Implements monitoring for data pipeline stability as recommended in Addendum 4
 */
describe('UnifiedDataService', () => {
  let dataService;
  let mockCache;
  let mockRegistry;
  beforeEach(() => {
    // Reset all mocks
    jest.clearAllMocks();

    // Mock cache instance
    mockCache = {
      get: jest.fn(),
      set: jest.fn(),
      delete: jest.fn(),
      clear: jest.fn(),
      getKeys: jest.fn()
    };

    // Mock registry instance
    mockRegistry = {
      register: jest.fn(),
      get: jest.fn(),
      healthCheck: jest.fn()
    };

    // Mock static methods
    _UnifiedCache.UnifiedCache.getInstance.mockReturnValue(mockCache);
    _UnifiedServiceRegistry.UnifiedServiceRegistry.getInstance.mockReturnValue(mockRegistry);

    // Get service instance
    dataService = _UnifiedDataService.UnifiedDataService.getInstance();
  });
  describe('Constructor Fix Validation', () => {
    test('should properly instantiate with correct parameters', () => {
      expect(_UnifiedServiceRegistry.UnifiedServiceRegistry.getInstance).toHaveBeenCalled();
      expect(_UnifiedCache.UnifiedCache.getInstance).toHaveBeenCalled();
      expect(dataService).toBeInstanceOf(_UnifiedDataService.UnifiedDataService);
    });
    test('should be a singleton', () => {
      const instance1 = _UnifiedDataService.UnifiedDataService.getInstance();
      const instance2 = _UnifiedDataService.UnifiedDataService.getInstance();
      expect(instance1).toBe(instance2);
    });
  });
  describe('Data Fetching Methods', () => {
    beforeEach(() => {
      // Mock the HTTP client methods
      dataService['api'] = {
        get: jest.fn().mockResolvedValue({
          data: {
            success: true
          }
        }),
        post: jest.fn().mockResolvedValue({
          data: {
            results: []
          }
        })
      };
      dataService['logger'] = {
        error: jest.fn(),
        info: jest.fn()
      };
    });
    describe('fetchSportsData', () => {
      test('should use cache when data is available', async () => {
        const cachedData = {
          teams: ['Team A', 'Team B']
        };
        mockCache.get.mockReturnValue(cachedData);
        const result = await dataService.fetchSportsData('mlb', '2024-01-01');
        expect(mockCache.get).toHaveBeenCalledWith('sports_data_mlb_2024-01-01');
        expect(result).toBe(cachedData);
        expect(dataService['api'].get).not.toHaveBeenCalled();
      });
      test('should fetch and cache data when not in cache', async () => {
        mockCache.get.mockReturnValue(null);
        const apiData = {
          teams: ['Team A', 'Team B']
        };
        dataService['api'].get.mockResolvedValue({
          data: apiData
        });
        const result = await dataService.fetchSportsData('mlb');
        expect(mockCache.get).toHaveBeenCalledWith('sports_data_mlb_today');
        expect(dataService['api'].get).toHaveBeenCalledWith('/api/sports/mlb');
        expect(mockCache.set).toHaveBeenCalledWith('sports_data_mlb_today', apiData, 300000);
        expect(result).toBe(apiData);
      });
      test('should handle errors properly', async () => {
        mockCache.get.mockReturnValue(null);
        const error = new Error('API Error');
        dataService['api'].get.mockRejectedValue(error);
        await expect(dataService.fetchSportsData('mlb')).rejects.toThrow('API Error');
        expect(dataService['logger'].error).toHaveBeenCalledWith('Failed to fetch sports data', error);
      });
    });
    describe('fetchPlayerStats', () => {
      test('should properly construct cache keys and handle responses', async () => {
        mockCache.get.mockReturnValue(null);
        const playerData = {
          stats: {
            avg: .300,
            hr: 25
          }
        };
        dataService['api'].get.mockResolvedValue({
          data: playerData
        });
        const result = await dataService.fetchPlayerStats('player123', 'mlb');
        expect(mockCache.get).toHaveBeenCalledWith('player_stats_player123_mlb');
        expect(dataService['api'].get).toHaveBeenCalledWith('/api/players/player123/stats?sport=mlb');
        expect(mockCache.set).toHaveBeenCalledWith('player_stats_player123_mlb', playerData, 600000);
        expect(result).toBe(playerData);
      });
    });
    describe('fetchTeamData', () => {
      test('should use correct variable names (fix validation)', async () => {
        mockCache.get.mockReturnValue(null);
        const teamData = {
          name: 'Test Team',
          record: '10-5'
        };
        dataService['api'].get.mockResolvedValue({
          data: teamData
        });
        const result = await dataService.fetchTeamData('team456', 'nfl');
        expect(mockCache.get).toHaveBeenCalledWith('team_data_team456_nfl');
        expect(dataService['api'].get).toHaveBeenCalledWith('/api/teams/team456?sport=nfl');
        expect(mockCache.set).toHaveBeenCalledWith('team_data_team456_nfl', teamData, 600000);
        expect(result).toBe(teamData);
      });
    });
    describe('fetchLiveData', () => {
      test('should not use cache for live data', async () => {
        const liveData = {
          score: '10-7',
          quarter: 3
        };
        dataService['api'].get.mockResolvedValue({
          data: liveData
        });
        const result = await dataService.fetchLiveData('nfl');
        expect(mockCache.get).not.toHaveBeenCalled();
        expect(mockCache.set).not.toHaveBeenCalled();
        expect(dataService['api'].get).toHaveBeenCalledWith('/api/live/nfl');
        expect(result).toBe(liveData);
      });
    });
    describe('searchData', () => {
      test('should handle complex filters and variable naming correctly', async () => {
        mockCache.get.mockReturnValue(null);
        const searchResults = {
          results: [{
            id: 1,
            name: 'Result 1'
          }]
        };
        dataService['api'].post.mockResolvedValue({
          data: searchResults
        });
        const filters = {
          sport: 'mlb',
          position: 'QB'
        };
        const result = await dataService.searchData('test query', filters);
        const expectedCacheKey = `search_test query_${JSON.stringify(filters)}`;
        expect(mockCache.get).toHaveBeenCalledWith(expectedCacheKey);
        expect(dataService['api'].post).toHaveBeenCalledWith('/api/search', {
          query: 'test query',
          filters
        });
        expect(mockCache.set).toHaveBeenCalledWith(expectedCacheKey, searchResults, 180000);
        expect(result).toBe(searchResults);
      });
    });
  });
  describe('Cache Management', () => {
    test('should clear all cache when no pattern provided', () => {
      dataService.clearCache();
      expect(mockCache.clear).toHaveBeenCalled();
    });
    test('should clear specific cache entries by pattern', () => {
      const keys = ['sports_data_mlb_today', 'sports_data_nfl_today', 'player_stats_123_mlb'];
      mockCache.getKeys.mockReturnValue(keys);
      dataService.clearCache('sports_data');
      expect(mockCache.getKeys).toHaveBeenCalled();
      expect(mockCache.delete).toHaveBeenCalledWith('sports_data_mlb_today');
      expect(mockCache.delete).toHaveBeenCalledWith('sports_data_nfl_today');
      expect(mockCache.delete).not.toHaveBeenCalledWith('player_stats_123_mlb');
    });
  });
  describe('Data Pipeline Stability Monitoring', () => {
    test('should handle network timeouts gracefully', async () => {
      mockCache.get.mockReturnValue(null);
      const timeoutError = new Error('TIMEOUT');
      timeoutError.name = 'TimeoutError';
      dataService['api'].get.mockRejectedValue(timeoutError);
      await expect(dataService.fetchSportsData('mlb')).rejects.toThrow('TIMEOUT');
      expect(dataService['logger'].error).toHaveBeenCalledWith('Failed to fetch sports data', timeoutError);
    });
    test('should handle API rate limits appropriately', async () => {
      mockCache.get.mockReturnValue(null);
      const rateLimitError = new Error('Rate limit exceeded');
      rateLimitError.name = 'RateLimitError';
      dataService['api'].get.mockRejectedValue(rateLimitError);
      await expect(dataService.fetchPlayerStats('player123', 'mlb')).rejects.toThrow('Rate limit exceeded');
      expect(dataService['logger'].error).toHaveBeenCalledWith('Failed to fetch player stats', rateLimitError);
    });
    test('should validate data integrity after fetching', async () => {
      mockCache.get.mockReturnValue(null);

      // Test with valid data
      const validData = {
        teams: ['Team A'],
        lastUpdated: new Date().toISOString()
      };
      dataService['api'].get.mockResolvedValue({
        data: validData
      });
      const result = await dataService.fetchSportsData('mlb');
      expect(result).toBe(validData);
      expect(mockCache.set).toHaveBeenCalled();
    });
  });
  describe('Performance and Reliability', () => {
    test('should complete operations within reasonable time limits', async () => {
      mockCache.get.mockReturnValue(null);
      dataService['api'].get.mockImplementation(() => new Promise(resolve => setTimeout(() => resolve({
        data: {}
      }), 100)));
      const startTime = Date.now();
      await dataService.fetchSportsData('mlb');
      const duration = Date.now() - startTime;
      expect(duration).toBeLessThan(500); // Should complete within 500ms for test
    });
    test('should handle concurrent requests properly', async () => {
      mockCache.get.mockReturnValue(null);
      dataService['api'].get.mockResolvedValue({
        data: {
          success: true
        }
      });
      const promises = [dataService.fetchSportsData('mlb'), dataService.fetchSportsData('nfl'), dataService.fetchPlayerStats('player1', 'mlb'), dataService.fetchTeamData('team1', 'nfl')];
      const results = await Promise.all(promises);
      expect(results).toHaveLength(4);
      results.forEach(result => expect(result).toEqual({
        success: true
      }));
    });
  });
});

/**
 * Integration test suite for real-world scenarios
 */
describe('UnifiedDataService Integration', () => {
  let dataService;
  beforeAll(() => {
    dataService = _UnifiedDataService.UnifiedDataService.getInstance();
  });
  test('should maintain singleton pattern across multiple imports', () => {
    const service1 = _UnifiedDataService.UnifiedDataService.getInstance();
    const service2 = _UnifiedDataService.UnifiedDataService.getInstance();
    expect(service1).toBe(service2);
    expect(service1).toBe(dataService);
  });
  test('should properly handle service lifecycle', () => {
    expect(() => {
      dataService.clearCache();
      dataService.clearCache('pattern');
    }).not.toThrow();
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfZ2V0SmVzdE9iaiIsIm1vY2siLCJfVW5pZmllZERhdGFTZXJ2aWNlIiwicmVxdWlyZSIsIl9VbmlmaWVkU2VydmljZVJlZ2lzdHJ5IiwiX1VuaWZpZWRDYWNoZSIsImplc3QiLCJkZXNjcmliZSIsImRhdGFTZXJ2aWNlIiwibW9ja0NhY2hlIiwibW9ja1JlZ2lzdHJ5IiwiYmVmb3JlRWFjaCIsImNsZWFyQWxsTW9ja3MiLCJnZXQiLCJmbiIsInNldCIsImRlbGV0ZSIsImNsZWFyIiwiZ2V0S2V5cyIsInJlZ2lzdGVyIiwiaGVhbHRoQ2hlY2siLCJVbmlmaWVkQ2FjaGUiLCJnZXRJbnN0YW5jZSIsIm1vY2tSZXR1cm5WYWx1ZSIsIlVuaWZpZWRTZXJ2aWNlUmVnaXN0cnkiLCJVbmlmaWVkRGF0YVNlcnZpY2UiLCJ0ZXN0IiwiZXhwZWN0IiwidG9IYXZlQmVlbkNhbGxlZCIsInRvQmVJbnN0YW5jZU9mIiwiaW5zdGFuY2UxIiwiaW5zdGFuY2UyIiwidG9CZSIsIm1vY2tSZXNvbHZlZFZhbHVlIiwiZGF0YSIsInN1Y2Nlc3MiLCJwb3N0IiwicmVzdWx0cyIsImVycm9yIiwiaW5mbyIsImNhY2hlZERhdGEiLCJ0ZWFtcyIsInJlc3VsdCIsImZldGNoU3BvcnRzRGF0YSIsInRvSGF2ZUJlZW5DYWxsZWRXaXRoIiwibm90IiwiYXBpRGF0YSIsIkVycm9yIiwibW9ja1JlamVjdGVkVmFsdWUiLCJyZWplY3RzIiwidG9UaHJvdyIsInBsYXllckRhdGEiLCJzdGF0cyIsImF2ZyIsImhyIiwiZmV0Y2hQbGF5ZXJTdGF0cyIsInRlYW1EYXRhIiwibmFtZSIsInJlY29yZCIsImZldGNoVGVhbURhdGEiLCJsaXZlRGF0YSIsInNjb3JlIiwicXVhcnRlciIsImZldGNoTGl2ZURhdGEiLCJzZWFyY2hSZXN1bHRzIiwiaWQiLCJmaWx0ZXJzIiwic3BvcnQiLCJwb3NpdGlvbiIsInNlYXJjaERhdGEiLCJleHBlY3RlZENhY2hlS2V5IiwiSlNPTiIsInN0cmluZ2lmeSIsInF1ZXJ5IiwiY2xlYXJDYWNoZSIsImtleXMiLCJ0aW1lb3V0RXJyb3IiLCJyYXRlTGltaXRFcnJvciIsInZhbGlkRGF0YSIsImxhc3RVcGRhdGVkIiwiRGF0ZSIsInRvSVNPU3RyaW5nIiwibW9ja0ltcGxlbWVudGF0aW9uIiwiUHJvbWlzZSIsInJlc29sdmUiLCJzZXRUaW1lb3V0Iiwic3RhcnRUaW1lIiwibm93IiwiZHVyYXRpb24iLCJ0b0JlTGVzc1RoYW4iLCJwcm9taXNlcyIsImFsbCIsInRvSGF2ZUxlbmd0aCIsImZvckVhY2giLCJ0b0VxdWFsIiwiYmVmb3JlQWxsIiwic2VydmljZTEiLCJzZXJ2aWNlMiJdLCJzb3VyY2VzIjpbIlVuaWZpZWREYXRhU2VydmljZS50ZXN0LnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxyXG4gKiBVbmlmaWVkRGF0YVNlcnZpY2UgVmFsaWRhdGlvbiBUZXN0c1xyXG4gKiBUZXN0cyB0aGUgZml4ZXMgYXBwbGllZCB0byBVbmlmaWVkRGF0YVNlcnZpY2UgY29uc3RydWN0b3IgYW5kIHZhcmlhYmxlIG5hbWluZyBpc3N1ZXNcclxuICogSW1wbGVtZW50cyBtb25pdG9yaW5nIGZvciBkYXRhIHBpcGVsaW5lIHN0YWJpbGl0eSBhcyByZWNvbW1lbmRlZCBpbiBBZGRlbmR1bSA0XHJcbiAqL1xyXG5cclxuaW1wb3J0IHsgVW5pZmllZERhdGFTZXJ2aWNlIH0gZnJvbSAnLi4vVW5pZmllZERhdGFTZXJ2aWNlJztcclxuaW1wb3J0IHsgVW5pZmllZFNlcnZpY2VSZWdpc3RyeSB9IGZyb20gJy4uL1VuaWZpZWRTZXJ2aWNlUmVnaXN0cnknO1xyXG5pbXBvcnQgeyBVbmlmaWVkQ2FjaGUgfSBmcm9tICcuLi9VbmlmaWVkQ2FjaGUnO1xyXG5cclxuLy8gTW9jayBkZXBlbmRlbmNpZXNcclxuamVzdC5tb2NrKCcuLi9VbmlmaWVkU2VydmljZVJlZ2lzdHJ5Jyk7XHJcbmplc3QubW9jaygnLi4vVW5pZmllZENhY2hlJyk7XHJcblxyXG5kZXNjcmliZSgnVW5pZmllZERhdGFTZXJ2aWNlJywgKCkgPT4ge1xyXG4gIGxldCBkYXRhU2VydmljZTogVW5pZmllZERhdGFTZXJ2aWNlO1xyXG4gIGxldCBtb2NrQ2FjaGU6IGplc3QuTW9ja2VkPFVuaWZpZWRDYWNoZT47XHJcbiAgbGV0IG1vY2tSZWdpc3RyeTogamVzdC5Nb2NrZWQ8VW5pZmllZFNlcnZpY2VSZWdpc3RyeT47XHJcblxyXG4gIGJlZm9yZUVhY2goKCkgPT4ge1xyXG4gICAgLy8gUmVzZXQgYWxsIG1vY2tzXHJcbiAgICBqZXN0LmNsZWFyQWxsTW9ja3MoKTtcclxuICAgIFxyXG4gICAgLy8gTW9jayBjYWNoZSBpbnN0YW5jZVxyXG4gICAgbW9ja0NhY2hlID0ge1xyXG4gICAgICBnZXQ6IGplc3QuZm4oKSxcclxuICAgICAgc2V0OiBqZXN0LmZuKCksXHJcbiAgICAgIGRlbGV0ZTogamVzdC5mbigpLFxyXG4gICAgICBjbGVhcjogamVzdC5mbigpLFxyXG4gICAgICBnZXRLZXlzOiBqZXN0LmZuKCksXHJcbiAgICB9IGFzIGFueTtcclxuXHJcbiAgICAvLyBNb2NrIHJlZ2lzdHJ5IGluc3RhbmNlXHJcbiAgICBtb2NrUmVnaXN0cnkgPSB7XHJcbiAgICAgIHJlZ2lzdGVyOiBqZXN0LmZuKCksXHJcbiAgICAgIGdldDogamVzdC5mbigpLFxyXG4gICAgICBoZWFsdGhDaGVjazogamVzdC5mbigpLFxyXG4gICAgfSBhcyBhbnk7XHJcblxyXG4gICAgLy8gTW9jayBzdGF0aWMgbWV0aG9kc1xyXG4gICAgKFVuaWZpZWRDYWNoZS5nZXRJbnN0YW5jZSBhcyBqZXN0Lk1vY2spLm1vY2tSZXR1cm5WYWx1ZShtb2NrQ2FjaGUpO1xyXG4gICAgKFVuaWZpZWRTZXJ2aWNlUmVnaXN0cnkuZ2V0SW5zdGFuY2UgYXMgamVzdC5Nb2NrKS5tb2NrUmV0dXJuVmFsdWUobW9ja1JlZ2lzdHJ5KTtcclxuXHJcbiAgICAvLyBHZXQgc2VydmljZSBpbnN0YW5jZVxyXG4gICAgZGF0YVNlcnZpY2UgPSBVbmlmaWVkRGF0YVNlcnZpY2UuZ2V0SW5zdGFuY2UoKTtcclxuICB9KTtcclxuXHJcbiAgZGVzY3JpYmUoJ0NvbnN0cnVjdG9yIEZpeCBWYWxpZGF0aW9uJywgKCkgPT4ge1xyXG4gICAgdGVzdCgnc2hvdWxkIHByb3Blcmx5IGluc3RhbnRpYXRlIHdpdGggY29ycmVjdCBwYXJhbWV0ZXJzJywgKCkgPT4ge1xyXG4gICAgICBleHBlY3QoVW5pZmllZFNlcnZpY2VSZWdpc3RyeS5nZXRJbnN0YW5jZSkudG9IYXZlQmVlbkNhbGxlZCgpO1xyXG4gICAgICBleHBlY3QoVW5pZmllZENhY2hlLmdldEluc3RhbmNlKS50b0hhdmVCZWVuQ2FsbGVkKCk7XHJcbiAgICAgIGV4cGVjdChkYXRhU2VydmljZSkudG9CZUluc3RhbmNlT2YoVW5pZmllZERhdGFTZXJ2aWNlKTtcclxuICAgIH0pO1xyXG5cclxuICAgIHRlc3QoJ3Nob3VsZCBiZSBhIHNpbmdsZXRvbicsICgpID0+IHtcclxuICAgICAgY29uc3QgaW5zdGFuY2UxID0gVW5pZmllZERhdGFTZXJ2aWNlLmdldEluc3RhbmNlKCk7XHJcbiAgICAgIGNvbnN0IGluc3RhbmNlMiA9IFVuaWZpZWREYXRhU2VydmljZS5nZXRJbnN0YW5jZSgpO1xyXG4gICAgICBleHBlY3QoaW5zdGFuY2UxKS50b0JlKGluc3RhbmNlMik7XHJcbiAgICB9KTtcclxuICB9KTtcclxuXHJcbiAgZGVzY3JpYmUoJ0RhdGEgRmV0Y2hpbmcgTWV0aG9kcycsICgpID0+IHtcclxuICAgIGJlZm9yZUVhY2goKCkgPT4ge1xyXG4gICAgICAvLyBNb2NrIHRoZSBIVFRQIGNsaWVudCBtZXRob2RzXHJcbiAgICAgIGRhdGFTZXJ2aWNlWydhcGknXSA9IHtcclxuICAgICAgICBnZXQ6IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZSh7IGRhdGE6IHsgc3VjY2VzczogdHJ1ZSB9IH0pLFxyXG4gICAgICAgIHBvc3Q6IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZSh7IGRhdGE6IHsgcmVzdWx0czogW10gfSB9KSxcclxuICAgICAgfSBhcyBhbnk7XHJcblxyXG4gICAgICBkYXRhU2VydmljZVsnbG9nZ2VyJ10gPSB7XHJcbiAgICAgICAgZXJyb3I6IGplc3QuZm4oKSxcclxuICAgICAgICBpbmZvOiBqZXN0LmZuKCksXHJcbiAgICAgIH0gYXMgYW55O1xyXG4gICAgfSk7XHJcblxyXG4gICAgZGVzY3JpYmUoJ2ZldGNoU3BvcnRzRGF0YScsICgpID0+IHtcclxuICAgICAgdGVzdCgnc2hvdWxkIHVzZSBjYWNoZSB3aGVuIGRhdGEgaXMgYXZhaWxhYmxlJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgIGNvbnN0IGNhY2hlZERhdGEgPSB7IHRlYW1zOiBbJ1RlYW0gQScsICdUZWFtIEInXSB9O1xyXG4gICAgICAgIG1vY2tDYWNoZS5nZXQubW9ja1JldHVyblZhbHVlKGNhY2hlZERhdGEpO1xyXG5cclxuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBkYXRhU2VydmljZS5mZXRjaFNwb3J0c0RhdGEoJ21sYicsICcyMDI0LTAxLTAxJyk7XHJcblxyXG4gICAgICAgIGV4cGVjdChtb2NrQ2FjaGUuZ2V0KS50b0hhdmVCZWVuQ2FsbGVkV2l0aCgnc3BvcnRzX2RhdGFfbWxiXzIwMjQtMDEtMDEnKTtcclxuICAgICAgICBleHBlY3QocmVzdWx0KS50b0JlKGNhY2hlZERhdGEpO1xyXG4gICAgICAgIGV4cGVjdChkYXRhU2VydmljZVsnYXBpJ10uZ2V0KS5ub3QudG9IYXZlQmVlbkNhbGxlZCgpO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIHRlc3QoJ3Nob3VsZCBmZXRjaCBhbmQgY2FjaGUgZGF0YSB3aGVuIG5vdCBpbiBjYWNoZScsIGFzeW5jICgpID0+IHtcclxuICAgICAgICBtb2NrQ2FjaGUuZ2V0Lm1vY2tSZXR1cm5WYWx1ZShudWxsKTtcclxuICAgICAgICBjb25zdCBhcGlEYXRhID0geyB0ZWFtczogWydUZWFtIEEnLCAnVGVhbSBCJ10gfTtcclxuICAgICAgICAoZGF0YVNlcnZpY2VbJ2FwaSddLmdldCBhcyBqZXN0Lk1vY2spLm1vY2tSZXNvbHZlZFZhbHVlKHsgZGF0YTogYXBpRGF0YSB9KTtcclxuXHJcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZGF0YVNlcnZpY2UuZmV0Y2hTcG9ydHNEYXRhKCdtbGInKTtcclxuXHJcbiAgICAgICAgZXhwZWN0KG1vY2tDYWNoZS5nZXQpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKCdzcG9ydHNfZGF0YV9tbGJfdG9kYXknKTtcclxuICAgICAgICBleHBlY3QoZGF0YVNlcnZpY2VbJ2FwaSddLmdldCkudG9IYXZlQmVlbkNhbGxlZFdpdGgoJy9hcGkvc3BvcnRzL21sYicpO1xyXG4gICAgICAgIGV4cGVjdChtb2NrQ2FjaGUuc2V0KS50b0hhdmVCZWVuQ2FsbGVkV2l0aCgnc3BvcnRzX2RhdGFfbWxiX3RvZGF5JywgYXBpRGF0YSwgMzAwMDAwKTtcclxuICAgICAgICBleHBlY3QocmVzdWx0KS50b0JlKGFwaURhdGEpO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIHRlc3QoJ3Nob3VsZCBoYW5kbGUgZXJyb3JzIHByb3Blcmx5JywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgIG1vY2tDYWNoZS5nZXQubW9ja1JldHVyblZhbHVlKG51bGwpO1xyXG4gICAgICAgIGNvbnN0IGVycm9yID0gbmV3IEVycm9yKCdBUEkgRXJyb3InKTtcclxuICAgICAgICAoZGF0YVNlcnZpY2VbJ2FwaSddLmdldCBhcyBqZXN0Lk1vY2spLm1vY2tSZWplY3RlZFZhbHVlKGVycm9yKTtcclxuXHJcbiAgICAgICAgYXdhaXQgZXhwZWN0KGRhdGFTZXJ2aWNlLmZldGNoU3BvcnRzRGF0YSgnbWxiJykpLnJlamVjdHMudG9UaHJvdygnQVBJIEVycm9yJyk7XHJcbiAgICAgICAgZXhwZWN0KGRhdGFTZXJ2aWNlWydsb2dnZXInXS5lcnJvcikudG9IYXZlQmVlbkNhbGxlZFdpdGgoJ0ZhaWxlZCB0byBmZXRjaCBzcG9ydHMgZGF0YScsIGVycm9yKTtcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBkZXNjcmliZSgnZmV0Y2hQbGF5ZXJTdGF0cycsICgpID0+IHtcclxuICAgICAgdGVzdCgnc2hvdWxkIHByb3Blcmx5IGNvbnN0cnVjdCBjYWNoZSBrZXlzIGFuZCBoYW5kbGUgcmVzcG9uc2VzJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgIG1vY2tDYWNoZS5nZXQubW9ja1JldHVyblZhbHVlKG51bGwpO1xyXG4gICAgICAgIGNvbnN0IHBsYXllckRhdGEgPSB7IHN0YXRzOiB7IGF2ZzogLjMwMCwgaHI6IDI1IH0gfTtcclxuICAgICAgICAoZGF0YVNlcnZpY2VbJ2FwaSddLmdldCBhcyBqZXN0Lk1vY2spLm1vY2tSZXNvbHZlZFZhbHVlKHsgZGF0YTogcGxheWVyRGF0YSB9KTtcclxuXHJcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZGF0YVNlcnZpY2UuZmV0Y2hQbGF5ZXJTdGF0cygncGxheWVyMTIzJywgJ21sYicpO1xyXG5cclxuICAgICAgICBleHBlY3QobW9ja0NhY2hlLmdldCkudG9IYXZlQmVlbkNhbGxlZFdpdGgoJ3BsYXllcl9zdGF0c19wbGF5ZXIxMjNfbWxiJyk7XHJcbiAgICAgICAgZXhwZWN0KGRhdGFTZXJ2aWNlWydhcGknXS5nZXQpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKCcvYXBpL3BsYXllcnMvcGxheWVyMTIzL3N0YXRzP3Nwb3J0PW1sYicpO1xyXG4gICAgICAgIGV4cGVjdChtb2NrQ2FjaGUuc2V0KS50b0hhdmVCZWVuQ2FsbGVkV2l0aCgncGxheWVyX3N0YXRzX3BsYXllcjEyM19tbGInLCBwbGF5ZXJEYXRhLCA2MDAwMDApO1xyXG4gICAgICAgIGV4cGVjdChyZXN1bHQpLnRvQmUocGxheWVyRGF0YSk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgZGVzY3JpYmUoJ2ZldGNoVGVhbURhdGEnLCAoKSA9PiB7XHJcbiAgICAgIHRlc3QoJ3Nob3VsZCB1c2UgY29ycmVjdCB2YXJpYWJsZSBuYW1lcyAoZml4IHZhbGlkYXRpb24pJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgIG1vY2tDYWNoZS5nZXQubW9ja1JldHVyblZhbHVlKG51bGwpO1xyXG4gICAgICAgIGNvbnN0IHRlYW1EYXRhID0geyBuYW1lOiAnVGVzdCBUZWFtJywgcmVjb3JkOiAnMTAtNScgfTtcclxuICAgICAgICAoZGF0YVNlcnZpY2VbJ2FwaSddLmdldCBhcyBqZXN0Lk1vY2spLm1vY2tSZXNvbHZlZFZhbHVlKHsgZGF0YTogdGVhbURhdGEgfSk7XHJcblxyXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGRhdGFTZXJ2aWNlLmZldGNoVGVhbURhdGEoJ3RlYW00NTYnLCAnbmZsJyk7XHJcblxyXG4gICAgICAgIGV4cGVjdChtb2NrQ2FjaGUuZ2V0KS50b0hhdmVCZWVuQ2FsbGVkV2l0aCgndGVhbV9kYXRhX3RlYW00NTZfbmZsJyk7XHJcbiAgICAgICAgZXhwZWN0KGRhdGFTZXJ2aWNlWydhcGknXS5nZXQpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKCcvYXBpL3RlYW1zL3RlYW00NTY/c3BvcnQ9bmZsJyk7XHJcbiAgICAgICAgZXhwZWN0KG1vY2tDYWNoZS5zZXQpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKCd0ZWFtX2RhdGFfdGVhbTQ1Nl9uZmwnLCB0ZWFtRGF0YSwgNjAwMDAwKTtcclxuICAgICAgICBleHBlY3QocmVzdWx0KS50b0JlKHRlYW1EYXRhKTtcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBkZXNjcmliZSgnZmV0Y2hMaXZlRGF0YScsICgpID0+IHtcclxuICAgICAgdGVzdCgnc2hvdWxkIG5vdCB1c2UgY2FjaGUgZm9yIGxpdmUgZGF0YScsIGFzeW5jICgpID0+IHtcclxuICAgICAgICBjb25zdCBsaXZlRGF0YSA9IHsgc2NvcmU6ICcxMC03JywgcXVhcnRlcjogMyB9O1xyXG4gICAgICAgIChkYXRhU2VydmljZVsnYXBpJ10uZ2V0IGFzIGplc3QuTW9jaykubW9ja1Jlc29sdmVkVmFsdWUoeyBkYXRhOiBsaXZlRGF0YSB9KTtcclxuXHJcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZGF0YVNlcnZpY2UuZmV0Y2hMaXZlRGF0YSgnbmZsJyk7XHJcblxyXG4gICAgICAgIGV4cGVjdChtb2NrQ2FjaGUuZ2V0KS5ub3QudG9IYXZlQmVlbkNhbGxlZCgpO1xyXG4gICAgICAgIGV4cGVjdChtb2NrQ2FjaGUuc2V0KS5ub3QudG9IYXZlQmVlbkNhbGxlZCgpO1xyXG4gICAgICAgIGV4cGVjdChkYXRhU2VydmljZVsnYXBpJ10uZ2V0KS50b0hhdmVCZWVuQ2FsbGVkV2l0aCgnL2FwaS9saXZlL25mbCcpO1xyXG4gICAgICAgIGV4cGVjdChyZXN1bHQpLnRvQmUobGl2ZURhdGEpO1xyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG5cclxuICAgIGRlc2NyaWJlKCdzZWFyY2hEYXRhJywgKCkgPT4ge1xyXG4gICAgICB0ZXN0KCdzaG91bGQgaGFuZGxlIGNvbXBsZXggZmlsdGVycyBhbmQgdmFyaWFibGUgbmFtaW5nIGNvcnJlY3RseScsIGFzeW5jICgpID0+IHtcclxuICAgICAgICBtb2NrQ2FjaGUuZ2V0Lm1vY2tSZXR1cm5WYWx1ZShudWxsKTtcclxuICAgICAgICBjb25zdCBzZWFyY2hSZXN1bHRzID0geyByZXN1bHRzOiBbeyBpZDogMSwgbmFtZTogJ1Jlc3VsdCAxJyB9XSB9O1xyXG4gICAgICAgIChkYXRhU2VydmljZVsnYXBpJ10ucG9zdCBhcyBqZXN0Lk1vY2spLm1vY2tSZXNvbHZlZFZhbHVlKHsgZGF0YTogc2VhcmNoUmVzdWx0cyB9KTtcclxuXHJcbiAgICAgICAgY29uc3QgZmlsdGVycyA9IHsgc3BvcnQ6ICdtbGInLCBwb3NpdGlvbjogJ1FCJyB9O1xyXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGRhdGFTZXJ2aWNlLnNlYXJjaERhdGEoJ3Rlc3QgcXVlcnknLCBmaWx0ZXJzKTtcclxuXHJcbiAgICAgICAgY29uc3QgZXhwZWN0ZWRDYWNoZUtleSA9IGBzZWFyY2hfdGVzdCBxdWVyeV8ke0pTT04uc3RyaW5naWZ5KGZpbHRlcnMpfWA7XHJcbiAgICAgICAgZXhwZWN0KG1vY2tDYWNoZS5nZXQpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKGV4cGVjdGVkQ2FjaGVLZXkpO1xyXG4gICAgICAgIGV4cGVjdChkYXRhU2VydmljZVsnYXBpJ10ucG9zdCkudG9IYXZlQmVlbkNhbGxlZFdpdGgoJy9hcGkvc2VhcmNoJywgeyBcclxuICAgICAgICAgIHF1ZXJ5OiAndGVzdCBxdWVyeScsIFxyXG4gICAgICAgICAgZmlsdGVycyBcclxuICAgICAgICB9KTtcclxuICAgICAgICBleHBlY3QobW9ja0NhY2hlLnNldCkudG9IYXZlQmVlbkNhbGxlZFdpdGgoZXhwZWN0ZWRDYWNoZUtleSwgc2VhcmNoUmVzdWx0cywgMTgwMDAwKTtcclxuICAgICAgICBleHBlY3QocmVzdWx0KS50b0JlKHNlYXJjaFJlc3VsdHMpO1xyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG5cclxuICBkZXNjcmliZSgnQ2FjaGUgTWFuYWdlbWVudCcsICgpID0+IHtcclxuICAgIHRlc3QoJ3Nob3VsZCBjbGVhciBhbGwgY2FjaGUgd2hlbiBubyBwYXR0ZXJuIHByb3ZpZGVkJywgKCkgPT4ge1xyXG4gICAgICBkYXRhU2VydmljZS5jbGVhckNhY2hlKCk7XHJcbiAgICAgIGV4cGVjdChtb2NrQ2FjaGUuY2xlYXIpLnRvSGF2ZUJlZW5DYWxsZWQoKTtcclxuICAgIH0pO1xyXG5cclxuICAgIHRlc3QoJ3Nob3VsZCBjbGVhciBzcGVjaWZpYyBjYWNoZSBlbnRyaWVzIGJ5IHBhdHRlcm4nLCAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IGtleXMgPSBbJ3Nwb3J0c19kYXRhX21sYl90b2RheScsICdzcG9ydHNfZGF0YV9uZmxfdG9kYXknLCAncGxheWVyX3N0YXRzXzEyM19tbGInXTtcclxuICAgICAgbW9ja0NhY2hlLmdldEtleXMubW9ja1JldHVyblZhbHVlKGtleXMpO1xyXG5cclxuICAgICAgZGF0YVNlcnZpY2UuY2xlYXJDYWNoZSgnc3BvcnRzX2RhdGEnKTtcclxuXHJcbiAgICAgIGV4cGVjdChtb2NrQ2FjaGUuZ2V0S2V5cykudG9IYXZlQmVlbkNhbGxlZCgpO1xyXG4gICAgICBleHBlY3QobW9ja0NhY2hlLmRlbGV0ZSkudG9IYXZlQmVlbkNhbGxlZFdpdGgoJ3Nwb3J0c19kYXRhX21sYl90b2RheScpO1xyXG4gICAgICBleHBlY3QobW9ja0NhY2hlLmRlbGV0ZSkudG9IYXZlQmVlbkNhbGxlZFdpdGgoJ3Nwb3J0c19kYXRhX25mbF90b2RheScpO1xyXG4gICAgICBleHBlY3QobW9ja0NhY2hlLmRlbGV0ZSkubm90LnRvSGF2ZUJlZW5DYWxsZWRXaXRoKCdwbGF5ZXJfc3RhdHNfMTIzX21sYicpO1xyXG4gICAgfSk7XHJcbiAgfSk7XHJcblxyXG4gIGRlc2NyaWJlKCdEYXRhIFBpcGVsaW5lIFN0YWJpbGl0eSBNb25pdG9yaW5nJywgKCkgPT4ge1xyXG4gICAgdGVzdCgnc2hvdWxkIGhhbmRsZSBuZXR3b3JrIHRpbWVvdXRzIGdyYWNlZnVsbHknLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIG1vY2tDYWNoZS5nZXQubW9ja1JldHVyblZhbHVlKG51bGwpO1xyXG4gICAgICBjb25zdCB0aW1lb3V0RXJyb3IgPSBuZXcgRXJyb3IoJ1RJTUVPVVQnKTtcclxuICAgICAgdGltZW91dEVycm9yLm5hbWUgPSAnVGltZW91dEVycm9yJztcclxuICAgICAgKGRhdGFTZXJ2aWNlWydhcGknXS5nZXQgYXMgamVzdC5Nb2NrKS5tb2NrUmVqZWN0ZWRWYWx1ZSh0aW1lb3V0RXJyb3IpO1xyXG5cclxuICAgICAgYXdhaXQgZXhwZWN0KGRhdGFTZXJ2aWNlLmZldGNoU3BvcnRzRGF0YSgnbWxiJykpLnJlamVjdHMudG9UaHJvdygnVElNRU9VVCcpO1xyXG4gICAgICBleHBlY3QoZGF0YVNlcnZpY2VbJ2xvZ2dlciddLmVycm9yKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCgnRmFpbGVkIHRvIGZldGNoIHNwb3J0cyBkYXRhJywgdGltZW91dEVycm9yKTtcclxuICAgIH0pO1xyXG5cclxuICAgIHRlc3QoJ3Nob3VsZCBoYW5kbGUgQVBJIHJhdGUgbGltaXRzIGFwcHJvcHJpYXRlbHknLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIG1vY2tDYWNoZS5nZXQubW9ja1JldHVyblZhbHVlKG51bGwpO1xyXG4gICAgICBjb25zdCByYXRlTGltaXRFcnJvciA9IG5ldyBFcnJvcignUmF0ZSBsaW1pdCBleGNlZWRlZCcpO1xyXG4gICAgICByYXRlTGltaXRFcnJvci5uYW1lID0gJ1JhdGVMaW1pdEVycm9yJztcclxuICAgICAgKGRhdGFTZXJ2aWNlWydhcGknXS5nZXQgYXMgamVzdC5Nb2NrKS5tb2NrUmVqZWN0ZWRWYWx1ZShyYXRlTGltaXRFcnJvcik7XHJcblxyXG4gICAgICBhd2FpdCBleHBlY3QoZGF0YVNlcnZpY2UuZmV0Y2hQbGF5ZXJTdGF0cygncGxheWVyMTIzJywgJ21sYicpKS5yZWplY3RzLnRvVGhyb3coJ1JhdGUgbGltaXQgZXhjZWVkZWQnKTtcclxuICAgICAgZXhwZWN0KGRhdGFTZXJ2aWNlWydsb2dnZXInXS5lcnJvcikudG9IYXZlQmVlbkNhbGxlZFdpdGgoJ0ZhaWxlZCB0byBmZXRjaCBwbGF5ZXIgc3RhdHMnLCByYXRlTGltaXRFcnJvcik7XHJcbiAgICB9KTtcclxuXHJcbiAgICB0ZXN0KCdzaG91bGQgdmFsaWRhdGUgZGF0YSBpbnRlZ3JpdHkgYWZ0ZXIgZmV0Y2hpbmcnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIG1vY2tDYWNoZS5nZXQubW9ja1JldHVyblZhbHVlKG51bGwpO1xyXG4gICAgICBcclxuICAgICAgLy8gVGVzdCB3aXRoIHZhbGlkIGRhdGFcclxuICAgICAgY29uc3QgdmFsaWREYXRhID0geyB0ZWFtczogWydUZWFtIEEnXSwgbGFzdFVwZGF0ZWQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSB9O1xyXG4gICAgICAoZGF0YVNlcnZpY2VbJ2FwaSddLmdldCBhcyBqZXN0Lk1vY2spLm1vY2tSZXNvbHZlZFZhbHVlKHsgZGF0YTogdmFsaWREYXRhIH0pO1xyXG5cclxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZGF0YVNlcnZpY2UuZmV0Y2hTcG9ydHNEYXRhKCdtbGInKTtcclxuICAgICAgZXhwZWN0KHJlc3VsdCkudG9CZSh2YWxpZERhdGEpO1xyXG4gICAgICBleHBlY3QobW9ja0NhY2hlLnNldCkudG9IYXZlQmVlbkNhbGxlZCgpO1xyXG4gICAgfSk7XHJcbiAgfSk7XHJcblxyXG4gIGRlc2NyaWJlKCdQZXJmb3JtYW5jZSBhbmQgUmVsaWFiaWxpdHknLCAoKSA9PiB7XHJcbiAgICB0ZXN0KCdzaG91bGQgY29tcGxldGUgb3BlcmF0aW9ucyB3aXRoaW4gcmVhc29uYWJsZSB0aW1lIGxpbWl0cycsIGFzeW5jICgpID0+IHtcclxuICAgICAgbW9ja0NhY2hlLmdldC5tb2NrUmV0dXJuVmFsdWUobnVsbCk7XHJcbiAgICAgIChkYXRhU2VydmljZVsnYXBpJ10uZ2V0IGFzIGplc3QuTW9jaykubW9ja0ltcGxlbWVudGF0aW9uKCgpID0+IFxyXG4gICAgICAgIG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dCgoKSA9PiByZXNvbHZlKHsgZGF0YToge30gfSksIDEwMCkpXHJcbiAgICAgICk7XHJcblxyXG4gICAgICBjb25zdCBzdGFydFRpbWUgPSBEYXRlLm5vdygpO1xyXG4gICAgICBhd2FpdCBkYXRhU2VydmljZS5mZXRjaFNwb3J0c0RhdGEoJ21sYicpO1xyXG4gICAgICBjb25zdCBkdXJhdGlvbiA9IERhdGUubm93KCkgLSBzdGFydFRpbWU7XHJcblxyXG4gICAgICBleHBlY3QoZHVyYXRpb24pLnRvQmVMZXNzVGhhbig1MDApOyAvLyBTaG91bGQgY29tcGxldGUgd2l0aGluIDUwMG1zIGZvciB0ZXN0XHJcbiAgICB9KTtcclxuXHJcbiAgICB0ZXN0KCdzaG91bGQgaGFuZGxlIGNvbmN1cnJlbnQgcmVxdWVzdHMgcHJvcGVybHknLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIG1vY2tDYWNoZS5nZXQubW9ja1JldHVyblZhbHVlKG51bGwpO1xyXG4gICAgICAoZGF0YVNlcnZpY2VbJ2FwaSddLmdldCBhcyBqZXN0Lk1vY2spLm1vY2tSZXNvbHZlZFZhbHVlKHsgZGF0YTogeyBzdWNjZXNzOiB0cnVlIH0gfSk7XHJcblxyXG4gICAgICBjb25zdCBwcm9taXNlcyA9IFtcclxuICAgICAgICBkYXRhU2VydmljZS5mZXRjaFNwb3J0c0RhdGEoJ21sYicpLFxyXG4gICAgICAgIGRhdGFTZXJ2aWNlLmZldGNoU3BvcnRzRGF0YSgnbmZsJyksXHJcbiAgICAgICAgZGF0YVNlcnZpY2UuZmV0Y2hQbGF5ZXJTdGF0cygncGxheWVyMScsICdtbGInKSxcclxuICAgICAgICBkYXRhU2VydmljZS5mZXRjaFRlYW1EYXRhKCd0ZWFtMScsICduZmwnKSxcclxuICAgICAgXTtcclxuXHJcbiAgICAgIGNvbnN0IHJlc3VsdHMgPSBhd2FpdCBQcm9taXNlLmFsbChwcm9taXNlcyk7XHJcbiAgICAgIGV4cGVjdChyZXN1bHRzKS50b0hhdmVMZW5ndGgoNCk7XHJcbiAgICAgIHJlc3VsdHMuZm9yRWFjaChyZXN1bHQgPT4gZXhwZWN0KHJlc3VsdCkudG9FcXVhbCh7IHN1Y2Nlc3M6IHRydWUgfSkpO1xyXG4gICAgfSk7XHJcbiAgfSk7XHJcbn0pO1xyXG5cclxuLyoqXHJcbiAqIEludGVncmF0aW9uIHRlc3Qgc3VpdGUgZm9yIHJlYWwtd29ybGQgc2NlbmFyaW9zXHJcbiAqL1xyXG5kZXNjcmliZSgnVW5pZmllZERhdGFTZXJ2aWNlIEludGVncmF0aW9uJywgKCkgPT4ge1xyXG4gIGxldCBkYXRhU2VydmljZTogVW5pZmllZERhdGFTZXJ2aWNlO1xyXG5cclxuICBiZWZvcmVBbGwoKCkgPT4ge1xyXG4gICAgZGF0YVNlcnZpY2UgPSBVbmlmaWVkRGF0YVNlcnZpY2UuZ2V0SW5zdGFuY2UoKTtcclxuICB9KTtcclxuXHJcbiAgdGVzdCgnc2hvdWxkIG1haW50YWluIHNpbmdsZXRvbiBwYXR0ZXJuIGFjcm9zcyBtdWx0aXBsZSBpbXBvcnRzJywgKCkgPT4ge1xyXG4gICAgY29uc3Qgc2VydmljZTEgPSBVbmlmaWVkRGF0YVNlcnZpY2UuZ2V0SW5zdGFuY2UoKTtcclxuICAgIGNvbnN0IHNlcnZpY2UyID0gVW5pZmllZERhdGFTZXJ2aWNlLmdldEluc3RhbmNlKCk7XHJcbiAgICBleHBlY3Qoc2VydmljZTEpLnRvQmUoc2VydmljZTIpO1xyXG4gICAgZXhwZWN0KHNlcnZpY2UxKS50b0JlKGRhdGFTZXJ2aWNlKTtcclxuICB9KTtcclxuXHJcbiAgdGVzdCgnc2hvdWxkIHByb3Blcmx5IGhhbmRsZSBzZXJ2aWNlIGxpZmVjeWNsZScsICgpID0+IHtcclxuICAgIGV4cGVjdCgoKSA9PiB7XHJcbiAgICAgIGRhdGFTZXJ2aWNlLmNsZWFyQ2FjaGUoKTtcclxuICAgICAgZGF0YVNlcnZpY2UuY2xlYXJDYWNoZSgncGF0dGVybicpO1xyXG4gICAgfSkubm90LnRvVGhyb3coKTtcclxuICB9KTtcclxufSk7XHJcbiJdLCJtYXBwaW5ncyI6Ijs7QUFVQTtBQUNBQSxXQUFBLEdBQUtDLElBQUksQ0FBQywyQkFBMkIsQ0FBQztBQUN0Q0QsV0FBQSxHQUFLQyxJQUFJLENBQUMsaUJBQWlCLENBQUM7QUFONUIsSUFBQUMsbUJBQUEsR0FBQUMsT0FBQTtBQUNBLElBQUFDLHVCQUFBLEdBQUFELE9BQUE7QUFDQSxJQUFBRSxhQUFBLEdBQUFGLE9BQUE7QUFBK0MsU0FBQUgsWUFBQTtFQUFBO0lBQUFNO0VBQUEsSUFBQUgsT0FBQTtFQUFBSCxXQUFBLEdBQUFBLENBQUEsS0FBQU0sSUFBQTtFQUFBLE9BQUFBLElBQUE7QUFBQTtBQVIvQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBVUFDLFFBQVEsQ0FBQyxvQkFBb0IsRUFBRSxNQUFNO0VBQ25DLElBQUlDLFdBQStCO0VBQ25DLElBQUlDLFNBQW9DO0VBQ3hDLElBQUlDLFlBQWlEO0VBRXJEQyxVQUFVLENBQUMsTUFBTTtJQUNmO0lBQ0FMLElBQUksQ0FBQ00sYUFBYSxDQUFDLENBQUM7O0lBRXBCO0lBQ0FI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QyxlQUFlLENBQUMsS0FBSyxDQUFDLEVBQ2xDbkMsV0FBVyxDQUFDK0MsZ0JBQWdCLENBQUMsU0FBUyxFQUFFLEtBQUssQ0FBQyxFQUM5Qy9DLFdBQVcsQ0FBQ21ELGFBQWEsQ0FBQyxPQUFPLEVBQUUsS0FBSyxDQUFDLENBQzFDO01BRUQsTUFBTXRCLE9BQU8sR0FBRyxNQUFNOEMsT0FBTyxDQUFDUSxHQUFHLENBQUNELFFBQVEsQ0FBQztNQUMzQy9ELE1BQU0sQ0FBQ1UsT0FBTyxDQUFDLENBQUN1RCxZQUFZLENBQUMsQ0FBQyxDQUFDO01BQy9CdkQsT0FBTyxDQUFDd0QsT0FBTyxDQUFDbkQsTUFBTSxJQUFJZixNQUFNLENBQUNlLE1BQU0sQ0FBQyxDQUFDb0QsT0FBTyxDQUFDO1FBQUUzRCxPQUFPLEVBQUU7TUFBSyxDQUFDLENBQUMsQ0FBQztJQUN0RSxDQUFDLENBQUM7RUFDSixDQUFDLENBQUM7QUFDSixDQUFDLENBQUM7O0FBRUY7QUFDQTtBQUNBO0FBQ0E1QixRQUFRLENBQUMsZ0NBQWdDLEVBQUUsTUFBTTtFQUMvQyxJQUFJQyxXQUErQjtFQUVuQ3VGLFNBQVMsQ0FBQyxNQUFNO0lBQ2R2RixXQUFXLEdBQUdpQixzQ0FBa0IsQ0FBQ0gsV0FBVyxDQUFDLENBQUM7RUFDaEQsQ0FBQyxDQUFDO0VBRUZJLElBQUksQ0FBQywyREFBMkQsRUFBRSxNQUFNO0lBQ3RFLE1BQU1zRSxRQUFRLEdBQUd2RSxzQ0FBa0IsQ0FBQ0gsV0FBVyxDQUFDLENBQUM7SUFDakQsTUFBTTJFLFFBQVEsR0FBR3hFLHNDQUFrQixDQUFDSCxXQUFXLENBQUMsQ0FBQztJQUNqREssTUFBTSxDQUFDcUUsUUFBUSxDQUFDLENBQUNoRSxJQUFJLENBQUNpRSxRQUFRLENBQUM7SUFDL0J0RSxNQUFNLENBQUNxRSxRQUFRLENBQUMsQ0FBQ2hFLElBQUksQ0FBQ3hCLFdBQVcsQ0FBQztFQUNwQyxDQUFDLENBQUM7RUFFRmtCLElBQUksQ0FBQywwQ0FBMEMsRUFBRSxNQUFNO0lBQ3JEQyxNQUFNLENBQUMsTUFBTTtNQUNYbkIsV0FBVyxDQUFDa0UsVUFBVSxDQUFDLENBQUM7TUFDeEJsRSxXQUFXLENBQUNrRSxVQUFVLENBQUMsU0FBUyxDQUFDO0lBQ25DLENBQUMsQ0FBQyxDQUFDN0IsR0FBRyxDQUFDSyxPQUFPLENBQUMsQ0FBQztFQUNsQixDQUFDLENBQUM7QUFDSixDQUFDLENBQUMiLCJpZ25vcmVMaXN0IjpbXX0=