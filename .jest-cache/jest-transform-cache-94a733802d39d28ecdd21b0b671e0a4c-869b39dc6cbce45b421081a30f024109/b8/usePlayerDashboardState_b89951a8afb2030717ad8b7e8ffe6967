12b9e0b88488180c2985345ce1650239
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.usePlayerDashboardState = usePlayerDashboardState;
var _react = require("react");
var _MasterServiceRegistry = _interopRequireDefault(require("../services/MasterServiceRegistry"));
var _UnifiedLogger = require("../services/unified/UnifiedLogger");
function _interopRequireWildcard(e, t) { if ("function" == typeof WeakMap) var r = new WeakMap(), n = new WeakMap(); return (_interopRequireWildcard = function (e, t) { if (!t && e && e.__esModule) return e; var o, i, f = { __proto__: null, default: e }; if (null === e || "object" != typeof e && "function" != typeof e) return f; if (o = t ? n : r) { if (o.has(e)) return o.get(e); o.set(e, f); } for (const t in e) "default" !== t && {}.hasOwnProperty.call(e, t) && ((i = (o = Object.defineProperty) && Object.getOwnPropertyDescriptor(e, t)) && (i.get || i.set) ? o(f, t, i) : f[t] = e[t]); return f; })(e, t); }
function usePlayerDashboardState({
  playerId,
  sport = 'MLB'
}) {
  const [player, setPlayer] = (0, _react.useState)(null);
  const [loading, setLoading] = (0, _react.useState)(false);
  const [error, setError] = (0, _react.useState)(null);
  const [errorId, setErrorId] = (0, _react.useState)(null);
  const [correlationId, setCorrelationId] = (0, _react.useState)(null);
  const [initialized, setInitialized] = (0, _react.useState)(false);
  const [playerDataService, setPlayerDataService] = (0, _react.useState)(null);
  const logger = _UnifiedLogger.UnifiedLogger.getInstance();
  const serviceRegistry = _MasterServiceRegistry.default;
  (0, _react.useEffect)(() => {
    const init = async () => {
      try {
        console.log('[usePlayerDashboardState] Initializing service registry...');
        if (typeof serviceRegistry.initialize === 'function') {
          await serviceRegistry.initialize();
          console.log('[usePlayerDashboardState] Service registry initialized successfully');
        } else {
          console.warn('[usePlayerDashboardState] Service registry has no initialize method');
        }
        const service = serviceRegistry.getService('playerData');
        console.log('[usePlayerDashboardState] PlayerData service retrieved:', !!service);
        setPlayerDataService(service);
        setInitialized(true);
      } catch (initError) {
        console.error('[usePlayerDashboardState] Service initialization failed:', initError);

        // Check if this is the "item is not defined" error
        if (initError instanceof ReferenceError && initError.message.includes('item')) {
          console.error('[usePlayerDashboardState] ReferenceError detected during service init:', {
            name: initError.name,
            message: initError.message,
            stack: initError.stack
          });
        }

        // Still set initialized to true to prevent infinite loops
        setInitialized(true);
      }
    };
    init();
  }, [serviceRegistry]);
  const loadPlayer = (0, _react.useCallback)(async id => {
    if (!playerDataService || typeof playerDataService.getPlayer !== 'function') return;
    setLoading(true);
    setError(null);
    const corrId = `${id}-${Date.now()}`;
    setCorrelationId(corrId);
    try {
      logger.info(`usePlayerDashboardState: Loading player: ${id} [correlationId=${corrId}]`);

      // Add extra safety checks
      if (!playerDataService || typeof playerDataService.getPlayer !== 'function') {
        throw new Error('PlayerDataService not available or getPlayer method missing');
      }
      const playerData = await playerDataService.getPlayer(id, sport);

      // Validate player data
      if (!playerData) {
        throw new Error('No player data returned from service');
      }
      setPlayer(playerData);
      logger.info(`usePlayerDashboardState: Player loaded: ${playerData.name || 'Unknown'} [correlationId=${corrId}]`);
      setErrorId(null);
    } catch (err) {
      // Capture error information but don't spam for connectivity issues
      let errorMsg = 'Failed to load player';
      let errorDetails = {};
      const isConnectivityOrMissingDataError = err instanceof Error && (err.message.includes('Failed to fetch') || err.message.includes('timeout') || err.message.includes('signal timed out') || err.message.includes('Network') || err.message.includes('HTTP 404') || err.message.includes('Not Found') || err.message.includes('Player data unavailable'));
      if (err instanceof Error) {
        errorMsg = err.message;
        errorDetails = {
          name: err.name,
          stack: err.stack,
          message: err.message
        };

        // For connectivity/missing data errors, provide user-friendly message
        if (isConnectivityOrMissingDataError) {
          errorMsg = 'Player data not found - using sample data';
        }
      } else if (typeof err === 'string') {
        errorMsg = err;
      } else if (err && typeof err === 'object') {
        errorMsg = err.toString() || 'Unknown error object';
        errorDetails = err;
      }
      setError(errorMsg);

      // Generate errorId - skip error service for connectivity/missing data issues
      let generatedErrorId = null;
      if (!isConnectivityOrMissingDataError) {
        try {
          const {
            UnifiedErrorService
          } = await Promise.resolve().then(() => _interopRequireWildcard(require('../services/unified/UnifiedErrorService')));
          generatedErrorId = UnifiedErrorService.getInstance().reportError(errorMsg, {
            correlationId: corrId,
            context: 'usePlayerDashboardState',
            playerId: id,
            sport: sport,
            errorDetails: errorDetails
          });
        } catch (e) {
          // Fallback: generate a local errorId
          generatedErrorId = `player_error_${Date.now()}_${Math.random().toString(36).substr(2, 6)}`;
        }
      } else {
        // For connectivity/missing data errors, just generate a simple ID
        generatedErrorId = `missing_data_${Date.now()}`;
      }
      setErrorId(generatedErrorId);

      // Log errors appropriately - minimal logging for connectivity/missing data issues
      try {
        if (isConnectivityOrMissingDataError) {
          // Just log missing data issues as info, not errors
          console.info(`[usePlayerDashboardState] Player data not found for ${id} - using sample data`);
        } else {
          // Log actual errors normally
          const logMessage = generatedErrorId ? `usePlayerDashboardState: ${errorMsg} [correlationId=${corrId}] errorId=${generatedErrorId}` : `usePlayerDashboardState: ${errorMsg} [correlationId=${corrId}] errorId=null`;
          logger.error(logMessage);
          console.error('[usePlayerDashboardState] Error details:', JSON.stringify({
            errorMsg,
            correlationId: corrId,
            errorId: generatedErrorId,
            playerId: id,
            sport: sport,
            errorDetails: errorDetails
          }, null, 2));
        }
      } catch (logError) {
        // Fallback logging if there are issues with the logger
        console.error('[usePlayerDashboardState] Logging error:', logError);
        console.error('[usePlayerDashboardState] Original error:', errorMsg);
      }
    } finally {
      setLoading(false);
    }
  }, [playerDataService, sport, logger]);
  (0, _react.useEffect)(() => {
    if (playerId && playerId.trim() !== '' && playerDataService && initialized) {
      // Wrap in additional try-catch to catch any ReferenceErrors
      try {
        loadPlayer(playerId).catch(err => {
          console.error('[usePlayerDashboardState] useEffect loadPlayer failed:', err);
          // Log additional details if it's a ReferenceError
          if (err instanceof ReferenceError) {
            console.error('[usePlayerDashboardState] ReferenceError details:', {
              name: err.name,
              message: err.message,
              stack: err.stack
            });
          }
        });
      } catch (syncError) {
        console.error('[usePlayerDashboardState] Synchronous error in useEffect:', syncError);
      }
    }
  }, [playerId, playerDataService, initialized, loadPlayer]);
  return {
    player,
    loading,
    error,
    errorId,
    correlationId,
    reload: () => loadPlayer(playerId)
  };
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfcmVhY3QiLCJyZXF1aXJlIiwiX01hc3RlclNlcnZpY2VSZWdpc3RyeSIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJfVW5pZmllZExvZ2dlciIsIl9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkIiwiZSIsInQiLCJXZWFrTWFwIiwiciIsIm4iLCJfX2VzTW9kdWxlIiwibyIsImkiLCJmIiwiX19wcm90b19fIiwiZGVmYXVsdCIsImhhcyIsImdldCIsInNldCIsImhhc093blByb3BlcnR5IiwiY2FsbCIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yIiwidXNlUGxheWVyRGFzaGJvYXJkU3RhdGUiLCJwbGF5ZXJJZCIsInNwb3J0IiwicGxheWVyIiwic2V0UGxheWVyIiwidXNlU3RhdGUiLCJsb2FkaW5nIiwic2V0TG9hZGluZyIsImVycm9yIiwic2V0RXJyb3IiLCJlcnJvcklkIiwic2V0RXJyb3JJZCIsImNvcnJlbGF0aW9uSWQiLCJzZXRDb3JyZWxhdGlvbklkIiwiaW5pdGlhbGl6ZWQiLCJzZXRJbml0aWFsaXplZCIsInBsYXllckRhdGFTZXJ2aWNlIiwic2V0UGxheWVyRGF0YVNlcnZpY2UiLCJsb2dnZXIiLCJVbmlmaWVkTG9nZ2VyIiwiZ2V0SW5zdGFuY2UiLCJzZXJ2aWNlUmVnaXN0cnkiLCJNYXN0ZXJTZXJ2aWNlUmVnaXN0cnkiLCJ1c2VFZmZlY3QiLCJpbml0IiwiY29uc29sZSIsImxvZyIsImluaXRpYWxpemUiLCJ3YXJuIiwic2VydmljZSIsImdldFNlcnZpY2UiLCJpbml0RXJyb3IiLCJSZWZlcmVuY2VFcnJvciIsIm1lc3NhZ2UiLCJpbmNsdWRlcyIsIm5hbWUiLCJzdGFjayIsImxvYWRQbGF5ZXIiLCJ1c2VDYWxsYmFjayIsImlkIiwiZ2V0UGxheWVyIiwiY29ycklkIiwiRGF0ZSIsIm5vdyIsImluZm8iLCJFcnJvciIsInBsYXllckRhdGEiLCJlcnIiLCJlcnJvck1zZyIsImVycm9yRGV0YWlscyIsImlzQ29ubmVjdGl2aXR5T3JNaXNzaW5nRGF0YUVycm9yIiwidG9TdHJpbmciLCJnZW5lcmF0ZWRFcnJvcklkIiwiVW5pZmllZEVycm9yU2VydmljZSIsIlByb21pc2UiLCJyZXNvbHZlIiwidGhlbiIsInJlcG9ydEVycm9yIiwiY29udGV4dCIsIk1hdGgiLCJyYW5kb20iLCJzdWJzdHIiLCJsb2dNZXNzYWdlIiwiSlNPTiIsInN0cmluZ2lmeSIsImxvZ0Vycm9yIiwidHJpbSIsImNhdGNoIiwic3luY0Vycm9yIiwicmVsb2FkIl0sInNvdXJjZXMiOlsidXNlUGxheWVyRGFzaGJvYXJkU3RhdGUudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgdXNlQ2FsbGJhY2ssIHVzZUVmZmVjdCwgdXNlU3RhdGUgfSBmcm9tICdyZWFjdCc7XHJcbmltcG9ydCB0eXBlIHsgUGxheWVyIH0gZnJvbSAnLi4vY29tcG9uZW50cy9wbGF5ZXIvUGxheWVyRGFzaGJvYXJkQ29udGFpbmVyJztcclxuaW1wb3J0IE1hc3RlclNlcnZpY2VSZWdpc3RyeSBmcm9tICcuLi9zZXJ2aWNlcy9NYXN0ZXJTZXJ2aWNlUmVnaXN0cnknO1xyXG5pbXBvcnQgeyBVbmlmaWVkTG9nZ2VyIH0gZnJvbSAnLi4vc2VydmljZXMvdW5pZmllZC9VbmlmaWVkTG9nZ2VyJztcclxuXHJcbmludGVyZmFjZSBVc2VQbGF5ZXJEYXNoYm9hcmRTdGF0ZVByb3BzIHtcclxuICBwbGF5ZXJJZDogc3RyaW5nO1xyXG4gIHNwb3J0Pzogc3RyaW5nO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gdXNlUGxheWVyRGFzaGJvYXJkU3RhdGUoeyBwbGF5ZXJJZCwgc3BvcnQgPSAnTUxCJyB9OiBVc2VQbGF5ZXJEYXNoYm9hcmRTdGF0ZVByb3BzKSB7XHJcbiAgY29uc3QgW3BsYXllciwgc2V0UGxheWVyXSA9IHVzZVN0YXRlPFBsYXllciB8IG51bGw+KG51bGwpO1xyXG4gIGNvbnN0IFtsb2FkaW5nLCBzZXRMb2FkaW5nXSA9IHVzZVN0YXRlKGZhbHNlKTtcclxuICBjb25zdCBbZXJyb3IsIHNldEVycm9yXSA9IHVzZVN0YXRlPHN0cmluZyB8IG51bGw+KG51bGwpO1xyXG4gIGNvbnN0IFtlcnJvcklkLCBzZXRFcnJvcklkXSA9IHVzZVN0YXRlPHN0cmluZyB8IG51bGw+KG51bGwpO1xyXG4gIGNvbnN0IFtjb3JyZWxhdGlvbklkLCBzZXRDb3JyZWxhdGlvbklkXSA9IHVzZVN0YXRlPHN0cmluZyB8IG51bGw+KG51bGwpO1xyXG4gIGNvbnN0IFtpbml0aWFsaXplZCwgc2V0SW5pdGlhbGl6ZWRdID0gdXNlU3RhdGUoZmFsc2UpO1xyXG4gIGNvbnN0IFtwbGF5ZXJEYXRhU2VydmljZSwgc2V0UGxheWVyRGF0YVNlcnZpY2VdID0gdXNlU3RhdGU8YW55PihudWxsKTtcclxuXHJcbiAgY29uc3QgbG9nZ2VyID0gVW5pZmllZExvZ2dlci5nZXRJbnN0YW5jZSgpO1xyXG4gIGNvbnN0IHNlcnZpY2VSZWdpc3RyeSA9IE1hc3RlclNlcnZpY2VSZWdpc3RyeTtcclxuXHJcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBjb25zdCBpbml0ID0gYXN5bmMgKCkgPT4ge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc29sZS5sb2coJ1t1c2VQbGF5ZXJEYXNoYm9hcmRTdGF0ZV0gSW5pdGlhbGl6aW5nIHNlcnZpY2UgcmVnaXN0cnkuLi4nKTtcblxuICAgICAgICBpZiAodHlwZW9mIHNlcnZpY2VSZWdpc3RyeS5pbml0aWFsaXplID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgYXdhaXQgc2VydmljZVJlZ2lzdHJ5LmluaXRpYWxpemUoKTtcbiAgICAgICAgICBjb25zb2xlLmxvZygnW3VzZVBsYXllckRhc2hib2FyZFN0YXRlXSBTZXJ2aWNlIHJlZ2lzdHJ5IGluaXRpYWxpemVkIHN1Y2Nlc3NmdWxseScpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNvbnNvbGUud2FybignW3VzZVBsYXllckRhc2hib2FyZFN0YXRlXSBTZXJ2aWNlIHJlZ2lzdHJ5IGhhcyBubyBpbml0aWFsaXplIG1ldGhvZCcpO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3Qgc2VydmljZSA9IHNlcnZpY2VSZWdpc3RyeS5nZXRTZXJ2aWNlKCdwbGF5ZXJEYXRhJyk7XG4gICAgICAgIGNvbnNvbGUubG9nKCdbdXNlUGxheWVyRGFzaGJvYXJkU3RhdGVdIFBsYXllckRhdGEgc2VydmljZSByZXRyaWV2ZWQ6JywgISFzZXJ2aWNlKTtcblxuICAgICAgICBzZXRQbGF5ZXJEYXRhU2VydmljZShzZXJ2aWNlKTtcbiAgICAgICAgc2V0SW5pdGlhbGl6ZWQodHJ1ZSk7XG4gICAgICB9IGNhdGNoIChpbml0RXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignW3VzZVBsYXllckRhc2hib2FyZFN0YXRlXSBTZXJ2aWNlIGluaXRpYWxpemF0aW9uIGZhaWxlZDonLCBpbml0RXJyb3IpO1xuXG4gICAgICAgIC8vIENoZWNrIGlmIHRoaXMgaXMgdGhlIFwiaXRlbSBpcyBub3QgZGVmaW5lZFwiIGVycm9yXG4gICAgICAgIGlmIChpbml0RXJyb3IgaW5zdGFuY2VvZiBSZWZlcmVuY2VFcnJvciAmJiBpbml0RXJyb3IubWVzc2FnZS5pbmNsdWRlcygnaXRlbScpKSB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcignW3VzZVBsYXllckRhc2hib2FyZFN0YXRlXSBSZWZlcmVuY2VFcnJvciBkZXRlY3RlZCBkdXJpbmcgc2VydmljZSBpbml0OicsIHtcbiAgICAgICAgICAgIG5hbWU6IGluaXRFcnJvci5uYW1lLFxuICAgICAgICAgICAgbWVzc2FnZTogaW5pdEVycm9yLm1lc3NhZ2UsXG4gICAgICAgICAgICBzdGFjazogaW5pdEVycm9yLnN0YWNrXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBTdGlsbCBzZXQgaW5pdGlhbGl6ZWQgdG8gdHJ1ZSB0byBwcmV2ZW50IGluZmluaXRlIGxvb3BzXG4gICAgICAgIHNldEluaXRpYWxpemVkKHRydWUpO1xuICAgICAgfVxuICAgIH07XG4gICAgaW5pdCgpO1xuICB9LCBbc2VydmljZVJlZ2lzdHJ5XSk7XHJcblxyXG4gIGNvbnN0IGxvYWRQbGF5ZXIgPSB1c2VDYWxsYmFjayhcclxuICAgIGFzeW5jIChpZDogc3RyaW5nKSA9PiB7XHJcbiAgICAgIGlmICghcGxheWVyRGF0YVNlcnZpY2UgfHwgdHlwZW9mIHBsYXllckRhdGFTZXJ2aWNlLmdldFBsYXllciAhPT0gJ2Z1bmN0aW9uJykgcmV0dXJuO1xyXG4gICAgICBzZXRMb2FkaW5nKHRydWUpO1xyXG4gICAgICBzZXRFcnJvcihudWxsKTtcclxuICAgICAgY29uc3QgY29ycklkID0gYCR7aWR9LSR7RGF0ZS5ub3coKX1gO1xyXG4gICAgICBzZXRDb3JyZWxhdGlvbklkKGNvcnJJZCk7XHJcbiAgICAgIHRyeSB7XG4gICAgICAgIGxvZ2dlci5pbmZvKGB1c2VQbGF5ZXJEYXNoYm9hcmRTdGF0ZTogTG9hZGluZyBwbGF5ZXI6ICR7aWR9IFtjb3JyZWxhdGlvbklkPSR7Y29ycklkfV1gKTtcblxuICAgICAgICAvLyBBZGQgZXh0cmEgc2FmZXR5IGNoZWNrc1xuICAgICAgICBpZiAoIXBsYXllckRhdGFTZXJ2aWNlIHx8IHR5cGVvZiBwbGF5ZXJEYXRhU2VydmljZS5nZXRQbGF5ZXIgIT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1BsYXllckRhdGFTZXJ2aWNlIG5vdCBhdmFpbGFibGUgb3IgZ2V0UGxheWVyIG1ldGhvZCBtaXNzaW5nJyk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBwbGF5ZXJEYXRhID0gYXdhaXQgcGxheWVyRGF0YVNlcnZpY2UuZ2V0UGxheWVyKGlkLCBzcG9ydCk7XG5cbiAgICAgICAgLy8gVmFsaWRhdGUgcGxheWVyIGRhdGFcbiAgICAgICAgaWYgKCFwbGF5ZXJEYXRhKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdObyBwbGF5ZXIgZGF0YSByZXR1cm5lZCBmcm9tIHNlcnZpY2UnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHNldFBsYXllcihwbGF5ZXJEYXRhKTtcbiAgICAgICAgbG9nZ2VyLmluZm8oXG4gICAgICAgICAgYHVzZVBsYXllckRhc2hib2FyZFN0YXRlOiBQbGF5ZXIgbG9hZGVkOiAke3BsYXllckRhdGEubmFtZSB8fCAnVW5rbm93bid9IFtjb3JyZWxhdGlvbklkPSR7Y29ycklkfV1gXG4gICAgICAgICk7XG4gICAgICAgIHNldEVycm9ySWQobnVsbCk7XG4gICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgLy8gQ2FwdHVyZSBlcnJvciBpbmZvcm1hdGlvbiBidXQgZG9uJ3Qgc3BhbSBmb3IgY29ubmVjdGl2aXR5IGlzc3Vlc1xuICAgICAgICBsZXQgZXJyb3JNc2cgPSAnRmFpbGVkIHRvIGxvYWQgcGxheWVyJztcbiAgICAgICAgbGV0IGVycm9yRGV0YWlsczogYW55ID0ge307XG5cbiAgICAgICAgY29uc3QgaXNDb25uZWN0aXZpdHlPck1pc3NpbmdEYXRhRXJyb3IgPSBlcnIgaW5zdGFuY2VvZiBFcnJvciAmJiAoXG4gICAgICAgICAgZXJyLm1lc3NhZ2UuaW5jbHVkZXMoJ0ZhaWxlZCB0byBmZXRjaCcpIHx8XG4gICAgICAgICAgZXJyLm1lc3NhZ2UuaW5jbHVkZXMoJ3RpbWVvdXQnKSB8fFxuICAgICAgICAgIGVyci5tZXNzYWdlLmluY2x1ZGVzKCdzaWduYWwgdGltZWQgb3V0JykgfHxcbiAgICAgICAgICBlcnIubWVzc2FnZS5pbmNsdWRlcygnTmV0d29yaycpIHx8XG4gICAgICAgICAgZXJyLm1lc3NhZ2UuaW5jbHVkZXMoJ0hUVFAgNDA0JykgfHxcbiAgICAgICAgICBlcnIubWVzc2FnZS5pbmNsdWRlcygnTm90IEZvdW5kJykgfHxcbiAgICAgICAgICBlcnIubWVzc2FnZS5pbmNsdWRlcygnUGxheWVyIGRhdGEgdW5hdmFpbGFibGUnKVxuICAgICAgICApO1xuXG4gICAgICAgIGlmIChlcnIgaW5zdGFuY2VvZiBFcnJvcikge1xuICAgICAgICAgIGVycm9yTXNnID0gZXJyLm1lc3NhZ2U7XG4gICAgICAgICAgZXJyb3JEZXRhaWxzID0ge1xuICAgICAgICAgICAgbmFtZTogZXJyLm5hbWUsXG4gICAgICAgICAgICBzdGFjazogZXJyLnN0YWNrLFxuICAgICAgICAgICAgbWVzc2FnZTogZXJyLm1lc3NhZ2VcbiAgICAgICAgICB9O1xuXG4gICAgICAgICAgLy8gRm9yIGNvbm5lY3Rpdml0eS9taXNzaW5nIGRhdGEgZXJyb3JzLCBwcm92aWRlIHVzZXItZnJpZW5kbHkgbWVzc2FnZVxuICAgICAgICAgIGlmIChpc0Nvbm5lY3Rpdml0eU9yTWlzc2luZ0RhdGFFcnJvcikge1xuICAgICAgICAgICAgZXJyb3JNc2cgPSAnUGxheWVyIGRhdGEgbm90IGZvdW5kIC0gdXNpbmcgc2FtcGxlIGRhdGEnO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgZXJyID09PSAnc3RyaW5nJykge1xuICAgICAgICAgIGVycm9yTXNnID0gZXJyO1xuICAgICAgICB9IGVsc2UgaWYgKGVyciAmJiB0eXBlb2YgZXJyID09PSAnb2JqZWN0Jykge1xuICAgICAgICAgIGVycm9yTXNnID0gZXJyLnRvU3RyaW5nKCkgfHwgJ1Vua25vd24gZXJyb3Igb2JqZWN0JztcbiAgICAgICAgICBlcnJvckRldGFpbHMgPSBlcnI7XG4gICAgICAgIH1cblxuICAgICAgICBzZXRFcnJvcihlcnJvck1zZyk7XG5cbiAgICAgICAgLy8gR2VuZXJhdGUgZXJyb3JJZCAtIHNraXAgZXJyb3Igc2VydmljZSBmb3IgY29ubmVjdGl2aXR5L21pc3NpbmcgZGF0YSBpc3N1ZXNcbiAgICAgICAgbGV0IGdlbmVyYXRlZEVycm9ySWQgPSBudWxsO1xuICAgICAgICBpZiAoIWlzQ29ubmVjdGl2aXR5T3JNaXNzaW5nRGF0YUVycm9yKSB7XG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHsgVW5pZmllZEVycm9yU2VydmljZSB9ID0gYXdhaXQgaW1wb3J0KCcuLi9zZXJ2aWNlcy91bmlmaWVkL1VuaWZpZWRFcnJvclNlcnZpY2UnKTtcbiAgICAgICAgICAgIGdlbmVyYXRlZEVycm9ySWQgPSBVbmlmaWVkRXJyb3JTZXJ2aWNlLmdldEluc3RhbmNlKCkucmVwb3J0RXJyb3IoZXJyb3JNc2csIHtcbiAgICAgICAgICAgICAgY29ycmVsYXRpb25JZDogY29ycklkLFxuICAgICAgICAgICAgICBjb250ZXh0OiAndXNlUGxheWVyRGFzaGJvYXJkU3RhdGUnLFxuICAgICAgICAgICAgICBwbGF5ZXJJZDogaWQsXG4gICAgICAgICAgICAgIHNwb3J0OiBzcG9ydCxcbiAgICAgICAgICAgICAgZXJyb3JEZXRhaWxzOiBlcnJvckRldGFpbHNcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIC8vIEZhbGxiYWNrOiBnZW5lcmF0ZSBhIGxvY2FsIGVycm9ySWRcbiAgICAgICAgICAgIGdlbmVyYXRlZEVycm9ySWQgPSBgcGxheWVyX2Vycm9yXyR7RGF0ZS5ub3coKX1fJHtNYXRoLnJhbmRvbSgpXG4gICAgICAgICAgICAgIC50b1N0cmluZygzNilcbiAgICAgICAgICAgICAgLnN1YnN0cigyLCA2KX1gO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBGb3IgY29ubmVjdGl2aXR5L21pc3NpbmcgZGF0YSBlcnJvcnMsIGp1c3QgZ2VuZXJhdGUgYSBzaW1wbGUgSURcbiAgICAgICAgICBnZW5lcmF0ZWRFcnJvcklkID0gYG1pc3NpbmdfZGF0YV8ke0RhdGUubm93KCl9YDtcbiAgICAgICAgfVxuICAgICAgICBzZXRFcnJvcklkKGdlbmVyYXRlZEVycm9ySWQpO1xuXG4gICAgICAgIC8vIExvZyBlcnJvcnMgYXBwcm9wcmlhdGVseSAtIG1pbmltYWwgbG9nZ2luZyBmb3IgY29ubmVjdGl2aXR5L21pc3NpbmcgZGF0YSBpc3N1ZXNcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBpZiAoaXNDb25uZWN0aXZpdHlPck1pc3NpbmdEYXRhRXJyb3IpIHtcbiAgICAgICAgICAgIC8vIEp1c3QgbG9nIG1pc3NpbmcgZGF0YSBpc3N1ZXMgYXMgaW5mbywgbm90IGVycm9yc1xuICAgICAgICAgICAgY29uc29sZS5pbmZvKGBbdXNlUGxheWVyRGFzaGJvYXJkU3RhdGVdIFBsYXllciBkYXRhIG5vdCBmb3VuZCBmb3IgJHtpZH0gLSB1c2luZyBzYW1wbGUgZGF0YWApO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBMb2cgYWN0dWFsIGVycm9ycyBub3JtYWxseVxuICAgICAgICAgICAgY29uc3QgbG9nTWVzc2FnZSA9IGdlbmVyYXRlZEVycm9ySWRcbiAgICAgICAgICAgICAgPyBgdXNlUGxheWVyRGFzaGJvYXJkU3RhdGU6ICR7ZXJyb3JNc2d9IFtjb3JyZWxhdGlvbklkPSR7Y29ycklkfV0gZXJyb3JJZD0ke2dlbmVyYXRlZEVycm9ySWR9YFxuICAgICAgICAgICAgICA6IGB1c2VQbGF5ZXJEYXNoYm9hcmRTdGF0ZTogJHtlcnJvck1zZ30gW2NvcnJlbGF0aW9uSWQ9JHtjb3JySWR9XSBlcnJvcklkPW51bGxgO1xuXG4gICAgICAgICAgICBsb2dnZXIuZXJyb3IobG9nTWVzc2FnZSk7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdbdXNlUGxheWVyRGFzaGJvYXJkU3RhdGVdIEVycm9yIGRldGFpbHM6JywgSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgICAgICBlcnJvck1zZyxcbiAgICAgICAgICAgICAgY29ycmVsYXRpb25JZDogY29ycklkLFxuICAgICAgICAgICAgICBlcnJvcklkOiBnZW5lcmF0ZWRFcnJvcklkLFxuICAgICAgICAgICAgICBwbGF5ZXJJZDogaWQsXG4gICAgICAgICAgICAgIHNwb3J0OiBzcG9ydCxcbiAgICAgICAgICAgICAgZXJyb3JEZXRhaWxzOiBlcnJvckRldGFpbHNcbiAgICAgICAgICAgIH0sIG51bGwsIDIpKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKGxvZ0Vycm9yKSB7XG4gICAgICAgICAgLy8gRmFsbGJhY2sgbG9nZ2luZyBpZiB0aGVyZSBhcmUgaXNzdWVzIHdpdGggdGhlIGxvZ2dlclxuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1t1c2VQbGF5ZXJEYXNoYm9hcmRTdGF0ZV0gTG9nZ2luZyBlcnJvcjonLCBsb2dFcnJvcik7XG4gICAgICAgICAgY29uc29sZS5lcnJvcignW3VzZVBsYXllckRhc2hib2FyZFN0YXRlXSBPcmlnaW5hbCBlcnJvcjonLCBlcnJvck1zZyk7XG4gICAgICAgIH1cclxuICAgICAgfSBmaW5hbGx5IHtcclxuICAgICAgICBzZXRMb2FkaW5nKGZhbHNlKTtcclxuICAgICAgfVxyXG4gICAgfSxcclxuICAgIFtwbGF5ZXJEYXRhU2VydmljZSwgc3BvcnQsIGxvZ2dlcl1cclxuICApO1xyXG5cclxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmIChwbGF5ZXJJZCAmJiBwbGF5ZXJJZC50cmltKCkgIT09ICcnICYmIHBsYXllckRhdGFTZXJ2aWNlICYmIGluaXRpYWxpemVkKSB7XG4gICAgICAvLyBXcmFwIGluIGFkZGl0aW9uYWwgdHJ5LWNhdGNoIHRvIGNhdGNoIGFueSBSZWZlcmVuY2VFcnJvcnNcbiAgICAgIHRyeSB7XG4gICAgICAgIGxvYWRQbGF5ZXIocGxheWVySWQpLmNhdGNoKGVyciA9PiB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcignW3VzZVBsYXllckRhc2hib2FyZFN0YXRlXSB1c2VFZmZlY3QgbG9hZFBsYXllciBmYWlsZWQ6JywgZXJyKTtcbiAgICAgICAgICAvLyBMb2cgYWRkaXRpb25hbCBkZXRhaWxzIGlmIGl0J3MgYSBSZWZlcmVuY2VFcnJvclxuICAgICAgICAgIGlmIChlcnIgaW5zdGFuY2VvZiBSZWZlcmVuY2VFcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcignW3VzZVBsYXllckRhc2hib2FyZFN0YXRlXSBSZWZlcmVuY2VFcnJvciBkZXRhaWxzOicsIHtcbiAgICAgICAgICAgICAgbmFtZTogZXJyLm5hbWUsXG4gICAgICAgICAgICAgIG1lc3NhZ2U6IGVyci5tZXNzYWdlLFxuICAgICAgICAgICAgICBzdGFjazogZXJyLnN0YWNrXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfSBjYXRjaCAoc3luY0Vycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ1t1c2VQbGF5ZXJEYXNoYm9hcmRTdGF0ZV0gU3luY2hyb25vdXMgZXJyb3IgaW4gdXNlRWZmZWN0OicsIHN5bmNFcnJvcik7XG4gICAgICB9XG4gICAgfVxuICB9LCBbcGxheWVySWQsIHBsYXllckRhdGFTZXJ2aWNlLCBpbml0aWFsaXplZCwgbG9hZFBsYXllcl0pO1xyXG5cclxuICByZXR1cm4ge1xyXG4gICAgcGxheWVyLFxyXG4gICAgbG9hZGluZyxcclxuICAgIGVycm9yLFxyXG4gICAgZXJyb3JJZCxcclxuICAgIGNvcnJlbGF0aW9uSWQsXHJcbiAgICByZWxvYWQ6ICgpID0+IGxvYWRQbGF5ZXIocGxheWVySWQpLFxyXG4gIH07XHJcbn1cbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBLElBQUFBLE1BQUEsR0FBQUMsT0FBQTtBQUVBLElBQUFDLHNCQUFBLEdBQUFDLHNCQUFBLENBQUFGLE9BQUE7QUFDQSxJQUFBRyxjQUFBLEdBQUFILE9BQUE7QUFBa0UsU0FBQUksd0JBQUFDLENBQUEsRUFBQUMsQ0FBQSw2QkFBQUMsT0FBQSxNQUFBQyxDQUFBLE9BQUFELE9BQUEsSUFBQUUsQ0FBQSxPQUFBRixPQUFBLFlBQUFILHVCQUFBLFlBQUFBLENBQUFDLENBQUEsRUFBQUMsQ0FBQSxTQUFBQSxDQUFBLElBQUFELENBQUEsSUFBQUEsQ0FBQSxDQUFBSyxVQUFBLFNBQUFMLENBQUEsTUFBQU0sQ0FBQSxFQUFBQyxDQUFBLEVBQUFDLENBQUEsS0FBQUMsU0FBQSxRQUFBQyxPQUFBLEVBQUFWLENBQUEsaUJBQUFBLENBQUEsdUJBQUFBLENBQUEseUJBQUFBLENBQUEsU0FBQVEsQ0FBQSxNQUFBRixDQUFBLEdBQUFMLENBQUEsR0FBQUcsQ0FBQSxHQUFBRCxDQUFBLFFBQUFHLENBQUEsQ0FBQUssR0FBQSxDQUFBWCxDQUFBLFVBQUFNLENBQUEsQ0FBQU0sR0FBQSxDQUFBWixDQUFBLEdBQUFNLENBQUEsQ0FBQU8sR0FBQSxDQUFBYixDQUFBLEVBQUFRLENBQUEsZ0JBQUFQLENBQUEsSUFBQUQsQ0FBQSxnQkFBQUMsQ0FBQSxPQUFBYSxjQUFBLENBQUFDLElBQUEsQ0FBQWYsQ0FBQSxFQUFBQyxDQUFBLE9BQUFNLENBQUEsSUFBQUQsQ0FBQSxHQUFBVSxNQUFBLENBQUFDLGNBQUEsS0FBQUQsTUFBQSxDQUFBRSx3QkFBQSxDQUFBbEIsQ0FBQSxFQUFBQyxDQUFBLE9BQUFNLENBQUEsQ0FBQUssR0FBQSxJQUFBTCxDQUFBLENBQUFNLEdBQUEsSUFBQVAsQ0FBQSxDQUFBRSxDQUFBLEVBQUFQLENBQUEsRUFBQU0sQ0FBQSxJQUFBQyxDQUFBLENBQUFQLENBQUEsSUFBQUQsQ0FBQSxDQUFBQyxDQUFBLFdBQUFPLENBQUEsS0FBQVIsQ0FBQSxFQUFBQyxDQUFBO0FBTzNELFNBQVNrQix1QkFBdUJBLENBQUM7RUFBRUMsUUFBUTtFQUFFQyxLQUFLLEdBQUc7QUFBb0MsQ0FBQyxFQUFFO0VBQ2pHLE1BQU0sQ0FBQ0MsTUFBTSxFQUFFQyxTQUFTLENBQUMsR0FBRyxJQUFBQyxlQUFRLEVBQWdCLElBQUksQ0FBQztFQUN6RCxNQUFNLENBQUNDLE9BQU8sRUFBRUMsVUFBVSxDQUFDLEdBQUcsSUFBQUYsZUFBUSxFQUFDLEtBQUssQ0FBQztFQUM3QyxNQUFNLENBQUNHLEtBQUssRUFBRUMsUUFBUSxDQUFDLEdBQUcsSUFBQUosZUFBUSxFQUFnQixJQUFJLENBQUM7RUFDdkQsTUFBTSxDQUFDSyxPQUFPLEVBQUVDLFVBQVUsQ0FBQyxHQUFHLElBQUFOLGVBQVEsRUFBZ0IsSUFBSSxDQUFDO0VBQzNELE1BQU0sQ0FBQ08sYUFBYSxFQUFFQyxnQkFBZ0IsQ0FBQyxHQUFHLElBQUFSLGVBQVEsRUFBZ0IsSUFBSSxDQUFDO0VBQ3ZFLE1BQU0sQ0FBQ1MsV0FBVyxFQUFFQyxjQUFjLENBQUMsR0FBRyxJQUFBVixlQUFRLEVBQUMsS0FBSyxDQUFDO0VBQ3JELE1BQU0sQ0FBQ1csaUJBQWlCLEVBQUVDLG9CQUFvQixDQUFDLEdBQUcsSUFBQVosZUFBUSxFQUFNLElBQUksQ0FBQztFQUVyRSxNQUFNYSxNQUFNLEdBQUdDLDRCQUFhLENBQUNDLFdBQVcsQ0FBQyxDQUFDO0VBQzFDLE1BQU1DLGVBQWUsR0FBR0MsOEJBQXFCO0VBRTdDLElBQUFDLGdCQUFTLEVBQUMsTUFBTTtJQUNkLE1BQU1DLElBQUksR0FBRyxNQUFBQSxDQUFBLEtBQVk7TUFDdkIsSUFBSTtRQUNGQyxPQUFPLENBQUNDLEdBQUcsQ0FBQyw0REFBNEQsQ0FBQztRQUV6RSxJQUFJLE9BQU9MLGVBQWUsQ0FBQ00sVUFBVSxLQUFLLFVBQVUsRUFBRTtVQUNwRCxNQUFNTixlQUFlLENBQUNNLFVBQVUsQ0FBQyxDQUFDO1VBQ2xDRixPQUFPLENBQUNDLEdBQUcsQ0FBQyxxRUFBcUUsQ0FBQztRQUNwRixDQUFDLE1BQU07VUFDTEQsT0FBTyxDQUFDRyxJQUFJLENBQUMscUVBQXFFLENBQUM7UUFDckY7UUFFQSxNQUFNQyxPQUFPLEdBQUdSLGVBQWUsQ0FBQ1MsVUFBVSxDQUFDLFlBQVksQ0FBQztRQUN4REwsT0FBTyxDQUFDQyxHQUFHLENBQUMseURBQXlELEVBQUUsQ0FBQyxDQUFDRyxPQUFPLENBQUM7UUFFakZaLG9CQUFvQixDQUFDWSxPQUFPLENBQUM7UUFDN0JkLGNBQWMsQ0FBQyxJQUFJLENBQUM7TUFDdEIsQ0FBQyxDQUFDLE9BQU9nQixTQUFTLEVBQUU7UUFDbEJOLE9BQU8sQ0FBQ2pCLEtBQUssQ0FBQywwREFBMEQsRUFBRXVCLFNBQVMsQ0FBQzs7UUFFcEY7UUFDQSxJQUFJQSxTQUFTLFlBQVlDLGNBQWMsSUFBSUQsU0FBUyxDQUFDRSxPQUFPLENBQUNDLFFBQVEsQ0FBQyxNQUFNLENBQUMsRUFBRTtVQUM3RVQsT0FBTyxDQUFDakIsS0FBSyxDQUFDLHdFQUF3RSxFQUFFO1lBQ3RGMkIsSUFBSSxFQUFFSixTQUFTLENBQUNJLElBQUk7WUFDcEJGLE9BQU8sRUFBRUYsU0FBUyxDQUFDRSxPQUFPO1lBQzFCRyxLQUFLLEVBQUVMLFNBQVMsQ0FBQ0s7VUFDbkIsQ0FBQyxDQUFDO1FBQ0o7O1FBRUE7UUFDQXJCLGNBQWMsQ0FBQyxJQUFJLENBQUM7TUFDdEI7SUFDRixDQUFDO0lBQ0RTLElBQUksQ0FBQyxDQUFDO0VBQ1IsQ0FBQyxFQUFFLENBQUNILGVBQWUsQ0FBQyxDQUFDO0VBRXJCLE1BQU1nQixVQUFVLEdBQUcsSUFBQUMsa0JBQVcsRUFDNUIsTUFBT0MsRUFBVSxJQUFLO0lBQ3BCLElBQUksQ0FBQ3ZCLGlCQUFpQixJQUFJLE9BQU9BLGlCQUFpQixDQUFDd0IsU0FBUyxLQUFLLFVBQVUsRUFBRTtJQUM3RWpDLFVBQVUsQ0FBQyxJQUFJLENBQUM7SUFDaEJFLFFBQVEsQ0FBQyxJQUFJLENBQUM7SUFDZCxNQUFNZ0MsTUFBTSxHQUFHLEdBQUdGLEVBQUUsSUFBSUcsSUFBSSxDQUFDQyxHQUFHLENBQUMsQ0FBQyxFQUFFO0lBQ3BDOUIsZ0JBQWdCLENBQUM0QixNQUFNLENBQUM7SUFDeEIsSUFBSTtNQUNGdkIsTUFBTSxDQUFDMEIsSUFBSSxDQUFDLDRDQUE0Q0wsRUFBRSxtQkFBbUJFLE1BQU0sR0FBRyxDQUFDOztNQUV2RjtNQUNBLElBQUksQ0FBQ3pCLGlCQUFpQixJQUFJLE9BQU9BLGlCQUFpQixDQUFDd0IsU0FBUyxLQUFLLFVBQVUsRUFBRTtRQUMzRSxNQUFNLElBQUlLLEtBQUssQ0FBQyw2REFBNkQsQ0FBQztNQUNoRjtNQUVBLE1BQU1DLFVBQVUsR0FBRyxNQUFNOUIsaUJBQWlCLENBQUN3QixTQUFTLENBQUNELEVBQUUsRUFBRXJDLEtBQUssQ0FBQzs7TUFFL0Q7TUFDQSxJQUFJLENBQUM0QyxVQUFVLEVBQUU7UUFDZixNQUFNLElBQUlELEtBQUssQ0FBQyxzQ0FBc0MsQ0FBQztNQUN6RDtNQUVBekMsU0FBUyxDQUFDMEMsVUFBVSxDQUFDO01BQ3JCNUIsTUFBTSxDQUFDMEIsSUFBSSxDQUNULDJDQUEyQ0UsVUFBVSxDQUFDWCxJQUFJLElBQUksU0FBUyxtQkFBbUJNLE1BQU0sR0FDbEcsQ0FBQztNQUNEOUIsVUFBVSxDQUFDLElBQUksQ0FBQztJQUNsQixDQUFDLENBQUMsT0FBT29DLEdBQUcsRUFBRTtNQUNaO01BQ0EsSUFBSUMsUUFBUSxHQUFHLHVCQUF1QjtNQUN0QyxJQUFJQyxZQUFpQixHQUFHLENBQUMsQ0FBQztNQUUxQixNQUFNQyxnQ0FBZ0MsR0FBR0gsR0FBRyxZQUFZRixLQUFLLEtBQzNERSxHQUFHLENBQUNkLE9BQU8sQ0FBQ0MsUUFBUSxDQUFDLGlCQUFpQixDQUFDLElBQ3ZDYSxHQUFHLENBQUNkLE9BQU8sQ0FBQ0MsUUFBUSxDQUFDLFNBQVMsQ0FBQyxJQUMvQmEsR0FBRyxDQUFDZCxPQUFPLENBQUNDLFFBQVEsQ0FBQyxrQkFBa0IsQ0FBQyxJQUN4Q2EsR0FBRyxDQUFDZCxPQUFPLENBQUNDLFFBQVEsQ0FBQyxTQUFTLENBQUMsSUFDL0JhLEdBQUcsQ0FBQ2QsT0FBTyxDQUFDQyxRQUFRLENBQUMsVUFBVSxDQUFDLElBQ2hDYSxHQUFHLENBQUNkLE9BQU8sQ0FBQ0MsUUFBUSxDQUFDLFdBQVcsQ0FBQyxJQUNqQ2EsR0FBRyxDQUFDZCxPQUFPLENBQUNDLFFBQVEsQ0FBQyx5QkFBeUIsQ0FBQyxDQUNoRDtNQUVELElBQUlhLEdBQUcsWUFBWUYsS0FBSyxFQUFFO1FBQ3hCRyxRQUFRLEdBQUdELEdBQUcsQ0FBQ2QsT0FBTztRQUN0QmdCLFlBQVksR0FBRztVQUNiZCxJQUFJLEVBQUVZLEdBQUcsQ0FBQ1osSUFBSTtVQUNkQyxLQUFLLEVBQUVXLEdBQUcsQ0FBQ1gsS0FBSztVQUNoQkgsT0FBTyxFQUFFYyxHQUFHLENBQUNkO1FBQ2YsQ0FBQzs7UUFFRDtRQUNBLElBQUlpQixnQ0FBZ0MsRUFBRTtVQUNwQ0YsUUFBUSxHQUFHLDJDQUEyQztRQUN4RDtNQUNGLENBQUMsTUFBTSxJQUFJLE9BQU9ELEdBQUcsS0FBSyxRQUFRLEVBQUU7UUFDbENDLFFBQVEsR0FBR0QsR0FBRztNQUNoQixDQUFDLE1BQU0sSUFBSUEsR0FBRyxJQUFJLE9BQU9BLEdBQUcsS0FBSyxRQUFRLEVBQUU7UUFDekNDLFFBQVEsR0FBR0QsR0FBRyxDQUFDSSxRQUFRLENBQUMsQ0FBQyxJQUFJLHNCQUFzQjtRQUNuREYsWUFBWSxHQUFHRixHQUFHO01BQ3BCO01BRUF0QyxRQUFRLENBQUN1QyxRQUFRLENBQUM7O01BRWxCO01BQ0EsSUFBSUksZ0JBQWdCLEdBQUcsSUFBSTtNQUMzQixJQUFJLENBQUNGLGdDQUFnQyxFQUFFO1FBQ3JDLElBQUk7VUFDRixNQUFNO1lBQUVHO1VBQW9CLENBQUMsR0FBRyxNQUFBQyxPQUFBLENBQUFDLE9BQUEsR0FBQUMsSUFBQSxPQUFBNUUsdUJBQUEsQ0FBQUosT0FBQSxDQUFhLHlDQUF5QyxHQUFDO1VBQ3ZGNEUsZ0JBQWdCLEdBQUdDLG1CQUFtQixDQUFDakMsV0FBVyxDQUFDLENBQUMsQ0FBQ3FDLFdBQVcsQ0FBQ1QsUUFBUSxFQUFFO1lBQ3pFcEMsYUFBYSxFQUFFNkIsTUFBTTtZQUNyQmlCLE9BQU8sRUFBRSx5QkFBeUI7WUFDbEN6RCxRQUFRLEVBQUVzQyxFQUFFO1lBQ1pyQyxLQUFLLEVBQUVBLEtBQUs7WUFDWitDLFlBQVksRUFBRUE7VUFDaEIsQ0FBQyxDQUFDO1FBQ0osQ0FBQyxDQUFDLE9BQU9wRSxDQUFDLEVBQUU7VUFDVjtVQUNBdUUsZ0JBQWdCLEdBQUcsZ0JBQWdCVixJQUFJLENBQUNDLEdBQUcsQ0FBQyxDQUFDLElBQUlnQixJQUFJLENBQUNDLE1BQU0sQ0FBQyxDQUFDLENBQzNEVCxRQUFRLENBQUMsRUFBRSxDQUFDLENBQ1pVLE1BQU0sQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUU7UUFDbkI7TUFDRixDQUFDLE1BQU07UUFDTDtRQUNBVCxnQkFBZ0IsR0FBRyxnQkFBZ0JWLElBQUksQ0FBQ0MsR0FBRyxDQUFDLENBQUMsRUFBRTtNQUNqRDtNQUNBaEMsVUFBVSxDQUFDeUMsZ0JBQWdCLENBQUM7O01BRTVCO01BQ0EsSUFBSTtRQUNGLElBQUlGLGdDQUFnQyxFQUFFO1VBQ3BDO1VBQ0F6QixPQUFPLENBQUNtQixJQUFJLENBQUMsdURBQXVETCxFQUFFLHNCQUFzQixDQUFDO1FBQy9GLENBQUMsTUFBTTtVQUNMO1VBQ0EsTUFBTXVCLFVBQVUsR0FBR1YsZ0JBQWdCLEdBQy9CLDRCQUE0QkosUUFBUSxtQkFBbUJQLE1BQU0sYUFBYVcsZ0JBQWdCLEVBQUUsR0FDNUYsNEJBQTRCSixRQUFRLG1CQUFtQlAsTUFBTSxnQkFBZ0I7VUFFakZ2QixNQUFNLENBQUNWLEtBQUssQ0FBQ3NELFVBQVUsQ0FBQztVQUN4QnJDLE9BQU8sQ0FBQ2pCLEtBQUssQ0FBQywwQ0FBMEMsRUFBRXVELElBQUksQ0FBQ0MsU0FBUyxDQUFDO1lBQ3ZFaEIsUUFBUTtZQUNScEMsYUFBYSxFQUFFNkIsTUFBTTtZQUNyQi9CLE9BQU8sRUFBRTBDLGdCQUFnQjtZQUN6Qm5ELFFBQVEsRUFBRXNDLEVBQUU7WUFDWnJDLEtBQUssRUFBRUEsS0FBSztZQUNaK0MsWUFBWSxFQUFFQTtVQUNoQixDQUFDLEVBQUUsSUFBSSxFQUFFLENBQUMsQ0FBQyxDQUFDO1FBQ2Q7TUFDRixDQUFDLENBQUMsT0FBT2dCLFFBQVEsRUFBRTtRQUNqQjtRQUNBeEMsT0FBTyxDQUFDakIsS0FBSyxDQUFDLDBDQUEwQyxFQUFFeUQsUUFBUSxDQUFDO1FBQ25FeEMsT0FBTyxDQUFDakIsS0FBSyxDQUFDLDJDQUEyQyxFQUFFd0MsUUFBUSxDQUFDO01BQ3RFO0lBQ0YsQ0FBQyxTQUFTO01BQ1J6QyxVQUFVLENBQUMsS0FBSyxDQUFDO0lBQ25CO0VBQ0YsQ0FBQyxFQUNELENBQUNTLGlCQUFpQixFQUFFZCxLQUFLLEVBQUVnQixNQUFNLENBQ25DLENBQUM7RUFFRCxJQUFBSyxnQkFBUyxFQUFDLE1BQU07SUFDZCxJQUFJdEIsUUFBUSxJQUFJQSxRQUFRLENBQUNpRSxJQUFJLENBQUMsQ0FBQyxLQUFLLEVBQUUsSUFBSWxELGlCQUFpQixJQUFJRixXQUFXLEVBQUU7TUFDMUU7TUFDQSxJQUFJO1FBQ0Z1QixVQUFVLENBQUNwQyxRQUFRLENBQUMsQ0FBQ2tFLEtBQUssQ0FBQ3BCLEdBQUcsSUFBSTtVQUNoQ3RCLE9BQU8sQ0FBQ2pCLEtBQUssQ0FBQyx3REFBd0QsRUFBRXVDLEdBQUcsQ0FBQztVQUM1RTtVQUNBLElBQUlBLEdBQUcsWUFBWWYsY0FBYyxFQUFFO1lBQ2pDUCxPQUFPLENBQUNqQixLQUFLLENBQUMsbURBQW1ELEVBQUU7Y0FDakUyQixJQUFJLEVBQUVZLEdBQUcsQ0FBQ1osSUFBSTtjQUNkRixPQUFPLEVBQUVjLEdBQUcsQ0FBQ2QsT0FBTztjQUNwQkcsS0FBSyxFQUFFVyxHQUFHLENBQUNYO1lBQ2IsQ0FBQyxDQUFDO1VBQ0o7UUFDRixDQUFDLENBQUM7TUFDSixDQUFDLENBQUMsT0FBT2dDLFNBQVMsRUFBRTtRQUNsQjNDLE9BQU8sQ0FBQ2pCLEtBQUssQ0FBQywyREFBMkQsRUFBRTRELFNBQVMsQ0FBQztNQUN2RjtJQUNGO0VBQ0YsQ0FBQyxFQUFFLENBQUNuRSxRQUFRLEVBQUVlLGlCQUFpQixFQUFFRixXQUFXLEVBQUV1QixVQUFVLENBQUMsQ0FBQztFQUUxRCxPQUFPO0lBQ0xsQyxNQUFNO0lBQ05HLE9BQU87SUFDUEUsS0FBSztJQUNMRSxPQUFPO0lBQ1BFLGFBQWE7SUFDYnlELE1BQU0sRUFBRUEsQ0FBQSxLQUFNaEMsVUFBVSxDQUFDcEMsUUFBUTtFQUNuQyxDQUFDO0FBQ0giLCJpZ25vcmVMaXN0IjpbXX0=