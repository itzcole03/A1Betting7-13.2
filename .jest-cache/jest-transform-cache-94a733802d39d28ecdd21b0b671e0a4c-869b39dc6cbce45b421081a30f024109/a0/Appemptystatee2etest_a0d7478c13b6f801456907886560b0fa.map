{"version":3,"names":["_getJestObj","mock","__esModule","useSimplePropOllamaData","state","actions","fetchData","jest","fn","setIsLoading","setError","setLoadingMessage","setProjections","fetchFeaturedProps","fetchBatchPredictions","mockProps","usePropOllamaState","projections","isLoading","filters","searchTerm","selectedSport","sorting","sortBy","displayOptions","expandedRowKey","useVirtualization","selectedProps","entryAmount","enhancedAnalysisCache","Map","loadingAnalysis","Set","connectionHealth","isHealthy","latency","lastChecked","Date","now","loadingStage","stage","loadingMessage","upcomingGames","selectedGame","updateFilters","updateSorting","setSelectedGame","updateDisplayOptions","removeSelectedProp","setEntryAmount","setSelectedProps","_react","require","_react2","backendDiscoveryModule","_interopRequireWildcard","getBackendUrlModule","_backend","_jsxRuntime","e","t","WeakMap","r","n","o","i","f","__proto__","default","has","get","set","hasOwnProperty","call","Object","defineProperty","getOwnPropertyDescriptor","describe","beforeEach","clearAllMocks","setupBackendMocks","emptyFeaturedProps","spyOn","mockReturnValue","mockResolvedValue","window","localStorage","configurable","value","key","JSON","stringify","id","email","role","it","useFakeTimers","history","pushState","App","Promise","resolve","then","act","render","jsx","runAllTimers","emptyState","screen","findByTestId","timeout","err","findByText","expect","toBeDefined","useRealTimers"],"sources":["App.empty-state.e2e.test.tsx"],"sourcesContent":["// Mock useSimplePropOllamaData to provide all required actions\r\njest.mock('../components/hooks/useSimplePropOllamaData', () => ({\r\n  __esModule: true,\r\n  useSimplePropOllamaData: ({ state, actions }: any) => ({\r\n    fetchData: jest.fn(),\r\n    // Removed invalid import inside object\r\n    // actions object with all required functions\r\n    actions: {\r\n      setIsLoading: jest.fn(),\r\n      setError: jest.fn(),\r\n      setLoadingMessage: jest.fn(),\r\n      setProjections: jest.fn(),\r\n    },\r\n  }),\r\n}));\r\n// Mock FeaturedPropsService to return empty array for all fetches\r\njest.mock('../services/unified/FeaturedPropsService', () => ({\r\n  __esModule: true,\r\n  fetchFeaturedProps: jest.fn(async () => []),\r\n  fetchBatchPredictions: jest.fn(async () => []),\r\n  mockProps: [],\r\n}));\r\n\r\nimport { render, screen } from '@testing-library/react';\r\nimport { act } from 'react';\r\nimport '../../../jest.setup.e2e.js';\r\nimport * as backendDiscoveryModule from '../services/backendDiscovery';\r\nimport * as getBackendUrlModule from '../utils/getBackendUrl';\r\nimport { setupBackendMocks } from './mocks/backend';\r\njest.mock('../components/hooks/usePropOllamaState', () => ({\r\n  __esModule: true,\r\n  usePropOllamaState: () => [\r\n    {\r\n      projections: [],\r\n      isLoading: false,\r\n      filters: { searchTerm: '', selectedSport: 'MLB' },\r\n      sorting: { sortBy: 'default' },\r\n      displayOptions: { expandedRowKey: null, useVirtualization: false },\r\n      selectedProps: [],\r\n      entryAmount: 0,\r\n      enhancedAnalysisCache: new Map(),\r\n      loadingAnalysis: new Set(),\r\n      connectionHealth: { isHealthy: true, latency: 0, lastChecked: Date.now() },\r\n      loadingStage: { stage: 'complete' },\r\n      loadingMessage: '',\r\n      upcomingGames: [],\r\n      selectedGame: null,\r\n    },\r\n    {\r\n      updateFilters: jest.fn(),\r\n      updateSorting: jest.fn(),\r\n      setSelectedGame: jest.fn(),\r\n      updateDisplayOptions: jest.fn(),\r\n      removeSelectedProp: jest.fn(),\r\n      setEntryAmount: jest.fn(),\r\n      setSelectedProps: jest.fn(),\r\n      actions: {\r\n        setIsLoading: jest.fn(),\r\n        setError: jest.fn(),\r\n        setLoadingMessage: jest.fn(),\r\n        setProjections: jest.fn(),\r\n      },\r\n    },\r\n  ],\r\n}));\r\n\r\ndescribe('App E2E - Empty State', () => {\r\n  beforeEach(() => {\r\n    jest.clearAllMocks();\r\n\r\n    // Setup backend mocks\r\n    setupBackendMocks({ emptyFeaturedProps: true });\r\n\r\n    // Mock getBackendUrl to return a consistent URL\r\n    jest.spyOn(getBackendUrlModule, 'getBackendUrl').mockReturnValue('http://localhost:8000');\r\n    // Mock discoverBackend to resolve to null by default\r\n    if (!Object.getOwnPropertyDescriptor(backendDiscoveryModule, 'discoverBackend')?.get) {\r\n      jest.spyOn(backendDiscoveryModule, 'discoverBackend').mockResolvedValue(null);\r\n    }\r\n\r\n    // Mock localStorage.getItem using Object.defineProperty for Jest compatibility\r\n    Object.defineProperty(window.localStorage, 'getItem', {\r\n      configurable: true,\r\n      value: (key: string) => {\r\n        if (key === 'onboardingComplete') return 'true';\r\n        if (key === 'user')\r\n          return JSON.stringify({ id: 'test', email: 'test@example.com', role: 'user' });\r\n        if (key === 'token') return 'test-token';\r\n        return null;\r\n      },\r\n    });\r\n  });\r\n\r\n  it('shows empty state if no enhanced bets are returned', async () => {\r\n    jest.useFakeTimers();\r\n    try {\r\n      // Ensure the app loads the legacy PropOllama route so the empty-state component is rendered\r\n      window.history.pushState({}, 'Test', '/legacy-propollama');\r\n      const App = (await import('../App')).default;\r\n      await act(async () => {\r\n        render(<App />);\r\n        jest.runAllTimers();\r\n      });\r\n      // Prefer a data-testid if present, otherwise fallback to text match\r\n      let emptyState = null;\r\n      try {\r\n        emptyState = await screen.findByTestId('empty-props', {}, { timeout: 2000 });\r\n      } catch (err) {\r\n        // Try alternate testid used by some components\r\n        try {\r\n          emptyState = await screen.findByTestId('empty-state', {}, { timeout: 2000 });\r\n  } catch {\r\n          // fallback to text matcher used historically\r\n          emptyState = await screen.findByText(/No props found|No enhanced props|No results/i, {}, { timeout: 5000 });\r\n        }\r\n      }\r\n      expect(emptyState).toBeDefined();\r\n    } finally {\r\n      jest.useRealTimers();\r\n    }\r\n  }, 10000);\r\n});\r\n"],"mappings":"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","ignoreList":[]}