6fb3dfdeee82bca4606c963b60f15b66
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = exports.UnifiedDataService = void 0;
var _BaseService = require("./BaseService");
var _UnifiedCache = require("./UnifiedCache");
var _UnifiedServiceRegistry = require("./UnifiedServiceRegistry");
var _UnifiedDataService;
function isGameData(obj) {
  return typeof obj === 'object' && obj !== null && typeof obj.gameId === 'string' && typeof obj.homeTeam === 'string' && typeof obj.awayTeam === 'string' && typeof obj.startTime === 'string';
}
function isSportsData(obj) {
  return typeof obj === 'object' && obj !== null && typeof obj.sport === 'string' && Array.isArray(obj.games) && obj.games.every(isGameData);
}
function isPlayerStat(obj) {
  return typeof obj === 'object' && obj !== null && typeof obj.statType === 'string' && typeof obj.value === 'number';
}
function isPlayerStats(obj) {
  return typeof obj === 'object' && obj !== null && typeof obj.playerId === 'string' && Array.isArray(obj.stats) && obj.stats.every(isPlayerStat);
}
function isRosterMember(obj) {
  return typeof obj === 'object' && obj !== null && typeof obj.playerId === 'string' && typeof obj.name === 'string' && typeof obj.position === 'string';
}
function isTeamStat(obj) {
  return typeof obj === 'object' && obj !== null && typeof obj.statType === 'string' && typeof obj.value === 'number';
}
function isTeamData(obj) {
  return typeof obj === 'object' && obj !== null && typeof obj.teamId === 'string' && Array.isArray(obj.roster) && obj.roster.every(isRosterMember) && Array.isArray(obj.stats) && obj.stats.every(isTeamStat);
}
// Type interfaces for returned data

class UnifiedDataService extends _BaseService.BaseService {
  constructor() {
    super('UnifiedDataService', _UnifiedServiceRegistry.UnifiedServiceRegistry.getInstance());
    this.memoryCache = new Map();
    this.unifiedCache = void 0;
    this.unifiedCache = _UnifiedCache.UnifiedCache.getInstance();
  }
  static getInstance() {
    if (!UnifiedDataService.instance) {
      UnifiedDataService.instance = new UnifiedDataService();
    }
    return UnifiedDataService.instance;
  }

  /**
   * Cache data with TTL (Stabilization Fix)
   * Method expected by monitoring services that was missing
   */
  async cacheData(key, value, ttl) {
    this.memoryCache.set(key, value);
    // Also cache in unified cache for compatibility
    this.unifiedCache.set(key, value, ttl);
    this.logger.info('Data cached', {
      key
    });
  }

  /**
   * Get cached data (Stabilization Fix)
   * Method expected by monitoring services that was missing
   */
  async getCachedData(key) {
    const result = this.memoryCache.get(key);
    this.logger.info('Cache accessed', {
      key,
      hit: result !== undefined
    });
    return result;
  }
  async fetchSportsData(sport, date) {
    try {
      const cacheKey = `sports_data_${sport}_${date || 'today'}`;
      const cached = this.unifiedCache.get(cacheKey);
      if (cached && isSportsData(cached)) return cached;
      const response = await this.get(`/api/sports/${sport}${date ? `?date=${date}` : ''}`);
      this.unifiedCache.set(cacheKey, response, 300000); // 5 min cache
      if (isSportsData(response)) return response;
      throw new Error('Invalid sports data response');
    } catch (error) {
      this.logger.error('Failed to fetch sports data', error);
      throw error;
    }
  }
  async fetchPlayerStats(playerId, sport) {
    try {
      const cacheKey = `player_stats_${playerId}_${sport}`;
      const cached = this.unifiedCache.get(cacheKey);
      if (cached && isPlayerStats(cached)) return cached;
      const response = await this.get(`/api/players/${playerId}/stats?sport=${sport}`);
      this.unifiedCache.set(cacheKey, response, 600000); // 10 min cache
      if (isPlayerStats(response)) return response;
      throw new Error('Invalid player stats response');
    } catch (error) {
      this.logger.error('Failed to fetch player stats', error);
      throw error;
    }
  }
  async fetchTeamData(teamId, sport) {
    try {
      const cacheKey = `team_data_${teamId}_${sport}`;
      const cached = this.unifiedCache.get(cacheKey);
      if (cached && isTeamData(cached)) return cached;
      const response = await this.get(`/api/teams/${teamId}?sport=${sport}`);
      this.unifiedCache.set(cacheKey, response, 600000); // 10 min cache
      if (isTeamData(response)) return response;
      throw new Error('Invalid team data response');
    } catch (error) {
      this.logger.error('Failed to fetch team data', error);
      throw error;
    }
  }
  async fetchLiveData(sport) {
    try {
      // No caching for live data
      const response = await this.get(`/api/live/${sport}`);
      if (typeof response !== 'object' || response === null) {
        throw new Error('Invalid live data response');
      }
      return response;
    } catch (error) {
      this.logger.error('Failed to fetch live data', error);
      throw error;
    }
  }
  async searchData(query, filters = {}) {
    try {
      const cacheKey = `search_${query}_${JSON.stringify(filters)}`;
      const cached = this.unifiedCache.get(cacheKey);
      if (cached) return cached;
      const response = await this.post('/api/search', {
        query,
        filters
      });
      if (typeof response !== 'object' || response === null) {
        throw new Error('Invalid search data response');
      }
      this.unifiedCache.set(cacheKey, response, 180000); // 3 min cache
      return response;
    } catch (error) {
      this.logger.error('Failed to search data', error);
      throw error;
    }
  }
  clearCache(pattern) {
    if (pattern) {
      const keys = this.unifiedCache.getKeys().filter(key => key.includes(pattern));
      keys.forEach(key => this.unifiedCache.delete(key));
    } else {
      this.unifiedCache.clear();
    }
    this.logger.info('Cache cleared', {
      pattern
    });
  }
  async get(url) {
    return this.api.get(url).then(response => response.data);
  }
  async post(url, data) {
    return this.api.post(url, data).then(response => response.data);
  }
}
exports.UnifiedDataService = UnifiedDataService;
_UnifiedDataService = UnifiedDataService;
UnifiedDataService.instance = void 0;
var _default = exports.default = UnifiedDataService;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfQmFzZVNlcnZpY2UiLCJyZXF1aXJlIiwiX1VuaWZpZWRDYWNoZSIsIl9VbmlmaWVkU2VydmljZVJlZ2lzdHJ5IiwiX1VuaWZpZWREYXRhU2VydmljZSIsImlzR2FtZURhdGEiLCJvYmoiLCJnYW1lSWQiLCJob21lVGVhbSIsImF3YXlUZWFtIiwic3RhcnRUaW1lIiwiaXNTcG9ydHNEYXRhIiwic3BvcnQiLCJBcnJheSIsImlzQXJyYXkiLCJnYW1lcyIsImV2ZXJ5IiwiaXNQbGF5ZXJTdGF0Iiwic3RhdFR5cGUiLCJ2YWx1ZSIsImlzUGxheWVyU3RhdHMiLCJwbGF5ZXJJZCIsInN0YXRzIiwiaXNSb3N0ZXJNZW1iZXIiLCJuYW1lIiwicG9zaXRpb24iLCJpc1RlYW1TdGF0IiwiaXNUZWFtRGF0YSIsInRlYW1JZCIsInJvc3RlciIsIlVuaWZpZWREYXRhU2VydmljZSIsIkJhc2VTZXJ2aWNlIiwiY29uc3RydWN0b3IiLCJVbmlmaWVkU2VydmljZVJlZ2lzdHJ5IiwiZ2V0SW5zdGFuY2UiLCJtZW1vcnlDYWNoZSIsIk1hcCIsInVuaWZpZWRDYWNoZSIsIlVuaWZpZWRDYWNoZSIsImluc3RhbmNlIiwiY2FjaGVEYXRhIiwia2V5IiwidHRsIiwic2V0IiwibG9nZ2VyIiwiaW5mbyIsImdldENhY2hlZERhdGEiLCJyZXN1bHQiLCJnZXQiLCJoaXQiLCJ1bmRlZmluZWQiLCJmZXRjaFNwb3J0c0RhdGEiLCJkYXRlIiwiY2FjaGVLZXkiLCJjYWNoZWQiLCJyZXNwb25zZSIsIkVycm9yIiwiZXJyb3IiLCJmZXRjaFBsYXllclN0YXRzIiwiZmV0Y2hUZWFtRGF0YSIsImZldGNoTGl2ZURhdGEiLCJzZWFyY2hEYXRhIiwicXVlcnkiLCJmaWx0ZXJzIiwiSlNPTiIsInN0cmluZ2lmeSIsInBvc3QiLCJjbGVhckNhY2hlIiwicGF0dGVybiIsImtleXMiLCJnZXRLZXlzIiwiZmlsdGVyIiwiaW5jbHVkZXMiLCJmb3JFYWNoIiwiZGVsZXRlIiwiY2xlYXIiLCJ1cmwiLCJhcGkiLCJ0aGVuIiwiZGF0YSIsImV4cG9ydHMiLCJfZGVmYXVsdCIsImRlZmF1bHQiXSwic291cmNlcyI6WyJVbmlmaWVkRGF0YVNlcnZpY2UudHMiXSwic291cmNlc0NvbnRlbnQiOlsiZnVuY3Rpb24gaXNHYW1lRGF0YShvYmo6IHVua25vd24pOiBvYmogaXMgR2FtZURhdGEge1xyXG4gIHJldHVybiAoXHJcbiAgICB0eXBlb2Ygb2JqID09PSAnb2JqZWN0JyAmJlxyXG4gICAgb2JqICE9PSBudWxsICYmXHJcbiAgICB0eXBlb2YgKG9iaiBhcyBHYW1lRGF0YSkuZ2FtZUlkID09PSAnc3RyaW5nJyAmJlxyXG4gICAgdHlwZW9mIChvYmogYXMgR2FtZURhdGEpLmhvbWVUZWFtID09PSAnc3RyaW5nJyAmJlxyXG4gICAgdHlwZW9mIChvYmogYXMgR2FtZURhdGEpLmF3YXlUZWFtID09PSAnc3RyaW5nJyAmJlxyXG4gICAgdHlwZW9mIChvYmogYXMgR2FtZURhdGEpLnN0YXJ0VGltZSA9PT0gJ3N0cmluZydcclxuICApO1xyXG59XHJcbmZ1bmN0aW9uIGlzU3BvcnRzRGF0YShvYmo6IHVua25vd24pOiBvYmogaXMgU3BvcnRzRGF0YSB7XHJcbiAgcmV0dXJuIChcclxuICAgIHR5cGVvZiBvYmogPT09ICdvYmplY3QnICYmXHJcbiAgICBvYmogIT09IG51bGwgJiZcclxuICAgIHR5cGVvZiAob2JqIGFzIFNwb3J0c0RhdGEpLnNwb3J0ID09PSAnc3RyaW5nJyAmJlxyXG4gICAgQXJyYXkuaXNBcnJheSgob2JqIGFzIFNwb3J0c0RhdGEpLmdhbWVzKSAmJlxyXG4gICAgKG9iaiBhcyBTcG9ydHNEYXRhKS5nYW1lcy5ldmVyeShpc0dhbWVEYXRhKVxyXG4gICk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGlzUGxheWVyU3RhdChvYmo6IHVua25vd24pOiBvYmogaXMgUGxheWVyU3RhdCB7XHJcbiAgcmV0dXJuIChcclxuICAgIHR5cGVvZiBvYmogPT09ICdvYmplY3QnICYmXHJcbiAgICBvYmogIT09IG51bGwgJiZcclxuICAgIHR5cGVvZiAob2JqIGFzIFBsYXllclN0YXQpLnN0YXRUeXBlID09PSAnc3RyaW5nJyAmJlxyXG4gICAgdHlwZW9mIChvYmogYXMgUGxheWVyU3RhdCkudmFsdWUgPT09ICdudW1iZXInXHJcbiAgKTtcclxufVxyXG5mdW5jdGlvbiBpc1BsYXllclN0YXRzKG9iajogdW5rbm93bik6IG9iaiBpcyBQbGF5ZXJTdGF0cyB7XHJcbiAgcmV0dXJuIChcclxuICAgIHR5cGVvZiBvYmogPT09ICdvYmplY3QnICYmXHJcbiAgICBvYmogIT09IG51bGwgJiZcclxuICAgIHR5cGVvZiAob2JqIGFzIFBsYXllclN0YXRzKS5wbGF5ZXJJZCA9PT0gJ3N0cmluZycgJiZcclxuICAgIEFycmF5LmlzQXJyYXkoKG9iaiBhcyBQbGF5ZXJTdGF0cykuc3RhdHMpICYmXHJcbiAgICAob2JqIGFzIFBsYXllclN0YXRzKS5zdGF0cy5ldmVyeShpc1BsYXllclN0YXQpXHJcbiAgKTtcclxufVxyXG5cclxuZnVuY3Rpb24gaXNSb3N0ZXJNZW1iZXIob2JqOiB1bmtub3duKTogb2JqIGlzIFJvc3Rlck1lbWJlciB7XHJcbiAgcmV0dXJuIChcclxuICAgIHR5cGVvZiBvYmogPT09ICdvYmplY3QnICYmXHJcbiAgICBvYmogIT09IG51bGwgJiZcclxuICAgIHR5cGVvZiAob2JqIGFzIFJvc3Rlck1lbWJlcikucGxheWVySWQgPT09ICdzdHJpbmcnICYmXHJcbiAgICB0eXBlb2YgKG9iaiBhcyBSb3N0ZXJNZW1iZXIpLm5hbWUgPT09ICdzdHJpbmcnICYmXHJcbiAgICB0eXBlb2YgKG9iaiBhcyBSb3N0ZXJNZW1iZXIpLnBvc2l0aW9uID09PSAnc3RyaW5nJ1xyXG4gICk7XHJcbn1cclxuZnVuY3Rpb24gaXNUZWFtU3RhdChvYmo6IHVua25vd24pOiBvYmogaXMgVGVhbVN0YXQge1xyXG4gIHJldHVybiAoXHJcbiAgICB0eXBlb2Ygb2JqID09PSAnb2JqZWN0JyAmJlxyXG4gICAgb2JqICE9PSBudWxsICYmXHJcbiAgICB0eXBlb2YgKG9iaiBhcyBUZWFtU3RhdCkuc3RhdFR5cGUgPT09ICdzdHJpbmcnICYmXHJcbiAgICB0eXBlb2YgKG9iaiBhcyBUZWFtU3RhdCkudmFsdWUgPT09ICdudW1iZXInXHJcbiAgKTtcclxufVxyXG5mdW5jdGlvbiBpc1RlYW1EYXRhKG9iajogdW5rbm93bik6IG9iaiBpcyBUZWFtRGF0YSB7XHJcbiAgcmV0dXJuIChcclxuICAgIHR5cGVvZiBvYmogPT09ICdvYmplY3QnICYmXHJcbiAgICBvYmogIT09IG51bGwgJiZcclxuICAgIHR5cGVvZiAob2JqIGFzIFRlYW1EYXRhKS50ZWFtSWQgPT09ICdzdHJpbmcnICYmXHJcbiAgICBBcnJheS5pc0FycmF5KChvYmogYXMgVGVhbURhdGEpLnJvc3RlcikgJiZcclxuICAgIChvYmogYXMgVGVhbURhdGEpLnJvc3Rlci5ldmVyeShpc1Jvc3Rlck1lbWJlcikgJiZcclxuICAgIEFycmF5LmlzQXJyYXkoKG9iaiBhcyBUZWFtRGF0YSkuc3RhdHMpICYmXHJcbiAgICAob2JqIGFzIFRlYW1EYXRhKS5zdGF0cy5ldmVyeShpc1RlYW1TdGF0KVxyXG4gICk7XHJcbn1cclxuLy8gVHlwZSBpbnRlcmZhY2VzIGZvciByZXR1cm5lZCBkYXRhXHJcbmV4cG9ydCB0eXBlIEdhbWVEYXRhID0ge1xyXG4gIGdhbWVJZDogc3RyaW5nO1xyXG4gIGhvbWVUZWFtOiBzdHJpbmc7XHJcbiAgYXdheVRlYW06IHN0cmluZztcclxuICBzdGFydFRpbWU6IHN0cmluZztcclxuICBba2V5OiBzdHJpbmddOiBzdHJpbmcgfCBudW1iZXIgfCBib29sZWFuIHwgdW5kZWZpbmVkO1xyXG59O1xyXG5leHBvcnQgaW50ZXJmYWNlIFNwb3J0c0RhdGEge1xyXG4gIHNwb3J0OiBzdHJpbmc7XHJcbiAgZ2FtZXM6IEdhbWVEYXRhW107XHJcbn1cclxuXHJcbmV4cG9ydCB0eXBlIFBsYXllclN0YXQgPSB7XHJcbiAgc3RhdFR5cGU6IHN0cmluZztcclxuICB2YWx1ZTogbnVtYmVyO1xyXG4gIFtrZXk6IHN0cmluZ106IHN0cmluZyB8IG51bWJlciB8IGJvb2xlYW4gfCB1bmRlZmluZWQ7XHJcbn07XHJcbmV4cG9ydCBpbnRlcmZhY2UgUGxheWVyU3RhdHMge1xyXG4gIHBsYXllcklkOiBzdHJpbmc7XHJcbiAgc3RhdHM6IFBsYXllclN0YXRbXTtcclxufVxyXG5cclxuZXhwb3J0IHR5cGUgUm9zdGVyTWVtYmVyID0ge1xyXG4gIHBsYXllcklkOiBzdHJpbmc7XHJcbiAgbmFtZTogc3RyaW5nO1xyXG4gIHBvc2l0aW9uOiBzdHJpbmc7XHJcbiAgW2tleTogc3RyaW5nXTogc3RyaW5nIHwgbnVtYmVyIHwgYm9vbGVhbiB8IHVuZGVmaW5lZDtcclxufTtcclxuZXhwb3J0IHR5cGUgVGVhbVN0YXQgPSB7XHJcbiAgc3RhdFR5cGU6IHN0cmluZztcclxuICB2YWx1ZTogbnVtYmVyO1xyXG4gIFtrZXk6IHN0cmluZ106IHN0cmluZyB8IG51bWJlciB8IGJvb2xlYW4gfCB1bmRlZmluZWQ7XHJcbn07XHJcbmV4cG9ydCBpbnRlcmZhY2UgVGVhbURhdGEge1xyXG4gIHRlYW1JZDogc3RyaW5nO1xyXG4gIHJvc3RlcjogUm9zdGVyTWVtYmVyW107XHJcbiAgc3RhdHM6IFRlYW1TdGF0W107XHJcbn1cclxuaW1wb3J0IHsgQmFzZVNlcnZpY2UgfSBmcm9tICcuL0Jhc2VTZXJ2aWNlJztcclxuaW1wb3J0IHsgVW5pZmllZENhY2hlIH0gZnJvbSAnLi9VbmlmaWVkQ2FjaGUnO1xyXG5pbXBvcnQgeyBVbmlmaWVkU2VydmljZVJlZ2lzdHJ5IH0gZnJvbSAnLi9VbmlmaWVkU2VydmljZVJlZ2lzdHJ5JztcclxuXHJcbmV4cG9ydCBjbGFzcyBVbmlmaWVkRGF0YVNlcnZpY2UgZXh0ZW5kcyBCYXNlU2VydmljZSB7XHJcbiAgcHJpdmF0ZSBzdGF0aWMgaW5zdGFuY2U6IFVuaWZpZWREYXRhU2VydmljZTtcclxuICBwcml2YXRlIG1lbW9yeUNhY2hlID0gbmV3IE1hcDxzdHJpbmcsIHVua25vd24+KCk7XHJcbiAgcHJvdGVjdGVkIHVuaWZpZWRDYWNoZTogVW5pZmllZENhY2hlO1xyXG5cclxuICBwcm90ZWN0ZWQgY29uc3RydWN0b3IoKSB7XHJcbiAgICBzdXBlcignVW5pZmllZERhdGFTZXJ2aWNlJywgVW5pZmllZFNlcnZpY2VSZWdpc3RyeS5nZXRJbnN0YW5jZSgpKTtcclxuICAgIHRoaXMudW5pZmllZENhY2hlID0gVW5pZmllZENhY2hlLmdldEluc3RhbmNlKCk7XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgZ2V0SW5zdGFuY2UoKTogVW5pZmllZERhdGFTZXJ2aWNlIHtcclxuICAgIGlmICghVW5pZmllZERhdGFTZXJ2aWNlLmluc3RhbmNlKSB7XHJcbiAgICAgIFVuaWZpZWREYXRhU2VydmljZS5pbnN0YW5jZSA9IG5ldyBVbmlmaWVkRGF0YVNlcnZpY2UoKTtcclxuICAgIH1cclxuICAgIHJldHVybiBVbmlmaWVkRGF0YVNlcnZpY2UuaW5zdGFuY2U7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBDYWNoZSBkYXRhIHdpdGggVFRMIChTdGFiaWxpemF0aW9uIEZpeClcclxuICAgKiBNZXRob2QgZXhwZWN0ZWQgYnkgbW9uaXRvcmluZyBzZXJ2aWNlcyB0aGF0IHdhcyBtaXNzaW5nXHJcbiAgICovXHJcbiAgYXN5bmMgY2FjaGVEYXRhPFQ+KGtleTogc3RyaW5nLCB2YWx1ZTogVCwgdHRsPzogbnVtYmVyKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICB0aGlzLm1lbW9yeUNhY2hlLnNldChrZXksIHZhbHVlKTtcclxuICAgIC8vIEFsc28gY2FjaGUgaW4gdW5pZmllZCBjYWNoZSBmb3IgY29tcGF0aWJpbGl0eVxyXG4gICAgdGhpcy51bmlmaWVkQ2FjaGUuc2V0KGtleSwgdmFsdWUsIHR0bCk7XHJcbiAgICB0aGlzLmxvZ2dlci5pbmZvKCdEYXRhIGNhY2hlZCcsIHsga2V5IH0pO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogR2V0IGNhY2hlZCBkYXRhIChTdGFiaWxpemF0aW9uIEZpeClcclxuICAgKiBNZXRob2QgZXhwZWN0ZWQgYnkgbW9uaXRvcmluZyBzZXJ2aWNlcyB0aGF0IHdhcyBtaXNzaW5nXHJcbiAgICovXHJcbiAgYXN5bmMgZ2V0Q2FjaGVkRGF0YTxUPihrZXk6IHN0cmluZyk6IFByb21pc2U8VCB8IHVuZGVmaW5lZD4ge1xyXG4gICAgY29uc3QgcmVzdWx0ID0gdGhpcy5tZW1vcnlDYWNoZS5nZXQoa2V5KSBhcyBUIHwgdW5kZWZpbmVkO1xyXG4gICAgdGhpcy5sb2dnZXIuaW5mbygnQ2FjaGUgYWNjZXNzZWQnLCB7IGtleSwgaGl0OiByZXN1bHQgIT09IHVuZGVmaW5lZCB9KTtcclxuICAgIHJldHVybiByZXN1bHQ7XHJcbiAgfVxyXG5cclxuICBhc3luYyBmZXRjaFNwb3J0c0RhdGEoc3BvcnQ6IHN0cmluZywgZGF0ZT86IHN0cmluZyk6IFByb21pc2U8U3BvcnRzRGF0YT4ge1xyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc3QgY2FjaGVLZXkgPSBgc3BvcnRzX2RhdGFfJHtzcG9ydH1fJHtkYXRlIHx8ICd0b2RheSd9YDtcclxuICAgICAgY29uc3QgY2FjaGVkID0gdGhpcy51bmlmaWVkQ2FjaGUuZ2V0PFNwb3J0c0RhdGE+KGNhY2hlS2V5KTtcclxuICAgICAgaWYgKGNhY2hlZCAmJiBpc1Nwb3J0c0RhdGEoY2FjaGVkKSkgcmV0dXJuIGNhY2hlZDtcclxuXHJcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5nZXQ8U3BvcnRzRGF0YT4oXHJcbiAgICAgICAgYC9hcGkvc3BvcnRzLyR7c3BvcnR9JHtkYXRlID8gYD9kYXRlPSR7ZGF0ZX1gIDogJyd9YFxyXG4gICAgICApO1xyXG4gICAgICB0aGlzLnVuaWZpZWRDYWNoZS5zZXQoY2FjaGVLZXksIHJlc3BvbnNlLCAzMDAwMDApOyAvLyA1IG1pbiBjYWNoZVxyXG4gICAgICBpZiAoaXNTcG9ydHNEYXRhKHJlc3BvbnNlKSkgcmV0dXJuIHJlc3BvbnNlO1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgc3BvcnRzIGRhdGEgcmVzcG9uc2UnKTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIHRoaXMubG9nZ2VyLmVycm9yKCdGYWlsZWQgdG8gZmV0Y2ggc3BvcnRzIGRhdGEnLCBlcnJvcik7XHJcbiAgICAgIHRocm93IGVycm9yO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgYXN5bmMgZmV0Y2hQbGF5ZXJTdGF0cyhwbGF5ZXJJZDogc3RyaW5nLCBzcG9ydDogc3RyaW5nKTogUHJvbWlzZTxQbGF5ZXJTdGF0cz4ge1xyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc3QgY2FjaGVLZXkgPSBgcGxheWVyX3N0YXRzXyR7cGxheWVySWR9XyR7c3BvcnR9YDtcclxuICAgICAgY29uc3QgY2FjaGVkID0gdGhpcy51bmlmaWVkQ2FjaGUuZ2V0PFBsYXllclN0YXRzPihjYWNoZUtleSk7XHJcbiAgICAgIGlmIChjYWNoZWQgJiYgaXNQbGF5ZXJTdGF0cyhjYWNoZWQpKSByZXR1cm4gY2FjaGVkO1xyXG5cclxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLmdldDxQbGF5ZXJTdGF0cz4oYC9hcGkvcGxheWVycy8ke3BsYXllcklkfS9zdGF0cz9zcG9ydD0ke3Nwb3J0fWApO1xyXG4gICAgICB0aGlzLnVuaWZpZWRDYWNoZS5zZXQoY2FjaGVLZXksIHJlc3BvbnNlLCA2MDAwMDApOyAvLyAxMCBtaW4gY2FjaGVcclxuICAgICAgaWYgKGlzUGxheWVyU3RhdHMocmVzcG9uc2UpKSByZXR1cm4gcmVzcG9uc2U7XHJcbiAgICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBwbGF5ZXIgc3RhdHMgcmVzcG9uc2UnKTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIHRoaXMubG9nZ2VyLmVycm9yKCdGYWlsZWQgdG8gZmV0Y2ggcGxheWVyIHN0YXRzJywgZXJyb3IpO1xyXG4gICAgICB0aHJvdyBlcnJvcjtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGFzeW5jIGZldGNoVGVhbURhdGEodGVhbUlkOiBzdHJpbmcsIHNwb3J0OiBzdHJpbmcpOiBQcm9taXNlPFRlYW1EYXRhPiB7XHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zdCBjYWNoZUtleSA9IGB0ZWFtX2RhdGFfJHt0ZWFtSWR9XyR7c3BvcnR9YDtcclxuICAgICAgY29uc3QgY2FjaGVkID0gdGhpcy51bmlmaWVkQ2FjaGUuZ2V0PFRlYW1EYXRhPihjYWNoZUtleSk7XHJcbiAgICAgIGlmIChjYWNoZWQgJiYgaXNUZWFtRGF0YShjYWNoZWQpKSByZXR1cm4gY2FjaGVkO1xyXG5cclxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLmdldDxUZWFtRGF0YT4oYC9hcGkvdGVhbXMvJHt0ZWFtSWR9P3Nwb3J0PSR7c3BvcnR9YCk7XHJcbiAgICAgIHRoaXMudW5pZmllZENhY2hlLnNldChjYWNoZUtleSwgcmVzcG9uc2UsIDYwMDAwMCk7IC8vIDEwIG1pbiBjYWNoZVxyXG4gICAgICBpZiAoaXNUZWFtRGF0YShyZXNwb25zZSkpIHJldHVybiByZXNwb25zZTtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIHRlYW0gZGF0YSByZXNwb25zZScpO1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgdGhpcy5sb2dnZXIuZXJyb3IoJ0ZhaWxlZCB0byBmZXRjaCB0ZWFtIGRhdGEnLCBlcnJvcik7XHJcbiAgICAgIHRocm93IGVycm9yO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgYXN5bmMgZmV0Y2hMaXZlRGF0YTxUIGV4dGVuZHMgb2JqZWN0ID0gR2FtZURhdGEgfCBQbGF5ZXJTdGF0IHwgVGVhbVN0YXQ+KFxyXG4gICAgc3BvcnQ6IHN0cmluZ1xyXG4gICk6IFByb21pc2U8VD4ge1xyXG4gICAgdHJ5IHtcclxuICAgICAgLy8gTm8gY2FjaGluZyBmb3IgbGl2ZSBkYXRhXHJcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5nZXQ8VD4oYC9hcGkvbGl2ZS8ke3Nwb3J0fWApO1xyXG4gICAgICBpZiAodHlwZW9mIHJlc3BvbnNlICE9PSAnb2JqZWN0JyB8fCByZXNwb25zZSA9PT0gbnVsbCkge1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBsaXZlIGRhdGEgcmVzcG9uc2UnKTtcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gcmVzcG9uc2U7XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICB0aGlzLmxvZ2dlci5lcnJvcignRmFpbGVkIHRvIGZldGNoIGxpdmUgZGF0YScsIGVycm9yKTtcclxuICAgICAgdGhyb3cgZXJyb3I7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBhc3luYyBzZWFyY2hEYXRhPFQgZXh0ZW5kcyBvYmplY3QgPSBHYW1lRGF0YVtdPihcclxuICAgIHF1ZXJ5OiBzdHJpbmcsXHJcbiAgICBmaWx0ZXJzOiBQYXJ0aWFsPEdhbWVEYXRhIHwgUGxheWVyU3RhdCB8IFRlYW1TdGF0PiA9IHt9XHJcbiAgKTogUHJvbWlzZTxUPiB7XHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zdCBjYWNoZUtleSA9IGBzZWFyY2hfJHtxdWVyeX1fJHtKU09OLnN0cmluZ2lmeShmaWx0ZXJzKX1gO1xyXG4gICAgICBjb25zdCBjYWNoZWQgPSB0aGlzLnVuaWZpZWRDYWNoZS5nZXQ8VD4oY2FjaGVLZXkpO1xyXG4gICAgICBpZiAoY2FjaGVkKSByZXR1cm4gY2FjaGVkO1xyXG5cclxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnBvc3Q8VD4oJy9hcGkvc2VhcmNoJywgeyBxdWVyeSwgZmlsdGVycyB9KTtcclxuICAgICAgaWYgKHR5cGVvZiByZXNwb25zZSAhPT0gJ29iamVjdCcgfHwgcmVzcG9uc2UgPT09IG51bGwpIHtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgc2VhcmNoIGRhdGEgcmVzcG9uc2UnKTtcclxuICAgICAgfVxyXG4gICAgICB0aGlzLnVuaWZpZWRDYWNoZS5zZXQoY2FjaGVLZXksIHJlc3BvbnNlLCAxODAwMDApOyAvLyAzIG1pbiBjYWNoZVxyXG4gICAgICByZXR1cm4gcmVzcG9uc2U7XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICB0aGlzLmxvZ2dlci5lcnJvcignRmFpbGVkIHRvIHNlYXJjaCBkYXRhJywgZXJyb3IpO1xyXG4gICAgICB0aHJvdyBlcnJvcjtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGNsZWFyQ2FjaGUocGF0dGVybj86IHN0cmluZyk6IHZvaWQge1xyXG4gICAgaWYgKHBhdHRlcm4pIHtcclxuICAgICAgY29uc3Qga2V5cyA9IHRoaXMudW5pZmllZENhY2hlLmdldEtleXMoKS5maWx0ZXIoa2V5ID0+IGtleS5pbmNsdWRlcyhwYXR0ZXJuKSk7XHJcbiAgICAgIGtleXMuZm9yRWFjaChrZXkgPT4gdGhpcy51bmlmaWVkQ2FjaGUuZGVsZXRlKGtleSkpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy51bmlmaWVkQ2FjaGUuY2xlYXIoKTtcclxuICAgIH1cclxuICAgIHRoaXMubG9nZ2VyLmluZm8oJ0NhY2hlIGNsZWFyZWQnLCB7IHBhdHRlcm4gfSk7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGFzeW5jIGdldDxUPih1cmw6IHN0cmluZyk6IFByb21pc2U8VD4ge1xyXG4gICAgcmV0dXJuIHRoaXMuYXBpLmdldCh1cmwpLnRoZW4ocmVzcG9uc2UgPT4gcmVzcG9uc2UuZGF0YSBhcyBUKTtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgYXN5bmMgcG9zdDxUPih1cmw6IHN0cmluZywgZGF0YTogb2JqZWN0KTogUHJvbWlzZTxUPiB7XHJcbiAgICByZXR1cm4gdGhpcy5hcGkucG9zdCh1cmwsIGRhdGEpLnRoZW4ocmVzcG9uc2UgPT4gcmVzcG9uc2UuZGF0YSBhcyBUKTtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IFVuaWZpZWREYXRhU2VydmljZTtcclxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7QUF5R0EsSUFBQUEsWUFB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