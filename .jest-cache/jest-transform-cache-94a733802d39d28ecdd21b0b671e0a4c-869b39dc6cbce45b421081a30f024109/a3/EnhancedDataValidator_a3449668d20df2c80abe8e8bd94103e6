cc69b7949ef68eeec4117a55b551d643
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.dataValidator = exports.EnhancedDataValidator = void 0;
var _DataValidation = require("../types/DataValidation");
/**
 * Enhanced Data Validation Service
 * Provides comprehensive data validation, normalization, and quality assessment
 */

class EnhancedDataValidator {
  constructor(logger) {
    this.logger = void 0;
    this.normalizationConfigs = new Map();
    this.logger = logger || console.log;
    this.initializeNormalizationConfigs();
  }

  /**
   * Validate and normalize raw sports data
   */
  validateSportsProp(rawData, sport, context = {}) {
    const startTime = Date.now();
    const errors = [];
    const warnings = [];
    const transformations = [];
    const fallbacksUsed = [];
    try {
      // Get normalization config for the sport
      const config = this.getNormalizationConfig(sport || rawData.sport || 'Unknown');

      // Start with empty validated data
      const validatedData = {};

      // Normalize and validate each field
      this.validateAndNormalizeField('id', rawData, validatedData, config, errors, transformations, fallbacksUsed);
      this.validateAndNormalizeField('player', rawData, validatedData, config, errors, transformations, fallbacksUsed);
      this.validateAndNormalizeField('matchup', rawData, validatedData, config, errors, transformations, fallbacksUsed);
      this.validateAndNormalizeField('stat', rawData, validatedData, config, errors, transformations, fallbacksUsed);
      this.validateAndNormalizeField('line', rawData, validatedData, config, errors, transformations, fallbacksUsed);
      this.validateAndNormalizeField('overOdds', rawData, validatedData, config, errors, transformations, fallbacksUsed);
      this.validateAndNormalizeField('underOdds', rawData, validatedData, config, errors, transformations, fallbacksUsed);
      this.validateAndNormalizeField('confidence', rawData, validatedData, config, errors, transformations, fallbacksUsed);
      this.validateAndNormalizeField('sport', rawData, validatedData, config, errors, transformations, fallbacksUsed);
      this.validateAndNormalizeField('gameTime', rawData, validatedData, config, errors, transformations, fallbacksUsed);
      this.validateAndNormalizeField('pickType', rawData, validatedData, config, errors, transformations, fallbacksUsed);

      // Add metadata
      validatedData.dataSource = context.source || 'unknown';
      validatedData.validatedAt = new Date().toISOString();
      validatedData._originalData = rawData;
      validatedData._validationMeta = {
        processingTime: Date.now() - startTime,
        transformations,
        fallbacksUsed
      };

      // Calculate quality score
      const qualityMetrics = this.calculateDataQuality(validatedData, rawData, errors);
      validatedData.qualityScore = this.calculateOverallQualityScore(qualityMetrics);

      // Check if validation passed
      const criticalErrors = errors.filter(e => e.severity === 'error');
      const isValid = criticalErrors.length === 0 && this.hasRequiredFields(validatedData);

      // Add warnings for data quality issues
      if (qualityMetrics.completeness < 80) {
        warnings.push(`Low data completeness: ${qualityMetrics.completeness.toFixed(1)}%`);
      }
      if (qualityMetrics.accuracy < 90) {
        warnings.push(`Low data accuracy: ${qualityMetrics.accuracy.toFixed(1)}%`);
      }

      // Log validation result
      this.logValidationResult(isValid, errors, warnings, validatedData, startTime);
      return {
        isValid,
        data: isValid ? validatedData : undefined,
        errors,
        warnings,
        qualityScore: validatedData.qualityScore || 0
      };
    } catch (error) {
      const validationError = {
        field: 'validation',
        message: `Validation process failed: ${error instanceof Error ? error.message : String(error)}`,
        code: 'VALIDATION_SYSTEM_ERROR',
        severity: 'error',
        suggestedFix: 'Check data format and validation configuration'
      };
      this.logger({
        timestamp: new Date().toISOString(),
        level: 'error',
        component: 'DataValidator',
        operation: 'validateSportsProp',
        metadata: {
          sport: sport || rawData.sport,
          duration: Date.now() - startTime,
          errorsCount: 1
        },
        message: 'Validation system error',
        error: {
          name: error instanceof Error ? error.name : 'UnknownError',
          message: error instanceof Error ? error.message : String(error),
          stack: error instanceof Error ? error.stack : undefined
        }
      });
      return {
        isValid: false,
        errors: [validationError],
        warnings: [],
        qualityScore: 0
      };
    }
  }

  /**
   * Validate multiple props in batch with performance optimization
   */
  validateBatch(rawDataArray, sport, context = {}) {
    const startTime = Date.now();
    const validatedProps = [];
    const allErrors = [];
    const allWarnings = [];
    let totalQualityScore = 0;
    for (let i = 0; i < rawDataArray.length; i++) {
      const result = this.validateSportsProp(rawDataArray[i], sport, {
        ...context,
        source: `${context.source || 'batch'}[${i}]`
      });
      if (result.isValid && result.data) {
        validatedProps.push(result.data);
        totalQualityScore += result.qualityScore;
      }
      allErrors.push(...result.errors);
      allWarnings.push(...result.warnings);
    }
    const avgQualityScore = validatedProps.length > 0 ? totalQualityScore / validatedProps.length : 0;
    const isValid = validatedProps.length > 0 && allErrors.filter(e => e.severity === 'error').length === 0;
    this.logger({
      timestamp: new Date().toISOString(),
      level: 'info',
      component: 'DataValidator',
      operation: 'validateBatch',
      metadata: {
        sport,
        duration: Date.now() - startTime,
        dataQuality: avgQualityScore,
        errorsCount: allErrors.length
      },
      message: `Batch validation completed: ${validatedProps.length}/${rawDataArray.length} props validated`
    });
    return {
      isValid,
      data: isValid ? validatedProps : undefined,
      errors: allErrors,
      warnings: allWarnings,
      qualityScore: avgQualityScore
    };
  }
  validateAndNormalizeField(fieldName, rawData, validatedData, config, errors, transformations, fallbacksUsed) {
    const mappings = config.fieldMappings[fieldName] || [fieldName];
    let rawValue = undefined;
    let sourceField;

    // Find the first available value from mapped fields
    for (const mapping of mappings) {
      if (rawData[mapping] !== undefined && rawData[mapping] !== null && rawData[mapping] !== '') {
        rawValue = rawData[mapping];
        sourceField = mapping;
        break;
      }
    }

    // Apply field-specific validation and normalization
    try {
      switch (fieldName) {
        case 'id':
          validatedData.id = this.normalizeId(rawValue, rawData, fallbacksUsed);
          break;
        case 'player':
          validatedData.player = this.normalizePlayer(rawValue, rawData, fallbacksUsed);
          break;
        case 'matchup':
          validatedData.matchup = this.normalizeMatchup(rawValue, rawData, fallbacksUsed);
          break;
        case 'stat':
          validatedData.stat = this.normalizeStat(rawValue, fallbacksUsed);
          break;
        case 'line':
          validatedData.line = this.normalizeLine(rawValue, errors, fieldName);
          break;
        case 'overOdds':
        case 'underOdds':
          validatedData[fieldName] = this.normalizeOdds(rawValue, errors, fieldName);
          break;
        case 'confidence':
          validatedData.confidence = this.normalizeConfidence(rawValue, errors, fieldName);
          break;
        case 'sport':
          validatedData.sport = this.normalizeSport(rawValue, config.sport, errors, fallbacksUsed);
          break;
        case 'gameTime':
          validatedData.gameTime = this.normalizeGameTime(rawValue, fallbacksUsed);
          break;
        case 'pickType':
          validatedData.pickType = this.normalizePickType(rawValue, fallbacksUsed);
          break;
      }

      // Track transformation if source field was different
      if (sourceField && sourceField !== fieldName) {
        transformations.push(`${fieldName}:${sourceField}`);
      }
    } catch (error) {
      errors.push({
        field: fieldName,
        message: `Failed to normalize field: ${error instanceof Error ? error.message : String(error)}`,
        code: 'NORMALIZATION_ERROR',
        severity: 'error',
        suggestedFix: `Check the source data format for field ${fieldName}`
      });
    }
  }
  normalizeId(value, rawData, fallbacksUsed) {
    if (value && typeof value === 'string' && value.trim()) {
      return value.trim();
    }

    // Generate fallback ID
    const fallbackId = `${rawData.player_name || rawData.player || 'unknown'}-${rawData.stat_type || rawData.stat || 'unknown'}-${Date.now()}`;
    fallbacksUsed.push('id:generated');
    return fallbackId;
  }
  normalizePlayer(value, rawData, fallbacksUsed) {
    if (value && typeof value === 'string' && value.trim()) {
      const normalized = value.trim();
      // Don't allow "Over" or "Under" as player names
      if (normalized.toLowerCase() === 'over' || normalized.toLowerCase() === 'under') {
        const fallback = rawData.event_name || 'Unknown Team';
        fallbacksUsed.push('player:event_name');
        return fallback;
      }
      return normalized;
    }
    const fallback = rawData.event_name || 'Unknown';
    fallbacksUsed.push('player:event_name');
    return fallback;
  }
  normalizeMatchup(value, rawData, fallbacksUsed) {
    if (value && typeof value === 'string' && value.trim()) {
      return value.trim();
    }
    const fallback = rawData.event_name || 'Unknown vs Unknown';
    fallbacksUsed.push('matchup:event_name');
    return fallback;
  }
  normalizeStat(value, fallbacksUsed) {
    if (value && typeof value === 'string' && value.trim()) {
      return value.trim();
    }
    fallbacksUsed.push('stat:unknown');
    return 'Unknown';
  }
  normalizeLine(value, errors, fieldName) {
    if (value === null || value === undefined || value === '') {
      return 0;
    }
    const numValue = typeof value === 'number' ? value : parseFloat(String(value));
    if (isNaN(numValue)) {
      errors.push({
        field: fieldName,
        message: `Invalid line value: ${value}`,
        code: 'INVALID_NUMBER',
        severity: 'warning',
        suggestedFix: 'Provide a valid numeric line value'
      });
      return 0;
    }
    return numValue;
  }
  normalizeOdds(value, errors, fieldName) {
    if (value === null || value === undefined || value === '') {
      return 0;
    }
    const numValue = typeof value === 'number' ? value : parseFloat(String(value));
    if (isNaN(numValue)) {
      errors.push({
        field: fieldName,
        message: `Invalid odds value: ${value}`,
        code: 'INVALID_ODDS',
        severity: 'warning',
        suggestedFix: 'Provide a valid numeric odds value'
      });
      return 0;
    }
    return numValue;
  }
  normalizeConfidence(value, errors, fieldName) {
    if (value === null || value === undefined || value === '') {
      return 0;
    }
    const numValue = typeof value === 'number' ? value : parseFloat(String(value));
    if (isNaN(numValue)) {
      errors.push({
        field: fieldName,
        message: `Invalid confidence value: ${value}`,
        code: 'INVALID_CONFIDENCE',
        severity: 'error',
        suggestedFix: 'Provide a valid numeric confidence value between 0-100'
      });
      return 0;
    }
    if (numValue < _DataValidation.MIN_CONFIDENCE_SCORE || numValue > _DataValidation.MAX_CONFIDENCE_SCORE) {
      errors.push({
        field: fieldName,
        message: `Confidence value out of range: ${numValue} (expected 0-100)`,
        code: 'CONFIDENCE_OUT_OF_RANGE',
        severity: 'warning',
        suggestedFix: `Provide a confidence value between ${_DataValidation.MIN_CONFIDENCE_SCORE}-${_DataValidation.MAX_CONFIDENCE_SCORE}`
      });
      return Math.max(_DataValidation.MIN_CONFIDENCE_SCORE, Math.min(_DataValidation.MAX_CONFIDENCE_SCORE, numValue));
    }
    return numValue;
  }
  normalizeSport(value, configSport, errors, fallbacksUsed) {
    if (value && typeof value === 'string' && value.trim()) {
      const normalized = value.trim().toUpperCase();
      if (_DataValidation.SPORT_VALUES.includes(normalized)) {
        return normalized;
      }
    }

    // Use config sport as fallback
    if (configSport && configSport !== 'Unknown') {
      fallbacksUsed.push('sport:config');
      return configSport;
    }
    errors.push({
      field: 'sport',
      message: `Invalid or missing sport value: ${value}`,
      code: 'INVALID_SPORT',
      severity: 'error',
      suggestedFix: `Provide a valid sport value: ${_DataValidation.SPORT_VALUES.join(', ')}`
    });
    fallbacksUsed.push('sport:unknown');
    return 'Unknown';
  }
  normalizeGameTime(value, fallbacksUsed) {
    if (value && typeof value === 'string' && value.trim()) {
      try {
        // Try to parse as ISO string
        const date = new Date(value);
        if (!isNaN(date.getTime())) {
          return date.toISOString();
        }
      } catch (error) {
        // Fall through to fallback
      }
    }
    if (typeof value === 'number') {
      try {
        const date = new Date(value);
        if (!isNaN(date.getTime())) {
          return date.toISOString();
        }
      } catch (error) {
        // Fall through to fallback
      }
    }
    fallbacksUsed.push('gameTime:current');
    return new Date().toISOString();
  }
  normalizePickType(value, fallbacksUsed) {
    if (value && typeof value === 'string' && value.trim()) {
      const normalized = value.trim().toLowerCase();
      if (_DataValidation.PICK_TYPE_VALUES.includes(normalized)) {
        return normalized;
      }
    }
    fallbacksUsed.push('pickType:prop');
    return 'prop';
  }
  calculateDataQuality(validatedData, rawData, errors) {
    const requiredFieldsPresent = _DataValidation.REQUIRED_PROP_FIELDS.filter(field => validatedData[field] !== undefined && validatedData[field] !== null && validatedData[field] !== '').length;
    const completeness = requiredFieldsPresent / _DataValidation.REQUIRED_PROP_FIELDS.length * 100;
    const errorCount = errors.filter(e => e.severity === 'error').length;
    const warningCount = errors.filter(e => e.severity === 'warning').length;
    const accuracy = Math.max(0, 100 - errorCount * 20 - warningCount * 5);

    // Check consistency (proper data types, reasonable values)
    let consistencyScore = 100;
    if (typeof validatedData.line !== 'number' || isNaN(validatedData.line)) consistencyScore -= 10;
    if (typeof validatedData.confidence !== 'number' || isNaN(validatedData.confidence)) consistencyScore -= 15;
    if (!_DataValidation.SPORT_VALUES.includes(validatedData.sport) && validatedData.sport !== 'Unknown') consistencyScore -= 20;

    // Timeliness based on data freshness
    const dataAge = Date.now() - (rawData.timestamp ? new Date(rawData.timestamp).getTime() : Date.now());
    const timeliness = Math.max(0, 100 - dataAge / (1000 * 60 * 60) * 2); // Reduce by 2 points per hour

    return {
      completeness,
      accuracy,
      consistency: Math.max(0, consistencyScore),
      timeliness
    };
  }
  calculateOverallQualityScore(metrics) {
    // Weighted average: completeness and accuracy are most important
    return Math.round(metrics.completeness * 0.3 + metrics.accuracy * 0.4 + metrics.consistency * 0.2 + metrics.timeliness * 0.1);
  }
  hasRequiredFields(data) {
    return _DataValidation.REQUIRED_PROP_FIELDS.every(field => data[field] !== undefined && data[field] !== null && data[field] !== '');
  }
  logValidationResult(isValid, errors, warnings, data, startTime) {
    this.logger({
      timestamp: new Date().toISOString(),
      level: isValid ? 'info' : 'warn',
      component: 'DataValidator',
      operation: 'validateSportsProp',
      metadata: {
        sport: data.sport,
        duration: Date.now() - startTime,
        dataQuality: data.qualityScore,
        errorsCount: errors.length,
        fallbacksUsed: data._validationMeta?.fallbacksUsed
      },
      message: `Validation ${isValid ? 'passed' : 'failed'}: ${errors.length} errors, ${warnings.length} warnings`
    });
  }
  initializeNormalizationConfigs() {
    // MLB configuration
    this.normalizationConfigs.set('MLB', {
      sport: 'MLB',
      fieldMappings: {
        id: ['id', 'event_id', 'prop_id'],
        player: ['player', 'player_name'],
        matchup: ['matchup', 'event_name'],
        stat: ['stat', 'stat_type'],
        line: ['line', 'line_score'],
        overOdds: ['overOdds', 'over_odds'],
        underOdds: ['underOdds', 'under_odds'],
        confidence: ['confidence'],
        sport: ['sport'],
        gameTime: ['gameTime', 'start_time'],
        pickType: ['pickType']
      },
      validationRules: [],
      // Will be populated as needed
      fallbackValues: {
        sport: 'MLB',
        pickType: 'prop',
        confidence: 0
      },
      requiredFields: [..._DataValidation.REQUIRED_PROP_FIELDS],
      optionalFields: ['overOdds', 'underOdds', 'gameTime', 'pickType']
    });

    // Add configurations for other sports as needed
    ['NBA', 'NFL', 'NHL', 'Soccer'].forEach(sport => {
      this.normalizationConfigs.set(sport, {
        ...this.normalizationConfigs.get('MLB'),
        sport,
        fallbackValues: {
          ...this.normalizationConfigs.get('MLB').fallbackValues,
          sport
        }
      });
    });
  }
  getNormalizationConfig(sport) {
    return this.normalizationConfigs.get(sport) || this.normalizationConfigs.get('MLB');
  }
}

// Export singleton instance
exports.EnhancedDataValidator = EnhancedDataValidator;
const dataValidator = exports.dataValidator = new EnhancedDataValidator();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfRGF0YVZhbGlkYXRpb24iLCJyZXF1aXJlIiwiRW5oYW5jZWREYXRhVmFsaWRhdG9yIiwiY29uc3RydWN0b3IiLCJsb2dnZXIiLCJub3JtYWxpemF0aW9uQ29uZmlncyIsIk1hcCIsImNvbnNvbGUiLCJsb2ciLCJpbml0aWFsaXplTm9ybWFsaXphdGlvbkNvbmZpZ3MiLCJ2YWxpZGF0ZVNwb3J0c1Byb3AiLCJyYXdEYXRhIiwic3BvcnQiLCJjb250ZXh0Iiwic3RhcnRUaW1lIiwiRGF0ZSIsIm5vdyIsImVycm9ycyIsIndhcm5pbmdzIiwidHJhbnNmb3JtYXRpb25zIiwiZmFsbGJhY2tzVXNlZCIsImNvbmZpZyIsImdldE5vcm1hbGl6YXRpb25Db25maWciLCJ2YWxpZGF0ZWREYXRhIiwidmFsaWRhdGVBbmROb3JtYWxpemVGaWVsZCIsImRhdGFTb3VyY2UiLCJzb3VyY2UiLCJ2YWxpZGF0ZWRBdCIsInRvSVNPU3RyaW5nIiwiX29yaWdpbmFsRGF0YSIsIl92YWxpZGF0aW9uTWV0YSIsInByb2Nlc3NpbmdUaW1lIiwicXVhbGl0eU1ldHJpY3MiLCJjYWxjdWxhdGVEYXRhUXVhbGl0eSIsInF1YWxpdHlTY29yZSIsImNhbGN1bGF0ZU92ZXJhbGxRdWFsaXR5U2NvcmUiLCJjcml0aWNhbEVycm9ycyIsImZpbHRlciIsImUiLCJzZXZlcml0eSIsImlzVmFsaWQiLCJsZW5ndGgiLCJoYXNSZXF1aXJlZEZpZWxkcyIsImNvbXBsZXRlbmVzcyIsInB1c2giLCJ0b0ZpeGVkIiwiYWNjdXJhY3kiLCJsb2dWYWxpZGF0aW9uUmVzdWx0IiwiZGF0YSIsInVuZGVmaW5lZCIsImVycm9yIiwidmFsaWRhdGlvbkVycm9yIiwiZmllbGQiLCJtZXNzYWdlIiwiRXJyb3IiLCJTdHJpbmciLCJjb2RlIiwic3VnZ2VzdGVkRml4IiwidGltZXN0YW1wIiwibGV2ZWwiLCJjb21wb25lbnQiLCJvcGVyYXRpb24iLCJtZXRhZGF0YSIsImR1cmF0aW9uIiwiZXJyb3JzQ291bnQiLCJuYW1lIiwic3RhY2siLCJ2YWxpZGF0ZUJhdGNoIiwicmF3RGF0YUFycmF5IiwidmFsaWRhdGVkUHJvcHMiLCJhbGxFcnJvcnMiLCJhbGxXYXJuaW5ncyIsInRvdGFsUXVhbGl0eVNjb3JlIiwiaSIsInJlc3VsdCIsImF2Z1F1YWxpdHlTY29yZSIsImRhdGFRdWFsaXR5IiwiZmllbGROYW1lIiwibWFwcGluZ3MiLCJmaWVsZE1hcHBpbmdzIiwicmF3VmFsdWUiLCJzb3VyY2VGaWVsZCIsIm1hcHBpbmciLCJpZCIsIm5vcm1hbGl6ZUlkIiwicGxheWVyIiwibm9ybWFsaXplUGxheWVyIiwibWF0Y2h1cCIsIm5vcm1hbGl6ZU1hdGNodXAiLCJzdGF0Iiwibm9ybWFsaXplU3RhdCIsImxpbmUiLCJub3JtYWxpemVMaW5lIiwibm9ybWFsaXplT2RkcyIsImNvbmZpZGVuY2UiLCJub3JtYWxpemVDb25maWRlbmNlIiwibm9ybWFsaXplU3BvcnQiLCJnYW1lVGltZSIsIm5vcm1hbGl6ZUdhbWVUaW1lIiwicGlja1R5cGUiLCJub3JtYWxpemVQaWNrVHlwZSIsInZhbHVlIiwidHJpbSIsImZhbGxiYWNrSWQiLCJwbGF5ZXJfbmFtZSIsInN0YXRfdHlwZSIsIm5vcm1hbGl6ZWQiLCJ0b0xvd2VyQ2FzZSIsImZhbGxiYWNrIiwiZXZlbnRfbmFtZSIsIm51bVZhbHVlIiwicGFyc2VGbG9hdCIsImlzTmFOIiwiTUlOX0NPTkZJREVOQ0VfU0NPUkUiLCJNQVhfQ09ORklERU5DRV9TQ09SRSIsIk1hdGgiLCJtYXgiLCJtaW4iLCJjb25maWdTcG9ydCIsInRvVXBwZXJDYXNlIiwiU1BPUlRfVkFMVUVTIiwiaW5jbHVkZXMiLCJqb2luIiwiZGF0ZSIsImdldFRpbWUiLCJQSUNLX1RZUEVfVkFMVUVTIiwicmVxdWlyZWRGaWVsZHNQcmVzZW50IiwiUkVRVUlSRURfUFJPUF9GSUVMRFMiLCJlcnJvckNvdW50Iiwid2FybmluZ0NvdW50IiwiY29uc2lzdGVuY3lTY29yZSIsImRhdGFBZ2UiLCJ0aW1lbGluZXNzIiwiY29uc2lzdGVuY3kiLCJtZXRyaWNzIiwicm91bmQiLCJldmVyeSIsInNldCIsIm92ZXJPZGRzIiwidW5kZXJPZGRzIiwidmFsaWRhdGlvblJ1bGVzIiwiZmFsbGJhY2tWYWx1ZXMiLCJyZXF1aXJlZEZpZWxkcyIsIm9wdGlvbmFsRmllbGRzIiwiZm9yRWFjaCIsImdldCIsImV4cG9ydHMiLCJkYXRhVmFsaWRhdG9yIl0sInNvdXJjZXMiOlsiRW5oYW5jZWREYXRhVmFsaWRhdG9yLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxyXG4gKiBFbmhhbmNlZCBEYXRhIFZhbGlkYXRpb24gU2VydmljZVxyXG4gKiBQcm92aWRlcyBjb21wcmVoZW5zaXZlIGRhdGEgdmFsaWRhdGlvbiwgbm9ybWFsaXphdGlvbiwgYW5kIHF1YWxpdHkgYXNzZXNzbWVudFxyXG4gKi9cclxuXHJcbmltcG9ydCB7XHJcbiAgRGF0YU5vcm1hbGl6YXRpb25Db25maWcsXHJcbiAgRGF0YVF1YWxpdHlNZXRyaWNzLFxyXG4gIE1BWF9DT05GSURFTkNFX1NDT1JFLFxyXG4gIE1JTl9DT05GSURFTkNFX1NDT1JFLFxyXG4gIFBJQ0tfVFlQRV9WQUxVRVMsXHJcbiAgUmF3U3BvcnRzRGF0YSxcclxuICBSRVFVSVJFRF9QUk9QX0ZJRUxEUyxcclxuICBTUE9SVF9WQUxVRVMsXHJcbiAgU3RydWN0dXJlZExvZ0VudHJ5LFxyXG4gIFZhbGlkYXRlZFNwb3J0c1Byb3AsXHJcbiAgVmFsaWRhdGlvbkVycm9yLFxyXG4gIFZhbGlkYXRpb25SZXN1bHQsXHJcbn0gZnJvbSAnLi4vdHlwZXMvRGF0YVZhbGlkYXRpb24nO1xyXG5cclxuZXhwb3J0IGNsYXNzIEVuaGFuY2VkRGF0YVZhbGlkYXRvciB7XHJcbiAgcHJpdmF0ZSBsb2dnZXI6IChlbnRyeTogU3RydWN0dXJlZExvZ0VudHJ5KSA9PiB2b2lkO1xyXG4gIHByaXZhdGUgbm9ybWFsaXphdGlvbkNvbmZpZ3M6IE1hcDxzdHJpbmcsIERhdGFOb3JtYWxpemF0aW9uQ29uZmlnPiA9IG5ldyBNYXAoKTtcclxuXHJcbiAgY29uc3RydWN0b3IobG9nZ2VyPzogKGVudHJ5OiBTdHJ1Y3R1cmVkTG9nRW50cnkpID0+IHZvaWQpIHtcclxuICAgIHRoaXMubG9nZ2VyID0gbG9nZ2VyIHx8IGNvbnNvbGUubG9nO1xyXG4gICAgdGhpcy5pbml0aWFsaXplTm9ybWFsaXphdGlvbkNvbmZpZ3MoKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFZhbGlkYXRlIGFuZCBub3JtYWxpemUgcmF3IHNwb3J0cyBkYXRhXHJcbiAgICovXHJcbiAgdmFsaWRhdGVTcG9ydHNQcm9wKFxyXG4gICAgcmF3RGF0YTogUmF3U3BvcnRzRGF0YSxcclxuICAgIHNwb3J0Pzogc3RyaW5nLFxyXG4gICAgY29udGV4dDogeyBzb3VyY2U/OiBzdHJpbmc7IHRpbWVzdGFtcD86IG51bWJlciB9ID0ge31cclxuICApOiBWYWxpZGF0aW9uUmVzdWx0PFZhbGlkYXRlZFNwb3J0c1Byb3A+IHtcclxuICAgIGNvbnN0IHN0YXJ0VGltZSA9IERhdGUubm93KCk7XHJcbiAgICBjb25zdCBlcnJvcnM6IFZhbGlkYXRpb25FcnJvcltdID0gW107XHJcbiAgICBjb25zdCB3YXJuaW5nczogc3RyaW5nW10gPSBbXTtcclxuICAgIGNvbnN0IHRyYW5zZm9ybWF0aW9uczogc3RyaW5nW10gPSBbXTtcclxuICAgIGNvbnN0IGZhbGxiYWNrc1VzZWQ6IHN0cmluZ1tdID0gW107XHJcblxyXG4gICAgdHJ5IHtcclxuICAgICAgLy8gR2V0IG5vcm1hbGl6YXRpb24gY29uZmlnIGZvciB0aGUgc3BvcnRcclxuICAgICAgY29uc3QgY29uZmlnID0gdGhpcy5nZXROb3JtYWxpemF0aW9uQ29uZmlnKHNwb3J0IHx8IHJhd0RhdGEuc3BvcnQgfHwgJ1Vua25vd24nKTtcclxuXHJcbiAgICAgIC8vIFN0YXJ0IHdpdGggZW1wdHkgdmFsaWRhdGVkIGRhdGFcclxuICAgICAgY29uc3QgdmFsaWRhdGVkRGF0YTogUGFydGlhbDxWYWxpZGF0ZWRTcG9ydHNQcm9wPiA9IHt9O1xyXG5cclxuICAgICAgLy8gTm9ybWFsaXplIGFuZCB2YWxpZGF0ZSBlYWNoIGZpZWxkXHJcbiAgICAgIHRoaXMudmFsaWRhdGVBbmROb3JtYWxpemVGaWVsZChcclxuICAgICAgICAnaWQnLFxyXG4gICAgICAgIHJhd0RhdGEsXHJcbiAgICAgICAgdmFsaWRhdGVkRGF0YSxcclxuICAgICAgICBjb25maWcsXHJcbiAgICAgICAgZXJyb3JzLFxyXG4gICAgICAgIHRyYW5zZm9ybWF0aW9ucyxcclxuICAgICAgICBmYWxsYmFja3NVc2VkXHJcbiAgICAgICk7XHJcbiAgICAgIHRoaXMudmFsaWRhdGVBbmROb3JtYWxpemVGaWVsZChcclxuICAgICAgICAncGxheWVyJyxcclxuICAgICAgICByYXdEYXRhLFxyXG4gICAgICAgIHZhbGlkYXRlZERhdGEsXHJcbiAgICAgICAgY29uZmlnLFxyXG4gICAgICAgIGVycm9ycyxcclxuICAgICAgICB0cmFuc2Zvcm1hdGlvbnMsXHJcbiAgICAgICAgZmFsbGJhY2tzVXNlZFxyXG4gICAgICApO1xyXG4gICAgICB0aGlzLnZhbGlkYXRlQW5kTm9ybWFsaXplRmllbGQoXHJcbiAgICAgICAgJ21hdGNodXAnLFxyXG4gICAgICAgIHJhd0RhdGEsXHJcbiAgICAgICAgdmFsaWRhdGVkRGF0YSxcclxuICAgICAgICBjb25maWcsXHJcbiAgICAgICAgZXJyb3JzLFxyXG4gICAgICAgIHRyYW5zZm9ybWF0aW9ucyxcclxuICAgICAgICBmYWxsYmFja3NVc2VkXHJcbiAgICAgICk7XHJcbiAgICAgIHRoaXMudmFsaWRhdGVBbmROb3JtYWxpemVGaWVsZChcclxuICAgICAgICAnc3RhdCcsXHJcbiAgICAgICAgcmF3RGF0YSxcclxuICAgICAgICB2YWxpZGF0ZWREYXRhLFxyXG4gICAgICAgIGNvbmZpZyxcclxuICAgICAgICBlcnJvcnMsXHJcbiAgICAgICAgdHJhbnNmb3JtYXRpb25zLFxyXG4gICAgICAgIGZhbGxiYWNrc1VzZWRcclxuICAgICAgKTtcclxuICAgICAgdGhpcy52YWxpZGF0ZUFuZE5vcm1hbGl6ZUZpZWxkKFxyXG4gICAgICAgICdsaW5lJyxcclxuICAgICAgICByYXdEYXRhLFxyXG4gICAgICAgIHZhbGlkYXRlZERhdGEsXHJcbiAgICAgICAgY29uZmlnLFxyXG4gICAgICAgIGVycm9ycyxcclxuICAgICAgICB0cmFuc2Zvcm1hdGlvbnMsXHJcbiAgICAgICAgZmFsbGJhY2tzVXNlZFxyXG4gICAgICApO1xyXG4gICAgICB0aGlzLnZhbGlkYXRlQW5kTm9ybWFsaXplRmllbGQoXHJcbiAgICAgICAgJ292ZXJPZGRzJyxcclxuICAgICAgICByYXdEYXRhLFxyXG4gICAgICAgIHZhbGlkYXRlZERhdGEsXHJcbiAgICAgICAgY29uZmlnLFxyXG4gICAgICAgIGVycm9ycyxcclxuICAgICAgICB0cmFuc2Zvcm1hdGlvbnMsXHJcbiAgICAgICAgZmFsbGJhY2tzVXNlZFxyXG4gICAgICApO1xyXG4gICAgICB0aGlzLnZhbGlkYXRlQW5kTm9ybWFsaXplRmllbGQoXHJcbiAgICAgICAgJ3VuZGVyT2RkcycsXHJcbiAgICAgICAgcmF3RGF0YSxcclxuICAgICAgICB2YWxpZGF0ZWREYXRhLFxyXG4gICAgICAgIGNvbmZpZyxcclxuICAgICAgICBlcnJvcnMsXHJcbiAgICAgICAgdHJhbnNmb3JtYXRpb25zLFxyXG4gICAgICAgIGZhbGxiYWNrc1VzZWRcclxuICAgICAgKTtcclxuICAgICAgdGhpcy52YWxpZGF0ZUFuZE5vcm1hbGl6ZUZpZWxkKFxyXG4gICAgICAgICdjb25maWRlbmNlJyxcclxuICAgICAgICByYXdEYXRhLFxyXG4gICAgICAgIHZhbGlkYXRlZERhdGEsXHJcbiAgICAgICAgY29uZmlnLFxyXG4gICAgICAgIGVycm9ycyxcclxuICAgICAgICB0cmFuc2Zvcm1hdGlvbnMsXHJcbiAgICAgICAgZmFsbGJhY2tzVXNlZFxyXG4gICAgICApO1xyXG4gICAgICB0aGlzLnZhbGlkYXRlQW5kTm9ybWFsaXplRmllbGQoXHJcbiAgICAgICAgJ3Nwb3J0JyxcclxuICAgICAgICByYXdEYXRhLFxyXG4gICAgICAgIHZhbGlkYXRlZERhdGEsXHJcbiAgICAgICAgY29uZmlnLFxyXG4gICAgICAgIGVycm9ycyxcclxuICAgICAgICB0cmFuc2Zvcm1hdGlvbnMsXHJcbiAgICAgICAgZmFsbGJhY2tzVXNlZFxyXG4gICAgICApO1xyXG4gICAgICB0aGlzLnZhbGlkYXRlQW5kTm9ybWFsaXplRmllbGQoXHJcbiAgICAgICAgJ2dhbWVUaW1lJyxcclxuICAgICAgICByYXdEYXRhLFxyXG4gICAgICAgIHZhbGlkYXRlZERhdGEsXHJcbiAgICAgICAgY29uZmlnLFxyXG4gICAgICAgIGVycm9ycyxcclxuICAgICAgICB0cmFuc2Zvcm1hdGlvbnMsXHJcbiAgICAgICAgZmFsbGJhY2tzVXNlZFxyXG4gICAgICApO1xyXG4gICAgICB0aGlzLnZhbGlkYXRlQW5kTm9ybWFsaXplRmllbGQoXHJcbiAgICAgICAgJ3BpY2tUeXBlJyxcclxuICAgICAgICByYXdEYXRhLFxyXG4gICAgICAgIHZhbGlkYXRlZERhdGEsXHJcbiAgICAgICAgY29uZmlnLFxyXG4gICAgICAgIGVycm9ycyxcclxuICAgICAgICB0cmFuc2Zvcm1hdGlvbnMsXHJcbiAgICAgICAgZmFsbGJhY2tzVXNlZFxyXG4gICAgICApO1xyXG5cclxuICAgICAgLy8gQWRkIG1ldGFkYXRhXHJcbiAgICAgIHZhbGlkYXRlZERhdGEuZGF0YVNvdXJjZSA9IGNvbnRleHQuc291cmNlIHx8ICd1bmtub3duJztcclxuICAgICAgdmFsaWRhdGVkRGF0YS52YWxpZGF0ZWRBdCA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKTtcclxuICAgICAgdmFsaWRhdGVkRGF0YS5fb3JpZ2luYWxEYXRhID0gcmF3RGF0YTtcclxuICAgICAgdmFsaWRhdGVkRGF0YS5fdmFsaWRhdGlvbk1ldGEgPSB7XHJcbiAgICAgICAgcHJvY2Vzc2luZ1RpbWU6IERhdGUubm93KCkgLSBzdGFydFRpbWUsXHJcbiAgICAgICAgdHJhbnNmb3JtYXRpb25zLFxyXG4gICAgICAgIGZhbGxiYWNrc1VzZWQsXHJcbiAgICAgIH07XHJcblxyXG4gICAgICAvLyBDYWxjdWxhdGUgcXVhbGl0eSBzY29yZVxyXG4gICAgICBjb25zdCBxdWFsaXR5TWV0cmljcyA9IHRoaXMuY2FsY3VsYXRlRGF0YVF1YWxpdHkoXHJcbiAgICAgICAgdmFsaWRhdGVkRGF0YSBhcyBWYWxpZGF0ZWRTcG9ydHNQcm9wLFxyXG4gICAgICAgIHJhd0RhdGEsXHJcbiAgICAgICAgZXJyb3JzXHJcbiAgICAgICk7XHJcbiAgICAgIHZhbGlkYXRlZERhdGEucXVhbGl0eVNjb3JlID0gdGhpcy5jYWxjdWxhdGVPdmVyYWxsUXVhbGl0eVNjb3JlKHF1YWxpdHlNZXRyaWNzKTtcclxuXHJcbiAgICAgIC8vIENoZWNrIGlmIHZhbGlkYXRpb24gcGFzc2VkXHJcbiAgICAgIGNvbnN0IGNyaXRpY2FsRXJyb3JzID0gZXJyb3JzLmZpbHRlcihlID0+IGUuc2V2ZXJpdHkgPT09ICdlcnJvcicpO1xyXG4gICAgICBjb25zdCBpc1ZhbGlkID0gY3JpdGljYWxFcnJvcnMubGVuZ3RoID09PSAwICYmIHRoaXMuaGFzUmVxdWlyZWRGaWVsZHModmFsaWRhdGVkRGF0YSk7XHJcblxyXG4gICAgICAvLyBBZGQgd2FybmluZ3MgZm9yIGRhdGEgcXVhbGl0eSBpc3N1ZXNcclxuICAgICAgaWYgKHF1YWxpdHlNZXRyaWNzLmNvbXBsZXRlbmVzcyA8IDgwKSB7XHJcbiAgICAgICAgd2FybmluZ3MucHVzaChgTG93IGRhdGEgY29tcGxldGVuZXNzOiAke3F1YWxpdHlNZXRyaWNzLmNvbXBsZXRlbmVzcy50b0ZpeGVkKDEpfSVgKTtcclxuICAgICAgfVxyXG4gICAgICBpZiAocXVhbGl0eU1ldHJpY3MuYWNjdXJhY3kgPCA5MCkge1xyXG4gICAgICAgIHdhcm5pbmdzLnB1c2goYExvdyBkYXRhIGFjY3VyYWN5OiAke3F1YWxpdHlNZXRyaWNzLmFjY3VyYWN5LnRvRml4ZWQoMSl9JWApO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyBMb2cgdmFsaWRhdGlvbiByZXN1bHRcclxuICAgICAgdGhpcy5sb2dWYWxpZGF0aW9uUmVzdWx0KGlzVmFsaWQsIGVycm9ycywgd2FybmluZ3MsIHZhbGlkYXRlZERhdGEsIHN0YXJ0VGltZSk7XHJcblxyXG4gICAgICByZXR1cm4ge1xyXG4gICAgICAgIGlzVmFsaWQsXHJcbiAgICAgICAgZGF0YTogaXNWYWxpZCA/ICh2YWxpZGF0ZWREYXRhIGFzIFZhbGlkYXRlZFNwb3J0c1Byb3ApIDogdW5kZWZpbmVkLFxyXG4gICAgICAgIGVycm9ycyxcclxuICAgICAgICB3YXJuaW5ncyxcclxuICAgICAgICBxdWFsaXR5U2NvcmU6IHZhbGlkYXRlZERhdGEucXVhbGl0eVNjb3JlIHx8IDAsXHJcbiAgICAgIH07XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjb25zdCB2YWxpZGF0aW9uRXJyb3I6IFZhbGlkYXRpb25FcnJvciA9IHtcclxuICAgICAgICBmaWVsZDogJ3ZhbGlkYXRpb24nLFxyXG4gICAgICAgIG1lc3NhZ2U6IGBWYWxpZGF0aW9uIHByb2Nlc3MgZmFpbGVkOiAke1xyXG4gICAgICAgICAgZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiBTdHJpbmcoZXJyb3IpXHJcbiAgICAgICAgfWAsXHJcbiAgICAgICAgY29kZTogJ1ZBTElEQVRJT05fU1lTVEVNX0VSUk9SJyxcclxuICAgICAgICBzZXZlcml0eTogJ2Vycm9yJyxcclxuICAgICAgICBzdWdnZXN0ZWRGaXg6ICdDaGVjayBkYXRhIGZvcm1hdCBhbmQgdmFsaWRhdGlvbiBjb25maWd1cmF0aW9uJyxcclxuICAgICAgfTtcclxuXHJcbiAgICAgIHRoaXMubG9nZ2VyKHtcclxuICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcclxuICAgICAgICBsZXZlbDogJ2Vycm9yJyxcclxuICAgICAgICBjb21wb25lbnQ6ICdEYXRhVmFsaWRhdG9yJyxcclxuICAgICAgICBvcGVyYXRpb246ICd2YWxpZGF0ZVNwb3J0c1Byb3AnLFxyXG4gICAgICAgIG1ldGFkYXRhOiB7XHJcbiAgICAgICAgICBzcG9ydDogc3BvcnQgfHwgcmF3RGF0YS5zcG9ydCxcclxuICAgICAgICAgIGR1cmF0aW9uOiBEYXRlLm5vdygpIC0gc3RhcnRUaW1lLFxyXG4gICAgICAgICAgZXJyb3JzQ291bnQ6IDEsXHJcbiAgICAgICAgfSxcclxuICAgICAgICBtZXNzYWdlOiAnVmFsaWRhdGlvbiBzeXN0ZW0gZXJyb3InLFxyXG4gICAgICAgIGVycm9yOiB7XHJcbiAgICAgICAgICBuYW1lOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubmFtZSA6ICdVbmtub3duRXJyb3InLFxyXG4gICAgICAgICAgbWVzc2FnZTogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiBTdHJpbmcoZXJyb3IpLFxyXG4gICAgICAgICAgc3RhY2s6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5zdGFjayA6IHVuZGVmaW5lZCxcclxuICAgICAgICB9LFxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIHJldHVybiB7XHJcbiAgICAgICAgaXNWYWxpZDogZmFsc2UsXHJcbiAgICAgICAgZXJyb3JzOiBbdmFsaWRhdGlvbkVycm9yXSxcclxuICAgICAgICB3YXJuaW5nczogW10sXHJcbiAgICAgICAgcXVhbGl0eVNjb3JlOiAwLFxyXG4gICAgICB9O1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogVmFsaWRhdGUgbXVsdGlwbGUgcHJvcHMgaW4gYmF0Y2ggd2l0aCBwZXJmb3JtYW5jZSBvcHRpbWl6YXRpb25cclxuICAgKi9cclxuICB2YWxpZGF0ZUJhdGNoKFxyXG4gICAgcmF3RGF0YUFycmF5OiBSYXdTcG9ydHNEYXRhW10sXHJcbiAgICBzcG9ydD86IHN0cmluZyxcclxuICAgIGNvbnRleHQ6IHsgc291cmNlPzogc3RyaW5nOyB0aW1lc3RhbXA/OiBudW1iZXIgfSA9IHt9XHJcbiAgKTogVmFsaWRhdGlvblJlc3VsdDxWYWxpZGF0ZWRTcG9ydHNQcm9wW10+IHtcclxuICAgIGNvbnN0IHN0YXJ0VGltZSA9IERhdGUubm93KCk7XHJcbiAgICBjb25zdCB2YWxpZGF0ZWRQcm9wczogVmFsaWRhdGVkU3BvcnRzUHJvcFtdID0gW107XHJcbiAgICBjb25zdCBhbGxFcnJvcnM6IFZhbGlkYXRpb25FcnJvcltdID0gW107XHJcbiAgICBjb25zdCBhbGxXYXJuaW5nczogc3RyaW5nW10gPSBbXTtcclxuICAgIGxldCB0b3RhbFF1YWxpdHlTY29yZSA9IDA7XHJcblxyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCByYXdEYXRhQXJyYXkubGVuZ3RoOyBpKyspIHtcclxuICAgICAgY29uc3QgcmVzdWx0ID0gdGhpcy52YWxpZGF0ZVNwb3J0c1Byb3AocmF3RGF0YUFycmF5W2ldLCBzcG9ydCwge1xyXG4gICAgICAgIC4uLmNvbnRleHQsXHJcbiAgICAgICAgc291cmNlOiBgJHtjb250ZXh0LnNvdXJjZSB8fCAnYmF0Y2gnfVske2l9XWAsXHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgaWYgKHJlc3VsdC5pc1ZhbGlkICYmIHJlc3VsdC5kYXRhKSB7XHJcbiAgICAgICAgdmFsaWRhdGVkUHJvcHMucHVzaChyZXN1bHQuZGF0YSk7XHJcbiAgICAgICAgdG90YWxRdWFsaXR5U2NvcmUgKz0gcmVzdWx0LnF1YWxpdHlTY29yZTtcclxuICAgICAgfVxyXG5cclxuICAgICAgYWxsRXJyb3JzLnB1c2goLi4ucmVzdWx0LmVycm9ycyk7XHJcbiAgICAgIGFsbFdhcm5pbmdzLnB1c2goLi4ucmVzdWx0Lndhcm5pbmdzKTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBhdmdRdWFsaXR5U2NvcmUgPVxyXG4gICAgICB2YWxpZGF0ZWRQcm9wcy5sZW5ndGggPiAwID8gdG90YWxRdWFsaXR5U2NvcmUgLyB2YWxpZGF0ZWRQcm9wcy5sZW5ndGggOiAwO1xyXG4gICAgY29uc3QgaXNWYWxpZCA9XHJcbiAgICAgIHZhbGlkYXRlZFByb3BzLmxlbmd0aCA+IDAgJiYgYWxsRXJyb3JzLmZpbHRlcihlID0+IGUuc2V2ZXJpdHkgPT09ICdlcnJvcicpLmxlbmd0aCA9PT0gMDtcclxuXHJcbiAgICB0aGlzLmxvZ2dlcih7XHJcbiAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxyXG4gICAgICBsZXZlbDogJ2luZm8nLFxyXG4gICAgICBjb21wb25lbnQ6ICdEYXRhVmFsaWRhdG9yJyxcclxuICAgICAgb3BlcmF0aW9uOiAndmFsaWRhdGVCYXRjaCcsXHJcbiAgICAgIG1ldGFkYXRhOiB7XHJcbiAgICAgICAgc3BvcnQsXHJcbiAgICAgICAgZHVyYXRpb246IERhdGUubm93KCkgLSBzdGFydFRpbWUsXHJcbiAgICAgICAgZGF0YVF1YWxpdHk6IGF2Z1F1YWxpdHlTY29yZSxcclxuICAgICAgICBlcnJvcnNDb3VudDogYWxsRXJyb3JzLmxlbmd0aCxcclxuICAgICAgfSxcclxuICAgICAgbWVzc2FnZTogYEJhdGNoIHZhbGlkYXRpb24gY29tcGxldGVkOiAke3ZhbGlkYXRlZFByb3BzLmxlbmd0aH0vJHtyYXdEYXRhQXJyYXkubGVuZ3RofSBwcm9wcyB2YWxpZGF0ZWRgLFxyXG4gICAgfSk7XHJcblxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgaXNWYWxpZCxcclxuICAgICAgZGF0YTogaXNWYWxpZCA/IHZhbGlkYXRlZFByb3BzIDogdW5kZWZpbmVkLFxyXG4gICAgICBlcnJvcnM6IGFsbEVycm9ycyxcclxuICAgICAgd2FybmluZ3M6IGFsbFdhcm5pbmdzLFxyXG4gICAgICBxdWFsaXR5U2NvcmU6IGF2Z1F1YWxpdHlTY29yZSxcclxuICAgIH07XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIHZhbGlkYXRlQW5kTm9ybWFsaXplRmllbGQoXHJcbiAgICBmaWVsZE5hbWU6IGtleW9mIFZhbGlkYXRlZFNwb3J0c1Byb3AsXHJcbiAgICByYXdEYXRhOiBSYXdTcG9ydHNEYXRhLFxyXG4gICAgdmFsaWRhdGVkRGF0YTogUGFydGlhbDxWYWxpZGF0ZWRTcG9ydHNQcm9wPixcclxuICAgIGNvbmZpZzogRGF0YU5vcm1hbGl6YXRpb25Db25maWcsXHJcbiAgICBlcnJvcnM6IFZhbGlkYXRpb25FcnJvcltdLFxyXG4gICAgdHJhbnNmb3JtYXRpb25zOiBzdHJpbmdbXSxcclxuICAgIGZhbGxiYWNrc1VzZWQ6IHN0cmluZ1tdXHJcbiAgKTogdm9pZCB7XHJcbiAgICBjb25zdCBtYXBwaW5ncyA9IGNvbmZpZy5maWVsZE1hcHBpbmdzW2ZpZWxkTmFtZV0gfHwgW2ZpZWxkTmFtZV07XHJcbiAgICBsZXQgcmF3VmFsdWU6IGFueSA9IHVuZGVmaW5lZDtcclxuICAgIGxldCBzb3VyY2VGaWVsZDogc3RyaW5nIHwgdW5kZWZpbmVkO1xyXG5cclxuICAgIC8vIEZpbmQgdGhlIGZpcnN0IGF2YWlsYWJsZSB2YWx1ZSBmcm9tIG1hcHBlZCBmaWVsZHNcclxuICAgIGZvciAoY29uc3QgbWFwcGluZyBvZiBtYXBwaW5ncykge1xyXG4gICAgICBpZiAocmF3RGF0YVttYXBwaW5nXSAhPT0gdW5kZWZpbmVkICYmIHJhd0RhdGFbbWFwcGluZ10gIT09IG51bGwgJiYgcmF3RGF0YVttYXBwaW5nXSAhPT0gJycpIHtcclxuICAgICAgICByYXdWYWx1ZSA9IHJhd0RhdGFbbWFwcGluZ107XHJcbiAgICAgICAgc291cmNlRmllbGQgPSBtYXBwaW5nO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gQXBwbHkgZmllbGQtc3BlY2lmaWMgdmFsaWRhdGlvbiBhbmQgbm9ybWFsaXphdGlvblxyXG4gICAgdHJ5IHtcclxuICAgICAgc3dpdGNoIChmaWVsZE5hbWUpIHtcclxuICAgICAgICBjYXNlICdpZCc6XHJcbiAgICAgICAgICB2YWxpZGF0ZWREYXRhLmlkID0gdGhpcy5ub3JtYWxpemVJZChyYXdWYWx1ZSwgcmF3RGF0YSwgZmFsbGJhY2tzVXNlZCk7XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlICdwbGF5ZXInOlxyXG4gICAgICAgICAgdmFsaWRhdGVkRGF0YS5wbGF5ZXIgPSB0aGlzLm5vcm1hbGl6ZVBsYXllcihyYXdWYWx1ZSwgcmF3RGF0YSwgZmFsbGJhY2tzVXNlZCk7XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlICdtYXRjaHVwJzpcclxuICAgICAgICAgIHZhbGlkYXRlZERhdGEubWF0Y2h1cCA9IHRoaXMubm9ybWFsaXplTWF0Y2h1cChyYXdWYWx1ZSwgcmF3RGF0YSwgZmFsbGJhY2tzVXNlZCk7XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlICdzdGF0JzpcclxuICAgICAgICAgIHZhbGlkYXRlZERhdGEuc3RhdCA9IHRoaXMubm9ybWFsaXplU3RhdChyYXdWYWx1ZSwgZmFsbGJhY2tzVXNlZCk7XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlICdsaW5lJzpcclxuICAgICAgICAgIHZhbGlkYXRlZERhdGEubGluZSA9IHRoaXMubm9ybWFsaXplTGluZShyYXdWYWx1ZSwgZXJyb3JzLCBmaWVsZE5hbWUpO1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSAnb3Zlck9kZHMnOlxyXG4gICAgICAgIGNhc2UgJ3VuZGVyT2Rkcyc6XHJcbiAgICAgICAgICAodmFsaWRhdGVkRGF0YSBhcyBhbnkpW2ZpZWxkTmFtZV0gPSB0aGlzLm5vcm1hbGl6ZU9kZHMocmF3VmFsdWUsIGVycm9ycywgZmllbGROYW1lKTtcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgJ2NvbmZpZGVuY2UnOlxyXG4gICAgICAgICAgdmFsaWRhdGVkRGF0YS5jb25maWRlbmNlID0gdGhpcy5ub3JtYWxpemVDb25maWRlbmNlKHJhd1ZhbHVlLCBlcnJvcnMsIGZpZWxkTmFtZSk7XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlICdzcG9ydCc6XHJcbiAgICAgICAgICB2YWxpZGF0ZWREYXRhLnNwb3J0ID0gdGhpcy5ub3JtYWxpemVTcG9ydChyYXdWYWx1ZSwgY29uZmlnLnNwb3J0LCBlcnJvcnMsIGZhbGxiYWNrc1VzZWQpO1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSAnZ2FtZVRpbWUnOlxyXG4gICAgICAgICAgdmFsaWRhdGVkRGF0YS5nYW1lVGltZSA9IHRoaXMubm9ybWFsaXplR2FtZVRpbWUocmF3VmFsdWUsIGZhbGxiYWNrc1VzZWQpO1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSAncGlja1R5cGUnOlxyXG4gICAgICAgICAgdmFsaWRhdGVkRGF0YS5waWNrVHlwZSA9IHRoaXMubm9ybWFsaXplUGlja1R5cGUocmF3VmFsdWUsIGZhbGxiYWNrc1VzZWQpO1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIFRyYWNrIHRyYW5zZm9ybWF0aW9uIGlmIHNvdXJjZSBmaWVsZCB3YXMgZGlmZmVyZW50XHJcbiAgICAgIGlmIChzb3VyY2VGaWVsZCAmJiBzb3VyY2VGaWVsZCAhPT0gZmllbGROYW1lKSB7XHJcbiAgICAgICAgdHJhbnNmb3JtYXRpb25zLnB1c2goYCR7ZmllbGROYW1lfToke3NvdXJjZUZpZWxkfWApO1xyXG4gICAgICB9XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBlcnJvcnMucHVzaCh7XHJcbiAgICAgICAgZmllbGQ6IGZpZWxkTmFtZSxcclxuICAgICAgICBtZXNzYWdlOiBgRmFpbGVkIHRvIG5vcm1hbGl6ZSBmaWVsZDogJHtcclxuICAgICAgICAgIGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogU3RyaW5nKGVycm9yKVxyXG4gICAgICAgIH1gLFxyXG4gICAgICAgIGNvZGU6ICdOT1JNQUxJWkFUSU9OX0VSUk9SJyxcclxuICAgICAgICBzZXZlcml0eTogJ2Vycm9yJyxcclxuICAgICAgICBzdWdnZXN0ZWRGaXg6IGBDaGVjayB0aGUgc291cmNlIGRhdGEgZm9ybWF0IGZvciBmaWVsZCAke2ZpZWxkTmFtZX1gLFxyXG4gICAgICB9KTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHByaXZhdGUgbm9ybWFsaXplSWQodmFsdWU6IGFueSwgcmF3RGF0YTogUmF3U3BvcnRzRGF0YSwgZmFsbGJhY2tzVXNlZDogc3RyaW5nW10pOiBzdHJpbmcge1xyXG4gICAgaWYgKHZhbHVlICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycgJiYgdmFsdWUudHJpbSgpKSB7XHJcbiAgICAgIHJldHVybiB2YWx1ZS50cmltKCk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gR2VuZXJhdGUgZmFsbGJhY2sgSURcclxuICAgIGNvbnN0IGZhbGxiYWNrSWQgPSBgJHtyYXdEYXRhLnBsYXllcl9uYW1lIHx8IHJhd0RhdGEucGxheWVyIHx8ICd1bmtub3duJ30tJHtcclxuICAgICAgcmF3RGF0YS5zdGF0X3R5cGUgfHwgcmF3RGF0YS5zdGF0IHx8ICd1bmtub3duJ1xyXG4gICAgfS0ke0RhdGUubm93KCl9YDtcclxuICAgIGZhbGxiYWNrc1VzZWQucHVzaCgnaWQ6Z2VuZXJhdGVkJyk7XHJcbiAgICByZXR1cm4gZmFsbGJhY2tJZDtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgbm9ybWFsaXplUGxheWVyKHZhbHVlOiBhbnksIHJhd0RhdGE6IFJhd1Nwb3J0c0RhdGEsIGZhbGxiYWNrc1VzZWQ6IHN0cmluZ1tdKTogc3RyaW5nIHtcclxuICAgIGlmICh2YWx1ZSAmJiB0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnICYmIHZhbHVlLnRyaW0oKSkge1xyXG4gICAgICBjb25zdCBub3JtYWxpemVkID0gdmFsdWUudHJpbSgpO1xyXG4gICAgICAvLyBEb24ndCBhbGxvdyBcIk92ZXJcIiBvciBcIlVuZGVyXCIgYXMgcGxheWVyIG5hbWVzXHJcbiAgICAgIGlmIChub3JtYWxpemVkLnRvTG93ZXJDYXNlKCkgPT09ICdvdmVyJyB8fCBub3JtYWxpemVkLnRvTG93ZXJDYXNlKCkgPT09ICd1bmRlcicpIHtcclxuICAgICAgICBjb25zdCBmYWxsYmFjayA9IHJhd0RhdGEuZXZlbnRfbmFtZSB8fCAnVW5rbm93biBUZWFtJztcclxuICAgICAgICBmYWxsYmFja3NVc2VkLnB1c2goJ3BsYXllcjpldmVudF9uYW1lJyk7XHJcbiAgICAgICAgcmV0dXJuIGZhbGxiYWNrO1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiBub3JtYWxpemVkO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IGZhbGxiYWNrID0gcmF3RGF0YS5ldmVudF9uYW1lIHx8ICdVbmtub3duJztcclxuICAgIGZhbGxiYWNrc1VzZWQucHVzaCgncGxheWVyOmV2ZW50X25hbWUnKTtcclxuICAgIHJldHVybiBmYWxsYmFjaztcclxuICB9XHJcblxyXG4gIHByaXZhdGUgbm9ybWFsaXplTWF0Y2h1cCh2YWx1ZTogYW55LCByYXdEYXRhOiBSYXdTcG9ydHNEYXRhLCBmYWxsYmFja3NVc2VkOiBzdHJpbmdbXSk6IHN0cmluZyB7XHJcbiAgICBpZiAodmFsdWUgJiYgdHlwZW9mIHZhbHVlID09PSAnc3RyaW5nJyAmJiB2YWx1ZS50cmltKCkpIHtcclxuICAgICAgcmV0dXJuIHZhbHVlLnRyaW0oKTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBmYWxsYmFjayA9IHJhd0RhdGEuZXZlbnRfbmFtZSB8fCAnVW5rbm93biB2cyBVbmtub3duJztcclxuICAgIGZhbGxiYWNrc1VzZWQucHVzaCgnbWF0Y2h1cDpldmVudF9uYW1lJyk7XHJcbiAgICByZXR1cm4gZmFsbGJhY2s7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIG5vcm1hbGl6ZVN0YXQodmFsdWU6IGFueSwgZmFsbGJhY2tzVXNlZDogc3RyaW5nW10pOiBzdHJpbmcge1xyXG4gICAgaWYgKHZhbHVlICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycgJiYgdmFsdWUudHJpbSgpKSB7XHJcbiAgICAgIHJldHVybiB2YWx1ZS50cmltKCk7XHJcbiAgICB9XHJcblxyXG4gICAgZmFsbGJhY2tzVXNlZC5wdXNoKCdzdGF0OnVua25vd24nKTtcclxuICAgIHJldHVybiAnVW5rbm93bic7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIG5vcm1hbGl6ZUxpbmUodmFsdWU6IGFueSwgZXJyb3JzOiBWYWxpZGF0aW9uRXJyb3JbXSwgZmllbGROYW1lOiBzdHJpbmcpOiBudW1iZXIge1xyXG4gICAgaWYgKHZhbHVlID09PSBudWxsIHx8IHZhbHVlID09PSB1bmRlZmluZWQgfHwgdmFsdWUgPT09ICcnKSB7XHJcbiAgICAgIHJldHVybiAwO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IG51bVZhbHVlID0gdHlwZW9mIHZhbHVlID09PSAnbnVtYmVyJyA/IHZhbHVlIDogcGFyc2VGbG9hdChTdHJpbmcodmFsdWUpKTtcclxuXHJcbiAgICBpZiAoaXNOYU4obnVtVmFsdWUpKSB7XHJcbiAgICAgIGVycm9ycy5wdXNoKHtcclxuICAgICAgICBmaWVsZDogZmllbGROYW1lLFxyXG4gICAgICAgIG1lc3NhZ2U6IGBJbnZhbGlkIGxpbmUgdmFsdWU6ICR7dmFsdWV9YCxcclxuICAgICAgICBjb2RlOiAnSU5WQUxJRF9OVU1CRVInLFxyXG4gICAgICAgIHNldmVyaXR5OiAnd2FybmluZycsXHJcbiAgICAgICAgc3VnZ2VzdGVkRml4OiAnUHJvdmlkZSBhIHZhbGlkIG51bWVyaWMgbGluZSB2YWx1ZScsXHJcbiAgICAgIH0pO1xyXG4gICAgICByZXR1cm4gMDtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gbnVtVmFsdWU7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIG5vcm1hbGl6ZU9kZHModmFsdWU6IGFueSwgZXJyb3JzOiBWYWxpZGF0aW9uRXJyb3JbXSwgZmllbGROYW1lOiBzdHJpbmcpOiBudW1iZXIge1xyXG4gICAgaWYgKHZhbHVlID09PSBudWxsIHx8IHZhbHVlID09PSB1bmRlZmluZWQgfHwgdmFsdWUgPT09ICcnKSB7XHJcbiAgICAgIHJldHVybiAwO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IG51bVZhbHVlID0gdHlwZW9mIHZhbHVlID09PSAnbnVtYmVyJyA/IHZhbHVlIDogcGFyc2VGbG9hdChTdHJpbmcodmFsdWUpKTtcclxuXHJcbiAgICBpZiAoaXNOYU4obnVtVmFsdWUpKSB7XHJcbiAgICAgIGVycm9ycy5wdXNoKHtcclxuICAgICAgICBmaWVsZDogZmllbGROYW1lLFxyXG4gICAgICAgIG1lc3NhZ2U6IGBJbnZhbGlkIG9kZHMgdmFsdWU6ICR7dmFsdWV9YCxcclxuICAgICAgICBjb2RlOiAnSU5WQUxJRF9PRERTJyxcclxuICAgICAgICBzZXZlcml0eTogJ3dhcm5pbmcnLFxyXG4gICAgICAgIHN1Z2dlc3RlZEZpeDogJ1Byb3ZpZGUgYSB2YWxpZCBudW1lcmljIG9kZHMgdmFsdWUnLFxyXG4gICAgICB9KTtcclxuICAgICAgcmV0dXJuIDA7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIG51bVZhbHVlO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBub3JtYWxpemVDb25maWRlbmNlKHZhbHVlOiBhbnksIGVycm9yczogVmFsaWRhdGlvbkVycm9yW10sIGZpZWxkTmFtZTogc3RyaW5nKTogbnVtYmVyIHtcclxuICAgIGlmICh2YWx1ZSA9PT0gbnVsbCB8fCB2YWx1ZSA9PT0gdW5kZWZpbmVkIHx8IHZhbHVlID09PSAnJykge1xyXG4gICAgICByZXR1cm4gMDtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBudW1WYWx1ZSA9IHR5cGVvZiB2YWx1ZSA9PT0gJ251bWJlcicgPyB2YWx1ZSA6IHBhcnNlRmxvYXQoU3RyaW5nKHZhbHVlKSk7XHJcblxyXG4gICAgaWYgKGlzTmFOKG51bVZhbHVlKSkge1xyXG4gICAgICBlcnJvcnMucHVzaCh7XHJcbiAgICAgICAgZmllbGQ6IGZpZWxkTmFtZSxcclxuICAgICAgICBtZXNzYWdlOiBgSW52YWxpZCBjb25maWRlbmNlIHZhbHVlOiAke3ZhbHVlfWAsXHJcbiAgICAgICAgY29kZTogJ0lOVkFMSURfQ09ORklERU5DRScsXHJcbiAgICAgICAgc2V2ZXJpdHk6ICdlcnJvcicsXHJcbiAgICAgICAgc3VnZ2VzdGVkRml4OiAnUHJvdmlkZSBhIHZhbGlkIG51bWVyaWMgY29uZmlkZW5jZSB2YWx1ZSBiZXR3ZWVuIDAtMTAwJyxcclxuICAgICAgfSk7XHJcbiAgICAgIHJldHVybiAwO1xyXG4gICAgfVxyXG5cclxuICAgIGlmIChudW1WYWx1ZSA8IE1JTl9DT05GSURFTkNFX1NDT1JFIHx8IG51bVZhbHVlID4gTUFYX0NPTkZJREVOQ0VfU0NPUkUpIHtcclxuICAgICAgZXJyb3JzLnB1c2goe1xyXG4gICAgICAgIGZpZWxkOiBmaWVsZE5hbWUsXHJcbiAgICAgICAgbWVzc2FnZTogYENvbmZpZGVuY2UgdmFsdWUgb3V0IG9mIHJhbmdlOiAke251bVZhbHVlfSAoZXhwZWN0ZWQgMC0xMDApYCxcclxuICAgICAgICBjb2RlOiAnQ09ORklERU5DRV9PVVRfT0ZfUkFOR0UnLFxyXG4gICAgICAgIHNldmVyaXR5OiAnd2FybmluZycsXHJcbiAgICAgICAgc3VnZ2VzdGVkRml4OiBgUHJvdmlkZSBhIGNvbmZpZGVuY2UgdmFsdWUgYmV0d2VlbiAke01JTl9DT05GSURFTkNFX1NDT1JFfS0ke01BWF9DT05GSURFTkNFX1NDT1JFfWAsXHJcbiAgICAgIH0pO1xyXG4gICAgICByZXR1cm4gTWF0aC5tYXgoTUlOX0NPTkZJREVOQ0VfU0NPUkUsIE1hdGgubWluKE1BWF9DT05GSURFTkNFX1NDT1JFLCBudW1WYWx1ZSkpO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBudW1WYWx1ZTtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgbm9ybWFsaXplU3BvcnQoXHJcbiAgICB2YWx1ZTogYW55LFxyXG4gICAgY29uZmlnU3BvcnQ6IHN0cmluZyxcclxuICAgIGVycm9yczogVmFsaWRhdGlvbkVycm9yW10sXHJcbiAgICBmYWxsYmFja3NVc2VkOiBzdHJpbmdbXVxyXG4gICk6IHN0cmluZyB7XHJcbiAgICBpZiAodmFsdWUgJiYgdHlwZW9mIHZhbHVlID09PSAnc3RyaW5nJyAmJiB2YWx1ZS50cmltKCkpIHtcclxuICAgICAgY29uc3Qgbm9ybWFsaXplZCA9IHZhbHVlLnRyaW0oKS50b1VwcGVyQ2FzZSgpO1xyXG4gICAgICBpZiAoU1BPUlRfVkFMVUVTLmluY2x1ZGVzKG5vcm1hbGl6ZWQgYXMgYW55KSkge1xyXG4gICAgICAgIHJldHVybiBub3JtYWxpemVkO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gVXNlIGNvbmZpZyBzcG9ydCBhcyBmYWxsYmFja1xyXG4gICAgaWYgKGNvbmZpZ1Nwb3J0ICYmIGNvbmZpZ1Nwb3J0ICE9PSAnVW5rbm93bicpIHtcclxuICAgICAgZmFsbGJhY2tzVXNlZC5wdXNoKCdzcG9ydDpjb25maWcnKTtcclxuICAgICAgcmV0dXJuIGNvbmZpZ1Nwb3J0O1xyXG4gICAgfVxyXG5cclxuICAgIGVycm9ycy5wdXNoKHtcclxuICAgICAgZmllbGQ6ICdzcG9ydCcsXHJcbiAgICAgIG1lc3NhZ2U6IGBJbnZhbGlkIG9yIG1pc3Npbmcgc3BvcnQgdmFsdWU6ICR7dmFsdWV9YCxcclxuICAgICAgY29kZTogJ0lOVkFMSURfU1BPUlQnLFxyXG4gICAgICBzZXZlcml0eTogJ2Vycm9yJyxcclxuICAgICAgc3VnZ2VzdGVkRml4OiBgUHJvdmlkZSBhIHZhbGlkIHNwb3J0IHZhbHVlOiAke1NQT1JUX1ZBTFVFUy5qb2luKCcsICcpfWAsXHJcbiAgICB9KTtcclxuXHJcbiAgICBmYWxsYmFja3NVc2VkLnB1c2goJ3Nwb3J0OnVua25vd24nKTtcclxuICAgIHJldHVybiAnVW5rbm93bic7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIG5vcm1hbGl6ZUdhbWVUaW1lKHZhbHVlOiBhbnksIGZhbGxiYWNrc1VzZWQ6IHN0cmluZ1tdKTogc3RyaW5nIHtcclxuICAgIGlmICh2YWx1ZSAmJiB0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnICYmIHZhbHVlLnRyaW0oKSkge1xyXG4gICAgICB0cnkge1xyXG4gICAgICAgIC8vIFRyeSB0byBwYXJzZSBhcyBJU08gc3RyaW5nXHJcbiAgICAgICAgY29uc3QgZGF0ZSA9IG5ldyBEYXRlKHZhbHVlKTtcclxuICAgICAgICBpZiAoIWlzTmFOKGRhdGUuZ2V0VGltZSgpKSkge1xyXG4gICAgICAgICAgcmV0dXJuIGRhdGUudG9JU09TdHJpbmcoKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgLy8gRmFsbCB0aHJvdWdoIHRvIGZhbGxiYWNrXHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBpZiAodHlwZW9mIHZhbHVlID09PSAnbnVtYmVyJykge1xyXG4gICAgICB0cnkge1xyXG4gICAgICAgIGNvbnN0IGRhdGUgPSBuZXcgRGF0ZSh2YWx1ZSk7XHJcbiAgICAgICAgaWYgKCFpc05hTihkYXRlLmdldFRpbWUoKSkpIHtcclxuICAgICAgICAgIHJldHVybiBkYXRlLnRvSVNPU3RyaW5nKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgIC8vIEZhbGwgdGhyb3VnaCB0byBmYWxsYmFja1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZmFsbGJhY2tzVXNlZC5wdXNoKCdnYW1lVGltZTpjdXJyZW50Jyk7XHJcbiAgICByZXR1cm4gbmV3IERhdGUoKS50b0lTT1N0cmluZygpO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBub3JtYWxpemVQaWNrVHlwZShcclxuICAgIHZhbHVlOiBhbnksXHJcbiAgICBmYWxsYmFja3NVc2VkOiBzdHJpbmdbXVxyXG4gICk6ICdwcm9wJyB8ICdzcHJlYWQnIHwgJ3RvdGFsJyB8ICdtb25leWxpbmUnIHtcclxuICAgIGlmICh2YWx1ZSAmJiB0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnICYmIHZhbHVlLnRyaW0oKSkge1xyXG4gICAgICBjb25zdCBub3JtYWxpemVkID0gdmFsdWUudHJpbSgpLnRvTG93ZXJDYXNlKCkgYXMgJ3Byb3AnIHwgJ3NwcmVhZCcgfCAndG90YWwnIHwgJ21vbmV5bGluZSc7XHJcbiAgICAgIGlmIChQSUNLX1RZUEVfVkFMVUVTLmluY2x1ZGVzKG5vcm1hbGl6ZWQpKSB7XHJcbiAgICAgICAgcmV0dXJuIG5vcm1hbGl6ZWQ7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBmYWxsYmFja3NVc2VkLnB1c2goJ3BpY2tUeXBlOnByb3AnKTtcclxuICAgIHJldHVybiAncHJvcCc7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGNhbGN1bGF0ZURhdGFRdWFsaXR5KFxyXG4gICAgdmFsaWRhdGVkRGF0YTogVmFsaWRhdGVkU3BvcnRzUHJvcCxcclxuICAgIHJhd0RhdGE6IFJhd1Nwb3J0c0RhdGEsXHJcbiAgICBlcnJvcnM6IFZhbGlkYXRpb25FcnJvcltdXHJcbiAgKTogRGF0YVF1YWxpdHlNZXRyaWNzIHtcclxuICAgIGNvbnN0IHJlcXVpcmVkRmllbGRzUHJlc2VudCA9IFJFUVVJUkVEX1BST1BfRklFTERTLmZpbHRlcihcclxuICAgICAgZmllbGQgPT5cclxuICAgICAgICB2YWxpZGF0ZWREYXRhW2ZpZWxkXSAhPT0gdW5kZWZpbmVkICYmXHJcbiAgICAgICAgdmFsaWRhdGVkRGF0YVtmaWVsZF0gIT09IG51bGwgJiZcclxuICAgICAgICB2YWxpZGF0ZWREYXRhW2ZpZWxkXSAhPT0gJydcclxuICAgICkubGVuZ3RoO1xyXG5cclxuICAgIGNvbnN0IGNvbXBsZXRlbmVzcyA9IChyZXF1aXJlZEZpZWxkc1ByZXNlbnQgLyBSRVFVSVJFRF9QUk9QX0ZJRUxEUy5sZW5ndGgpICogMTAwO1xyXG5cclxuICAgIGNvbnN0IGVycm9yQ291bnQgPSBlcnJvcnMuZmlsdGVyKGUgPT4gZS5zZXZlcml0eSA9PT0gJ2Vycm9yJykubGVuZ3RoO1xyXG4gICAgY29uc3Qgd2FybmluZ0NvdW50ID0gZXJyb3JzLmZpbHRlcihlID0+IGUuc2V2ZXJpdHkgPT09ICd3YXJuaW5nJykubGVuZ3RoO1xyXG4gICAgY29uc3QgYWNjdXJhY3kgPSBNYXRoLm1heCgwLCAxMDAgLSBlcnJvckNvdW50ICogMjAgLSB3YXJuaW5nQ291bnQgKiA1KTtcclxuXHJcbiAgICAvLyBDaGVjayBjb25zaXN0ZW5jeSAocHJvcGVyIGRhdGEgdHlwZXMsIHJlYXNvbmFibGUgdmFsdWVzKVxyXG4gICAgbGV0IGNvbnNpc3RlbmN5U2NvcmUgPSAxMDA7XHJcbiAgICBpZiAodHlwZW9mIHZhbGlkYXRlZERhdGEubGluZSAhPT0gJ251bWJlcicgfHwgaXNOYU4odmFsaWRhdGVkRGF0YS5saW5lKSkgY29uc2lzdGVuY3lTY29yZSAtPSAxMDtcclxuICAgIGlmICh0eXBlb2YgdmFsaWRhdGVkRGF0YS5jb25maWRlbmNlICE9PSAnbnVtYmVyJyB8fCBpc05hTih2YWxpZGF0ZWREYXRhLmNvbmZpZGVuY2UpKVxyXG4gICAgICBjb25zaXN0ZW5jeVNjb3JlIC09IDE1O1xyXG4gICAgaWYgKCFTUE9SVF9WQUxVRVMuaW5jbHVkZXModmFsaWRhdGVkRGF0YS5zcG9ydCBhcyBhbnkpICYmIHZhbGlkYXRlZERhdGEuc3BvcnQgIT09ICdVbmtub3duJylcclxuICAgICAgY29uc2lzdGVuY3lTY29yZSAtPSAyMDtcclxuXHJcbiAgICAvLyBUaW1lbGluZXNzIGJhc2VkIG9uIGRhdGEgZnJlc2huZXNzXHJcbiAgICBjb25zdCBkYXRhQWdlID1cclxuICAgICAgRGF0ZS5ub3coKSAtIChyYXdEYXRhLnRpbWVzdGFtcCA/IG5ldyBEYXRlKHJhd0RhdGEudGltZXN0YW1wKS5nZXRUaW1lKCkgOiBEYXRlLm5vdygpKTtcclxuICAgIGNvbnN0IHRpbWVsaW5lc3MgPSBNYXRoLm1heCgwLCAxMDAgLSAoZGF0YUFnZSAvICgxMDAwICogNjAgKiA2MCkpICogMik7IC8vIFJlZHVjZSBieSAyIHBvaW50cyBwZXIgaG91clxyXG5cclxuICAgIHJldHVybiB7XHJcbiAgICAgIGNvbXBsZXRlbmVzcyxcclxuICAgICAgYWNjdXJhY3ksXHJcbiAgICAgIGNvbnNpc3RlbmN5OiBNYXRoLm1heCgwLCBjb25zaXN0ZW5jeVNjb3JlKSxcclxuICAgICAgdGltZWxpbmVzcyxcclxuICAgIH07XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGNhbGN1bGF0ZU92ZXJhbGxRdWFsaXR5U2NvcmUobWV0cmljczogRGF0YVF1YWxpdHlNZXRyaWNzKTogbnVtYmVyIHtcclxuICAgIC8vIFdlaWdodGVkIGF2ZXJhZ2U6IGNvbXBsZXRlbmVzcyBhbmQgYWNjdXJhY3kgYXJlIG1vc3QgaW1wb3J0YW50XHJcbiAgICByZXR1cm4gTWF0aC5yb3VuZChcclxuICAgICAgbWV0cmljcy5jb21wbGV0ZW5lc3MgKiAwLjMgK1xyXG4gICAgICAgIG1ldHJpY3MuYWNjdXJhY3kgKiAwLjQgK1xyXG4gICAgICAgIG1ldHJpY3MuY29uc2lzdGVuY3kgKiAwLjIgK1xyXG4gICAgICAgIG1ldHJpY3MudGltZWxpbmVzcyAqIDAuMVxyXG4gICAgKTtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgaGFzUmVxdWlyZWRGaWVsZHMoZGF0YTogUGFydGlhbDxWYWxpZGF0ZWRTcG9ydHNQcm9wPik6IGJvb2xlYW4ge1xyXG4gICAgcmV0dXJuIFJFUVVJUkVEX1BST1BfRklFTERTLmV2ZXJ5KFxyXG4gICAgICBmaWVsZCA9PiBkYXRhW2ZpZWxkXSAhPT0gdW5kZWZpbmVkICYmIGRhdGFbZmllbGRdICE9PSBudWxsICYmIGRhdGFbZmllbGRdICE9PSAnJ1xyXG4gICAgKTtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgbG9nVmFsaWRhdGlvblJlc3VsdChcclxuICAgIGlzVmFsaWQ6IGJvb2xlYW4sXHJcbiAgICBlcnJvcnM6IFZhbGlkYXRpb25FcnJvcltdLFxyXG4gICAgd2FybmluZ3M6IHN0cmluZ1tdLFxyXG4gICAgZGF0YTogUGFydGlhbDxWYWxpZGF0ZWRTcG9ydHNQcm9wPixcclxuICAgIHN0YXJ0VGltZTogbnVtYmVyXHJcbiAgKTogdm9pZCB7XHJcbiAgICB0aGlzLmxvZ2dlcih7XHJcbiAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxyXG4gICAgICBsZXZlbDogaXNWYWxpZCA/ICdpbmZvJyA6ICd3YXJuJyxcclxuICAgICAgY29tcG9uZW50OiAnRGF0YVZhbGlkYXRvcicsXHJcbiAgICAgIG9wZXJhdGlvbjogJ3ZhbGlkYXRlU3BvcnRzUHJvcCcsXHJcbiAgICAgIG1ldGFkYXRhOiB7XHJcbiAgICAgICAgc3BvcnQ6IGRhdGEuc3BvcnQsXHJcbiAgICAgICAgZHVyYXRpb246IERhdGUubm93KCkgLSBzdGFydFRpbWUsXHJcbiAgICAgICAgZGF0YVF1YWxpdHk6IGRhdGEucXVhbGl0eVNjb3JlLFxyXG4gICAgICAgIGVycm9yc0NvdW50OiBlcnJvcnMubGVuZ3RoLFxyXG4gICAgICAgIGZhbGxiYWNrc1VzZWQ6IGRhdGEuX3ZhbGlkYXRpb25NZXRhPy5mYWxsYmFja3NVc2VkLFxyXG4gICAgICB9LFxyXG4gICAgICBtZXNzYWdlOiBgVmFsaWRhdGlvbiAke2lzVmFsaWQgPyAncGFzc2VkJyA6ICdmYWlsZWQnfTogJHtlcnJvcnMubGVuZ3RofSBlcnJvcnMsICR7XHJcbiAgICAgICAgd2FybmluZ3MubGVuZ3RoXHJcbiAgICAgIH0gd2FybmluZ3NgLFxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGluaXRpYWxpemVOb3JtYWxpemF0aW9uQ29uZmlncygpOiB2b2lkIHtcclxuICAgIC8vIE1MQiBjb25maWd1cmF0aW9uXHJcbiAgICB0aGlzLm5vcm1hbGl6YXRpb25Db25maWdzLnNldCgnTUxCJywge1xyXG4gICAgICBzcG9ydDogJ01MQicsXHJcbiAgICAgIGZpZWxkTWFwcGluZ3M6IHtcclxuICAgICAgICBpZDogWydpZCcsICdldmVudF9pZCcsICdwcm9wX2lkJ10sXHJcbiAgICAgICAgcGxheWVyOiBbJ3BsYXllcicsICdwbGF5ZXJfbmFtZSddLFxyXG4gICAgICAgIG1hdGNodXA6IFsnbWF0Y2h1cCcsICdldmVudF9uYW1lJ10sXHJcbiAgICAgICAgc3RhdDogWydzdGF0JywgJ3N0YXRfdHlwZSddLFxyXG4gICAgICAgIGxpbmU6IFsnbGluZScsICdsaW5lX3Njb3JlJ10sXHJcbiAgICAgICAgb3Zlck9kZHM6IFsnb3Zlck9kZHMnLCAnb3Zlcl9vZGRzJ10sXHJcbiAgICAgICAgdW5kZXJPZGRzOiBbJ3VuZGVyT2RkcycsICd1bmRlcl9vZGRzJ10sXHJcbiAgICAgICAgY29uZmlkZW5jZTogWydjb25maWRlbmNlJ10sXHJcbiAgICAgICAgc3BvcnQ6IFsnc3BvcnQnXSxcclxuICAgICAgICBnYW1lVGltZTogWydnYW1lVGltZScsICdzdGFydF90aW1lJ10sXHJcbiAgICAgICAgcGlja1R5cGU6IFsncGlja1R5cGUnXSxcclxuICAgICAgfSxcclxuICAgICAgdmFsaWRhdGlvblJ1bGVzOiBbXSwgLy8gV2lsbCBiZSBwb3B1bGF0ZWQgYXMgbmVlZGVkXHJcbiAgICAgIGZhbGxiYWNrVmFsdWVzOiB7XHJcbiAgICAgICAgc3BvcnQ6ICdNTEInLFxyXG4gICAgICAgIHBpY2tUeXBlOiAncHJvcCcsXHJcbiAgICAgICAgY29uZmlkZW5jZTogMCxcclxuICAgICAgfSxcclxuICAgICAgcmVxdWlyZWRGaWVsZHM6IFsuLi5SRVFVSVJFRF9QUk9QX0ZJRUxEU10sXHJcbiAgICAgIG9wdGlvbmFsRmllbGRzOiBbJ292ZXJPZGRzJywgJ3VuZGVyT2RkcycsICdnYW1lVGltZScsICdwaWNrVHlwZSddLFxyXG4gICAgfSk7XHJcblxyXG4gICAgLy8gQWRkIGNvbmZpZ3VyYXRpb25zIGZvciBvdGhlciBzcG9ydHMgYXMgbmVlZGVkXHJcbiAgICBbJ05CQScsICdORkwnLCAnTkhMJywgJ1NvY2NlciddLmZvckVhY2goc3BvcnQgPT4ge1xyXG4gICAgICB0aGlzLm5vcm1hbGl6YXRpb25Db25maWdzLnNldChzcG9ydCwge1xyXG4gICAgICAgIC4uLnRoaXMubm9ybWFsaXphdGlvbkNvbmZpZ3MuZ2V0KCdNTEInKSEsXHJcbiAgICAgICAgc3BvcnQsXHJcbiAgICAgICAgZmFsbGJhY2tWYWx1ZXM6IHtcclxuICAgICAgICAgIC4uLnRoaXMubm9ybWFsaXphdGlvbkNvbmZpZ3MuZ2V0KCdNTEInKSEuZmFsbGJhY2tWYWx1ZXMsXHJcbiAgICAgICAgICBzcG9ydCxcclxuICAgICAgICB9LFxyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBnZXROb3JtYWxpemF0aW9uQ29uZmlnKHNwb3J0OiBzdHJpbmcpOiBEYXRhTm9ybWFsaXphdGlvbkNvbmZpZyB7XHJcbiAgICByZXR1cm4gdGhpcy5ub3JtYWxpemF0aW9uQ29uZmlncy5nZXQoc3BvcnQpIHx8IHRoaXMubm9ybWFsaXphdGlvbkNvbmZpZ3MuZ2V0KCdNTEInKSE7XHJcbiAgfVxyXG59XHJcblxyXG4vLyBFeHBvcnQgc2luZ2xldG9uIGluc3RhbmNlXHJcbmV4cG9ydCBjb25zdCBkYXRhVmFsaWRhdG9yID0gbmV3IEVuaGFuY2VkRGF0YVZhbGlkYXRvcigpO1xyXG4iXSwibWFwcGluZ3MiOiI7Ozs7OztBQUtBLElBQUFBLGVBQUEsR0FBQUMsT0FBQTtBQUxBO0FBQ0E7QUFDQTtBQUNBOztBQWlCTyxNQUFNQyxxQkFBcUIsQ0FBQztFQUlqQ0MsV0FBV0EsQ0FBQ0MsTUFBNEMsRUFBRTtJQUFBLEtBSGxEQSxNQUFNO0lBQUEsS0FDTkMsb0JBQW9CLEdBQXlDLElBQUlDLEdBQUcsQ0FBQyxDQUFDO0lBRzVFLElBQUksQ0FBQ0YsTUFBTSxHQUFHQSxNQUFNLElBQUlHLE9BQU8sQ0FBQ0MsR0FBRztJQUNuQyxJQUFJLENBQUNDLDhCQUE4QixDQUFDLENBQUM7RUFDdkM7O0VBRUE7QUFDRjtBQUNBO0VBQ0VDLGtCQUFrQkEsQ0FDaEJDLE9BQXNCLEVBQ3RCQyxLQUFjLEVBQ2RDLE9BQWdELEdBQUcsQ0FBQyxDQUFDLEVBQ2Q7SUFDdkMsTUFBTUMsU0FBUyxHQUFHQyxJQUFJLENBQUNDLEdBQUcsQ0FBQyxDQUFDO0lBQzVCLE1BQU1DLE1BQXlCLEdBQUcsRUFBRTtJQUNwQyxNQUFNQyxRQUFrQixHQUFHLEVBQUU7SUFDN0IsTUFBTUMsZUFBeUIsR0FBRyxFQUFFO0lBQ3BDLE1BQU1DLGFBQXVCLEdBQUcsRUFBRTtJQUVsQyxJQUFJO01BQ0Y7TUFDQSxNQUFNQyxNQUFNLEdBQUcsSUFBSSxDQUFDQyxzQkFBc0IsQ0FBQ1YsS0FBSyxJQUFJRCxPQUFPLENBQUNDLEtBQUssSUFBSSxTQUFTLENBQUM7O01BRS9FO01BQ0EsTUFBTVcsYUFBMkMsR0FBRyxDQUFDLENBQUM7O01BRXREO01BQ0EsSUFBSSxDQUFDQyx5QkFBeUIsQ0FDNUIsSUFBSSxFQUNKYixPQUFPLEVBQ1BZLGFBQWEsRUFDYkYsTUFBTSxFQUNOSixNQUFNLEVBQ05FLGVBQWUsRUFDZkMsYUFDRixDQUFDO01BQ0QsSUFBSSxDQUFDSSx5QkFBeUIsQ0FDNUIsUUFBUSxFQUNSYixPQUFPLEVBQ1BZLGFBQWEsRUFDYkYsTUFBTSxFQUNOSixNQUFNLEVBQ05FLGVBQWUsRUFDZkMsYUFDRixDQUFDO01BQ0QsSUFBSSxDQUFDSSx5QkFBeUIsQ0FDNUIsU0FBUyxFQUNUYixPQUFPLEVBQ1BZLGFBQWEsRUFDYkYsTUFBTSxFQUNOSixNQUFNLEVBQ05FLGVBQWUsRUFDZkMsYUFDRixDQUFDO01BQ0QsSUFBSSxDQUFDSSx5QkFBeUIsQ0FDNUIsTUFBTSxFQUNOYixPQUFPLEVBQ1BZLGFBQWEsRUFDYkYsTUFBTSxFQUNOSixNQUFNLEVBQ05FLGVBQWUsRUFDZkMsYUFDRixDQUFDO01BQ0QsSUFBSSxDQUFDSSx5QkFBeUIsQ0FDNUIsTUFBTSxFQUNOYixPQUFPLEVBQ1BZLGFBQWEsRUFDYkYsTUFBTSxFQUNOSixNQUFNLEVBQ05FLGVBQWUsRUFDZkMsYUFDRixDQUFDO01BQ0QsSUFBSSxDQUFDSSx5QkFBeUIsQ0FDNUIsVUFBVSxFQUNWYixPQUFPLEVBQ1BZLGFBQWEsRUFDYkYsTUFBTSxFQUNOSixNQUFNLEVBQ05FLGVBQWUsRUFDZkMsYUFDRixDQUFDO01BQ0QsSUFBSSxDQUFDSSx5QkFBeUIsQ0FDNUIsV0FBVyxFQUNYYixPQUFPLEVBQ1BZLGFBQWEsRUFDYkYsTUFBTSxFQUNOSixNQUFNLEVBQ05FLGVBQWUsRUFDZkMsYUFDRixDQUFDO01BQ0QsSUFBSSxDQUFDSSx5QkFBeUIsQ0FDNUIsWUFBWSxFQUNaYixPQUFPLEVBQ1BZLGFBQWEsRUFDYkYsTUFBTSxFQUNOSixNQUFNLEVBQ05FLGVBQWUsRUFDZkMsYUFDRixDQUFDO01BQ0QsSUFBSSxDQUFDSSx5QkFBeUIsQ0FDNUIsT0FBTyxFQUNQYixPQUFPLEVBQ1BZLGFBQWEsRUFDYkYsTUFBTSxFQUNOSixNQUFNLEVBQ05FLGVBQWUsRUFDZkMsYUFDRixDQUFDO01BQ0QsSUFBSSxDQUFDSSx5QkFBeUIsQ0FDNUIsVUFBVSxFQUNWYixPQUFPLEVBQ1BZLGFBQWEsRUFDYkYsTUFBTSxFQUNOSixNQUFNLEVBQ05FLGVBQWUsRUFDZkMsYUFDRixDQUFDO01BQ0QsSUFBSSxDQUFDSSx5QkFBeUIsQ0FDNUIsVUFBVSxFQUNWYixPQUFPLEVBQ1BZLGFBQWEsRUFDYkYsTUFBTSxFQUNOSixNQUFNLEVBQ05FLGVBQWUsRUFDZkMsYUFDRixDQUFDOztNQUVEO01BQ0FHLGFBQWEsQ0FBQ0UsVUFBVSxHQUFHWixPQUFPLENBQUNhLE1BQU0sSUFBSSxTQUFTO01BQ3RESCxhQUFhLENBQUNJLFdBQVcsR0FBRyxJQUFJWixJQUFJLENBQUMsQ0FBQyxDQUFDYSxXQUFXLENBQUMsQ0FBQztNQUNwREwsYUFBYSxDQUFDTSxhQUFhLEdBQUdsQixPQUFPO01BQ3JDWSxhQUFhLENBQUNPLGVBQWUsR0FBRztRQUM5QkMsY0FBYyxFQUFFaEIsSUFBSSxDQUFDQyxHQUFHLENBQUMsQ0FBQyxHQUFHRixTQUFTO1FBQ3RDSyxlQUFlO1FBQ2ZDO01BQ0YsQ0FBQzs7TUFFRDtNQUNBLE1BQU1ZLGNBQWMsR0FBRyxJQUFJLENBQUNDLG9CQUFvQixDQUM5Q1YsYUFBYSxFQUNiWixPQUFPLEVBQ1BNLE1BQ0YsQ0FBQztNQUNETSxhQUFhLENBQUNXLFlBQVksR0FBRyxJQUFJLENBQUNDLDRCQUE0QixDQUFDSCxjQUFjLENBQUM7O01BRTlFO01BQ0EsTUFBTUksY0FBYyxHQUFHbkIsTUFBTSxDQUFDb0IsTUFBTSxDQUFDQyxDQUFDLElBQUlBLENBQUMsQ0FBQ0MsUUFBUSxLQUFLLE9BQU8sQ0FBQztNQUNqRSxNQUFNQyxPQUFPLEdBQUdKLGNBQWMsQ0FBQ0ssTUFBTSxLQUFLLENBQUMsSUFBSSxJQUFJLENBQUNDLGlCQUFpQixDQUFDbkIsYUFBYSxDQUFDOztNQUVwRjtNQUNBLElBQUlTLGNBQWMsQ0FBQ1csWUFBWSxHQUFHLEVBQUUsRUFBRTtRQUNwQ3pCLFFBQVEsQ0FBQzBCLElBQUksQ0FBQywwQkFBMEJaLGNBQWMsQ0FBQ1csWUFBWSxDQUFDRSxPQUFPLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQztNQUNwRjtNQUNBLElBQUliLGNBQWMsQ0FBQ2MsUUFBUSxHQUFHLEVBQUUsRUFBRTtRQUNoQzVCLFFBQVEsQ0FBQzBCLElBQUksQ0FBQyxzQkFBc0JaLGNBQWMsQ0FBQ2MsUUFBUSxDQUFDRCxPQUFPLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQztNQUM1RTs7TUFFQTtNQUNBLElBQUksQ0FBQ0UsbUJBQW1CLENBQUNQLE9BQU8sRUFBRXZCLE1BQU0sRUFBRUMsUUFBUSxFQUFFSyxhQUFhLEVBQUVULFNBQVMsQ0FBQztNQUU3RSxPQUFPO1FBQ0wwQixPQUFPO1FBQ1BRLElBQUksRUFBRVIsT0FBTyxHQUFJakIsYUFBYSxHQUEyQjBCLFNBQVM7UUFDbEVoQyxNQUFNO1FBQ05DLFFBQVE7UUFDUmdCLFlBQVksRUFBRVgsYUFBYSxDQUFDVyxZQUFZLElBQUk7TUFDOUMsQ0FBQztJQUNILENBQUMsQ0FBQyxPQUFPZ0IsS0FBSyxFQUFFO01BQ2QsTUFBTUMsZUFBZ0MsR0FBRztRQUN2Q0MsS0FBSyxFQUFFLFlBQVk7UUFDbkJDLE9BQU8sRUFBRSw4QkFDUEgsS0FBSyxZQUFZSSxLQUFLLEdBQUdKLEtBQUssQ0FBQ0csT0FBTyxHQUFHRSxNQUFNLENBQUNMLEtBQUssQ0FBQyxFQUN0RDtRQUNGTSxJQUFJLEVBQUUseUJBQXlCO1FBQy9CakIsUUFBUSxFQUFFLE9BQU87UUFDakJrQixZQUFZLEVBQUU7TUFDaEIsQ0FBQztNQUVELElBQUksQ0FBQ3JELE1BQU0sQ0FBQztRQUNWc0QsU0FBUyxFQUFFLElBQUkzQyxJQUFJLENBQUMsQ0FBQyxDQUFDYSxXQUFXLENBQUMsQ0FBQztRQUNuQytCLEtBQUssRUFBRSxPQUFPO1FBQ2RDLFNBQVMsRUFBRSxlQUFlO1FBQzFCQyxTQUFTLEVBQUUsb0JBQW9CO1FBQy9CQyxRQUFRLEVBQUU7VUFDUmxELEtBQUssRUFBRUEsS0FBSyxJQUFJRCxPQUFPLENBQUNDLEtBQUs7VUFDN0JtRCxRQUFRLEVBQUVoRCxJQUFJLENBQUNDLEdBQUcsQ0FBQyxDQUFDLEdBQUdGLFNBQVM7VUFDaENrRCxXQUFXLEVBQUU7UUFDZixDQUFDO1FBQ0RYLE9BQU8sRUFBRSx5QkFBeUI7UUFDbENILEtBQUssRUFBRTtVQUNMZSxJQUFJLEVBQUVmLEtBQUssWUFBWUksS0FBSyxHQUFHSixLQUFLLENBQUNlLElBQUksR0FBRyxjQUFjO1VBQzFEWixPQUFPLEVBQUVILEtBQUssWUFBWUksS0FBSyxHQUFHSixLQUFLLENBQUNHLE9BQU8sR0FBR0UsTUFBTSxDQUFDTCxLQUFLLENBQUM7VUFDL0RnQixLQUFLLEVBQUVoQixLQUFLLFlBQVlJLEtBQUssR0FBR0osS0FBSyxDQUFDZ0IsS0FBSyxHQUFHakI7UUFDaEQ7TUFDRixDQUFDLENBQUM7TUFFRixPQUFPO1FBQ0xULE9BQU8sRUFBRSxLQUFLO1FBQ2R2QixNQUFNLEVBQUUsQ0FBQ2tDLGVBQWUsQ0FBQztRQUN6QmpDLFFBQVEsRUFBRSxFQUFFO1FBQ1pnQixZQUFZLEVBQUU7TUFDaEIsQ0FBQztJQUNIO0VBQ0Y7O0VBRUE7QUFDRjtBQUNBO0VBQ0VpQyxhQUFhQSxDQUNYQyxZQUE2QixFQUM3QnhELEtBQWMsRUFDZEMsT0FBZ0QsR0FBRyxDQUFDLENBQUMsRUFDWjtJQUN6QyxNQUFNQyxTQUFTLEdBQUdDLElBQUksQ0FBQ0MsR0FBRyxDQUFDLENBQUM7SUFDNUIsTUFBTXFELGNBQXFDLEdBQUcsRUFBRTtJQUNoRCxNQUFNQyxTQUE0QixHQUFHLEVBQUU7SUFDdkMsTUFBTUMsV0FBcUIsR0FBRyxFQUFFO0lBQ2hDLElBQUlDLGlCQUFpQixHQUFHLENBQUM7SUFFekIsS0FBSyxJQUFJQyxDQUFDLEdBQUcsQ0FBQyxFQUFFQSxDQUFDLEdBQUdMLFlBQVksQ0FBQzNCLE1BQU0sRUFBRWdDLENBQUMsRUFBRSxFQUFFO01BQzVDLE1BQU1DLE1BQU0sR0FBRyxJQUFJLENBQUNoRSxrQkFBa0IsQ0FBQzBELFlBQVksQ0FBQ0ssQ0FBQyxDQUFDLEVBQUU3RCxLQUFLLEVBQUU7UUFDN0QsR0FBR0MsT0FBTztRQUNWYSxNQUFNLEVBQUUsR0FBR2IsT0FBTyxDQUFDYSxNQUFNLElBQUksT0FBTyxJQUFJK0MsQ0FBQztNQUMzQyxDQUFDLENBQUM7TUFFRixJQUFJQyxNQUFNLENBQUNsQyxPQUFPLElBQUlrQyxNQUFNLENBQUMxQixJQUFJLEVBQUU7UUFDakNxQixjQUFjLENBQUN6QixJQUFJLENBQUM4QixNQUFNLENBQUMxQixJQUFJLENBQUM7UUFDaEN3QixpQkFBaUIsSUFBSUUsTUFBTSxDQUFDeEMsWUFBWTtNQUMxQztNQUVBb0MsU0FBUyxDQUFDMUIsSUFBSSxDQUFDLEdBQUc4QixNQUFNLENBQUN6RCxNQUFNLENBQUM7TUFDaENzRCxXQUFXLENBQUMzQixJQUFJLENBQUMsR0FBRzhCLE1BQU0sQ0FBQ3hELFFBQVEsQ0FBQztJQUN0QztJQUVBLE1BQU15RCxlQUFlLEdBQ25CTixjQUFjLENBQUM1QixNQUFNLEdBQUcsQ0FBQyxHQUFHK0IsaUJBQWlCLEdBQUdILGNBQWMsQ0FBQzVCLE1BQU0sR0FBRyxDQUFDO0lBQzNFLE1BQU1ELE9BQU8sR0FDWDZCLGNBQWMsQ0FBQzVCLE1BQU0sR0FBRyxDQUFDLElBQUk2QixTQUFTLENBQUNqQyxNQUFNLENBQUNDLENBQUMsSUFBSUEsQ0FBQyxDQUFDQyxRQUFRLEtBQUssT0FBTyxDQUFDLENBQUNFLE1BQU0sS0FBSyxDQUFDO0lBRXpGLElBQUksQ0FBQ3JDLE1BQU0sQ0FBQztNQUNWc0QsU0FBUyxFQUFFLElBQUkzQyxJQUFJLENBQUMsQ0FBQyxDQUFDYSxXQUFXLENBQUMsQ0FBQztNQUNuQytCLEtBQUssRUFBRSxNQUFNO01BQ2JDLFNBQVMsRUFBRSxlQUFlO01BQzFCQyxTQUFTLEVBQUUsZUFBZTtNQUMxQkMsUUFBUSxFQUFFO1FBQ1JsRCxLQUFLO1FBQ0xtRCxRQUFRLEVBQUVoRCxJQUFJLENBQUNDLEdBQUcsQ0FBQyxDQUFDLEdBQUdGLFNBQVM7UUFDaEM4RCxXQUFXLEVBQUVELGVBQWU7UUFDNUJYLFdBQVcsRUFBRU0sU0FBUyxDQUFDN0I7TUFDekIsQ0FBQztNQUNEWSxPQUFPLEVBQUUsK0JBQStCZ0IsY0FBYyxDQUFDNUIsTUFBTSxJQUFJMkIsWUFBWSxDQUFDM0IsTUFBTTtJQUN0RixDQUFDLENBQUM7SUFFRixPQUFPO01BQ0xELE9BQU87TUFDUFEsSUFBSSxFQUFFUixPQUFPLEdBQUc2QixjQUFjLEdBQUdwQixTQUFTO01BQzFDaEMsTUFBTSxFQUFFcUQsU0FBUztNQUNqQnBELFFBQVEsRUFBRXFELFdBQVc7TUFDckJyQyxZQUFZLEVBQUV5QztJQUNoQixDQUFDO0VBQ0g7RUFFUW5ELHlCQUF5QkEsQ0FDL0JxRCxTQUFvQyxFQUNwQ2xFLE9BQXNCLEVBQ3RCWSxhQUEyQyxFQUMzQ0YsTUFBK0IsRUFDL0JKLE1BQXlCLEVBQ3pCRSxlQUF5QixFQUN6QkMsYUFBdUIsRUFDakI7SUFDTixNQUFNMEQsUUFBUSxHQUFHekQsTUFBTSxDQUFDMEQsYUFBYSxDQUFDRixTQUFTLENBQUMsSUFBSSxDQUFDQSxTQUFTLENBQUM7SUFDL0QsSUFBSUcsUUFBYSxHQUFHL0IsU0FBUztJQUM3QixJQUFJZ0MsV0FBK0I7O0lBRW5DO0lBQ0EsS0FBSyxNQUFNQyxPQUFPLElBQUlKLFFBQVEsRUFBRTtNQUM5QixJQUFJbkUsT0FBTyxDQUFDdUUsT0FBTyxDQUFDLEtBQUtqQyxTQUFTLElBQUl0QyxPQUFPLENBQUN1RSxPQUFPLENBQUMsS0FBSyxJQUFJLElBQUl2RSxPQUFPLENBQUN1RSxPQUFPLENBQUMsS0FBSyxFQUFFLEVBQUU7UUFDMUZGLFFBQVEsR0FBR3JFLE9BQU8sQ0FBQ3VFLE9BQU8sQ0FBQztRQUMzQkQsV0FBVyxHQUFHQyxPQUFPO1FBQ3JCO01BQ0Y7SUFDRjs7SUFFQTtJQUNBLElBQUk7TUFDRixRQUFRTCxTQUFTO1FBQ2YsS0FBSyxJQUFJO1VBQ1B0RCxhQUFhLENBQUM0RCxFQUFFLEdBQUcsSUFBSSxDQUFDQyxXQUFXLENBQUNKLFFBQVEsRUFBRXJFLE9BQU8sRUFBRVMsYUFBYSxDQUFDO1VBQ3JFO1FBQ0YsS0FBSyxRQUFRO1VBQ1hHLGFBQWEsQ0FBQzhELE1BQU0sR0FBRyxJQUFJLENBQUNDLGVBQWUsQ0FBQ04sUUFBUSxFQUFFckUsT0FBTyxFQUFFUyxhQUFhLENBQUM7VUFDN0U7UUFDRixLQUFLLFNBQVM7VUFDWkcsYUFBYSxDQUFDZ0UsT0FBTyxHQUFHLElBQUksQ0FBQ0MsZ0JBQWdCLENBQUNSLFFBQVEsRUFBRXJFLE9BQU8sRUFBRVMsYUFBYSxDQUFDO1VBQy9FO1FBQ0YsS0FBSyxNQUFNO1VBQ1RHLGFBQWEsQ0FBQ2tFLElBQUksR0FBRyxJQUFJLENBQUNDLGFBQWEsQ0FBQ1YsUUFBUSxFQUFFNUQsYUFBYSxDQUFDO1VBQ2hFO1FBQ0YsS0FBSyxNQUFNO1VBQ1RHLGFBQWEsQ0FBQ29FLElBQUksR0FBRyxJQUFJLENBQUNDLGFBQWEsQ0FBQ1osUUFBUSxFQUFFL0QsTUFBTSxFQUFFNEQsU0FBUyxDQUFDO1VBQ3BFO1FBQ0YsS0FBSyxVQUFVO1FBQ2YsS0FBSyxXQUFXO1VBQ2J0RCxhQUFhLENBQVNzRCxTQUFTLENBQUMsR0FBRyxJQUFJLENBQUNnQixhQUFhLENBQUNiLFFBQVEsRUFBRS9ELE1BQU0sRUFBRTRELFNBQVMsQ0FBQztVQUNuRjtRQUNGLEtBQUssWUFBWTtVQUNmdEQsYUFBYSxDQUFDdUUsVUFBVSxHQUFHLElBQUksQ0FBQ0MsbUJBQW1CLENBQUNmLFFBQVEsRUFBRS9ELE1BQU0sRUFBRTRELFNBQVMsQ0FBQztVQUNoRjtRQUNGLEtBQUssT0FBTztVQUNWdEQsYUFBYSxDQUFDWCxLQUFLLEdBQUcsSUFBSSxDQUFDb0YsY0FBYyxDQUFDaEIsUUFBUSxFQUFFM0QsTUFBTSxDQUFDVCxLQUFLLEVBQUVLLE1BQU0sRUFBRUcsYUFBYSxDQUFDO1VBQ3hGO1FBQ0YsS0FBSyxVQUFVO1VBQ2JHLGFBQWEsQ0FBQzBFLFFBQVEsR0FBRyxJQUFJLENBQUNDLGlCQUFpQixDQUFDbEIsUUFBUSxFQUFFNUQsYUFBYSxDQUFDO1VBQ3hFO1FBQ0YsS0FBSyxVQUFVO1VBQ2JHLGFBQWEsQ0FBQzRFLFFBQVEsR0FBRyxJQUFJLENBQUNDLGlCQUFpQixDQUFDcEIsUUFBUSxFQUFFNUQsYUFBYSxDQUFDO1VBQ3hFO01BQ0o7O01BRUE7TUFDQSxJQUFJNkQsV0FBVyxJQUFJQSxXQUFXLEtBQUtKLFNBQVMsRUFBRTtRQUM1QzFELGVBQWUsQ0FBQ3lCLElBQUksQ0FBQyxHQUFHaUMsU0FBUyxJQUFJSSxXQUFXLEVBQUUsQ0FBQztNQUNyRDtJQUNGLENBQUMsQ0FBQyxPQUFPL0IsS0FBSyxFQUFFO01BQ2RqQyxNQUFNLENBQUMyQixJQUFJLENBQUM7UUFDVlEsS0FBSyxFQUFFeUIsU0FBUztRQUNoQnhCLE9BQU8sRUFBRSw4QkFDUEgsS0FBSyxZQUFZSSxLQUFLLEdBQUdKLEtBQUssQ0FBQ0csT0FBTyxHQUFHRSxNQUFNLENBQUNMLEtBQUssQ0FBQyxFQUN0RDtRQUNGTSxJQUFJLEVBQUUscUJBQXFCO1FBQzNCakIsUUFBUSxFQUFFLE9BQU87UUFDakJrQixZQUFZLEVBQUUsMENBQTBDb0IsU0FBUztNQUNuRSxDQUFDLENBQUM7SUFDSjtFQUNGO0VBRVFPLFdBQVdBLENBQUNpQixLQUFVLEVBQUUxRixPQUFzQixFQUFFUyxhQUF1QixFQUFVO0lBQ3ZGLElBQUlpRixLQUFLLElBQUksT0FBT0EsS0FBSyxLQUFLLFFBQVEsSUFBSUEsS0FBSyxDQUFDQyxJQUFJLENBQUMsQ0FBQyxFQUFFO01BQ3RELE9BQU9ELEtBQUssQ0FBQ0MsSUFBSSxDQUFDLENBQUM7SUFDckI7O0lBRUE7SUFDQSxNQUFNQyxVQUFVLEdBQUcsR0FBRzVGLE9BQU8sQ0FBQzZGLFdBQVcsSUFBSTdGLE9BQU8sQ0FBQzBFLE1BQU0sSUFBSSxTQUFTLElBQ3RFMUUsT0FBTyxDQUFDOEYsU0FBUyxJQUFJOUYsT0FBTyxDQUFDOEUsSUFBSSxJQUFJLFNBQVMsSUFDNUMxRSxJQUFJLENBQUNDLEdBQUcsQ0FBQyxDQUFDLEVBQUU7SUFDaEJJLGFBQWEsQ0FBQ3dCLElBQUksQ0FBQyxjQUFjLENBQUM7SUFDbEMsT0FBTzJELFVBQVU7RUFDbkI7RUFFUWpCLGVBQWVBLENBQUNlLEtBQVUsRUFBRTFGLE9BQXNCLEVBQUVTLGFBQXVCLEVBQVU7SUFDM0YsSUFBSWlGLEtBQUssSUFBSSxPQUFPQSxLQUFLLEtBQUssUUFBUSxJQUFJQSxLQUFLLENBQUNDLElBQUksQ0FBQyxDQUFDLEVBQUU7TUFDdEQsTUFBTUksVUFBVSxHQUFHTCxLQUFLLENBQUNDLElBQUksQ0FBQyxDQUFDO01BQy9CO01BQ0EsSUFBSUksVUFBVSxDQUFDQyxXQUFXLENBQUMsQ0FBQyxLQUFLLE1BQU0sSUFBSUQsVUFBVSxDQUFDQyxXQUFXLENBQUMsQ0FBQyxLQUFLLE9BQU8sRUFBRTtRQUMvRSxNQUFNQyxRQUFRLEdBQUdqRyxPQUFPLENBQUNrRyxVQUFVLElBQUksY0FBYztRQUNyRHpGLGFBQWEsQ0FBQ3dCLElBQUksQ0FBQyxtQkFBbUIsQ0FBQztRQUN2QyxPQUFPZ0UsUUFBUTtNQUNqQjtNQUNBLE9BQU9GLFVBQVU7SUFDbkI7SUFFQSxNQUFNRSxRQUFRLEdBQUdqRyxPQUFPLENBQUNrRyxVQUFVLElBQUksU0FBUztJQUNoRHpGLGFBQWEsQ0FBQ3dCLElBQUksQ0FBQyxtQkFBbUIsQ0FBQztJQUN2QyxPQUFPZ0UsUUFBUTtFQUNqQjtFQUVRcEIsZ0JBQWdCQSxDQUFDYSxLQUFVLEVBQUUxRixPQUFzQixFQUFFUyxhQUF1QixFQUFVO0lBQzVGLElBQUlpRixLQUFLLElBQUksT0FBT0EsS0FBSyxLQUFLLFFBQVEsSUFBSUEsS0FBSyxDQUFDQyxJQUFJLENBQUMsQ0FBQyxFQUFFO01BQ3RELE9BQU9ELEtBQUssQ0FBQ0MsSUFBSSxDQUFDLENBQUM7SUFDckI7SUFFQSxNQUFNTSxRQUFRLEdBQUdqRyxPQUFPLENBQUNrRyxVQUFVLElBQUksb0JBQW9CO0lBQzNEekYsYUFBYSxDQUFDd0IsSUFBSSxDQUFDLG9CQUFvQixDQUFDO0lBQ3hDLE9BQU9nRSxRQUFRO0VBQ2pCO0VBRVFsQixhQUFhQSxDQUFDVyxLQUFVLEVBQUVqRixhQUF1QixFQUFVO0lBQ2pFLElBQUlpRixLQUFLLElBQUksT0FBT0EsS0FBSyxLQUFLLFFBQVEsSUFBSUEsS0FBSyxDQUFDQyxJQUFJLENBQUMsQ0FBQyxFQUFFO01BQ3RELE9BQU9ELEtBQUssQ0FBQ0MsSUFBSSxDQUFDLENBQUM7SUFDckI7SUFFQWxGLGFBQWEsQ0FBQ3dCLElBQUksQ0FBQyxjQUFjLENBQUM7SUFDbEMsT0FBTyxTQUFTO0VBQ2xCO0VBRVFnRCxhQUFhQSxDQUFDUyxLQUFVLEVBQUVwRixNQUF5QixFQUFFNEQsU0FBaUIsRUFBVTtJQUN0RixJQUFJd0IsS0FBSyxLQUFLLElBQUksSUFBSUEsS0FBSyxLQUFLcEQsU0FBUyxJQUFJb0QsS0FBSyxLQUFLLEVBQUUsRUFBRTtNQUN6RCxPQUFPLENBQUM7SUFDVjtJQUVBLE1BQU1TLFFBQVEsR0FBRyxPQUFPVCxLQUFLLEtBQUssUUFBUSxHQUFHQSxLQUFLLEdBQUdVLFVBQVUsQ0FBQ3hELE1BQU0sQ0FBQzhDLEtBQUssQ0FBQyxDQUFDO0lBRTlFLElBQUlXLEtBQUssQ0FBQ0YsUUFBUSxDQUFDLEVBQUU7TUFDbkI3RixNQUFNLENBQUMyQixJQUFJLENBQUM7UUFDVlEsS0FBSyxFQUFFeUIsU0FBUztRQUNoQnhCLE9BQU8sRUFBRSx1QkFBdUJnRCxLQUFLLEVBQUU7UUFDdkM3QyxJQUFJLEVBQUUsZ0JBQWdCO1FBQ3RCakIsUUFBUSxFQUFFLFNBQVM7UUFDbkJrQixZQUFZLEVBQUU7TUFDaEIsQ0FBQyxDQUFDO01BQ0YsT0FBTyxDQUFDO0lBQ1Y7SUFFQSxPQUFPcUQsUUFBUTtFQUNqQjtFQUVRakIsYUFBYUEsQ0FBQ1EsS0FBVSxFQUFFcEYsTUFBeUIsRUFBRTRELFNBQWlCLEVBQVU7SUFDdEYsSUFBSXdCLEtBQUssS0FBSyxJQUFJLElBQUlBLEtBQUssS0FBS3BELFNBQVMsSUFBSW9ELEtBQUssS0FBSyxFQUFFLEVBQUU7TUFDekQsT0FBTyxDQUFDO0lBQ1Y7SUFFQSxNQUFNUyxRQUFRLEdBQUcsT0FBT1QsS0FBSyxLQUFLLFFBQVEsR0FBR0EsS0FBSyxHQUFHVSxVQUFVLENBQUN4RCxNQUFNLENBQUM4QyxLQUFLLENBQUMsQ0FBQztJQUU5RSxJQUFJVyxLQUFLLENBQUNGLFFBQVEsQ0FBQyxFQUFFO01BQ25CN0YsTUFBTSxDQUFDMkIsSUFBSSxDQUFDO1FBQ1ZRLEtBQUssRUFBRXlCLFNBQVM7UUFDaEJ4QixPQUFPLEVBQUUsdUJBQXVCZ0QsS0FBSyxFQUFFO1FBQ3ZDN0MsSUFBSSxFQUFFLGNBQWM7UUFDcEJqQixRQUFRLEVBQUUsU0FBUztRQUNuQmtCLFlBQVksRUFBRTtNQUNoQixDQUFDLENBQUM7TUFDRixPQUFPLENBQUM7SUFDVjtJQUVBLE9BQU9xRCxRQUFRO0VBQ2pCO0VBRVFmLG1CQUFtQkEsQ0FBQ00sS0FBVSxFQUFFcEYsTUFBeUIsRUFBRTRELFNBQWlCLEVBQVU7SUFDNUYsSUFBSXdCLEtBQUssS0FBSyxJQUFJLElBQUlBLEtBQUssS0FBS3BELFNBQVMsSUFBSW9ELEtBQUssS0FBSyxFQUFFLEVBQUU7TUFDekQsT0FBTyxDQUFDO0lBQ1Y7SUFFQSxNQUFNUyxRQUFRLEdBQUcsT0FBT1QsS0FBSyxLQUFLLFFBQVEsR0FBR0EsS0FBSyxHQUFHVSxVQUFVLENBQUN4RCxNQUFNLENBQUM4QyxLQUFLLENBQUMsQ0FBQztJQUU5RSxJQUFJVyxLQUFLLENBQUNGLFFBQVEsQ0FBQyxFQUFFO01BQ25CN0YsTUFBTSxDQUFDMkIsSUFBSSxDQUFDO1FBQ1ZRLEtBQUssRUFBRXlCLFNBQVM7UUFDaEJ4QixPQUFPLEVBQUUsNkJBQTZCZ0QsS0FBSyxFQUFFO1FBQzdDN0MsSUFBSSxFQUFFLG9CQUFvQjtRQUMxQmpCLFFBQVEsRUFBRSxPQUFPO1FBQ2pCa0IsWUFBWSxFQUFFO01BQ2hCLENBQUMsQ0FBQztNQUNGLE9BQU8sQ0FBQztJQUNWO0lBRUEsSUFBSXFELFFBQVEsR0FBR0csb0NBQW9CLElBQUlILFFBQVEsR0FBR0ksb0NBQW9CLEVBQUU7TUFDdEVqRyxNQUFNLENBQUMyQixJQUFJLENBQUM7UUFDVlEsS0FBSyxFQUFFeUIsU0FBUztRQUNoQnhCLE9BQU8sRUFBRSxrQ0FBa0N5RCxRQUFRLG1CQUFtQjtRQUN0RXRELElBQUksRUFBRSx5QkFBeUI7UUFDL0JqQixRQUFRLEVBQUUsU0FBUztRQUNuQmtCLFlBQVksRUFBRSxzQ0FBc0N3RCxvQ0FBb0IsSUFBSUMsb0NBQW9CO01BQ2xHLENBQUMsQ0FBQztNQUNGLE9BQU9DLElBQUksQ0FBQ0MsR0FBRyxDQUFDSCxvQ0FBb0IsRUFBRUUsSUFBSSxDQUFDRSxHQUFHLENBQUNILG9DQUFvQixFQUFFSixRQUFRLENBQUMsQ0FBQztJQUNqRjtJQUVBLE9BQU9BLFFBQVE7RUFDakI7RUFFUWQsY0FBY0EsQ0FDcEJLLEtBQVUsRUFDVmlCLFdBQW1CLEVBQ25CckcsTUFBeUIsRUFDekJHLGFBQXVCLEVBQ2Y7SUFDUixJQUFJaUYsS0FBSyxJQUFJLE9BQU9BLEtBQUssS0FBSyxRQUFRLElBQUlBLEtBQUssQ0FBQ0MsSUFBSSxDQUFDLENBQUMsRUFBRTtNQUN0RCxNQUFNSSxVQUFVLEdBQUdMLEtBQUssQ0FBQ0MsSUFBSSxDQUFDLENBQUMsQ0FBQ2lCLFdBQVcsQ0FBQyxDQUFDO01BQzdDLElBQUlDLDRCQUFZLENBQUNDLFFBQVEsQ0FBQ2YsVUFBaUIsQ0FBQyxFQUFFO1FBQzVDLE9BQU9BLFVBQVU7TUFDbkI7SUFDRjs7SUFFQTtJQUNBLElBQUlZLFdBQVcsSUFBSUEsV0FBVyxLQUFLLFNBQVMsRUFBRTtNQUM1Q2xHLGFBQWEsQ0FBQ3dCLElBQUksQ0FBQyxjQUFjLENBQUM7TUFDbEMsT0FBTzBFLFdBQVc7SUFDcEI7SUFFQXJHLE1BQU0sQ0FBQzJCLElBQUksQ0FBQztNQUNWUSxLQUFLLEVBQUUsT0FBTztNQUNkQyxPQUFPLEVBQUUsbUNBQW1DZ0QsS0FBSyxFQUFFO01BQ25EN0MsSUFBSSxFQUFFLGVBQWU7TUFDckJqQixRQUFRLEVBQUUsT0FBTztNQUNqQmtCLFlBQVksRUFBRSxnQ0FBZ0MrRCw0QkFBWSxDQUFDRSxJQUFJLENBQUMsSUFBSSxDQUFDO0lBQ3ZFLENBQUMsQ0FBQztJQUVGdEcsYUFBYSxDQUFDd0IsSUFBSSxDQUFDLGVBQWUsQ0FBQztJQUNuQyxPQUFPLFNBQVM7RUFDbEI7RUFFUXNELGlCQUFpQkEsQ0FBQ0csS0FBVSxFQUFFakYsYUFBdUIsRUFBVTtJQUNyRSxJQUFJaUYsS0FBSyxJQUFJLE9BQU9BLEtBQUssS0FBSyxRQUFRLElBQUlBLEtBQUssQ0FBQ0MsSUFBSSxDQUFDLENBQUMsRUFBRTtNQUN0RCxJQUFJO1FBQ0Y7UUFDQSxNQUFNcUIsSUFBSSxHQUFHLElBQUk1RyxJQUFJLENBQUNzRixLQUFLLENBQUM7UUFDNUIsSUFBSSxDQUFDVyxLQUFLLENBQUNXLElBQUksQ0FBQ0MsT0FBTyxDQUFDLENBQUMsQ0FBQyxFQUFFO1VBQzFCLE9BQU9ELElBQUksQ0FBQy9GLFdBQVcsQ0FBQyxDQUFDO1FBQzNCO01BQ0YsQ0FBQyxDQUFDLE9BQU9zQixLQUFLLEVBQUU7UUFDZDtNQUFBO0lBRUo7SUFFQSxJQUFJLE9BQU9tRCxLQUFLLEtBQUssUUFBUSxFQUFFO01BQzdCLElBQUk7UUFDRixNQUFNc0IsSUFBSSxHQUFHLElBQUk1RyxJQUFJLENBQUNzRixLQUFLLENBQUM7UUFDNUIsSUFBSSxDQUFDVyxLQUFLLENBQUNXLElBQUksQ0FBQ0MsT0FBTyxDQUFDLENBQUMsQ0FBQyxFQUFFO1VBQzFCLE9BQU9ELElBQUksQ0FBQy9GLFdBQVcsQ0FBQyxDQUFDO1FBQzNCO01BQ0YsQ0FBQyxDQUFDLE9BQU9zQixLQUFLLEVBQUU7UUFDZDtNQUFBO0lBRUo7SUFFQTlCLGFBQWEsQ0FBQ3dCLElBQUksQ0FBQyxrQkFBa0IsQ0FBQztJQUN0QyxPQUFPLElBQUk3QixJQUFJLENBQUMsQ0FBQyxDQUFDYSxXQUFXLENBQUMsQ0FBQztFQUNqQztFQUVRd0UsaUJBQWlCQSxDQUN2QkMsS0FBVSxFQUNWakYsYUFBdUIsRUFDb0I7SUFDM0MsSUFBSWlGLEtBQUssSUFBSSxPQUFPQSxLQUFLLEtBQUssUUFBUSxJQUFJQSxLQUFLLENBQUNDLElBQUksQ0FBQyxDQUFDLEVBQUU7TUFDdEQsTUFBTUksVUFBVSxHQUFHTCxLQUFLLENBQUNDLElBQUksQ0FBQyxDQUFDLENBQUNLLFdBQVcsQ0FBQyxDQUE4QztNQUMxRixJQUFJa0IsZ0NBQWdCLENBQUNKLFFBQVEsQ0FBQ2YsVUFBVSxDQUFDLEVBQUU7UUFDekMsT0FBT0EsVUFBVTtNQUNuQjtJQUNGO0lBRUF0RixhQUFhLENBQUN3QixJQUFJLENBQUMsZUFBZSxDQUFDO0lBQ25DLE9BQU8sTUFBTTtFQUNmO0VBRVFYLG9CQUFvQkEsQ0FDMUJWLGFBQWtDLEVBQ2xDWixPQUFzQixFQUN0Qk0sTUFBeUIsRUFDTDtJQUNwQixNQUFNNkcscUJBQXFCLEdBQUdDLG9DQUFvQixDQUFDMUYsTUFBTSxDQUN2RGUsS0FBSyxJQUNIN0IsYUFBYSxDQUFDNkIsS0FBSyxDQUFDLEtBQUtILFNBQVMsSUFDbEMxQixhQUFhLENBQUM2QixLQUFLLENBQUMsS0FBSyxJQUFJLElBQzdCN0IsYUFBYSxDQUFDNkIsS0FBSyxDQUFDLEtBQUssRUFDN0IsQ0FBQyxDQUFDWCxNQUFNO0lBRVIsTUFBTUUsWUFBWSxHQUFJbUYscUJBQXFCLEdBQUdDLG9DQUFvQixDQUFDdEYsTUFBTSxHQUFJLEdBQUc7SUFFaEYsTUFBTXVGLFVBQVUsR0FBRy9HLE1BQU0sQ0FBQ29CLE1BQU0sQ0FBQ0MsQ0FBQyxJQUFJQSxDQUFDLENBQUNDLFFBQVEsS0FBSyxPQUFPLENBQUMsQ0FBQ0UsTUFBTTtJQUNwRSxNQUFNd0YsWUFBWSxHQUFHaEgsTUFBTSxDQUFDb0IsTUFBTSxDQUFDQyxDQUFDLElBQUlBLENBQUMsQ0FBQ0MsUUFBUSxLQUFLLFNBQVMsQ0FBQyxDQUFDRSxNQUFNO0lBQ3hFLE1BQU1LLFFBQVEsR0FBR3FFLElBQUksQ0FBQ0MsR0FBRyxDQUFDLENBQUMsRUFBRSxHQUFHLEdBQUdZLFVBQVUsR0FBRyxFQUFFLEdBQUdDLFlBQVksR0FBRyxDQUFDLENBQUM7O0lBRXRFO0lBQ0EsSUFBSUMsZ0JBQWdCLEdBQUcsR0FBRztJQUMxQixJQUFJLE9BQU8zRyxhQUFhLENBQUNvRSxJQUFJLEtBQUssUUFBUSxJQUFJcUIsS0FBSyxDQUFDekYsYUFBYSxDQUFDb0UsSUFBSSxDQUFDLEVBQUV1QyxnQkFBZ0IsSUFBSSxFQUFFO0lBQy9GLElBQUksT0FBTzNHLGFBQWEsQ0FBQ3VFLFVBQVUsS0FBSyxRQUFRLElBQUlrQixLQUFLLENBQUN6RixhQUFhLENBQUN1RSxVQUFVLENBQUMsRUFDakZvQyxnQkFBZ0IsSUFBSSxFQUFFO0lBQ3hCLElBQUksQ0FBQ1YsNEJBQVksQ0FBQ0MsUUFBUSxDQUFDbEcsYUFBYSxDQUFDWCxLQUFZLENBQUMsSUFBSVcsYUFBYSxDQUFDWCxLQUFLLEtBQUssU0FBUyxFQUN6RnNILGdCQUFnQixJQUFJLEVBQUU7O0lBRXhCO0lBQ0EsTUFBTUMsT0FBTyxHQUNYcEgsSUFBSSxDQUFDQyxHQUFHLENBQUMsQ0FBQyxJQUFJTCxPQUFPLENBQUMrQyxTQUFTLEdBQUcsSUFBSTNDLElBQUksQ0FBQ0osT0FBTyxDQUFDK0MsU0FBUyxDQUFDLENBQUNrRSxPQUFPLENBQUMsQ0FBQyxHQUFHN0csSUFBSSxDQUFDQyxHQUFHLENBQUMsQ0FBQyxDQUFDO0lBQ3ZGLE1BQU1vSCxVQUFVLEdBQUdqQixJQUFJLENBQUNDLEdBQUcsQ0FBQyxDQUFDLEVBQUUsR0FBRyxHQUFJZSxPQUFPLElBQUksSUFBSSxHQUFHLEVBQUUsR0FBRyxFQUFFLENBQUMsR0FBSSxDQUFDLENBQUMsQ0FBQyxDQUFDOztJQUV4RSxPQUFPO01BQ0x4RixZQUFZO01BQ1pHLFFBQVE7TUFDUnVGLFdBQVcsRUFBRWxCLElBQUksQ0FBQ0MsR0FBRyxDQUFDLENBQUMsRUFBRWMsZ0JBQWdCLENBQUM7TUFDMUNFO0lBQ0YsQ0FBQztFQUNIO0VBRVFqRyw0QkFBNEJBLENBQUNtRyxPQUEyQixFQUFVO0lBQ3hFO0lBQ0EsT0FBT25CLElBQUksQ0FBQ29CLEtBQUssQ0FDZkQsT0FBTyxDQUFDM0YsWUFBWSxHQUFHLEdBQUcsR0FDeEIyRixPQUFPLENBQUN4RixRQUFRLEdBQUcsR0FBRyxHQUN0QndGLE9BQU8sQ0FBQ0QsV0FBVyxHQUFHLEdBQUcsR0FDekJDLE9BQU8sQ0FBQ0YsVUFBVSxHQUFHLEdBQ3pCLENBQUM7RUFDSDtFQUVRMUYsaUJBQWlCQSxDQUFDTSxJQUFrQyxFQUFXO0lBQ3JFLE9BQU8rRSxvQ0FBb0IsQ0FBQ1MsS0FBSyxDQUMvQnBGLEtBQUssSUFBSUosSUFBSSxDQUFDSSxLQUFLLENBQUMsS0FBS0gsU0FBUyxJQUFJRCxJQUFJLENBQUNJLEtBQUssQ0FBQyxLQUFLLElBQUksSUFBSUosSUFBSSxDQUFDSSxLQUFLLENBQUMsS0FBSyxFQUNoRixDQUFDO0VBQ0g7RUFFUUwsbUJBQW1CQSxDQUN6QlAsT0FBZ0IsRUFDaEJ2QixNQUF5QixFQUN6QkMsUUFBa0IsRUFDbEI4QixJQUFrQyxFQUNsQ2xDLFNBQWlCLEVBQ1g7SUFDTixJQUFJLENBQUNWLE1BQU0sQ0FBQztNQUNWc0QsU0FBUyxFQUFFLElBQUkzQyxJQUFJLENBQUMsQ0FBQyxDQUFDYSxXQUFXLENBQUMsQ0FBQztNQUNuQytCLEtBQUssRUFBRW5CLE9BQU8sR0FBRyxNQUFNLEdBQUcsTUFBTTtNQUNoQ29CLFNBQVMsRUFBRSxlQUFlO01BQzFCQyxTQUFTLEVBQUUsb0JBQW9CO01BQy9CQyxRQUFRLEVBQUU7UUFDUmxELEtBQUssRUFBRW9DLElBQUksQ0FBQ3BDLEtBQUs7UUFDakJtRCxRQUFRLEVBQUVoRCxJQUFJLENBQUNDLEdBQUcsQ0FBQyxDQUFDLEdBQUdGLFNBQVM7UUFDaEM4RCxXQUFXLEVBQUU1QixJQUFJLENBQUNkLFlBQVk7UUFDOUI4QixXQUFXLEVBQUUvQyxNQUFNLENBQUN3QixNQUFNO1FBQzFCckIsYUFBYSxFQUFFNEIsSUFBSSxDQUFDbEIsZUFBZSxFQUFFVjtNQUN2QyxDQUFDO01BQ0RpQyxPQUFPLEVBQUUsY0FBY2IsT0FBTyxHQUFHLFFBQVEsR0FBRyxRQUFRLEtBQUt2QixNQUFNLENBQUN3QixNQUFNLFlBQ3BFdkIsUUFBUSxDQUFDdUIsTUFBTTtJQUVuQixDQUFDLENBQUM7RUFDSjtFQUVRaEMsOEJBQThCQSxDQUFBLEVBQVM7SUFDN0M7SUFDQSxJQUFJLENBQUNKLG9CQUFvQixDQUFDb0ksR0FBRyxDQUFDLEtBQUssRUFBRTtNQUNuQzdILEtBQUssRUFBRSxLQUFLO01BQ1ptRSxhQUFhLEVBQUU7UUFDYkksRUFBRSxFQUFFLENBQUMsSUFBSSxFQUFFLFVBQVUsRUFBRSxTQUFTLENBQUM7UUFDakNFLE1BQU0sRUFBRSxDQUFDLFFBQVEsRUFBRSxhQUFhLENBQUM7UUFDakNFLE9BQU8sRUFBRSxDQUFDLFNBQVMsRUFBRSxZQUFZLENBQUM7UUFDbENFLElBQUksRUFBRSxDQUFDLE1BQU0sRUFBRSxXQUFXLENBQUM7UUFDM0JFLElBQUksRUFBRSxDQUFDLE1BQU0sRUFBRSxZQUFZLENBQUM7UUFDNUIrQyxRQUFRLEVBQUUsQ0FBQyxVQUFVLEVBQUUsV0FBVyxDQUFDO1FBQ25DQyxTQUFTLEVBQUUsQ0FBQyxXQUFXLEVBQUUsWUFBWSxDQUFDO1FBQ3RDN0MsVUFBVSxFQUFFLENBQUMsWUFBWSxDQUFDO1FBQzFCbEYsS0FBSyxFQUFFLENBQUMsT0FBTyxDQUFDO1FBQ2hCcUYsUUFBUSxFQUFFLENBQUMsVUFBVSxFQUFFLFlBQVksQ0FBQztRQUNwQ0UsUUFBUSxFQUFFLENBQUMsVUFBVTtNQUN2QixDQUFDO01BQ0R5QyxlQUFlLEVBQUUsRUFBRTtNQUFFO01BQ3JCQyxjQUFjLEVBQUU7UUFDZGpJLEtBQUssRUFBRSxLQUFLO1FBQ1p1RixRQUFRLEVBQUUsTUFBTTtRQUNoQkwsVUFBVSxFQUFFO01BQ2QsQ0FBQztNQUNEZ0QsY0FBYyxFQUFFLENBQUMsR0FBR2Ysb0NBQW9CLENBQUM7TUFDekNnQixjQUFjLEVBQUUsQ0FBQyxVQUFVLEVBQUUsV0FBVyxFQUFFLFVBQVUsRUFBRSxVQUFVO0lBQ2xFLENBQUMsQ0FBQzs7SUFFRjtJQUNBLENBQUMsS0FBSyxFQUFFLEtBQUssRUFBRSxLQUFLLEVBQUUsUUFBUSxDQUFDLENBQUNDLE9BQU8sQ0FBQ3BJLEtBQUssSUFBSTtNQUMvQyxJQUFJLENBQUNQLG9CQUFvQixDQUFDb0ksR0FBRyxDQUFDN0gsS0FBSyxFQUFFO1FBQ25DLEdBQUcsSUFBSSxDQUFDUCxvQkFBb0IsQ0FBQzRJLEdBQUcsQ0FBQyxLQUFLLENBQUU7UUFDeENySSxLQUFLO1FBQ0xpSSxjQUFjLEVBQUU7VUFDZCxHQUFHLElBQUksQ0FBQ3hJLG9CQUFvQixDQUFDNEksR0FBRyxDQUFDLEtBQUssQ0FBQyxDQUFFSixjQUFjO1VBQ3ZEakk7UUFDRjtNQUNGLENBQUMsQ0FBQztJQUNKLENBQUMsQ0FBQztFQUNKO0VBRVFVLHNCQUFzQkEsQ0FBQ1YsS0FBYSxFQUEyQjtJQUNyRSxPQUFPLElBQUksQ0FBQ1Asb0JBQW9CLENBQUM0SSxHQUFHLENBQUNySSxLQUFLLENBQUMsSUFBSSxJQUFJLENBQUNQLG9CQUFvQixDQUFDNEksR0FBRyxDQUFDLEtBQUssQ0FBRTtFQUN0RjtBQUNGOztBQUVBO0FBQUFDLE9BQUEsQ0FBQWhKLHFCQUFBLEdBQUFBLHFCQUFBO0FBQ08sTUFBTWlKLGFBQWEsR0FBQUQsT0FBQSxDQUFBQyxhQUFBLEdBQUcsSUFBSWpKLHFCQUFxQixDQUFDLENBQUMiLCJpZ25vcmVMaXN0IjpbXX0=