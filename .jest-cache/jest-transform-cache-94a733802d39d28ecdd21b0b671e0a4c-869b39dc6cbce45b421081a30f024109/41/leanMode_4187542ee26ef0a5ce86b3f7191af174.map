{"version":3,"names":["isLeanMode","import","meta","env","VITE_DEV_LEAN_MODE","qs","URLSearchParams","window","location","search","has","get","error","console","warn","localStorage","getItem","setLeanMode","enabled","setItem","removeItem","getLeanModeStatus","source","logLeanModeStatus","status","info"],"sources":["leanMode.ts"],"sourcesContent":["/**\r\n * Lean Mode Utility\r\n * Determines if the application should run in lean mode with reduced monitoring and features\r\n * \r\n * Lean mode is activated by:\r\n * - Environment variable: VITE_DEV_LEAN_MODE=true\r\n * - URL parameter: ?lean=true\r\n * - localStorage: devLeanMode=true\r\n */\r\n\r\n/**\r\n * Check if lean mode is enabled\r\n * @returns true if lean mode is active, false otherwise\r\n */\r\nexport function isLeanMode(): boolean {\r\n  // Check environment variable first\r\n  if (import.meta.env.VITE_DEV_LEAN_MODE === \"true\") {\r\n    return true;\r\n  }\r\n  \r\n  // Check URL parameters\r\n  try {\r\n    const qs = new URLSearchParams(window.location.search);\r\n    if (qs.has(\"lean\") && qs.get(\"lean\") !== \"false\") {\r\n      return true;\r\n    }\r\n  } catch (error) {\r\n    console.warn(\"[LeanMode] Failed to parse URL parameters:\", error);\r\n  }\r\n  \r\n  // Check localStorage\r\n  try {\r\n    if (localStorage.getItem(\"devLeanMode\") === \"true\") {\r\n      return true;\r\n    }\r\n  } catch (error) {\r\n    console.warn(\"[LeanMode] Failed to access localStorage:\", error);\r\n  }\r\n  \r\n  return false;\r\n}\r\n\r\n/**\r\n * Set lean mode in localStorage\r\n * @param enabled whether to enable lean mode\r\n */\r\nexport function setLeanMode(enabled: boolean): void {\r\n  try {\r\n    if (enabled) {\r\n      localStorage.setItem(\"devLeanMode\", \"true\");\r\n    } else {\r\n      localStorage.removeItem(\"devLeanMode\");\r\n    }\r\n  } catch (error) {\r\n    console.warn(\"[LeanMode] Failed to update localStorage:\", error);\r\n  }\r\n}\r\n\r\n/**\r\n * Get lean mode status with details about how it was activated\r\n * @returns object with lean mode status and activation source\r\n */\r\nexport function getLeanModeStatus(): {\r\n  enabled: boolean;\r\n  source: \"environment\" | \"url\" | \"localStorage\" | \"none\";\r\n} {\r\n  // Check environment variable\r\n  if (import.meta.env.VITE_DEV_LEAN_MODE === \"true\") {\r\n    return { enabled: true, source: \"environment\" };\r\n  }\r\n  \r\n  // Check URL parameters\r\n  try {\r\n    const qs = new URLSearchParams(window.location.search);\r\n    if (qs.has(\"lean\") && qs.get(\"lean\") !== \"false\") {\r\n      return { enabled: true, source: \"url\" };\r\n    }\r\n  } catch (error) {\r\n    console.warn(\"[LeanMode] Failed to parse URL parameters:\", error);\r\n  }\r\n  \r\n  // Check localStorage\r\n  try {\r\n    if (localStorage.getItem(\"devLeanMode\") === \"true\") {\r\n      return { enabled: true, source: \"localStorage\" };\r\n    }\r\n  } catch (error) {\r\n    console.warn(\"[LeanMode] Failed to access localStorage:\", error);\r\n  }\r\n  \r\n  return { enabled: false, source: \"none\" };\r\n}\r\n\r\n/**\r\n * Log lean mode status to console\r\n */\r\nexport function logLeanModeStatus(): void {\r\n  const status = getLeanModeStatus();\r\n  if (status.enabled) {\r\n    console.info(`[LeanMode] ACTIVE - source: ${status.source} - monitoring and features suppressed`);\r\n  } else {\r\n    console.info(\"[LeanMode] DISABLED - full monitoring and features active\");\r\n  }\r\n}\r\n"],"mappings":"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","ignoreList":[]}