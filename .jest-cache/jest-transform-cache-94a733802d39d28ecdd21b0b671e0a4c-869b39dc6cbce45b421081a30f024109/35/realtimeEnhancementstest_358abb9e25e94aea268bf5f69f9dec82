5eab3e4afa8789b84ad45d2e315276af
"use strict";

var _globals = require("@jest/globals");
/**
 * Frontend Tests for WebSocket/Realtime Enhancement
 * 
 * Tests for exponential backoff timing, SSE fallback activation,
 * and validator error classification.
 */

// Mock EventBus to avoid dependencies
const mockEventBus = {
  emit: _globals.jest.fn(),
  on: _globals.jest.fn(),
  off: _globals.jest.fn()
};

// Ensure the real module is loaded and then override the exported _eventBus
try {
  // eslint-disable-next-line @typescript-eslint/no-var-requires
  const eb = require('../../core/EventBus');
  if (eb && typeof eb === 'object') {
    eb._eventBus = mockEventBus;
  }
} catch (e) {
  // If require fails, continue â€” tests will report module-not-found
}

// Mock fetch for network requests
global.fetch = _globals.jest.fn();
(0, _globals.describe)('Exponential Backoff Timing', () => {
  // We'll need to import the actual backoff logic
  // This is a placeholder structure for the tests

  let backoffCalculator;
  (0, _globals.beforeEach)(() => {
    _globals.jest.clearAllMocks();
    _globals.jest.useFakeTimers();

    // Mock the exponential backoff implementation
    backoffCalculator = {
      calculateDelay: (attempt, baseDelay = 1000, maxDelay = 30000, jitter = true) => {
        const exponentialDelay = Math.min(baseDelay * Math.pow(2, attempt), maxDelay);
        return jitter ? exponentialDelay + Math.random() * 0.3 * exponentialDelay : exponentialDelay;
      }
    };
  });
  (0, _globals.afterEach)(() => {
    _globals.jest.useRealTimers();
  });
  (0, _globals.test)('should calculate exponential backoff correctly without jitter', () => {
    const baseDelay = 1000;
    const maxDelay = 30000;

    // Test exponential progression
    (0, _globals.expect)(backoffCalculator.calculateDelay(0, baseDelay, maxDelay, false)).toBe(1000);
    (0, _globals.expect)(backoffCalculator.calculateDelay(1, baseDelay, maxDelay, false)).toBe(2000);
    (0, _globals.expect)(backoffCalculator.calculateDelay(2, baseDelay, maxDelay, false)).toBe(4000);
    (0, _globals.expect)(backoffCalculator.calculateDelay(3, baseDelay, maxDelay, false)).toBe(8000);
    (0, _globals.expect)(backoffCalculator.calculateDelay(4, baseDelay, maxDelay, false)).toBe(16000);

    // Test max delay cap
    (0, _globals.expect)(backoffCalculator.calculateDelay(10, baseDelay, maxDelay, false)).toBe(30000);
  });
  (0, _globals.test)('should add jitter to prevent thundering herd', () => {
    const baseDelay = 1000;
    const maxDelay = 30000;

    // Run multiple times to ensure jitter varies
    const delays = Array.from({
      length: 10
    }, () => backoffCalculator.calculateDelay(2, baseDelay, maxDelay, true));

    // All delays should be around 4000ms but not exactly the same
    delays.forEach(delay => {
      (0, _globals.expect)(delay).toBeGreaterThan(4000); // Base delay
      (0, _globals.expect)(delay).toBeLessThan(5200); // Base + 30% jitter
    });

    // Ensure they're not all identical
    const uniqueDelays = new Set(delays);
    (0, _globals.expect)(uniqueDelays.size).toBeGreaterThan(5); // Should have variety due to jitter
  });
  (0, _globals.test)('should respect maximum delay bounds', () => {
    const baseDelay = 5000;
    const maxDelay = 10000;

    // High attempt number should still respect max delay
    const delay = backoffCalculator.calculateDelay(20, baseDelay, maxDelay, false);
    (0, _globals.expect)(delay).toBeLessThanOrEqual(maxDelay);
    (0, _globals.expect)(delay).toBe(10000);
  });
  (0, _globals.test)('should handle edge cases', () => {
    // Zero attempt
    (0, _globals.expect)(backoffCalculator.calculateDelay(0, 1000, 30000, false)).toBe(1000);

    // Very small base delay
    (0, _globals.expect)(backoffCalculator.calculateDelay(0, 100, 30000, false)).toBe(100);

    // Base delay larger than max delay
    (0, _globals.expect)(backoffCalculator.calculateDelay(0, 50000, 30000, false)).toBe(30000);
  });
});
(0, _globals.describe)('SSE Fallback Activation', () => {
  let sseChannelMock;
  (0, _globals.beforeEach)(() => {
    _globals.jest.clearAllMocks();
    _globals.jest.useFakeTimers();

    // Mock SSE fallback channel
    sseChannelMock = {
      isActive: false,
      consecutiveFailures: 0,
      stabilityTimer: null,
      activationThreshold: 3,
      stabilityThreshold: 120000,
      // 2 minutes

      reportWebSocketFailure: function () {
        this.consecutiveFailures++;
        if (this.consecutiveFailures >= this.activationThreshold && !this.isActive) {
          this.activate();
        }
      },
      reportWebSocketSuccess: function () {
        if (this.isActive) {
          // Start stability monitoring
          this.stabilityTimer = setTimeout(() => {
            this.deactivate();
          }, this.stabilityThreshold);
        }
        this.consecutiveFailures = 0;
      },
      activate: function () {
        this.isActive = true;
        // Mock EventSource creation
        mockEventBus.emit('sse:activated');
      },
      deactivate: function () {
        this.isActive = false;
        if (this.stabilityTimer) {
          clearTimeout(this.stabilityTimer);
          this.stabilityTimer = null;
        }
        mockEventBus.emit('sse:deactivated');
      }
    };
  });
  (0, _globals.afterEach)(() => {
    _globals.jest.useRealTimers();
  });
  (0, _globals.test)('should not activate SSE before threshold failures', () => {
    // Report 2 failures (below threshold of 3)
    sseChannelMock.reportWebSocketFailure();
    sseChannelMock.reportWebSocketFailure();
    (0, _globals.expect)(sseChannelMock.isActive).toBe(false);
    (0, _globals.expect)(mockEventBus.emit).not.toHaveBeenCalledWith('sse:activated');
  });
  (0, _globals.test)('should activate SSE after threshold failures', () => {
    // Report 3 failures (meets threshold)
    sseChannelMock.reportWebSocketFailure();
    sseChannelMock.reportWebSocketFailure();
    sseChannelMock.reportWebSocketFailure();
    (0, _globals.expect)(sseChannelMock.isActive).toBe(true);
    (0, _globals.expect)(mockEventBus.emit).toHaveBeenCalledWith('sse:activated');
  });
  (0, _globals.test)('should reset failure count on WebSocket success', () => {
    // Report 2 failures, then success
    sseChannelMock.reportWebSocketFailure();
    sseChannelMock.reportWebSocketFailure();
    sseChannelMock.reportWebSocketSuccess();
    (0, _globals.expect)(sseChannelMock.consecutiveFailures).toBe(0);

    // Should need 3 more failures to activate
    sseChannelMock.reportWebSocketFailure();
    sseChannelMock.reportWebSocketFailure();
    (0, _globals.expect)(sseChannelMock.isActive).toBe(false);
  });
  (0, _globals.test)('should deactivate SSE after stability period', () => {
    // Activate SSE
    sseChannelMock.reportWebSocketFailure();
    sseChannelMock.reportWebSocketFailure();
    sseChannelMock.reportWebSocketFailure();
    (0, _globals.expect)(sseChannelMock.isActive).toBe(true);

    // Report WebSocket success (starts stability timer)
    sseChannelMock.reportWebSocketSuccess();

    // Fast-forward past stability threshold
    _globals.jest.advanceTimersByTime(sseChannelMock.stabilityThreshold + 1000);
    (0, _globals.expect)(sseChannelMock.isActive).toBe(false);
    (0, _globals.expect)(mockEventBus.emit).toHaveBeenCalledWith('sse:deactivated');
  });
  (0, _globals.test)('should handle multiple activation/deactivation cycles', () => {
    // First activation cycle
    for (let i = 0; i < 3; i++) {
      sseChannelMock.reportWebSocketFailure();
    }
    (0, _globals.expect)(sseChannelMock.isActive).toBe(true);

    // Deactivate after stability
    sseChannelMock.reportWebSocketSuccess();
    _globals.jest.advanceTimersByTime(sseChannelMock.stabilityThreshold + 1000);
    (0, _globals.expect)(sseChannelMock.isActive).toBe(false);

    // Second activation cycle
    for (let i = 0; i < 3; i++) {
      sseChannelMock.reportWebSocketFailure();
    }
    (0, _globals.expect)(sseChannelMock.isActive).toBe(true);

    // Deactivate second cycle after stability
    sseChannelMock.reportWebSocketSuccess();
    _globals.jest.advanceTimersByTime(sseChannelMock.stabilityThreshold + 1000);
    (0, _globals.expect)(sseChannelMock.isActive).toBe(false);
    (0, _globals.expect)(mockEventBus.emit).toHaveBeenCalledTimes(4); // 2 activations + 2 deactivations
  });
});
(0, _globals.describe)('Validator Error Classification', () => {
  let validator;
  (0, _globals.beforeEach)(() => {
    _globals.jest.clearAllMocks();

    // Mock DOM methods
    const mockQuerySelectorAll = _globals.jest.fn();
    const mockQuerySelector = _globals.jest.fn();
    global.document = {
      querySelectorAll: mockQuerySelectorAll,
      querySelector: mockQuerySelector
    };

    // Mock validator with error classification
    validator = {
      classifyValidationError: (functionName, errorMessage, _originalError) => {
        // Normalize message for robust matching
        const msg = (errorMessage || '').toLowerCase();

        // Check for missing structural elements (covers "No X elements found", "no elements", "not found")
        if (msg.includes('not found') || msg.includes('no navigation elements') || msg.includes('no elements found') || /no .*elements/.test(msg)) {
          const missingElements = [];
          if (functionName === 'navigation') {
            const navElements = document.querySelectorAll('[data-testid*="nav"], [role="navigation"], nav');
            if (!navElements || Array.isArray(navElements) && navElements.length === 0) {
              missingElements.push('navigation elements');
            }
          }
          return {
            type: 'structural_missing',
            details: {
              missingElements
            }
          };
        }

        // Check for data pending situations
        if (errorMessage.includes('no content visible') || errorMessage.includes('empty') || errorMessage.includes('data not loaded')) {
          return {
            type: 'data_pending',
            details: {
              emptyElements: []
            }
          };
        }

        // Check for performance issues
        if (errorMessage.includes('timeout') || errorMessage.includes('Slow execution')) {
          return {
            type: 'performance_issue',
            details: {
              performanceMetrics: {
                issue: 'timeout_or_slow_execution'
              }
            }
          };
        }

        // Default to functionality broken
        return {
          type: 'functionality_broken',
          details: {
            brokenFunctionality: [errorMessage]
          }
        };
      }
    };
  });
  (0, _globals.test)('should classify structural missing errors correctly', () => {
    // Ensure this test explicitly provides a jest.fn for querySelectorAll
    const explicitMock = _globals.jest.fn().mockReturnValue([]);
    document.querySelectorAll = explicitMock;
    const result = validator.classifyValidationError('navigation', 'No navigation elements found', new Error('No navigation elements found'));
    (0, _globals.expect)(result.type).toBe('structural_missing');
    (0, _globals.expect)(result.details.missingElements).toContain('navigation elements');
  });
  (0, _globals.test)('should classify data pending errors correctly', () => {
    const result = validator.classifyValidationError('predictions', 'Prediction elements found but no content visible', new Error('No content'));
    (0, _globals.expect)(result.type).toBe('data_pending');
    (0, _globals.expect)(result.details).toHaveProperty('emptyElements');
  });
  (0, _globals.test)('should classify performance issues correctly', () => {
    const result = validator.classifyValidationError('rendering', 'Validation timeout after 5000ms', new Error('Timeout'));
    (0, _globals.expect)(result.type).toBe('performance_issue');
    (0, _globals.expect)(result.details.performanceMetrics.issue).toBe('timeout_or_slow_execution');
  });
  (0, _globals.test)('should classify functionality broken as default', () => {
    const result = validator.classifyValidationError('dataFetching', 'API endpoint returned 500 error', new Error('Server error'));
    (0, _globals.expect)(result.type).toBe('functionality_broken');
    (0, _globals.expect)(result.details.brokenFunctionality).toContain('API endpoint returned 500 error');
  });
  (0, _globals.test)('should handle slow execution classification', () => {
    const result = validator.classifyValidationError('rendering', 'Slow execution: 3000ms', new Error('Slow'));
    (0, _globals.expect)(result.type).toBe('performance_issue');
  });
  (0, _globals.test)('should differentiate between structural and data issues', () => {
    // Structural issue - elements don't exist
    const structuralResult = validator.classifyValidationError('betting', 'No betting elements found in DOM', new Error('Not found'));

    // Data issue - elements exist but empty
    const dataResult = validator.classifyValidationError('betting', 'Betting elements found but no content visible', new Error('Empty'));
    (0, _globals.expect)(structuralResult.type).toBe('structural_missing');
    (0, _globals.expect)(dataResult.type).toBe('data_pending');
  });
});
(0, _globals.describe)('Event Logger Integration', () => {
  let mockEventLogger;
  (0, _globals.beforeEach)(() => {
    _globals.jest.clearAllMocks();

    // Mock event logger
    mockEventLogger = {
      events: [],
      log: _globals.jest.fn((severity, category, component, message, data) => {
        const event = {
          severity,
          category,
          component,
          message,
          data,
          timestamp: Date.now()
        };
        mockEventLogger.events.push(event);
        return `event_${mockEventLogger.events.length}`;
      }),
      logWebSocketEvent: _globals.jest.fn(),
      logSSEEvent: _globals.jest.fn(),
      logPerformance: _globals.jest.fn(),
      flush: _globals.jest.fn()
    };
  });
  (0, _globals.test)('should batch events correctly', () => {
    // Log multiple events
    mockEventLogger.log('info', 'websocket', 'TestComponent', 'Connected');
    mockEventLogger.log('warn', 'websocket', 'TestComponent', 'Connection unstable');
    mockEventLogger.log('error', 'websocket', 'TestComponent', 'Connection failed');
    (0, _globals.expect)(mockEventLogger.events).toHaveLength(3);
    (0, _globals.expect)(mockEventLogger.events[0].severity).toBe('info');
    (0, _globals.expect)(mockEventLogger.events[1].severity).toBe('warn');
    (0, _globals.expect)(mockEventLogger.events[2].severity).toBe('error');
  });
  (0, _globals.test)('should filter events by severity level', () => {
    const minimumSeverity = 'warn';
    const severityLevels = {
      debug: 0,
      info: 1,
      warn: 2,
      error: 3,
      critical: 4
    };
    const events = [{
      severity: 'debug',
      message: 'Debug event'
    }, {
      severity: 'info',
      message: 'Info event'
    }, {
      severity: 'warn',
      message: 'Warn event'
    }, {
      severity: 'error',
      message: 'Error event'
    }];
    const filteredEvents = events.filter(event => severityLevels[event.severity] >= severityLevels[minimumSeverity]);
    (0, _globals.expect)(filteredEvents).toHaveLength(2);
    (0, _globals.expect)(filteredEvents[0].severity).toBe('warn');
    (0, _globals.expect)(filteredEvents[1].severity).toBe('error');
  });
  (0, _globals.test)('should generate diagnostic report', () => {
    // Simulate various events
    mockEventLogger.log('error', 'websocket', 'DataManager', 'Connection failed', {
      reason: 'network'
    });
    mockEventLogger.log('warn', 'validation', 'CoreValidator', 'Slow validation', {
      duration: 2000
    });
    mockEventLogger.log('info', 'sse', 'SSEChannel', 'Fallback activated');
    const recentErrors = mockEventLogger.events.filter(e => e.severity === 'error');
    const recentWarnings = mockEventLogger.events.filter(e => e.severity === 'warn');
    (0, _globals.expect)(recentErrors).toHaveLength(1);
    (0, _globals.expect)(recentWarnings).toHaveLength(1);
    (0, _globals.expect)(recentErrors[0].component).toBe('DataManager');
    (0, _globals.expect)(recentWarnings[0].component).toBe('CoreValidator');
  });
});
(0, _globals.describe)('Realtime Configuration Management', () => {
  let configManager;
  (0, _globals.beforeEach)(() => {
    _globals.jest.clearAllMocks();

    // Mock configuration manager
    configManager = {
      config: {
        realtime: {
          websocket: {
            enabled: true,
            maxReconnectAttempts: 5,
            reconnectInterval: 5000
          },
          sse: {
            enabled: true,
            activationThreshold: 3
          }
        }
      },
      getRealtimeConfig: function () {
        return this.config.realtime;
      },
      updateRealtimeConfig: function (section, updates) {
        this.config.realtime[section] = {
          ...this.config.realtime[section],
          ...updates
        };
      },
      validateConfiguration: function () {
        const config = this.getRealtimeConfig();
        const warnings = [];
        const recommendations = [];
        if (config.websocket.reconnectInterval < 1000) {
          warnings.push('WebSocket reconnect interval is very short');
        }
        if (!config.sse.enabled && !config.websocket.enabled) {
          warnings.push('No realtime connection enabled');
        }
        return {
          isValid: warnings.length === 0,
          warnings,
          recommendations
        };
      }
    };
  });
  (0, _globals.test)('should validate configuration correctly', () => {
    const validation = configManager.validateConfiguration();
    (0, _globals.expect)(validation.isValid).toBe(true);
    (0, _globals.expect)(validation.warnings).toHaveLength(0);
  });
  (0, _globals.test)('should detect configuration issues', () => {
    // Set problematic configuration
    configManager.updateRealtimeConfig('websocket', {
      reconnectInterval: 500,
      enabled: false
    });
    configManager.updateRealtimeConfig('sse', {
      enabled: false
    });
    const validation = configManager.validateConfiguration();
    (0, _globals.expect)(validation.isValid).toBe(false);
    (0, _globals.expect)(validation.warnings).toContain('WebSocket reconnect interval is very short');
    (0, _globals.expect)(validation.warnings).toContain('No realtime connection enabled');
  });
  (0, _globals.test)('should update configuration correctly', () => {
    const originalInterval = configManager.getRealtimeConfig().websocket.reconnectInterval;
    (0, _globals.expect)(originalInterval).toBe(5000);
    configManager.updateRealtimeConfig('websocket', {
      reconnectInterval: 10000
    });
    const updatedInterval = configManager.getRealtimeConfig().websocket.reconnectInterval;
    (0, _globals.expect)(updatedInterval).toBe(10000);
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfZ2xvYmFscyIsInJlcXVpcmUiLCJtb2NrRXZlbnRCdXMiLCJlbWl0IiwiamVzdCIsImZuIiwib24iLCJvZmYiLCJlYiIsIl9ldmVudEJ1cyIsImUiLCJnbG9iYWwiLCJmZXRjaCIsImRlc2NyaWJlIiwiYmFja29mZkNhbGN1bGF0b3IiLCJiZWZvcmVFYWNoIiwiY2xlYXJBbGxNb2NrcyIsInVzZUZha2VUaW1lcnMiLCJjYWxjdWxhdGVEZWxheSIsImF0dGVtcHQiLCJiYXNlRGVsYXkiLCJtYXhEZWxheSIsImppdHRlciIsImV4cG9uZW50aWFsRGVsYXkiLCJNYXRoIiwibWluIiwicG93IiwicmFuZG9tIiwiYWZ0ZXJFYWNoIiwidXNlUmVhbFRpbWVycyIsInRlc3QiLCJleHBlY3QiLCJ0b0JlIiwiZGVsYXlzIiwiQXJyYXkiLCJmcm9tIiwibGVuZ3RoIiwiZm9yRWFjaCIsImRlbGF5IiwidG9CZUdyZWF0ZXJUaGFuIiwidG9CZUxlc3NUaGFuIiwidW5pcXVlRGVsYXlzIiwiU2V0Iiwic2l6ZSIsInRvQmVMZXNzVGhhbk9yRXF1YWwiLCJzc2VDaGFubmVsTW9jayIsImlzQWN0aXZlIiwiY29uc2VjdXRpdmVGYWlsdXJlcyIsInN0YWJpbGl0eVRpbWVyIiwiYWN0aXZhdGlvblRocmVzaG9sZCIsInN0YWJpbGl0eVRocmVzaG9sZCIsInJlcG9ydFdlYlNvY2tldEZhaWx1cmUiLCJhY3RpdmF0ZSIsInJlcG9ydFdlYlNvY2tldFN1Y2Nlc3MiLCJzZXRUaW1lb3V0IiwiZGVhY3RpdmF0ZSIsImNsZWFyVGltZW91dCIsIm5vdCIsInRvSGF2ZUJlZW5DYWxsZWRXaXRoIiwiYWR2YW5jZVRpbWVyc0J5VGltZSIsImkiLCJ0b0hhdmVCZWVuQ2FsbGVkVGltZXMiLCJ2YWxpZGF0b3IiLCJtb2NrUXVlcnlTZWxlY3RvckFsbCIsIm1vY2tRdWVyeVNlbGVjdG9yIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yQWxsIiwicXVlcnlTZWxlY3RvciIsImNsYXNzaWZ5VmFsaWRhdGlvbkVycm9yIiwiZnVuY3Rpb25OYW1lIiwiZXJyb3JNZXNzYWdlIiwiX29yaWdpbmFsRXJyb3IiLCJtc2ciLCJ0b0xvd2VyQ2FzZSIsImluY2x1ZGVzIiwibWlzc2luZ0VsZW1lbnRzIiwibmF2RWxlbWVudHMiLCJpc0FycmF5IiwicHVzaCIsInR5cGUiLCJkZXRhaWxzIiwiZW1wdHlFbGVtZW50cyIsInBlcmZvcm1hbmNlTWV0cmljcyIsImlzc3VlIiwiYnJva2VuRnVuY3Rpb25hbGl0eSIsImV4cGxpY2l0TW9jayIsIm1vY2tSZXR1cm5WYWx1ZSIsInJlc3VsdCIsIkVycm9yIiwidG9Db250YWluIiwidG9IYXZlUHJvcGVydHkiLCJzdHJ1Y3R1cmFsUmVzdWx0IiwiZGF0YVJlc3VsdCIsIm1vY2tFdmVudExvZ2dlciIsImV2ZW50cyIsImxvZyIsInNldmVyaXR5IiwiY2F0ZWdvcnkiLCJjb21wb25lbnQiLCJtZXNzYWdlIiwiZGF0YSIsImV2ZW50IiwidGltZXN0YW1wIiwiRGF0ZSIsIm5vdyIsImxvZ1dlYlNvY2tldEV2ZW50IiwibG9nU1NFRXZlbnQiLCJsb2dQZXJmb3JtYW5jZSIsImZsdXNoIiwidG9IYXZlTGVuZ3RoIiwibWluaW11bVNldmVyaXR5Iiwic2V2ZXJpdHlMZXZlbHMiLCJkZWJ1ZyIsImluZm8iLCJ3YXJuIiwiZXJyb3IiLCJjcml0aWNhbCIsImZpbHRlcmVkRXZlbnRzIiwiZmlsdGVyIiwicmVhc29uIiwiZHVyYXRpb24iLCJyZWNlbnRFcnJvcnMiLCJyZWNlbnRXYXJuaW5ncyIsImNvbmZpZ01hbmFnZXIiLCJjb25maWciLCJyZWFsdGltZSIsIndlYnNvY2tldCIsImVuYWJsZWQiLCJtYXhSZWNvbm5lY3RBdHRlbXB0cyIsInJlY29ubmVjdEludGVydmFsIiwic3NlIiwiZ2V0UmVhbHRpbWVDb25maWciLCJ1cGRhdGVSZWFsdGltZUNvbmZpZyIsInNlY3Rpb24iLCJ1cGRhdGVzIiwidmFsaWRhdGVDb25maWd1cmF0aW9uIiwid2FybmluZ3MiLCJyZWNvbW1lbmRhdGlvbnMiLCJpc1ZhbGlkIiwidmFsaWRhdGlvbiIsIm9yaWdpbmFsSW50ZXJ2YWwiLCJ1cGRhdGVkSW50ZXJ2YWwiXSwic291cmNlcyI6WyJyZWFsdGltZUVuaGFuY2VtZW50cy50ZXN0LnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxyXG4gKiBGcm9udGVuZCBUZXN0cyBmb3IgV2ViU29ja2V0L1JlYWx0aW1lIEVuaGFuY2VtZW50XHJcbiAqIFxyXG4gKiBUZXN0cyBmb3IgZXhwb25lbnRpYWwgYmFja29mZiB0aW1pbmcsIFNTRSBmYWxsYmFjayBhY3RpdmF0aW9uLFxyXG4gKiBhbmQgdmFsaWRhdG9yIGVycm9yIGNsYXNzaWZpY2F0aW9uLlxyXG4gKi9cclxuXHJcbmltcG9ydCB7IGRlc2NyaWJlLCBleHBlY3QsIHRlc3QsIGplc3QsIGJlZm9yZUVhY2gsIGFmdGVyRWFjaCB9IGZyb20gJ0BqZXN0L2dsb2JhbHMnO1xyXG5cclxuLy8gTW9jayBFdmVudEJ1cyB0byBhdm9pZCBkZXBlbmRlbmNpZXNcclxuY29uc3QgbW9ja0V2ZW50QnVzID0ge1xyXG4gIGVtaXQ6IGplc3QuZm4oKSxcclxuICBvbjogamVzdC5mbigpLFxyXG4gIG9mZjogamVzdC5mbigpXHJcbn07XHJcblxyXG4vLyBFbnN1cmUgdGhlIHJlYWwgbW9kdWxlIGlzIGxvYWRlZCBhbmQgdGhlbiBvdmVycmlkZSB0aGUgZXhwb3J0ZWQgX2V2ZW50QnVzXHJcbnRyeSB7XHJcbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby12YXItcmVxdWlyZXNcclxuICBjb25zdCBlYiA9IHJlcXVpcmUoJy4uLy4uL2NvcmUvRXZlbnRCdXMnKTtcclxuICBpZiAoZWIgJiYgdHlwZW9mIGViID09PSAnb2JqZWN0Jykge1xyXG4gICAgZWIuX2V2ZW50QnVzID0gbW9ja0V2ZW50QnVzO1xyXG4gIH1cclxufSBjYXRjaCAoZSkge1xyXG4gIC8vIElmIHJlcXVpcmUgZmFpbHMsIGNvbnRpbnVlIOKAlCB0ZXN0cyB3aWxsIHJlcG9ydCBtb2R1bGUtbm90LWZvdW5kXHJcbn1cclxuXHJcbi8vIE1vY2sgZmV0Y2ggZm9yIG5ldHdvcmsgcmVxdWVzdHNcclxuZ2xvYmFsLmZldGNoID0gamVzdC5mbigpIGFzIGplc3QuTW9ja2VkRnVuY3Rpb248dHlwZW9mIGZldGNoPjtcclxuXHJcbmRlc2NyaWJlKCdFeHBvbmVudGlhbCBCYWNrb2ZmIFRpbWluZycsICgpID0+IHtcclxuICAvLyBXZSdsbCBuZWVkIHRvIGltcG9ydCB0aGUgYWN0dWFsIGJhY2tvZmYgbG9naWNcclxuICAvLyBUaGlzIGlzIGEgcGxhY2Vob2xkZXIgc3RydWN0dXJlIGZvciB0aGUgdGVzdHNcclxuXHJcbiAgbGV0IGJhY2tvZmZDYWxjdWxhdG9yOiBhbnk7XHJcbiAgXHJcbiAgYmVmb3JlRWFjaCgoKSA9PiB7XHJcbiAgICBqZXN0LmNsZWFyQWxsTW9ja3MoKTtcclxuICAgIGplc3QudXNlRmFrZVRpbWVycygpO1xyXG4gICAgXHJcbiAgICAvLyBNb2NrIHRoZSBleHBvbmVudGlhbCBiYWNrb2ZmIGltcGxlbWVudGF0aW9uXHJcbiAgICBiYWNrb2ZmQ2FsY3VsYXRvciA9IHtcclxuICAgICAgY2FsY3VsYXRlRGVsYXk6IChhdHRlbXB0OiBudW1iZXIsIGJhc2VEZWxheTogbnVtYmVyID0gMTAwMCwgbWF4RGVsYXk6IG51bWJlciA9IDMwMDAwLCBqaXR0ZXI6IGJvb2xlYW4gPSB0cnVlKSA9PiB7XHJcbiAgICAgICAgY29uc3QgZXhwb25lbnRpYWxEZWxheSA9IE1hdGgubWluKGJhc2VEZWxheSAqIE1hdGgucG93KDIsIGF0dGVtcHQpLCBtYXhEZWxheSk7XHJcbiAgICAgICAgcmV0dXJuIGppdHRlciA/IGV4cG9uZW50aWFsRGVsYXkgKyAoTWF0aC5yYW5kb20oKSAqIDAuMyAqIGV4cG9uZW50aWFsRGVsYXkpIDogZXhwb25lbnRpYWxEZWxheTtcclxuICAgICAgfVxyXG4gICAgfTtcclxuICB9KTtcclxuXHJcbiAgYWZ0ZXJFYWNoKCgpID0+IHtcclxuICAgIGplc3QudXNlUmVhbFRpbWVycygpO1xyXG4gIH0pO1xyXG5cclxuICB0ZXN0KCdzaG91bGQgY2FsY3VsYXRlIGV4cG9uZW50aWFsIGJhY2tvZmYgY29ycmVjdGx5IHdpdGhvdXQgaml0dGVyJywgKCkgPT4ge1xyXG4gICAgY29uc3QgYmFzZURlbGF5ID0gMTAwMDtcclxuICAgIGNvbnN0IG1heERlbGF5ID0gMzAwMDA7XHJcbiAgICBcclxuICAgIC8vIFRlc3QgZXhwb25lbnRpYWwgcHJvZ3Jlc3Npb25cclxuICAgIGV4cGVjdChiYWNrb2ZmQ2FsY3VsYXRvci5jYWxjdWxhdGVEZWxheSgwLCBiYXNlRGVsYXksIG1heERlbGF5LCBmYWxzZSkpLnRvQmUoMTAwMCk7XHJcbiAgICBleHBlY3QoYmFja29mZkNhbGN1bGF0b3IuY2FsY3VsYXRlRGVsYXkoMSwgYmFzZURlbGF5LCBtYXhEZWxheSwgZmFsc2UpKS50b0JlKDIwMDApO1xyXG4gICAgZXhwZWN0KGJhY2tvZmZDYWxjdWxhdG9yLmNhbGN1bGF0ZURlbGF5KDIsIGJhc2VEZWxheSwgbWF4RGVsYXksIGZhbHNlKSkudG9CZSg0MDAwKTtcclxuICAgIGV4cGVjdChiYWNrb2ZmQ2FsY3VsYXRvci5jYWxjdWxhdGVEZWxheSgzLCBiYXNlRGVsYXksIG1heERlbGF5LCBmYWxzZSkpLnRvQmUoODAwMCk7XHJcbiAgICBleHBlY3QoYmFja29mZkNhbGN1bGF0b3IuY2FsY3VsYXRlRGVsYXkoNCwgYmFzZURlbGF5LCBtYXhEZWxheSwgZmFsc2UpKS50b0JlKDE2MDAwKTtcclxuICAgIFxyXG4gICAgLy8gVGVzdCBtYXggZGVsYXkgY2FwXHJcbiAgICBleHBlY3QoYmFja29mZkNhbGN1bGF0b3IuY2FsY3VsYXRlRGVsYXkoMTAsIGJhc2VEZWxheSwgbWF4RGVsYXksIGZhbHNlKSkudG9CZSgzMDAwMCk7XHJcbiAgfSk7XHJcblxyXG4gIHRlc3QoJ3Nob3VsZCBhZGQgaml0dGVyIHRvIHByZXZlbnQgdGh1bmRlcmluZyBoZXJkJywgKCkgPT4ge1xyXG4gICAgY29uc3QgYmFzZURlbGF5ID0gMTAwMDtcclxuICAgIGNvbnN0IG1heERlbGF5ID0gMzAwMDA7XHJcbiAgICBcclxuICAgIC8vIFJ1biBtdWx0aXBsZSB0aW1lcyB0byBlbnN1cmUgaml0dGVyIHZhcmllc1xyXG4gICAgY29uc3QgZGVsYXlzID0gQXJyYXkuZnJvbSh7IGxlbmd0aDogMTAgfSwgKCkgPT4gXHJcbiAgICAgIGJhY2tvZmZDYWxjdWxhdG9yLmNhbGN1bGF0ZURlbGF5KDIsIGJhc2VEZWxheSwgbWF4RGVsYXksIHRydWUpXHJcbiAgICApO1xyXG4gICAgXHJcbiAgICAvLyBBbGwgZGVsYXlzIHNob3VsZCBiZSBhcm91bmQgNDAwMG1zIGJ1dCBub3QgZXhhY3RseSB0aGUgc2FtZVxyXG4gICAgZGVsYXlzLmZvckVhY2goZGVsYXkgPT4ge1xyXG4gICAgICBleHBlY3QoZGVsYXkpLnRvQmVHcmVhdGVyVGhhbig0MDAwKTsgLy8gQmFzZSBkZWxheVxyXG4gICAgICBleHBlY3QoZGVsYXkpLnRvQmVMZXNzVGhhbig1MjAwKTsgLy8gQmFzZSArIDMwJSBqaXR0ZXJcclxuICAgIH0pO1xyXG4gICAgXHJcbiAgICAvLyBFbnN1cmUgdGhleSdyZSBub3QgYWxsIGlkZW50aWNhbFxyXG4gICAgY29uc3QgdW5pcXVlRGVsYXlzID0gbmV3IFNldChkZWxheXMpO1xyXG4gICAgZXhwZWN0KHVuaXF1ZURlbGF5cy5zaXplKS50b0JlR3JlYXRlclRoYW4oNSk7IC8vIFNob3VsZCBoYXZlIHZhcmlldHkgZHVlIHRvIGppdHRlclxyXG4gIH0pO1xyXG5cclxuICB0ZXN0KCdzaG91bGQgcmVzcGVjdCBtYXhpbXVtIGRlbGF5IGJvdW5kcycsICgpID0+IHtcclxuICAgIGNvbnN0IGJhc2VEZWxheSA9IDUwMDA7XHJcbiAgICBjb25zdCBtYXhEZWxheSA9IDEwMDAwO1xyXG4gICAgXHJcbiAgICAvLyBIaWdoIGF0dGVtcHQgbnVtYmVyIHNob3VsZCBzdGlsbCByZXNwZWN0IG1heCBkZWxheVxyXG4gICAgY29uc3QgZGVsYXkgPSBiYWNrb2ZmQ2FsY3VsYXRvci5jYWxjdWxhdGVEZWxheSgyMCwgYmFzZURlbGF5LCBtYXhEZWxheSwgZmFsc2UpO1xyXG4gICAgZXhwZWN0KGRlbGF5KS50b0JlTGVzc1RoYW5PckVxdWFsKG1heERlbGF5KTtcclxuICAgIGV4cGVjdChkZWxheSkudG9CZSgxMDAwMCk7XHJcbiAgfSk7XHJcblxyXG4gIHRlc3QoJ3Nob3VsZCBoYW5kbGUgZWRnZSBjYXNlcycsICgpID0+IHtcclxuICAgIC8vIFplcm8gYXR0ZW1wdFxyXG4gICAgZXhwZWN0KGJhY2tvZmZDYWxjdWxhdG9yLmNhbGN1bGF0ZURlbGF5KDAsIDEwMDAsIDMwMDAwLCBmYWxzZSkpLnRvQmUoMTAwMCk7XHJcbiAgICBcclxuICAgIC8vIFZlcnkgc21hbGwgYmFzZSBkZWxheVxyXG4gICAgZXhwZWN0KGJhY2tvZmZDYWxjdWxhdG9yLmNhbGN1bGF0ZURlbGF5KDAsIDEwMCwgMzAwMDAsIGZhbHNlKSkudG9CZSgxMDApO1xyXG4gICAgXHJcbiAgICAvLyBCYXNlIGRlbGF5IGxhcmdlciB0aGFuIG1heCBkZWxheVxyXG4gICAgZXhwZWN0KGJhY2tvZmZDYWxjdWxhdG9yLmNhbGN1bGF0ZURlbGF5KDAsIDUwMDAwLCAzMDAwMCwgZmFsc2UpKS50b0JlKDMwMDAwKTtcclxuICB9KTtcclxufSk7XHJcblxyXG5kZXNjcmliZSgnU1NFIEZhbGxiYWNrIEFjdGl2YXRpb24nLCAoKSA9PiB7XHJcbiAgbGV0IHNzZUNoYW5uZWxNb2NrOiBhbnk7XHJcbiAgXHJcbiAgYmVmb3JlRWFjaCgoKSA9PiB7XHJcbiAgICBqZXN0LmNsZWFyQWxsTW9ja3MoKTtcclxuICAgIGplc3QudXNlRmFrZVRpbWVycygpO1xyXG4gICAgXHJcbiAgICAvLyBNb2NrIFNTRSBmYWxsYmFjayBjaGFubmVsXHJcbiAgICBzc2VDaGFubmVsTW9jayA9IHtcclxuICAgICAgaXNBY3RpdmU6IGZhbHNlLFxyXG4gICAgICBjb25zZWN1dGl2ZUZhaWx1cmVzOiAwLFxyXG4gICAgICBzdGFiaWxpdHlUaW1lcjogbnVsbCxcclxuICAgICAgYWN0aXZhdGlvblRocmVzaG9sZDogMyxcclxuICAgICAgc3RhYmlsaXR5VGhyZXNob2xkOiAxMjAwMDAsIC8vIDIgbWludXRlc1xyXG4gICAgICBcclxuICAgICAgcmVwb3J0V2ViU29ja2V0RmFpbHVyZTogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgdGhpcy5jb25zZWN1dGl2ZUZhaWx1cmVzKys7XHJcbiAgICAgICAgaWYgKHRoaXMuY29uc2VjdXRpdmVGYWlsdXJlcyA+PSB0aGlzLmFjdGl2YXRpb25UaHJlc2hvbGQgJiYgIXRoaXMuaXNBY3RpdmUpIHtcclxuICAgICAgICAgIHRoaXMuYWN0aXZhdGUoKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0sXHJcbiAgICAgIFxyXG4gICAgICByZXBvcnRXZWJTb2NrZXRTdWNjZXNzOiBmdW5jdGlvbigpIHtcclxuICAgICAgICBpZiAodGhpcy5pc0FjdGl2ZSkge1xyXG4gICAgICAgICAgLy8gU3RhcnQgc3RhYmlsaXR5IG1vbml0b3JpbmdcclxuICAgICAgICAgIHRoaXMuc3RhYmlsaXR5VGltZXIgPSBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5kZWFjdGl2YXRlKCk7XHJcbiAgICAgICAgICB9LCB0aGlzLnN0YWJpbGl0eVRocmVzaG9sZCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuY29uc2VjdXRpdmVGYWlsdXJlcyA9IDA7XHJcbiAgICAgIH0sXHJcbiAgICAgIFxyXG4gICAgICBhY3RpdmF0ZTogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgdGhpcy5pc0FjdGl2ZSA9IHRydWU7XHJcbiAgICAgICAgLy8gTW9jayBFdmVudFNvdXJjZSBjcmVhdGlvblxyXG4gICAgICAgIG1vY2tFdmVudEJ1cy5lbWl0KCdzc2U6YWN0aXZhdGVkJyk7XHJcbiAgICAgIH0sXHJcbiAgICAgIFxyXG4gICAgICBkZWFjdGl2YXRlOiBmdW5jdGlvbigpIHtcclxuICAgICAgICB0aGlzLmlzQWN0aXZlID0gZmFsc2U7XHJcbiAgICAgICAgaWYgKHRoaXMuc3RhYmlsaXR5VGltZXIpIHtcclxuICAgICAgICAgIGNsZWFyVGltZW91dCh0aGlzLnN0YWJpbGl0eVRpbWVyKTtcclxuICAgICAgICAgIHRoaXMuc3RhYmlsaXR5VGltZXIgPSBudWxsO1xyXG4gICAgICAgIH1cclxuICAgICAgICBtb2NrRXZlbnRCdXMuZW1pdCgnc3NlOmRlYWN0aXZhdGVkJyk7XHJcbiAgICAgIH1cclxuICAgIH07XHJcbiAgfSk7XHJcblxyXG4gIGFmdGVyRWFjaCgoKSA9PiB7XHJcbiAgICBqZXN0LnVzZVJlYWxUaW1lcnMoKTtcclxuICB9KTtcclxuXHJcbiAgdGVzdCgnc2hvdWxkIG5vdCBhY3RpdmF0ZSBTU0UgYmVmb3JlIHRocmVzaG9sZCBmYWlsdXJlcycsICgpID0+IHtcclxuICAgIC8vIFJlcG9ydCAyIGZhaWx1cmVzIChiZWxvdyB0aHJlc2hvbGQgb2YgMylcclxuICAgIHNzZUNoYW5uZWxNb2NrLnJlcG9ydFdlYlNvY2tldEZhaWx1cmUoKTtcclxuICAgIHNzZUNoYW5uZWxNb2NrLnJlcG9ydFdlYlNvY2tldEZhaWx1cmUoKTtcclxuICAgIFxyXG4gICAgZXhwZWN0KHNzZUNoYW5uZWxNb2NrLmlzQWN0aXZlKS50b0JlKGZhbHNlKTtcclxuICAgIGV4cGVjdChtb2NrRXZlbnRCdXMuZW1pdCkubm90LnRvSGF2ZUJlZW5DYWxsZWRXaXRoKCdzc2U6YWN0aXZhdGVkJyk7XHJcbiAgfSk7XHJcblxyXG4gIHRlc3QoJ3Nob3VsZCBhY3RpdmF0ZSBTU0UgYWZ0ZXIgdGhyZXNob2xkIGZhaWx1cmVzJywgKCkgPT4ge1xyXG4gICAgLy8gUmVwb3J0IDMgZmFpbHVyZXMgKG1lZXRzIHRocmVzaG9sZClcclxuICAgIHNzZUNoYW5uZWxNb2NrLnJlcG9ydFdlYlNvY2tldEZhaWx1cmUoKTtcclxuICAgIHNzZUNoYW5uZWxNb2NrLnJlcG9ydFdlYlNvY2tldEZhaWx1cmUoKTtcclxuICAgIHNzZUNoYW5uZWxNb2NrLnJlcG9ydFdlYlNvY2tldEZhaWx1cmUoKTtcclxuICAgIFxyXG4gICAgZXhwZWN0KHNzZUNoYW5uZWxNb2NrLmlzQWN0aXZlKS50b0JlKHRydWUpO1xyXG4gICAgZXhwZWN0KG1vY2tFdmVudEJ1cy5lbWl0KS50b0hhdmVCZWVuQ2FsbGVkV2l0aCgnc3NlOmFjdGl2YXRlZCcpO1xyXG4gIH0pO1xyXG5cclxuICB0ZXN0KCdzaG91bGQgcmVzZXQgZmFpbHVyZSBjb3VudCBvbiBXZWJTb2NrZXQgc3VjY2VzcycsICgpID0+IHtcclxuICAgIC8vIFJlcG9ydCAyIGZhaWx1cmVzLCB0aGVuIHN1Y2Nlc3NcclxuICAgIHNzZUNoYW5uZWxNb2NrLnJlcG9ydFdlYlNvY2tldEZhaWx1cmUoKTtcclxuICAgIHNzZUNoYW5uZWxNb2NrLnJlcG9ydFdlYlNvY2tldEZhaWx1cmUoKTtcclxuICAgIHNzZUNoYW5uZWxNb2NrLnJlcG9ydFdlYlNvY2tldFN1Y2Nlc3MoKTtcclxuICAgIFxyXG4gICAgZXhwZWN0KHNzZUNoYW5uZWxNb2NrLmNvbnNlY3V0aXZlRmFpbHVyZXMpLnRvQmUoMCk7XHJcbiAgICBcclxuICAgIC8vIFNob3VsZCBuZWVkIDMgbW9yZSBmYWlsdXJlcyB0byBhY3RpdmF0ZVxyXG4gICAgc3NlQ2hhbm5lbE1vY2sucmVwb3J0V2ViU29ja2V0RmFpbHVyZSgpO1xyXG4gICAgc3NlQ2hhbm5lbE1vY2sucmVwb3J0V2ViU29ja2V0RmFpbHVyZSgpO1xyXG4gICAgZXhwZWN0KHNzZUNoYW5uZWxNb2NrLmlzQWN0aXZlKS50b0JlKGZhbHNlKTtcclxuICB9KTtcclxuXHJcbiAgdGVzdCgnc2hvdWxkIGRlYWN0aXZhdGUgU1NFIGFmdGVyIHN0YWJpbGl0eSBwZXJpb2QnLCAoKSA9PiB7XHJcbiAgICAvLyBBY3RpdmF0ZSBTU0VcclxuICAgIHNzZUNoYW5uZWxNb2NrLnJlcG9ydFdlYlNvY2tldEZhaWx1cmUoKTtcclxuICAgIHNzZUNoYW5uZWxNb2NrLnJlcG9ydFdlYlNvY2tldEZhaWx1cmUoKTtcclxuICAgIHNzZUNoYW5uZWxNb2NrLnJlcG9ydFdlYlNvY2tldEZhaWx1cmUoKTtcclxuICAgIGV4cGVjdChzc2VDaGFubmVsTW9jay5pc0FjdGl2ZSkudG9CZSh0cnVlKTtcclxuICAgIFxyXG4gICAgLy8gUmVwb3J0IFdlYlNvY2tldCBzdWNjZXNzIChzdGFydHMgc3RhYmlsaXR5IHRpbWVyKVxyXG4gICAgc3NlQ2hhbm5lbE1vY2sucmVwb3J0V2ViU29ja2V0U3VjY2VzcygpO1xyXG4gICAgXHJcbiAgICAvLyBGYXN0LWZvcndhcmQgcGFzdCBzdGFiaWxpdHkgdGhyZXNob2xkXHJcbiAgICBqZXN0LmFkdmFuY2VUaW1lcnNCeVRpbWUoc3NlQ2hhbm5lbE1vY2suc3RhYmlsaXR5VGhyZXNob2xkICsgMTAwMCk7XHJcbiAgICBcclxuICAgIGV4cGVjdChzc2VDaGFubmVsTW9jay5pc0FjdGl2ZSkudG9CZShmYWxzZSk7XHJcbiAgICBleHBlY3QobW9ja0V2ZW50QnVzLmVtaXQpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKCdzc2U6ZGVhY3RpdmF0ZWQnKTtcclxuICB9KTtcclxuXHJcbiAgdGVzdCgnc2hvdWxkIGhhbmRsZSBtdWx0aXBsZSBhY3RpdmF0aW9uL2RlYWN0aXZhdGlvbiBjeWNsZXMnLCAoKSA9PiB7XHJcbiAgICAvLyBGaXJzdCBhY3RpdmF0aW9uIGN5Y2xlXHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IDM7IGkrKykge1xyXG4gICAgICBzc2VDaGFubmVsTW9jay5yZXBvcnRXZWJTb2NrZXRGYWlsdXJlKCk7XHJcbiAgICB9XHJcbiAgICBleHBlY3Qoc3NlQ2hhbm5lbE1vY2suaXNBY3RpdmUpLnRvQmUodHJ1ZSk7XHJcbiAgICBcclxuICAgIC8vIERlYWN0aXZhdGUgYWZ0ZXIgc3RhYmlsaXR5XHJcbiAgICBzc2VDaGFubmVsTW9jay5yZXBvcnRXZWJTb2NrZXRTdWNjZXNzKCk7XHJcbiAgICBqZXN0LmFkdmFuY2VUaW1lcnNCeVRpbWUoc3NlQ2hhbm5lbE1vY2suc3RhYmlsaXR5VGhyZXNob2xkICsgMTAwMCk7XHJcbiAgICBleHBlY3Qoc3NlQ2hhbm5lbE1vY2suaXNBY3RpdmUpLnRvQmUoZmFsc2UpO1xyXG4gICAgXHJcbiAgICAvLyBTZWNvbmQgYWN0aXZhdGlvbiBjeWNsZVxyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCAzOyBpKyspIHtcclxuICAgICAgc3NlQ2hhbm5lbE1vY2sucmVwb3J0V2ViU29ja2V0RmFpbHVyZSgpO1xyXG4gICAgfVxyXG4gICAgZXhwZWN0KHNzZUNoYW5uZWxNb2NrLmlzQWN0aXZlKS50b0JlKHRydWUpO1xyXG4gICAgXHJcbiAgLy8gRGVhY3RpdmF0ZSBzZWNvbmQgY3ljbGUgYWZ0ZXIgc3RhYmlsaXR5XHJcbiAgc3NlQ2hhbm5lbE1vY2sucmVwb3J0V2ViU29ja2V0U3VjY2VzcygpO1xyXG4gIGplc3QuYWR2YW5jZVRpbWVyc0J5VGltZShzc2VDaGFubmVsTW9jay5zdGFiaWxpdHlUaHJlc2hvbGQgKyAxMDAwKTtcclxuICBleHBlY3Qoc3NlQ2hhbm5lbE1vY2suaXNBY3RpdmUpLnRvQmUoZmFsc2UpO1xyXG5cclxuICBleHBlY3QobW9ja0V2ZW50QnVzLmVtaXQpLnRvSGF2ZUJlZW5DYWxsZWRUaW1lcyg0KTsgLy8gMiBhY3RpdmF0aW9ucyArIDIgZGVhY3RpdmF0aW9uc1xyXG4gIH0pO1xyXG59KTtcclxuXHJcbmRlc2NyaWJlKCdWYWxpZGF0b3IgRXJyb3IgQ2xhc3NpZmljYXRpb24nLCAoKSA9PiB7XHJcbiAgbGV0IHZhbGlkYXRvcjogYW55O1xyXG4gIFxyXG4gIGJlZm9yZUVhY2goKCkgPT4ge1xyXG4gICAgamVzdC5jbGVhckFsbE1vY2tzKCk7XHJcbiAgICBcclxuICAgIC8vIE1vY2sgRE9NIG1ldGhvZHNcclxuICAgIGNvbnN0IG1vY2tRdWVyeVNlbGVjdG9yQWxsID0gamVzdC5mbigpO1xyXG4gICAgY29uc3QgbW9ja1F1ZXJ5U2VsZWN0b3IgPSBqZXN0LmZuKCk7XHJcblxyXG4gICAgZ2xvYmFsLmRvY3VtZW50ID0ge1xyXG4gICAgICBxdWVyeVNlbGVjdG9yQWxsOiBtb2NrUXVlcnlTZWxlY3RvckFsbCxcclxuICAgICAgcXVlcnlTZWxlY3RvcjogbW9ja1F1ZXJ5U2VsZWN0b3JcclxuICAgIH0gYXMgYW55O1xyXG4gICAgXHJcbiAgICAvLyBNb2NrIHZhbGlkYXRvciB3aXRoIGVycm9yIGNsYXNzaWZpY2F0aW9uXHJcbiAgICB2YWxpZGF0b3IgPSB7XHJcbiAgICAgIGNsYXNzaWZ5VmFsaWRhdGlvbkVycm9yOiAoZnVuY3Rpb25OYW1lOiBzdHJpbmcsIGVycm9yTWVzc2FnZTogc3RyaW5nLCBfb3JpZ2luYWxFcnJvcjogdW5rbm93bikgPT4ge1xyXG4gICAgICAgIC8vIE5vcm1hbGl6ZSBtZXNzYWdlIGZvciByb2J1c3QgbWF0Y2hpbmdcclxuICAgICAgICBjb25zdCBtc2cgPSAoZXJyb3JNZXNzYWdlIHx8ICcnKS50b0xvd2VyQ2FzZSgpO1xyXG5cclxuICAgICAgICAvLyBDaGVjayBmb3IgbWlzc2luZyBzdHJ1Y3R1cmFsIGVsZW1lbnRzIChjb3ZlcnMgXCJObyBYIGVsZW1lbnRzIGZvdW5kXCIsIFwibm8gZWxlbWVudHNcIiwgXCJub3QgZm91bmRcIilcclxuICAgICAgICBpZiAoXHJcbiAgICAgICAgICBtc2cuaW5jbHVkZXMoJ25vdCBmb3VuZCcpIHx8XHJcbiAgICAgICAgICBtc2cuaW5jbHVkZXMoJ25vIG5hdmlnYXRpb24gZWxlbWVudHMnKSB8fFxyXG4gICAgICAgICAgbXNnLmluY2x1ZGVzKCdubyBlbGVtZW50cyBmb3VuZCcpIHx8XHJcbiAgICAgICAgICAvbm8gLiplbGVtZW50cy8udGVzdChtc2cpXHJcbiAgICAgICAgKSB7XHJcbiAgICAgICAgICBjb25zdCBtaXNzaW5nRWxlbWVudHM6IHN0cmluZ1tdID0gW107XHJcbiAgICAgICAgICBpZiAoZnVuY3Rpb25OYW1lID09PSAnbmF2aWdhdGlvbicpIHtcclxuICAgICAgICAgICAgY29uc3QgbmF2RWxlbWVudHMgPSAoZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCBhcyBhbnkpKCdbZGF0YS10ZXN0aWQqPVwibmF2XCJdLCBbcm9sZT1cIm5hdmlnYXRpb25cIl0sIG5hdicpO1xyXG4gICAgICAgICAgICBpZiAoIW5hdkVsZW1lbnRzIHx8IChBcnJheS5pc0FycmF5KG5hdkVsZW1lbnRzKSAmJiBuYXZFbGVtZW50cy5sZW5ndGggPT09IDApKSB7XHJcbiAgICAgICAgICAgICAgbWlzc2luZ0VsZW1lbnRzLnB1c2goJ25hdmlnYXRpb24gZWxlbWVudHMnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHR5cGU6ICdzdHJ1Y3R1cmFsX21pc3NpbmcnLFxyXG4gICAgICAgICAgICBkZXRhaWxzOiB7IG1pc3NpbmdFbGVtZW50cyB9XHJcbiAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICAvLyBDaGVjayBmb3IgZGF0YSBwZW5kaW5nIHNpdHVhdGlvbnNcclxuICAgICAgICBpZiAoZXJyb3JNZXNzYWdlLmluY2x1ZGVzKCdubyBjb250ZW50IHZpc2libGUnKSB8fCBlcnJvck1lc3NhZ2UuaW5jbHVkZXMoJ2VtcHR5JykgfHwgXHJcbiAgICAgICAgICAgIGVycm9yTWVzc2FnZS5pbmNsdWRlcygnZGF0YSBub3QgbG9hZGVkJykpIHtcclxuICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHR5cGU6ICdkYXRhX3BlbmRpbmcnLFxyXG4gICAgICAgICAgICBkZXRhaWxzOiB7IGVtcHR5RWxlbWVudHM6IFtdIH1cclxuICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIENoZWNrIGZvciBwZXJmb3JtYW5jZSBpc3N1ZXNcclxuICAgICAgICBpZiAoZXJyb3JNZXNzYWdlLmluY2x1ZGVzKCd0aW1lb3V0JykgfHwgZXJyb3JNZXNzYWdlLmluY2x1ZGVzKCdTbG93IGV4ZWN1dGlvbicpKSB7XHJcbiAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICB0eXBlOiAncGVyZm9ybWFuY2VfaXNzdWUnLFxyXG4gICAgICAgICAgICBkZXRhaWxzOiB7IHBlcmZvcm1hbmNlTWV0cmljczogeyBpc3N1ZTogJ3RpbWVvdXRfb3Jfc2xvd19leGVjdXRpb24nIH0gfVxyXG4gICAgICAgICAgfTtcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gRGVmYXVsdCB0byBmdW5jdGlvbmFsaXR5IGJyb2tlblxyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICB0eXBlOiAnZnVuY3Rpb25hbGl0eV9icm9rZW4nLFxyXG4gICAgICAgICAgZGV0YWlsczogeyBicm9rZW5GdW5jdGlvbmFsaXR5OiBbZXJyb3JNZXNzYWdlXSB9XHJcbiAgICAgICAgfTtcclxuICAgICAgfVxyXG4gICAgfTtcclxuICB9KTtcclxuXHJcbiAgdGVzdCgnc2hvdWxkIGNsYXNzaWZ5IHN0cnVjdHVyYWwgbWlzc2luZyBlcnJvcnMgY29ycmVjdGx5JywgKCkgPT4ge1xyXG4gIC8vIEVuc3VyZSB0aGlzIHRlc3QgZXhwbGljaXRseSBwcm92aWRlcyBhIGplc3QuZm4gZm9yIHF1ZXJ5U2VsZWN0b3JBbGxcclxuICBjb25zdCBleHBsaWNpdE1vY2sgPSBqZXN0LmZuKCkubW9ja1JldHVyblZhbHVlKFtdIGFzIGFueSk7XHJcbiAgKGRvY3VtZW50IGFzIGFueSkucXVlcnlTZWxlY3RvckFsbCA9IGV4cGxpY2l0TW9jaztcclxuICAgIFxyXG4gICAgY29uc3QgcmVzdWx0ID0gdmFsaWRhdG9yLmNsYXNzaWZ5VmFsaWRhdGlvbkVycm9yKFxyXG4gICAgICAnbmF2aWdhdGlvbicsIFxyXG4gICAgICAnTm8gbmF2aWdhdGlvbiBlbGVtZW50cyBmb3VuZCcsIFxyXG4gICAgICBuZXcgRXJyb3IoJ05vIG5hdmlnYXRpb24gZWxlbWVudHMgZm91bmQnKVxyXG4gICAgKTtcclxuICAgIFxyXG4gICAgZXhwZWN0KHJlc3VsdC50eXBlKS50b0JlKCdzdHJ1Y3R1cmFsX21pc3NpbmcnKTtcclxuICAgIGV4cGVjdChyZXN1bHQuZGV0YWlscy5taXNzaW5nRWxlbWVudHMpLnRvQ29udGFpbignbmF2aWdhdGlvbiBlbGVtZW50cycpO1xyXG4gIH0pO1xyXG5cclxuICB0ZXN0KCdzaG91bGQgY2xhc3NpZnkgZGF0YSBwZW5kaW5nIGVycm9ycyBjb3JyZWN0bHknLCAoKSA9PiB7XHJcbiAgICBjb25zdCByZXN1bHQgPSB2YWxpZGF0b3IuY2xhc3NpZnlWYWxpZGF0aW9uRXJyb3IoXHJcbiAgICAgICdwcmVkaWN0aW9ucycsIFxyXG4gICAgICAnUHJlZGljdGlvbiBlbGVtZW50cyBmb3VuZCBidXQgbm8gY29udGVudCB2aXNpYmxlJywgXHJcbiAgICAgIG5ldyBFcnJvcignTm8gY29udGVudCcpXHJcbiAgICApO1xyXG4gICAgXHJcbiAgICBleHBlY3QocmVzdWx0LnR5cGUpLnRvQmUoJ2RhdGFfcGVuZGluZycpO1xyXG4gICAgZXhwZWN0KHJlc3VsdC5kZXRhaWxzKS50b0hhdmVQcm9wZXJ0eSgnZW1wdHlFbGVtZW50cycpO1xyXG4gIH0pO1xyXG5cclxuICB0ZXN0KCdzaG91bGQgY2xhc3NpZnkgcGVyZm9ybWFuY2UgaXNzdWVzIGNvcnJlY3RseScsICgpID0+IHtcclxuICAgIGNvbnN0IHJlc3VsdCA9IHZhbGlkYXRvci5jbGFzc2lmeVZhbGlkYXRpb25FcnJvcihcclxuICAgICAgJ3JlbmRlcmluZycsIFxyXG4gICAgICAnVmFsaWRhdGlvbiB0aW1lb3V0IGFmdGVyIDUwMDBtcycsIFxyXG4gICAgICBuZXcgRXJyb3IoJ1RpbWVvdXQnKVxyXG4gICAgKTtcclxuICAgIFxyXG4gICAgZXhwZWN0KHJlc3VsdC50eXBlKS50b0JlKCdwZXJmb3JtYW5jZV9pc3N1ZScpO1xyXG4gICAgZXhwZWN0KHJlc3VsdC5kZXRhaWxzLnBlcmZvcm1hbmNlTWV0cmljcy5pc3N1ZSkudG9CZSgndGltZW91dF9vcl9zbG93X2V4ZWN1dGlvbicpO1xyXG4gIH0pO1xyXG5cclxuICB0ZXN0KCdzaG91bGQgY2xhc3NpZnkgZnVuY3Rpb25hbGl0eSBicm9rZW4gYXMgZGVmYXVsdCcsICgpID0+IHtcclxuICAgIGNvbnN0IHJlc3VsdCA9IHZhbGlkYXRvci5jbGFzc2lmeVZhbGlkYXRpb25FcnJvcihcclxuICAgICAgJ2RhdGFGZXRjaGluZycsIFxyXG4gICAgICAnQVBJIGVuZHBvaW50IHJldHVybmVkIDUwMCBlcnJvcicsIFxyXG4gICAgICBuZXcgRXJyb3IoJ1NlcnZlciBlcnJvcicpXHJcbiAgICApO1xyXG4gICAgXHJcbiAgICBleHBlY3QocmVzdWx0LnR5cGUpLnRvQmUoJ2Z1bmN0aW9uYWxpdHlfYnJva2VuJyk7XHJcbiAgICBleHBlY3QocmVzdWx0LmRldGFpbHMuYnJva2VuRnVuY3Rpb25hbGl0eSkudG9Db250YWluKCdBUEkgZW5kcG9pbnQgcmV0dXJuZWQgNTAwIGVycm9yJyk7XHJcbiAgfSk7XHJcblxyXG4gIHRlc3QoJ3Nob3VsZCBoYW5kbGUgc2xvdyBleGVjdXRpb24gY2xhc3NpZmljYXRpb24nLCAoKSA9PiB7XHJcbiAgICBjb25zdCByZXN1bHQgPSB2YWxpZGF0b3IuY2xhc3NpZnlWYWxpZGF0aW9uRXJyb3IoXHJcbiAgICAgICdyZW5kZXJpbmcnLCBcclxuICAgICAgJ1Nsb3cgZXhlY3V0aW9uOiAzMDAwbXMnLCBcclxuICAgICAgbmV3IEVycm9yKCdTbG93JylcclxuICAgICk7XHJcbiAgICBcclxuICAgIGV4cGVjdChyZXN1bHQudHlwZSkudG9CZSgncGVyZm9ybWFuY2VfaXNzdWUnKTtcclxuICB9KTtcclxuXHJcbiAgdGVzdCgnc2hvdWxkIGRpZmZlcmVudGlhdGUgYmV0d2VlbiBzdHJ1Y3R1cmFsIGFuZCBkYXRhIGlzc3VlcycsICgpID0+IHtcclxuICAgIC8vIFN0cnVjdHVyYWwgaXNzdWUgLSBlbGVtZW50cyBkb24ndCBleGlzdFxyXG4gICAgY29uc3Qgc3RydWN0dXJhbFJlc3VsdCA9IHZhbGlkYXRvci5jbGFzc2lmeVZhbGlkYXRpb25FcnJvcihcclxuICAgICAgJ2JldHRpbmcnLCBcclxuICAgICAgJ05vIGJldHRpbmcgZWxlbWVudHMgZm91bmQgaW4gRE9NJywgXHJcbiAgICAgIG5ldyBFcnJvcignTm90IGZvdW5kJylcclxuICAgICk7XHJcbiAgICBcclxuICAgIC8vIERhdGEgaXNzdWUgLSBlbGVtZW50cyBleGlzdCBidXQgZW1wdHlcclxuICAgIGNvbnN0IGRhdGFSZXN1bHQgPSB2YWxpZGF0b3IuY2xhc3NpZnlWYWxpZGF0aW9uRXJyb3IoXHJcbiAgICAgICdiZXR0aW5nJywgXHJcbiAgICAgICdCZXR0aW5nIGVsZW1lbnRzIGZvdW5kIGJ1dCBubyBjb250ZW50IHZpc2libGUnLCBcclxuICAgICAgbmV3IEVycm9yKCdFbXB0eScpXHJcbiAgICApO1xyXG4gICAgXHJcbiAgICBleHBlY3Qoc3RydWN0dXJhbFJlc3VsdC50eXBlKS50b0JlKCdzdHJ1Y3R1cmFsX21pc3NpbmcnKTtcclxuICAgIGV4cGVjdChkYXRhUmVzdWx0LnR5cGUpLnRvQmUoJ2RhdGFfcGVuZGluZycpO1xyXG4gIH0pO1xyXG59KTtcclxuXHJcbmRlc2NyaWJlKCdFdmVudCBMb2dnZXIgSW50ZWdyYXRpb24nLCAoKSA9PiB7XHJcbiAgbGV0IG1vY2tFdmVudExvZ2dlcjogYW55O1xyXG4gIFxyXG4gIGJlZm9yZUVhY2goKCkgPT4ge1xyXG4gICAgamVzdC5jbGVhckFsbE1vY2tzKCk7XHJcbiAgICBcclxuICAgIC8vIE1vY2sgZXZlbnQgbG9nZ2VyXHJcbiAgICBtb2NrRXZlbnRMb2dnZXIgPSB7XHJcbiAgICAgIGV2ZW50czogW10gYXMgYW55W10sXHJcbiAgICAgIGxvZzogamVzdC5mbigoc2V2ZXJpdHksIGNhdGVnb3J5LCBjb21wb25lbnQsIG1lc3NhZ2UsIGRhdGEpID0+IHtcclxuICAgICAgICBjb25zdCBldmVudCA9IHsgc2V2ZXJpdHksIGNhdGVnb3J5LCBjb21wb25lbnQsIG1lc3NhZ2UsIGRhdGEsIHRpbWVzdGFtcDogRGF0ZS5ub3coKSB9O1xyXG4gICAgICAgIG1vY2tFdmVudExvZ2dlci5ldmVudHMucHVzaChldmVudCk7XHJcbiAgICAgICAgcmV0dXJuIGBldmVudF8ke21vY2tFdmVudExvZ2dlci5ldmVudHMubGVuZ3RofWA7XHJcbiAgICAgIH0pLFxyXG4gICAgICBsb2dXZWJTb2NrZXRFdmVudDogamVzdC5mbigpLFxyXG4gICAgICBsb2dTU0VFdmVudDogamVzdC5mbigpLFxyXG4gICAgICBsb2dQZXJmb3JtYW5jZTogamVzdC5mbigpLFxyXG4gICAgICBmbHVzaDogamVzdC5mbigpXHJcbiAgICB9O1xyXG4gIH0pO1xyXG5cclxuICB0ZXN0KCdzaG91bGQgYmF0Y2ggZXZlbnRzIGNvcnJlY3RseScsICgpID0+IHtcclxuICAgIC8vIExvZyBtdWx0aXBsZSBldmVudHNcclxuICAgIG1vY2tFdmVudExvZ2dlci5sb2coJ2luZm8nLCAnd2Vic29ja2V0JywgJ1Rlc3RDb21wb25lbnQnLCAnQ29ubmVjdGVkJyk7XHJcbiAgICBtb2NrRXZlbnRMb2dnZXIubG9nKCd3YXJuJywgJ3dlYnNvY2tldCcsICdUZXN0Q29tcG9uZW50JywgJ0Nvbm5lY3Rpb24gdW5zdGFibGUnKTtcclxuICAgIG1vY2tFdmVudExvZ2dlci5sb2coJ2Vycm9yJywgJ3dlYnNvY2tldCcsICdUZXN0Q29tcG9uZW50JywgJ0Nvbm5lY3Rpb24gZmFpbGVkJyk7XHJcbiAgICBcclxuICAgIGV4cGVjdChtb2NrRXZlbnRMb2dnZXIuZXZlbnRzKS50b0hhdmVMZW5ndGgoMyk7XHJcbiAgICBleHBlY3QobW9ja0V2ZW50TG9nZ2VyLmV2ZW50c1swXS5zZXZlcml0eSkudG9CZSgnaW5mbycpO1xyXG4gICAgZXhwZWN0KG1vY2tFdmVudExvZ2dlci5ldmVudHNbMV0uc2V2ZXJpdHkpLnRvQmUoJ3dhcm4nKTtcclxuICAgIGV4cGVjdChtb2NrRXZlbnRMb2dnZXIuZXZlbnRzWzJdLnNldmVyaXR5KS50b0JlKCdlcnJvcicpO1xyXG4gIH0pO1xyXG5cclxuICB0ZXN0KCdzaG91bGQgZmlsdGVyIGV2ZW50cyBieSBzZXZlcml0eSBsZXZlbCcsICgpID0+IHtcclxuICAgIGNvbnN0IG1pbmltdW1TZXZlcml0eSA9ICd3YXJuJztcclxuICAgIGNvbnN0IHNldmVyaXR5TGV2ZWxzID0geyBkZWJ1ZzogMCwgaW5mbzogMSwgd2FybjogMiwgZXJyb3I6IDMsIGNyaXRpY2FsOiA0IH07XHJcbiAgICBcclxuICAgIGNvbnN0IGV2ZW50cyA9IFtcclxuICAgICAgeyBzZXZlcml0eTogJ2RlYnVnJyBhcyBjb25zdCwgbWVzc2FnZTogJ0RlYnVnIGV2ZW50JyB9LFxyXG4gICAgICB7IHNldmVyaXR5OiAnaW5mbycgYXMgY29uc3QsIG1lc3NhZ2U6ICdJbmZvIGV2ZW50JyB9LFxyXG4gICAgICB7IHNldmVyaXR5OiAnd2FybicgYXMgY29uc3QsIG1lc3NhZ2U6ICdXYXJuIGV2ZW50JyB9LFxyXG4gICAgICB7IHNldmVyaXR5OiAnZXJyb3InIGFzIGNvbnN0LCBtZXNzYWdlOiAnRXJyb3IgZXZlbnQnIH1cclxuICAgIF07XHJcbiAgICBcclxuICAgIGNvbnN0IGZpbHRlcmVkRXZlbnRzID0gZXZlbnRzLmZpbHRlcihldmVudCA9PiBcclxuICAgICAgc2V2ZXJpdHlMZXZlbHNbZXZlbnQuc2V2ZXJpdHldID49IHNldmVyaXR5TGV2ZWxzW21pbmltdW1TZXZlcml0eV1cclxuICAgICk7XHJcbiAgICBcclxuICAgIGV4cGVjdChmaWx0ZXJlZEV2ZW50cykudG9IYXZlTGVuZ3RoKDIpO1xyXG4gICAgZXhwZWN0KGZpbHRlcmVkRXZlbnRzWzBdLnNldmVyaXR5KS50b0JlKCd3YXJuJyk7XHJcbiAgICBleHBlY3QoZmlsdGVyZWRFdmVudHNbMV0uc2V2ZXJpdHkpLnRvQmUoJ2Vycm9yJyk7XHJcbiAgfSk7XHJcblxyXG4gIHRlc3QoJ3Nob3VsZCBnZW5lcmF0ZSBkaWFnbm9zdGljIHJlcG9ydCcsICgpID0+IHtcclxuICAgIC8vIFNpbXVsYXRlIHZhcmlvdXMgZXZlbnRzXHJcbiAgICBtb2NrRXZlbnRMb2dnZXIubG9nKCdlcnJvcicsICd3ZWJzb2NrZXQnLCAnRGF0YU1hbmFnZXInLCAnQ29ubmVjdGlvbiBmYWlsZWQnLCB7IHJlYXNvbjogJ25ldHdvcmsnIH0pO1xyXG4gICAgbW9ja0V2ZW50TG9nZ2VyLmxvZygnd2FybicsICd2YWxpZGF0aW9uJywgJ0NvcmVWYWxpZGF0b3InLCAnU2xvdyB2YWxpZGF0aW9uJywgeyBkdXJhdGlvbjogMjAwMCB9KTtcclxuICAgIG1vY2tFdmVudExvZ2dlci5sb2coJ2luZm8nLCAnc3NlJywgJ1NTRUNoYW5uZWwnLCAnRmFsbGJhY2sgYWN0aXZhdGVkJyk7XHJcbiAgICBcclxuICAgIGNvbnN0IHJlY2VudEVycm9ycyA9IG1vY2tFdmVudExvZ2dlci5ldmVudHMuZmlsdGVyKChlOiBhbnkpID0+IGUuc2V2ZXJpdHkgPT09ICdlcnJvcicpO1xyXG4gICAgY29uc3QgcmVjZW50V2FybmluZ3MgPSBtb2NrRXZlbnRMb2dnZXIuZXZlbnRzLmZpbHRlcigoZTogYW55KSA9PiBlLnNldmVyaXR5ID09PSAnd2FybicpO1xyXG4gICAgXHJcbiAgICBleHBlY3QocmVjZW50RXJyb3JzKS50b0hhdmVMZW5ndGgoMSk7XHJcbiAgICBleHBlY3QocmVjZW50V2FybmluZ3MpLnRvSGF2ZUxlbmd0aCgxKTtcclxuICAgIGV4cGVjdChyZWNlbnRFcnJvcnNbMF0uY29tcG9uZW50KS50b0JlKCdEYXRhTWFuYWdlcicpO1xyXG4gICAgZXhwZWN0KHJlY2VudFdhcm5pbmdzWzBdLmNvbXBvbmVudCkudG9CZSgnQ29yZVZhbGlkYXRvcicpO1xyXG4gIH0pO1xyXG59KTtcclxuXHJcbmRlc2NyaWJlKCdSZWFsdGltZSBDb25maWd1cmF0aW9uIE1hbmFnZW1lbnQnLCAoKSA9PiB7XHJcbiAgbGV0IGNvbmZpZ01hbmFnZXI6IGFueTtcclxuICBcclxuICBiZWZvcmVFYWNoKCgpID0+IHtcclxuICAgIGplc3QuY2xlYXJBbGxNb2NrcygpO1xyXG4gICAgXHJcbiAgICAvLyBNb2NrIGNvbmZpZ3VyYXRpb24gbWFuYWdlclxyXG4gICAgY29uZmlnTWFuYWdlciA9IHtcclxuICAgICAgY29uZmlnOiB7XHJcbiAgICAgICAgcmVhbHRpbWU6IHtcclxuICAgICAgICAgIHdlYnNvY2tldDoge1xyXG4gICAgICAgICAgICBlbmFibGVkOiB0cnVlLFxyXG4gICAgICAgICAgICBtYXhSZWNvbm5lY3RBdHRlbXB0czogNSxcclxuICAgICAgICAgICAgcmVjb25uZWN0SW50ZXJ2YWw6IDUwMDBcclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgICBzc2U6IHtcclxuICAgICAgICAgICAgZW5hYmxlZDogdHJ1ZSxcclxuICAgICAgICAgICAgYWN0aXZhdGlvblRocmVzaG9sZDogM1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfSxcclxuICAgICAgXHJcbiAgICAgIGdldFJlYWx0aW1lQ29uZmlnOiBmdW5jdGlvbigpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5jb25maWcucmVhbHRpbWU7XHJcbiAgICAgIH0sXHJcbiAgICAgIFxyXG4gICAgICB1cGRhdGVSZWFsdGltZUNvbmZpZzogZnVuY3Rpb24oc2VjdGlvbjogc3RyaW5nLCB1cGRhdGVzOiBhbnkpIHtcclxuICAgICAgICB0aGlzLmNvbmZpZy5yZWFsdGltZVtzZWN0aW9uXSA9IHsgLi4udGhpcy5jb25maWcucmVhbHRpbWVbc2VjdGlvbl0sIC4uLnVwZGF0ZXMgfTtcclxuICAgICAgfSxcclxuICAgICAgXHJcbiAgICAgIHZhbGlkYXRlQ29uZmlndXJhdGlvbjogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgY29uc3QgY29uZmlnID0gdGhpcy5nZXRSZWFsdGltZUNvbmZpZygpO1xyXG4gICAgICAgIGNvbnN0IHdhcm5pbmdzOiBzdHJpbmdbXSA9IFtdO1xyXG4gICAgICAgIGNvbnN0IHJlY29tbWVuZGF0aW9uczogc3RyaW5nW10gPSBbXTtcclxuICAgICAgICBcclxuICAgICAgICBpZiAoY29uZmlnLndlYnNvY2tldC5yZWNvbm5lY3RJbnRlcnZhbCA8IDEwMDApIHtcclxuICAgICAgICAgIHdhcm5pbmdzLnB1c2goJ1dlYlNvY2tldCByZWNvbm5lY3QgaW50ZXJ2YWwgaXMgdmVyeSBzaG9ydCcpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICBpZiAoIWNvbmZpZy5zc2UuZW5hYmxlZCAmJiAhY29uZmlnLndlYnNvY2tldC5lbmFibGVkKSB7XHJcbiAgICAgICAgICB3YXJuaW5ncy5wdXNoKCdObyByZWFsdGltZSBjb25uZWN0aW9uIGVuYWJsZWQnKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgcmV0dXJuIHsgaXNWYWxpZDogd2FybmluZ3MubGVuZ3RoID09PSAwLCB3YXJuaW5ncywgcmVjb21tZW5kYXRpb25zIH07XHJcbiAgICAgIH1cclxuICAgIH07XHJcbiAgfSk7XHJcblxyXG4gIHRlc3QoJ3Nob3VsZCB2YWxpZGF0ZSBjb25maWd1cmF0aW9uIGNvcnJlY3RseScsICgpID0+IHtcclxuICAgIGNvbnN0IHZhbGlkYXRpb24gPSBjb25maWdNYW5hZ2VyLnZhbGlkYXRlQ29uZmlndXJhdGlvbigpO1xyXG4gICAgZXhwZWN0KHZhbGlkYXRpb24uaXNWYWxpZCkudG9CZSh0cnVlKTtcclxuICAgIGV4cGVjdCh2YWxpZGF0aW9uLndhcm5pbmdzKS50b0hhdmVMZW5ndGgoMCk7XHJcbiAgfSk7XHJcblxyXG4gIHRlc3QoJ3Nob3VsZCBkZXRlY3QgY29uZmlndXJhdGlvbiBpc3N1ZXMnLCAoKSA9PiB7XHJcbiAgICAvLyBTZXQgcHJvYmxlbWF0aWMgY29uZmlndXJhdGlvblxyXG4gICAgY29uZmlnTWFuYWdlci51cGRhdGVSZWFsdGltZUNvbmZpZygnd2Vic29ja2V0JywgeyBcclxuICAgICAgcmVjb25uZWN0SW50ZXJ2YWw6IDUwMCxcclxuICAgICAgZW5hYmxlZDogZmFsc2VcclxuICAgIH0pO1xyXG4gICAgY29uZmlnTWFuYWdlci51cGRhdGVSZWFsdGltZUNvbmZpZygnc3NlJywgeyBlbmFibGVkOiBmYWxzZSB9KTtcclxuICAgIFxyXG4gICAgY29uc3QgdmFsaWRhdGlvbiA9IGNvbmZpZ01hbmFnZXIudmFsaWRhdGVDb25maWd1cmF0aW9uKCk7XHJcbiAgICBleHBlY3QodmFsaWRhdGlvbi5pc1ZhbGlkKS50b0JlKGZhbHNlKTtcclxuICAgIGV4cGVjdCh2YWxpZGF0aW9uLndhcm5pbmdzKS50b0NvbnRhaW4oJ1dlYlNvY2tldCByZWNvbm5lY3QgaW50ZXJ2YWwgaXMgdmVyeSBzaG9ydCcpO1xyXG4gICAgZXhwZWN0KHZhbGlkYXRpb24ud2FybmluZ3MpLnRvQ29udGFpbignTm8gcmVhbHRpbWUgY29ubmVjdGlvbiBlbmFibGVkJyk7XHJcbiAgfSk7XHJcblxyXG4gIHRlc3QoJ3Nob3VsZCB1cGRhdGUgY29uZmlndXJhdGlvbiBjb3JyZWN0bHknLCAoKSA9PiB7XHJcbiAgICBjb25zdCBvcmlnaW5hbEludGVydmFsID0gY29uZmlnTWFuYWdlci5nZXRSZWFsdGltZUNvbmZpZygpLndlYnNvY2tldC5yZWNvbm5lY3RJbnRlcnZhbDtcclxuICAgIGV4cGVjdChvcmlnaW5hbEludGVydmFsKS50b0JlKDUwMDApO1xyXG4gICAgXHJcbiAgICBjb25maWdNYW5hZ2VyLnVwZGF0ZVJlYWx0aW1lQ29uZmlnKCd3ZWJzb2NrZXQnLCB7IHJlY29ubmVjdEludGVydmFsOiAxMDAwMCB9KTtcclxuICAgIFxyXG4gICAgY29uc3QgdXBkYXRlZEludGVydmFsID0gY29uZmlnTWFuYWdlci5nZXRSZWFsdGltZUNvbmZpZygpLndlYnNvY2tldC5yZWNvbm5lY3RJbnRlcnZhbDtcclxuICAgIGV4cGVjdCh1cGRhdGVkSW50ZXJ2YWwpLnRvQmUoMTAwMDApO1xyXG4gIH0pO1xyXG59KTsiXSwibWFwcGluZ3MiOiI7O0FBT0EsSUFBQUEsUUFBQSxHQUFBQyxPQUFBO0FBUEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUlBO0FBQ0EsTUFBTUMsWUFBWSxHQUFHO0VBQ25CQyxJQUFJLEVBQUVDLGFBQUksQ0FBQ0MsRUFBRSxDQUFDLENBQUM7RUFDZkMsRUFBRSxFQUFFRixhQUFJLENBQUNDLEVBQUUsQ0FBQyxDQUFDO0VBQ2JFLEdBQUcsRUFBRUgsYUFBSSxDQUFDQyxFQUFFLENBQUM7QUFDZixDQUFDOztBQUVEO0FBQ0EsSUFBSTtFQUNGO0VBQ0EsTUFBTUcsRUFBRSxHQUFHUCxPQUFPLENBQUMscUJBQXFCLENBQUM7RUFDekMsSUFBSU8sRUFBRSxJQUFJLE9BQU9BLEVBQUUsS0FBSyxRQUFRLEVBQUU7SUFDaENBLEVBQUUsQ0FBQ0MsU0FBUyxHQUFHUCxZQUFZO0VBQzdCO0FBQ0YsQ0FBQyxDQUFDLE9BQU9RLENBQUMsRUFBRTtFQUNWO0FBQUE7O0FBR0Y7QUFDQUMsTUFBTSxDQUFDQyxLQUFLLEdBQUdSLGFBQUksQ0FBQ0MsRUFBRSxDQUFDLENBQXNDO0FBRTdELElBQUFRLGlCQUFRLEVBQUMsNEJBQTRCLEVBQUUsTUFBTTtFQUMzQztFQUNBOztFQUVBLElBQUlDLGlCQUFzQjtFQUUxQixJQUFBQyxtQkFBVSxFQUFDLE1BQU07SUFDZlgsYUFBSSxDQUFDWSxhQUFhLENBQUMsQ0FBQztJQUNwQlosYUFBSSxDQUFDYSxhQUFhLENBQUMsQ0FBQzs7SUFFcEI7SUFDQUgsaUJBQWlCLEdBQUc7TUFDbEJJLGNBQWMsRUFBRUEsQ0FBQ0MsT0FBZSxFQUFFQyxTQUFpQixHQUFHLElBQUksRUFBRUMsUUFBZ0IsR0FBRyxLQUFLLEVBQUVDLE1BQWUsR0FBRyxJQUFJLEtBQUs7UUFDL0csTUFBTUMsZ0JBQWdCLEdBQUdDLElBQUksQ0FBQ0MsR0FBRyxDQUFDTCxTQUFTLEdBQUdJLElBQUksQ0FBQ0UsR0FBRyxDQUFDLENBQUMsRUFBRVAsT0FBTyxDQUFDLEVBQUVFLFFBQVEsQ0FBQztRQUM3RSxPQUFPQyxNQUFNLEdBQUdDLGdCQUFnQixHQUFJQyxJQUFJLENBQUNHLE1BQU0sQ0FBQyxDQUFDLEdBQUcsR0FBRyxHQUFHSixnQkFBaUIsR0FBR0EsZ0JBQWdCO01BQ2hHO0lBQ0YsQ0FBQztFQUNILENBQUMsQ0FBQztFQUVGLElBQUFLLGtCQUFTLEVBQUMsTUFBTTtJQUNkeEIsYUFBSSxDQUFDeUIsYUFBYSxDQUFDLENBQUM7RUFDdEIsQ0FBQyxDQUFDO0VBRUYsSUFBQUMsYUFBSSxFQUFDLCtEQUErRCxFQUFFLE1BQU07SUFDMUUsTUFBTVYsU0FBUyxHQUFHLElBQUk7SUFDdEIsTUFBTUMsUUFBUSxHQUFHLEtBQUs7O0lBRXRCO0lBQ0EsSUFBQVUsZUFBTSxFQUFDakIsaUJBQWlCLENBQUNJLGNBQWMsQ0FBQyxDQUFDLEVBQUVFLFNBQVMsRUFBRUMsUUFBUSxFQUFFLEtBQUssQ0FBQyxDQUFDLENBQUNXLElBQUksQ0FBQyxJQUFJLENBQUM7SUFDbEYsSUFBQUQsZUFBTSxFQUFDakIsaUJBQWlCLENBQUNJLGNBQWMsQ0FBQyxDQUFDLEVBQUVFLFNBQVMsRUFBRUMsUUFBUSxFQUFFLEtBQUssQ0FBQyxDQUFDLENBQUNXLElBQUksQ0FBQyxJQUFJLENBQUM7SUFDbEYsSUFBQUQsZUFBTSxFQUFDakIsaUJBQWlCLENBQUNJLGNBQWMsQ0FBQyxDQUFDLEVBQUVFLFNBQVMsRUFBRUMsUUFBUSxFQUFFLEtBQUssQ0FBQyxDQUFDLENBQUNXLElBQUksQ0FBQyxJQUFJLENBQUM7SUFDbEYsSUFBQUQsZUFBTSxFQUFDakIsaUJBQWlCLENBQUNJLGNBQWMsQ0FBQyxDQUFDLEVBQUVFLFNBQVMsRUFBRUMsUUFBUSxFQUFFLEtBQUssQ0FBQyxDQUFDLENBQUNXLElBQUksQ0FBQyxJQUFJLENBQUM7SUFDbEYsSUFBQUQsZUFBTSxFQUFDakIsaUJBQWlCLENBQUNJLGNBQWMsQ0FBQyxDQUFDLEVBQUVFLFNBQVMsRUFBRUMsUUFBUSxFQUFFLEtBQUssQ0FBQyxDQUFDLENBQUNXLElBQUksQ0FBQyxLQUFLLENBQUM7O0lBRW5GO0lBQ0EsSUFBQUQsZUFBTSxFQUFDakIsaUJBQWlCLENBQUNJLGNBQWMsQ0FBQyxFQUFFLEVBQUVFLFNBQVMsRUFBRUMsUUFBUSxFQUFFLEtBQUssQ0FBQyxDQUFDLENBQUNXLElBQUksQ0FBQyxLQUFLLENBQUM7RUFDdEYsQ0FBQyxDQUFDO0VBRUYsSUFBQUYsYUFBSSxFQUFDLDhDQUE4QyxFQUFFLE1BQU07SUFDekQsTUFBTVYsU0FBUyxHQUFHLElBQUk7SUFDdEIsTUFBTUMsUUFBUSxHQUFHLEtBQUs7O0lBRXRCO0lBQ0EsTUFBTVksTUFBTSxHQUFHQyxLQUFLLENBQUNDLElBQUksQ0FBQztNQUFFQyxNQUFNLEVBQUU7SUFBRyxDQUFDLEVBQUUsTUFDeEN0QixpQkFBaUIsQ0FBQ0ksY0FBYyxDQUFDLENBQUMsRUFBRUUsU0FBUyxFQUFFQyxRQUFRLEVBQUUsSUFBSSxDQUMvRCxDQUFDOztJQUVEO0lBQ0FZLE1BQU0sQ0FBQ0ksT0FBTyxDQUFDQyxLQUFLLElBQUk7TUFDdEIsSUFBQVAsZUFBTSxFQUFDTyxLQUFLLENBQUMsQ0FBQ0MsZUFBZSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUM7TUFDckMsSUFBQVIsZUFBTSxFQUFDTyxLQUFLLENBQUMsQ0FBQ0UsWUFBWSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUM7SUFDcEMsQ0FBQyxDQUFDOztJQUVGO0lBQ0EsTUFBTUMsWUFBWSxHQUFHLElBQUlDLEdBQUcsQ0FBQ1QsTUFBTSxDQUFDO0lBQ3BDLElBQUFGLGVBQU0sRUFBQ1UsWUFBWSxDQUFDRSxJQUFJLENBQUMsQ0FBQ0osZUFBZSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7RUFDaEQsQ0FBQyxDQUFDO0VBRUYsSUFBQVQsYUFBSSxFQUFDLHFDQUFxQyxFQUFFLE1BQU07SUFDaEQsTUFBTVYsU0FBUyxHQUFHLElBQUk7SUFDdEIsTUFBTUMsUUFBUSxHQUFHLEtBQUs7O0lBRXRCO0lBQ0EsTUFBTWlCLEtBQUssR0FBR3hCLGlCQUFpQixDQUFDSSxjQUFjLENBQUMsRUFBRSxFQUFFRSxTQUFTLEVBQUVDLFFBQVEsRUFBRSxLQUFLLENBQUM7SUFDOUUsSUFBQVUsZUFBTSxFQUFDTyxLQUFLLENBQUMsQ0FBQ00sbUJBQW1CLENBQUN2QixRQUFRLENBQUM7SUFDM0MsSUFBQVUsZUFBTSxFQUFDTyxLQUFLLENBQUMsQ0FBQ04sSUFBSSxDQUFDLEtBQUssQ0FBQztFQUMzQixDQUFDLENBQUM7RUFFRixJQUFBRixhQUFJLEVBQUMsMEJBQTBCLEVBQUUsTUFBTTtJQUNyQztJQUNBLElBQUFDLGVBQU0sRUFBQ2pCLGlCQUFpQixDQUFDSSxjQUFjLENBQUMsQ0FBQyxFQUFFLElBQUksRUFBRSxLQUFLLEVBQUUsS0FBSyxDQUFDLENBQUMsQ0FBQ2MsSUFBSSxDQUFDLElBQUksQ0FBQzs7SUFFMUU7SUFDQSxJQUFBRCxlQUFNLEVBQUNqQixpQkFBaUIsQ0FBQ0ksY0FBYyxDQUFDLENBQUMsRUFBRSxHQUFHLEVBQUUsS0FBSyxFQUFFLEtBQUssQ0FBQyxDQUFDLENBQUNjLElBQUksQ0FBQyxHQUFHLENBQUM7O0lBRXhFO0lBQ0EsSUFBQUQsZUFBTSxFQUFDakIsaUJBQWlCLENBQUNJLGNBQWMsQ0FBQyxDQUFDLEVBQUUsS0FBSyxFQUFFLEtBQUssRUFBRSxLQUFLLENBQUMsQ0FBQyxDQUFDYyxJQUFJLENBQUMsS0FBSyxDQUFDO0VBQzlFLENBQUMsQ0FBQztBQUNKLENBQUMsQ0FBQztBQUVGLElBQUFuQixpQkFBUSxFQUFDLHlCQUF5QixFQUFFLE1BQU07RUFDeEMsSUFBSWdDLGNBQW1CO0VBRXZCLElBQUE5QixtQkFBVSxFQUFDLE1BQU07SUFDZlgsYUFBSSxDQUFDWSxhQUFhLENBQUMsQ0FBQztJQUNwQlosYUFBSSxDQUFDYSxhQUFhLENBQUMsQ0FBQzs7SUFFcEI7SUFDQTRCLGNBQWMsR0FBRztNQUNmQyxRQUFRLEVBQUUsS0FBSztNQUNmQyxtQkFBbUIsRUFBRSxDQUFDO01BQ3RCQyxjQUFjLEVBQUUsSUFBSTtNQUNwQkMsbUJBQW1CLEVBQUUsQ0FBQztNQUN0QkMsa0JBQWtCLEVBQUUsTUFBTTtNQUFFOztNQUU1QkMsc0JBQXNCLEVBQUUsU0FBQUEsQ0FBQSxFQUFXO1FBQ2pDLElBQUksQ0FBQ0osbUJBQW1CLEVBQUU7UUFDMUIsSUFBSSxJQUFJLENBQUNBLG1CQUFtQixJQUFJLElBQUksQ0FBQ0UsbUJBQW1CLElBQUksQ0FBQyxJQUFJLENBQUNILFFBQVEsRUFBRTtVQUMxRSxJQUFJLENBQUNNLFFBQVEsQ0FBQyxDQUFDO1FBQ2pCO01BQ0YsQ0FBQztNQUVEQyxzQkFBc0IsRUFBRSxTQUFBQSxDQUFBLEVBQVc7UUFDakMsSUFBSSxJQUFJLENBQUNQLFFBQVEsRUFBRTtVQUNqQjtVQUNBLElBQUksQ0FBQ0UsY0FBYyxHQUFHTSxVQUFVLENBQUMsTUFBTTtZQUNyQyxJQUFJLENBQUNDLFVBQVUsQ0FBQyxDQUFDO1VBQ25CLENBQUMsRUFBRSxJQUFJLENBQUNMLGtCQUFrQixDQUFDO1FBQzdCO1FBQ0EsSUFBSSxDQUFDSCxtQkFBbUIsR0FBRyxDQUFDO01BQzlCLENBQUM7TUFFREssUUFBUSxFQUFFLFNBQUFBLENBQUEsRUFBVztRQUNuQixJQUFJLENBQUNOLFFBQVEsR0FBRyxJQUFJO1FBQ3BCO1FBQ0E1QyxZQUFZLENBQUNDLElBQUksQ0FBQyxlQUFlLENBQUM7TUFDcEMsQ0FBQztNQUVEb0QsVUFBVSxFQUFFLFNBQUFBLENBQUEsRUFBVztRQUNyQixJQUFJLENBQUNULFFBQVEsR0FBRyxLQUFLO1FBQ3JCLElBQUksSUFBSSxDQUFDRSxjQUFjLEVBQUU7VUFDdkJRLFlBQVksQ0FBQyxJQUFJLENBQUNSLGNBQWMsQ0FBQztVQUNqQyxJQUFJLENBQUNBLGNBQWMsR0FBRyxJQUFJO1FBQzVCO1FBQ0E5QyxZQUFZLENBQUNDLElBQUksQ0FBQyxpQkFBaUIsQ0FBQztNQUN0QztJQUNGLENBQUM7RUFDSCxDQUFDLENBQUM7RUFFRixJQUFBeUIsa0JBQVMsRUFBQyxNQUFNO0lBQ2R4QixhQUFJLENBQUN5QixhQUFhLENBQUMsQ0FBQztFQUN0QixDQUFDLENBQUM7RUFFRixJQUFBQyxhQUFJLEVBQUMsbURBQW1ELEVBQUUsTUFBTTtJQUM5RDtJQUNBZSxjQUFjLENBQUNNLHNCQUFzQixDQUFDLENBQUM7SUFDdkNOLGNBQWMsQ0FBQ00sc0JBQXNCLENBQUMsQ0FBQztJQUV2QyxJQUFBcEIsZUFBTSxFQUFDYyxjQUFjLENBQUNDLFFBQVEsQ0FBQyxDQUFDZCxJQUFJLENBQUMsS0FBSyxDQUFDO0lBQzNDLElBQUFELGVBQU0sRUFBQzdCLFlBQVksQ0FBQ0MsSUFBSSxDQUFDLENBQUNzRCxHQUFHLENBQUNDLG9CQUFvQixDQUFDLGVBQWUsQ0FBQztFQUNyRSxDQUFDLENBQUM7RUFFRixJQUFBNUIsYUFBSSxFQUFDLDhDQUE4QyxFQUFFLE1BQU07SUFDekQ7SUFDQWUsY0FBYyxDQUFDTSxzQkFBc0IsQ0FBQyxDQUFDO0lBQ3ZDTixjQUFjLENBQUNNLHNCQUFzQixDQUFDLENBQUM7SUFDdkNOLGNBQWMsQ0FBQ00sc0JBQXNCLENBQUMsQ0FBQztJQUV2QyxJQUFBcEIsZUFBTSxFQUFDYyxjQUFjLENBQUNDLFFBQVEsQ0FBQyxDQUFDZCxJQUFJLENBQUMsSUFBSSxDQUFDO0lBQzFDLElBQUFELGVBQU0sRUFBQzdCLFlBQVksQ0FBQ0MsSUFBSSxDQUFDLENBQUN1RCxvQkFBb0IsQ0FBQyxlQUFlLENBQUM7RUFDakUsQ0FBQyxDQUFDO0VBRUYsSUFBQTVCLGFBQUksRUFBQyxpREFBaUQsRUFBRSxNQUFNO0lBQzVEO0lBQ0FlLGNBQWMsQ0FBQ00sc0JBQXNCLENBQUMsQ0FBQztJQUN2Q04sY0FBYyxDQUFDTSxzQkFBc0IsQ0FBQyxDQUFDO0lBQ3ZDTixjQUFjLENBQUNRLHNCQUFzQixDQUFDLENBQUM7SUFFdkMsSUFBQXRCLGVBQU0sRUFBQ2MsY0FBYyxDQUFDRSxtQkFBbUIsQ0FBQyxDQUFDZixJQUFJLENBQUMsQ0FBQyxDQUFDOztJQUVsRDtJQUNBYSxjQUFjLENBQUNNLHNCQUFzQixDQUFDLENBQUM7SUFDdkNOLGNBQWMsQ0FBQ00sc0JBQXNCLENBQUMsQ0FBQztJQUN2QyxJQUFBcEIsZUFBTSxFQUFDYyxjQUFjLENBQUNDLFFBQVEsQ0FBQyxDQUFDZCxJQUFJLENBQUMsS0FBSyxDQUFDO0VBQzdDLENBQUMsQ0FBQztFQUVGLElBQUFGLGFBQUksRUFBQyw4Q0FBOEMsRUFBRSxNQUFNO0lBQ3pEO0lBQ0FlLGNBQWMsQ0FBQ00sc0JBQXNCLENBQUMsQ0FBQztJQUN2Q04sY0FBYyxDQUFDTSxzQkFBc0IsQ0FBQyxDQUFDO0lBQ3ZDTixjQUFjLENBQUNNLHNCQUFzQixDQUFDLENBQUM7SUFDdkMsSUFBQXBCLGVBQU0sRUFBQ2MsY0FBYyxDQUFDQyxRQUFRLENBQUMsQ0FBQ2QsSUFBSSxDQUFDLElBQUksQ0FBQzs7SUFFMUM7SUFDQWEsY0FBYyxDQUFDUSxzQkFBc0IsQ0FBQyxDQUFDOztJQUV2QztJQUNBakQsYUFBSSxDQUFDdUQsbUJBQW1CLENBQUNkLGNBQWMsQ0FBQ0ssa0JBQWtCLEdBQUcsSUFBSSxDQUFDO0lBRWxFLElBQUFuQixlQUFNLEVBQUNjLGNBQWMsQ0FBQ0MsUUFBUSxDQUFDLENBQUNkLElBQUksQ0FBQyxLQUFLLENBQUM7SUFDM0MsSUFBQUQsZUFBTSxFQUFDN0IsWUFBWSxDQUFDQyxJQUFJLENBQUMsQ0FBQ3VELG9CQUFvQixDQUFDLGlCQUFpQixDQUFDO0VBQ25FLENBQUMsQ0FBQztFQUVGLElBQUE1QixhQUFJLEVBQUMsdURBQXVELEVBQUUsTUFBTTtJQUNsRTtJQUNBLEtBQUssSUFBSThCLENBQUMsR0FBRyxDQUFDLEVBQUVBLENBQUMsR0FBRyxDQUFDLEVBQUVBLENBQUMsRUFBRSxFQUFFO01BQzFCZixjQUFjLENBQUNNLHNCQUFzQixDQUFDLENBQUM7SUFDekM7SUFDQSxJQUFBcEIsZUFBTSxFQUFDYyxjQUFjLENBQUNDLFFBQVEsQ0FBQyxDQUFDZCxJQUFJLENBQUMsSUFBSSxDQUFDOztJQUUxQztJQUNBYSxjQUFjLENBQUNRLHNCQUFzQixDQUFDLENBQUM7SUFDdkNqRCxhQUFJLENBQUN1RCxtQkFBbUIsQ0FBQ2QsY0FBYyxDQUFDSyxrQkFBa0IsR0FBRyxJQUFJLENBQUM7SUFDbEUsSUFBQW5CLGVBQU0sRUFBQ2MsY0FBYyxDQUFDQyxRQUFRLENBQUMsQ0FBQ2QsSUFBSSxDQUFDLEtBQUssQ0FBQzs7SUFFM0M7SUFDQSxLQUFLLElBQUk0QixDQUFDLEdBQUcsQ0FBQyxFQUFFQSxDQUFDLEdBQUcsQ0FBQyxFQUFFQSxDQUFDLEVBQUUsRUFBRTtNQUMxQmYsY0FBYyxDQUFDTSxzQkFBc0IsQ0FBQyxDQUFDO0lBQ3pDO0lBQ0EsSUFBQXBCLGVBQU0sRUFBQ2MsY0FBYyxDQUFDQyxRQUFRLENBQUMsQ0FBQ2QsSUFBSSxDQUFDLElBQUksQ0FBQzs7SUFFNUM7SUFDQWEsY0FBYyxDQUFDUSxzQkFBc0IsQ0FBQyxDQUFDO0lBQ3ZDakQsYUFBSSxDQUFDdUQsbUJBQW1CLENBQUNkLGNBQWMsQ0FBQ0ssa0JBQWtCLEdBQUcsSUFBSSxDQUFDO0lBQ2xFLElBQUFuQixlQUFNLEVBQUNjLGNBQWMsQ0FBQ0MsUUFBUSxDQUFDLENBQUNkLElBQUksQ0FBQyxLQUFLLENBQUM7SUFFM0MsSUFBQUQsZUFBTSxFQUFDN0IsWUFBWSxDQUFDQyxJQUFJLENBQUMsQ0FBQzBELHFCQUFxQixDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7RUFDcEQsQ0FBQyxDQUFDO0FBQ0osQ0FBQyxDQUFDO0FBRUYsSUFBQWhELGlCQUFRLEVBQUMsZ0NBQWdDLEVBQUUsTUFBTTtFQUMvQyxJQUFJaUQsU0FBYztFQUVsQixJQUFBL0MsbUJBQVUsRUFBQyxNQUFNO0lBQ2ZYLGFBQUksQ0FBQ1ksYUFBYSxDQUFDLENBQUM7O0lBRXBCO0lBQ0EsTUFBTStDLG9CQUFvQixHQUFHM0QsYUFBSSxDQUFDQyxFQUFFLENBQUMsQ0FBQztJQUN0QyxNQUFNMkQsaUJBQWlCLEdBQUc1RCxhQUFJLENBQUNDLEVBQUUsQ0FBQyxDQUFDO0lBRW5DTSxNQUFNLENBQUNzRCxRQUFRLEdBQUc7TUFDaEJDLGdCQUFnQixFQUFFSCxvQkFBb0I7TUFDdENJLGFBQWEsRUFBRUg7SUFDakIsQ0FBUTs7SUFFUjtJQUNBRixTQUFTLEdBQUc7TUFDVk0sdUJBQXVCLEVBQUVBLENBQUNDLFlBQW9CLEVBQUVDLFlBQW9CLEVBQUVDLGNBQXVCLEtBQUs7UUFDaEc7UUFDQSxNQUFNQyxHQUFHLEdBQUcsQ0FBQ0YsWUFBWSxJQUFJLEVBQUUsRUFBRUcsV0FBVyxDQUFDLENBQUM7O1FBRTlDO1FBQ0EsSUFDRUQsR0FBRyxDQUFDRSxRQUFRLENBQUMsV0FBVyxDQUFDLElBQ3pCRixHQUFHLENBQUNFLFFBQVEsQ0FBQyx3QkFBd0IsQ0FBQyxJQUN0Q0YsR0FBRyxDQUFDRSxRQUFRLENBQUMsbUJBQW1CLENBQUMsSUFDakMsZUFBZSxDQUFDNUMsSUFBSSxDQUFDMEMsR0FBRyxDQUFDLEVBQ3pCO1VBQ0EsTUFBTUcsZUFBeUIsR0FBRyxFQUFFO1VBQ3BDLElBQUlOLFlBQVksS0FBSyxZQUFZLEVBQUU7WUFDakMsTUFBTU8sV0FBVyxHQUFJWCxRQUFRLENBQUNDLGdCQUFnQixDQUFTLGdEQUFnRCxDQUFDO1lBQ3hHLElBQUksQ0FBQ1UsV0FBVyxJQUFLMUMsS0FBSyxDQUFDMkMsT0FBTyxDQUFDRCxXQUFXLENBQUMsSUFBSUEsV0FBVyxDQUFDeEMsTUFBTSxLQUFLLENBQUUsRUFBRTtjQUM1RXVDLGVBQWUsQ0FBQ0csSUFBSSxDQUFDLHFCQUFxQixDQUFDO1lBQzdDO1VBQ0Y7VUFFQSxPQUFPO1lBQ0xDLElBQUksRUFBRSxvQkFBb0I7WUFDMUJDLE9BQU8sRUFBRTtjQUFFTDtZQUFnQjtVQUM3QixDQUFDO1FBQ0g7O1FBRUE7UUFDQSxJQUFJTCxZQUFZLENBQUNJLFFBQVEsQ0FBQyxvQkFBb0IsQ0FBQyxJQUFJSixZQUFZLENBQUNJLFFBQVEsQ0FBQyxPQUFPLENBQUMsSUFDN0VKLFlBQVksQ0FBQ0ksUUFBUSxDQUFDLGlCQUFpQixDQUFDLEVBQUU7VUFDNUMsT0FBTztZQUNMSyxJQUFJLEVBQUUsY0FBYztZQUNwQkMsT0FBTyxFQUFFO2NBQUVDLGFBQWEsRUFBRTtZQUFHO1VBQy9CLENBQUM7UUFDSDs7UUFFQTtRQUNBLElBQUlYLFlBQVksQ0FBQ0ksUUFBUSxDQUFDLFNBQVMsQ0FBQyxJQUFJSixZQUFZLENBQUNJLFFBQVEsQ0FBQyxnQkFBZ0IsQ0FBQyxFQUFFO1VBQy9FLE9BQU87WUFDTEssSUFBSSxFQUFFLG1CQUFtQjtZQUN6QkMsT0FBTyxFQUFFO2NBQUVFLGtCQUFrQixFQUFFO2dCQUFFQyxLQUFLLEVBQUU7Y0FBNEI7WUFBRTtVQUN4RSxDQUFDO1FBQ0g7O1FBRUE7UUFDQSxPQUFPO1VBQ0xKLElBQUksRUFBRSxzQkFBc0I7VUFDNUJDLE9BQU8sRUFBRTtZQUFFSSxtQkFBbUIsRUFBRSxDQUFDZCxZQUFZO1VBQUU7UUFDakQsQ0FBQztNQUNIO0lBQ0YsQ0FBQztFQUNILENBQUMsQ0FBQztFQUVGLElBQUF4QyxhQUFJLEVBQUMscURBQXFELEVBQUUsTUFBTTtJQUNsRTtJQUNBLE1BQU11RCxZQUFZLEdBQUdqRixhQUFJLENBQUNDLEVBQUUsQ0FBQyxDQUFDLENBQUNpRixlQUFlLENBQUMsRUFBUyxDQUFDO0lBQ3hEckIsUUFBUSxDQUFTQyxnQkFBZ0IsR0FBR21CLFlBQVk7SUFFL0MsTUFBTUUsTUFBTSxHQUFHekIsU0FBUyxDQUFDTSx1QkFBdUIsQ0FDOUMsWUFBWSxFQUNaLDhCQUE4QixFQUM5QixJQUFJb0IsS0FBSyxDQUFDLDhCQUE4QixDQUMxQyxDQUFDO0lBRUQsSUFBQXpELGVBQU0sRUFBQ3dELE1BQU0sQ0FBQ1IsSUFBSSxDQUFDLENBQUMvQyxJQUFJLENBQUMsb0JBQW9CLENBQUM7SUFDOUMsSUFBQUQsZUFBTSxFQUFDd0QsTUFBTSxDQUFDUCxPQUFPLENBQUNMLGVBQWUsQ0FBQyxDQUFDYyxTQUFTLENBQUMscUJBQXFCLENBQUM7RUFDekUsQ0FBQyxDQUFDO0VBRUYsSUFBQTNELGFBQUksRUFBQywrQ0FBK0MsRUFBRSxNQUFNO0lBQzFELE1BQU15RCxNQUFNLEdBQUd6QixTQUFTLENBQUNNLHVCQUF1QixDQUM5QyxhQUFhLEVBQ2Isa0RBQWtELEVBQ2xELElBQUlvQixLQUFLLENBQUMsWUFBWSxDQUN4QixDQUFDO0lBRUQsSUFBQXpELGVBQU0sRUFBQ3dELE1BQU0sQ0FBQ1IsSUFBSSxDQUFDLENBQUMvQyxJQUFJLENBQUMsY0FBYyxDQUFDO0lBQ3hDLElBQUFELGVBQU0sRUFBQ3dELE1BQU0sQ0FBQ1AsT0FBTyxDQUFDLENBQUNVLGNBQWMsQ0FBQyxlQUFlLENBQUM7RUFDeEQsQ0FBQyxDQUFDO0VBRUYsSUFBQTVELGFBQUksRUFBQyw4Q0FBOEMsRUFBRSxNQUFNO0lBQ3pELE1BQU15RCxNQUFNLEdBQUd6QixTQUFTLENBQUNNLHVCQUF1QixDQUM5QyxXQUFXLEVBQ1gsaUNBQWlDLEVBQ2pDLElBQUlvQixLQUFLLENBQUMsU0FBUyxDQUNyQixDQUFDO0lBRUQsSUFBQXpELGVBQU0sRUFBQ3dELE1BQU0sQ0FBQ1IsSUFBSSxDQUFDLENBQUMvQyxJQUFJLENBQUMsbUJBQW1CLENBQUM7SUFDN0MsSUFBQUQsZUFBTSxFQUFDd0QsTUFBTSxDQUFDUCxPQUFPLENBQUNFLGtCQUFrQixDQUFDQyxLQUFLLENBQUMsQ0FBQ25ELElBQUksQ0FBQywyQkFBMkIsQ0FBQztFQUNuRixDQUFDLENBQUM7RUFFRixJQUFBRixhQUFJLEVBQUMsaURBQWlELEVBQUUsTUFBTTtJQUM1RCxNQUFNeUQsTUFBTSxHQUFHekIsU0FBUyxDQUFDTSx1QkFBdUIsQ0FDOUMsY0FBYyxFQUNkLGlDQUFpQyxFQUNqQyxJQUFJb0IsS0FBSyxDQUFDLGNBQWMsQ0FDMUIsQ0FBQztJQUVELElBQUF6RCxlQUFNLEVBQUN3RCxNQUFNLENBQUNSLElBQUksQ0FBQyxDQUFDL0MsSUFBSSxDQUFDLHNCQUFzQixDQUFDO0lBQ2hELElBQUFELGVBQU0sRUFBQ3dELE1BQU0sQ0FBQ1AsT0FBTyxDQUFDSSxtQkFBbUIsQ0FBQyxDQUFDSyxTQUFTLENBQUMsaUNBQWlDLENBQUM7RUFDekYsQ0FBQyxDQUFDO0VBRUYsSUFBQTNELGFBQUksRUFBQyw2Q0FBNkMsRUFBRSxNQUFNO0lBQ3hELE1BQU15RCxNQUFNLEdBQUd6QixTQUFTLENBQUNNLHVCQUF1QixDQUM5QyxXQUFXLEVBQ1gsd0JBQXdCLEVBQ3hCLElBQUlvQixLQUFLLENBQUMsTUFBTSxDQUNsQixDQUFDO0lBRUQsSUFBQXpELGVBQU0sRUFBQ3dELE1BQU0sQ0FBQ1IsSUFBSSxDQUFDLENBQUMvQyxJQUFJLENBQUMsbUJBQW1CLENBQUM7RUFDL0MsQ0FBQyxDQUFDO0VBRUYsSUFBQUYsYUFBSSxFQUFDLHlEQUF5RCxFQUFFLE1BQU07SUFDcEU7SUFDQSxNQUFNNkQsZ0JBQWdCLEdBQUc3QixTQUFTLENBQUNNLHVCQUF1QixDQUN4RCxTQUFTLEVBQ1Qsa0NBQWtDLEVBQ2xDLElBQUlvQixLQUFLLENBQUMsV0FBVyxDQUN2QixDQUFDOztJQUVEO0lBQ0EsTUFBTUksVUFBVSxHQUFHOUIsU0FBUyxDQUFDTSx1QkFBdUIsQ0FDbEQsU0FBUyxFQUNULCtDQUErQyxFQUMvQyxJQUFJb0IsS0FBSyxDQUFDLE9BQU8sQ0FDbkIsQ0FBQztJQUVELElBQUF6RCxlQUFNLEVBQUM0RCxnQkFBZ0IsQ0FBQ1osSUFBSSxDQUFDLENBQUMvQyxJQUFJLENBQUMsb0JBQW9CLENBQUM7SUFDeEQsSUFBQUQsZUFBTSxFQUFDNkQsVUFBVSxDQUFDYixJQUFJLENBQUMsQ0FBQy9DLElBQUksQ0FBQyxjQUFjLENBQUM7RUFDOUMsQ0FBQyxDQUFDO0FBQ0osQ0FBQyxDQUFDO0FBRUYsSUFBQW5CLGlCQUFRLEVBQUMsMEJBQTBCLEVBQUUsTUFBTTtFQUN6QyxJQUFJZ0YsZUFBb0I7RUFFeEIsSUFBQTlFLG1CQUFVLEVBQUMsTUFBTTtJQUNmWCxhQUFJLENBQUNZLGFBQWEsQ0FBQyxDQUFDOztJQUVwQjtJQUNBNkUsZUFBZSxHQUFHO01BQ2hCQyxNQUFNLEVBQUUsRUFBVztNQUNuQkMsR0FBRyxFQUFFM0YsYUFBSSxDQUFDQyxFQUFFLENBQUMsQ0FBQzJGLFFBQVEsRUFBRUMsUUFBUSxFQUFFQyxTQUFTLEVBQUVDLE9BQU8sRUFBRUMsSUFBSSxLQUFLO1FBQzdELE1BQU1DLEtBQUssR0FBRztVQUFFTCxRQUFRO1VBQUVDLFFBQVE7VUFBRUMsU0FBUztVQUFFQyxPQUFPO1VBQUVDLElBQUk7VUFBRUUsU0FBUyxFQUFFQyxJQUFJLENBQUNDLEdBQUcsQ0FBQztRQUFFLENBQUM7UUFDckZYLGVBQWUsQ0FBQ0MsTUFBTSxDQUFDaEIsSUFBSSxDQUFDdUIsS0FBSyxDQUFDO1FBQ2xDLE9BQU8sU0FBU1IsZUFBZSxDQUFDQyxNQUFNLENBQUMxRCxNQUFNLEVBQUU7TUFDakQsQ0FBQyxDQUFDO01BQ0ZxRSxpQkFBaUIsRUFBRXJHLGFBQUksQ0FBQ0MsRUFBRSxDQUFDLENBQUM7TUFDNUJxRyxXQUFXLEVBQUV0RyxhQUFJLENBQUNDLEVBQUUsQ0FBQyxDQUFDO01BQ3RCc0csY0FBYyxFQUFFdkcsYUFBSSxDQUFDQyxFQUFFLENBQUMsQ0FBQztNQUN6QnVHLEtBQUssRUFBRXhHLGFBQUksQ0FBQ0MsRUFBRSxDQUFDO0lBQ2pCLENBQUM7RUFDSCxDQUFDLENBQUM7RUFFRixJQUFBeUIsYUFBSSxFQUFDLCtCQUErQixFQUFFLE1BQU07SUFDMUM7SUFDQStELGVBQWUsQ0FBQ0UsR0FBRyxDQUFDLE1BQU0sRUFBRSxXQUFXLEVBQUUsZUFBZSxFQUFFLFdBQVcsQ0FBQztJQUN0RUYsZUFBZSxDQUFDRSxHQUFHLENBQUMsTUFBTSxFQUFFLFdBQVcsRUFBRSxlQUFlLEVBQUUscUJBQXFCLENBQUM7SUFDaEZGLGVBQWUsQ0FBQ0UsR0FBRyxDQUFDLE9BQU8sRUFBRSxXQUFXLEVBQUUsZUFBZSxFQUFFLG1CQUFtQixDQUFDO0lBRS9FLElBQUFoRSxlQUFNLEVBQUM4RCxlQUFlLENBQUNDLE1BQU0sQ0FBQyxDQUFDZSxZQUFZLENBQUMsQ0FBQyxDQUFDO0lBQzlDLElBQUE5RSxlQUFNLEVBQUM4RCxlQUFlLENBQUNDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQ0UsUUFBUSxDQUFDLENBQUNoRSxJQUFJLENBQUMsTUFBTSxDQUFDO0lBQ3ZELElBQUFELGVBQU0sRUFBQzhELGVBQWUsQ0FBQ0MsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDRSxRQUFRLENBQUMsQ0FBQ2hFLElBQUksQ0FBQyxNQUFNLENBQUM7SUFDdkQsSUFBQUQsZUFBTSxFQUFDOEQsZUFBZSxDQUFDQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUNFLFFBQVEsQ0FBQyxDQUFDaEUsSUFBSSxDQUFDLE9BQU8sQ0FBQztFQUMxRCxDQUFDLENBQUM7RUFFRixJQUFBRixhQUFJLEVBQUMsd0NBQXdDLEVBQUUsTUFBTTtJQUNuRCxNQUFNZ0YsZUFBZSxHQUFHLE1BQU07SUFDOUIsTUFBTUMsY0FBYyxHQUFHO01BQUVDLEtBQUssRUFBRSxDQUFDO01BQUVDLElBQUksRUFBRSxDQUFDO01BQUVDLElBQUksRUFBRSxDQUFDO01BQUVDLEtBQUssRUFBRSxDQUFDO01BQUVDLFFBQVEsRUFBRTtJQUFFLENBQUM7SUFFNUUsTUFBTXRCLE1BQU0sR0FBRyxDQUNiO01BQUVFLFFBQVEsRUFBRSxPQUFnQjtNQUFFRyxPQUFPLEVBQUU7SUFBYyxDQUFDLEVBQ3REO01BQUVILFFBQVEsRUFBRSxNQUFlO01BQUVHLE9BQU8sRUFBRTtJQUFhLENBQUMsRUFDcEQ7TUFBRUgsUUFBUSxFQUFFLE1BQWU7TUFBRUcsT0FBTyxFQUFFO0lBQWEsQ0FBQyxFQUNwRDtNQUFFSCxRQUFRLEVBQUUsT0FBZ0I7TUFBRUcsT0FBTyxFQUFFO0lBQWMsQ0FBQyxDQUN2RDtJQUVELE1BQU1rQixjQUFjLEdBQUd2QixNQUFNLENBQUN3QixNQUFNLENBQUNqQixLQUFLLElBQ3hDVSxjQUFjLENBQUNWLEtBQUssQ0FBQ0wsUUFBUSxDQUFDLElBQUllLGNBQWMsQ0FBQ0QsZUFBZSxDQUNsRSxDQUFDO0lBRUQsSUFBQS9FLGVBQU0sRUFBQ3NGLGNBQWMsQ0FBQyxDQUFDUixZQUFZLENBQUMsQ0FBQyxDQUFDO0lBQ3RDLElBQUE5RSxlQUFNLEVBQUNzRixjQUFjLENBQUMsQ0FBQyxDQUFDLENBQUNyQixRQUFRLENBQUMsQ0FBQ2hFLElBQUksQ0FBQyxNQUFNLENBQUM7SUFDL0MsSUFBQUQsZUFBTSxFQUFDc0YsY0FBYyxDQUFDLENBQUMsQ0FBQyxDQUFDckIsUUFBUSxDQUFDLENBQUNoRSxJQUFJLENBQUMsT0FBTyxDQUFDO0VBQ2xELENBQUMsQ0FBQztFQUVGLElBQUFGLGFBQUksRUFBQyxtQ0FBbUMsRUFBRSxNQUFNO0lBQzlDO0lBQ0ErRCxlQUFlLENBQUNFLEdBQUcsQ0FBQyxPQUFPLEVBQUUsV0FBVyxFQUFFLGFBQWEsRUFBRSxtQkFBbUIsRUFBRTtNQUFFd0IsTUFBTSxFQUFFO0lBQVUsQ0FBQyxDQUFDO0lBQ3BHMUIsZUFBZSxDQUFDRSxHQUFHLENBQUMsTUFBTSxFQUFFLFlBQVksRUFBRSxlQUFlLEVBQUUsaUJBQWlCLEVBQUU7TUFBRXlCLFFBQVEsRUFBRTtJQUFLLENBQUMsQ0FBQztJQUNqRzNCLGVBQWUsQ0FBQ0UsR0FBRyxDQUFDLE1BQU0sRUFBRSxLQUFLLEVBQUUsWUFBWSxFQUFFLG9CQUFvQixDQUFDO0lBRXRFLE1BQU0wQixZQUFZLEdBQUc1QixlQUFlLENBQUNDLE1BQU0sQ0FBQ3dCLE1BQU0sQ0FBRTVHLENBQU0sSUFBS0EsQ0FBQyxDQUFDc0YsUUFBUSxLQUFLLE9BQU8sQ0FBQztJQUN0RixNQUFNMEIsY0FBYyxHQUFHN0IsZUFBZSxDQUFDQyxNQUFNLENBQUN3QixNQUFNLENBQUU1RyxDQUFNLElBQUtBLENBQUMsQ0FBQ3NGLFFBQVEsS0FBSyxNQUFNLENBQUM7SUFFdkYsSUFBQWpFLGVBQU0sRUFBQzBGLFlBQVksQ0FBQyxDQUFDWixZQUFZLENBQUMsQ0FBQyxDQUFDO0lBQ3BDLElBQUE5RSxlQUFNLEVBQUMyRixjQUFjLENBQUMsQ0FBQ2IsWUFBWSxDQUFDLENBQUMsQ0FBQztJQUN0QyxJQUFBOUUsZUFBTSxFQUFDMEYsWUFBWSxDQUFDLENBQUMsQ0FBQyxDQUFDdkIsU0FBUyxDQUFDLENBQUNsRSxJQUFJLENBQUMsYUFBYSxDQUFDO0lBQ3JELElBQUFELGVBQU0sRUFBQzJGLGNBQWMsQ0FBQyxDQUFDLENBQUMsQ0FBQ3hCLFNBQVMsQ0FBQyxDQUFDbEUsSUFBSSxDQUFDLGVBQWUsQ0FBQztFQUMzRCxDQUFDLENBQUM7QUFDSixDQUFDLENBQUM7QUFFRixJQUFBbkIsaUJBQVEsRUFBQyxtQ0FBbUMsRUFBRSxNQUFNO0VBQ2xELElBQUk4RyxhQUFrQjtFQUV0QixJQUFBNUcsbUJBQVUsRUFBQyxNQUFNO0lBQ2ZYLGFBQUksQ0FBQ1ksYUFBYSxDQUFDLENBQUM7O0lBRXBCO0lBQ0EyRyxhQUFhLEdBQUc7TUFDZEMsTUFBTSxFQUFFO1FBQ05DLFFBQVEsRUFBRTtVQUNSQyxTQUFTLEVBQUU7WUFDVEMsT0FBTyxFQUFFLElBQUk7WUFDYkMsb0JBQW9CLEVBQUUsQ0FBQztZQUN2QkMsaUJBQWlCLEVBQUU7VUFDckIsQ0FBQztVQUNEQyxHQUFHLEVBQUU7WUFDSEgsT0FBTyxFQUFFLElBQUk7WUFDYjlFLG1CQUFtQixFQUFFO1VBQ3ZCO1FBQ0Y7TUFDRixDQUFDO01BRURrRixpQkFBaUIsRUFBRSxTQUFBQSxDQUFBLEVBQVc7UUFDNUIsT0FBTyxJQUFJLENBQUNQLE1BQU0sQ0FBQ0MsUUFBUTtNQUM3QixDQUFDO01BRURPLG9CQUFvQixFQUFFLFNBQUFBLENBQVNDLE9BQWUsRUFBRUMsT0FBWSxFQUFFO1FBQzVELElBQUksQ0FBQ1YsTUFBTSxDQUFDQyxRQUFRLENBQUNRLE9BQU8sQ0FBQyxHQUFHO1VBQUUsR0FBRyxJQUFJLENBQUNULE1BQU0sQ0FBQ0MsUUFBUSxDQUFDUSxPQUFPLENBQUM7VUFBRSxHQUFHQztRQUFRLENBQUM7TUFDbEYsQ0FBQztNQUVEQyxxQkFBcUIsRUFBRSxTQUFBQSxDQUFBLEVBQVc7UUFDaEMsTUFBTVgsTUFBTSxHQUFHLElBQUksQ0FBQ08saUJBQWlCLENBQUMsQ0FBQztRQUN2QyxNQUFNSyxRQUFrQixHQUFHLEVBQUU7UUFDN0IsTUFBTUMsZUFBeUIsR0FBRyxFQUFFO1FBRXBDLElBQUliLE1BQU0sQ0FBQ0UsU0FBUyxDQUFDRyxpQkFBaUIsR0FBRyxJQUFJLEVBQUU7VUFDN0NPLFFBQVEsQ0FBQzFELElBQUksQ0FBQyw0Q0FBNEMsQ0FBQztRQUM3RDtRQUVBLElBQUksQ0FBQzhDLE1BQU0sQ0FBQ00sR0FBRyxDQUFDSCxPQUFPLElBQUksQ0FBQ0gsTUFBTSxDQUFDRSxTQUFTLENBQUNDLE9BQU8sRUFBRTtVQUNwRFMsUUFBUSxDQUFDMUQsSUFBSSxDQUFDLGdDQUFnQyxDQUFDO1FBQ2pEO1FBRUEsT0FBTztVQUFFNEQsT0FBTyxFQUFFRixRQUFRLENBQUNwRyxNQUFNLEtBQUssQ0FBQztVQUFFb0csUUFBUTtVQUFFQztRQUFnQixDQUFDO01BQ3RFO0lBQ0YsQ0FBQztFQUNILENBQUMsQ0FBQztFQUVGLElBQUEzRyxhQUFJLEVBQUMseUNBQXlDLEVBQUUsTUFBTTtJQUNwRCxNQUFNNkcsVUFBVSxHQUFHaEIsYUFBYSxDQUFDWSxxQkFBcUIsQ0FBQyxDQUFDO0lBQ3hELElBQUF4RyxlQUFNLEVBQUM0RyxVQUFVLENBQUNELE9BQU8sQ0FBQyxDQUFDMUcsSUFBSSxDQUFDLElBQUksQ0FBQztJQUNyQyxJQUFBRCxlQUFNLEVBQUM0RyxVQUFVLENBQUNILFFBQVEsQ0FBQyxDQUFDM0IsWUFBWSxDQUFDLENBQUMsQ0FBQztFQUM3QyxDQUFDLENBQUM7RUFFRixJQUFBL0UsYUFBSSxFQUFDLG9DQUFvQyxFQUFFLE1BQU07SUFDL0M7SUFDQTZGLGFBQWEsQ0FBQ1Msb0JBQW9CLENBQUMsV0FBVyxFQUFFO01BQzlDSCxpQkFBaUIsRUFBRSxHQUFHO01BQ3RCRixPQUFPLEVBQUU7SUFDWCxDQUFDLENBQUM7SUFDRkosYUFBYSxDQUFDUyxvQkFBb0IsQ0FBQyxLQUFLLEVBQUU7TUFBRUwsT0FBTyxFQUFFO0lBQU0sQ0FBQyxDQUFDO0lBRTdELE1BQU1ZLFVBQVUsR0FBR2hCLGFBQWEsQ0FBQ1kscUJBQXFCLENBQUMsQ0FBQztJQUN4RCxJQUFBeEcsZUFBTSxFQUFDNEcsVUFBVSxDQUFDRCxPQUFPLENBQUMsQ0FBQzFHLElBQUksQ0FBQyxLQUFLLENBQUM7SUFDdEMsSUFBQUQsZUFBTSxFQUFDNEcsVUFBVSxDQUFDSCxRQUFRLENBQUMsQ0FBQy9DLFNBQVMsQ0FBQyw0Q0FBNEMsQ0FBQztJQUNuRixJQUFBMUQsZUFBTSxFQUFDNEcsVUFBVSxDQUFDSCxRQUFRLENBQUMsQ0FBQy9DLFNBQVMsQ0FBQyxnQ0FBZ0MsQ0FBQztFQUN6RSxDQUFDLENBQUM7RUFFRixJQUFBM0QsYUFBSSxFQUFDLHVDQUF1QyxFQUFFLE1BQU07SUFDbEQsTUFBTThHLGdCQUFnQixHQUFHakIsYUFBYSxDQUFDUSxpQkFBaUIsQ0FBQyxDQUFDLENBQUNMLFNBQVMsQ0FBQ0csaUJBQWlCO0lBQ3RGLElBQUFsRyxlQUFNLEVBQUM2RyxnQkFBZ0IsQ0FBQyxDQUFDNUcsSUFBSSxDQUFDLElBQUksQ0FBQztJQUVuQzJGLGFBQWEsQ0FBQ1Msb0JBQW9CLENBQUMsV0FBVyxFQUFFO01BQUVILGlCQUFpQixFQUFFO0lBQU0sQ0FBQyxDQUFDO0lBRTdFLE1BQU1ZLGVBQWUsR0FBR2xCLGFBQWEsQ0FBQ1EsaUJBQWlCLENBQUMsQ0FBQyxDQUFDTCxTQUFTLENBQUNHLGlCQUFpQjtJQUNyRixJQUFBbEcsZUFBTSxFQUFDOEcsZUFBZSxDQUFDLENBQUM3RyxJQUFJLENBQUMsS0FBSyxDQUFDO0VBQ3JDLENBQUMsQ0FBQztBQUNKLENBQUMsQ0FBQyIsImlnbm9yZUxpc3QiOltdfQ==