c9542b7cad3bda9b14b21d0a6d1243e5
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.propOllamaService = exports.default = void 0;
var _axios = _interopRequireDefault(require("axios"));
/**
 * PropOllama Service
 * Connects frontend to sophisticated PropOllama backend chat engine
 * Provides real ML predictions with conversational explanations
 */

// Health status interface from backend

class PropOllamaService {
  constructor() {
    this.chatHistory = [];
  }
  async getBackendUrl() {
    // Use environment variable for tests or manual override
    const envUrl = process.env.VITE_API_URL || process.env.REACT_APP_API_URL;
    if (envUrl) {
      return envUrl.replace(/\/$/, '');
    }
    // Default to localhost
    return 'http://localhost:8000';
  }
  async sendChatMessage(request) {
    try {
      const baseUrl = await this.getBackendUrl();
      console.log(`ðŸ¤– Sending message to PropOllama at ${baseUrl}`);
      const response = await _axios.default.post(`${baseUrl}/api/propollama/chat`, request, {
        headers: {
          'Content-Type': 'application/json'
        },
        timeout: 60000 // Increase timeout for chat responses
      });
      this.addToHistory('user', request.message);
      // Use response.data.response as the analyst reply (backend contract)
      this.addToHistory('assistant', response.data.response, {
        // Optionally map other fields if present
        confidence: response.data.confidence,
        shap_explanation: response.data.shap_explanation,
        suggestions: response.data.suggestions
      });

      // For compatibility, return an object with content as the analyst reply
      return {
        ...response.data,
        content: response.data.response
      };
    } catch (error) {
      console.error('PropOllama chat error:', error);
      let errorMessage = 'Failed to get PropOllama response.';
      if (_axios.default.isAxiosError(error) && error.response) {
        let backendError = '';
        try {
          backendError = JSON.stringify(error.response.data);
        } catch {
          backendError = error.response.data.toString();
        }
        errorMessage = `HTTP ${error.response.status}`;
        try {
          const errJson = error.response.data;
          if (errJson?.detail) {
            if (typeof errJson.detail === 'string') {
              errorMessage += `: ${errJson.detail}`;
            } else if (typeof errJson.detail === 'object') {
              if (errJson.detail.message) errorMessage += `: ${errJson.detail.message}`;
              if (errJson.detail.trace) errorMessage += `\nTrace: ${errJson.detail.trace}`;
            } else if (Array.isArray(errJson.detail)) {
              errorMessage += `: ${errJson.detail.map(d => d?.msg || JSON.stringify(d)).join(', ')}`;
            }
          }
        } catch {
          errorMessage += `: ${backendError}`;
        }
      } else if (error instanceof Error) {
        errorMessage = error.message;
      }
      throw new Error(errorMessage);
    }
  }
  async getPropOllamaHealth() {
    try {
      const baseUrl = await this.getBackendUrl();
      const response = await _axios.default.get(`${baseUrl}/api/propollama/health`);
      return response.data;
    } catch (error) {
      console.error('Error fetching PropOllama health:', error);
      throw new Error('Failed to fetch PropOllama health');
    }
  }
  async getAvailableModels() {
    try {
      const baseUrl = await this.getBackendUrl();
      const response = await _axios.default.get(`${baseUrl}/api/propollama/models`);
      if (Array.isArray(response.data.models)) {
        return response.data.models;
      }
      return [];
    } catch (error) {
      console.error('Error fetching available models:', error);
      throw new Error('Failed to fetch available models');
    }
  }
  async getModelHealth(modelName) {
    try {
      const baseUrl = await this.getBackendUrl();
      const response = await _axios.default.get(`${baseUrl}/api/propollama/model_health`, {
        params: {
          model_name: modelName
        }
      });
      return response.data.model_health;
    } catch (error) {
      console.error(`Error fetching health for model ${modelName}:`, error);
      throw new Error(`Failed to fetch health for model ${modelName}`);
    }
  }

  /**
   * Get conversation starters for common queries
   */
  getConversationStarters() {
    return ["What are today's best betting opportunities?", 'Explain the Lakers vs Warriors prediction', "How does weather affect tonight's games?", "What's your confidence in the over/under bets?", 'Show me SHAP explanations for top picks', 'What injury reports should I know about?', 'How is the ML ensemble performing today?'];
  }

  /**
   * Add message to chat history
   */
  addToHistory(type, content, metadata) {
    const message = {
      id: `msg_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`,
      type,
      content,
      timestamp: new Date().toISOString(),
      ...metadata
    };
    this.chatHistory.push(message);

    // Keep only last 50 messages to prevent memory issues
    if (this.chatHistory.length > 50) {
      this.chatHistory = this.chatHistory.slice(-50);
    }
  }

  /**
   * Get chat history
   */
  getChatHistory() {
    return [...this.chatHistory];
  }

  /**
   * Clear chat history
   */
  clearChatHistory() {
    this.chatHistory = [];
  }

  /**
   * Get PropOllama system status
   */
  async getSystemStatus() {
    try {
      const baseUrl = await this.getBackendUrl();
      const response = await _axios.default.get(`${baseUrl}/health`);
      return {
        status: response.data.status || 'unknown',
        model_ready: response.data.model_status === 'ready',
        response_time_avg: response.data.uptime || 0,
        accuracy: 0.964 // Our ensemble accuracy
      };
    } catch (error) {
      console.error('Failed to get PropOllama status:', error);
      return {
        status: 'error',
        model_ready: false,
        response_time_avg: 0,
        accuracy: 0
      };
    }
  }

  /**
   * Format SHAP explanation for display
   */
  formatShapExplanation(shap_values) {
    return Object.entries(shap_values || {}).map(([feature, value]) => {
      const impact = value > 0.05 ? 'positive' : value < -0.05 ? 'negative' : 'neutral';
      return {
        feature: feature.replace(/_/g, ' ').replace(/\b\w/g, l => l.toUpperCase()),
        importance: Math.abs(value),
        impact
      };
    }).sort((a, b) => b.importance - a.importance);
  }
}
const propOllamaService = exports.propOllamaService = new PropOllamaService();
var _default = exports.default = propOllamaService;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfYXhpb3MiLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwicmVxdWlyZSIsIlByb3BPbGxhbWFTZXJ2aWNlIiwiY29uc3RydWN0b3IiLCJjaGF0SGlzdG9yeSIsImdldEJhY2tlbmRVcmwiLCJlbnZVcmwiLCJwcm9jZXNzIiwiZW52IiwiVklURV9BUElfVVJMIiwiUkVBQ1RfQVBQX0FQSV9VUkwiLCJyZXBsYWNlIiwic2VuZENoYXRNZXNzYWdlIiwicmVxdWVzdCIsImJhc2VVcmwiLCJjb25zb2xlIiwibG9nIiwicmVzcG9uc2UiLCJheGlvcyIsInBvc3QiLCJoZWFkZXJzIiwidGltZW91dCIsImFkZFRvSGlzdG9yeSIsIm1lc3NhZ2UiLCJkYXRhIiwiY29uZmlkZW5jZSIsInNoYXBfZXhwbGFuYXRpb24iLCJzdWdnZXN0aW9ucyIsImNvbnRlbnQiLCJlcnJvciIsImVycm9yTWVzc2FnZSIsImlzQXhpb3NFcnJvciIsImJhY2tlbmRFcnJvciIsIkpTT04iLCJzdHJpbmdpZnkiLCJ0b1N0cmluZyIsInN0YXR1cyIsImVyckpzb24iLCJkZXRhaWwiLCJ0cmFjZSIsIkFycmF5IiwiaXNBcnJheSIsIm1hcCIsImQiLCJtc2ciLCJqb2luIiwiRXJyb3IiLCJnZXRQcm9wT2xsYW1hSGVhbHRoIiwiZ2V0IiwiZ2V0QXZhaWxhYmxlTW9kZWxzIiwibW9kZWxzIiwiZ2V0TW9kZWxIZWFsdGgiLCJtb2RlbE5hbWUiLCJwYXJhbXMiLCJtb2RlbF9uYW1lIiwibW9kZWxfaGVhbHRoIiwiZ2V0Q29udmVyc2F0aW9uU3RhcnRlcnMiLCJ0eXBlIiwibWV0YWRhdGEiLCJpZCIsIkRhdGUiLCJub3ciLCJNYXRoIiwicmFuZG9tIiwic3Vic3RyIiwidGltZXN0YW1wIiwidG9JU09TdHJpbmciLCJwdXNoIiwibGVuZ3RoIiwic2xpY2UiLCJnZXRDaGF0SGlzdG9yeSIsImNsZWFyQ2hhdEhpc3RvcnkiLCJnZXRTeXN0ZW1TdGF0dXMiLCJtb2RlbF9yZWFkeSIsIm1vZGVsX3N0YXR1cyIsInJlc3BvbnNlX3RpbWVfYXZnIiwidXB0aW1lIiwiYWNjdXJhY3kiLCJmb3JtYXRTaGFwRXhwbGFuYXRpb24iLCJzaGFwX3ZhbHVlcyIsIk9iamVjdCIsImVudHJpZXMiLCJmZWF0dXJlIiwidmFsdWUiLCJpbXBhY3QiLCJsIiwidG9VcHBlckNhc2UiLCJpbXBvcnRhbmNlIiwiYWJzIiwic29ydCIsImEiLCJiIiwicHJvcE9sbGFtYVNlcnZpY2UiLCJleHBvcnRzIiwiX2RlZmF1bHQiLCJkZWZhdWx0Il0sInNvdXJjZXMiOlsicHJvcE9sbGFtYVNlcnZpY2UudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXHJcbiAqIFByb3BPbGxhbWEgU2VydmljZVxyXG4gKiBDb25uZWN0cyBmcm9udGVuZCB0byBzb3BoaXN0aWNhdGVkIFByb3BPbGxhbWEgYmFja2VuZCBjaGF0IGVuZ2luZVxyXG4gKiBQcm92aWRlcyByZWFsIE1MIHByZWRpY3Rpb25zIHdpdGggY29udmVyc2F0aW9uYWwgZXhwbGFuYXRpb25zXHJcbiAqL1xyXG5cclxuaW1wb3J0IGF4aW9zLCB7IEF4aW9zUmVzcG9uc2UgfSBmcm9tICdheGlvcyc7XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIFByb3BPbGxhbWFSZXF1ZXN0IHtcclxuICBtZXNzYWdlOiBzdHJpbmc7XHJcbiAgYW5hbHlzaXNUeXBlPzogJ3Byb3AnIHwgJ3NwcmVhZCcgfCAndG90YWwnIHwgJ3N0cmF0ZWd5JyB8ICdnZW5lcmFsJztcclxuICBjb250ZXh0PzogUmVjb3JkPHN0cmluZywgdW5rbm93bj47XHJcbiAgbW9kZWw/OiBzdHJpbmc7IC8vIEFkZCBtb2RlbCB0byByZXF1ZXN0IGludGVyZmFjZVxyXG4gIGluY2x1ZGVXZWJSZXNlYXJjaD86IGJvb2xlYW47IC8vIEFkZCBpbmNsdWRlV2ViUmVzZWFyY2hcclxuICByZXF1ZXN0QmVzdEJldHM/OiBib29sZWFuOyAvLyBBZGQgcmVxdWVzdEJlc3RCZXRzXHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgUHJvcE9sbGFtYVJlc3BvbnNlIHtcclxuICBjb250ZW50OiBzdHJpbmc7XHJcbiAgcmVzcG9uc2U/OiBzdHJpbmc7IC8vIEFkZCByZXNwb25zZSBmaWVsZCBmb3IgYmFja2VuZCBjb21wYXRpYmlsaXR5XHJcbiAgY29uZmlkZW5jZTogbnVtYmVyO1xyXG4gIHN1Z2dlc3Rpb25zOiBzdHJpbmdbXTtcclxuICBtb2RlbF91c2VkOiBzdHJpbmc7XHJcbiAgcmVzcG9uc2VfdGltZTogbnVtYmVyO1xyXG4gIGFuYWx5c2lzX3R5cGU6IHN0cmluZztcclxuICBzaGFwX2V4cGxhbmF0aW9uPzogUmVjb3JkPHN0cmluZywgbnVtYmVyPjtcclxuICBiZXN0X2JldHM/OiBhbnlbXTsgLy8gQWRkIGJlc3RfYmV0cyB0byByZXNwb25zZSBpbnRlcmZhY2VcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBQcm9wT2xsYW1hQ2hhdE1lc3NhZ2Uge1xyXG4gIGlkOiBzdHJpbmc7XHJcbiAgdHlwZTogJ3VzZXInIHwgJ2Fzc2lzdGFudCc7XHJcbiAgY29udGVudDogc3RyaW5nO1xyXG4gIHRpbWVzdGFtcDogc3RyaW5nO1xyXG4gIGNvbmZpZGVuY2U/OiBudW1iZXI7XHJcbiAgc2hhcF9leHBsYW5hdGlvbj86IFJlY29yZDxzdHJpbmcsIG51bWJlcj47XHJcbiAgc3VnZ2VzdGlvbnM/OiBzdHJpbmdbXTtcclxufVxyXG5cclxuLy8gSGVhbHRoIHN0YXR1cyBpbnRlcmZhY2UgZnJvbSBiYWNrZW5kXHJcbmV4cG9ydCBpbnRlcmZhY2UgU2NyYXBlckhlYWx0aCB7XHJcbiAgaXNfaGVhbHRoeT86IGJvb2xlYW47XHJcbiAgaXNfc3RhbGU/OiBib29sZWFuO1xyXG4gIGxhc3Rfc3VjY2Vzcz86IHN0cmluZztcclxuICBsYXN0X2Vycm9yPzogc3RyaW5nO1xyXG4gIGhlYWxpbmdfYXR0ZW1wdHM/OiBudW1iZXI7XHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgTW9kZWxIZWFsdGhTdGF0dXMge1xyXG4gIHN0YXR1czogc3RyaW5nO1xyXG4gIGxhc3RfZXJyb3I/OiBzdHJpbmc7XHJcbiAgbGFzdF91cGRhdGU/OiBzdHJpbmc7XHJcbn1cclxuXHJcbmNsYXNzIFByb3BPbGxhbWFTZXJ2aWNlIHtcclxuICBwcml2YXRlIGNoYXRIaXN0b3J5OiBQcm9wT2xsYW1hQ2hhdE1lc3NhZ2VbXSA9IFtdO1xyXG5cclxuICBwcml2YXRlIGFzeW5jIGdldEJhY2tlbmRVcmwoKTogUHJvbWlzZTxzdHJpbmc+IHtcclxuICAgIC8vIFVzZSBlbnZpcm9ubWVudCB2YXJpYWJsZSBmb3IgdGVzdHMgb3IgbWFudWFsIG92ZXJyaWRlXHJcbiAgICBjb25zdCBlbnZVcmwgPSBwcm9jZXNzLmVudi5WSVRFX0FQSV9VUkwgfHwgcHJvY2Vzcy5lbnYuUkVBQ1RfQVBQX0FQSV9VUkw7XHJcbiAgICBpZiAoZW52VXJsKSB7XHJcbiAgICAgIHJldHVybiBlbnZVcmwucmVwbGFjZSgvXFwvJC8sICcnKTtcclxuICAgIH1cclxuICAgIC8vIERlZmF1bHQgdG8gbG9jYWxob3N0XHJcbiAgICByZXR1cm4gJ2h0dHA6Ly9sb2NhbGhvc3Q6ODAwMCc7XHJcbiAgfVxyXG5cclxuICBhc3luYyBzZW5kQ2hhdE1lc3NhZ2UocmVxdWVzdDogUHJvcE9sbGFtYVJlcXVlc3QpOiBQcm9taXNlPFByb3BPbGxhbWFSZXNwb25zZT4ge1xyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc3QgYmFzZVVybCA9IGF3YWl0IHRoaXMuZ2V0QmFja2VuZFVybCgpO1xyXG4gICAgICBjb25zb2xlLmxvZyhg8J+kliBTZW5kaW5nIG1lc3NhZ2UgdG8gUHJvcE9sbGFtYSBhdCAke2Jhc2VVcmx9YCk7XHJcblxyXG4gICAgICBjb25zdCByZXNwb25zZTogQXhpb3NSZXNwb25zZTxhbnk+ID0gYXdhaXQgYXhpb3MucG9zdChcclxuICAgICAgICBgJHtiYXNlVXJsfS9hcGkvcHJvcG9sbGFtYS9jaGF0YCxcclxuICAgICAgICByZXF1ZXN0LFxyXG4gICAgICAgIHtcclxuICAgICAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgICB0aW1lb3V0OiA2MDAwMCwgLy8gSW5jcmVhc2UgdGltZW91dCBmb3IgY2hhdCByZXNwb25zZXNcclxuICAgICAgICB9XHJcbiAgICAgICk7XHJcblxyXG4gICAgICB0aGlzLmFkZFRvSGlzdG9yeSgndXNlcicsIHJlcXVlc3QubWVzc2FnZSk7XHJcbiAgICAgIC8vIFVzZSByZXNwb25zZS5kYXRhLnJlc3BvbnNlIGFzIHRoZSBhbmFseXN0IHJlcGx5IChiYWNrZW5kIGNvbnRyYWN0KVxyXG4gICAgICB0aGlzLmFkZFRvSGlzdG9yeSgnYXNzaXN0YW50JywgcmVzcG9uc2UuZGF0YS5yZXNwb25zZSwge1xyXG4gICAgICAgIC8vIE9wdGlvbmFsbHkgbWFwIG90aGVyIGZpZWxkcyBpZiBwcmVzZW50XHJcbiAgICAgICAgY29uZmlkZW5jZTogcmVzcG9uc2UuZGF0YS5jb25maWRlbmNlLFxyXG4gICAgICAgIHNoYXBfZXhwbGFuYXRpb246IHJlc3BvbnNlLmRhdGEuc2hhcF9leHBsYW5hdGlvbixcclxuICAgICAgICBzdWdnZXN0aW9uczogcmVzcG9uc2UuZGF0YS5zdWdnZXN0aW9ucyxcclxuICAgICAgfSk7XHJcblxyXG4gICAgICAvLyBGb3IgY29tcGF0aWJpbGl0eSwgcmV0dXJuIGFuIG9iamVjdCB3aXRoIGNvbnRlbnQgYXMgdGhlIGFuYWx5c3QgcmVwbHlcclxuICAgICAgcmV0dXJuIHtcclxuICAgICAgICAuLi5yZXNwb25zZS5kYXRhLFxyXG4gICAgICAgIGNvbnRlbnQ6IHJlc3BvbnNlLmRhdGEucmVzcG9uc2UsXHJcbiAgICAgIH07XHJcbiAgICB9IGNhdGNoIChlcnJvcjogYW55KSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1Byb3BPbGxhbWEgY2hhdCBlcnJvcjonLCBlcnJvcik7XHJcbiAgICAgIGxldCBlcnJvck1lc3NhZ2UgPSAnRmFpbGVkIHRvIGdldCBQcm9wT2xsYW1hIHJlc3BvbnNlLic7XHJcblxyXG4gICAgICBpZiAoYXhpb3MuaXNBeGlvc0Vycm9yKGVycm9yKSAmJiBlcnJvci5yZXNwb25zZSkge1xyXG4gICAgICAgIGxldCBiYWNrZW5kRXJyb3IgPSAnJztcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgYmFja2VuZEVycm9yID0gSlNPTi5zdHJpbmdpZnkoZXJyb3IucmVzcG9uc2UuZGF0YSk7XHJcbiAgICAgICAgfSBjYXRjaCB7XHJcbiAgICAgICAgICBiYWNrZW5kRXJyb3IgPSBlcnJvci5yZXNwb25zZS5kYXRhLnRvU3RyaW5nKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBlcnJvck1lc3NhZ2UgPSBgSFRUUCAke2Vycm9yLnJlc3BvbnNlLnN0YXR1c31gO1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICBjb25zdCBlcnJKc29uID0gZXJyb3IucmVzcG9uc2UuZGF0YTtcclxuICAgICAgICAgIGlmIChlcnJKc29uPy5kZXRhaWwpIHtcclxuICAgICAgICAgICAgaWYgKHR5cGVvZiBlcnJKc29uLmRldGFpbCA9PT0gJ3N0cmluZycpIHtcclxuICAgICAgICAgICAgICBlcnJvck1lc3NhZ2UgKz0gYDogJHtlcnJKc29uLmRldGFpbH1gO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiBlcnJKc29uLmRldGFpbCA9PT0gJ29iamVjdCcpIHtcclxuICAgICAgICAgICAgICBpZiAoZXJySnNvbi5kZXRhaWwubWVzc2FnZSkgZXJyb3JNZXNzYWdlICs9IGA6ICR7ZXJySnNvbi5kZXRhaWwubWVzc2FnZX1gO1xyXG4gICAgICAgICAgICAgIGlmIChlcnJKc29uLmRldGFpbC50cmFjZSkgZXJyb3JNZXNzYWdlICs9IGBcXG5UcmFjZTogJHtlcnJKc29uLmRldGFpbC50cmFjZX1gO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKEFycmF5LmlzQXJyYXkoZXJySnNvbi5kZXRhaWwpKSB7XHJcbiAgICAgICAgICAgICAgZXJyb3JNZXNzYWdlICs9IGA6ICR7ZXJySnNvbi5kZXRhaWxcclxuICAgICAgICAgICAgICAgIC5tYXAoKGQ6IGFueSkgPT4gZD8ubXNnIHx8IEpTT04uc3RyaW5naWZ5KGQpKVxyXG4gICAgICAgICAgICAgICAgLmpvaW4oJywgJyl9YDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0gY2F0Y2gge1xyXG4gICAgICAgICAgZXJyb3JNZXNzYWdlICs9IGA6ICR7YmFja2VuZEVycm9yfWA7XHJcbiAgICAgICAgfVxyXG4gICAgICB9IGVsc2UgaWYgKGVycm9yIGluc3RhbmNlb2YgRXJyb3IpIHtcclxuICAgICAgICBlcnJvck1lc3NhZ2UgPSBlcnJvci5tZXNzYWdlO1xyXG4gICAgICB9XHJcbiAgICAgIHRocm93IG5ldyBFcnJvcihlcnJvck1lc3NhZ2UpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgYXN5bmMgZ2V0UHJvcE9sbGFtYUhlYWx0aCgpOiBQcm9taXNlPGFueT4ge1xyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc3QgYmFzZVVybCA9IGF3YWl0IHRoaXMuZ2V0QmFja2VuZFVybCgpO1xyXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGF4aW9zLmdldChgJHtiYXNlVXJsfS9hcGkvcHJvcG9sbGFtYS9oZWFsdGhgKTtcclxuICAgICAgcmV0dXJuIHJlc3BvbnNlLmRhdGE7XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyBQcm9wT2xsYW1hIGhlYWx0aDonLCBlcnJvcik7XHJcbiAgICAgIHRocm93IG5ldyBFcnJvcignRmFpbGVkIHRvIGZldGNoIFByb3BPbGxhbWEgaGVhbHRoJyk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBhc3luYyBnZXRBdmFpbGFibGVNb2RlbHMoKTogUHJvbWlzZTxzdHJpbmdbXT4ge1xyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc3QgYmFzZVVybCA9IGF3YWl0IHRoaXMuZ2V0QmFja2VuZFVybCgpO1xyXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGF4aW9zLmdldChgJHtiYXNlVXJsfS9hcGkvcHJvcG9sbGFtYS9tb2RlbHNgKTtcclxuICAgICAgaWYgKEFycmF5LmlzQXJyYXkocmVzcG9uc2UuZGF0YS5tb2RlbHMpKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmRhdGEubW9kZWxzO1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiBbXTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIGF2YWlsYWJsZSBtb2RlbHM6JywgZXJyb3IpO1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ZhaWxlZCB0byBmZXRjaCBhdmFpbGFibGUgbW9kZWxzJyk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBhc3luYyBnZXRNb2RlbEhlYWx0aChtb2RlbE5hbWU6IHN0cmluZyk6IFByb21pc2U8TW9kZWxIZWFsdGhTdGF0dXM+IHtcclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IGJhc2VVcmwgPSBhd2FpdCB0aGlzLmdldEJhY2tlbmRVcmwoKTtcclxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBheGlvcy5nZXQoYCR7YmFzZVVybH0vYXBpL3Byb3BvbGxhbWEvbW9kZWxfaGVhbHRoYCwge1xyXG4gICAgICAgIHBhcmFtczogeyBtb2RlbF9uYW1lOiBtb2RlbE5hbWUgfSxcclxuICAgICAgfSk7XHJcbiAgICAgIHJldHVybiByZXNwb25zZS5kYXRhLm1vZGVsX2hlYWx0aDtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoYEVycm9yIGZldGNoaW5nIGhlYWx0aCBmb3IgbW9kZWwgJHttb2RlbE5hbWV9OmAsIGVycm9yKTtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKGBGYWlsZWQgdG8gZmV0Y2ggaGVhbHRoIGZvciBtb2RlbCAke21vZGVsTmFtZX1gKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEdldCBjb252ZXJzYXRpb24gc3RhcnRlcnMgZm9yIGNvbW1vbiBxdWVyaWVzXHJcbiAgICovXHJcbiAgZ2V0Q29udmVyc2F0aW9uU3RhcnRlcnMoKTogc3RyaW5nW10ge1xyXG4gICAgcmV0dXJuIFtcclxuICAgICAgXCJXaGF0IGFyZSB0b2RheSdzIGJlc3QgYmV0dGluZyBvcHBvcnR1bml0aWVzP1wiLFxyXG4gICAgICAnRXhwbGFpbiB0aGUgTGFrZXJzIHZzIFdhcnJpb3JzIHByZWRpY3Rpb24nLFxyXG4gICAgICBcIkhvdyBkb2VzIHdlYXRoZXIgYWZmZWN0IHRvbmlnaHQncyBnYW1lcz9cIixcclxuICAgICAgXCJXaGF0J3MgeW91ciBjb25maWRlbmNlIGluIHRoZSBvdmVyL3VuZGVyIGJldHM/XCIsXHJcbiAgICAgICdTaG93IG1lIFNIQVAgZXhwbGFuYXRpb25zIGZvciB0b3AgcGlja3MnLFxyXG4gICAgICAnV2hhdCBpbmp1cnkgcmVwb3J0cyBzaG91bGQgSSBrbm93IGFib3V0PycsXHJcbiAgICAgICdIb3cgaXMgdGhlIE1MIGVuc2VtYmxlIHBlcmZvcm1pbmcgdG9kYXk/JyxcclxuICAgIF07XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBBZGQgbWVzc2FnZSB0byBjaGF0IGhpc3RvcnlcclxuICAgKi9cclxuICBwcml2YXRlIGFkZFRvSGlzdG9yeShcclxuICAgIHR5cGU6ICd1c2VyJyB8ICdhc3Npc3RhbnQnLFxyXG4gICAgY29udGVudDogc3RyaW5nLFxyXG4gICAgbWV0YWRhdGE/OiB7XHJcbiAgICAgIGNvbmZpZGVuY2U/OiBudW1iZXI7XHJcbiAgICAgIHNoYXBfZXhwbGFuYXRpb24/OiBSZWNvcmQ8c3RyaW5nLCBudW1iZXI+O1xyXG4gICAgICBzdWdnZXN0aW9ucz86IHN0cmluZ1tdO1xyXG4gICAgfVxyXG4gICk6IHZvaWQge1xyXG4gICAgY29uc3QgbWVzc2FnZTogUHJvcE9sbGFtYUNoYXRNZXNzYWdlID0ge1xyXG4gICAgICBpZDogYG1zZ18ke0RhdGUubm93KCl9XyR7TWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc3Vic3RyKDIsIDkpfWAsXHJcbiAgICAgIHR5cGUsXHJcbiAgICAgIGNvbnRlbnQsXHJcbiAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxyXG4gICAgICAuLi5tZXRhZGF0YSxcclxuICAgIH07XHJcblxyXG4gICAgdGhpcy5jaGF0SGlzdG9yeS5wdXNoKG1lc3NhZ2UpO1xyXG5cclxuICAgIC8vIEtlZXAgb25seSBsYXN0IDUwIG1lc3NhZ2VzIHRvIHByZXZlbnQgbWVtb3J5IGlzc3Vlc1xyXG4gICAgaWYgKHRoaXMuY2hhdEhpc3RvcnkubGVuZ3RoID4gNTApIHtcclxuICAgICAgdGhpcy5jaGF0SGlzdG9yeSA9IHRoaXMuY2hhdEhpc3Rvcnkuc2xpY2UoLTUwKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEdldCBjaGF0IGhpc3RvcnlcclxuICAgKi9cclxuICBnZXRDaGF0SGlzdG9yeSgpOiBQcm9wT2xsYW1hQ2hhdE1lc3NhZ2VbXSB7XHJcbiAgICByZXR1cm4gWy4uLnRoaXMuY2hhdEhpc3RvcnldO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQ2xlYXIgY2hhdCBoaXN0b3J5XHJcbiAgICovXHJcbiAgY2xlYXJDaGF0SGlzdG9yeSgpOiB2b2lkIHtcclxuICAgIHRoaXMuY2hhdEhpc3RvcnkgPSBbXTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEdldCBQcm9wT2xsYW1hIHN5c3RlbSBzdGF0dXNcclxuICAgKi9cclxuICBhc3luYyBnZXRTeXN0ZW1TdGF0dXMoKTogUHJvbWlzZTx7XHJcbiAgICBzdGF0dXM6IHN0cmluZztcclxuICAgIG1vZGVsX3JlYWR5OiBib29sZWFuO1xyXG4gICAgcmVzcG9uc2VfdGltZV9hdmc6IG51bWJlcjtcclxuICAgIGFjY3VyYWN5OiBudW1iZXI7XHJcbiAgfT4ge1xyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc3QgYmFzZVVybCA9IGF3YWl0IHRoaXMuZ2V0QmFja2VuZFVybCgpO1xyXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGF4aW9zLmdldChgJHtiYXNlVXJsfS9oZWFsdGhgKTtcclxuICAgICAgcmV0dXJuIHtcclxuICAgICAgICBzdGF0dXM6IHJlc3BvbnNlLmRhdGEuc3RhdHVzIHx8ICd1bmtub3duJyxcclxuICAgICAgICBtb2RlbF9yZWFkeTogcmVzcG9uc2UuZGF0YS5tb2RlbF9zdGF0dXMgPT09ICdyZWFkeScsXHJcbiAgICAgICAgcmVzcG9uc2VfdGltZV9hdmc6IHJlc3BvbnNlLmRhdGEudXB0aW1lIHx8IDAsXHJcbiAgICAgICAgYWNjdXJhY3k6IDAuOTY0LCAvLyBPdXIgZW5zZW1ibGUgYWNjdXJhY3lcclxuICAgICAgfTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byBnZXQgUHJvcE9sbGFtYSBzdGF0dXM6JywgZXJyb3IpO1xyXG4gICAgICByZXR1cm4ge1xyXG4gICAgICAgIHN0YXR1czogJ2Vycm9yJyxcclxuICAgICAgICBtb2RlbF9yZWFkeTogZmFsc2UsXHJcbiAgICAgICAgcmVzcG9uc2VfdGltZV9hdmc6IDAsXHJcbiAgICAgICAgYWNjdXJhY3k6IDAsXHJcbiAgICAgIH07XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBGb3JtYXQgU0hBUCBleHBsYW5hdGlvbiBmb3IgZGlzcGxheVxyXG4gICAqL1xyXG4gIGZvcm1hdFNoYXBFeHBsYW5hdGlvbihzaGFwX3ZhbHVlczogUmVjb3JkPHN0cmluZywgbnVtYmVyPik6IEFycmF5PHtcclxuICAgIGZlYXR1cmU6IHN0cmluZztcclxuICAgIGltcG9ydGFuY2U6IG51bWJlcjtcclxuICAgIGltcGFjdDogJ3Bvc2l0aXZlJyB8ICduZWdhdGl2ZScgfCAnbmV1dHJhbCc7XHJcbiAgfT4ge1xyXG4gICAgcmV0dXJuIE9iamVjdC5lbnRyaWVzKHNoYXBfdmFsdWVzIHx8IHt9KVxyXG4gICAgICAubWFwKChbZmVhdHVyZSwgdmFsdWVdKSA9PiB7XHJcbiAgICAgICAgY29uc3QgaW1wYWN0OiAncG9zaXRpdmUnIHwgJ25lZ2F0aXZlJyB8ICduZXV0cmFsJyA9XHJcbiAgICAgICAgICB2YWx1ZSA+IDAuMDUgPyAncG9zaXRpdmUnIDogdmFsdWUgPCAtMC4wNSA/ICduZWdhdGl2ZScgOiAnbmV1dHJhbCc7XHJcblxyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICBmZWF0dXJlOiBmZWF0dXJlLnJlcGxhY2UoL18vZywgJyAnKS5yZXBsYWNlKC9cXGJcXHcvZywgbCA9PiBsLnRvVXBwZXJDYXNlKCkpLFxyXG4gICAgICAgICAgaW1wb3J0YW5jZTogTWF0aC5hYnModmFsdWUpLFxyXG4gICAgICAgICAgaW1wYWN0LFxyXG4gICAgICAgIH07XHJcbiAgICAgIH0pXHJcbiAgICAgIC5zb3J0KChhLCBiKSA9PiBiLmltcG9ydGFuY2UgLSBhLmltcG9ydGFuY2UpO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IHByb3BPbGxhbWFTZXJ2aWNlID0gbmV3IFByb3BPbGxhbWFTZXJ2aWNlKCk7XHJcbmV4cG9ydCBkZWZhdWx0IHByb3BPbGxhbWFTZXJ2aWNlO1xyXG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFNQSxJQUFBQSxNQUFBLEdBQUFDLHNCQUFBLENBQUFDLE9BQUE7QUFOQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQW1DQTs7QUFlQSxNQUFNQyxpQkFBaUIsQ0FBQztFQUFBQyxZQUFBO0lBQUEsS0FDZEMsV0FBVyxHQUE0QixFQUFFO0VBQUE7RUFFakQsTUFBY0MsYUFBYUEsQ0FBQSxFQUFvQjtJQUM3QztJQUNBLE1BQU1DLE1BQU0sR0FBR0MsT0FBTyxDQUFDQyxHQUFHLENBQUNDLFlBQVksSUFBSUYsT0FBTyxDQUFDQyxHQUFHLENBQUNFLGlCQUFp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