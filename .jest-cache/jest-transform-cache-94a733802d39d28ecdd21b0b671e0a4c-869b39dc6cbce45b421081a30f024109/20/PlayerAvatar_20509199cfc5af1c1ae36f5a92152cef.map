{"version":3,"names":["_react","_interopRequireWildcard","require","_jsxRuntime","e","t","WeakMap","r","n","__esModule","o","i","f","__proto__","default","has","get","set","hasOwnProperty","call","Object","defineProperty","getOwnPropertyDescriptor","PlayerAvatar","playerName","playerId","size","className","imageState","setImageState","useState","currentSrc","setCurrentSrc","sizeClasses","sm","md","lg","getImageUrls","id","getInitials","name","split","map","part","charAt","join","toUpperCase","slice","useEffect","testImage","urls","index","length","console","log","img","Image","url","onload","onerror","src","baseClasses","jsx","alt","onError","title","children","_default","exports"],"sources":["PlayerAvatar.tsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\n\r\ninterface PlayerAvatarProps {\r\n  playerName: string;\r\n  playerId?: string;\r\n  size?: 'sm' | 'md' | 'lg';\r\n  className?: string;\r\n}\r\n\r\nconst PlayerAvatar: React.FC<PlayerAvatarProps> = ({\r\n  playerName,\r\n  playerId,\r\n  size = 'md',\r\n  className = '',\r\n}) => {\r\n  const [imageState, setImageState] = useState<'loading' | 'loaded' | 'error'>('loading');\r\n  const [currentSrc, setCurrentSrc] = useState<string | null>(null);\r\n\r\n  // Define size classes\r\n  const sizeClasses = {\r\n    sm: 'w-8 h-8 text-sm',\r\n    md: 'w-10 h-10 text-lg',\r\n    lg: 'w-16 h-16 text-xl',\r\n  };\r\n\r\n  // URL formats to try in order of preference\r\n  const getImageUrls = (id: string): string[] => {\r\n    return [\r\n      // MLB static format (confirmed working via curl test)\r\n      `https://midfield.mlbstatic.com/v1/people/${id}/spots/120`,\r\n      // Try larger resolution as backup\r\n      `https://midfield.mlbstatic.com/v1/people/${id}/spots/240`,\r\n      // Generic player silhouette as final fallback\r\n      `https://midfield.mlbstatic.com/v1/people/generic/spots/120`,\r\n    ];\r\n  };\r\n\r\n  // Get player initials for fallback\r\n  const getInitials = (name: string): string => {\r\n    return name\r\n      .split(' ')\r\n      .map(part => part.charAt(0))\r\n      .join('')\r\n      .toUpperCase()\r\n      .slice(0, 2);\r\n  };\r\n\r\n  // Test image URLs sequentially\r\n  useEffect(() => {\r\n    if (!playerId) {\r\n      setImageState('error');\r\n      return;\r\n    }\r\n\r\n    const testImage = (urls: string[], index = 0): void => {\r\n      if (index >= urls.length) {\r\n        console.log(`[PlayerAvatar] All image URLs failed for ${playerName} (ID: ${playerId})`);\r\n        setImageState('error');\r\n        return;\r\n      }\r\n\r\n      const img = new Image();\r\n      const url = urls[index];\r\n\r\n      img.onload = () => {\r\n        console.log(\r\n          `[PlayerAvatar] ‚úÖ Image loaded successfully for ${playerName} (ID: ${playerId}) from: ${url}`\r\n        );\r\n        setCurrentSrc(url);\r\n        setImageState('loaded');\r\n      };\r\n\r\n      img.onerror = () => {\r\n        console.log(\r\n          `[PlayerAvatar] ‚ùå Image failed to load for ${playerName} (ID: ${playerId}) from: ${url}`\r\n        );\r\n        // Try next URL\r\n        testImage(urls, index + 1);\r\n      };\r\n\r\n      console.log(\r\n        `[PlayerAvatar] üîÑ Testing image URL for ${playerName} (ID: ${playerId}): ${url}`\r\n      );\r\n      img.src = url;\r\n    };\r\n\r\n    setImageState('loading');\r\n    const urls = getImageUrls(playerId);\r\n    testImage(urls);\r\n  }, [playerId, playerName]);\r\n\r\n  const baseClasses = `${sizeClasses[size]} rounded-full flex-shrink-0 ${className}`;\r\n\r\n  // Show image if loaded successfully\r\n  if (imageState === 'loaded' && currentSrc) {\r\n    return (\r\n      <img\r\n        src={currentSrc}\r\n        alt={playerName}\r\n        className={`${baseClasses} object-cover border-2 border-green-500`}\r\n        onError={() => {\r\n          console.log(`[PlayerAvatar] ‚ùå Image error during display for ${playerName}`);\r\n          setImageState('error');\r\n        }}\r\n        title={`${playerName} (ID: ${playerId}) - Image loaded`}\r\n      />\r\n    );\r\n  }\r\n\r\n  // Show loading state\r\n  if (imageState === 'loading') {\r\n    return (\r\n      <div\r\n        className={`${baseClasses} bg-blue-600 flex items-center justify-center text-white font-bold animate-pulse border-2 border-blue-400`}\r\n        title={`${playerName} (ID: ${playerId}) - Loading image...`}\r\n      >\r\n        {getInitials(playerName)}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // Show fallback with initials (error state)\r\n  return (\r\n    <div\r\n      className={`${baseClasses} bg-gray-700 flex items-center justify-center text-white font-bold border-2 border-gray-500`}\r\n      title={`${playerName} (ID: ${playerId || 'N/A'}) - No image available`}\r\n    >\r\n      {getInitials(playerName)}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default PlayerAvatar;\r\n"],"mappings":"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","ignoreList":[]}