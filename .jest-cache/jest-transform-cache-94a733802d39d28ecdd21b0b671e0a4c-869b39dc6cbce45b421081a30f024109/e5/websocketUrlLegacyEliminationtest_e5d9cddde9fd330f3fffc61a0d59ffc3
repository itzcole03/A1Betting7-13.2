6feefe29245d7180efcfc23f0ed068e1
"use strict";

var _websocketBuilder = require("../../utils/websocketBuilder.mock");
/**
 * WebSocket URL Legacy Elimination Tests
 * Ensures legacy 'client_/ws' path cannot be constructed
 */

// Mock global window if it doesn't exist
if (typeof global.window === 'undefined') {
  global.window = {
    localStorage: global.localStorage,
    location: {
      protocol: 'http:',
      hostname: 'localhost',
      port: '5173'
    }
  };
} else {
  // If window exists, ensure localStorage is available
  if (typeof global.window.localStorage === 'undefined') {
    global.window.localStorage = global.localStorage;
  }
}
describe('WebSocket Legacy Elimination', () => {
  beforeEach(() => {
    // Clear localStorage between tests
    global.localStorage.clear();
    // Clear environment
    (0, _websocketBuilder.setMockEnv)({
      VITE_WS_URL: undefined
    });
    // Mock console methods to avoid noise in tests
    jest.spyOn(console, 'log').mockImplementation();
    jest.spyOn(console, 'warn').mockImplementation();
    jest.spyOn(console, 'error').mockImplementation();
  });
  afterEach(() => {
    jest.restoreAllMocks();
  });
  describe('buildWebSocketUrl canonical builder', () => {
    test('never returns URL containing client_/ws', () => {
      // Test with various configurations
      const testCases = [{}, {
        clientId: 'test123'
      }, {
        baseUrl: 'ws://localhost:8000'
      }, {
        baseUrl: 'wss://production.com'
      }, {
        clientId: 'custom',
        role: 'admin',
        version: 2
      }];
      testCases.forEach(options => {
        const url = (0, _websocketBuilder.buildWebSocketUrl)(options);
        expect(url).not.toContain('client_/ws');
        expect((0, _websocketBuilder.validateWebSocketUrl)(url)).toBe(true);
        expect(url).toMatch(/\/ws\/client\?/); // Should contain canonical path
      });
    });
    test('throws in development when legacy path detected', () => {
      // Ensure we're in development mode
      (0, _websocketBuilder.setMockEnv)({
        VITE_WS_URL: undefined,
        DEV: true
      });

      // Verify DEV is set
      expect(_websocketBuilder.mockEnv.DEV).toBe(true);

      // Mock the URL constructor to throw an error to trigger fallback
      const originalURL = global.URL;
      const mockURL = jest.fn().mockImplementation(() => {
        throw new Error('Mock URL constructor error');
      });
      global.URL = mockURL;
      try {
        // Pass a baseUrl that contains legacy path - this will trigger fallback with legacy path
        const result = (0, _websocketBuilder.buildWebSocketUrl)({
          clientId: 'test',
          baseUrl: 'ws://localhost:8000/client_/ws'
        });
        console.log('Function returned:', result);
        // The function should have detected the legacy path in fallback and thrown an error
        // If we get here, something went wrong
        expect(result).toContain('client_/ws'); // This should show us what was actually returned
      } catch (error) {
        expect(error.message).toContain('Legacy websocket path constructed');
      } finally {
        global.URL = originalURL;
      }
    });
    test('generates correct canonical URLs', () => {
      const url = (0, _websocketBuilder.buildWebSocketUrl)({
        clientId: 'test123',
        role: 'frontend',
        version: 1,
        baseUrl: 'ws://localhost:8000'
      });
      expect(url).toBe('ws://localhost:8000/ws/client?client_id=test123&version=1&role=frontend');
      expect(url).toContain('/ws/client?');
      expect(url).not.toContain('client_/ws');
    });
  });
  describe('Environment variable sanitization', () => {
    test('sanitizes legacy path from VITE_WS_URL environment', () => {
      // Set environment with legacy path
      (0, _websocketBuilder.setMockEnv)({
        VITE_WS_URL: 'ws://localhost:8000/ws/client_/legacy'
      });
      const baseUrl = (0, _websocketBuilder.resolveWebSocketBase)();
      expect(baseUrl).not.toContain('client_/ws');
      expect(baseUrl).toBe('ws://localhost:8000');

      // Should log warning about legacy environment
      expect(console.warn).toHaveBeenCalledWith(expect.stringContaining('[EnvDiag][LegacyInEnv]'), 'ws://localhost:8000/ws/client_/legacy');
    });
    test('handles environment without legacy path correctly', () => {
      (0, _websocketBuilder.setMockEnv)({
        VITE_WS_URL: 'ws://localhost:8000'
      });
      const baseUrl = (0, _websocketBuilder.resolveWebSocketBase)();
      expect(baseUrl).toBe('ws://localhost:8000');
      expect(console.warn).not.toHaveBeenCalled();
    });
  });
  describe('Client ID persistence', () => {
    test('creates and persists new client ID when none exists', () => {
      const clientId = (0, _websocketBuilder.getOrPersistClientId)('test_key');
      expect(clientId).toMatch(/^client_[a-zA-Z0-9]{9}$/);
      expect(global.localStorage.getItem('test_key')).toBe(clientId);

      // Should log diagnostic info in dev mode
      expect(console.log).toHaveBeenCalledWith('[ClientIdDiag]', expect.objectContaining({
        initialFromStorage: false,
        passedIn: false,
        finalClientId: clientId
      }));
    });
    test('reuses existing client ID from storage', () => {
      global.localStorage.setItem('existing_key', 'stored_client_id');
      const clientId = (0, _websocketBuilder.getOrPersistClientId)('existing_key');
      expect(clientId).toBe('stored_client_id');
      expect(console.log).toHaveBeenCalledWith('[ClientIdDiag]', expect.objectContaining({
        initialFromStorage: true,
        passedIn: false,
        finalClientId: 'stored_client_id'
      }));
    });
    test('prefers passed client ID but still persists it', () => {
      const passedId = 'custom_client_123';
      const clientId = (0, _websocketBuilder.getOrPersistClientId)('persist_key', passedId);
      expect(clientId).toBe(passedId);
      expect(global.localStorage.getItem('persist_key')).toBe(passedId);
    });
  });
  describe('URL validation', () => {
    test('validateWebSocketUrl correctly identifies legacy URLs', () => {
      expect((0, _websocketBuilder.validateWebSocketUrl)('ws://localhost:8000/ws/client')).toBe(true);
      expect((0, _websocketBuilder.validateWebSocketUrl)('ws://localhost:8000/client_/ws/test')).toBe(false);
      expect((0, _websocketBuilder.validateWebSocketUrl)('wss://prod.com/ws/client?id=123')).toBe(true);
      expect((0, _websocketBuilder.validateWebSocketUrl)('ws://dev.local/some/client_/ws/path')).toBe(false);
    });
  });
  describe('Reconnection backoff capping integration', () => {
    test('mock reconnection delay sequence caps at expected max', () => {
      // This test mocks the backoff strategy to verify max delay
      const expectedMax = 16000;

      // Simulate sequential failures
      let currentDelay = 1000;
      const delaySequence = [];

      // Mock exponential backoff with cap
      for (let attempt = 0; attempt < 8; attempt++) {
        delaySequence.push(currentDelay);
        currentDelay = Math.min(currentDelay * 2, expectedMax);
      }

      // Verify sequence caps correctly
      expect(delaySequence).toEqual([1000, 2000, 4000, 8000, 16000, 16000, 16000, 16000]);
      expect(Math.max(...delaySequence)).toBe(expectedMax);
    });
  });
  describe('Integration with legacy detection', () => {
    test('full URL construction flow prevents legacy path', () => {
      // Test complete flow: env resolution → client ID → URL building → validation
      (0, _websocketBuilder.setMockEnv)({
        VITE_WS_URL: 'ws://localhost:8000'
      }); // Clean environment

      const url = (0, _websocketBuilder.buildWebSocketUrl)();
      expect((0, _websocketBuilder.validateWebSocketUrl)(url)).toBe(true);
      expect(url).toMatch(/^ws:\/\/localhost:8000\/ws\/client\?client_id=client_[a-zA-Z0-9]{9}&version=1&role=frontend$/);
      expect(url).not.toContain('client_/ws');
    });
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfd2Vic29ja2V0QnVpbGRlciIsInJlcXVpcmUiLCJnbG9iYWwiLCJ3aW5kb3ciLCJsb2NhbFN0b3JhZ2UiLCJsb2NhdGlvbiIsInByb3RvY29sIiwiaG9zdG5hbWUiLCJwb3J0IiwiZGVzY3JpYmUiLCJiZWZvcmVFYWNoIiwiY2xlYXIiLCJzZXRNb2NrRW52IiwiVklURV9XU19VUkwiLCJ1bmRlZmluZWQiLCJqZXN0Iiwic3B5T24iLCJjb25zb2xlIiwibW9ja0ltcGxlbWVudGF0aW9uIiwiYWZ0ZXJFYWNoIiwicmVzdG9yZUFsbE1vY2tzIiwidGVzdCIsInRlc3RDYXNlcyIsImNsaWVudElkIiwiYmFzZVVybCIsInJvbGUiLCJ2ZXJzaW9uIiwiZm9yRWFjaCIsIm9wdGlvbnMiLCJ1cmwiLCJidWlsZFdlYlNvY2tldFVybCIsImV4cGVjdCIsIm5vdCIsInRvQ29udGFpbiIsInZhbGlkYXRlV2ViU29ja2V0VXJsIiwidG9CZSIsInRvTWF0Y2giLCJERVYiLCJtb2NrRW52Iiwib3JpZ2luYWxVUkwiLCJVUkwiLCJtb2NrVVJMIiwiZm4iLCJFcnJvciIsInJlc3VsdCIsImxvZyIsImVycm9yIiwibWVzc2FnZSIsInJlc29sdmVXZWJTb2NrZXRCYXNlIiwid2FybiIsInRvSGF2ZUJlZW5DYWxsZWRXaXRoIiwic3RyaW5nQ29udGFpbmluZyIsInRvSGF2ZUJlZW5DYWxsZWQiLCJnZXRPclBlcnNpc3RDbGllbnRJZCIsImdldEl0ZW0iLCJvYmplY3RDb250YWluaW5nIiwiaW5pdGlhbEZyb21TdG9yYWdlIiwicGFzc2VkSW4iLCJmaW5hbENsaWVudElkIiwic2V0SXRlbSIsInBhc3NlZElkIiwiZXhwZWN0ZWRNYXgiLCJjdXJyZW50RGVsYXkiLCJkZWxheVNlcXVlbmNlIiwiYXR0ZW1wdCIsInB1c2giLCJNYXRoIiwibWluIiwidG9FcXVhbCIsIm1heCJdLCJzb3VyY2VzIjpbIndlYnNvY2tldFVybExlZ2FjeUVsaW1pbmF0aW9uLnRlc3QudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXHJcbiAqIFdlYlNvY2tldCBVUkwgTGVnYWN5IEVsaW1pbmF0aW9uIFRlc3RzXHJcbiAqIEVuc3VyZXMgbGVnYWN5ICdjbGllbnRfL3dzJyBwYXRoIGNhbm5vdCBiZSBjb25zdHJ1Y3RlZFxyXG4gKi9cclxuXHJcbmltcG9ydCB7IFxyXG4gIGJ1aWxkV2ViU29ja2V0VXJsLCBcclxuICByZXNvbHZlV2ViU29ja2V0QmFzZSwgXHJcbiAgZ2V0T3JQZXJzaXN0Q2xpZW50SWQsIFxyXG4gIHZhbGlkYXRlV2ViU29ja2V0VXJsLFxyXG4gIHNldE1vY2tFbnYsXHJcbiAgbW9ja0VudiBcclxufSBmcm9tICcuLi8uLi91dGlscy93ZWJzb2NrZXRCdWlsZGVyLm1vY2snO1xyXG5cclxuLy8gTW9jayBnbG9iYWwgd2luZG93IGlmIGl0IGRvZXNuJ3QgZXhpc3RcclxuaWYgKHR5cGVvZiBnbG9iYWwud2luZG93ID09PSAndW5kZWZpbmVkJykge1xyXG4gIChnbG9iYWwgYXMgYW55KS53aW5kb3cgPSB7XHJcbiAgICBsb2NhbFN0b3JhZ2U6IGdsb2JhbC5sb2NhbFN0b3JhZ2UsXHJcbiAgICBsb2NhdGlvbjoge1xyXG4gICAgICBwcm90b2NvbDogJ2h0dHA6JyxcclxuICAgICAgaG9zdG5hbWU6ICdsb2NhbGhvc3QnLFxyXG4gICAgICBwb3J0OiAnNTE3MydcclxuICAgIH1cclxuICB9O1xyXG59IGVsc2Uge1xyXG4gIC8vIElmIHdpbmRvdyBleGlzdHMsIGVuc3VyZSBsb2NhbFN0b3JhZ2UgaXMgYXZhaWxhYmxlXHJcbiAgaWYgKHR5cGVvZiAoZ2xvYmFsLndpbmRvdyBhcyBhbnkpLmxvY2FsU3RvcmFnZSA9PT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgIChnbG9iYWwud2luZG93IGFzIGFueSkubG9jYWxTdG9yYWdlID0gZ2xvYmFsLmxvY2FsU3RvcmFnZTtcclxuICB9XHJcbn1cclxuXHJcbmRlc2NyaWJlKCdXZWJTb2NrZXQgTGVnYWN5IEVsaW1pbmF0aW9uJywgKCkgPT4ge1xyXG4gIFxyXG4gIGJlZm9yZUVhY2goKCkgPT4ge1xyXG4gICAgLy8gQ2xlYXIgbG9jYWxTdG9yYWdlIGJldHdlZW4gdGVzdHNcclxuICAgIGdsb2JhbC5sb2NhbFN0b3JhZ2UuY2xlYXIoKTtcclxuICAgIC8vIENsZWFyIGVudmlyb25tZW50XHJcbiAgICBzZXRNb2NrRW52KHsgVklURV9XU19VUkw6IHVuZGVmaW5lZCB9KTtcclxuICAgIC8vIE1vY2sgY29uc29sZSBtZXRob2RzIHRvIGF2b2lkIG5vaXNlIGluIHRlc3RzXHJcbiAgICBqZXN0LnNweU9uKGNvbnNvbGUsICdsb2cnKS5tb2NrSW1wbGVtZW50YXRpb24oKTtcclxuICAgIGplc3Quc3B5T24oY29uc29sZSwgJ3dhcm4nKS5tb2NrSW1wbGVtZW50YXRpb24oKTtcclxuICAgIGplc3Quc3B5T24oY29uc29sZSwgJ2Vycm9yJykubW9ja0ltcGxlbWVudGF0aW9uKCk7XHJcbiAgfSk7XHJcblxyXG4gIGFmdGVyRWFjaCgoKSA9PiB7XHJcbiAgICBqZXN0LnJlc3RvcmVBbGxNb2NrcygpO1xyXG4gIH0pO1xyXG5cclxuICBkZXNjcmliZSgnYnVpbGRXZWJTb2NrZXRVcmwgY2Fub25pY2FsIGJ1aWxkZXInLCAoKSA9PiB7XHJcbiAgICB0ZXN0KCduZXZlciByZXR1cm5zIFVSTCBjb250YWluaW5nIGNsaWVudF8vd3MnLCAoKSA9PiB7XHJcbiAgICAgIC8vIFRlc3Qgd2l0aCB2YXJpb3VzIGNvbmZpZ3VyYXRpb25zXHJcbiAgICAgIGNvbnN0IHRlc3RDYXNlcyA9IFtcclxuICAgICAgICB7fSxcclxuICAgICAgICB7IGNsaWVudElkOiAndGVzdDEyMycgfSxcclxuICAgICAgICB7IGJhc2VVcmw6ICd3czovL2xvY2FsaG9zdDo4MDAwJyB9LFxyXG4gICAgICAgIHsgYmFzZVVybDogJ3dzczovL3Byb2R1Y3Rpb24uY29tJyB9LFxyXG4gICAgICAgIHsgY2xpZW50SWQ6ICdjdXN0b20nLCByb2xlOiAnYWRtaW4nLCB2ZXJzaW9uOiAyIH1cclxuICAgICAgXTtcclxuXHJcbiAgICAgIHRlc3RDYXNlcy5mb3JFYWNoKG9wdGlvbnMgPT4ge1xyXG4gICAgICAgIGNvbnN0IHVybCA9IGJ1aWxkV2ViU29ja2V0VXJsKG9wdGlvbnMpO1xyXG4gICAgICAgIGV4cGVjdCh1cmwpLm5vdC50b0NvbnRhaW4oJ2NsaWVudF8vd3MnKTtcclxuICAgICAgICBleHBlY3QodmFsaWRhdGVXZWJTb2NrZXRVcmwodXJsKSkudG9CZSh0cnVlKTtcclxuICAgICAgICBleHBlY3QodXJsKS50b01hdGNoKC9cXC93c1xcL2NsaWVudFxcPy8pOyAvLyBTaG91bGQgY29udGFpbiBjYW5vbmljYWwgcGF0aFxyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG5cclxuICAgIHRlc3QoJ3Rocm93cyBpbiBkZXZlbG9wbWVudCB3aGVuIGxlZ2FjeSBwYXRoIGRldGVjdGVkJywgKCkgPT4ge1xyXG4gICAgICAvLyBFbnN1cmUgd2UncmUgaW4gZGV2ZWxvcG1lbnQgbW9kZVxyXG4gICAgICBzZXRNb2NrRW52KHsgVklURV9XU19VUkw6IHVuZGVmaW5lZCwgREVWOiB0cnVlIH0pO1xyXG4gICAgICBcclxuICAgICAgLy8gVmVyaWZ5IERFViBpcyBzZXRcclxuICAgICAgZXhwZWN0KG1vY2tFbnYuREVWKS50b0JlKHRydWUpO1xyXG4gICAgICBcclxuICAgICAgLy8gTW9jayB0aGUgVVJMIGNvbnN0cnVjdG9yIHRvIHRocm93IGFuIGVycm9yIHRvIHRyaWdnZXIgZmFsbGJhY2tcclxuICAgICAgY29uc3Qgb3JpZ2luYWxVUkwgPSBnbG9iYWwuVVJMO1xyXG4gICAgICBjb25zdCBtb2NrVVJMID0gamVzdC5mbigpLm1vY2tJbXBsZW1lbnRhdGlvbigoKSA9PiB7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdNb2NrIFVSTCBjb25zdHJ1Y3RvciBlcnJvcicpO1xyXG4gICAgICB9KTtcclxuICAgICAgXHJcbiAgICAgIGdsb2JhbC5VUkwgPSBtb2NrVVJMIGFzIGFueTtcclxuICAgICAgXHJcbiAgICAgIHRyeSB7XHJcbiAgICAgICAgLy8gUGFzcyBhIGJhc2VVcmwgdGhhdCBjb250YWlucyBsZWdhY3kgcGF0aCAtIHRoaXMgd2lsbCB0cmlnZ2VyIGZhbGxiYWNrIHdpdGggbGVnYWN5IHBhdGhcclxuICAgICAgICBjb25zdCByZXN1bHQgPSBidWlsZFdlYlNvY2tldFVybCh7IFxyXG4gICAgICAgICAgY2xpZW50SWQ6ICd0ZXN0JyxcclxuICAgICAgICAgIGJhc2VVcmw6ICd3czovL2xvY2FsaG9zdDo4MDAwL2NsaWVudF8vd3MnXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgY29uc29sZS5sb2coJ0Z1bmN0aW9uIHJldHVybmVkOicsIHJlc3VsdCk7XHJcbiAgICAgICAgLy8gVGhlIGZ1bmN0aW9uIHNob3VsZCBoYXZlIGRldGVjdGVkIHRoZSBsZWdhY3kgcGF0aCBpbiBmYWxsYmFjayBhbmQgdGhyb3duIGFuIGVycm9yXHJcbiAgICAgICAgLy8gSWYgd2UgZ2V0IGhlcmUsIHNvbWV0aGluZyB3ZW50IHdyb25nXHJcbiAgICAgICAgZXhwZWN0KHJlc3VsdCkudG9Db250YWluKCdjbGllbnRfL3dzJyk7IC8vIFRoaXMgc2hvdWxkIHNob3cgdXMgd2hhdCB3YXMgYWN0dWFsbHkgcmV0dXJuZWRcclxuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICBleHBlY3QoKGVycm9yIGFzIEVycm9yKS5tZXNzYWdlKS50b0NvbnRhaW4oJ0xlZ2FjeSB3ZWJzb2NrZXQgcGF0aCBjb25zdHJ1Y3RlZCcpO1xyXG4gICAgICB9IGZpbmFsbHkge1xyXG4gICAgICAgIGdsb2JhbC5VUkwgPSBvcmlnaW5hbFVSTDtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgdGVzdCgnZ2VuZXJhdGVzIGNvcnJlY3QgY2Fub25pY2FsIFVSTHMnLCAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IHVybCA9IGJ1aWxkV2ViU29ja2V0VXJsKHtcclxuICAgICAgICBjbGllbnRJZDogJ3Rlc3QxMjMnLFxyXG4gICAgICAgIHJvbGU6ICdmcm9udGVuZCcsXHJcbiAgICAgICAgdmVyc2lvbjogMSxcclxuICAgICAgICBiYXNlVXJsOiAnd3M6Ly9sb2NhbGhvc3Q6ODAwMCdcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBleHBlY3QodXJsKS50b0JlKCd3czovL2xvY2FsaG9zdDo4MDAwL3dzL2NsaWVudD9jbGllbnRfaWQ9dGVzdDEyMyZ2ZXJzaW9uPTEmcm9sZT1mcm9udGVuZCcpO1xyXG4gICAgICBleHBlY3QodXJsKS50b0NvbnRhaW4oJy93cy9jbGllbnQ/Jyk7XHJcbiAgICAgIGV4cGVjdCh1cmwpLm5vdC50b0NvbnRhaW4oJ2NsaWVudF8vd3MnKTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG5cclxuICBkZXNjcmliZSgnRW52aXJvbm1lbnQgdmFyaWFibGUgc2FuaXRpemF0aW9uJywgKCkgPT4ge1xyXG4gICAgdGVzdCgnc2FuaXRpemVzIGxlZ2FjeSBwYXRoIGZyb20gVklURV9XU19VUkwgZW52aXJvbm1lbnQnLCAoKSA9PiB7XHJcbiAgICAgIC8vIFNldCBlbnZpcm9ubWVudCB3aXRoIGxlZ2FjeSBwYXRoXHJcbiAgICAgIHNldE1vY2tFbnYoeyBWSVRFX1dTX1VSTDogJ3dzOi8vbG9jYWxob3N0OjgwMDAvd3MvY2xpZW50Xy9sZWdhY3knIH0pO1xyXG4gICAgICBcclxuICAgICAgY29uc3QgYmFzZVVybCA9IHJlc29sdmVXZWJTb2NrZXRCYXNlKCk7XHJcbiAgICAgIGV4cGVjdChiYXNlVXJsKS5ub3QudG9Db250YWluKCdjbGllbnRfL3dzJyk7XHJcbiAgICAgIGV4cGVjdChiYXNlVXJsKS50b0JlKCd3czovL2xvY2FsaG9zdDo4MDAwJyk7XHJcbiAgICAgIFxyXG4gICAgICAvLyBTaG91bGQgbG9nIHdhcm5pbmcgYWJvdXQgbGVnYWN5IGVudmlyb25tZW50XHJcbiAgICAgIGV4cGVjdChjb25zb2xlLndhcm4pLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFxyXG4gICAgICAgIGV4cGVjdC5zdHJpbmdDb250YWluaW5nKCdbRW52RGlhZ11bTGVnYWN5SW5FbnZdJyksXHJcbiAgICAgICAgJ3dzOi8vbG9jYWxob3N0OjgwMDAvd3MvY2xpZW50Xy9sZWdhY3knXHJcbiAgICAgICk7XHJcbiAgICB9KTtcclxuXHJcbiAgICB0ZXN0KCdoYW5kbGVzIGVudmlyb25tZW50IHdpdGhvdXQgbGVnYWN5IHBhdGggY29ycmVjdGx5JywgKCkgPT4ge1xyXG4gICAgICBzZXRNb2NrRW52KHsgVklURV9XU19VUkw6ICd3czovL2xvY2FsaG9zdDo4MDAwJyB9KTtcclxuICAgICAgXHJcbiAgICAgIGNvbnN0IGJhc2VVcmwgPSByZXNvbHZlV2ViU29ja2V0QmFzZSgpO1xyXG4gICAgICBleHBlY3QoYmFzZVVybCkudG9CZSgnd3M6Ly9sb2NhbGhvc3Q6ODAwMCcpO1xyXG4gICAgICBleHBlY3QoY29uc29sZS53YXJuKS5ub3QudG9IYXZlQmVlbkNhbGxlZCgpO1xyXG4gICAgfSk7XHJcbiAgfSk7XHJcblxyXG4gIGRlc2NyaWJlKCdDbGllbnQgSUQgcGVyc2lzdGVuY2UnLCAoKSA9PiB7XHJcbiAgICB0ZXN0KCdjcmVhdGVzIGFuZCBwZXJzaXN0cyBuZXcgY2xpZW50IElEIHdoZW4gbm9uZSBleGlzdHMnLCAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IGNsaWVudElkID0gZ2V0T3JQZXJzaXN0Q2xpZW50SWQoJ3Rlc3Rfa2V5Jyk7XHJcbiAgICAgIFxyXG4gICAgICBleHBlY3QoY2xpZW50SWQpLnRvTWF0Y2goL15jbGllbnRfW2EtekEtWjAtOV17OX0kLyk7XHJcbiAgICAgIGV4cGVjdChnbG9iYWwubG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3Rlc3Rfa2V5JykpLnRvQmUoY2xpZW50SWQpO1xyXG4gICAgICBcclxuICAgICAgLy8gU2hvdWxkIGxvZyBkaWFnbm9zdGljIGluZm8gaW4gZGV2IG1vZGVcclxuICAgICAgZXhwZWN0KGNvbnNvbGUubG9nKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChcclxuICAgICAgICAnW0NsaWVudElkRGlhZ10nLFxyXG4gICAgICAgIGV4cGVjdC5vYmplY3RDb250YWluaW5nKHtcclxuICAgICAgICAgIGluaXRpYWxGcm9tU3RvcmFnZTogZmFsc2UsXHJcbiAgICAgICAgICBwYXNzZWRJbjogZmFsc2UsXHJcbiAgICAgICAgICBmaW5hbENsaWVudElkOiBjbGllbnRJZFxyXG4gICAgICAgIH0pXHJcbiAgICAgICk7XHJcbiAgICB9KTtcclxuXHJcbiAgICB0ZXN0KCdyZXVzZXMgZXhpc3RpbmcgY2xpZW50IElEIGZyb20gc3RvcmFnZScsICgpID0+IHtcclxuICAgICAgZ2xvYmFsLmxvY2FsU3RvcmFnZS5zZXRJdGVtKCdleGlzdGluZ19rZXknLCAnc3RvcmVkX2NsaWVudF9pZCcpO1xyXG4gICAgICBcclxuICAgICAgY29uc3QgY2xpZW50SWQgPSBnZXRPclBlcnNpc3RDbGllbnRJZCgnZXhpc3Rpbmdfa2V5Jyk7XHJcbiAgICAgIFxyXG4gICAgICBleHBlY3QoY2xpZW50SWQpLnRvQmUoJ3N0b3JlZF9jbGllbnRfaWQnKTtcclxuICAgICAgZXhwZWN0KGNvbnNvbGUubG9nKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChcclxuICAgICAgICAnW0NsaWVudElkRGlhZ10nLFxyXG4gICAgICAgIGV4cGVjdC5vYmplY3RDb250YWluaW5nKHtcclxuICAgICAgICAgIGluaXRpYWxGcm9tU3RvcmFnZTogdHJ1ZSxcclxuICAgICAgICAgIHBhc3NlZEluOiBmYWxzZSxcclxuICAgICAgICAgIGZpbmFsQ2xpZW50SWQ6ICdzdG9yZWRfY2xpZW50X2lkJ1xyXG4gICAgICAgIH0pXHJcbiAgICAgICk7XHJcbiAgICB9KTtcclxuXHJcbiAgICB0ZXN0KCdwcmVmZXJzIHBhc3NlZCBjbGllbnQgSUQgYnV0IHN0aWxsIHBlcnNpc3RzIGl0JywgKCkgPT4ge1xyXG4gICAgICBjb25zdCBwYXNzZWRJZCA9ICdjdXN0b21fY2xpZW50XzEyMyc7XHJcbiAgICAgIGNvbnN0IGNsaWVudElkID0gZ2V0T3JQZXJzaXN0Q2xpZW50SWQoJ3BlcnNpc3Rfa2V5JywgcGFzc2VkSWQpO1xyXG4gICAgICBcclxuICAgICAgZXhwZWN0KGNsaWVudElkKS50b0JlKHBhc3NlZElkKTtcclxuICAgICAgZXhwZWN0KGdsb2JhbC5sb2NhbFN0b3JhZ2UuZ2V0SXRlbSgncGVyc2lzdF9rZXknKSkudG9CZShwYXNzZWRJZCk7XHJcbiAgICB9KTtcclxuICB9KTtcclxuXHJcbiAgZGVzY3JpYmUoJ1VSTCB2YWxpZGF0aW9uJywgKCkgPT4ge1xyXG4gICAgdGVzdCgndmFsaWRhdGVXZWJTb2NrZXRVcmwgY29ycmVjdGx5IGlkZW50aWZpZXMgbGVnYWN5IFVSTHMnLCAoKSA9PiB7XHJcbiAgICAgIGV4cGVjdCh2YWxpZGF0ZVdlYlNvY2tldFVybCgnd3M6Ly9sb2NhbGhvc3Q6ODAwMC93cy9jbGllbnQnKSkudG9CZSh0cnVlKTtcclxuICAgICAgZXhwZWN0KHZhbGlkYXRlV2ViU29ja2V0VXJsKCd3czovL2xvY2FsaG9zdDo4MDAwL2NsaWVudF8vd3MvdGVzdCcpKS50b0JlKGZhbHNlKTtcclxuICAgICAgZXhwZWN0KHZhbGlkYXRlV2ViU29ja2V0VXJsKCd3c3M6Ly9wcm9kLmNvbS93cy9jbGllbnQ/aWQ9MTIzJykpLnRvQmUodHJ1ZSk7XHJcbiAgICAgIGV4cGVjdCh2YWxpZGF0ZVdlYlNvY2tldFVybCgnd3M6Ly9kZXYubG9jYWwvc29tZS9jbGllbnRfL3dzL3BhdGgnKSkudG9CZShmYWxzZSk7XHJcbiAgICB9KTtcclxuICB9KTtcclxuXHJcbiAgZGVzY3JpYmUoJ1JlY29ubmVjdGlvbiBiYWNrb2ZmIGNhcHBpbmcgaW50ZWdyYXRpb24nLCAoKSA9PiB7XHJcbiAgICB0ZXN0KCdtb2NrIHJlY29ubmVjdGlvbiBkZWxheSBzZXF1ZW5jZSBjYXBzIGF0IGV4cGVjdGVkIG1heCcsICgpID0+IHtcclxuICAgICAgLy8gVGhpcyB0ZXN0IG1vY2tzIHRoZSBiYWNrb2ZmIHN0cmF0ZWd5IHRvIHZlcmlmeSBtYXggZGVsYXlcclxuICAgICAgY29uc3QgZXhwZWN0ZWRNYXggPSAxNjAwMDtcclxuICAgICAgXHJcbiAgICAgIC8vIFNpbXVsYXRlIHNlcXVlbnRpYWwgZmFpbHVyZXNcclxuICAgICAgbGV0IGN1cnJlbnREZWxheSA9IDEwMDA7XHJcbiAgICAgIGNvbnN0IGRlbGF5U2VxdWVuY2U6IG51bWJlcltdID0gW107XHJcbiAgICAgIFxyXG4gICAgICAvLyBNb2NrIGV4cG9uZW50aWFsIGJhY2tvZmYgd2l0aCBjYXBcclxuICAgICAgZm9yIChsZXQgYXR0ZW1wdCA9IDA7IGF0dGVtcHQgPCA4OyBhdHRlbXB0KyspIHtcclxuICAgICAgICBkZWxheVNlcXVlbmNlLnB1c2goY3VycmVudERlbGF5KTtcclxuICAgICAgICBjdXJyZW50RGVsYXkgPSBNYXRoLm1pbihjdXJyZW50RGVsYXkgKiAyLCBleHBlY3RlZE1heCk7XHJcbiAgICAgIH1cclxuICAgICAgXHJcbiAgICAgIC8vIFZlcmlmeSBzZXF1ZW5jZSBjYXBzIGNvcnJlY3RseVxyXG4gICAgICBleHBlY3QoZGVsYXlTZXF1ZW5jZSkudG9FcXVhbChbMTAwMCwgMjAwMCwgNDAwMCwgODAwMCwgMTYwMDAsIDE2MDAwLCAxNjAwMCwgMTYwMDBdKTtcclxuICAgICAgZXhwZWN0KE1hdGgubWF4KC4uLmRlbGF5U2VxdWVuY2UpKS50b0JlKGV4cGVjdGVkTWF4KTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG5cclxuICBkZXNjcmliZSgnSW50ZWdyYXRpb24gd2l0aCBsZWdhY3kgZGV0ZWN0aW9uJywgKCkgPT4ge1xyXG4gICAgdGVzdCgnZnVsbCBVUkwgY29uc3RydWN0aW9uIGZsb3cgcHJldmVudHMgbGVnYWN5IHBhdGgnLCAoKSA9PiB7XHJcbiAgICAgIC8vIFRlc3QgY29tcGxldGUgZmxvdzogZW52IHJlc29sdXRpb24g4oaSIGNsaWVudCBJRCDihpIgVVJMIGJ1aWxkaW5nIOKGkiB2YWxpZGF0aW9uXHJcbiAgICAgIHNldE1vY2tFbnYoeyBWSVRFX1dTX1VSTDogJ3dzOi8vbG9jYWxob3N0OjgwMDAnIH0pOyAvLyBDbGVhbiBlbnZpcm9ubWVudFxyXG4gICAgICBcclxuICAgICAgY29uc3QgdXJsID0gYnVpbGRXZWJTb2NrZXRVcmwoKTtcclxuICAgICAgXHJcbiAgICAgIGV4cGVjdCh2YWxpZGF0ZVdlYlNvY2tldFVybCh1cmwpKS50b0JlKHRydWUpO1xyXG4gICAgICBleHBlY3QodXJsKS50b01hdGNoKC9ed3M6XFwvXFwvbG9jYWxob3N0OjgwMDBcXC93c1xcL2NsaWVudFxcP2NsaWVudF9pZD1jbGllbnRfW2EtekEtWjAtOV17OX0mdmVyc2lvbj0xJnJvbGU9ZnJvbnRlbmQkLyk7XHJcbiAgICAgIGV4cGVjdCh1cmwpLm5vdC50b0NvbnRhaW4oJ2NsaWVudF8vd3MnKTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG59KTsiXSwibWFwcGluZ3MiOiI7O0FBS0EsSUFBQUEsaUJBQUEsR0FBQUMsT0FBQTtBQUxBO0FBQ0E7QUFDQTtBQUNBOztBQVdBO0FBQ0EsSUFBSSxPQUFPQyxNQUFNLENBQUNDLE1BQU0sS0FBSyxXQUFXLEVBQUU7RUFDdkNELE1BQU0sQ0FBU0MsTUFBTSxHQUFHO0lBQ3ZCQyxZQUFZLEVBQUVGLE1BQU0sQ0FBQ0UsWUFBWTtJQUNqQ0MsUUFBUSxFQUFFO01BQ1JDLFFBQVEsRUFBRSxPQUFPO01BQ2pCQyxRQUFRLEVBQUUsV0FBVztNQUNyQkMsSUFBSSxFQUFFO0lBQ1I7RUFDRixDQUFDO0FBQ0gsQ0FBQyxNQUFNO0VBQ0w7RUFDQSxJQUFJLE9BQVFOLE1BQU0sQ0FBQ0MsTUFBTSxDQUFTQyxZQUFZLEtBQUssV0FBVyxFQUFFO0lBQzdERixNQUFNLENBQUNDLE1BQU0sQ0FBU0MsWUFBWSxHQUFHRixNQUFNLENBQUNFLFlBQVk7RUFDM0Q7QUFDRjtBQUVBSyxRQUFRLENBQUMsOEJBQThCLEVBQUUsTUFBTTtFQUU3Q0MsVUFBVSxDQUFDLE1BQU07SUFDZjtJQUNBUixNQUFNLENBQUNFLFlBQVksQ0FBQ08sS0FBSyxDQUFDLENBQUM7SUFDM0I7SUFDQSxJQUFBQyw0QkFBVSxFQUFDO01BQUVDLFdBQVcsRUFB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