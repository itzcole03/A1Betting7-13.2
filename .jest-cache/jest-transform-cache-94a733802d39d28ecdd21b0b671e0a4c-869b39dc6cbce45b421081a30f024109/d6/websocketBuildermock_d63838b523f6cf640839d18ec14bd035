4f8725a78c9c8a102e3275fdbd527af5
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.buildWebSocketUrl = buildWebSocketUrl;
exports.getOrPersistClientId = getOrPersistClientId;
exports.mockEnv = void 0;
exports.resolveWebSocketBase = resolveWebSocketBase;
exports.setMockEnv = setMockEnv;
exports.validateWebSocketUrl = validateWebSocketUrl;
/**
 * Mock websocket builder for Jest tests
 */

// Mock environment for testing
let mockEnv = exports.mockEnv = {
  VITE_WS_URL: undefined,
  DEV: true
};

// Test helper to set mock environment
function setMockEnv(env) {
  exports.mockEnv = mockEnv = {
    ...mockEnv,
    ...env
  };
  // Ensure DEV is always true in test environment
  if (typeof jest !== 'undefined' || process.env.NODE_ENV === 'test') {
    mockEnv.DEV = true;
  }
}

// Export mockEnv for testing

function getOrPersistClientId(storageKey = 'ws_client_id', passedClientId) {
  let clientId = passedClientId;

  // Try to get from storage first - check both window and global
  let storedClientId = null;
  try {
    if (typeof window !== 'undefined' && window.localStorage) {
      storedClientId = window.localStorage.getItem(storageKey);
    } else if (typeof global !== 'undefined' && global.localStorage) {
      storedClientId = global.localStorage.getItem(storageKey);
    }
  } catch {
    // Storage access failed, continue without it
  }
  const initialFromStorage = !!storedClientId;
  if (!clientId && storedClientId) {
    clientId = storedClientId;
  }

  // Generate new one if none available
  if (!clientId) {
    clientId = `client_${Math.random().toString(36).substr(2, 9)}`;
  }

  // Always persist to storage
  try {
    if (typeof window !== 'undefined' && window.localStorage) {
      window.localStorage.setItem(storageKey, clientId);
    } else if (typeof global !== 'undefined' && global.localStorage) {
      global.localStorage.setItem(storageKey, clientId);
    }
  } catch {
    // Storage access failed, continue without persistence
  }

  // Dev-only diagnostic log
  if (mockEnv.DEV) {
    // eslint-disable-next-line no-console
    console.log('[ClientIdDiag]', {
      initialFromStorage,
      passedIn: !!passedClientId,
      finalClientId: clientId
    });
  }
  return clientId;
}
function resolveWebSocketBase() {
  let baseUrl = mockEnv.VITE_WS_URL;

  // Check for legacy path in environment and sanitize
  if (baseUrl && baseUrl.includes('client_/')) {
    // eslint-disable-next-line no-console
    console.warn('[EnvDiag][LegacyInEnv] Legacy WebSocket path detected in environment, sanitizing:', baseUrl);
    baseUrl = baseUrl.replace(/\/ws\/client_.*$/, '').replace(/\/client_\/ws.*$/, '');
  }

  // Default fallback
  if (!baseUrl) {
    const protocol = 'ws:';
    const host = 'localhost';
    const port = '8000';
    baseUrl = `${protocol}//${host}:${port}`;
  }
  return baseUrl;
}
function buildWebSocketUrl(options = {}) {
  const {
    clientId: providedClientId,
    role = 'frontend',
    version = 1,
    baseUrl: providedBaseUrl
  } = options;

  // Resolve base URL
  const baseUrl = providedBaseUrl || resolveWebSocketBase();

  // Get or generate client ID
  const clientId = getOrPersistClientId('ws_client_id', providedClientId);
  try {
    // Use URL constructor for robust path building
    const url = new URL('/ws/client', baseUrl);
    url.searchParams.set('client_id', clientId);
    url.searchParams.set('version', String(version));
    url.searchParams.set('role', role);
    const result = url.toString();

    // Defensive assertion - dev only
    if (mockEnv.DEV) {
      if (result.includes('client_/ws')) {
        // eslint-disable-next-line no-console
        console.error('[WSBuildDiag][LegacyDetected]', {
          url: result,
          stack: new Error().stack
        });
        throw new Error('Legacy websocket path constructed after migration');
      }

      // eslint-disable-next-line no-console
      console.log('[WSBuildDiag] Built canonical WebSocket URL:', result);
    }
    return result;
  } catch (error) {
    // Fallback with defensive assertion
    const params = new URLSearchParams();
    params.set('client_id', clientId);
    params.set('version', String(version));
    params.set('role', role);
    const fallbackUrl = `${baseUrl}/ws/client?${params.toString()}`;

    // Defensive assertion on fallback too
    if (mockEnv.DEV && fallbackUrl.includes('client_/ws')) {
      // eslint-disable-next-line no-console
      console.error('[WSBuildDiag][LegacyDetected] Even fallback created legacy path!', {
        url: fallbackUrl,
        error,
        stack: new Error().stack
      });
      throw new Error('Legacy websocket path constructed in fallback after migration');
    }
    if (mockEnv.DEV) {
      // eslint-disable-next-line no-console
      console.warn('[WSBuildDiag] URL constructor failed, using fallback:', fallbackUrl, error);
    }
    return fallbackUrl;
  }
}
function validateWebSocketUrl(url) {
  return !url.includes('client_/ws');
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJtb2NrRW52IiwiZXhwb3J0cyIsIlZJVEVfV1NfVVJMIiwidW5kZWZpbmVkIiwiREVWIiwic2V0TW9ja0VudiIsImVudiIsImplc3QiLCJwcm9jZXNzIiwiTk9ERV9FTlYiLCJnZXRPclBlcnNpc3RDbGllbnRJZCIsInN0b3JhZ2VLZXkiLCJwYXNzZWRDbGllbnRJZCIsImNsaWVudElkIiwic3RvcmVkQ2xpZW50SWQiLCJ3aW5kb3ciLCJsb2NhbFN0b3JhZ2UiLCJnZXRJdGVtIiwiZ2xvYmFsIiwiaW5pdGlhbEZyb21TdG9yYWdlIiwiTWF0aCIsInJhbmRvbSIsInRvU3RyaW5nIiwic3Vic3RyIiwic2V0SXRlbSIsImNvbnNvbGUiLCJsb2ciLCJwYXNzZWRJbiIsImZpbmFsQ2xpZW50SWQiLCJyZXNvbHZlV2ViU29ja2V0QmFzZSIsImJhc2VVcmwiLCJpbmNsdWRlcyIsIndhcm4iLCJyZXBsYWNlIiwicHJvdG9jb2wiLCJob3N0IiwicG9ydCIsImJ1aWxkV2ViU29ja2V0VXJsIiwib3B0aW9ucyIsInByb3ZpZGVkQ2xpZW50SWQiLCJyb2xlIiwidmVyc2lvbiIsInByb3ZpZGVkQmFzZVVybCIsInVybCIsIlVSTCIsInNlYXJjaFBhcmFtcyIsInNldCIsIlN0cmluZyIsInJlc3VsdCIsImVycm9yIiwic3RhY2siLCJFcnJvciIsInBhcmFtcyIsIlVSTFNlYXJjaFBhcmFtcyIsImZhbGxiYWNrVXJsIiwidmFsaWRhdGVXZWJTb2NrZXRVcmwiXSwic291cmNlcyI6WyJ3ZWJzb2NrZXRCdWlsZGVyLm1vY2sudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXHJcbiAqIE1vY2sgd2Vic29ja2V0IGJ1aWxkZXIgZm9yIEplc3QgdGVzdHNcclxuICovXHJcblxyXG5pbnRlcmZhY2UgV2ViU29ja2V0VXJsT3B0aW9ucyB7XHJcbiAgY2xpZW50SWQ/OiBzdHJpbmc7XHJcbiAgcm9sZT86IHN0cmluZztcclxuICB2ZXJzaW9uPzogbnVtYmVyO1xyXG4gIGJhc2VVcmw/OiBzdHJpbmc7XHJcbn1cclxuXHJcbi8vIE1vY2sgZW52aXJvbm1lbnQgZm9yIHRlc3RpbmdcclxubGV0IG1vY2tFbnYgPSB7XHJcbiAgVklURV9XU19VUkw6IHVuZGVmaW5lZCBhcyBzdHJpbmcgfCB1bmRlZmluZWQsXHJcbiAgREVWOiB0cnVlXHJcbn07XHJcblxyXG4vLyBUZXN0IGhlbHBlciB0byBzZXQgbW9jayBlbnZpcm9ubWVudFxyXG5leHBvcnQgZnVuY3Rpb24gc2V0TW9ja0VudihlbnY6IFBhcnRpYWw8dHlwZW9mIG1vY2tFbnY+KSB7XHJcbiAgbW9ja0VudiA9IHsgLi4ubW9ja0VudiwgLi4uZW52IH07XHJcbiAgLy8gRW5zdXJlIERFViBpcyBhbHdheXMgdHJ1ZSBpbiB0ZXN0IGVudmlyb25tZW50XHJcbiAgaWYgKHR5cGVvZiBqZXN0ICE9PSAndW5kZWZpbmVkJyB8fCBwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ3Rlc3QnKSB7XHJcbiAgICBtb2NrRW52LkRFViA9IHRydWU7XHJcbiAgfVxyXG59XHJcblxyXG4vLyBFeHBvcnQgbW9ja0VudiBmb3IgdGVzdGluZ1xyXG5leHBvcnQgeyBtb2NrRW52IH07XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZ2V0T3JQZXJzaXN0Q2xpZW50SWQoc3RvcmFnZUtleSA9ICd3c19jbGllbnRfaWQnLCBwYXNzZWRDbGllbnRJZD86IHN0cmluZyk6IHN0cmluZyB7XHJcbiAgbGV0IGNsaWVudElkID0gcGFzc2VkQ2xpZW50SWQ7XHJcbiAgXHJcbiAgLy8gVHJ5IHRvIGdldCBmcm9tIHN0b3JhZ2UgZmlyc3QgLSBjaGVjayBib3RoIHdpbmRvdyBhbmQgZ2xvYmFsXHJcbiAgbGV0IHN0b3JlZENsaWVudElkOiBzdHJpbmcgfCBudWxsID0gbnVsbDtcclxuICB0cnkge1xyXG4gICAgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmIHdpbmRvdy5sb2NhbFN0b3JhZ2UpIHtcclxuICAgICAgc3RvcmVkQ2xpZW50SWQgPSB3aW5kb3cubG9jYWxTdG9yYWdlLmdldEl0ZW0oc3RvcmFnZUtleSk7XHJcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiBnbG9iYWwgIT09ICd1bmRlZmluZWQnICYmIGdsb2JhbC5sb2NhbFN0b3JhZ2UpIHtcclxuICAgICAgc3RvcmVkQ2xpZW50SWQgPSBnbG9iYWwubG9jYWxTdG9yYWdlLmdldEl0ZW0oc3RvcmFnZUtleSk7XHJcbiAgICB9XHJcbiAgfSBjYXRjaCB7XHJcbiAgICAvLyBTdG9yYWdlIGFjY2VzcyBmYWlsZWQsIGNvbnRpbnVlIHdpdGhvdXQgaXRcclxuICB9XHJcbiAgXHJcbiAgY29uc3QgaW5pdGlhbEZyb21TdG9yYWdlID0gISFzdG9yZWRDbGllbnRJZDtcclxuICBcclxuICBpZiAoIWNsaWVudElkICYmIHN0b3JlZENsaWVudElkKSB7XHJcbiAgICBjbGllbnRJZCA9IHN0b3JlZENsaWVudElkO1xyXG4gIH1cclxuICBcclxuICAvLyBHZW5lcmF0ZSBuZXcgb25lIGlmIG5vbmUgYXZhaWxhYmxlXHJcbiAgaWYgKCFjbGllbnRJZCkge1xyXG4gICAgY2xpZW50SWQgPSBgY2xpZW50XyR7TWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc3Vic3RyKDIsIDkpfWA7XHJcbiAgfVxyXG4gIFxyXG4gIC8vIEFsd2F5cyBwZXJzaXN0IHRvIHN0b3JhZ2VcclxuICB0cnkge1xyXG4gICAgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmIHdpbmRvdy5sb2NhbFN0b3JhZ2UpIHtcclxuICAgICAgd2luZG93LmxvY2FsU3RvcmFnZS5zZXRJdGVtKHN0b3JhZ2VLZXksIGNsaWVudElkKTtcclxuICAgIH0gZWxzZSBpZiAodHlwZW9mIGdsb2JhbCAhPT0gJ3VuZGVmaW5lZCcgJiYgZ2xvYmFsLmxvY2FsU3RvcmFnZSkge1xyXG4gICAgICBnbG9iYWwubG9jYWxTdG9yYWdlLnNldEl0ZW0oc3RvcmFnZUtleSwgY2xpZW50SWQpO1xyXG4gICAgfVxyXG4gIH0gY2F0Y2gge1xyXG4gICAgLy8gU3RvcmFnZSBhY2Nlc3MgZmFpbGVkLCBjb250aW51ZSB3aXRob3V0IHBlcnNpc3RlbmNlXHJcbiAgfVxyXG4gIFxyXG4gIC8vIERldi1vbmx5IGRpYWdub3N0aWMgbG9nXHJcbiAgaWYgKG1vY2tFbnYuREVWKSB7XHJcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY29uc29sZVxyXG4gICAgY29uc29sZS5sb2coJ1tDbGllbnRJZERpYWddJywge1xyXG4gICAgICBpbml0aWFsRnJvbVN0b3JhZ2UsXHJcbiAgICAgIHBhc3NlZEluOiAhIXBhc3NlZENsaWVudElkLFxyXG4gICAgICBmaW5hbENsaWVudElkOiBjbGllbnRJZFxyXG4gICAgfSk7XHJcbiAgfVxyXG4gIFxyXG4gIHJldHVybiBjbGllbnRJZDtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHJlc29sdmVXZWJTb2NrZXRCYXNlKCk6IHN0cmluZyB7XHJcbiAgbGV0IGJhc2VVcmwgPSBtb2NrRW52LlZJVEVfV1NfVVJMO1xyXG4gIFxyXG4gIC8vIENoZWNrIGZvciBsZWdhY3kgcGF0aCBpbiBlbnZpcm9ubWVudCBhbmQgc2FuaXRpemVcclxuICBpZiAoYmFzZVVybCAmJiBiYXNlVXJsLmluY2x1ZGVzKCdjbGllbnRfLycpKSB7XHJcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY29uc29sZVxyXG4gICAgY29uc29sZS53YXJuKCdbRW52RGlhZ11bTGVnYWN5SW5FbnZdIExlZ2FjeSBXZWJTb2NrZXQgcGF0aCBkZXRlY3RlZCBpbiBlbnZpcm9ubWVudCwgc2FuaXRpemluZzonLCBiYXNlVXJsKTtcclxuICAgIGJhc2VVcmwgPSBiYXNlVXJsLnJlcGxhY2UoL1xcL3dzXFwvY2xpZW50Xy4qJC8sICcnKS5yZXBsYWNlKC9cXC9jbGllbnRfXFwvd3MuKiQvLCAnJyk7XHJcbiAgfVxyXG4gIFxyXG4gIC8vIERlZmF1bHQgZmFsbGJhY2tcclxuICBpZiAoIWJhc2VVcmwpIHtcclxuICAgIGNvbnN0IHByb3RvY29sID0gJ3dzOic7XHJcbiAgICBjb25zdCBob3N0ID0gJ2xvY2FsaG9zdCc7XHJcbiAgICBjb25zdCBwb3J0ID0gJzgwMDAnO1xyXG4gICAgYmFzZVVybCA9IGAke3Byb3RvY29sfS8vJHtob3N0fToke3BvcnR9YDtcclxuICB9XHJcbiAgXHJcbiAgcmV0dXJuIGJhc2VVcmw7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBidWlsZFdlYlNvY2tldFVybChvcHRpb25zOiBXZWJTb2NrZXRVcmxPcHRpb25zID0ge30pOiBzdHJpbmcge1xyXG4gIGNvbnN0IHtcclxuICAgIGNsaWVudElkOiBwcm92aWRlZENsaWVudElkLFxyXG4gICAgcm9sZSA9ICdmcm9udGVuZCcsXHJcbiAgICB2ZXJzaW9uID0gMSxcclxuICAgIGJhc2VVcmw6IHByb3ZpZGVkQmFzZVVybFxyXG4gIH0gPSBvcHRpb25zO1xyXG4gIFxyXG4gIC8vIFJlc29sdmUgYmFzZSBVUkxcclxuICBjb25zdCBiYXNlVXJsID0gcHJvdmlkZWRCYXNlVXJsIHx8IHJlc29sdmVXZWJTb2NrZXRCYXNlKCk7XHJcbiAgXHJcbiAgLy8gR2V0IG9yIGdlbmVyYXRlIGNsaWVudCBJRFxyXG4gIGNvbnN0IGNsaWVudElkID0gZ2V0T3JQZXJzaXN0Q2xpZW50SWQoJ3dzX2NsaWVudF9pZCcsIHByb3ZpZGVkQ2xpZW50SWQpO1xyXG4gIFxyXG4gIHRyeSB7XHJcbiAgICAvLyBVc2UgVVJMIGNvbnN0cnVjdG9yIGZvciByb2J1c3QgcGF0aCBidWlsZGluZ1xyXG4gICAgY29uc3QgdXJsID0gbmV3IFVSTCgnL3dzL2NsaWVudCcsIGJhc2VVcmwpO1xyXG4gICAgdXJsLnNlYXJjaFBhcmFtcy5zZXQoJ2NsaWVudF9pZCcsIGNsaWVudElkKTtcclxuICAgIHVybC5zZWFyY2hQYXJhbXMuc2V0KCd2ZXJzaW9uJywgU3RyaW5nKHZlcnNpb24pKTtcclxuICAgIHVybC5zZWFyY2hQYXJhbXMuc2V0KCdyb2xlJywgcm9sZSk7XHJcbiAgICBcclxuICAgIGNvbnN0IHJlc3VsdCA9IHVybC50b1N0cmluZygpO1xyXG4gICAgXHJcbiAgICAvLyBEZWZlbnNpdmUgYXNzZXJ0aW9uIC0gZGV2IG9ubHlcclxuICAgIGlmIChtb2NrRW52LkRFVikge1xyXG4gICAgICBpZiAocmVzdWx0LmluY2x1ZGVzKCdjbGllbnRfL3dzJykpIHtcclxuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY29uc29sZVxyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ1tXU0J1aWxkRGlhZ11bTGVnYWN5RGV0ZWN0ZWRdJywgeyBcclxuICAgICAgICAgIHVybDogcmVzdWx0LCBcclxuICAgICAgICAgIHN0YWNrOiBuZXcgRXJyb3IoKS5zdGFjayBcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0xlZ2FjeSB3ZWJzb2NrZXQgcGF0aCBjb25zdHJ1Y3RlZCBhZnRlciBtaWdyYXRpb24nKTtcclxuICAgICAgfVxyXG4gICAgICBcclxuICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbnNvbGVcclxuICAgICAgY29uc29sZS5sb2coJ1tXU0J1aWxkRGlhZ10gQnVpbHQgY2Fub25pY2FsIFdlYlNvY2tldCBVUkw6JywgcmVzdWx0KTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgcmV0dXJuIHJlc3VsdDtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgLy8gRmFsbGJhY2sgd2l0aCBkZWZlbnNpdmUgYXNzZXJ0aW9uXHJcbiAgICBjb25zdCBwYXJhbXMgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKCk7XHJcbiAgICBwYXJhbXMuc2V0KCdjbGllbnRfaWQnLCBjbGllbnRJZCk7XHJcbiAgICBwYXJhbXMuc2V0KCd2ZXJzaW9uJywgU3RyaW5nKHZlcnNpb24pKTtcclxuICAgIHBhcmFtcy5zZXQoJ3JvbGUnLCByb2xlKTtcclxuICAgIFxyXG4gICAgY29uc3QgZmFsbGJhY2tVcmwgPSBgJHtiYXNlVXJsfS93cy9jbGllbnQ/JHtwYXJhbXMudG9TdHJpbmcoKX1gO1xyXG4gICAgXHJcbiAgICAvLyBEZWZlbnNpdmUgYXNzZXJ0aW9uIG9uIGZhbGxiYWNrIHRvb1xyXG4gICAgaWYgKG1vY2tFbnYuREVWICYmIGZhbGxiYWNrVXJsLmluY2x1ZGVzKCdjbGllbnRfL3dzJykpIHtcclxuICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbnNvbGVcclxuICAgICAgY29uc29sZS5lcnJvcignW1dTQnVpbGREaWFnXVtMZWdhY3lEZXRlY3RlZF0gRXZlbiBmYWxsYmFjayBjcmVhdGVkIGxlZ2FjeSBwYXRoIScsIHsgXHJcbiAgICAgICAgdXJsOiBmYWxsYmFja1VybCwgXHJcbiAgICAgICAgZXJyb3IsXHJcbiAgICAgICAgc3RhY2s6IG5ldyBFcnJvcigpLnN0YWNrIFxyXG4gICAgICB9KTtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKCdMZWdhY3kgd2Vic29ja2V0IHBhdGggY29uc3RydWN0ZWQgaW4gZmFsbGJhY2sgYWZ0ZXIgbWlncmF0aW9uJyk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIGlmIChtb2NrRW52LkRFVikge1xyXG4gICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY29uc29sZVxyXG4gICAgICBjb25zb2xlLndhcm4oJ1tXU0J1aWxkRGlhZ10gVVJMIGNvbnN0cnVjdG9yIGZhaWxlZCwgdXNpbmcgZmFsbGJhY2s6JywgZmFsbGJhY2tVcmwsIGVycm9yKTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgcmV0dXJuIGZhbGxiYWNrVXJsO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHZhbGlkYXRlV2ViU29ja2V0VXJsKHVybDogc3RyaW5nKTogYm9vbGVhbiB7XHJcbiAgcmV0dXJuICF1cmwuaW5jbHVkZXMoJ2NsaWVudF8vd3MnKTtcclxufSJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7O0FBU0E7QUFDQSxJQUFJQSxPQUFPLEdBQUFDLE9BQUEsQ0FBQUQs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