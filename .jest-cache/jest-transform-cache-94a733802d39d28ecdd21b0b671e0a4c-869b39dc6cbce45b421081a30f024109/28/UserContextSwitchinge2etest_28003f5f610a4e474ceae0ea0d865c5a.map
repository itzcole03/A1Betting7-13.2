{"version":3,"names":["_react","_interopRequireDefault","require","_react2","_reactRouterDom","_UserFriendlyApp","_jsxRuntime","describe","beforeEach","localStorage","setItem","JSON","stringify","id","email","role","permissions","it","render","jsx","MemoryRouter","children","default","expect","screen","findByText","content","node","text","textContent","test","toBeInTheDocument","switchUserButton","findByRole","name","act","click","waitFor","getByText"],"sources":["UserContextSwitching.e2e.test.tsx"],"sourcesContent":["import React from 'react';\r\nimport { act, render, screen, waitFor } from '@testing-library/react';\r\nimport { MemoryRouter } from 'react-router-dom';\r\nimport UserFriendlyApp from '../components/user-friendly/UserFriendlyApp';\r\n\r\ndescribe('User Context Switching E2E', () => {\r\n  beforeEach(() => {\r\n    localStorage.setItem('onboardingComplete', 'true');\r\n    localStorage.setItem('token', 'test-token');\r\n    localStorage.setItem(\r\n      'user',\r\n      JSON.stringify({\r\n        id: 'test-user',\r\n        email: 'test@example.com',\r\n        role: 'admin',\r\n        permissions: ['admin'],\r\n      })\r\n    );\r\n  });\r\n\r\n  it('switches user context and updates permissions', async () => {\r\n    render(\r\n      <MemoryRouter>\r\n        <UserFriendlyApp />\r\n      </MemoryRouter>\r\n    );\r\n    // Wait for admin dashboard (robust matcher for split/nested nodes)\r\n    expect(\r\n      await screen.findByText((content, node) => {\r\n        const text = node?.textContent || '';\r\n        return /Admin Dashboard|User Management/i.test(text);\r\n      })\r\n    ).toBeInTheDocument();\r\n    // Simulate switching to user role\r\n    const switchUserButton = await screen.findByRole('button', { name: /Switch to User/i });\r\n    act(() => {\r\n      switchUserButton.click();\r\n    });\r\n    await waitFor(() => {\r\n      expect(screen.getByText(/User Dashboard|Betting Interface/i)).toBeInTheDocument();\r\n    });\r\n  });\r\n});\r\n"],"mappings":";;;AAAA,IAAAA,MAAA,GAAAC,sBAAA,CAAAC,OAAA;AACA,IAAAC,OAAA,GAAAD,OAAA;AACA,IAAAE,eAAA,GAAAF,OAAA;AACA,IAAAG,gBAAA,GAAAJ,sBAAA,CAAAC,OAAA;AAA0E,IAAAI,WAAA,GAAAJ,OAAA;AAE1EK,QAAQ,CAAC,4BAA4B,EAAE,MAAM;EAC3CC,UAAU,CAAC,MAAM;IACfC,YAAY,CAACC,OAAO,CAAC,oBAAoB,EAAE,MAAM,CAAC;IAClDD,YAAY,CAACC,OAAO,CAAC,OAAO,EAAE,YAAY,CAAC;IAC3CD,YAAY,CAACC,OAAO,CAClB,MAAM,EACNC,IAAI,CAACC,SAAS,CAAC;MACbC,EAAE,EAAE,WAAW;MACfC,KAAK,EAAE,kBAAkB;MACzBC,IAAI,EAAE,OAAO;MACbC,WAAW,EAAE,CAAC,OAAO;IACvB,CAAC,CACH,CAAC;EACH,CAAC,CAAC;EAEFC,EAAE,CAAC,+CAA+C,EAAE,YAAY;IAC9D,IAAAC,cAAM,eACJ,IAAAZ,WAAA,CAAAa,GAAA,EAACf,eAAA,CAAAgB,YAAY;MAAAC,QAAA,eACX,IAAAf,WAAA,CAAAa,GAAA,EAACd,gBAAA,CAAAiB,OAAe,IAAE;IAAC,CACP,CAChB,CAAC;IACD;IACAC,MAAM,CACJ,MAAMC,cAAM,CAACC,UAAU,CAAC,CAACC,OAAO,EAAEC,IAAI,KAAK;MACzC,MAAMC,IAAI,GAAGD,IAAI,EAAEE,WAAW,IAAI,EAAE;MACpC,OAAO,kCAAkC,CAACC,IAAI,CAACF,IAAI,CAAC;IACtD,CAAC,CACH,CAAC,CAACG,iBAAiB,CAAC,CAAC;IACrB;IACA,MAAMC,gBAAgB,GAAG,MAAMR,cAAM,CAACS,UAAU,CAAC,QAAQ,EAAE;MAAEC,IAAI,EAAE;IAAkB,CAAC,CAAC;IACvF,IAAAC,WAAG,EAAC,MAAM;MACRH,gBAAgB,CAACI,KAAK,CAAC,CAAC;IAC1B,CAAC,CAAC;IACF,MAAM,IAAAC,eAAO,EAAC,MAAM;MAClBd,MAAM,CAACC,cAAM,CAACc,SAAS,CAAC,mCAAmC,CAAC,CAAC,CAACP,iBAAiB,CAAC,CAAC;IACnF,CAAC,CAAC;EACJ,CAAC,CAAC;AACJ,CAAC,CAAC","ignoreList":[]}