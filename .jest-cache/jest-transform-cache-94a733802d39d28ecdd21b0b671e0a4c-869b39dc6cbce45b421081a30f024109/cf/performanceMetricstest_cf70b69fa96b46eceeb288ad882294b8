f44b01384eb7350243f4ffe6ad2647ba
"use strict";

// Mock web-vitals module
_getJestObj().mock('web-vitals', () => ({
  onCLS: jest.fn(),
  onINP: jest.fn(),
  onLCP: jest.fn(),
  onFCP: jest.fn(),
  onTTFB: jest.fn()
}));
var _performanceMetrics = require("../performanceMetrics");
function _getJestObj() {
  const {
    jest
  } = require("@jest/globals");
  _getJestObj = () => jest;
  return jest;
}
describe('Performance Metrics', () => {
  let mockPerformance;
  beforeEach(() => {
    // Reset guards before each test
    (0, _performanceMetrics.__resetPerformanceGuardsForTests)();

    // Create mock performance object
    mockPerformance = {
      getEntriesByType: jest.fn(),
      now: jest.fn()
    };

    // Replace global performance
    Object.defineProperty(window, 'performance', {
      value: mockPerformance,
      writable: true
    });
    jest.clearAllMocks();
  });
  afterEach(() => {
    jest.restoreAllMocks();
  });
  describe('getNavigationTiming', () => {
    it('should return positive totalLoadTime from PerformanceNavigationTiming', () => {
      const mockNavEntry = {
        startTime: 0,
        duration: 1234.5,
        domContentLoadedEventEnd: 800,
        type: 'navigate'
      };
      mockPerformance.getEntriesByType.mockReturnValue([mockNavEntry]);
      const result = (0, _performanceMetrics.getNavigationTiming)();
      expect(result).toEqual({
        startTime: 0,
        domContentLoaded: 800,
        firstPaint: undefined,
        firstContentfulPaint: undefined,
        totalLoadTime: 1234.5,
        type: 'navigate',
        timestamp: expect.any(Number),
        source: 'navigation-timing'
      });
      expect(result.totalLoadTime).toBeGreaterThan(0);
    });
    it('should clamp negative duration to 0', () => {
      const mockNavEntry = {
        startTime: 0,
        duration: -1000,
        // This should never happen, but let's test robustness
        domContentLoadedEventEnd: 500,
        type: 'navigate'
      };
      mockPerformance.getEntriesByType.mockReturnValue([mockNavEntry]);
      const result = (0, _performanceMetrics.getNavigationTiming)();
      expect(result.totalLoadTime).toBe(0);
      expect(result.source).toBe('navigation-timing');
    });
    it('should fallback to legacy timing when modern API unavailable', () => {
      // Mock no modern navigation entries
      mockPerformance.getEntriesByType.mockReturnValue([]);

      // Mock legacy timing
      const mockTiming = {
        navigationStart: 1000000,
        domContentLoadedEventEnd: 1001000,
        loadEventEnd: 1001500
      };
      Object.defineProperty(mockPerformance, 'timing', {
        value: mockTiming,
        writable: true
      });
      const result = (0, _performanceMetrics.getNavigationTiming)();
      expect(result).toEqual({
        startTime: 0,
        domContentLoaded: 1000,
        firstPaint: undefined,
        firstContentfulPaint: undefined,
        totalLoadTime: 1500,
        type: 'navigate',
        timestamp: expect.any(Number),
        source: 'legacy-timing'
      });
    });
    it('should return null when no timing APIs available', () => {
      mockPerformance.getEntriesByType.mockReturnValue([]);
      const result = (0, _performanceMetrics.getNavigationTiming)();
      expect(result).toBeNull();
    });
    it('should handle exceptions gracefully', () => {
      mockPerformance.getEntriesByType.mockImplementation(() => {
        throw new Error('API error');
      });
      const result = (0, _performanceMetrics.getNavigationTiming)();
      expect(result).toBeNull();
    });
  });
  describe('initWebVitals', () => {
    const {
      onCLS,
      onINP,
      onLCP,
      onFCP,
      onTTFB
    } = require('web-vitals');
    let mockOnMetric;
    beforeEach(() => {
      mockOnMetric = jest.fn();
      onCLS.mockClear();
      onINP.mockClear();
      onLCP.mockClear();
      onFCP.mockClear();
      onTTFB.mockClear();
    });
    it('should initialize web vitals only once by default', () => {
      const result1 = (0, _performanceMetrics.initWebVitals)({
        onMetric: mockOnMetric
      });
      const result2 = (0, _performanceMetrics.initWebVitals)({
        onMetric: mockOnMetric
      });
      expect(result1).toBe(true); // First initialization
      expect(result2).toBe(false); // Second call should be ignored

      // Should only register listeners once
      expect(onLCP).toHaveBeenCalledTimes(1);
      expect(onCLS).toHaveBeenCalledTimes(1);
    });
    it('should allow re-initialization when force=true', () => {
      (0, _performanceMetrics.initWebVitals)({
        onMetric: mockOnMetric
      });
      const result = (0, _performanceMetrics.initWebVitals)({
        onMetric: mockOnMetric,
        force: true
      });
      expect(result).toBe(true);
      expect(onLCP).toHaveBeenCalledTimes(2);
    });
    it('should prevent duplicate LCP emissions', () => {
      (0, _performanceMetrics.initWebVitals)({
        onMetric: mockOnMetric
      });

      // Simulate LCP callbacks
      const lcpCallback = onLCP.mock.calls[0][0];
      lcpCallback({
        name: 'LCP',
        value: 1000,
        rating: 'good'
      });
      lcpCallback({
        name: 'LCP',
        value: 1200,
        rating: 'needs-improvement'
      });

      // Should only call onMetric once for LCP
      const lcpCalls = mockOnMetric.mock.calls.filter(call => call[0].name === 'LCP');
      expect(lcpCalls).toHaveLength(1);
      expect(lcpCalls[0][0].value).toBe(1000);
    });
    it('should clamp negative metric values to 0', () => {
      (0, _performanceMetrics.initWebVitals)({
        onMetric: mockOnMetric
      });
      const clsCallback = onCLS.mock.calls[0][0];
      clsCallback({
        name: 'CLS',
        value: -0.5
      }); // Negative CLS shouldn't happen but test robustness

      expect(mockOnMetric).toHaveBeenCalledWith(expect.objectContaining({
        name: 'CLS',
        value: 0
      }));
    });
    it('should include navigation metrics when requested', () => {
      const mockNavEntry = {
        startTime: 0,
        duration: 1500,
        domContentLoadedEventEnd: 1000,
        type: 'navigate'
      };
      mockPerformance.getEntriesByType.mockReturnValue([mockNavEntry]);
      (0, _performanceMetrics.initWebVitals)({
        onMetric: mockOnMetric,
        includeNavigationMetrics: true
      });

      // Should emit navigation metrics
      expect(mockOnMetric).toHaveBeenCalledWith(expect.objectContaining({
        name: 'navigation-total-load-time',
        value: 1500
      }));
      expect(mockOnMetric).toHaveBeenCalledWith(expect.objectContaining({
        name: 'navigation-dom-content-loaded',
        value: 1000
      }));
    });
    it('should work without onMetric callback', () => {
      expect(() => {
        (0, _performanceMetrics.initWebVitals)({});
      }).not.toThrow();
    });
    it('should add navigation type to web vital records', () => {
      const mockNavEntry = {
        type: 'reload'
      };
      mockPerformance.getEntriesByType.mockReturnValue([mockNavEntry]);
      (0, _performanceMetrics.initWebVitals)({
        onMetric: mockOnMetric
      });

      // Trigger a metric callback
      const fcpCallback = onFCP.mock.calls[0][0];
      fcpCallback({
        name: 'FCP',
        value: 800
      });
      expect(mockOnMetric).toHaveBeenCalledWith(expect.objectContaining({
        navigationType: 'reload',
        timestamp: expect.any(Number)
      }));
    });
  });
  describe('Performance timing edge cases', () => {
    it('should handle undefined/null duration values', () => {
      const mockNavEntry = {
        startTime: 0,
        duration: undefined,
        domContentLoadedEventEnd: 500,
        type: 'navigate'
      };
      mockPerformance.getEntriesByType.mockReturnValue([mockNavEntry]);
      const result = (0, _performanceMetrics.getNavigationTiming)();
      expect(result.totalLoadTime).toBe(0);
    });
    it('should handle infinite duration values', () => {
      const mockNavEntry = {
        startTime: 0,
        duration: Infinity,
        domContentLoadedEventEnd: 500,
        type: 'navigate'
      };
      mockPerformance.getEntriesByType.mockReturnValue([mockNavEntry]);
      const result = (0, _performanceMetrics.getNavigationTiming)();
      expect(result.totalLoadTime).toBe(0);
    });
    it('should handle NaN duration values', () => {
      const mockNavEntry = {
        startTime: 0,
        duration: NaN,
        domContentLoadedEventEnd: 500,
        type: 'navigate'
      };
      mockPerformance.getEntriesByType.mockReturnValue([mockNavEntry]);
      const result = (0, _performanceMetrics.getNavigationTiming)();
      expect(result.totalLoadTime).toBe(0);
    });
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfZ2V0SmVzdE9iaiIsIm1vY2siLCJvbkNMUyIsImplc3QiLCJmbiIsIm9uSU5QIiwib25MQ1AiLCJvbkZDUCIsIm9uVFRGQiIsIl9wZXJmb3JtYW5jZU1ldHJpY3MiLCJyZXF1aXJlIiwiZGVzY3JpYmUiLCJtb2NrUGVyZm9ybWFuY2UiLCJiZWZvcmVFYWNoIiwiX19yZXNldFBlcmZvcm1hbmNlR3VhcmRzRm9yVGVzdHMiLCJnZXRFbnRyaWVzQnlUeXBlIiwibm93IiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJ3aW5kb3ciLCJ2YWx1ZSIsIndyaXRhYmxlIiwiY2xlYXJBbGxNb2NrcyIsImFmdGVyRWFjaCIsInJlc3RvcmVBbGxNb2NrcyIsIml0IiwibW9ja05hdkVudHJ5Iiwic3RhcnRUaW1lIiwiZHVyYXRpb24iLCJkb21Db250ZW50TG9hZGVkRXZlbnRFbmQiLCJ0eXBlIiwibW9ja1JldHVyblZhbHVlIiwicmVzdWx0IiwiZ2V0TmF2aWdhdGlvblRpbWluZyIsImV4cGVjdCIsInRvRXF1YWwiLCJkb21Db250ZW50TG9hZGVkIiwiZmlyc3RQYWludCIsInVuZGVmaW5lZCIsImZpcnN0Q29udGVudGZ1bFBhaW50IiwidG90YWxMb2FkVGltZSIsInRpbWVzdGFtcCIsImFueSIsIk51bWJlciIsInNvdXJjZSIsInRvQmVHcmVhdGVyVGhhbiIsInRvQmUiLCJtb2NrVGltaW5nIiwibmF2aWdhdGlvblN0YXJ0IiwibG9hZEV2ZW50RW5kIiwidG9CZU51bGwiLCJtb2NrSW1wbGVtZW50YXRpb24iLCJFcnJvciIsIm1vY2tPbk1ldHJpYyIsIm1vY2tDbGVhciIsInJlc3VsdDEiLCJpbml0V2ViVml0YWxzIiwib25NZXRyaWMiLCJyZXN1bHQyIiwidG9IYXZlQmVlbkNhbGxlZFRpbWVzIiwiZm9yY2UiLCJsY3BDYWxsYmFjayIsImNhbGxzIiwibmFtZSIsInJhdGluZyIsImxjcENhbGxzIiwiZmlsdGVyIiwiY2FsbCIsInRvSGF2ZUxlbmd0aCIsImNsc0NhbGxiYWNrIiwidG9IYXZlQmVlbkNhbGxlZFdpdGgiLCJvYmplY3RDb250YWluaW5nIiwiaW5jbHVkZU5hdmlnYXRpb25NZXRyaWNzIiwibm90IiwidG9UaHJvdyIsImZjcENhbGxiYWNrIiwibmF2aWdhdGlvblR5cGUiLCJJbmZpbml0eSIsIk5hTiJdLCJzb3VyY2VzIjpbInBlcmZvcm1hbmNlTWV0cmljcy50ZXN0LnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFxyXG4gIGdldE5hdmlnYXRpb25UaW1pbmcsIFxyXG4gIGluaXRXZWJWaXRhbHMsIFxyXG4gIF9fcmVzZXRQZXJmb3JtYW5jZUd1YXJkc0ZvclRlc3RzLFxyXG4gIE5hdmlnYXRpb25UaW1pbmdNZXRyaWNzLFxyXG4gIFdlYlZpdGFsTWV0cmljUmVjb3JkIFxyXG59IGZyb20gJy4uL3BlcmZvcm1hbmNlTWV0cmljcyc7XHJcblxyXG4vLyBNb2NrIHdlYi12aXRhbHMgbW9kdWxlXHJcbmplc3QubW9jaygnd2ViLXZpdGFscycsICgpID0+ICh7XHJcbiAgb25DTFM6IGplc3QuZm4oKSxcclxuICBvbklOUDogamVzdC5mbigpLCBcclxuICBvbkxDUDogamVzdC5mbigpLFxyXG4gIG9uRkNQOiBqZXN0LmZuKCksXHJcbiAgb25UVEZCOiBqZXN0LmZuKCksXHJcbn0pKTtcclxuXHJcbmRlc2NyaWJlKCdQZXJmb3JtYW5jZSBNZXRyaWNzJywgKCkgPT4ge1xyXG4gIGxldCBtb2NrUGVyZm9ybWFuY2U6IGplc3QuTW9ja2VkPFBlcmZvcm1hbmNlPjtcclxuXHJcbiAgYmVmb3JlRWFjaCgoKSA9PiB7XHJcbiAgICAvLyBSZXNldCBndWFyZHMgYmVmb3JlIGVhY2ggdGVzdFxyXG4gICAgX19yZXNldFBlcmZvcm1hbmNlR3VhcmRzRm9yVGVzdHMoKTtcclxuXHJcbiAgICAvLyBDcmVhdGUgbW9jayBwZXJmb3JtYW5jZSBvYmplY3RcclxuICAgIG1vY2tQZXJmb3JtYW5jZSA9IHtcclxuICAgICAgZ2V0RW50cmllc0J5VHlwZTogamVzdC5mbigpLFxyXG4gICAgICBub3c6IGplc3QuZm4oKSxcclxuICAgIH0gYXMgYW55O1xyXG5cclxuICAgIC8vIFJlcGxhY2UgZ2xvYmFsIHBlcmZvcm1hbmNlXHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkod2luZG93LCAncGVyZm9ybWFuY2UnLCB7XHJcbiAgICAgIHZhbHVlOiBtb2NrUGVyZm9ybWFuY2UsXHJcbiAgICAgIHdyaXRhYmxlOiB0cnVlLFxyXG4gICAgfSk7XHJcblxyXG4gICAgamVzdC5jbGVhckFsbE1vY2tzKCk7XHJcbiAgfSk7XHJcblxyXG4gIGFmdGVyRWFjaCgoKSA9PiB7XHJcbiAgICBqZXN0LnJlc3RvcmVBbGxNb2NrcygpO1xyXG4gIH0pO1xyXG5cclxuICBkZXNjcmliZSgnZ2V0TmF2aWdhdGlvblRpbWluZycsICgpID0+IHtcclxuICAgIGl0KCdzaG91bGQgcmV0dXJuIHBvc2l0aXZlIHRvdGFsTG9hZFRpbWUgZnJvbSBQZXJmb3JtYW5jZU5hdmlnYXRpb25UaW1pbmcnLCAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IG1vY2tOYXZFbnRyeSA9IHtcclxuICAgICAgICBzdGFydFRpbWU6IDAsXHJcbiAgICAgICAgZHVyYXRpb246IDEyMzQuNSxcclxuICAgICAgICBkb21Db250ZW50TG9hZGVkRXZlbnRFbmQ6IDgwMCxcclxuICAgICAgICB0eXBlOiAnbmF2aWdhdGUnXHJcbiAgICAgIH0gYXMgUGVyZm9ybWFuY2VOYXZpZ2F0aW9uVGltaW5nO1xyXG5cclxuICAgICAgbW9ja1BlcmZvcm1hbmNlLmdldEVudHJpZXNCeVR5cGUubW9ja1JldHVyblZhbHVlKFttb2NrTmF2RW50cnldKTtcclxuXHJcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGdldE5hdmlnYXRpb25UaW1pbmcoKTtcclxuXHJcbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvRXF1YWwoe1xyXG4gICAgICAgIHN0YXJ0VGltZTogMCxcclxuICAgICAgICBkb21Db250ZW50TG9hZGVkOiA4MDAsXHJcbiAgICAgICAgZmlyc3RQYWludDogdW5kZWZpbmVkLFxyXG4gICAgICAgIGZpcnN0Q29udGVudGZ1bFBhaW50OiB1bmRlZmluZWQsXHJcbiAgICAgICAgdG90YWxMb2FkVGltZTogMTIzNC41LFxyXG4gICAgICAgIHR5cGU6ICduYXZpZ2F0ZScsXHJcbiAgICAgICAgdGltZXN0YW1wOiBleHBlY3QuYW55KE51bWJlciksXHJcbiAgICAgICAgc291cmNlOiAnbmF2aWdhdGlvbi10aW1pbmcnXHJcbiAgICAgIH0pO1xyXG4gICAgICBleHBlY3QocmVzdWx0IS50b3RhbExvYWRUaW1lKS50b0JlR3JlYXRlclRoYW4oMCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIGNsYW1wIG5lZ2F0aXZlIGR1cmF0aW9uIHRvIDAnLCAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IG1vY2tOYXZFbnRyeSA9IHtcclxuICAgICAgICBzdGFydFRpbWU6IDAsXHJcbiAgICAgICAgZHVyYXRpb246IC0xMDAwLCAvLyBUaGlzIHNob3VsZCBuZXZlciBoYXBwZW4sIGJ1dCBsZXQncyB0ZXN0IHJvYnVzdG5lc3NcclxuICAgICAgICBkb21Db250ZW50TG9hZGVkRXZlbnRFbmQ6IDUwMCxcclxuICAgICAgICB0eXBlOiAnbmF2aWdhdGUnXHJcbiAgICAgIH0gYXMgUGVyZm9ybWFuY2VOYXZpZ2F0aW9uVGltaW5nO1xyXG5cclxuICAgICAgbW9ja1BlcmZvcm1hbmNlLmdldEVudHJpZXNCeVR5cGUubW9ja1JldHVyblZhbHVlKFttb2NrTmF2RW50cnldKTtcclxuXHJcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGdldE5hdmlnYXRpb25UaW1pbmcoKTtcclxuXHJcbiAgICAgIGV4cGVjdChyZXN1bHQhLnRvdGFsTG9hZFRpbWUpLnRvQmUoMCk7XHJcbiAgICAgIGV4cGVjdChyZXN1bHQhLnNvdXJjZSkudG9CZSgnbmF2aWdhdGlvbi10aW1pbmcnKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzaG91bGQgZmFsbGJhY2sgdG8gbGVnYWN5IHRpbWluZyB3aGVuIG1vZGVybiBBUEkgdW5hdmFpbGFibGUnLCAoKSA9PiB7XHJcbiAgICAgIC8vIE1vY2sgbm8gbW9kZXJuIG5hdmlnYXRpb24gZW50cmllc1xyXG4gICAgICBtb2NrUGVyZm9ybWFuY2UuZ2V0RW50cmllc0J5VHlwZS5tb2NrUmV0dXJuVmFsdWUoW10pO1xyXG5cclxuICAgICAgLy8gTW9jayBsZWdhY3kgdGltaW5nXHJcbiAgICAgIGNvbnN0IG1vY2tUaW1pbmcgPSB7XHJcbiAgICAgICAgbmF2aWdhdGlvblN0YXJ0OiAxMDAwMDAwLFxyXG4gICAgICAgIGRvbUNvbnRlbnRMb2FkZWRFdmVudEVuZDogMTAwMTAwMCxcclxuICAgICAgICBsb2FkRXZlbnRFbmQ6IDEwMDE1MDAsXHJcbiAgICAgIH07XHJcblxyXG4gICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkobW9ja1BlcmZvcm1hbmNlLCAndGltaW5nJywge1xyXG4gICAgICAgIHZhbHVlOiBtb2NrVGltaW5nLFxyXG4gICAgICAgIHdyaXRhYmxlOiB0cnVlLFxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGdldE5hdmlnYXRpb25UaW1pbmcoKTtcclxuXHJcbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvRXF1YWwoe1xyXG4gICAgICAgIHN0YXJ0VGltZTogMCxcclxuICAgICAgICBkb21Db250ZW50TG9hZGVkOiAxMDAwLFxyXG4gICAgICAgIGZpcnN0UGFpbnQ6IHVuZGVmaW5lZCxcclxuICAgICAgICBmaXJzdENvbnRlbnRmdWxQYWludDogdW5kZWZpbmVkLFxyXG4gICAgICAgIHRvdGFsTG9hZFRpbWU6IDE1MDAsXHJcbiAgICAgICAgdHlwZTogJ25hdmlnYXRlJyxcclxuICAgICAgICB0aW1lc3RhbXA6IGV4cGVjdC5hbnkoTnVtYmVyKSxcclxuICAgICAgICBzb3VyY2U6ICdsZWdhY3ktdGltaW5nJ1xyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzaG91bGQgcmV0dXJuIG51bGwgd2hlbiBubyB0aW1pbmcgQVBJcyBhdmFpbGFibGUnLCAoKSA9PiB7XHJcbiAgICAgIG1vY2tQZXJmb3JtYW5jZS5nZXRFbnRyaWVzQnlUeXBlLm1vY2tSZXR1cm5WYWx1ZShbXSk7XHJcbiAgICAgIFxyXG4gICAgICBjb25zdCByZXN1bHQgPSBnZXROYXZpZ2F0aW9uVGltaW5nKCk7XHJcblxyXG4gICAgICBleHBlY3QocmVzdWx0KS50b0JlTnVsbCgpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgZXhjZXB0aW9ucyBncmFjZWZ1bGx5JywgKCkgPT4ge1xyXG4gICAgICBtb2NrUGVyZm9ybWFuY2UuZ2V0RW50cmllc0J5VHlwZS5tb2NrSW1wbGVtZW50YXRpb24oKCkgPT4ge1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcignQVBJIGVycm9yJyk7XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgY29uc3QgcmVzdWx0ID0gZ2V0TmF2aWdhdGlvblRpbWluZygpO1xyXG5cclxuICAgICAgZXhwZWN0KHJlc3VsdCkudG9CZU51bGwoKTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG5cclxuICBkZXNjcmliZSgnaW5pdFdlYlZpdGFscycsICgpID0+IHtcclxuICAgIGNvbnN0IHsgb25DTFMsIG9uSU5QLCBvbkxDUCwgb25GQ1AsIG9uVFRGQiB9ID0gcmVxdWlyZSgnd2ViLXZpdGFscycpO1xyXG4gICAgbGV0IG1vY2tPbk1ldHJpYzogamVzdC5Nb2NrO1xyXG5cclxuICAgIGJlZm9yZUVhY2goKCkgPT4ge1xyXG4gICAgICBtb2NrT25NZXRyaWMgPSBqZXN0LmZuKCk7XHJcbiAgICAgIG9uQ0xTLm1vY2tDbGVhcigpO1xyXG4gICAgICBvbklOUC5tb2NrQ2xlYXIoKTtcclxuICAgICAgb25MQ1AubW9ja0NsZWFyKCk7XHJcbiAgICAgIG9uRkNQLm1vY2tDbGVhcigpO1xyXG4gICAgICBvblRURkIubW9ja0NsZWFyKCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIGluaXRpYWxpemUgd2ViIHZpdGFscyBvbmx5IG9uY2UgYnkgZGVmYXVsdCcsICgpID0+IHtcclxuICAgICAgY29uc3QgcmVzdWx0MSA9IGluaXRXZWJWaXRhbHMoeyBvbk1ldHJpYzogbW9ja09uTWV0cmljIH0pO1xyXG4gICAgICBjb25zdCByZXN1bHQyID0gaW5pdFdlYlZpdGFscyh7IG9uTWV0cmljOiBtb2NrT25NZXRyaWMgfSk7XHJcblxyXG4gICAgICBleHBlY3QocmVzdWx0MSkudG9CZSh0cnVlKTsgIC8vIEZpcnN0IGluaXRpYWxpemF0aW9uXHJcbiAgICAgIGV4cGVjdChyZXN1bHQyKS50b0JlKGZhbHNlKTsgLy8gU2Vjb25kIGNhbGwgc2hvdWxkIGJlIGlnbm9yZWRcclxuXHJcbiAgICAgIC8vIFNob3VsZCBvbmx5IHJlZ2lzdGVyIGxpc3RlbmVycyBvbmNlXHJcbiAgICAgIGV4cGVjdChvbkxDUCkudG9IYXZlQmVlbkNhbGxlZFRpbWVzKDEpO1xyXG4gICAgICBleHBlY3Qob25DTFMpLnRvSGF2ZUJlZW5DYWxsZWRUaW1lcygxKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzaG91bGQgYWxsb3cgcmUtaW5pdGlhbGl6YXRpb24gd2hlbiBmb3JjZT10cnVlJywgKCkgPT4ge1xyXG4gICAgICBpbml0V2ViVml0YWxzKHsgb25NZXRyaWM6IG1vY2tPbk1ldHJpYyB9KTtcclxuICAgICAgY29uc3QgcmVzdWx0ID0gaW5pdFdlYlZpdGFscyh7IG9uTWV0cmljOiBtb2NrT25NZXRyaWMsIGZvcmNlOiB0cnVlIH0pO1xyXG5cclxuICAgICAgZXhwZWN0KHJlc3VsdCkudG9CZSh0cnVlKTtcclxuICAgICAgZXhwZWN0KG9uTENQKS50b0hhdmVCZWVuQ2FsbGVkVGltZXMoMik7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIHByZXZlbnQgZHVwbGljYXRlIExDUCBlbWlzc2lvbnMnLCAoKSA9PiB7XHJcbiAgICAgIGluaXRXZWJWaXRhbHMoeyBvbk1ldHJpYzogbW9ja09uTWV0cmljIH0pO1xyXG5cclxuICAgICAgLy8gU2ltdWxhdGUgTENQIGNhbGxiYWNrc1xyXG4gICAgICBjb25zdCBsY3BDYWxsYmFjayA9IG9uTENQLm1vY2suY2FsbHNbMF1bMF07XHJcbiAgICAgIFxyXG4gICAgICBsY3BDYWxsYmFjayh7IG5hbWU6ICdMQ1AnLCB2YWx1ZTogMTAwMCwgcmF0aW5nOiAnZ29vZCcgfSk7XHJcbiAgICAgIGxjcENhbGxiYWNrKHsgbmFtZTogJ0xDUCcsIHZhbHVlOiAxMjAwLCByYXRpbmc6ICduZWVkcy1pbXByb3ZlbWVudCcgfSk7XHJcblxyXG4gICAgICAvLyBTaG91bGQgb25seSBjYWxsIG9uTWV0cmljIG9uY2UgZm9yIExDUFxyXG4gICAgICBjb25zdCBsY3BDYWxscyA9IG1vY2tPbk1ldHJpYy5tb2NrLmNhbGxzLmZpbHRlcihjYWxsID0+IGNhbGxbMF0ubmFtZSA9PT0gJ0xDUCcpO1xyXG4gICAgICBleHBlY3QobGNwQ2FsbHMpLnRvSGF2ZUxlbmd0aCgxKTtcclxuICAgICAgZXhwZWN0KGxjcENhbGxzWzBdWzBdLnZhbHVlKS50b0JlKDEwMDApO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCBjbGFtcCBuZWdhdGl2ZSBtZXRyaWMgdmFsdWVzIHRvIDAnLCAoKSA9PiB7XHJcbiAgICAgIGluaXRXZWJWaXRhbHMoeyBvbk1ldHJpYzogbW9ja09uTWV0cmljIH0pO1xyXG5cclxuICAgICAgY29uc3QgY2xzQ2FsbGJhY2sgPSBvbkNMUy5tb2NrLmNhbGxzWzBdWzBdO1xyXG4gICAgICBjbHNDYWxsYmFjayh7IG5hbWU6ICdDTFMnLCB2YWx1ZTogLTAuNSB9KTsgLy8gTmVnYXRpdmUgQ0xTIHNob3VsZG4ndCBoYXBwZW4gYnV0IHRlc3Qgcm9idXN0bmVzc1xyXG5cclxuICAgICAgZXhwZWN0KG1vY2tPbk1ldHJpYykudG9IYXZlQmVlbkNhbGxlZFdpdGgoXHJcbiAgICAgICAgZXhwZWN0Lm9iamVjdENvbnRhaW5pbmcoe1xyXG4gICAgICAgICAgbmFtZTogJ0NMUycsXHJcbiAgICAgICAgICB2YWx1ZTogMCxcclxuICAgICAgICB9KVxyXG4gICAgICApO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCBpbmNsdWRlIG5hdmlnYXRpb24gbWV0cmljcyB3aGVuIHJlcXVlc3RlZCcsICgpID0+IHtcclxuICAgICAgY29uc3QgbW9ja05hdkVudHJ5ID0ge1xyXG4gICAgICAgIHN0YXJ0VGltZTogMCxcclxuICAgICAgICBkdXJhdGlvbjogMTUwMCxcclxuICAgICAgICBkb21Db250ZW50TG9hZGVkRXZlbnRFbmQ6IDEwMDAsXHJcbiAgICAgICAgdHlwZTogJ25hdmlnYXRlJ1xyXG4gICAgICB9IGFzIFBlcmZvcm1hbmNlTmF2aWdhdGlvblRpbWluZztcclxuXHJcbiAgICAgIG1vY2tQZXJmb3JtYW5jZS5nZXRFbnRyaWVzQnlUeXBlLm1vY2tSZXR1cm5WYWx1ZShbbW9ja05hdkVudHJ5XSk7XHJcblxyXG4gICAgICBpbml0V2ViVml0YWxzKHsgXHJcbiAgICAgICAgb25NZXRyaWM6IG1vY2tPbk1ldHJpYywgXHJcbiAgICAgICAgaW5jbHVkZU5hdmlnYXRpb25NZXRyaWNzOiB0cnVlIFxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIC8vIFNob3VsZCBlbWl0IG5hdmlnYXRpb24gbWV0cmljc1xyXG4gICAgICBleHBlY3QobW9ja09uTWV0cmljKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChcclxuICAgICAgICBleHBlY3Qub2JqZWN0Q29udGFpbmluZyh7XHJcbiAgICAgICAgICBuYW1lOiAnbmF2aWdhdGlvbi10b3RhbC1sb2FkLXRpbWUnLFxyXG4gICAgICAgICAgdmFsdWU6IDE1MDAsXHJcbiAgICAgICAgfSlcclxuICAgICAgKTtcclxuXHJcbiAgICAgIGV4cGVjdChtb2NrT25NZXRyaWMpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFxyXG4gICAgICAgIGV4cGVjdC5vYmplY3RDb250YWluaW5nKHtcclxuICAgICAgICAgIG5hbWU6ICduYXZpZ2F0aW9uLWRvbS1jb250ZW50LWxvYWRlZCcsXHJcbiAgICAgICAgICB2YWx1ZTogMTAwMCxcclxuICAgICAgICB9KVxyXG4gICAgICApO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCB3b3JrIHdpdGhvdXQgb25NZXRyaWMgY2FsbGJhY2snLCAoKSA9PiB7XHJcbiAgICAgIGV4cGVjdCgoKSA9PiB7XHJcbiAgICAgICAgaW5pdFdlYlZpdGFscyh7fSk7XHJcbiAgICAgIH0pLm5vdC50b1Rocm93KCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIGFkZCBuYXZpZ2F0aW9uIHR5cGUgdG8gd2ViIHZpdGFsIHJlY29yZHMnLCAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IG1vY2tOYXZFbnRyeSA9IHtcclxuICAgICAgICB0eXBlOiAncmVsb2FkJ1xyXG4gICAgICB9IGFzIFBlcmZvcm1hbmNlTmF2aWdhdGlvblRpbWluZztcclxuXHJcbiAgICAgIG1vY2tQZXJmb3JtYW5jZS5nZXRFbnRyaWVzQnlUeXBlLm1vY2tSZXR1cm5WYWx1ZShbbW9ja05hdkVudHJ5XSk7XHJcblxyXG4gICAgICBpbml0V2ViVml0YWxzKHsgb25NZXRyaWM6IG1vY2tPbk1ldHJpYyB9KTtcclxuXHJcbiAgICAgIC8vIFRyaWdnZXIgYSBtZXRyaWMgY2FsbGJhY2tcclxuICAgICAgY29uc3QgZmNwQ2FsbGJhY2sgPSBvbkZDUC5tb2NrLmNhbGxzWzBdWzBdO1xyXG4gICAgICBmY3BDYWxsYmFjayh7IG5hbWU6ICdGQ1AnLCB2YWx1ZTogODAwIH0pO1xyXG5cclxuICAgICAgZXhwZWN0KG1vY2tPbk1ldHJpYykudG9IYXZlQmVlbkNhbGxlZFdpdGgoXHJcbiAgICAgICAgZXhwZWN0Lm9iamVjdENvbnRhaW5pbmcoe1xyXG4gICAgICAgICAgbmF2aWdhdGlvblR5cGU6ICdyZWxvYWQnLFxyXG4gICAgICAgICAgdGltZXN0YW1wOiBleHBlY3QuYW55KE51bWJlciksXHJcbiAgICAgICAgfSlcclxuICAgICAgKTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG5cclxuICBkZXNjcmliZSgnUGVyZm9ybWFuY2UgdGltaW5nIGVkZ2UgY2FzZXMnLCAoKSA9PiB7XHJcbiAgICBpdCgnc2hvdWxkIGhhbmRsZSB1bmRlZmluZWQvbnVsbCBkdXJhdGlvbiB2YWx1ZXMnLCAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IG1vY2tOYXZFbnRyeSA9IHtcclxuICAgICAgICBzdGFydFRpbWU6IDAsXHJcbiAgICAgICAgZHVyYXRpb246IHVuZGVmaW5lZCxcclxuICAgICAgICBkb21Db250ZW50TG9hZGVkRXZlbnRFbmQ6IDUwMCxcclxuICAgICAgICB0eXBlOiAnbmF2aWdhdGUnXHJcbiAgICAgIH0gYXMgYW55O1xyXG5cclxuICAgICAgbW9ja1BlcmZvcm1hbmNlLmdldEVudHJpZXNCeVR5cGUubW9ja1JldHVyblZhbHVlKFttb2NrTmF2RW50cnldKTtcclxuXHJcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGdldE5hdmlnYXRpb25UaW1pbmcoKTtcclxuXHJcbiAgICAgIGV4cGVjdChyZXN1bHQhLnRvdGFsTG9hZFRpbWUpLnRvQmUoMCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBpbmZpbml0ZSBkdXJhdGlvbiB2YWx1ZXMnLCAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IG1vY2tOYXZFbnRyeSA9IHtcclxuICAgICAgICBzdGFydFRpbWU6IDAsXHJcbiAgICAgICAgZHVyYXRpb246IEluZmluaXR5LFxyXG4gICAgICAgIGRvbUNvbnRlbnRMb2FkZWRFdmVudEVuZDogNTAwLFxyXG4gICAgICAgIHR5cGU6ICduYXZpZ2F0ZSdcclxuICAgICAgfSBhcyBQZXJmb3JtYW5jZU5hdmlnYXRpb25UaW1pbmc7XHJcblxyXG4gICAgICBtb2NrUGVyZm9ybWFuY2UuZ2V0RW50cmllc0J5VHlwZS5tb2NrUmV0dXJuVmFsdWUoW21vY2tOYXZFbnRyeV0pO1xyXG5cclxuICAgICAgY29uc3QgcmVzdWx0ID0gZ2V0TmF2aWdhdGlvblRpbWluZygpO1xyXG5cclxuICAgICAgZXhwZWN0KHJlc3VsdCEudG90YWxMb2FkVGltZSkudG9CZSgwKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzaG91bGQgaGFuZGxlIE5hTiBkdXJhdGlvbiB2YWx1ZXMnLCAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IG1vY2tOYXZFbnRyeSA9IHtcclxuICAgICAgICBzdGFydFRpbWU6IDAsXHJcbiAgICAgICAgZHVyYXRpb246IE5hTixcclxuICAgICAgICBkb21Db250ZW50TG9hZGVkRXZlbnRFbmQ6IDUwMCxcclxuICAgICAgICB0eXBlOiAnbmF2aWdhdGUnXHJcbiAgICAgIH0gYXMgUGVyZm9ybWFuY2VOYXZpZ2F0aW9uVGltaW5nO1xyXG5cclxuICAgICAgbW9ja1BlcmZvcm1hbmNlLmdldEVudHJpZXNCeVR5cGUubW9ja1JldHVyblZhbHVlKFttb2NrTmF2RW50cnldKTtcclxuXHJcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGdldE5hdmlnYXRpb25UaW1pbmcoKTtcclxuXHJcbiAgICAgIGV4cGVjdChyZXN1bHQhLnRvdGFsTG9hZFRpbWUpLnRvQmUoMCk7XHJcbiAgICB9KTtcclxuICB9KTtcclxufSk7XHJcbiJdLCJtYXBwaW5ncyI6Ijs7QUFRQTtBQUNBQSxXQUFBLEdBQUtDLElBQUksQ0FBQyxZQUFZLEVBQUUsT0FBTztFQUM3QkMsS0FBSyxFQUFFQyxJQUFJLENBQUNDLEVBQUUsQ0FBQyxDQUFDO0VBQ2hCQyxLQUFLLEVBQUVGLElBQUksQ0FBQ0MsRUFBRSxDQUFDLENBQUM7RUFDaEJFLEtBQUssRUFBRUgsSUFBSSxDQUFDQyxFQUFFLENBQUMsQ0FBQztFQUNoQkcsS0FBSyxFQUFFSixJQUFJLENBQUNDLEVBQUUsQ0FBQyxDQUFDO0VBQ2hCSSxNQUFNLEVBQUVMLElBQUksQ0FBQ0MsRUFBRSxDQUFDO0FBQ2xCLENBQUMsQ0FBQyxDQUFDO0FBZkgsSUFBQUssbUJBQUEsR0FBQUMsT0FBQTtBQU0rQixTQUFBVixZQUFBO0VBQUE7SUFBQUc7RUFBQSxJ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