3a2ae27528b79bf7c4cf451cf5d00c3f
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.BaseService = void 0;
var _axios = _interopRequireDefault(require("axios"));
var _UnifiedCache = require("./UnifiedCache");
var _UnifiedConfig = require("./UnifiedConfig");
var _UnifiedLogger = require("./UnifiedLogger");
// Browser-compatible EventEmitter;
class EventEmitter {
  constructor() {
    this.events = {};
  }
  on(event, listener) {
    if (!this.events[event]) {
      this.events[event] = [];
    }
    this.events[event].push(listener);
  }
  off(event, listener) {
    if (!this.events[event]) return;
    this.events[event] = this.events[event].filter(l => l !== listener);
  }
  emit(event, ...args) {
    if (!this.events[event]) return;
    this.events[event].forEach(listener => listener(...args));
  }
}
class BaseService extends EventEmitter {
  constructor(name,
  // Keep the registry loosely typed to avoid tight coupling during incremental fixes
  serviceRegistry) {
    super();
    this.name = name;
    this.serviceRegistry = serviceRegistry;
    this.config = void 0;
    this.logger = void 0;
    this.api = void 0;
    this.cache = void 0;
    this.config = _UnifiedConfig.UnifiedConfig.getInstance();
    this.logger = new _UnifiedLogger.UnifiedLogger(this.name);
    this.cache = _UnifiedCache.UnifiedCache.getInstance();

    // Initialize API client;
    this.api = _axios.default.create({
      baseURL: this.config.getApiUrl(),
      timeout: 10000,
      headers: {
        'Content-Type': 'application/json'
      }
    });
    this.setupInterceptors();
  }
  setupInterceptors() {
    this.api.interceptors.request.use(config => {
      // If you want to add an Authorization header, pass the token as a parameter or get it from config
      // Example: if (config.headers && config.headers.AuthorizationToken)
      return config;
    }, error => {
      this.logger.error('Request error:', error);
      return Promise.reject(error);
    });
    this.api.interceptors.response.use(response => {
      return response;
    }, error => {
      this.logger.error('Response error:', error);
      return Promise.reject(error);
    });
  }
  handleError(error, serviceError) {
    let errorMsg = '';
    if (typeof error === 'object' && error !== null && 'message' in error) {
      errorMsg = error.message;
    } else {
      errorMsg = String(error);
    }
    this.logger.error(`Error in ${serviceError.source}: ${errorMsg}`);

    // Emit error event;
    this.serviceRegistry.emit('error', {
      ...serviceError,
      error: errorMsg,
      timestamp: Date.now()
    });
  }
  async retry(operation, maxRetries = 3, delay = 1000) {
    let _lastError;
    let lastError;
    for (let i = 0; i < maxRetries; i++) {
      try {
        return await operation();
      } catch (error) {
        lastError = error;
        if (i < maxRetries - 1) {
          await new Promise(resolve => setTimeout(resolve, delay * (i + 1)));
        }
      }
    }
    throw lastError;
  }
  getCacheKey(...parts) {
    return `${this.name}:${parts.join(':')}`;
  }
  async withCache(key, operation, ttl) {
    const cached = this.cache.get(key);
    if (typeof cached !== 'undefined' && cached !== null) return cached;
    const result = await operation();
    this.cache.set(key, result, ttl);
    return result;
  }

  // Lifecycle methods;
  async initialize() {
    this.logger.info(`Initializing ${this.name} service`, this.name);
    // Override in derived classes if needed;
  }
  async cleanup() {
    this.logger.info(`Cleaning up ${this.name} service`, this.name);
    // Override in derived classes if needed;
  }
  async handleRequest(request) {
    try {
      return await request();
    } catch (error) {
      this.logger.error('Request failed:', error);
      throw error;
    }
  }
}
exports.BaseService = BaseService;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfYXhpb3MiLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwicmVxdWlyZSIsIl9VbmlmaWVkQ2FjaGUiLCJfVW5pZmllZENvbmZpZyIsIl9VbmlmaWVkTG9nZ2VyIiwiRXZlbnRFbWl0dGVyIiwiY29uc3RydWN0b3IiLCJldmVudHMiLCJvbiIsImV2ZW50IiwibGlzdGVuZXIiLCJwdXNoIiwib2ZmIiwiZmlsdGVyIiwibCIsImVtaXQiLCJhcmdzIiwiZm9yRWFjaCIsIkJhc2VTZXJ2aWNlIiwibmFtZSIsInNlcnZpY2VSZWdpc3RyeSIsImNvbmZpZyIsImxvZ2dlciIsImFwaSIsImNhY2hlIiwiVW5pZmllZENvbmZpZyIsImdldEluc3RhbmNlIiwiVW5pZmllZExvZ2dlciIsIlVuaWZpZWRDYWNoZSIsImF4aW9zIiwiY3JlYXRlIiwiYmFzZVVSTCIsImdldEFwaVVybCIsInRpbWVvdXQiLCJoZWFkZXJzIiwic2V0dXBJbnRlcmNlcHRvcnMiLCJpbnRlcmNlcHRvcnMiLCJyZXF1ZXN0IiwidXNlIiwiZXJyb3IiLCJQcm9taXNlIiwicmVqZWN0IiwicmVzcG9uc2UiLCJoYW5kbGVFcnJvciIsInNlcnZpY2VFcnJvciIsImVycm9yTXNnIiwibWVzc2FnZSIsIlN0cmluZyIsInNvdXJjZSIsInRpbWVzdGFtcCIsIkRhdGUiLCJub3ciLCJyZXRyeSIsIm9wZXJhdGlvbiIsIm1heFJldHJpZXMiLCJkZWxheSIsIl9sYXN0RXJyb3IiLCJsYXN0RXJyb3IiLCJpIiwicmVzb2x2ZSIsInNldFRpbWVvdXQiLCJnZXRDYWNoZUtleSIsInBhcnRzIiwiam9pbiIsIndpdGhDYWNoZSIsImtleSIsInR0bCIsImNhY2hlZCIsImdldCIsInJlc3VsdCIsInNldCIsImluaXRpYWxpemUiLCJpbmZvIiwiY2xlYW51cCIsImhhbmRsZVJlcXVlc3QiLCJleHBvcnRzIl0sInNvdXJjZXMiOlsiQmFzZVNlcnZpY2UudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHR5cGUgeyBBeGlvc0Vycm9yLCBBeGlvc0luc3RhbmNlLCBBeGlvc1Jlc3BvbnNlIH0gZnJvbSAnYXhpb3MnO1xyXG5pbXBvcnQgYXhpb3MgZnJvbSAnYXhpb3MnO1xyXG5pbXBvcnQgeyBVbmlmaWVkQ2FjaGUgfSBmcm9tICcuL1VuaWZpZWRDYWNoZSc7XHJcbmltcG9ydCB7IFVuaWZpZWRDb25maWcgfSBmcm9tICcuL1VuaWZpZWRDb25maWcnO1xyXG5pbXBvcnQgeyBVbmlmaWVkTG9nZ2VyIH0gZnJvbSAnLi9VbmlmaWVkTG9nZ2VyJztcclxuaW1wb3J0IHsgVW5pZmllZFNlcnZpY2VSZWdpc3RyeSB9IGZyb20gJy4vVW5pZmllZFNlcnZpY2VSZWdpc3RyeSc7XHJcblxyXG4vLyBCcm93c2VyLWNvbXBhdGlibGUgRXZlbnRFbWl0dGVyO1xyXG5jbGFzcyBFdmVudEVtaXR0ZXIge1xyXG4gIHByaXZhdGUgZXZlbnRzOiB7IFtrZXk6IHN0cmluZ106IEFycmF5PCguLi5hcmdzOiB1bmtub3duW10pID0+IHZvaWQ+IH0gPSB7fTtcclxuXHJcbiAgb24oZXZlbnQ6IHN0cmluZywgbGlzdGVuZXI6ICguLi5hcmdzOiB1bmtub3duW10pID0+IHZvaWQpIHtcclxuICAgIGlmICghdGhpcy5ldmVudHNbZXZlbnRdKSB7XHJcbiAgICAgIHRoaXMuZXZlbnRzW2V2ZW50XSA9IFtdO1xyXG4gICAgfVxyXG4gICAgdGhpcy5ldmVudHNbZXZlbnRdLnB1c2gobGlzdGVuZXIpO1xyXG4gIH1cclxuXHJcbiAgb2ZmKGV2ZW50OiBzdHJpbmcsIGxpc3RlbmVyOiAoLi4uYXJnczogdW5rbm93bltdKSA9PiB2b2lkKSB7XHJcbiAgICBpZiAoIXRoaXMuZXZlbnRzW2V2ZW50XSkgcmV0dXJuO1xyXG4gICAgdGhpcy5ldmVudHNbZXZlbnRdID0gdGhpcy5ldmVudHNbZXZlbnRdLmZpbHRlcihsID0+IGwgIT09IGxpc3RlbmVyKTtcclxuICB9XHJcblxyXG4gIGVtaXQoZXZlbnQ6IHN0cmluZywgLi4uYXJnczogdW5rbm93bltdKSB7XHJcbiAgICBpZiAoIXRoaXMuZXZlbnRzW2V2ZW50XSkgcmV0dXJuO1xyXG4gICAgdGhpcy5ldmVudHNbZXZlbnRdLmZvckVhY2gobGlzdGVuZXIgPT4gbGlzdGVuZXIoLi4uYXJncykpO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBTZXJ2aWNlRXJyb3Ige1xyXG4gIGNvZGU6IHN0cmluZztcclxuICBzb3VyY2U6IHN0cmluZztcclxuICBkZXRhaWxzPzogdW5rbm93bjtcclxufVxyXG5cclxuZXhwb3J0IGFic3RyYWN0IGNsYXNzIEJhc2VTZXJ2aWNlIGV4dGVuZHMgRXZlbnRFbWl0dGVyIHtcclxuICBwcm90ZWN0ZWQgY29uZmlnOiBVbmlmaWVkQ29uZmlnO1xyXG4gIHByb3RlY3RlZCBsb2dnZXI6IFVuaWZpZWRMb2dnZXI7XHJcbiAgcHJvdGVjdGVkIGFwaTogQXhpb3NJbnN0YW5jZTtcclxuICBwcm90ZWN0ZWQgY2FjaGU6IFVuaWZpZWRDYWNoZTtcclxuXHJcbiAgY29uc3RydWN0b3IoXHJcbiAgICBwcm90ZWN0ZWQgcmVhZG9ubHkgbmFtZTogc3RyaW5nLFxyXG4gICAgLy8gS2VlcCB0aGUgcmVnaXN0cnkgbG9vc2VseSB0eXBlZCB0byBhdm9pZCB0aWdodCBjb3VwbGluZyBkdXJpbmcgaW5jcmVtZW50YWwgZml4ZXNcclxuICAgIHByb3RlY3RlZCByZWFkb25seSBzZXJ2aWNlUmVnaXN0cnk6IGFueVxyXG4gICkge1xyXG4gICAgc3VwZXIoKTtcclxuICAgIHRoaXMuY29uZmlnID0gVW5pZmllZENvbmZpZy5nZXRJbnN0YW5jZSgpO1xyXG4gICAgdGhpcy5sb2dnZXIgPSBuZXcgVW5pZmllZExvZ2dlcih0aGlzLm5hbWUpO1xyXG4gICAgdGhpcy5jYWNoZSA9IFVuaWZpZWRDYWNoZS5nZXRJbnN0YW5jZSgpO1xyXG5cclxuICAgIC8vIEluaXRpYWxpemUgQVBJIGNsaWVudDtcclxuICAgIHRoaXMuYXBpID0gYXhpb3MuY3JlYXRlKHtcclxuICAgICAgYmFzZVVSTDogdGhpcy5jb25maWcuZ2V0QXBpVXJsKCksXHJcbiAgICAgIHRpbWVvdXQ6IDEwMDAwLFxyXG4gICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcclxuICAgICAgfSxcclxuICAgIH0pO1xyXG5cclxuICAgIHRoaXMuc2V0dXBJbnRlcmNlcHRvcnMoKTtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgc2V0dXBJbnRlcmNlcHRvcnMoKTogdm9pZCB7XHJcbiAgICB0aGlzLmFwaS5pbnRlcmNlcHRvcnMucmVxdWVzdC51c2UoXHJcbiAgICAgIChjb25maWc6IGFueSkgPT4ge1xyXG4gICAgICAgIC8vIElmIHlvdSB3YW50IHRvIGFkZCBhbiBBdXRob3JpemF0aW9uIGhlYWRlciwgcGFzcyB0aGUgdG9rZW4gYXMgYSBwYXJhbWV0ZXIgb3IgZ2V0IGl0IGZyb20gY29uZmlnXHJcbiAgICAgICAgLy8gRXhhbXBsZTogaWYgKGNvbmZpZy5oZWFkZXJzICYmIGNvbmZpZy5oZWFkZXJzLkF1dGhvcml6YXRpb25Ub2tlbilcclxuICAgICAgICByZXR1cm4gY29uZmlnO1xyXG4gICAgICB9LFxyXG4gICAgICAoZXJyb3I6IEF4aW9zRXJyb3IpID0+IHtcclxuICAgICAgICB0aGlzLmxvZ2dlci5lcnJvcignUmVxdWVzdCBlcnJvcjonLCBlcnJvcik7XHJcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGVycm9yKTtcclxuICAgICAgfVxyXG4gICAgKTtcclxuXHJcbiAgICB0aGlzLmFwaS5pbnRlcmNlcHRvcnMucmVzcG9uc2UudXNlKFxyXG4gICAgICAocmVzcG9uc2U6IEF4aW9zUmVzcG9uc2UpID0+IHtcclxuICAgICAgICByZXR1cm4gcmVzcG9uc2U7XHJcbiAgICAgIH0sXHJcbiAgICAgIChlcnJvcjogQXhpb3NFcnJvcikgPT4ge1xyXG4gICAgICAgIHRoaXMubG9nZ2VyLmVycm9yKCdSZXNwb25zZSBlcnJvcjonLCBlcnJvcik7XHJcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGVycm9yKTtcclxuICAgICAgfVxyXG4gICAgKTtcclxuICB9XHJcblxyXG4gIHByb3RlY3RlZCBoYW5kbGVFcnJvcihlcnJvcjogdW5rbm93biwgc2VydmljZUVycm9yOiBTZXJ2aWNlRXJyb3IpOiB2b2lkIHtcclxuICAgIGxldCBlcnJvck1zZyA9ICcnO1xyXG4gICAgaWYgKHR5cGVvZiBlcnJvciA9PT0gJ29iamVjdCcgJiYgZXJyb3IgIT09IG51bGwgJiYgJ21lc3NhZ2UnIGluIGVycm9yKSB7XHJcbiAgICAgIGVycm9yTXNnID0gKGVycm9yIGFzIGFueSkubWVzc2FnZTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGVycm9yTXNnID0gU3RyaW5nKGVycm9yKTtcclxuICAgIH1cclxuICAgIHRoaXMubG9nZ2VyLmVycm9yKGBFcnJvciBpbiAke3NlcnZpY2VFcnJvci5zb3VyY2V9OiAke2Vycm9yTXNnfWApO1xyXG5cclxuICAgIC8vIEVtaXQgZXJyb3IgZXZlbnQ7XHJcbiAgICB0aGlzLnNlcnZpY2VSZWdpc3RyeS5lbWl0KCdlcnJvcicsIHtcclxuICAgICAgLi4uc2VydmljZUVycm9yLFxyXG4gICAgICBlcnJvcjogZXJyb3JNc2csXHJcbiAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKSxcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgcHJvdGVjdGVkIGFzeW5jIHJldHJ5PFQ+KFxyXG4gICAgb3BlcmF0aW9uOiAoKSA9PiBQcm9taXNlPFQ+LFxyXG4gICAgbWF4UmV0cmllczogbnVtYmVyID0gMyxcclxuICAgIGRlbGF5OiBudW1iZXIgPSAxMDAwXHJcbiAgKTogUHJvbWlzZTxUPiB7XHJcbiAgICBsZXQgX2xhc3RFcnJvcjogdW5rbm93bjtcclxuICAgIGxldCBsYXN0RXJyb3I6IHVua25vd247XHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IG1heFJldHJpZXM7IGkrKykge1xyXG4gICAgICB0cnkge1xyXG4gICAgICAgIHJldHVybiBhd2FpdCBvcGVyYXRpb24oKTtcclxuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICBsYXN0RXJyb3IgPSBlcnJvcjtcclxuICAgICAgICBpZiAoaSA8IG1heFJldHJpZXMgLSAxKSB7XHJcbiAgICAgICAgICBhd2FpdCBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgZGVsYXkgKiAoaSArIDEpKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICB0aHJvdyBsYXN0RXJyb3I7XHJcbiAgfVxyXG5cclxuICBwcm90ZWN0ZWQgZ2V0Q2FjaGVLZXkoLi4ucGFydHM6IChzdHJpbmcgfCBudW1iZXIpW10pOiBzdHJpbmcge1xyXG4gICAgcmV0dXJuIGAke3RoaXMubmFtZX06JHtwYXJ0cy5qb2luKCc6Jyl9YDtcclxuICB9XHJcblxyXG4gIHByb3RlY3RlZCBhc3luYyB3aXRoQ2FjaGU8VD4oa2V5OiBzdHJpbmcsIG9wZXJhdGlvbjogKCkgPT4gUHJvbWlzZTxUPiwgdHRsPzogbnVtYmVyKTogUHJvbWlzZTxUPiB7XHJcbiAgICBjb25zdCBjYWNoZWQgPSB0aGlzLmNhY2hlLmdldChrZXkpO1xyXG4gICAgaWYgKHR5cGVvZiBjYWNoZWQgIT09ICd1bmRlZmluZWQnICYmIGNhY2hlZCAhPT0gbnVsbCkgcmV0dXJuIGNhY2hlZCBhcyBUO1xyXG5cclxuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IG9wZXJhdGlvbigpO1xyXG4gICAgdGhpcy5jYWNoZS5zZXQoa2V5LCByZXN1bHQsIHR0bCk7XHJcbiAgICByZXR1cm4gcmVzdWx0O1xyXG4gIH1cclxuXHJcbiAgLy8gTGlmZWN5Y2xlIG1ldGhvZHM7XHJcbiAgYXN5bmMgaW5pdGlhbGl6ZSgpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgIHRoaXMubG9nZ2VyLmluZm8oYEluaXRpYWxpemluZyAke3RoaXMubmFtZX0gc2VydmljZWAsIHRoaXMubmFtZSk7XHJcbiAgICAvLyBPdmVycmlkZSBpbiBkZXJpdmVkIGNsYXNzZXMgaWYgbmVlZGVkO1xyXG4gIH1cclxuXHJcbiAgYXN5bmMgY2xlYW51cCgpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgIHRoaXMubG9nZ2VyLmluZm8oYENsZWFuaW5nIHVwICR7dGhpcy5uYW1lfSBzZXJ2aWNlYCwgdGhpcy5uYW1lKTtcclxuICAgIC8vIE92ZXJyaWRlIGluIGRlcml2ZWQgY2xhc3NlcyBpZiBuZWVkZWQ7XHJcbiAgfVxyXG5cclxuICBwcm90ZWN0ZWQgYXN5bmMgaGFuZGxlUmVxdWVzdDxUPihyZXF1ZXN0OiAoKSA9PiBQcm9taXNlPFQ+KTogUHJvbWlzZTxUPiB7XHJcbiAgICB0cnkge1xyXG4gICAgICByZXR1cm4gYXdhaXQgcmVxdWVzdCgpO1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgdGhpcy5sb2dnZXIuZXJyb3IoJ1JlcXVlc3QgZmFpbGVkOicsIGVycm9yKTtcclxuICAgICAgdGhyb3cgZXJyb3I7XHJcbiAgICB9XHJcbiAgfVxyXG59XHJcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUNBLElBQUFBLE1BQUEsR0FBQUMsc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFDLGFBQUEsR0FBQUQsT0FBQTtBQUNBLElBQUFFLGNBQUEsR0FBQUYsT0FBQTtBQUNBLElBQUFHLGNBQUEsR0FBQUgsT0FBQTtBQUdBO0FBQ0EsTUFBTUksWUFBWSxDQUFDO0VBQUFDLFlBQUE7SUFBQSxLQUNUQyxNQUFNLEdBQTJELENBQUMsQ0FBQztFQUFBO0VBRTNFQyxFQUFFQSxDQUFDQyxLQUFhLEVBQUVDLFFBQXNDLEVBQUU7SUFDeEQsSUFBSSxDQUFDLElBQUksQ0FBQ0gsTUFBTSxDQUFDRSxLQUFLLENBQUMsRUFBRTtNQUN2QixJQUFJLENBQUNGLE1BQU0sQ0FBQ0UsS0FBSyxDQUFDLEdBQUcsRUFBRTtJQUN6QjtJQUNBLElBQUksQ0FBQ0YsTUFBTSxDQUFDRSxLQUFLLENBQUMsQ0FBQ0UsSUFBSSxDQUFDRCxRQUFRLENBQUM7RUFDbkM7RUFFQUUsR0FBR0Es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