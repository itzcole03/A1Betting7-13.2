b03f490cbc46b02e471b66b8e9283f24
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = exports._eventBus = exports.EventBus = void 0;
// Lightweight EventBus used in the frontend. This file uses pure ESM exports
// so Vite/dev server and the browser can import named exports reliably.
class EventBus {
  constructor() {
    this.handlers = new Map();
  }
  on(event, handler) {
    if (!this.handlers.has(event)) this.handlers.set(event, new Set());
    this.handlers.get(event).add(handler);
  }
  off(event, handler) {
    if (!this.handlers.has(event)) return;
    if (handler) this.handlers.get(event).delete(handler);else this.handlers.set(event, new Set());
  }
  emit(event, ...args) {
    const set = this.handlers.get(event);
    if (!set) return;
    for (const h of Array.from(set)) {
      try {
        h(...args);
      } catch (err) {
        void err;
      }
    }
  }
}
exports.EventBus = EventBus;
const _eventBus = exports._eventBus = new EventBus();

// Default export for convenience
var _default = exports.default = _eventBus;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJFdmVudEJ1cyIsImNvbnN0cnVjdG9yIiwiaGFuZGxlcnMiLCJNYXAiLCJvbiIsImV2ZW50IiwiaGFuZGxlciIsImhhcyIsInNldCIsIlNldCIsImdldCIsImFkZCIsIm9mZiIsImRlbGV0ZSIsImVtaXQiLCJhcmdzIiwiaCIsIkFycmF5IiwiZnJvbSIsImVyciIsImV4cG9ydHMiLCJfZXZlbnRCdXMiLCJfZGVmYXVsdCIsImRlZmF1bHQiXSwic291cmNlcyI6WyJFdmVudEJ1cy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBMaWdodHdlaWdodCBFdmVudEJ1cyB1c2VkIGluIHRoZSBmcm9udGVuZC4gVGhpcyBmaWxlIHVzZXMgcHVyZSBFU00gZXhwb3J0c1xyXG4vLyBzbyBWaXRlL2RldiBzZXJ2ZXIgYW5kIHRoZSBicm93c2VyIGNhbiBpbXBvcnQgbmFtZWQgZXhwb3J0cyByZWxpYWJseS5cclxuZXhwb3J0IGNsYXNzIEV2ZW50QnVzIHtcclxuICBjb25zdHJ1Y3RvcigpIHtcclxuICAgIHRoaXMuaGFuZGxlcnMgPSBuZXcgTWFwKCk7XHJcbiAgfVxyXG4gIG9uKGV2ZW50LCBoYW5kbGVyKSB7XHJcbiAgICBpZiAoIXRoaXMuaGFuZGxlcnMuaGFzKGV2ZW50KSkgdGhpcy5oYW5kbGVycy5zZXQoZXZlbnQsIG5ldyBTZXQoKSk7XHJcbiAgICB0aGlzLmhhbmRsZXJzLmdldChldmVudCkuYWRkKGhhbmRsZXIpO1xyXG4gIH1cclxuICBvZmYoZXZlbnQsIGhhbmRsZXIpIHtcclxuICAgIGlmICghdGhpcy5oYW5kbGVycy5oYXMoZXZlbnQpKSByZXR1cm47XHJcbiAgICBpZiAoaGFuZGxlcikgdGhpcy5oYW5kbGVycy5nZXQoZXZlbnQpLmRlbGV0ZShoYW5kbGVyKTtcclxuICAgIGVsc2UgdGhpcy5oYW5kbGVycy5zZXQoZXZlbnQsIG5ldyBTZXQoKSk7XHJcbiAgfVxyXG4gIGVtaXQoZXZlbnQsIC4uLmFyZ3MpIHtcclxuICAgIGNvbnN0IHNldCA9IHRoaXMuaGFuZGxlcnMuZ2V0KGV2ZW50KTtcclxuICAgIGlmICghc2V0KSByZXR1cm47XHJcbiAgICBmb3IgKGNvbnN0IGggb2YgQXJyYXkuZnJvbShzZXQpKSB7XHJcbiAgICAgIHRyeSB7IGgoLi4uYXJncyk7IH0gY2F0Y2ggKGVycikgeyB2b2lkIGVycjsgfVxyXG4gICAgfVxyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IF9ldmVudEJ1cyA9IG5ldyBFdmVudEJ1cygpO1xyXG5cclxuLy8gRGVmYXVsdCBleHBvcnQgZm9yIGNvbnZlbmllbmNlXHJcbmV4cG9ydCBkZWZhdWx0IF9ldmVudEJ1cztcclxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQTtBQUNBO0FBQ08sTUFBTUEsUUFBUSxDQUFDO0VBQ3BCQyxXQUFXQSxDQUFBLEVBQUc7SUFDWixJQUFJLENBQUNDLFFBQVEsR0FBRyxJQUFJQyxHQUFHLENBQUMsQ0FBQztFQUMzQjtFQUNBQyxFQUFFQSxDQUFDQyxLQUFLLEVBQUVDLE9BQU8sRUFBRTtJQUNqQixJQUFJLENBQUMsSUFBSSxDQUFDSixRQUFRLENBQUNLLEdBQUcsQ0FBQ0YsS0FBSyxDQUFDLEVBQUUsSUFBSSxDQUFDSCxRQUFRLENBQUNNLEdBQUcsQ0FBQ0gsS0FBSyxFQUFFLElBQUlJLEdBQUcsQ0FBQyxDQUFDLENBQUM7SUFDbEUsSUFBSSxDQUFDUCxRQUFRLENBQUNRLEdBQUcsQ0FBQ0wsS0FBSyxDQUFDLENBQUNNLEdBQUcsQ0FBQ0wsT0FBTyxDQUFDO0VBQ3ZDO0VBQ0FNLEdBQUdBLENBQUNQLEtBQUssRUFBRUMsT0FBTyxFQUFFO0lBQ2xCLElBQUksQ0FBQyxJQUFJLENBQUNKLFFBQVEsQ0FBQ0ssR0FBRyxDQUFDRixLQUFLLENBQUMsRUFBRTtJQUMvQixJQUFJQyxPQUFPLEVBQUUsSUFBSSxDQUFDSixRQUFRLENBQUNRLEdBQUcsQ0FBQ0wsS0FBSyxDQUFDLENBQUNRLE1BQU0sQ0FBQ1AsT0FBTyxDQUFDLENBQUMsS0FDakQsSUFBSSxDQUFDSixRQUFRLENBQUNNLEdBQUcsQ0FBQ0gsS0FBSyxFQUFFLElBQUlJLEdBQUcsQ0FBQyxDQUFDLENBQUM7RUFDMUM7RUFDQUssSUFBSUEsQ0FBQ1QsS0FBSyxFQUFFLEdBQUdVLElBQUksRUFBRTtJQUNuQixNQUFNUCxHQUFHLEdBQUcsSUFBSSxDQUFDTixRQUFRLENBQUNRLEdBQUcsQ0FBQ0wsS0FBSyxDQUFDO0lBQ3BDLElBQUksQ0FBQ0csR0FBRyxFQUFFO0lBQ1YsS0FBSyxNQUFNUSxDQUFDLElBQUlDLEtBQUssQ0FBQ0MsSUFBSSxDQUFDVixHQUFHLENBQUMsRUFBRTtNQUMvQixJQUFJO1FBQUVRLENBQUMsQ0FBQyxHQUFHRCxJQUFJLENBQUM7TUFBRSxDQUFDLENBQUMsT0FBT0ksR0FBRyxFQUFFO1FBQUUsS0FBS0EsR0FBRztNQUFFO0lBQzlDO0VBQ0Y7QUFDRjtBQUFDQyxPQUFBLENBQUFwQixRQUFBLEdBQUFBLFFBQUE7QUFFTSxNQUFNcUIsU0FBUyxHQUFBRCxPQUFBLENBQUFDLFNBQUEsR0FBRyxJQUFJckIsUUFBUSxDQUFDLENBQUM7O0FBRXZDO0FBQUEsSUFBQXNCLFFBQUEsR0FBQUYsT0FBQSxDQUFBRyxPQUFBLEdBQ2VGLFNBQVMiLCJpZ25vcmVMaXN0IjpbXX0=