{"version":3,"names":["_errors","require","_AnalysisCacheService","_propOllamaService","_interopRequireDefault","PropAnalysisAggregator","constructor","cacheService","fallbackGenerator","AnalysisCacheService","getInstance","FallbackContentGenerator","getAnalysis","request","cacheKey","generateCacheKey","cachedAnalysis","get","isStale","refreshAnalysisInBackground","timestamp","Date","toISOString","context","collectPredictionContext","analysis","generateAnalysis","set","error","console","propError","PropOllamaError","fromError","fallbackAvailable","fallbackAnalysis","generateFallbackAnalysis","player","name","team","position","getPositionForSport","sport","statType","recentStats","games","toLowerCase","line","minutes","seasonStats","trends","matchup","opponent","location","date","injuries","betting","overOdds","underOdds","lineMovement","marketSentiment","predictions","modelPredictions","confidenceScores","keyFactors","dataFetchError","prompt","buildPrompt","startTime","now","response","propOllamaService","sendChatMessage","message","analysisType","JSON","parse","stringify","generationTime","parsedResponse","parseResponse","content","overAnalysis","underAnalysis","confidenceOver","confidence","confidenceUnder","keyFactorsOver","keyFactorsUnder","dataQuality","modelUsed","model_used","overMatch","match","underMatch","trim","overConfidenceMatch","underConfidenceMatch","overFactorsMatch","underFactorsMatch","split","map","f","replace","filter","Boolean","undefined","parseInt","fallbackOver","generateOverAnalysis","fallbackUnder","generateUnderAnalysis","isFallback","exports","prop"],"sources":["PropAnalysisAggregator.ts"],"sourcesContent":["import { PropOllamaError, PropOllamaErrorType } from '../types/errors';\r\nimport { AnalysisCacheService } from './AnalysisCacheService';\r\nimport propOllamaService from './propOllamaService';\r\n\r\nexport interface PropAnalysisRequest {\r\n  propId: string;\r\n  player: string;\r\n  team: string;\r\n  sport: string;\r\n  statType: string;\r\n  line: number;\r\n  overOdds: number;\r\n  underOdds: number;\r\n  includeContext?: boolean;\r\n}\r\n\r\nexport interface PropAnalysisResponse {\r\n  overAnalysis: string;\r\n  underAnalysis: string;\r\n  confidenceOver: number;\r\n  confidenceUnder: number;\r\n  keyFactorsOver: string[];\r\n  keyFactorsUnder: string[];\r\n  dataQuality: number;\r\n  generationTime: number;\r\n  modelUsed: string;\r\n  isStale?: boolean;\r\n  isFallback?: boolean;\r\n  error?: PropOllamaError;\r\n  timestamp?: string;\r\n}\r\n\r\nexport interface AggregatedPropContext {\r\n  player: {\r\n    name: string;\r\n    team: string;\r\n    position: string;\r\n    recentStats: Record<string, number>;\r\n    seasonStats: Record<string, number>;\r\n    trends: string[];\r\n  };\r\n  matchup: {\r\n    opponent: string;\r\n    location: string;\r\n    date: string;\r\n    weather?: string;\r\n    injuries: string[];\r\n  };\r\n  betting: {\r\n    line: number;\r\n    overOdds: number;\r\n    underOdds: number;\r\n    lineMovement: string[];\r\n    marketSentiment: string;\r\n  };\r\n  predictions: {\r\n    modelPredictions: Record<string, number>;\r\n    confidenceScores: Record<string, number>;\r\n    keyFactors: string[];\r\n  };\r\n}\r\n\r\nexport class PropAnalysisAggregator {\r\n  private cacheService: AnalysisCacheService;\r\n  private fallbackGenerator: FallbackContentGenerator;\r\n  \r\n  constructor() {\r\n    this.cacheService = AnalysisCacheService.getInstance();\r\n    this.fallbackGenerator = new FallbackContentGenerator();\r\n  }\r\n  \r\n  async getAnalysis(request: PropAnalysisRequest): Promise<PropAnalysisResponse> {\r\n    const cacheKey = AnalysisCacheService.generateCacheKey(request);\r\n    \r\n    // Check cache first\r\n    const cachedAnalysis = this.cacheService.get(cacheKey);\r\n    if (cachedAnalysis) {\r\n      // If not stale, return immediately\r\n      if (!cachedAnalysis.isStale) {\r\n        return cachedAnalysis;\r\n      }\r\n      \r\n      // If stale, return but also refresh in background\r\n      this.refreshAnalysisInBackground(request, cacheKey);\r\n      return {\r\n        ...cachedAnalysis,\r\n        isStale: true,\r\n        timestamp: cachedAnalysis.timestamp || new Date().toISOString()\r\n      };\r\n    }\r\n    \r\n    try {\r\n      // Collect context from prediction components\r\n      const context = await this.collectPredictionContext(request);\r\n      \r\n      // Generate analysis using PropOllama\r\n      const analysis = await this.generateAnalysis(request, context);\r\n      \r\n      // Cache the result\r\n      this.cacheService.set(cacheKey, analysis);\r\n      \r\n      return analysis;\r\n    } catch (error) {\r\n      console.error('Error generating prop analysis:', error);\r\n      \r\n      // Convert to PropOllamaError if needed\r\n      const propError = error instanceof PropOllamaError \r\n        ? error \r\n        : PropOllamaError.fromError(error);\r\n      \r\n      // Generate fallback content if appropriate\r\n      if (propError.fallbackAvailable) {\r\n        const fallbackAnalysis = this.generateFallbackAnalysis(request, propError);\r\n        return fallbackAnalysis;\r\n      }\r\n      \r\n      // Re-throw the error if no fallback is available\r\n      throw propError;\r\n    }\r\n  }\r\n  \r\n  private async refreshAnalysisInBackground(request: PropAnalysisRequest, cacheKey: string): Promise<void> {\r\n    try {\r\n      const context = await this.collectPredictionContext(request);\r\n      const analysis = await this.generateAnalysis(request, context);\r\n      this.cacheService.set(cacheKey, analysis);\r\n    } catch (error) {\r\n      console.error('Background refresh failed:', error);\r\n      // Don't throw - this is a background operation\r\n    }\r\n  }\r\n  \r\n  private async collectPredictionContext(request: PropAnalysisRequest): Promise<AggregatedPropContext> {\r\n    try {\r\n      // In a real implementation, this would collect data from various prediction components\r\n      // For now, we'll return mock data\r\n      return {\r\n        player: {\r\n          name: request.player,\r\n          team: request.team,\r\n          position: this.getPositionForSport(request.sport, request.statType),\r\n          recentStats: {\r\n            games: 10,\r\n            [request.statType.toLowerCase()]: request.line * 0.9,\r\n            minutes: 32.5\r\n          },\r\n          seasonStats: {\r\n            games: 65,\r\n            [request.statType.toLowerCase()]: request.line * 1.1,\r\n            minutes: 34.2\r\n          },\r\n          trends: [\r\n            `${request.player} has exceeded ${request.line} ${request.statType} in 7 of last 10 games`,\r\n            `${request.player} averages 15% more ${request.statType} at home`\r\n          ]\r\n        },\r\n        matchup: {\r\n          opponent: \"Opponent Team\",\r\n          location: \"Home\",\r\n          date: new Date().toISOString(),\r\n          injuries: [\r\n            \"Key defender out with ankle injury\",\r\n            \"Backup center questionable\"\r\n          ]\r\n        },\r\n        betting: {\r\n          line: request.line,\r\n          overOdds: request.overOdds,\r\n          underOdds: request.underOdds,\r\n          lineMovement: [\r\n            `Line opened at ${request.line - 0.5}`,\r\n            `Line moved to ${request.line} due to heavy action`\r\n          ],\r\n          marketSentiment: \"60% of bets on Over\"\r\n        },\r\n        predictions: {\r\n          modelPredictions: {\r\n            \"ensemble\": request.line + 2.5,\r\n            \"historical\": request.line + 1.8,\r\n            \"matchup\": request.line + 3.2\r\n          },\r\n          confidenceScores: {\r\n            \"over\": 0.75,\r\n            \"under\": 0.25\r\n          },\r\n          keyFactors: [\r\n            \"Recent performance trend\",\r\n            \"Matchup advantage\",\r\n            \"Pace of play\"\r\n          ]\r\n        }\r\n      };\r\n    } catch (error) {\r\n      throw PropOllamaError.dataFetchError('Failed to collect prediction context');\r\n    }\r\n  }\r\n  \r\n  private getPositionForSport(sport: string, statType: string): string {\r\n    if (sport === 'NBA') {\r\n      if (statType === 'Points' || statType === 'Assists') return 'Guard';\r\n      if (statType === 'Rebounds' || statType === 'Blocks') return 'Forward';\r\n      return 'Player';\r\n    }\r\n    if (sport === 'NFL') {\r\n      if (statType === 'Passing Yards' || statType === 'Passing TDs') return 'Quarterback';\r\n      if (statType === 'Rushing Yards') return 'Running Back';\r\n      if (statType === 'Receiving Yards') return 'Wide Receiver';\r\n      return 'Player';\r\n    }\r\n    return 'Player';\r\n  }\r\n  \r\n  private async generateAnalysis(\r\n    request: PropAnalysisRequest, \r\n    context: AggregatedPropContext\r\n  ): Promise<PropAnalysisResponse> {\r\n    try {\r\n      // Build prompt for PropOllama\r\n      const prompt = this.buildPrompt(request, context);\r\n      \r\n      // Call PropOllama service\r\n      const startTime = Date.now();\r\n      const response = await propOllamaService.sendChatMessage({\r\n        message: prompt,\r\n        analysisType: 'prop',\r\n        context: JSON.parse(JSON.stringify(context)) as Record<string, unknown>\r\n      });\r\n      const generationTime = Date.now() - startTime;\r\n      \r\n      // Parse response\r\n      const parsedResponse = this.parseResponse(response.content);\r\n      \r\n      return {\r\n        overAnalysis: parsedResponse.overAnalysis,\r\n        underAnalysis: parsedResponse.underAnalysis,\r\n        confidenceOver: parsedResponse.confidenceOver || response.confidence * 100 || 75,\r\n        confidenceUnder: parsedResponse.confidenceUnder || (100 - (response.confidence * 100)) || 25,\r\n        keyFactorsOver: parsedResponse.keyFactorsOver || context.predictions.keyFactors,\r\n        keyFactorsUnder: parsedResponse.keyFactorsUnder || context.predictions.keyFactors,\r\n        dataQuality: 0.8,\r\n        generationTime,\r\n        modelUsed: response.model_used || 'llama2'\r\n      };\r\n    } catch (error) {\r\n      throw PropOllamaError.fromError(error);\r\n    }\r\n  }\r\n  \r\n  private buildPrompt(request: PropAnalysisRequest, context: AggregatedPropContext): string {\r\n    return `Analyze the following prop bet for ${request.player} (${request.team}):\r\n${request.statType} Line: ${request.line}\r\nOver Odds: ${request.overOdds}\r\nUnder Odds: ${request.underOdds}\r\n\r\nPlease provide separate detailed analyses for both the OVER and UNDER scenarios.\r\nInclude key factors, confidence level, and reasoning for each scenario.\r\n\r\nFormat your response with clear sections for OVER ANALYSIS and UNDER ANALYSIS.`;\r\n  }\r\n  \r\n  private parseResponse(content: string): {\r\n    overAnalysis: string;\r\n    underAnalysis: string;\r\n    confidenceOver?: number;\r\n    confidenceUnder?: number;\r\n    keyFactorsOver?: string[];\r\n    keyFactorsUnder?: string[];\r\n  } {\r\n    // Simple parsing logic - in a real implementation this would be more robust\r\n    const overMatch = content.match(/OVER ANALYSIS:?([\\s\\S]*?)(?=UNDER ANALYSIS|$)/i);\r\n    const underMatch = content.match(/UNDER ANALYSIS:?([\\s\\S]*?)(?=$)/i);\r\n    \r\n    const overAnalysis = overMatch ? overMatch[1].trim() : 'No over analysis available';\r\n    const underAnalysis = underMatch ? underMatch[1].trim() : 'No under analysis available';\r\n    \r\n    // Extract confidence if present\r\n    const overConfidenceMatch = overAnalysis.match(/confidence:?\\s*(\\d+)%/i);\r\n    const underConfidenceMatch = underAnalysis.match(/confidence:?\\s*(\\d+)%/i);\r\n    \r\n    // Extract key factors if present\r\n    const overFactorsMatch = overAnalysis.match(/key factors:?\\s*([\\s\\S]*?)(?=\\n\\n|$)/i);\r\n    const underFactorsMatch = underAnalysis.match(/key factors:?\\s*([\\s\\S]*?)(?=\\n\\n|$)/i);\r\n    \r\n    const keyFactorsOver = overFactorsMatch \r\n      ? overFactorsMatch[1].split('\\n').map(f => f.replace(/^[•\\-*]\\s*/, '').trim()).filter(Boolean)\r\n      : undefined;\r\n      \r\n    const keyFactorsUnder = underFactorsMatch\r\n      ? underFactorsMatch[1].split('\\n').map(f => f.replace(/^[•\\-*]\\s*/, '').trim()).filter(Boolean)\r\n      : undefined;\r\n    \r\n    return {\r\n      overAnalysis,\r\n      underAnalysis,\r\n      confidenceOver: overConfidenceMatch ? parseInt(overConfidenceMatch[1], 10) : undefined,\r\n      confidenceUnder: underConfidenceMatch ? parseInt(underConfidenceMatch[1], 10) : undefined,\r\n      keyFactorsOver,\r\n      keyFactorsUnder\r\n    };\r\n  }\r\n  \r\n  private generateFallbackAnalysis(request: PropAnalysisRequest, error: PropOllamaError): PropAnalysisResponse {\r\n    const fallbackOver = this.fallbackGenerator.generateOverAnalysis(request);\r\n    const fallbackUnder = this.fallbackGenerator.generateUnderAnalysis(request);\r\n    \r\n    return {\r\n      overAnalysis: fallbackOver.analysis,\r\n      underAnalysis: fallbackUnder.analysis,\r\n      confidenceOver: fallbackOver.confidence,\r\n      confidenceUnder: fallbackUnder.confidence,\r\n      keyFactorsOver: fallbackOver.keyFactors,\r\n      keyFactorsUnder: fallbackUnder.keyFactors,\r\n      dataQuality: 0.5,\r\n      generationTime: 0,\r\n      modelUsed: 'Fallback Generator',\r\n      isFallback: true,\r\n      error\r\n    };\r\n  }\r\n}\r\n\r\nclass FallbackContentGenerator {\r\n  generateOverAnalysis(prop: PropAnalysisRequest): { \r\n    analysis: string; \r\n    confidence: number; \r\n    keyFactors: string[] \r\n  } {\r\n    return {\r\n      analysis: `Based on historical data, ${prop.player} has a good chance of exceeding the ${prop.statType} line of ${prop.line}. Recent performance and matchup factors suggest the OVER is a reasonable bet.`,\r\n      confidence: 65,\r\n      keyFactors: [\r\n        'Historical performance',\r\n        'Recent trends',\r\n        'Matchup factors'\r\n      ]\r\n    };\r\n  }\r\n  \r\n  generateUnderAnalysis(prop: PropAnalysisRequest): { \r\n    analysis: string; \r\n    confidence: number; \r\n    keyFactors: string[] \r\n  } {\r\n    return {\r\n      analysis: `There are some factors that could limit ${prop.player}'s ${prop.statType} production below the line of ${prop.line}. Consider team dynamics and potential game script when evaluating the UNDER.`,\r\n      confidence: 35,\r\n      keyFactors: [\r\n        'Team dynamics',\r\n        'Game script',\r\n        'Defensive matchup'\r\n      ]\r\n    };\r\n  }\r\n}"],"mappings":"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","ignoreList":[]}