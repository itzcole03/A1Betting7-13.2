{"version":3,"names":["EventBus","constructor","handlers","Map","on","event","handler","has","set","Set","get","add","off","delete","emit","args","h","Array","from","err","exports","_eventBus","_default","default"],"sources":["EventBus.js"],"sourcesContent":["// Lightweight EventBus used in the frontend. This file uses pure ESM exports\r\n// so Vite/dev server and the browser can import named exports reliably.\r\nexport class EventBus {\r\n  constructor() {\r\n    this.handlers = new Map();\r\n  }\r\n  on(event, handler) {\r\n    if (!this.handlers.has(event)) this.handlers.set(event, new Set());\r\n    this.handlers.get(event).add(handler);\r\n  }\r\n  off(event, handler) {\r\n    if (!this.handlers.has(event)) return;\r\n    if (handler) this.handlers.get(event).delete(handler);\r\n    else this.handlers.set(event, new Set());\r\n  }\r\n  emit(event, ...args) {\r\n    const set = this.handlers.get(event);\r\n    if (!set) return;\r\n    for (const h of Array.from(set)) {\r\n      try { h(...args); } catch (err) { void err; }\r\n    }\r\n  }\r\n}\r\n\r\nexport const _eventBus = new EventBus();\r\n\r\n// Default export for convenience\r\nexport default _eventBus;\r\n"],"mappings":";;;;;;AAAA;AACA;AACO,MAAMA,QAAQ,CAAC;EACpBC,WAAWA,CAAA,EAAG;IACZ,IAAI,CAACC,QAAQ,GAAG,IAAIC,GAAG,CAAC,CAAC;EAC3B;EACAC,EAAEA,CAACC,KAAK,EAAEC,OAAO,EAAE;IACjB,IAAI,CAAC,IAAI,CAACJ,QAAQ,CAACK,GAAG,CAACF,KAAK,CAAC,EAAE,IAAI,CAACH,QAAQ,CAACM,GAAG,CAACH,KAAK,EAAE,IAAII,GAAG,CAAC,CAAC,CAAC;IAClE,IAAI,CAACP,QAAQ,CAACQ,GAAG,CAACL,KAAK,CAAC,CAACM,GAAG,CAACL,OAAO,CAAC;EACvC;EACAM,GAAGA,CAACP,KAAK,EAAEC,OAAO,EAAE;IAClB,IAAI,CAAC,IAAI,CAACJ,QAAQ,CAACK,GAAG,CAACF,KAAK,CAAC,EAAE;IAC/B,IAAIC,OAAO,EAAE,IAAI,CAACJ,QAAQ,CAACQ,GAAG,CAACL,KAAK,CAAC,CAACQ,MAAM,CAACP,OAAO,CAAC,CAAC,KACjD,IAAI,CAACJ,QAAQ,CAACM,GAAG,CAACH,KAAK,EAAE,IAAII,GAAG,CAAC,CAAC,CAAC;EAC1C;EACAK,IAAIA,CAACT,KAAK,EAAE,GAAGU,IAAI,EAAE;IACnB,MAAMP,GAAG,GAAG,IAAI,CAACN,QAAQ,CAACQ,GAAG,CAACL,KAAK,CAAC;IACpC,IAAI,CAACG,GAAG,EAAE;IACV,KAAK,MAAMQ,CAAC,IAAIC,KAAK,CAACC,IAAI,CAACV,GAAG,CAAC,EAAE;MAC/B,IAAI;QAAEQ,CAAC,CAAC,GAAGD,IAAI,CAAC;MAAE,CAAC,CAAC,OAAOI,GAAG,EAAE;QAAE,KAAKA,GAAG;MAAE;IAC9C;EACF;AACF;AAACC,OAAA,CAAApB,QAAA,GAAAA,QAAA;AAEM,MAAMqB,SAAS,GAAAD,OAAA,CAAAC,SAAA,GAAG,IAAIrB,QAAQ,CAAC,CAAC;;AAEvC;AAAA,IAAAsB,QAAA,GAAAF,OAAA,CAAAG,OAAA,GACeF,SAAS","ignoreList":[]}