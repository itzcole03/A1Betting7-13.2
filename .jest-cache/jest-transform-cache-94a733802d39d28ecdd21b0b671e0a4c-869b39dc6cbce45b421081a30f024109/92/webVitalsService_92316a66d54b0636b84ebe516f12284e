e6fc6b5548d605f01d742c6fd9d3c47d
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.webVitalsService = exports.default = void 0;
var _webVitals = require("web-vitals");
var _performanceMetrics = require("../perf/performanceMetrics");
var _logger = require("../utils/logger");
/**
 * Web Vitals Service - 2025 Best Practices
 *
 * Comprehensive Core Web Vitals tracking with modern features:
 * - LCP (Largest Contentful Paint)
 * - CLS (Cumulative Layout Shift)
 * - INP (Interaction to Next Paint) - replaced FID in 2024
 * - TTFB (Time to First Byte)
 * - FCP (First Contentful Paint)
 */

class WebVitalsService {
  constructor() {
    this.metrics = {
      lcp: null,
      cls: null,
      inp: null,
      ttfb: null,
      fcp: null
    };
    this.entries = [];
    this.lcpLogged = false;
    // Idempotency guard for custom metrics
    this.emittedCustomMetrics = new Set();
  }
  getRating(name, value) {
    const thresholds = {
      lcp: {
        good: 2500,
        poor: 4000
      },
      cls: {
        good: 0.1,
        poor: 0.25
      },
      inp: {
        good: 200,
        poor: 500
      },
      ttfb: {
        good: 800,
        poor: 1800
      },
      fcp: {
        good: 1800,
        poor: 3000
      }
    };
    const threshold = thresholds[name];
    if (!threshold) return 'good';
    if (value <= threshold.good) return 'good';
    if (value <= threshold.poor) return 'needs-improvement';
    return 'poor';
  }
  logMetric(metric) {
    // Skip LCP logging if already logged once
    if (metric.name === 'LCP' && this.lcpLogged) {
      return;
    }
    const entry = {
      name: metric.name,
      value: metric.value,
      rating: this.getRating(metric.name, metric.value),
      timestamp: Date.now(),
      url: window.location.href,
      userAgent: navigator.userAgent
    };
    this.entries.push(entry);
    this.metrics[metric.name] = metric.value;

    // Mark LCP as logged
    if (metric.name === 'LCP') {
      this.lcpLogged = true;
    }

    // Log to console in development
    if (process.env.NODE_ENV === 'development') {
      // eslint-disable-next-line no-console
      console.log(`[WebVitals] ${metric.name}:`, {
        value: metric.value,
        rating: entry.rating,
        threshold: this.getThresholdInfo(metric.name)
      });
    }

    // Send to analytics in production
    if (process.env.NODE_ENV === 'production') {
      this.sendToAnalytics(entry);
    }
  }
  getThresholdInfo(name) {
    const thresholds = {
      lcp: {
        good: '≤2.5s',
        poor: '>4s',
        unit: 'ms'
      },
      cls: {
        good: '≤0.1',
        poor: '>0.25',
        unit: ''
      },
      inp: {
        good: '≤200ms',
        poor: '>500ms',
        unit: 'ms'
      },
      ttfb: {
        good: '≤800ms',
        poor: '>1.8s',
        unit: 'ms'
      },
      fcp: {
        good: '≤1.8s',
        poor: '>3s',
        unit: 'ms'
      }
    };
    return thresholds[name];
  }
  async sendToAnalytics(entry) {
    try {
      // Send to your analytics service
      const response = await fetch('/api/analytics/vitals', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json'
        },
        body: JSON.stringify(entry)
      });
      if (!response.ok) {
        _logger.logger.warn('Failed to send Web Vitals data to analytics', {
          status: response.status
        }, 'WebVitals');
      } else {
        _logger.logger.debug('Sent Web Vitals metric', {
          name: entry.name,
          value: entry.value
        }, 'WebVitals');
      }
    } catch (error) {
      _logger.logger.warn('Error sending Web Vitals data', {
        error
      }, 'WebVitals');
    }
  }
  init() {
    if (typeof window === 'undefined') return;
    // Use unified initialization (idempotent). If already initialized elsewhere, we only
    // attach custom metrics. Otherwise we route metrics through our logMetric method.
    const firstInit = (0, _performanceMetrics.initWebVitals)({
      onMetric: m => {
        // Map unified metric to our structure where applicable
        // Only log known core metrics into internal storage
        if (['LCP', 'CLS', 'INP', 'TTFB', 'FCP'].includes(m.name)) {
          const rating = (() => {
            if (m.rating === 'good' || m.rating === 'needs-improvement' || m.rating === 'poor') return m.rating;
            // Fallback classification based on value thresholds similar to getRating
            switch (m.name) {
              case 'LCP':
                return m.value <= 2500 ? 'good' : m.value <= 4000 ? 'needs-improvement' : 'poor';
              case 'CLS':
                return m.value <= 0.1 ? 'good' : m.value <= 0.25 ? 'needs-improvement' : 'poor';
              case 'INP':
                return m.value <= 200 ? 'good' : m.value <= 500 ? 'needs-improvement' : 'poor';
              case 'TTFB':
                return m.value <= 800 ? 'good' : m.value <= 1800 ? 'needs-improvement' : 'poor';
              case 'FCP':
                return m.value <= 1800 ? 'good' : m.value <= 3000 ? 'needs-improvement' : 'poor';
              default:
                return 'good';
            }
          })();
          const minimalMetric = {
            name: m.name,
            value: m.value,
            rating,
            delta: m.delta || 0,
            id: m.id || m.name,
            // Provide required but unused fields with safe defaults
            entries: [],
            navigationType: 'navigate'
          };
          this.logMetric(minimalMetric);
        }
      },
      includeNavigationMetrics: false
    });

    // If this was not the first init, we skip directly registering listeners to avoid duplicates
    if (firstInit) {
      // We already registered via initWebVitals through the callback provided above
    } else {
      // Fallback: ensure metrics still flow if unified init occurred before service creation
      (0, _webVitals.onLCP)(metric => this.logMetric(metric));
      (0, _webVitals.onCLS)(this.logMetric.bind(this));
      (0, _webVitals.onINP)(this.logMetric.bind(this));
      (0, _webVitals.onTTFB)(this.logMetric.bind(this));
      (0, _webVitals.onFCP)(this.logMetric.bind(this));
    }
    this.trackCustomMetrics();
  }
  trackCustomMetrics() {
    // Track total load time using modern Navigation Timing API
    if ('performance' in window && 'getEntriesByType' in window.performance) {
      window.addEventListener('load', () => {
        try {
          const start = performance.getEntriesByType("navigation")[0];
          const totalLoadTime = Math.round(start.duration);
          if (totalLoadTime > 0) {
            // eslint-disable-next-line no-console
            console.log('[Performance] Total Load Time:', `${totalLoadTime}ms`);
          }
        } catch (error) {
          // eslint-disable-next-line no-console
          console.warn('[Performance] Could not calculate total load time:', error);
        }

        // Track JavaScript bundle size
        const resources = performance.getEntriesByType('resource');
        const jsResources = resources.filter(resource => resource.name.includes('.js') && !resource.name.includes('node_modules'));
        const totalJSSize = jsResources.reduce((total, resource) => {
          return total + (resource.transferSize || 0);
        }, 0);

        // eslint-disable-next-line no-console
        console.log('[Performance] Total JS Bundle Size:', `${(totalJSSize / 1024).toFixed(2)} KB`);
      });
    }

    // Track memory usage if available
    if ('memory' in performance) {
      const perfWithMemory = performance;
      if (perfWithMemory.memory) {
        const {
          usedJSHeapSize,
          totalJSHeapSize,
          jsHeapSizeLimit
        } = perfWithMemory.memory;
        _logger.logger.debug('Memory Usage', {
          usedMB: +(usedJSHeapSize / 1024 / 1024).toFixed(2),
          totalMB: +(totalJSHeapSize / 1024 / 1024).toFixed(2),
          limitMB: +(jsHeapSizeLimit / 1024 / 1024).toFixed(2)
        }, 'WebVitals');
      }
    }
  }
  getMetrics() {
    return {
      ...this.metrics
    };
  }

  /**
   * Track custom metrics for additional insights with idempotency protection
   */
  trackCustomMetric(name, value, attributes) {
    // Idempotency guard: prevent duplicate emissions of the same custom metric
    const metricKey = attributes ? `${name}:${JSON.stringify(attributes)}` : name;
    if (this.emittedCustomMetrics.has(metricKey)) {
      if (process.env.NODE_ENV === 'development') {
        // eslint-disable-next-line no-console
        console.log(`[WebVitals] Skipping duplicate custom metric: ${name}`, {
          attributes
        });
      }
      return;
    }

    // Mark as emitted to prevent duplicates
    this.emittedCustomMetrics.add(metricKey);
    _logger.logger.info(`Custom metric ${name}`, {
      value,
      attributes
    }, 'WebVitals');

    // Store custom metric for later reporting
    if (attributes) {
      _logger.logger.debug(`Custom metric attributes`, attributes, 'WebVitals');
    }
  }
  getEntries() {
    return [...this.entries];
  }

  /**
   * Clear custom metrics idempotency guard (for testing or manual reset)
   */
  clearCustomMetricsHistory() {
    this.emittedCustomMetrics.clear();
    if (process.env.NODE_ENV === 'development') {
      // eslint-disable-next-line no-console
      console.log('[WebVitals] Custom metrics history cleared - duplicates will be allowed again');
    }
  }
  getPerformanceScore() {
    const validMetrics = Object.values(this.metrics).filter(value => value !== null);
    if (validMetrics.length === 0) return 0;
    const scores = this.entries.map(entry => {
      switch (entry.rating) {
        case 'good':
          return 100;
        case 'needs-improvement':
          return 50;
        case 'poor':
          return 0;
        default:
          return 0;
      }
    });
    return scores.reduce((sum, score) => sum + score, 0) / scores.length;
  }
  exportReport() {
    const report = {
      timestamp: new Date().toISOString(),
      url: window.location.href,
      userAgent: navigator.userAgent,
      metrics: this.metrics,
      entries: this.entries,
      score: this.getPerformanceScore()
    };
    return JSON.stringify(report, null, 2);
  }
}

// Singleton instance
const webVitalsService = exports.webVitalsService = new WebVitalsService();

// Auto-initialize in browser
if (typeof window !== 'undefined') {
  webVitalsService.init();
}
var _default = exports.default = webVitalsService;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfd2ViVml0YWxzIiwicmVxdWlyZSIsIl9wZXJmb3JtYW5jZU1ldHJpY3MiLCJfbG9nZ2VyIiwiV2ViVml0YWxzU2VydmljZSIsImNvbnN0cnVjdG9yIiwibWV0cmljcyIsImxjcCIsImNscyIsImlucCIsInR0ZmIiLCJmY3AiLCJlbnRyaWVzIiwibGNwTG9nZ2VkIiwiZW1pdHRlZEN1c3RvbU1ldHJpY3MiLCJTZXQiLCJnZXRSYXRpbmciLCJuYW1lIiwidmFsdWUiLCJ0aHJlc2hvbGRzIiwiZ29vZCIsInBvb3IiLCJ0aHJlc2hvbGQiLCJsb2dNZXRyaWMiLCJtZXRyaWMiLCJlbnRyeSIsInJhdGluZyIsInRpbWVzdGFtcCIsIkRhdGUiLCJub3ciLCJ1cmwiLCJ3aW5kb3ciLCJsb2NhdGlvbiIsImhyZWYiLCJ1c2VyQWdlbnQiLCJuYXZpZ2F0b3IiLCJwdXNoIiwicHJvY2VzcyIsImVudiIsIk5PREVfRU5WIiwiY29uc29sZSIsImxvZyIsImdldFRocmVzaG9sZEluZm8iLCJzZW5kVG9BbmFseXRpY3MiLCJ1bml0IiwicmVzcG9uc2UiLCJmZXRjaCIsIm1ldGhvZCIsImhlYWRlcnMiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsIm9rIiwibG9nZ2VyIiwid2FybiIsInN0YXR1cyIsImRlYnVnIiwiZXJyb3IiLCJpbml0IiwiZmlyc3RJbml0IiwiaW5pdFdlYlZpdGFscyIsIm9uTWV0cmljIiwibSIsImluY2x1ZGVzIiwibWluaW1hbE1ldHJpYyIsImRlbHRhIiwiaWQiLCJuYXZpZ2F0aW9uVHlwZSIsImluY2x1ZGVOYXZpZ2F0aW9uTWV0cmljcyIsIm9uTENQIiwib25DTFMiLCJiaW5kIiwib25JTlAiLCJvblRURkIiLCJvbkZDUCIsInRyYWNrQ3VzdG9tTWV0cmljcyIsInBlcmZvcm1hbmNlIiwiYWRkRXZlbnRMaXN0ZW5lciIsInN0YXJ0IiwiZ2V0RW50cmllc0J5VHlwZSIsInRvdGFsTG9hZFRpbWUiLCJNYXRoIiwicm91bmQiLCJkdXJhdGlvbiIsInJlc291cmNlcyIsImpzUmVzb3VyY2VzIiwiZmlsdGVyIiwicmVzb3VyY2UiLCJ0b3RhbEpTU2l6ZSIsInJlZHVjZSIsInRvdGFsIiwidHJhbnNmZXJTaXplIiwidG9GaXhlZCIsInBlcmZXaXRoTWVtb3J5IiwibWVtb3J5IiwidXNlZEpTSGVhcFNpemUiLCJ0b3RhbEpTSGVhcFNpemUiLCJqc0hlYXBTaXplTGltaXQiLCJ1c2VkTUIiLCJ0b3RhbE1CIiwibGltaXRNQiIsImdldE1ldHJpY3MiLCJ0cmFja0N1c3RvbU1ldHJpYyIsImF0dHJpYnV0ZXMiLCJtZXRyaWNLZXkiLCJoYXMiLCJhZGQiLCJpbmZvIiwiZ2V0RW50cmllcyIsImNsZWFyQ3VzdG9tTWV0cmljc0hpc3RvcnkiLCJjbGVhciIsImdldFBlcmZvcm1hbmNlU2NvcmUiLCJ2YWxpZE1ldHJpY3MiLCJPYmplY3QiLCJ2YWx1ZXMiLCJsZW5ndGgiLCJzY29yZXMiLCJtYXAiLCJzdW0iLCJzY29yZSIsImV4cG9ydFJlcG9ydCIsInJlcG9ydCIsInRvSVNPU3RyaW5nIiwid2ViVml0YWxzU2VydmljZSIsImV4cG9ydHMiLCJfZGVmYXVsdCIsImRlZmF1bHQiXSwic291cmNlcyI6WyJ3ZWJWaXRhbHNTZXJ2aWNlLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxyXG4gKiBXZWIgVml0YWxzIFNlcnZpY2UgLSAyMDI1IEJlc3QgUHJhY3RpY2VzXHJcbiAqXHJcbiAqIENvbXByZWhlbnNpdmUgQ29yZSBXZWIgVml0YWxzIHRyYWNraW5nIHdpdGggbW9kZXJuIGZlYXR1cmVzOlxyXG4gKiAtIExDUCAoTGFyZ2VzdCBDb250ZW50ZnVsIFBhaW50KVxyXG4gKiAtIENMUyAoQ3VtdWxhdGl2ZSBMYXlvdXQgU2hpZnQpXHJcbiAqIC0gSU5QIChJbnRlcmFjdGlvbiB0byBOZXh0IFBhaW50KSAtIHJlcGxhY2VkIEZJRCBpbiAyMDI0XHJcbiAqIC0gVFRGQiAoVGltZSB0byBGaXJzdCBCeXRlKVxyXG4gKiAtIEZDUCAoRmlyc3QgQ29udGVudGZ1bCBQYWludClcclxuICovXHJcblxyXG5pbXBvcnQgeyBvbkNMUywgb25GQ1AsIG9uSU5QLCBvbkxDUCwgb25UVEZCLCB0eXBlIE1ldHJpYyB9IGZyb20gJ3dlYi12aXRhbHMnO1xyXG5pbXBvcnQgeyBpbml0V2ViVml0YWxzIH0gZnJvbSAnLi4vcGVyZi9wZXJmb3JtYW5jZU1ldHJpY3MnO1xyXG5pbXBvcnQgeyBsb2dnZXIgfSBmcm9tICcuLi91dGlscy9sb2dnZXInO1xyXG5cclxuaW50ZXJmYWNlIFdlYlZpdGFsc01ldHJpY3Mge1xyXG4gIGxjcDogbnVtYmVyIHwgbnVsbDtcclxuICBjbHM6IG51bWJlciB8IG51bGw7XHJcbiAgaW5wOiBudW1iZXIgfCBudWxsO1xyXG4gIHR0ZmI6IG51bWJlciB8IG51bGw7XHJcbiAgZmNwOiBudW1iZXIgfCBudWxsO1xyXG59XHJcblxyXG5pbnRlcmZhY2UgUGVyZm9ybWFuY2VFbnRyeSB7XHJcbiAgbmFtZTogc3RyaW5nO1xyXG4gIHZhbHVlOiBudW1iZXI7XHJcbiAgcmF0aW5nOiAnZ29vZCcgfCAnbmVlZHMtaW1wcm92ZW1lbnQnIHwgJ3Bvb3InO1xyXG4gIHRpbWVzdGFtcDogbnVtYmVyO1xyXG4gIHVybDogc3RyaW5nO1xyXG4gIHVzZXJBZ2VudDogc3RyaW5nO1xyXG59XHJcblxyXG5jbGFzcyBXZWJWaXRhbHNTZXJ2aWNlIHtcclxuICBwcml2YXRlIG1ldHJpY3M6IFdlYlZpdGFsc01ldHJpY3MgPSB7XHJcbiAgICBsY3A6IG51bGwsXHJcbiAgICBjbHM6IG51bGwsXHJcbiAgICBpbnA6IG51bGwsXHJcbiAgICB0dGZiOiBudWxsLFxyXG4gICAgZmNwOiBudWxsLFxyXG4gIH07XHJcblxyXG4gIHByaXZhdGUgZW50cmllczogUGVyZm9ybWFuY2VFbnRyeVtdID0gW107XHJcbiAgcHJpdmF0ZSBsY3BMb2dnZWQ6IGJvb2xlYW4gPSBmYWxzZTtcclxuICBcclxuICAvLyBJZGVtcG90ZW5jeSBndWFyZCBmb3IgY3VzdG9tIG1ldHJpY3NcclxuICBwcml2YXRlIGVtaXR0ZWRDdXN0b21NZXRyaWNzOiBTZXQ8c3RyaW5nPiA9IG5ldyBTZXQoKTtcclxuXHJcbiAgcHJpdmF0ZSBnZXRSYXRpbmcobmFtZTogc3RyaW5nLCB2YWx1ZTogbnVtYmVyKTogJ2dvb2QnIHwgJ25lZWRzLWltcHJvdmVtZW50JyB8ICdwb29yJyB7XHJcbiAgICBjb25zdCB0aHJlc2hvbGRzID0ge1xyXG4gICAgICBsY3A6IHsgZ29vZDogMjUwMCwgcG9vcjogNDAwMCB9LFxyXG4gICAgICBjbHM6IHsgZ29vZDogMC4xLCBwb29yOiAwLjI1IH0sXHJcbiAgICAgIGlucDogeyBnb29kOiAyMDAsIHBvb3I6IDUwMCB9LFxyXG4gICAgICB0dGZiOiB7IGdvb2Q6IDgwMCwgcG9vcjogMTgwMCB9LFxyXG4gICAgICBmY3A6IHsgZ29vZDogMTgwMCwgcG9vcjogMzAwMCB9LFxyXG4gICAgfTtcclxuXHJcbiAgICBjb25zdCB0aHJlc2hvbGQgPSB0aHJlc2hvbGRzW25hbWUgYXMga2V5b2YgdHlwZW9mIHRocmVzaG9sZHNdO1xyXG4gICAgaWYgKCF0aHJlc2hvbGQpIHJldHVybiAnZ29vZCc7XHJcblxyXG4gICAgaWYgKHZhbHVlIDw9IHRocmVzaG9sZC5nb29kKSByZXR1cm4gJ2dvb2QnO1xyXG4gICAgaWYgKHZhbHVlIDw9IHRocmVzaG9sZC5wb29yKSByZXR1cm4gJ25lZWRzLWltcHJvdmVtZW50JztcclxuICAgIHJldHVybiAncG9vcic7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGxvZ01ldHJpYyhtZXRyaWM6IE1ldHJpYyk6IHZvaWQge1xyXG4gICAgLy8gU2tpcCBMQ1AgbG9nZ2luZyBpZiBhbHJlYWR5IGxvZ2dlZCBvbmNlXHJcbiAgICBpZiAobWV0cmljLm5hbWUgPT09ICdMQ1AnICYmIHRoaXMubGNwTG9nZ2VkKSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBlbnRyeTogUGVyZm9ybWFuY2VFbnRyeSA9IHtcclxuICAgICAgbmFtZTogbWV0cmljLm5hbWUsXHJcbiAgICAgIHZhbHVlOiBtZXRyaWMudmFsdWUsXHJcbiAgICAgIHJhdGluZzogdGhpcy5nZXRSYXRpbmcobWV0cmljLm5hbWUsIG1ldHJpYy52YWx1ZSksXHJcbiAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKSxcclxuICAgICAgdXJsOiB3aW5kb3cubG9jYXRpb24uaHJlZixcclxuICAgICAgdXNlckFnZW50OiBuYXZpZ2F0b3IudXNlckFnZW50LFxyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLmVudHJpZXMucHVzaChlbnRyeSk7XHJcbiAgICB0aGlzLm1ldHJpY3NbbWV0cmljLm5hbWUgYXMga2V5b2YgV2ViVml0YWxzTWV0cmljc10gPSBtZXRyaWMudmFsdWU7XHJcblxyXG4gICAgLy8gTWFyayBMQ1AgYXMgbG9nZ2VkXHJcbiAgICBpZiAobWV0cmljLm5hbWUgPT09ICdMQ1AnKSB7XHJcbiAgICAgIHRoaXMubGNwTG9nZ2VkID0gdHJ1ZTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBMb2cgdG8gY29uc29sZSBpbiBkZXZlbG9wbWVudFxyXG4gICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAnZGV2ZWxvcG1lbnQnKSB7XHJcbiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jb25zb2xlXHJcbiAgICAgIGNvbnNvbGUubG9nKGBbV2ViVml0YWxzXSAke21ldHJpYy5uYW1lfTpgLCB7XHJcbiAgICAgICAgdmFsdWU6IG1ldHJpYy52YWx1ZSxcclxuICAgICAgICByYXRpbmc6IGVudHJ5LnJhdGluZyxcclxuICAgICAgICB0aHJlc2hvbGQ6IHRoaXMuZ2V0VGhyZXNob2xkSW5mbyhtZXRyaWMubmFtZSksXHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFNlbmQgdG8gYW5hbHl0aWNzIGluIHByb2R1Y3Rpb25cclxuICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ3Byb2R1Y3Rpb24nKSB7XHJcbiAgICAgIHRoaXMuc2VuZFRvQW5hbHl0aWNzKGVudHJ5KTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHByaXZhdGUgZ2V0VGhyZXNob2xkSW5mbyhuYW1lOiBzdHJpbmcpIHtcclxuICAgIGNvbnN0IHRocmVzaG9sZHMgPSB7XHJcbiAgICAgIGxjcDogeyBnb29kOiAn4omkMi41cycsIHBvb3I6ICc+NHMnLCB1bml0OiAnbXMnIH0sXHJcbiAgICAgIGNsczogeyBnb29kOiAn4omkMC4xJywgcG9vcjogJz4wLjI1JywgdW5pdDogJycgfSxcclxuICAgICAgaW5wOiB7IGdvb2Q6ICfiiaQyMDBtcycsIHBvb3I6ICc+NTAwbXMnLCB1bml0OiAnbXMnIH0sXHJcbiAgICAgIHR0ZmI6IHsgZ29vZDogJ+KJpDgwMG1zJywgcG9vcjogJz4xLjhzJywgdW5pdDogJ21zJyB9LFxyXG4gICAgICBmY3A6IHsgZ29vZDogJ+KJpDEuOHMnLCBwb29yOiAnPjNzJywgdW5pdDogJ21zJyB9LFxyXG4gICAgfTtcclxuICAgIHJldHVybiB0aHJlc2hvbGRzW25hbWUgYXMga2V5b2YgdHlwZW9mIHRocmVzaG9sZHNdO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBhc3luYyBzZW5kVG9BbmFseXRpY3MoZW50cnk6IFBlcmZvcm1hbmNlRW50cnkpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgIHRyeSB7XHJcbiAgICAgIC8vIFNlbmQgdG8geW91ciBhbmFseXRpY3Mgc2VydmljZVxyXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKCcvYXBpL2FuYWx5dGljcy92aXRhbHMnLCB7XHJcbiAgICAgICAgbWV0aG9kOiAnUE9TVCcsXHJcbiAgICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcclxuICAgICAgICB9LFxyXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KGVudHJ5KSxcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XHJcbiAgICAgICAgbG9nZ2VyLndhcm4oJ0ZhaWxlZCB0byBzZW5kIFdlYiBWaXRhbHMgZGF0YSB0byBhbmFseXRpY3MnLCB7IHN0YXR1czogcmVzcG9uc2Uuc3RhdHVzIH0sICdXZWJWaXRhbHMnKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBsb2dnZXIuZGVidWcoJ1NlbnQgV2ViIFZpdGFscyBtZXRyaWMnLCB7IG5hbWU6IGVudHJ5Lm5hbWUsIHZhbHVlOiBlbnRyeS52YWx1ZSB9LCAnV2ViVml0YWxzJyk7XHJcbiAgICAgIH1cclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGxvZ2dlci53YXJuKCdFcnJvciBzZW5kaW5nIFdlYiBWaXRhbHMgZGF0YScsIHsgZXJyb3IgfSwgJ1dlYlZpdGFscycpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHVibGljIGluaXQoKTogdm9pZCB7XHJcbiAgICBpZiAodHlwZW9mIHdpbmRvdyA9PT0gJ3VuZGVmaW5lZCcpIHJldHVybjtcclxuICAgIC8vIFVzZSB1bmlmaWVkIGluaXRpYWxpemF0aW9uIChpZGVtcG90ZW50KS4gSWYgYWxyZWFkeSBpbml0aWFsaXplZCBlbHNld2hlcmUsIHdlIG9ubHlcclxuICAgIC8vIGF0dGFjaCBjdXN0b20gbWV0cmljcy4gT3RoZXJ3aXNlIHdlIHJvdXRlIG1ldHJpY3MgdGhyb3VnaCBvdXIgbG9nTWV0cmljIG1ldGhvZC5cclxuICAgIGNvbnN0IGZpcnN0SW5pdCA9IGluaXRXZWJWaXRhbHMoe1xyXG4gICAgICBvbk1ldHJpYzogKG0pID0+IHtcclxuICAgICAgICAvLyBNYXAgdW5pZmllZCBtZXRyaWMgdG8gb3VyIHN0cnVjdHVyZSB3aGVyZSBhcHBsaWNhYmxlXHJcbiAgICAgICAgLy8gT25seSBsb2cga25vd24gY29yZSBtZXRyaWNzIGludG8gaW50ZXJuYWwgc3RvcmFnZVxyXG4gICAgICAgIGlmIChbJ0xDUCcsICdDTFMnLCAnSU5QJywgJ1RURkInLCAnRkNQJ10uaW5jbHVkZXMobS5uYW1lKSkge1xyXG4gICAgICAgICAgY29uc3QgcmF0aW5nID0gKCgpOiAnZ29vZCcgfCAnbmVlZHMtaW1wcm92ZW1lbnQnIHwgJ3Bvb3InID0+IHtcclxuICAgICAgICAgICAgaWYgKG0ucmF0aW5nID09PSAnZ29vZCcgfHwgbS5yYXRpbmcgPT09ICduZWVkcy1pbXByb3ZlbWVudCcgfHwgbS5yYXRpbmcgPT09ICdwb29yJykgcmV0dXJuIG0ucmF0aW5nO1xyXG4gICAgICAgICAgICAvLyBGYWxsYmFjayBjbGFzc2lmaWNhdGlvbiBiYXNlZCBvbiB2YWx1ZSB0aHJlc2hvbGRzIHNpbWlsYXIgdG8gZ2V0UmF0aW5nXHJcbiAgICAgICAgICAgIHN3aXRjaCAobS5uYW1lKSB7XHJcbiAgICAgICAgICAgICAgY2FzZSAnTENQJzpcclxuICAgICAgICAgICAgICAgIHJldHVybiBtLnZhbHVlIDw9IDI1MDAgPyAnZ29vZCcgOiBtLnZhbHVlIDw9IDQwMDAgPyAnbmVlZHMtaW1wcm92ZW1lbnQnIDogJ3Bvb3InO1xyXG4gICAgICAgICAgICAgIGNhc2UgJ0NMUyc6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbS52YWx1ZSA8PSAwLjEgPyAnZ29vZCcgOiBtLnZhbHVlIDw9IDAuMjUgPyAnbmVlZHMtaW1wcm92ZW1lbnQnIDogJ3Bvb3InO1xyXG4gICAgICAgICAgICAgIGNhc2UgJ0lOUCc6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbS52YWx1ZSA8PSAyMDAgPyAnZ29vZCcgOiBtLnZhbHVlIDw9IDUwMCA/ICduZWVkcy1pbXByb3ZlbWVudCcgOiAncG9vcic7XHJcbiAgICAgICAgICAgICAgY2FzZSAnVFRGQic6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbS52YWx1ZSA8PSA4MDAgPyAnZ29vZCcgOiBtLnZhbHVlIDw9IDE4MDAgPyAnbmVlZHMtaW1wcm92ZW1lbnQnIDogJ3Bvb3InO1xyXG4gICAgICAgICAgICAgIGNhc2UgJ0ZDUCc6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbS52YWx1ZSA8PSAxODAwID8gJ2dvb2QnIDogbS52YWx1ZSA8PSAzMDAwID8gJ25lZWRzLWltcHJvdmVtZW50JyA6ICdwb29yJztcclxuICAgICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuICdnb29kJztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSkoKTtcclxuICAgICAgICAgIGNvbnN0IG1pbmltYWxNZXRyaWM6IE1ldHJpYyA9IHtcclxuICAgICAgICAgICAgbmFtZTogbS5uYW1lIGFzIE1ldHJpY1snbmFtZSddLFxyXG4gICAgICAgICAgICB2YWx1ZTogbS52YWx1ZSxcclxuICAgICAgICAgICAgcmF0aW5nLFxyXG4gICAgICAgICAgICBkZWx0YTogbS5kZWx0YSB8fCAwLFxyXG4gICAgICAgICAgICBpZDogbS5pZCB8fCBtLm5hbWUsXHJcbiAgICAgICAgICAgIC8vIFByb3ZpZGUgcmVxdWlyZWQgYnV0IHVudXNlZCBmaWVsZHMgd2l0aCBzYWZlIGRlZmF1bHRzXHJcbiAgICAgICAgICAgIGVudHJpZXM6IFtdLFxyXG4gICAgICAgICAgICBuYXZpZ2F0aW9uVHlwZTogJ25hdmlnYXRlJyxcclxuICAgICAgICAgIH07XHJcbiAgICAgICAgICB0aGlzLmxvZ01ldHJpYyhtaW5pbWFsTWV0cmljKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0sXHJcbiAgICAgIGluY2x1ZGVOYXZpZ2F0aW9uTWV0cmljczogZmFsc2UsXHJcbiAgICB9KTtcclxuXHJcbiAgICAvLyBJZiB0aGlzIHdhcyBub3QgdGhlIGZpcnN0IGluaXQsIHdlIHNraXAgZGlyZWN0bHkgcmVnaXN0ZXJpbmcgbGlzdGVuZXJzIHRvIGF2b2lkIGR1cGxpY2F0ZXNcclxuICAgIGlmIChmaXJzdEluaXQpIHtcclxuICAgICAgLy8gV2UgYWxyZWFkeSByZWdpc3RlcmVkIHZpYSBpbml0V2ViVml0YWxzIHRocm91Z2ggdGhlIGNhbGxiYWNrIHByb3ZpZGVkIGFib3ZlXHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAvLyBGYWxsYmFjazogZW5zdXJlIG1ldHJpY3Mgc3RpbGwgZmxvdyBpZiB1bmlmaWVkIGluaXQgb2NjdXJyZWQgYmVmb3JlIHNlcnZpY2UgY3JlYXRpb25cclxuICAgICAgb25MQ1AoKG1ldHJpYykgPT4gdGhpcy5sb2dNZXRyaWMobWV0cmljKSk7XHJcbiAgICAgIG9uQ0xTKHRoaXMubG9nTWV0cmljLmJpbmQodGhpcykpO1xyXG4gICAgICBvbklOUCh0aGlzLmxvZ01ldHJpYy5iaW5kKHRoaXMpKTtcclxuICAgICAgb25UVEZCKHRoaXMubG9nTWV0cmljLmJpbmQodGhpcykpO1xyXG4gICAgICBvbkZDUCh0aGlzLmxvZ01ldHJpYy5iaW5kKHRoaXMpKTtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLnRyYWNrQ3VzdG9tTWV0cmljcygpO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSB0cmFja0N1c3RvbU1ldHJpY3MoKTogdm9pZCB7XHJcbiAgICAvLyBUcmFjayB0b3RhbCBsb2FkIHRpbWUgdXNpbmcgbW9kZXJuIE5hdmlnYXRpb24gVGltaW5nIEFQSVxyXG4gICAgaWYgKCdwZXJmb3JtYW5jZScgaW4gd2luZG93ICYmICdnZXRFbnRyaWVzQnlUeXBlJyBpbiB3aW5kb3cucGVyZm9ybWFuY2UpIHtcclxuICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWQnLCAoKSA9PiB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgIGNvbnN0IHN0YXJ0ID0gcGVyZm9ybWFuY2UuZ2V0RW50cmllc0J5VHlwZShcIm5hdmlnYXRpb25cIilbMF0gYXMgUGVyZm9ybWFuY2VOYXZpZ2F0aW9uVGltaW5nO1xyXG4gICAgICAgICAgY29uc3QgdG90YWxMb2FkVGltZSA9IE1hdGgucm91bmQoc3RhcnQuZHVyYXRpb24pO1xyXG4gICAgICAgICAgXHJcbiAgICAgICAgICBpZiAodG90YWxMb2FkVGltZSA+IDApIHtcclxuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbnNvbGVcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ1tQZXJmb3JtYW5jZV0gVG90YWwgTG9hZCBUaW1lOicsIGAke3RvdGFsTG9hZFRpbWV9bXNgKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbnNvbGVcclxuICAgICAgICAgIGNvbnNvbGUud2FybignW1BlcmZvcm1hbmNlXSBDb3VsZCBub3QgY2FsY3VsYXRlIHRvdGFsIGxvYWQgdGltZTonLCBlcnJvcik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBUcmFjayBKYXZhU2NyaXB0IGJ1bmRsZSBzaXplXHJcbiAgICAgICAgY29uc3QgcmVzb3VyY2VzID0gcGVyZm9ybWFuY2UuZ2V0RW50cmllc0J5VHlwZSgncmVzb3VyY2UnKSBhcyBQZXJmb3JtYW5jZVJlc291cmNlVGltaW5nW107XHJcbiAgICAgICAgY29uc3QganNSZXNvdXJjZXMgPSByZXNvdXJjZXMuZmlsdGVyKFxyXG4gICAgICAgICAgcmVzb3VyY2UgPT4gcmVzb3VyY2UubmFtZS5pbmNsdWRlcygnLmpzJykgJiYgIXJlc291cmNlLm5hbWUuaW5jbHVkZXMoJ25vZGVfbW9kdWxlcycpXHJcbiAgICAgICAgKTtcclxuXHJcbiAgICAgICAgY29uc3QgdG90YWxKU1NpemUgPSBqc1Jlc291cmNlcy5yZWR1Y2UoKHRvdGFsLCByZXNvdXJjZSkgPT4ge1xyXG4gICAgICAgICAgcmV0dXJuIHRvdGFsICsgKHJlc291cmNlLnRyYW5zZmVyU2l6ZSB8fCAwKTtcclxuICAgICAgICB9LCAwKTtcclxuXHJcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbnNvbGVcclxuICAgICAgICBjb25zb2xlLmxvZygnW1BlcmZvcm1hbmNlXSBUb3RhbCBKUyBCdW5kbGUgU2l6ZTonLCBgJHsodG90YWxKU1NpemUgLyAxMDI0KS50b0ZpeGVkKDIpfSBLQmApO1xyXG4gICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBUcmFjayBtZW1vcnkgdXNhZ2UgaWYgYXZhaWxhYmxlXHJcbiAgICBpZiAoJ21lbW9yeScgaW4gcGVyZm9ybWFuY2UpIHtcclxuICAgICAgY29uc3QgcGVyZldpdGhNZW1vcnkgPSBwZXJmb3JtYW5jZSBhcyBQZXJmb3JtYW5jZSAmIHsgbWVtb3J5PzogeyB1c2VkSlNIZWFwU2l6ZTogbnVtYmVyOyB0b3RhbEpTSGVhcFNpemU6IG51bWJlcjsganNIZWFwU2l6ZUxpbWl0OiBudW1iZXIgfSB9O1xyXG4gICAgICBpZiAocGVyZldpdGhNZW1vcnkubWVtb3J5KSB7XHJcbiAgICAgICAgY29uc3QgeyB1c2VkSlNIZWFwU2l6ZSwgdG90YWxKU0hlYXBTaXplLCBqc0hlYXBTaXplTGltaXQgfSA9IHBlcmZXaXRoTWVtb3J5Lm1lbW9yeTtcclxuICAgICAgICBsb2dnZXIuZGVidWcoXHJcbiAgICAgICAgICAnTWVtb3J5IFVzYWdlJyxcclxuICAgICAgICAgIHtcclxuICAgICAgICAgICAgdXNlZE1COiArKHVzZWRKU0hlYXBTaXplIC8gMTAyNCAvIDEwMjQpLnRvRml4ZWQoMiksXHJcbiAgICAgICAgICAgIHRvdGFsTUI6ICsodG90YWxKU0hlYXBTaXplIC8gMTAyNCAvIDEwMjQpLnRvRml4ZWQoMiksXHJcbiAgICAgICAgICAgIGxpbWl0TUI6ICsoanNIZWFwU2l6ZUxpbWl0IC8gMTAyNCAvIDEwMjQpLnRvRml4ZWQoMiksXHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgICAgJ1dlYlZpdGFscydcclxuICAgICAgICApO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgZ2V0TWV0cmljcygpOiBXZWJWaXRhbHNNZXRyaWNzIHtcclxuICAgIHJldHVybiB7IC4uLnRoaXMubWV0cmljcyB9O1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogVHJhY2sgY3VzdG9tIG1ldHJpY3MgZm9yIGFkZGl0aW9uYWwgaW5zaWdodHMgd2l0aCBpZGVtcG90ZW5jeSBwcm90ZWN0aW9uXHJcbiAgICovXHJcbiAgcHVibGljIHRyYWNrQ3VzdG9tTWV0cmljKG5hbWU6IHN0cmluZywgdmFsdWU6IG51bWJlciwgYXR0cmlidXRlcz86IFJlY29yZDxzdHJpbmcsIHN0cmluZz4pOiB2b2lkIHtcclxuICAgIC8vIElkZW1wb3RlbmN5IGd1YXJkOiBwcmV2ZW50IGR1cGxpY2F0ZSBlbWlzc2lvbnMgb2YgdGhlIHNhbWUgY3VzdG9tIG1ldHJpY1xyXG4gICAgY29uc3QgbWV0cmljS2V5ID0gYXR0cmlidXRlcyA/IGAke25hbWV9OiR7SlNPTi5zdHJpbmdpZnkoYXR0cmlidXRlcyl9YCA6IG5hbWU7XHJcbiAgICBcclxuICAgIGlmICh0aGlzLmVtaXR0ZWRDdXN0b21NZXRyaWNzLmhhcyhtZXRyaWNLZXkpKSB7XHJcbiAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ2RldmVsb3BtZW50Jykge1xyXG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jb25zb2xlXHJcbiAgICAgICAgY29uc29sZS5sb2coYFtXZWJWaXRhbHNdIFNraXBwaW5nIGR1cGxpY2F0ZSBjdXN0b20gbWV0cmljOiAke25hbWV9YCwgeyBhdHRyaWJ1dGVzIH0pO1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIFxyXG4gICAgLy8gTWFyayBhcyBlbWl0dGVkIHRvIHByZXZlbnQgZHVwbGljYXRlc1xyXG4gICAgdGhpcy5lbWl0dGVkQ3VzdG9tTWV0cmljcy5hZGQobWV0cmljS2V5KTtcclxuICAgIFxyXG4gICAgbG9nZ2VyLmluZm8oYEN1c3RvbSBtZXRyaWMgJHtuYW1lfWAsIHsgdmFsdWUsIGF0dHJpYnV0ZXMgfSwgJ1dlYlZpdGFscycpO1xyXG5cclxuICAgIC8vIFN0b3JlIGN1c3RvbSBtZXRyaWMgZm9yIGxhdGVyIHJlcG9ydGluZ1xyXG4gICAgaWYgKGF0dHJpYnV0ZXMpIHtcclxuICAgICAgbG9nZ2VyLmRlYnVnKGBDdXN0b20gbWV0cmljIGF0dHJpYnV0ZXNgLCBhdHRyaWJ1dGVzLCAnV2ViVml0YWxzJyk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgZ2V0RW50cmllcygpOiBQZXJmb3JtYW5jZUVudHJ5W10ge1xyXG4gICAgcmV0dXJuIFsuLi50aGlzLmVudHJpZXNdO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQ2xlYXIgY3VzdG9tIG1ldHJpY3MgaWRlbXBvdGVuY3kgZ3VhcmQgKGZvciB0ZXN0aW5nIG9yIG1hbnVhbCByZXNldClcclxuICAgKi9cclxuICBwdWJsaWMgY2xlYXJDdXN0b21NZXRyaWNzSGlzdG9yeSgpOiB2b2lkIHtcclxuICAgIHRoaXMuZW1pdHRlZEN1c3RvbU1ldHJpY3MuY2xlYXIoKTtcclxuICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ2RldmVsb3BtZW50Jykge1xyXG4gICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY29uc29sZVxyXG4gICAgICBjb25zb2xlLmxvZygnW1dlYlZpdGFsc10gQ3VzdG9tIG1ldHJpY3MgaGlzdG9yeSBjbGVhcmVkIC0gZHVwbGljYXRlcyB3aWxsIGJlIGFsbG93ZWQgYWdhaW4nKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHB1YmxpYyBnZXRQZXJmb3JtYW5jZVNjb3JlKCk6IG51bWJlciB7XHJcbiAgICBjb25zdCB2YWxpZE1ldHJpY3MgPSBPYmplY3QudmFsdWVzKHRoaXMubWV0cmljcykuZmlsdGVyKHZhbHVlID0+IHZhbHVlICE9PSBudWxsKTtcclxuICAgIGlmICh2YWxpZE1ldHJpY3MubGVuZ3RoID09PSAwKSByZXR1cm4gMDtcclxuXHJcbiAgICBjb25zdCBzY29yZXMgPSB0aGlzLmVudHJpZXMubWFwKGVudHJ5ID0+IHtcclxuICAgICAgc3dpdGNoIChlbnRyeS5yYXRpbmcpIHtcclxuICAgICAgICBjYXNlICdnb29kJzpcclxuICAgICAgICAgIHJldHVybiAxMDA7XHJcbiAgICAgICAgY2FzZSAnbmVlZHMtaW1wcm92ZW1lbnQnOlxyXG4gICAgICAgICAgcmV0dXJuIDUwO1xyXG4gICAgICAgIGNhc2UgJ3Bvb3InOlxyXG4gICAgICAgICAgcmV0dXJuIDA7XHJcbiAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgIHJldHVybiAwO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICByZXR1cm4gc2NvcmVzLnJlZHVjZSgoc3VtOiBudW1iZXIsIHNjb3JlOiBudW1iZXIpID0+IHN1bSArIHNjb3JlLCAwKSAvIHNjb3Jlcy5sZW5ndGg7XHJcbiAgfVxyXG5cclxuICBwdWJsaWMgZXhwb3J0UmVwb3J0KCk6IHN0cmluZyB7XHJcbiAgICBjb25zdCByZXBvcnQgPSB7XHJcbiAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxyXG4gICAgICB1cmw6IHdpbmRvdy5sb2NhdGlvbi5ocmVmLFxyXG4gICAgICB1c2VyQWdlbnQ6IG5hdmlnYXRvci51c2VyQWdlbnQsXHJcbiAgICAgIG1ldHJpY3M6IHRoaXMubWV0cmljcyxcclxuICAgICAgZW50cmllczogdGhpcy5lbnRyaWVzLFxyXG4gICAgICBzY29yZTogdGhpcy5nZXRQZXJmb3JtYW5jZVNjb3JlKCksXHJcbiAgICB9O1xyXG5cclxuICAgIHJldHVybiBKU09OLnN0cmluZ2lmeShyZXBvcnQsIG51bGwsIDIpO1xyXG4gIH1cclxufVxyXG5cclxuLy8gU2luZ2xldG9uIGluc3RhbmNlXHJcbmV4cG9ydCBjb25zdCB3ZWJWaXRhbHNTZXJ2aWNlID0gbmV3IFdlYlZpdGFsc1NlcnZpY2UoKTtcclxuXHJcbi8vIEF1dG8taW5pdGlhbGl6ZSBpbiBicm93c2VyXHJcbmlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJykge1xyXG4gIHdlYlZpdGFsc1NlcnZpY2UuaW5pdCgpO1xyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCB3ZWJWaXRhbHNTZXJ2aWNlO1xyXG4iXSwibWFwcGluZ3Mi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