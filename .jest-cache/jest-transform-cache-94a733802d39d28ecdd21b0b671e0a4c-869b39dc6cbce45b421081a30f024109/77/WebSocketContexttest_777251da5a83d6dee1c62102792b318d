6d995e1a3cfba355fb954e5e13324d2e
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
var _react = _interopRequireDefault(require("react"));
var _react2 = require("@testing-library/react");
var _WebSocketContext = require("../WebSocketContext");
var _jsxRuntime = require("react/jsx-runtime");
function TestComponent() {
  const ctx = (0, _WebSocketContext._useWebSocket)();
  return /*#__PURE__*/(0, _jsxRuntime.jsx)("div", {
    "data-testid": "ws-context",
    children: ctx ? 'context-present' : 'context-absent'
  });
}
describe('WebSocketContext', () => {
  let originalWebSocket;
  let originalEnv;
  beforeAll(() => {
    originalWebSocket = global.WebSocket;
    originalEnv = process.env;
  });
  afterAll(() => {
    global.WebSocket = originalWebSocket;
    process.env = originalEnv;
  });
  function setupMockWebSocket() {
    let wsInstance = null;
    const wsMock = jest.fn().mockImplementation(() => {
      wsInstance = {
        readyState: 1,
        send: jest.fn(),
        close: jest.fn(),
        // Initialize hooks as functions to prevent undefined errors
        _onclose: () => {},
        _onerror: () => {},
        _onmessage: () => {},
        set onopen(fn) {
          setTimeout(() => fn && fn.call(wsInstance, new Event('open')), 10);
        },
        set onclose(fn) {
          this._onclose = fn;
        },
        set onerror(fn) {
          this._onerror = fn;
        },
        set onmessage(fn) {
          this._onmessage = fn;
        }
      };
      return wsInstance;
    });
    // Add static properties to mock
    wsMock.CONNECTING = 0;
    wsMock.OPEN = 1;
    wsMock.CLOSING = 2;
    wsMock.CLOSED = 3;
    global.WebSocket = wsMock;
    return wsInstance;
  }
  it('provides default values', () => {
    // Enable WebSocket for this test
    process.env.VITE_WEBSOCKET_ENABLED = 'true';
    // Also set on window for compatibility
    global.window.__VITE_ENV__ = {
      VITE_WEBSOCKET_ENABLED: 'true'
    };
    (0, _react2.render)(/*#__PURE__*/(0, _jsxRuntime.jsx)(_WebSocketContext._WebSocketProvider, {
      children: /*#__PURE__*/(0, _jsxRuntime.jsx)(TestComponent, {})
    }));
    expect(_react2.screen.getByTestId('ws-context')).toHaveTextContent('context-present');
  });
  it('handles transient connection failures and recovery', async () => {
    // Enable WebSocket for this test
    process.env.VITE_WEBSOCKET_ENABLED = 'true';
    // Also set on window for compatibility
    global.window.__VITE_ENV__ = {
      VITE_WEBSOCKET_ENABLED: 'true'
    };
    let wsInstance;
    let onopenHandler = null;
    const wsMock = jest.fn().mockImplementation(() => {
      wsInstance = {
        readyState: 1,
        send: jest.fn(),
        close: jest.fn(),
        // Initialize hooks as functions to prevent undefined errors
        _onclose: () => {},
        _onerror: () => {},
        _onmessage: () => {},
        set onopen(fn) {
          onopenHandler = fn;
          // Simulate immediate connection for test
          setTimeout(() => {
            if (fn) {
              fn.call(wsInstance, new Event('open'));
            }
          }, 10);
        },
        set onclose(fn) {
          this._onclose = fn;
        },
        set onerror(fn) {
          this._onerror = fn;
        },
        set onmessage(fn) {
          this._onmessage = fn;
        },
        // Method to manually trigger onopen for testing
        triggerOpen: () => {
          if (onopenHandler) {
            onopenHandler.call(wsInstance, new Event('open'));
          }
        }
      };
      return wsInstance;
    });
    wsMock.CONNECTING = 0;
    wsMock.OPEN = 1;
    wsMock.CLOSING = 2;
    wsMock.CLOSED = 3;
    global.WebSocket = wsMock;
    function StatusComponent() {
      const ctx = (0, _WebSocketContext._useWebSocket)();
      return /*#__PURE__*/(0, _jsxRuntime.jsx)("div", {
        "data-testid": "ws-status",
        children: ctx.status
      });
    }
    (0, _react2.render)(/*#__PURE__*/(0, _jsxRuntime.jsx)(_WebSocketContext._WebSocketProvider, {
      children: /*#__PURE__*/(0, _jsxRuntime.jsx)(StatusComponent, {})
    }));

    // Wait for initial connection
    await (0, _react2.act)(async () => {
      await new Promise(resolve => setTimeout(resolve, 20));
    });

    // Should be connected initially
    expect(_react2.screen.getByTestId('ws-status').textContent).toBe('connected');

    // Simulate close event (transient failure)
    await (0, _react2.act)(async () => {
      if (wsInstance && wsInstance._onclose) {
        wsInstance._onclose({
          code: 1006,
          reason: 'test',
          wasClean: false
        });
      }
    });

    // Should enter disconnected state after close
    expect(_react2.screen.getByTestId('ws-status').textContent).toBe('disconnected');

    // Simulate recovery by triggering onopen
    await (0, _react2.act)(async () => {
      if (wsInstance && wsInstance.triggerOpen) {
        wsInstance.triggerOpen();
      }
    });

    // Should be connected after recovery
    expect(_react2.screen.getByTestId('ws-status').textContent).toBe('connected');
  });
  it('reconnects immediately on network online event', async () => {
    // Enable WebSocket for this test
    process.env.VITE_WEBSOCKET_ENABLED = 'true';
    // Also set on window for compatibility
    global.window.__VITE_ENV__ = {
      VITE_WEBSOCKET_ENABLED: 'true'
    };
    let wsInstance;
    const wsMock = jest.fn().mockImplementation(() => {
      wsInstance = {
        readyState: 1,
        send: jest.fn(),
        close: jest.fn(),
        set onopen(fn) {
          setTimeout(() => fn && fn.call(wsInstance, new Event('open')), 10);
        },
        set onclose(fn) {
          this._onclose = fn;
        },
        set onerror(fn) {
          this._onerror = fn;
        },
        set onmessage(fn) {
          this._onmessage = fn;
        },
        // Initialize hooks as functions to prevent undefined errors
        _onclose: () => {},
        _onerror: () => {},
        _onmessage: () => {}
      };
      return wsInstance;
    });
    wsMock.CONNECTING = 0;
    wsMock.OPEN = 1;
    wsMock.CLOSING = 2;
    wsMock.CLOSED = 3;
    global.WebSocket = wsMock;
    function StatusComponent() {
      const ctx = (0, _WebSocketContext._useWebSocket)();
      return /*#__PURE__*/(0, _jsxRuntime.jsx)("div", {
        "data-testid": "ws-status",
        children: ctx.status
      });
    }
    (0, _react2.render)(/*#__PURE__*/(0, _jsxRuntime.jsx)(_WebSocketContext._WebSocketProvider, {
      children: /*#__PURE__*/(0, _jsxRuntime.jsx)(StatusComponent, {})
    }));

    // Wait for initial connection
    await (0, _react2.act)(async () => {
      await new Promise(resolve => setTimeout(resolve, 20));
    });

    // Simulate offline event
    await (0, _react2.act)(async () => {
      window.dispatchEvent(new Event('offline'));
    });
    expect(_react2.screen.getByTestId('ws-status').textContent).toBe('disconnected');

    // Simulate online event - this should trigger reconnection
    await (0, _react2.act)(async () => {
      window.dispatchEvent(new Event('online'));
    });

    // Should enter reconnecting state immediately
    expect(_react2.screen.getByTestId('ws-status').textContent).toBe('reconnecting');
  });
  it('exposes lastError in context on error', async () => {
    // Enable WebSocket for this test
    process.env.VITE_WEBSOCKET_ENABLED = 'true';
    // Also set on window for compatibility
    global.window.__VITE_ENV__ = {
      VITE_WEBSOCKET_ENABLED: 'true'
    };
    let wsInstance;
    const wsMock = jest.fn().mockImplementation(() => {
      wsInstance = {
        readyState: 1,
        send: jest.fn(),
        close: jest.fn(),
        set onopen(fn) {
          setTimeout(() => fn && fn.call(wsInstance, new Event('open')), 10);
        },
        set onclose(fn) {
          this._onclose = fn;
        },
        set onerror(fn) {
          this._onerror = fn;
        },
        set onmessage(fn) {
          this._onmessage = fn;
        },
        // Initialize hooks as functions to prevent undefined errors
        _onclose: () => {},
        _onerror: () => {},
        _onmessage: () => {}
      };
      return wsInstance;
    });
    wsMock.CONNECTING = 0;
    wsMock.OPEN = 1;
    wsMock.CLOSING = 2;
    wsMock.CLOSED = 3;
    global.WebSocket = wsMock;
    function ErrorComponent() {
      const ctx = (0, _WebSocketContext._useWebSocket)();
      return /*#__PURE__*/(0, _jsxRuntime.jsx)("div", {
        "data-testid": "ws-error",
        children: ctx.lastError || 'none'
      });
    }
    (0, _react2.render)(/*#__PURE__*/(0, _jsxRuntime.jsx)(_WebSocketContext._WebSocketProvider, {
      children: /*#__PURE__*/(0, _jsxRuntime.jsx)(ErrorComponent, {})
    }));

    // Simulate error event
    await (0, _react2.act)(async () => {
      if (wsInstance._onerror) {
        wsInstance._onerror(new Event('error'));
      }
    });
    expect(_react2.screen.getByTestId('ws-error').textContent).not.toBe('none');
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfcmVhY3QiLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwicmVxdWlyZSIsIl9yZWFjdDIiLCJfV2ViU29ja2V0Q29udGV4dCIsIl9qc3hSdW50aW1lIiwiVGVzdENvbXBvbmVudCIsImN0eCIsIl91c2VXZWJTb2NrZXQiLCJqc3giLCJjaGlsZHJlbiIsImRlc2NyaWJlIiwib3JpZ2luYWxXZWJTb2NrZXQiLCJvcmlnaW5hbEVudiIsImJlZm9yZUFsbCIsImdsb2JhbCIsIldlYlNvY2tldCIsInByb2Nlc3MiLCJlbnYiLCJhZnRlckFsbCIsInNldHVwTW9ja1dlYlNvY2tldCIsIndzSW5zdGFuY2UiLCJ3c01vY2siLCJqZXN0IiwiZm4iLCJtb2NrSW1wbGVtZW50YXRpb24iLCJyZWFkeVN0YXRlIiwic2VuZCIsImNsb3NlIiwiX29uY2xvc2UiLCJfb25lcnJvciIsIl9vbm1lc3NhZ2UiLCJvbm9wZW4iLCJzZXRUaW1lb3V0IiwiY2FsbCIsIkV2ZW50Iiwib25jbG9zZSIsIm9uZXJyb3IiLCJvbm1lc3NhZ2UiLCJDT05ORUNUSU5HIiwiT1BFTiIsIkNMT1NJTkciLCJDTE9TRUQiLCJpdCIsIlZJVEVfV0VCU09DS0VUX0VOQUJMRUQiLCJ3aW5kb3ciLCJfX1ZJVEVfRU5WX18iLCJyZW5kZXIiLCJfV2ViU29ja2V0UHJvdmlkZXIiLCJleHBlY3QiLCJzY3JlZW4iLCJnZXRCeVRlc3RJZCIsInRvSGF2ZVRleHRDb250ZW50Iiwib25vcGVuSGFuZGxlciIsInRyaWdnZXJPcGVuIiwiU3RhdHVzQ29tcG9uZW50Iiwic3RhdHVzIiwiYWN0IiwiUHJvbWlzZSIsInJlc29sdmUiLCJ0ZXh0Q29udGVudCIsInRvQmUiLCJjb2RlIiwicmVhc29uIiwid2FzQ2xlYW4iLCJkaXNwYXRjaEV2ZW50IiwiRXJyb3JDb21wb25lbnQiLCJsYXN0RXJyb3IiLCJub3QiXSwic291cmNlcyI6WyJXZWJTb2NrZXRDb250ZXh0LnRlc3QudHN4Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XHJcbmltcG9ydCB7IGFjdCwgcmVuZGVyLCBzY3JlZW4gfSBmcm9tICdAdGVzdGluZy1saWJyYXJ5L3JlYWN0JztcclxuaW1wb3J0IHsgX1dlYlNvY2tldFByb3ZpZGVyLCBfdXNlV2ViU29ja2V0IH0gZnJvbSAnLi4vV2ViU29ja2V0Q29udGV4dCc7XHJcblxyXG5mdW5jdGlvbiBUZXN0Q29tcG9uZW50KCkge1xyXG4gIGNvbnN0IGN0eCA9IF91c2VXZWJTb2NrZXQoKTtcclxuICByZXR1cm4gPGRpdiBkYXRhLXRlc3RpZD0nd3MtY29udGV4dCc+e2N0eCA/ICdjb250ZXh0LXByZXNlbnQnIDogJ2NvbnRleHQtYWJzZW50J308L2Rpdj47XHJcbn1cclxuXHJcbmRlc2NyaWJlKCdXZWJTb2NrZXRDb250ZXh0JywgKCkgPT4ge1xyXG4gIGxldCBvcmlnaW5hbFdlYlNvY2tldDogYW55O1xyXG4gIGxldCBvcmlnaW5hbEVudjogYW55O1xyXG4gIGJlZm9yZUFsbCgoKSA9PiB7XHJcbiAgICBvcmlnaW5hbFdlYlNvY2tldCA9IGdsb2JhbC5XZWJTb2NrZXQ7XHJcbiAgICBvcmlnaW5hbEVudiA9IHByb2Nlc3MuZW52O1xyXG4gIH0pO1xyXG4gIGFmdGVyQWxsKCgpID0+IHtcclxuICAgIGdsb2JhbC5XZWJTb2NrZXQgPSBvcmlnaW5hbFdlYlNvY2tldDtcclxuICAgIHByb2Nlc3MuZW52ID0gb3JpZ2luYWxFbnY7XHJcbiAgfSk7XHJcblxyXG4gIGZ1bmN0aW9uIHNldHVwTW9ja1dlYlNvY2tldCgpIHtcclxuICAgIGxldCB3c0luc3RhbmNlOiBhbnkgPSBudWxsO1xyXG4gICAgY29uc3Qgd3NNb2NrID0gamVzdC5mbigpLm1vY2tJbXBsZW1lbnRhdGlvbigoKSA9PiB7XHJcbiAgICAgIHdzSW5zdGFuY2UgPSB7XHJcbiAgICAgICAgcmVhZHlTdGF0ZTogMSxcclxuICAgICAgICBzZW5kOiBqZXN0LmZuKCksXHJcbiAgICAgICAgY2xvc2U6IGplc3QuZm4oKSxcclxuICAgICAgICAvLyBJbml0aWFsaXplIGhvb2tzIGFzIGZ1bmN0aW9ucyB0byBwcmV2ZW50IHVuZGVmaW5lZCBlcnJvcnNcclxuICAgICAgICBfb25jbG9zZTogKCkgPT4ge30sXHJcbiAgICAgICAgX29uZXJyb3I6ICgpID0+IHt9LFxyXG4gICAgICAgIF9vbm1lc3NhZ2U6ICgpID0+IHt9LFxyXG4gICAgICAgIHNldCBvbm9wZW4oZm46ICgodGhpczogV2ViU29ja2V0LCBldjogRXZlbnQpID0+IGFueSkgfCBudWxsKSB7XHJcbiAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IGZuICYmIGZuLmNhbGwod3NJbnN0YW5jZSwgbmV3IEV2ZW50KCdvcGVuJykpLCAxMCk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBzZXQgb25jbG9zZShmbjogKCh0aGlzOiBXZWJTb2NrZXQsIGV2OiBDbG9zZUV2ZW50KSA9PiBhbnkpIHwgbnVsbCkge1xyXG4gICAgICAgICAgKHRoaXMgYXMgYW55KS5fb25jbG9zZSA9IGZuO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgc2V0IG9uZXJyb3IoZm46ICgodGhpczogV2ViU29ja2V0LCBldjogRXZlbnQpID0+IGFueSkgfCBudWxsKSB7XHJcbiAgICAgICAgICAodGhpcyBhcyBhbnkpLl9vbmVycm9yID0gZm47XHJcbiAgICAgICAgfSxcclxuICAgICAgICBzZXQgb25tZXNzYWdlKGZuOiAoKHRoaXM6IFdlYlNvY2tldCwgZXY6IE1lc3NhZ2VFdmVudCkgPT4gYW55KSB8IG51bGwpIHtcclxuICAgICAgICAgICh0aGlzIGFzIGFueSkuX29ubWVzc2FnZSA9IGZuO1xyXG4gICAgICAgIH0sXHJcbiAgICAgIH07XHJcbiAgICAgIHJldHVybiB3c0luc3RhbmNlO1xyXG4gICAgfSk7XHJcbiAgICAvLyBBZGQgc3RhdGljIHByb3BlcnRpZXMgdG8gbW9ja1xyXG4gICAgKHdzTW9jayBhcyBhbnkpLkNPTk5FQ1RJTkcgPSAwO1xyXG4gICAgKHdzTW9jayBhcyBhbnkpLk9QRU4gPSAxO1xyXG4gICAgKHdzTW9jayBhcyBhbnkpLkNMT1NJTkcgPSAyO1xyXG4gICAgKHdzTW9jayBhcyBhbnkpLkNMT1NFRCA9IDM7XHJcbiAgICBnbG9iYWwuV2ViU29ja2V0ID0gd3NNb2NrIGFzIGFueTtcclxuICAgIHJldHVybiB3c0luc3RhbmNlO1xyXG4gIH1cclxuXHJcbiAgaXQoJ3Byb3ZpZGVzIGRlZmF1bHQgdmFsdWVzJywgKCkgPT4ge1xyXG4gICAgLy8gRW5hYmxlIFdlYlNvY2tldCBmb3IgdGhpcyB0ZXN0XHJcbiAgICBwcm9jZXNzLmVudi5WSVRFX1dFQlNPQ0tFVF9FTkFCTEVEID0gJ3RydWUnO1xyXG4gICAgLy8gQWxzbyBzZXQgb24gd2luZG93IGZvciBjb21wYXRpYmlsaXR5XHJcbiAgICAoZ2xvYmFsLndpbmRvdyBhcyBhbnkpLl9fVklURV9FTlZfXyA9IHsgVklURV9XRUJTT0NLRVRfRU5BQkxFRDogJ3RydWUnIH07XHJcbiAgICBcclxuICAgIHJlbmRlcihcclxuICAgICAgPF9XZWJTb2NrZXRQcm92aWRlcj5cclxuICAgICAgICA8VGVzdENvbXBvbmVudCAvPlxyXG4gICAgICA8L19XZWJTb2NrZXRQcm92aWRlcj5cclxuICAgICk7XHJcbiAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGVzdElkKCd3cy1jb250ZXh0JykpLnRvSGF2ZVRleHRDb250ZW50KCdjb250ZXh0LXByZXNlbnQnKTtcclxuICB9KTtcclxuXHJcbiAgaXQoJ2hhbmRsZXMgdHJhbnNpZW50IGNvbm5lY3Rpb24gZmFpbHVyZXMgYW5kIHJlY292ZXJ5JywgYXN5bmMgKCkgPT4ge1xyXG4gICAgLy8gRW5hYmxlIFdlYlNvY2tldCBmb3IgdGhpcyB0ZXN0XHJcbiAgICBwcm9jZXNzLmVudi5WSVRFX1dFQlNPQ0tFVF9FTkFCTEVEID0gJ3RydWUnO1xyXG4gICAgLy8gQWxzbyBzZXQgb24gd2luZG93IGZvciBjb21wYXRpYmlsaXR5XHJcbiAgICAoZ2xvYmFsLndpbmRvdyBhcyBhbnkpLl9fVklURV9FTlZfXyA9IHsgVklURV9XRUJTT0NLRVRfRU5BQkxFRDogJ3RydWUnIH07XHJcbiAgICBcclxuICAgIGxldCB3c0luc3RhbmNlOiBhbnk7XHJcbiAgICBsZXQgb25vcGVuSGFuZGxlcjogKCh0aGlzOiBXZWJTb2NrZXQsIGV2OiBFdmVudCkgPT4gYW55KSB8IG51bGwgPSBudWxsO1xyXG4gICAgY29uc3Qgd3NNb2NrID0gamVzdC5mbigpLm1vY2tJbXBsZW1lbnRhdGlvbigoKSA9PiB7XHJcbiAgICAgIHdzSW5zdGFuY2UgPSB7XHJcbiAgICAgICAgcmVhZHlTdGF0ZTogMSxcclxuICAgICAgICBzZW5kOiBqZXN0LmZuKCksXHJcbiAgICAgICAgY2xvc2U6IGplc3QuZm4oKSxcclxuICAgICAgICAvLyBJbml0aWFsaXplIGhvb2tzIGFzIGZ1bmN0aW9ucyB0byBwcmV2ZW50IHVuZGVmaW5lZCBlcnJvcnNcclxuICAgICAgICBfb25jbG9zZTogKCkgPT4ge30sXHJcbiAgICAgICAgX29uZXJyb3I6ICgpID0+IHt9LFxyXG4gICAgICAgIF9vbm1lc3NhZ2U6ICgpID0+IHt9LFxyXG4gICAgICAgIHNldCBvbm9wZW4oZm46ICgodGhpczogV2ViU29ja2V0LCBldjogRXZlbnQpID0+IGFueSkgfCBudWxsKSB7XHJcbiAgICAgICAgICBvbm9wZW5IYW5kbGVyID0gZm47XHJcbiAgICAgICAgICAvLyBTaW11bGF0ZSBpbW1lZGlhdGUgY29ubmVjdGlvbiBmb3IgdGVzdFxyXG4gICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChmbikge1xyXG4gICAgICAgICAgICAgIGZuLmNhbGwod3NJbnN0YW5jZSwgbmV3IEV2ZW50KCdvcGVuJykpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9LCAxMCk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBzZXQgb25jbG9zZShmbjogKCh0aGlzOiBXZWJTb2NrZXQsIGV2OiBDbG9zZUV2ZW50KSA9PiBhbnkpIHwgbnVsbCkge1xyXG4gICAgICAgICAgKHRoaXMgYXMgYW55KS5fb25jbG9zZSA9IGZuO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgc2V0IG9uZXJyb3IoZm46ICgodGhpczogV2ViU29ja2V0LCBldjogRXZlbnQpID0+IGFueSkgfCBudWxsKSB7XHJcbiAgICAgICAgICAodGhpcyBhcyBhbnkpLl9vbmVycm9yID0gZm47XHJcbiAgICAgICAgfSxcclxuICAgICAgICBzZXQgb25tZXNzYWdlKGZuOiAoKHRoaXM6IFdlYlNvY2tldCwgZXY6IE1lc3NhZ2VFdmVudCkgPT4gYW55KSB8IG51bGwpIHtcclxuICAgICAgICAgICh0aGlzIGFzIGFueSkuX29ubWVzc2FnZSA9IGZuO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgLy8gTWV0aG9kIHRvIG1hbnVhbGx5IHRyaWdnZXIgb25vcGVuIGZvciB0ZXN0aW5nXHJcbiAgICAgICAgdHJpZ2dlck9wZW46ICgpID0+IHtcclxuICAgICAgICAgIGlmIChvbm9wZW5IYW5kbGVyKSB7XHJcbiAgICAgICAgICAgIG9ub3BlbkhhbmRsZXIuY2FsbCh3c0luc3RhbmNlLCBuZXcgRXZlbnQoJ29wZW4nKSk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9O1xyXG4gICAgICByZXR1cm4gd3NJbnN0YW5jZTtcclxuICAgIH0pO1xyXG4gICAgKHdzTW9jayBhcyBhbnkpLkNPTk5FQ1RJTkcgPSAwO1xyXG4gICAgKHdzTW9jayBhcyBhbnkpLk9QRU4gPSAxO1xyXG4gICAgKHdzTW9jayBhcyBhbnkpLkNMT1NJTkcgPSAyO1xyXG4gICAgKHdzTW9jayBhcyBhbnkpLkNMT1NFRCA9IDM7XHJcbiAgICBnbG9iYWwuV2ViU29ja2V0ID0gd3NNb2NrIGFzIGFueTtcclxuXHJcbiAgICBmdW5jdGlvbiBTdGF0dXNDb21wb25lbnQoKSB7XHJcbiAgICAgIGNvbnN0IGN0eCA9IF91c2VXZWJTb2NrZXQoKTtcclxuICAgICAgcmV0dXJuIDxkaXYgZGF0YS10ZXN0aWQ9J3dzLXN0YXR1cyc+e2N0eC5zdGF0dXN9PC9kaXY+O1xyXG4gICAgfVxyXG5cclxuICAgIHJlbmRlcihcclxuICAgICAgPF9XZWJTb2NrZXRQcm92aWRlcj5cclxuICAgICAgICA8U3RhdHVzQ29tcG9uZW50IC8+XHJcbiAgICAgIDwvX1dlYlNvY2tldFByb3ZpZGVyPlxyXG4gICAgKTtcclxuXHJcbiAgICAvLyBXYWl0IGZvciBpbml0aWFsIGNvbm5lY3Rpb25cclxuICAgIGF3YWl0IGFjdChhc3luYyAoKSA9PiB7XHJcbiAgICAgIGF3YWl0IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dChyZXNvbHZlLCAyMCkpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgLy8gU2hvdWxkIGJlIGNvbm5lY3RlZCBpbml0aWFsbHlcclxuICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXN0SWQoJ3dzLXN0YXR1cycpLnRleHRDb250ZW50KS50b0JlKCdjb25uZWN0ZWQnKTtcclxuXHJcbiAgICAvLyBTaW11bGF0ZSBjbG9zZSBldmVudCAodHJhbnNpZW50IGZhaWx1cmUpXHJcbiAgICBhd2FpdCBhY3QoYXN5bmMgKCkgPT4ge1xyXG4gICAgICBpZiAod3NJbnN0YW5jZSAmJiB3c0luc3RhbmNlLl9vbmNsb3NlKSB7XHJcbiAgICAgICAgd3NJbnN0YW5jZS5fb25jbG9zZSh7IGNvZGU6IDEwMDYsIHJlYXNvbjogJ3Rlc3QnLCB3YXNDbGVhbjogZmFsc2UgfSk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgIC8vIFNob3VsZCBlbnRlciBkaXNjb25uZWN0ZWQgc3RhdGUgYWZ0ZXIgY2xvc2VcclxuICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXN0SWQoJ3dzLXN0YXR1cycpLnRleHRDb250ZW50KS50b0JlKCdkaXNjb25uZWN0ZWQnKTtcclxuXHJcbiAgICAvLyBTaW11bGF0ZSByZWNvdmVyeSBieSB0cmlnZ2VyaW5nIG9ub3BlblxyXG4gICAgYXdhaXQgYWN0KGFzeW5jICgpID0+IHtcclxuICAgICAgaWYgKHdzSW5zdGFuY2UgJiYgd3NJbnN0YW5jZS50cmlnZ2VyT3Blbikge1xyXG4gICAgICAgIHdzSW5zdGFuY2UudHJpZ2dlck9wZW4oKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgLy8gU2hvdWxkIGJlIGNvbm5lY3RlZCBhZnRlciByZWNvdmVyeVxyXG4gICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRlc3RJZCgnd3Mtc3RhdHVzJykudGV4dENvbnRlbnQpLnRvQmUoJ2Nvbm5lY3RlZCcpO1xyXG4gIH0pO1xyXG5cclxuICBpdCgncmVjb25uZWN0cyBpbW1lZGlhdGVseSBvbiBuZXR3b3JrIG9ubGluZSBldmVudCcsIGFzeW5jICgpID0+IHtcclxuICAgIC8vIEVuYWJsZSBXZWJTb2NrZXQgZm9yIHRoaXMgdGVzdFxyXG4gICAgcHJvY2Vzcy5lbnYuVklURV9XRUJTT0NLRVRfRU5BQkxFRCA9ICd0cnVlJztcclxuICAgIC8vIEFsc28gc2V0IG9uIHdpbmRvdyBmb3IgY29tcGF0aWJpbGl0eVxyXG4gICAgKGdsb2JhbC53aW5kb3cgYXMgYW55KS5fX1ZJVEVfRU5WX18gPSB7IFZJVEVfV0VCU09DS0VUX0VOQUJMRUQ6ICd0cnVlJyB9O1xyXG4gICAgXHJcbiAgICBsZXQgd3NJbnN0YW5jZTogYW55O1xyXG4gICAgY29uc3Qgd3NNb2NrID0gamVzdC5mbigpLm1vY2tJbXBsZW1lbnRhdGlvbigoKSA9PiB7XHJcbiAgICAgIHdzSW5zdGFuY2UgPSB7XHJcbiAgICAgICAgcmVhZHlTdGF0ZTogMSxcclxuICAgICAgICBzZW5kOiBqZXN0LmZuKCksXHJcbiAgICAgICAgY2xvc2U6IGplc3QuZm4oKSxcclxuICAgICAgICBzZXQgb25vcGVuKGZuOiAoKHRoaXM6IFdlYlNvY2tldCwgZXY6IEV2ZW50KSA9PiBhbnkpIHwgbnVsbCkge1xyXG4gICAgICAgICAgc2V0VGltZW91dCgoKSA9PiBmbiAmJiBmbi5jYWxsKHdzSW5zdGFuY2UsIG5ldyBFdmVudCgnb3BlbicpKSwgMTApO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgc2V0IG9uY2xvc2UoZm46ICgodGhpczogV2ViU29ja2V0LCBldjogQ2xvc2VFdmVudCkgPT4gYW55KSB8IG51bGwpIHtcclxuICAgICAgICAgICh0aGlzIGFzIGFueSkuX29uY2xvc2UgPSBmbjtcclxuICAgICAgICB9LFxyXG4gICAgICAgIHNldCBvbmVycm9yKGZuOiAoKHRoaXM6IFdlYlNvY2tldCwgZXY6IEV2ZW50KSA9PiBhbnkpIHwgbnVsbCkge1xyXG4gICAgICAgICAgKHRoaXMgYXMgYW55KS5fb25lcnJvciA9IGZuO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgc2V0IG9ubWVzc2FnZShmbjogKCh0aGlzOiBXZWJTb2NrZXQsIGV2OiBNZXNzYWdlRXZlbnQpID0+IGFueSkgfCBudWxsKSB7XHJcbiAgICAgICAgICAodGhpcyBhcyBhbnkpLl9vbm1lc3NhZ2UgPSBmbjtcclxuICAgICAgICB9LFxyXG4gICAgICAgIC8vIEluaXRpYWxpemUgaG9va3MgYXMgZnVuY3Rpb25zIHRvIHByZXZlbnQgdW5kZWZpbmVkIGVycm9yc1xyXG4gICAgICAgIF9vbmNsb3NlOiAoKSA9PiB7fSxcclxuICAgICAgICBfb25lcnJvcjogKCkgPT4ge30sXHJcbiAgICAgICAgX29ubWVzc2FnZTogKCkgPT4ge30sXHJcbiAgICAgIH07XHJcbiAgICAgIHJldHVybiB3c0luc3RhbmNlO1xyXG4gICAgfSk7XHJcbiAgICAod3NNb2NrIGFzIGFueSkuQ09OTkVDVElORyA9IDA7XHJcbiAgICAod3NNb2NrIGFzIGFueSkuT1BFTiA9IDE7XHJcbiAgICAod3NNb2NrIGFzIGFueSkuQ0xPU0lORyA9IDI7XHJcbiAgICAod3NNb2NrIGFzIGFueSkuQ0xPU0VEID0gMztcclxuICAgIGdsb2JhbC5XZWJTb2NrZXQgPSB3c01vY2sgYXMgYW55O1xyXG4gICAgXHJcbiAgICBmdW5jdGlvbiBTdGF0dXNDb21wb25lbnQoKSB7XHJcbiAgICAgIGNvbnN0IGN0eCA9IF91c2VXZWJTb2NrZXQoKTtcclxuICAgICAgcmV0dXJuIDxkaXYgZGF0YS10ZXN0aWQ9J3dzLXN0YXR1cyc+e2N0eC5zdGF0dXN9PC9kaXY+O1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICByZW5kZXIoXHJcbiAgICAgIDxfV2ViU29ja2V0UHJvdmlkZXI+XHJcbiAgICAgICAgPFN0YXR1c0NvbXBvbmVudCAvPlxyXG4gICAgICA8L19XZWJTb2NrZXRQcm92aWRlcj5cclxuICAgICk7XHJcbiAgICBcclxuICAgIC8vIFdhaXQgZm9yIGluaXRpYWwgY29ubmVjdGlvblxyXG4gICAgYXdhaXQgYWN0KGFzeW5jICgpID0+IHtcclxuICAgICAgYXdhaXQgbmV3IFByb21pc2UocmVzb2x2ZSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIDIwKSk7XHJcbiAgICB9KTtcclxuICAgIFxyXG4gICAgLy8gU2ltdWxhdGUgb2ZmbGluZSBldmVudFxyXG4gICAgYXdhaXQgYWN0KGFzeW5jICgpID0+IHtcclxuICAgICAgd2luZG93LmRpc3BhdGNoRXZlbnQobmV3IEV2ZW50KCdvZmZsaW5lJykpO1xyXG4gICAgfSk7XHJcbiAgICBcclxuICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXN0SWQoJ3dzLXN0YXR1cycpLnRleHRDb250ZW50KS50b0JlKCdkaXNjb25uZWN0ZWQnKTtcclxuICAgIFxyXG4gICAgLy8gU2ltdWxhdGUgb25saW5lIGV2ZW50IC0gdGhpcyBzaG91bGQgdHJpZ2dlciByZWNvbm5lY3Rpb25cclxuICAgIGF3YWl0IGFjdChhc3luYyAoKSA9PiB7XHJcbiAgICAgIHdpbmRvdy5kaXNwYXRjaEV2ZW50KG5ldyBFdmVudCgnb25saW5lJykpO1xyXG4gICAgfSk7XHJcbiAgICBcclxuICAgIC8vIFNob3VsZCBlbnRlciByZWNvbm5lY3Rpbmcgc3RhdGUgaW1tZWRpYXRlbHlcclxuICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXN0SWQoJ3dzLXN0YXR1cycpLnRleHRDb250ZW50KS50b0JlKCdyZWNvbm5lY3RpbmcnKTtcclxuICB9KTtcclxuXHJcbiAgaXQoJ2V4cG9zZXMgbGFzdEVycm9yIGluIGNvbnRleHQgb24gZXJyb3InLCBhc3luYyAoKSA9PiB7XHJcbiAgICAvLyBFbmFibGUgV2ViU29ja2V0IGZvciB0aGlzIHRlc3RcclxuICAgIHByb2Nlc3MuZW52LlZJVEVfV0VCU09DS0VUX0VOQUJMRUQgPSAndHJ1ZSc7XHJcbiAgICAvLyBBbHNvIHNldCBvbiB3aW5kb3cgZm9yIGNvbXBhdGliaWxpdHlcclxuICAgIChnbG9iYWwud2luZG93IGFzIGFueSkuX19WSVRFX0VOVl9fID0geyBWSVRFX1dFQlNPQ0tFVF9FTkFCTEVEOiAndHJ1ZScgfTtcclxuICAgIFxyXG4gICAgbGV0IHdzSW5zdGFuY2U6IGFueTtcclxuICAgIGNvbnN0IHdzTW9jayA9IGplc3QuZm4oKS5tb2NrSW1wbGVtZW50YXRpb24oKCkgPT4ge1xyXG4gICAgICB3c0luc3RhbmNlID0ge1xyXG4gICAgICAgIHJlYWR5U3RhdGU6IDEsXHJcbiAgICAgICAgc2VuZDogamVzdC5mbigpLFxyXG4gICAgICAgIGNsb3NlOiBqZXN0LmZuKCksXHJcbiAgICAgICAgc2V0IG9ub3BlbihmbjogKCh0aGlzOiBXZWJTb2NrZXQsIGV2OiBFdmVudCkgPT4gYW55KSB8IG51bGwpIHtcclxuICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gZm4gJiYgZm4uY2FsbCh3c0luc3RhbmNlLCBuZXcgRXZlbnQoJ29wZW4nKSksIDEwKTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIHNldCBvbmNsb3NlKGZuOiAoKHRoaXM6IFdlYlNvY2tldCwgZXY6IENsb3NlRXZlbnQpID0+IGFueSkgfCBudWxsKSB7XHJcbiAgICAgICAgICAodGhpcyBhcyBhbnkpLl9vbmNsb3NlID0gZm47XHJcbiAgICAgICAgfSxcclxuICAgICAgICBzZXQgb25lcnJvcihmbjogKCh0aGlzOiBXZWJTb2NrZXQsIGV2OiBFdmVudCkgPT4gYW55KSB8IG51bGwpIHtcclxuICAgICAgICAgICh0aGlzIGFzIGFueSkuX29uZXJyb3IgPSBmbjtcclxuICAgICAgICB9LFxyXG4gICAgICAgIHNldCBvbm1lc3NhZ2UoZm46ICgodGhpczogV2ViU29ja2V0LCBldjogTWVzc2FnZUV2ZW50KSA9PiBhbnkpIHwgbnVsbCkge1xyXG4gICAgICAgICAgKHRoaXMgYXMgYW55KS5fb25tZXNzYWdlID0gZm47XHJcbiAgICAgICAgfSxcclxuICAgICAgICAvLyBJbml0aWFsaXplIGhvb2tzIGFzIGZ1bmN0aW9ucyB0byBwcmV2ZW50IHVuZGVmaW5lZCBlcnJvcnNcclxuICAgICAgICBfb25jbG9zZTogKCkgPT4ge30sXHJcbiAgICAgICAgX29uZXJyb3I6ICgpID0+IHt9LFxyXG4gICAgICAgIF9vbm1lc3NhZ2U6ICgpID0+IHt9LFxyXG4gICAgICB9O1xyXG4gICAgICByZXR1cm4gd3NJbnN0YW5jZTtcclxuICAgIH0pO1xyXG4gICAgKHdzTW9jayBhcyBhbnkpLkNPTk5FQ1RJTkcgPSAwO1xyXG4gICAgKHdzTW9jayBhcyBhbnkpLk9QRU4gPSAxO1xyXG4gICAgKHdzTW9jayBhcyBhbnkpLkNMT1NJTkcgPSAyO1xyXG4gICAgKHdzTW9jayBhcyBhbnkpLkNMT1NFRCA9IDM7XHJcbiAgICBnbG9iYWwuV2ViU29ja2V0ID0gd3NNb2NrIGFzIGFueTtcclxuICAgIFxyXG4gICAgZnVuY3Rpb24gRXJyb3JDb21wb25lbnQoKSB7XHJcbiAgICAgIGNvbnN0IGN0eCA9IF91c2VXZWJTb2NrZXQoKTtcclxuICAgICAgcmV0dXJuIDxkaXYgZGF0YS10ZXN0aWQ9J3dzLWVycm9yJz57Y3R4Lmxhc3RFcnJvciB8fCAnbm9uZSd9PC9kaXY+O1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICByZW5kZXIoXHJcbiAgICAgIDxfV2ViU29ja2V0UHJvdmlkZXI+XHJcbiAgICAgICAgPEVycm9yQ29tcG9uZW50IC8+XHJcbiAgICAgIDwvX1dlYlNvY2tldFByb3ZpZGVyPlxyXG4gICAgKTtcclxuICAgIFxyXG4gICAgLy8gU2ltdWxhdGUgZXJyb3IgZXZlbnRcclxuICAgIGF3YWl0IGFjdChhc3luYyAoKSA9PiB7XHJcbiAgICAgIGlmICh3c0luc3RhbmNlLl9vbmVycm9yKSB7XHJcbiAgICAgICAgd3NJbnN0YW5jZS5fb25lcnJvcihuZXcgRXZlbnQoJ2Vycm9yJykpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICAgIFxyXG4gICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRlc3RJZCgnd3MtZXJyb3InKS50ZXh0Q29udGVudCkubm90LnRvQmUoJ25vbmUnKTtcclxuICB9KTtcclxufSk7XHJcbiJdLCJtYXBwaW5ncyI6Ijs7O0FBQUEsSUFBQUEsTUFBQSxHQUFBQyxzQkFBQSxDQUFBQyxPQUFBO0FBQ0EsSUFBQUMsT0FBQSxHQUFBRCxPQUFBO0FBQ0EsSUFBQUUsaUJBQUEsR0FBQUYsT0FBQTtBQUF3RSxJQUFBRyxXQUFBLEdBQUFILE9BQUE7QUFFeEUsU0FBU0ksYUFBYUEsQ0FBQSxFQUFHO0VBQ3ZCLE1BQU1DLEdBQUcsR0FBRyxJQUFBQywrQkFBYSxFQUFDLENBQUM7RUFDM0Isb0JBQU8sSUFBQUgsV0FBQSxDQUFBSSxHQUFBO0lBQUssZUFBWSxZQUFZO0lBQUFDLFFBQUEsRUFBRUgsR0FBRyxHQUFHLGlCQUFpQixHQUFHO0VBQWdCLENBQU0sQ0FBQztBQUN6RjtBQUVBSSxRQUFRLENBQUMsa0JBQWtCLEVBQUUsTUFBTTtFQUNqQyxJQUFJQyxpQkFBc0I7RUFDMUIsSUFBSUMsV0FBZ0I7RUFDcEJDLFNBQVMsQ0FBQyxNQUFNO0lBQ2RGLGlCQUFpQixHQUFHRyxNQUFNLENBQUNDLFNBQVM7SUFDcENILFdBQVcsR0FBR0ksT0FBTyxDQUFDQyxHQUFHO0VBQzNCLENBQUMsQ0FBQztFQUNGQyxRQUFRLENBQUMsTUFBTTtJQUNiSixNQUFNLENBQUNDLFNBQVMsR0FBR0osaUJBQWlCO0lBQ3BDSyxPQUFPLENBQUNDLEdBQUcsR0FBR0wsV0FBVztFQUMzQixDQUFDLENBQUM7RUFFRixTQUFTTyxrQkFBa0JBLENBQUEsRUFBRztJQUM1QixJQUFJQyxVQUFlLEdBQUcsSUFBSTtJQUMxQixN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