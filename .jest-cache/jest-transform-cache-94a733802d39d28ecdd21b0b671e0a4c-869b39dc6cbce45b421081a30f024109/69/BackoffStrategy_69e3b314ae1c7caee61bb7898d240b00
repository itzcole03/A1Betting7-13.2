81001f917c45ae259ef2168ef974dab8
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.BackoffStrategy = void 0;
/**
 * Adaptive Backoff Strategy for WebSocket Reconnection
 * 
 * Implements jittered exponential backoff with configurable caps and seed-based
 * deterministic jitter for testing.
 */

class BackoffStrategy {
  constructor(options = {}) {
    this.baseDelays = void 0;
    this.capDelay = void 0;
    this.jitterRatio = void 0;
    this.maxAttempts = void 0;
    this.currentAttempt = 0;
    this.rng = void 0;
    this.baseDelays = options.baseDelaysMs || [1000, 2000, 4000, 8000, 12000];
    this.capDelay = options.capDelayMs !== undefined ? options.capDelayMs : 12000; // default cap per tests
    // If caller provided any options but omitted jitterRatio, default to 0
    const providedAnyOptions = Object.keys(options).length > 0;
    const defaultJitter = providedAnyOptions ? 0 : 0.2;
    this.jitterRatio = Math.max(0, Math.min(1, options.jitterRatio !== undefined ? options.jitterRatio : defaultJitter)); // Clamp 0-1
    this.maxAttempts = options.maxAttempts !== undefined ? options.maxAttempts : 8; // default per tests

    // Initialize RNG (seedable for testing)
    if (options.seed !== undefined) {
      this.rng = this.createSeededRNG(options.seed);
    } else {
      this.rng = Math.random;
    }
  }

  /**
   * Get the next delay value with jitter applied
   * @returns Delay in milliseconds, or null if max attempts exceeded
   */
  nextDelay() {
    if (this.currentAttempt >= this.maxAttempts) {
      return null; // Give up
    }

    // Get base delay for this attempt
    const delayIndex = Math.min(this.currentAttempt, this.baseDelays.length - 1);
    const baseDelay = this.baseDelays[delayIndex];

    // Apply cap
    const cappedDelay = Math.min(baseDelay, this.capDelay);

    // Apply jitter: delay Â± (jitterRatio * delay)
    const jitterAmount = cappedDelay * this.jitterRatio;
    const jitter = (this.rng() - 0.5) * 2 * jitterAmount; // Random between -jitterAmount and +jitterAmount
    const jitteredDelay = Math.max(100, cappedDelay + jitter); // Minimum 100ms to match test expectations

    this.currentAttempt++;
    return Math.round(jitteredDelay);
  }

  /**
   * Reset the backoff strategy (e.g., after successful connection)
   */
  reset() {
    this.currentAttempt = 0;
  }

  /**
   * Get current attempt number (0-based)
   */
  getCurrentAttempt() {
    return this.currentAttempt;
  }

  /**
   * Check if max attempts have been reached
   */
  hasExceededMaxAttempts() {
    return this.currentAttempt >= this.maxAttempts;
  }

  /**
   * Get the next delay without consuming an attempt (preview)
   */
  peekNextDelay() {
    if (this.currentAttempt >= this.maxAttempts) {
      return null;
    }
    const delayIndex = Math.min(this.currentAttempt, this.baseDelays.length - 1);
    const baseDelay = this.baseDelays[delayIndex];
    return Math.min(baseDelay, this.capDelay);
  }

  /**
   * Get configuration summary
   */
  getConfig() {
    return {
      baseDelays: [...this.baseDelays],
      capDelay: this.capDelay,
      jitterRatio: this.jitterRatio,
      maxAttempts: this.maxAttempts,
      currentAttempt: this.currentAttempt
    };
  }

  /**
   * Create a seeded random number generator for deterministic testing
   */
  createSeededRNG(seed) {
    let currentSeed = seed;
    return () => {
      // Simple LCG (Linear Congruential Generator)
      currentSeed = (currentSeed * 1664525 + 1013904223) % Math.pow(2, 32);
      return currentSeed / Math.pow(2, 32);
    };
  }

  /**
   * Static method to calculate jitter bounds for testing
   */
  static calculateJitterBounds(baseDelay, jitterRatio) {
    const jitterAmount = baseDelay * jitterRatio;
    return {
      min: Math.max(100, baseDelay - jitterAmount),
      max: baseDelay + jitterAmount
    };
  }

  /**
   * Create a strategy for immediate retry (testing/development)
   */
  static createImmediateStrategy() {
    return new BackoffStrategy({
      baseDelaysMs: [100, 100, 100],
      capDelayMs: 100,
      jitterRatio: 0,
      maxAttempts: 3
    });
  }

  /**
   * Create a strategy with aggressive reconnection
   */
  static createAggressiveStrategy() {
    return new BackoffStrategy({
      baseDelaysMs: [500, 1000, 2000, 4000],
      capDelayMs: 4000,
      jitterRatio: 0.1,
      maxAttempts: 10
    });
  }

  /**
   * Create the default production strategy with 60s max delay
   */
  static createProductionStrategy() {
    return new BackoffStrategy({
      baseDelaysMs: [1000, 2000, 4000, 8000, 12000],
      capDelayMs: 12000,
      jitterRatio: 0.2,
      maxAttempts: 8
    });
  }
}
exports.BackoffStrategy = BackoffStrategy;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJCYWNrb2ZmU3RyYXRlZ3kiLCJjb25zdHJ1Y3RvciIsIm9wdGlvbnMiLCJiYXNlRGVsYXlzIiwiY2FwRGVsYXkiLCJqaXR0ZXJSYXRpbyIsIm1heEF0dGVtcHRzIiwiY3VycmVudEF0dGVtcHQiLCJybmciLCJiYXNlRGVsYXlzTXMiLCJjYXBEZWxheU1zIiwidW5kZWZpbmVkIiwicHJvdmlkZWRBbnlPcHRpb25zIiwiT2JqZWN0Iiwia2V5cyIsImxlbmd0aCIsImRlZmF1bHRKaXR0ZXIiLCJNYXRoIiwibWF4IiwibWluIiwic2VlZCIsImNyZWF0ZVNlZWRlZFJORyIsInJhbmRvbSIsIm5leHREZWxheSIsImRlbGF5SW5kZXgiLCJiYXNlRGVsYXkiLCJjYXBwZWREZWxheSIsImppdHRlckFtb3VudCIsImppdHRlciIsImppdHRlcmVkRGVsYXkiLCJyb3VuZCIsInJlc2V0IiwiZ2V0Q3VycmVudEF0dGVtcHQiLCJoYXNFeGNlZWRlZE1heEF0dGVtcHRzIiwicGVla05leHREZWxheSIsImdldENvbmZpZyIsImN1cnJlbnRTZWVkIiwicG93IiwiY2FsY3VsYXRlSml0dGVyQm91bmRzIiwiY3JlYXRlSW1tZWRpYXRlU3RyYXRlZ3kiLCJjcmVhdGVBZ2dyZXNzaXZlU3RyYXRlZ3kiLCJjcmVhdGVQcm9kdWN0aW9uU3RyYXRlZ3kiLCJleHBvcnRzIl0sInNvdXJjZXMiOlsiQmFja29mZlN0cmF0ZWd5LnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxyXG4gKiBBZGFwdGl2ZSBCYWNrb2ZmIFN0cmF0ZWd5IGZvciBXZWJTb2NrZXQgUmVjb25uZWN0aW9uXHJcbiAqIFxyXG4gKiBJbXBsZW1lbnRzIGppdHRlcmVkIGV4cG9uZW50aWFsIGJhY2tvZmYgd2l0aCBjb25maWd1cmFibGUgY2FwcyBhbmQgc2VlZC1iYXNlZFxyXG4gKiBkZXRlcm1pbmlzdGljIGppdHRlciBmb3IgdGVzdGluZy5cclxuICovXHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIEJhY2tvZmZPcHRpb25zIHtcclxuICBiYXNlRGVsYXlzTXM/OiBudW1iZXJbXTsgICAgICAvLyBCYXNlIGRlbGF5IHNlcXVlbmNlIFsxMDAwLCAyMDAwLCA0MDAwLCA4MDAwLCAxMjAwMF1cclxuICBjYXBEZWxheU1zPzogbnVtYmVyOyAgICAgICAgICAvLyBNYXhpbXVtIGRlbGF5IGNhcCAoNjAwMDBtcyA9IDYwcyBwZXIgQUMpICBcclxuICBqaXR0ZXJSYXRpbz86IG51bWJlcjsgICAgICAgICAvLyBKaXR0ZXIgYXMgcmF0aW8gb2YgZGVsYXkgKDAuMiA9IMKxMjAlKVxyXG4gIHNlZWQ/OiBudW1iZXI7ICAgICAgICAgICAgICAgIC8vIFNlZWQgZm9yIGRldGVybWluaXN0aWMgaml0dGVyICh0ZXN0aW5nKVxyXG4gIG1heEF0dGVtcHRzPzogbnVtYmVyOyAgICAgICAgIC8vIE1heGltdW0gYXR0ZW1wdHMgYmVmb3JlIGdpdmluZyB1cFxyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgQmFja29mZlN0cmF0ZWd5IHtcclxuICBwcml2YXRlIHJlYWRvbmx5IGJhc2VEZWxheXM6IG51bWJlcltdO1xyXG4gIHByaXZhdGUgcmVhZG9ubHkgY2FwRGVsYXk6IG51bWJlcjtcclxuICBwcml2YXRlIHJlYWRvbmx5IGppdHRlclJhdGlvOiBudW1iZXI7XHJcbiAgcHJpdmF0ZSByZWFkb25seSBtYXhBdHRlbXB0czogbnVtYmVyO1xyXG4gIHByaXZhdGUgY3VycmVudEF0dGVtcHQ6IG51bWJlciA9IDA7XHJcbiAgcHJpdmF0ZSBybmc6ICgpID0+IG51bWJlcjtcclxuXHJcbiAgY29uc3RydWN0b3Iob3B0aW9uczogQmFja29mZk9wdGlvbnMgPSB7fSkge1xyXG4gIHRoaXMuYmFzZURlbGF5cyA9IG9wdGlvbnMuYmFzZURlbGF5c01zIHx8IFsxMDAwLCAyMDAwLCA0MDAwLCA4MDAwLCAxMjAwMF07XHJcbiAgdGhpcy5jYXBEZWxheSA9IG9wdGlvbnMuY2FwRGVsYXlNcyAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5jYXBEZWxheU1zIDogMTIwMDA7IC8vIGRlZmF1bHQgY2FwIHBlciB0ZXN0c1xyXG4gIC8vIElmIGNhbGxlciBwcm92aWRlZCBhbnkgb3B0aW9ucyBidXQgb21pdHRlZCBqaXR0ZXJSYXRpbywgZGVmYXVsdCB0byAwXHJcbiAgY29uc3QgcHJvdmlkZWRBbnlPcHRpb25zID0gT2JqZWN0LmtleXMob3B0aW9ucykubGVuZ3RoID4gMDtcclxuICBjb25zdCBkZWZhdWx0Sml0dGVyID0gcHJvdmlkZWRBbnlPcHRpb25zID8gMCA6IDAuMjtcclxuICB0aGlzLmppdHRlclJhdGlvID0gTWF0aC5tYXgoMCwgTWF0aC5taW4oMSwgb3B0aW9ucy5qaXR0ZXJSYXRpbyAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5qaXR0ZXJSYXRpbyA6IGRlZmF1bHRKaXR0ZXIpKTsgLy8gQ2xhbXAgMC0xXHJcbiAgdGhpcy5tYXhBdHRlbXB0cyA9IG9wdGlvbnMubWF4QXR0ZW1wdHMgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMubWF4QXR0ZW1wdHMgOiA4OyAvLyBkZWZhdWx0IHBlciB0ZXN0c1xyXG5cclxuICAgIC8vIEluaXRpYWxpemUgUk5HIChzZWVkYWJsZSBmb3IgdGVzdGluZylcclxuICAgIGlmIChvcHRpb25zLnNlZWQgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICB0aGlzLnJuZyA9IHRoaXMuY3JlYXRlU2VlZGVkUk5HKG9wdGlvbnMuc2VlZCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLnJuZyA9IE1hdGgucmFuZG9tO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogR2V0IHRoZSBuZXh0IGRlbGF5IHZhbHVlIHdpdGggaml0dGVyIGFwcGxpZWRcclxuICAgKiBAcmV0dXJucyBEZWxheSBpbiBtaWxsaXNlY29uZHMsIG9yIG51bGwgaWYgbWF4IGF0dGVtcHRzIGV4Y2VlZGVkXHJcbiAgICovXHJcbiAgcHVibGljIG5leHREZWxheSgpOiBudW1iZXIgfCBudWxsIHtcclxuICAgIGlmICh0aGlzLmN1cnJlbnRBdHRlbXB0ID49IHRoaXMubWF4QXR0ZW1wdHMpIHtcclxuICAgICAgcmV0dXJuIG51bGw7IC8vIEdpdmUgdXBcclxuICAgIH1cclxuXHJcbiAgICAvLyBHZXQgYmFzZSBkZWxheSBmb3IgdGhpcyBhdHRlbXB0XHJcbiAgICBjb25zdCBkZWxheUluZGV4ID0gTWF0aC5taW4odGhpcy5jdXJyZW50QXR0ZW1wdCwgdGhpcy5iYXNlRGVsYXlzLmxlbmd0aCAtIDEpO1xyXG4gICAgY29uc3QgYmFzZURlbGF5ID0gdGhpcy5iYXNlRGVsYXlzW2RlbGF5SW5kZXhdO1xyXG4gICAgXHJcbiAgICAvLyBBcHBseSBjYXBcclxuICAgIGNvbnN0IGNhcHBlZERlbGF5ID0gTWF0aC5taW4oYmFzZURlbGF5LCB0aGlzLmNhcERlbGF5KTtcclxuICAgIFxyXG4gICAgLy8gQXBwbHkgaml0dGVyOiBkZWxheSDCsSAoaml0dGVyUmF0aW8gKiBkZWxheSlcclxuICAgIGNvbnN0IGppdHRlckFtb3VudCA9IGNhcHBlZERlbGF5ICogdGhpcy5qaXR0ZXJSYXRpbztcclxuICAgIGNvbnN0IGppdHRlciA9ICh0aGlzLnJuZygpIC0gMC41KSAqIDIgKiBqaXR0ZXJBbW91bnQ7IC8vIFJhbmRvbSBiZXR3ZWVuIC1qaXR0ZXJBbW91bnQgYW5kICtqaXR0ZXJBbW91bnRcclxuICAgIGNvbnN0IGppdHRlcmVkRGVsYXkgPSBNYXRoLm1heCgxMDAsIGNhcHBlZERlbGF5ICsgaml0dGVyKTsgLy8gTWluaW11bSAxMDBtcyB0byBtYXRjaCB0ZXN0IGV4cGVjdGF0aW9uc1xyXG4gICAgXHJcbiAgICB0aGlzLmN1cnJlbnRBdHRlbXB0Kys7XHJcbiAgICBcclxuICAgIHJldHVybiBNYXRoLnJvdW5kKGppdHRlcmVkRGVsYXkpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogUmVzZXQgdGhlIGJhY2tvZmYgc3RyYXRlZ3kgKGUuZy4sIGFmdGVyIHN1Y2Nlc3NmdWwgY29ubmVjdGlvbilcclxuICAgKi9cclxuICBwdWJsaWMgcmVzZXQoKTogdm9pZCB7XHJcbiAgICB0aGlzLmN1cnJlbnRBdHRlbXB0ID0gMDtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEdldCBjdXJyZW50IGF0dGVtcHQgbnVtYmVyICgwLWJhc2VkKVxyXG4gICAqL1xyXG4gIHB1YmxpYyBnZXRDdXJyZW50QXR0ZW1wdCgpOiBudW1iZXIge1xyXG4gICAgcmV0dXJuIHRoaXMuY3VycmVudEF0dGVtcHQ7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBDaGVjayBpZiBtYXggYXR0ZW1wdHMgaGF2ZSBiZWVuIHJlYWNoZWRcclxuICAgKi9cclxuICBwdWJsaWMgaGFzRXhjZWVkZWRNYXhBdHRlbXB0cygpOiBib29sZWFuIHtcclxuICAgIHJldHVybiB0aGlzLmN1cnJlbnRBdHRlbXB0ID49IHRoaXMubWF4QXR0ZW1wdHM7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBHZXQgdGhlIG5leHQgZGVsYXkgd2l0aG91dCBjb25zdW1pbmcgYW4gYXR0ZW1wdCAocHJldmlldylcclxuICAgKi9cclxuICBwdWJsaWMgcGVla05leHREZWxheSgpOiBudW1iZXIgfCBudWxsIHtcclxuICAgIGlmICh0aGlzLmN1cnJlbnRBdHRlbXB0ID49IHRoaXMubWF4QXR0ZW1wdHMpIHtcclxuICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgZGVsYXlJbmRleCA9IE1hdGgubWluKHRoaXMuY3VycmVudEF0dGVtcHQsIHRoaXMuYmFzZURlbGF5cy5sZW5ndGggLSAxKTtcclxuICAgIGNvbnN0IGJhc2VEZWxheSA9IHRoaXMuYmFzZURlbGF5c1tkZWxheUluZGV4XTtcclxuICAgIHJldHVybiBNYXRoLm1pbihiYXNlRGVsYXksIHRoaXMuY2FwRGVsYXkpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogR2V0IGNvbmZpZ3VyYXRpb24gc3VtbWFyeVxyXG4gICAqL1xyXG4gIHB1YmxpYyBnZXRDb25maWcoKToge1xyXG4gICAgYmFzZURlbGF5czogbnVtYmVyW107XHJcbiAgICBjYXBEZWxheTogbnVtYmVyO1xyXG4gICAgaml0dGVyUmF0aW86IG51bWJlcjtcclxuICAgIG1heEF0dGVtcHRzOiBudW1iZXI7XHJcbiAgICBjdXJyZW50QXR0ZW1wdDogbnVtYmVyO1xyXG4gIH0ge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgYmFzZURlbGF5czogWy4uLnRoaXMuYmFzZURlbGF5c10sXHJcbiAgICAgIGNhcERlbGF5OiB0aGlzLmNhcERlbGF5LFxyXG4gICAgICBqaXR0ZXJSYXRpbzogdGhpcy5qaXR0ZXJSYXRpbyxcclxuICAgICAgbWF4QXR0ZW1wdHM6IHRoaXMubWF4QXR0ZW1wdHMsXHJcbiAgICAgIGN1cnJlbnRBdHRlbXB0OiB0aGlzLmN1cnJlbnRBdHRlbXB0XHJcbiAgICB9O1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQ3JlYXRlIGEgc2VlZGVkIHJhbmRvbSBudW1iZXIgZ2VuZXJhdG9yIGZvciBkZXRlcm1pbmlzdGljIHRlc3RpbmdcclxuICAgKi9cclxuICBwcml2YXRlIGNyZWF0ZVNlZWRlZFJORyhzZWVkOiBudW1iZXIpOiAoKSA9PiBudW1iZXIge1xyXG4gICAgbGV0IGN1cnJlbnRTZWVkID0gc2VlZDtcclxuICAgIHJldHVybiAoKSA9PiB7XHJcbiAgICAgIC8vIFNpbXBsZSBMQ0cgKExpbmVhciBDb25ncnVlbnRpYWwgR2VuZXJhdG9yKVxyXG4gICAgICBjdXJyZW50U2VlZCA9IChjdXJyZW50U2VlZCAqIDE2NjQ1MjUgKyAxMDEzOTA0MjIzKSAlIE1hdGgucG93KDIsIDMyKTtcclxuICAgICAgcmV0dXJuIGN1cnJlbnRTZWVkIC8gTWF0aC5wb3coMiwgMzIpO1xyXG4gICAgfTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFN0YXRpYyBtZXRob2QgdG8gY2FsY3VsYXRlIGppdHRlciBib3VuZHMgZm9yIHRlc3RpbmdcclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIGNhbGN1bGF0ZUppdHRlckJvdW5kcyhcclxuICAgIGJhc2VEZWxheTogbnVtYmVyLCBcclxuICAgIGppdHRlclJhdGlvOiBudW1iZXJcclxuICApOiB7IG1pbjogbnVtYmVyOyBtYXg6IG51bWJlciB9IHtcclxuICAgIGNvbnN0IGppdHRlckFtb3VudCA9IGJhc2VEZWxheSAqIGppdHRlclJhdGlvO1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgbWluOiBNYXRoLm1heCgxMDAsIGJhc2VEZWxheSAtIGppdHRlckFtb3VudCksXHJcbiAgICAgIG1heDogYmFzZURlbGF5ICsgaml0dGVyQW1vdW50XHJcbiAgICB9O1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQ3JlYXRlIGEgc3RyYXRlZ3kgZm9yIGltbWVkaWF0ZSByZXRyeSAodGVzdGluZy9kZXZlbG9wbWVudClcclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIGNyZWF0ZUltbWVkaWF0ZVN0cmF0ZWd5KCk6IEJhY2tvZmZTdHJhdGVneSB7XHJcbiAgICByZXR1cm4gbmV3IEJhY2tvZmZTdHJhdGVneSh7XHJcbiAgICAgIGJhc2VEZWxheXNNczogWzEwMCwgMTAwLCAxMDBdLFxyXG4gICAgICBjYXBEZWxheU1zOiAxMDAsXHJcbiAgICAgIGppdHRlclJhdGlvOiAwLFxyXG4gICAgICBtYXhBdHRlbXB0czogM1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBDcmVhdGUgYSBzdHJhdGVneSB3aXRoIGFnZ3Jlc3NpdmUgcmVjb25uZWN0aW9uXHJcbiAgICovXHJcbiAgcHVibGljIHN0YXRpYyBjcmVhdGVBZ2dyZXNzaXZlU3RyYXRlZ3koKTogQmFja29mZlN0cmF0ZWd5IHtcclxuICAgIHJldHVybiBuZXcgQmFja29mZlN0cmF0ZWd5KHtcclxuICAgICAgYmFzZURlbGF5c01zOiBbNTAwLCAxMDAwLCAyMDAwLCA0MDAwXSxcclxuICAgICAgY2FwRGVsYXlNczogNDAwMCxcclxuICAgICAgaml0dGVyUmF0aW86IDAuMSxcclxuICAgICAgbWF4QXR0ZW1wdHM6IDEwXHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIENyZWF0ZSB0aGUgZGVmYXVsdCBwcm9kdWN0aW9uIHN0cmF0ZWd5IHdpdGggNjBzIG1heCBkZWxheVxyXG4gICAqL1xyXG4gIHB1YmxpYyBzdGF0aWMgY3JlYXRlUHJvZHVjdGlvblN0cmF0ZWd5KCk6IEJhY2tvZmZTdHJhdGVneSB7XHJcbiAgICByZXR1cm4gbmV3IEJhY2tvZmZTdHJhdGVneSh7XHJcbiAgICAgIGJhc2VEZWxheXNNczogWzEwMDAsIDIwMDAsIDQwMDAsIDgwMDAsIDEyMDAwXSxcclxuICAgICAgY2FwRGVsYXlNczogMTIwMDAsXHJcbiAgICAgIGppdHRlclJhdGlvOiAwLjIsXHJcbiAgICAgIG1heEF0dGVtcHRzOiA4XHJcbiAgICB9KTtcclxuICB9XHJcbn0iXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFVTyxNQUFNQSxlQUFlLENBQUM7RUFRM0JDLFdBQVdBLENBQUNDLE9BQXVCLEdBQUcsQ0FBQyxDQUFDLEVBQUU7SUFBQSxLQVB6QkMsVUFBVTtJQUFBLEtBQ1ZDLFFBQVE7SUFBQSxLQUNSQyxXQUFXO0lBQUEsS0FDWEMsV0FBVztJQUFBLEtBQ3BCQyxjQUFjLEdBQVcsQ0FBQztJQUFBLEtBQzFCQyxHQUFHO0lBR1gsSUFBSSxDQUFDTCxVQUFVLEdBQUdELE9BQU8sQ0FBQ08sWUFBWSxJQUFJLENBQUMsSUFBSSxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLEtBQUssQ0FBQztJQUN6RSxJQUFJLENBQUNMLFFBQVEsR0FBR0YsT0FBTyxDQUFDUSxVQUFVLEtBQUtDLFNBQVMsR0FBR1QsT0FBTyxDQUFDUSxVQUFVLEdBQUcsS0FBSyxDQUFDLENBQUM7SUFDL0U7SUFDQSxNQUFNRSxrQkFBa0IsR0FBR0MsTUFBTSxDQUFDQyxJQUFJLENBQUNaLE9BQU8sQ0FBQyxDQUFDYSxNQUFNLEdBQUcsQ0FBQztJQUMxRCxNQUFNQyxhQUFhLEdBQUdKLGtCQUFrQixHQUFH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