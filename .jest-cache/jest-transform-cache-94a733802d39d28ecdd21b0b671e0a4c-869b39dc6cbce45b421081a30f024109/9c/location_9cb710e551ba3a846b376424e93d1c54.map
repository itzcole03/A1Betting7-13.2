{"version":3,"names":["getLocation","window","location","Error","exports","getQueryParams","search","queryString","undefined","replace","Object","fromEntries","URLSearchParams","navigateTo","url","URL","origin","assign","reloadPage","reload"],"sources":["location.ts"],"sourcesContent":["// Utility functions for interacting with window.location, abstracted for robust mocking in tests and SSR safety.\n\n/**\n * Returns the current window.location object.\n * Throws if called outside a browser environment (SSR/test safe).\n * Useful for mocking in tests and SSR safety.\n * @returns {Location} The window.location object.\n * @throws {Error} If called outside a browser environment.\n */\nexport const getLocation = (): Location => {\n  if (typeof window === 'undefined' || !window.location) {\n    throw new Error('getLocation: Can only be used in a browser environment.');\n  }\n  return window.location;\n};\n\n/**\n * Parses a query string (or the current URL's query string) into an object.\n * Handles empty, malformed, or repeated parameters robustly.\n * SSR/test safe: if window is not defined and no search is provided, returns empty object.\n *\n * @param {string} [search] - Optional query string (e.g., '?foo=1&bar=2'). If omitted, uses window.location.search.\n * @returns {Record<string, string>} An object mapping query parameter names to values. If a parameter appears multiple times, the last value is used.\n */\nexport const getQueryParams = (search?: string): Record<string, string> => {\n  let queryString = '';\n  if (search !== undefined) {\n    queryString = search.replace(/^\\?/, '');\n  } else if (typeof window !== 'undefined' && window.location) {\n    queryString = window.location.search.replace(/^\\?/, '');\n  } else {\n    // SSR/test environment: no window, no search provided\n    return {};\n  }\n  if (!queryString) return {};\n  // URLSearchParams handles malformed input gracefully; last value wins for repeated keys\n  return Object.fromEntries(new URLSearchParams(queryString));\n};\n\n/**\n * Navigates the browser to the specified URL.\n * Throws if called outside a browser environment (SSR/test safe).\n * @param url - The URL to navigate to. Should be a valid absolute or relative URL.\n * @throws {Error} If called outside a browser environment or if the URL is invalid.\n */\nexport const navigateTo = (url: string): void => {\n  if (typeof window === 'undefined' || !window.location) {\n    throw new Error('navigateTo: Can only be used in a browser environment.');\n  }\n  try {\n    // Validate URL (relative or absolute)\n     \n    new URL(url, window.location.origin);\n  } catch {\n    throw new Error(`navigateTo: Invalid URL: ${url}`);\n  }\n  window.location.assign(url);\n};\n\n/**\n * Reloads the current page.\n * Throws if called outside a browser environment (SSR/test safe).\n * @throws {Error} If called outside a browser environment.\n */\nexport const reloadPage = (): void => {\n  if (typeof window === 'undefined' || !window.location) {\n    throw new Error('reloadPage: Can only be used in a browser environment.');\n  }\n  window.location.reload();\n};\n"],"mappings":";;;;;;AAAA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACO,MAAMA,WAAW,GAAGA,CAAA,KAAgB;EACzC,IAAI,OAAOC,MAAM,KAAK,WAAW,IAAI,CAACA,MAAM,CAACC,QAAQ,EAAE;IACrD,MAAM,IAAIC,KAAK,CAAC,yDAAyD,CAAC;EAC5E;EACA,OAAOF,MAAM,CAACC,QAAQ;AACxB,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAPAE,OAAA,CAAAJ,WAAA,GAAAA,WAAA;AAQO,MAAMK,cAAc,GAAIC,MAAe,IAA6B;EACzE,IAAIC,WAAW,GAAG,EAAE;EACpB,IAAID,MAAM,KAAKE,SAAS,EAAE;IACxBD,WAAW,GAAGD,MAAM,CAACG,OAAO,CAAC,KAAK,EAAE,EAAE,CAAC;EACzC,CAAC,MAAM,IAAI,OAAOR,MAAM,KAAK,WAAW,IAAIA,MAAM,CAACC,QAAQ,EAAE;IAC3DK,WAAW,GAAGN,MAAM,CAACC,QAAQ,CAACI,MAAM,CAACG,OAAO,CAAC,KAAK,EAAE,EAAE,CAAC;EACzD,CAAC,MAAM;IACL;IACA,OAAO,CAAC,CAAC;EACX;EACA,IAAI,CAACF,WAAW,EAAE,OAAO,CAAC,CAAC;EAC3B;EACA,OAAOG,MAAM,CAACC,WAAW,CAAC,IAAIC,eAAe,CAACL,WAAW,CAAC,CAAC;AAC7D,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AALAH,OAAA,CAAAC,cAAA,GAAAA,cAAA;AAMO,MAAMQ,UAAU,GAAIC,GAAW,IAAW;EAC/C,IAAI,OAAOb,MAAM,KAAK,WAAW,IAAI,CAACA,MAAM,CAACC,QAAQ,EAAE;IACrD,MAAM,IAAIC,KAAK,CAAC,wDAAwD,CAAC;EAC3E;EACA,IAAI;IACF;;IAEA,IAAIY,GAAG,CAACD,GAAG,EAAEb,MAAM,CAACC,QAAQ,CAACc,MAAM,CAAC;EACtC,CAAC,CAAC,MAAM;IACN,MAAM,IAAIb,KAAK,CAAC,4BAA4BW,GAAG,EAAE,CAAC;EACpD;EACAb,MAAM,CAACC,QAAQ,CAACe,MAAM,CAACH,GAAG,CAAC;AAC7B,CAAC;;AAED;AACA;AACA;AACA;AACA;AAJAV,OAAA,CAAAS,UAAA,GAAAA,UAAA;AAKO,MAAMK,UAAU,GAAGA,CAAA,KAAY;EACpC,IAAI,OAAOjB,MAAM,KAAK,WAAW,IAAI,CAACA,MAAM,CAACC,QAAQ,EAAE;IACrD,MAAM,IAAIC,KAAK,CAAC,wDAAwD,CAAC;EAC3E;EACAF,MAAM,CAACC,QAAQ,CAACiB,MAAM,CAAC,CAAC;AAC1B,CAAC;AAACf,OAAA,CAAAc,UAAA,GAAAA,UAAA","ignoreList":[]}