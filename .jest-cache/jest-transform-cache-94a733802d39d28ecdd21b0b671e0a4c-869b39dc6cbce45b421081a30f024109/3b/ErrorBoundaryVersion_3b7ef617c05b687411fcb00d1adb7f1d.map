{"file":"C:\\Users\\bcmad\\Downloads\\A1Betting7-13.2\\frontend\\src\\components\\ErrorBoundaryVersion.tsx","mappings":";;;;;;;AAAA,kDAA0B;AAC1B,oEAAwD;AAYxD,gCAAgC;AAChC,IAAI,uBAAuB,GAAG,CAAC,CAAC;AAEhC;;;GAGG;AACH,MAAa,oBAAqB,SAAQ,eAAK,CAAC,SAG/C;IACC,YAAY,KAAgC;QAC1C,KAAK,CAAC,KAAK,CAAC,CAAC;QACb,IAAI,CAAC,KAAK,GAAG;YACX,QAAQ,EAAE,KAAK;YACf,KAAK,EAAE,IAAI;YACX,aAAa,EAAE,CAAC;SACjB,CAAC;IACJ,CAAC;IAED,MAAM,CAAC,wBAAwB,CAAC,KAAY;QAC1C,uBAAuB,EAAE,CAAC;QAC1B,OAAO;YACL,QAAQ,EAAE,IAAI;YACd,KAAK;YACL,aAAa,EAAE,uBAAuB;SACvC,CAAC;IACJ,CAAC;IAED,iBAAiB,CAAC,KAAY,EAAE,IAAqB;QACnD,MAAM,EAAE,aAAa,EAAE,GAAG,IAAI,CAAC,KAAK,CAAC;QACrC,MAAM,cAAc,GAAG,KAAK,CAAC,KAAK,EAAE,KAAK,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,EAAE,IAAI,EAAE,IAAI,UAAU,CAAC;QAEzE,MAAM,UAAU,GAAG;YACjB,EAAE,EAAE,aAAa;YACjB,OAAO,EAAE,KAAK,CAAC,OAAO;YACtB,IAAI,EAAE,KAAK,CAAC,IAAI;YAChB,cAAc;YACd,qBAAqB,EAAE,CAAC,CAAC,IAAI,CAAC,cAAc;YAC5C,OAAO,EAAE,IAAI,IAAI,EAAE,CAAC,WAAW,EAAE;SAClC,CAAC;QAEF,sCAAsC;QACtC,OAAO,CAAC,KAAK,CAAC,uBAAuB,IAAI,CAAC,SAAS,CAAC,UAAU,CAAC,EAAE,CAAC,CAAC;QAEnE,4EAA4E;QAC5E,IAAI,KAAK,CAAC,OAAO,CAAC,QAAQ,CAAC,4CAA4C,CAAC,EAAE,CAAC;YACzE,MAAM,gBAAgB,GAAG,IAAA,8BAAS,EAAC,kBAAkB,EAAE,CAAC,CAAC,CAAC;YAC1D,IAAI,gBAAgB,CAAC,MAAM,GAAG,CAAC,EAAE,CAAC;gBAChC,sCAAsC;gBACtC,OAAO,CAAC,KAAK,CAAC,oDAAoD,EAAE,gBAAgB,CAAC,CAAC;YACxF,CAAC;QACH,CAAC;QAED,sCAAsC;QACtC,OAAO,CAAC,KAAK,CAAC,+CAA+C,EAAE,KAAK,EAAE,IAAI,CAAC,CAAC;IAC9E,CAAC;IAED,MAAM;QACJ,IAAI,IAAI,CAAC,KAAK,CAAC,QAAQ,EAAE,CAAC;YACxB,OAAO,CACL,iCAAK,KAAK,EAAE,EAAE,OAAO,EAAE,EAAE,EAAE,KAAK,EAAE,SAAS,EAAE,UAAU,EAAE,SAAS,EAAE,YAAY,EAAE,CAAC,EAAE,aACnF,2EAAiC,IAAI,CAAC,KAAK,CAAC,aAAa,SAAO,EAChE,wCACG,IAAI,CAAC,KAAK,CAAC,KAAK,EAAE,OAAO;4BACxB,8DAA8D,GAC9D,EACJ,qCAAS,KAAK,EAAE,EAAE,SAAS,EAAE,EAAE,EAAE,QAAQ,EAAE,OAAO,EAAE,OAAO,EAAE,GAAG,EAAE,aAChE,oEAAoC,EACpC,gCAAK,KAAK,EAAE,EAAE,SAAS,EAAE,CAAC,EAAE,QAAQ,EAAE,OAAO,EAAE,QAAQ,EAAE,MAAM,EAAE,YAC9D,IAAI,CAAC,KAAK,CAAC,KAAK,EAAE,KAAK,IAAI,0BAA0B,GAClD,IACE,IACN,CACP,CAAC;QACJ,CAAC;QACD,OAAO,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC;IAC7B,CAAC;CACF;AAvED,oDAuEC","names":[],"sources":["C:\\Users\\bcmad\\Downloads\\A1Betting7-13.2\\frontend\\src\\components\\ErrorBoundaryVersion.tsx"],"sourcesContent":["import React from 'react';\r\nimport { getRecent } from '../debug/runtimeEventBuffer';\r\n\r\ninterface ErrorBoundaryVersionProps {\r\n  children: React.ReactNode;\r\n}\r\n\r\ninterface ErrorBoundaryVersionState {\r\n  hasError: boolean;\r\n  error: Error | null;\r\n  correlationId: number;\r\n}\r\n\r\n// Global correlation ID counter\r\nlet errorCorrelationCounter = 0;\r\n\r\n/**\r\n * Enhanced Error boundary for API version-related failures and runtime errors.\r\n * Displays a user-friendly message and logs the error with correlation to diagnostic events.\r\n */\r\nexport class ErrorBoundaryVersion extends React.Component<\r\n  ErrorBoundaryVersionProps,\r\n  ErrorBoundaryVersionState\r\n> {\r\n  constructor(props: ErrorBoundaryVersionProps) {\r\n    super(props);\r\n    this.state = { \r\n      hasError: false, \r\n      error: null,\r\n      correlationId: 0 \r\n    };\r\n  }\r\n\r\n  static getDerivedStateFromError(error: Error) {\r\n    errorCorrelationCounter++;\r\n    return { \r\n      hasError: true, \r\n      error,\r\n      correlationId: errorCorrelationCounter\r\n    };\r\n  }\r\n\r\n  componentDidCatch(error: Error, info: React.ErrorInfo) {\r\n    const { correlationId } = this.state;\r\n    const firstStackLine = error.stack?.split('\\n')[1]?.trim() || 'No stack';\r\n    \r\n    const errorTrace = {\r\n      id: correlationId,\r\n      message: error.message,\r\n      name: error.name,\r\n      firstStackLine,\r\n      componentStackPresent: !!info.componentStack,\r\n      timeISO: new Date().toISOString()\r\n    };\r\n\r\n    // eslint-disable-next-line no-console\r\n    console.error(`[RuntimeErrorTrace] ${JSON.stringify(errorTrace)}`);\r\n\r\n    // Check for the specific \"Cannot convert undefined or null to object\" error\r\n    if (error.message.includes('Cannot convert undefined or null to object')) {\r\n      const nullAccessEvents = getRecent('NullObjectAccess', 5);\r\n      if (nullAccessEvents.length > 0) {\r\n        // eslint-disable-next-line no-console\r\n        console.error('[NullObjectCorrelation] Recent null access events:', nullAccessEvents);\r\n      }\r\n    }\r\n\r\n    // eslint-disable-next-line no-console\r\n    console.error('[ErrorBoundaryVersion] Version-related error:', error, info);\r\n  }\r\n\r\n  render() {\r\n    if (this.state.hasError) {\r\n      return (\r\n        <div style={{ padding: 24, color: '#b91c1c', background: '#fef2f2', borderRadius: 8 }}>\r\n          <h2>Runtime Error Detected (ID: {this.state.correlationId})</h2>\r\n          <p>\r\n            {this.state.error?.message ||\r\n              'A runtime error occurred. Please refresh or contact support.'}\r\n          </p>\r\n          <details style={{ marginTop: 16, fontSize: '0.9em', opacity: 0.8 }}>\r\n            <summary>Technical Details</summary>\r\n            <pre style={{ marginTop: 8, fontSize: '0.8em', overflow: 'auto' }}>\r\n              {this.state.error?.stack || 'No stack trace available'}\r\n            </pre>\r\n          </details>\r\n        </div>\r\n      );\r\n    }\r\n    return this.props.children;\r\n  }\r\n}\r\n"],"version":3}